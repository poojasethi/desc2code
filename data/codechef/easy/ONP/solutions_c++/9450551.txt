#include<iostream>
#include<string>
#include<stack>
using namespace std;
stack <char> s;
int preference(char ch) {
	if(ch=='+'||ch=='-')
	    return 1;
	else if(ch=='*'||ch=='/'||ch=='%')
	    return 2;
	else if(ch=='^')
	    return 3;
	else
	    return 0;		    
}

void popequal(char symbol) {
	while(preference(s.top())==preference(symbol)) {
		cout<<s.top();
		s.pop();
	}
	s.push(symbol);
}

void popgreat(char symbol) {
	while(preference(s.top())>=preference(symbol)) {
		cout<<s.top();
		s.pop();
	}
	s.push(symbol);
}

void pop() {
	while(!(s.top()=='(')) {
		cout<<s.top();
		s.pop();
	}
	s.pop();
}

int main() {
	int t,n,i,k;
	string c= ")";
	string exp;
	cin>>t;
	while(t--) {
		s.push('(');
		cin>>exp;
		exp.append(c);
		k=exp.length();
		for(i=0;i<k;i++) {
			if(isalpha(exp[i])) {
				cout<<exp[i];
			}
			else if(exp[i]=='(') {
				s.push(exp[i]);
			}
			else if(!(isalpha(exp[i])||(exp[i]=='(')||(exp[i]==')'))) {
				if(preference(s.top())<preference(exp[i])) {
					s.push(exp[i]);
				}
				else if(preference(s.top())==preference(exp[i])) {
					popequal(exp[i]);
				}
				else if(preference(s.top())>preference(exp[i])) {
					popgreat(exp[i]);
				}
			}
			else if(exp[i]==')') {
				pop();
			}
		}
		cout<<endl;
	}
	
	return 0;
}