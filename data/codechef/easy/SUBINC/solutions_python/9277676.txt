# Solution to "Count Subarrays" for CodeChef
# by Peter Mattsson (quantum.caffeine@gmail.com)

import sys

def read(inFile):
    t = int(inFile.readline())
    for _ in xrange(t):
        n = int(inFile.readline())
        yield n, [int(x) for x in inFile.readline().split()]

def write(outFile, answer):
    outFile.write(str(answer)+'\n')

def solve(n, array):
    total = 0
    start = 0
    while start < n:
        end = start
        while end < n - 1 and array[end+1] >= array[end]:
            end += 1
        r = end - start + 1
        total += r*(r+1)/2
        start = end + 1
    return total

for case in read(sys.stdin):
    write(sys.stdout, solve(*case))
