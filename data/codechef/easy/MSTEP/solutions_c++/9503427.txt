#include<stdio.h>
#include<stdlib.h>
//#include<conio.h>
 
inline int read_int(){register char c=getchar_unlocked();while(c<'0' || c>'9')c=getchar_unlocked();int ret=0;while(c>='0'&&c<='9'){ret=(ret<<3)+(ret<<1)+c-48;c=getchar_unlocked();}return ret;}
inline void fastwrite(long long int a){char snum[20];int i=0;do{snum[i++]=a%10+48;a=a/10;}while(a!=0);i=i-1;while(i>=0)putchar_unlocked(snum[i--]);putchar_unlocked('\n');}
 
int main()
{
    short arr[250001][2];
    int range;
    int n,t,steps,i,j,num;
    
    //scanf("%d",&t);
    t=read_int();
    while(t--)
    {
              //scanf("%d",&n);
              n=read_int();
              range=n*n;
              
              for(j=0;j<n;j++)
                 for(i=0;i<n;i++)
                 {
                                 //scanf("%d",&num);
                                 num=read_int();
                                 arr[num][0]=i;
                                 arr[num][1]=j;
                 }
              
              steps=0;
              
              for(i=2;i<=range;i++)
              {
                    steps=steps + abs(arr[i-1][0]-arr[i][0]) + 
                                  abs(arr[i-1][1]-arr[i][1]);
              }                     
              
              //printf("%d\n",steps);
              fastwrite(steps);
    }
    
    //getche();
    return 0;
} 