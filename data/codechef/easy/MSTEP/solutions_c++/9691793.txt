#include <iostream>
#define N 500

using namespace std;

int t,n,i,j,k,p;
long long step;
struct mat{
    int x,y;
}m[N*N+1];

int modulusz(int a){
    if(a>=0) return a;
    return -a;
}

int main()
{
    cin>>t;
    for(i=1;i<=t;++i){
        cin>>n;
        for(j=1;j<=n;j++)
        for(k=1;k<=n;k++){
            cin>>p;
            m[p].x=j;m[p].y=k;
        }
        step = 0;
        for(j = 2; j <= n*n; j++)
            step+=modulusz(m[j].x-m[j-1].x)+modulusz(m[j].y-m[j-1].y);

        cout<<step<<"\n";
    }
    return 0;
}
