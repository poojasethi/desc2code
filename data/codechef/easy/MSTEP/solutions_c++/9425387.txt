#include<bits/stdc++.h>
using namespace std;
int main(){
    int t=0;
    scanf("%d",&t);
    while(t>0){
    int n=0,k=0,storex=0,storey=0,x=0,y=0,steps=0;
    scanf("%d",&n);
    map< int,pair<int, int> > mymap;
    for(int i=0;i<n;i++){
     for(int j=0;j<n;j++){
        scanf("%d",&k);
        pair<int,int> p(i,j);
        pair< int,pair<int, int> > mypair;
        mypair.first =k;
        mypair.second = p;
        mymap.insert(mypair);
     }
    }
    storex=mymap.find(1)->second.first;
    storey=mymap.find(1)->second.second;
   for(int key =2;key<=n*n;key++){
        x=mymap.find(key)->second.first;
        y=mymap.find(key)->second.second;
        steps += (abs(storex-x)+abs(storey-y));
        storex =x;
        storey =y;
   }
   cout<<steps<<endl;
    t--;
 }
return 0;
}
