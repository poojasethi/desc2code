#include <iostream>
#include<stdlib.h>
using namespace std;

int main()
{
    int t, n;
    int row[251001];
    int col[251001];
    int arr[501][501];

        scanf("%d", &t);
        while(t--){
                scanf("%d", &n);
                for(int i=1; i<=n; i++){
                        for(int j=1; j<=n; j++){
                                scanf("%d", &arr[i][j]);
                        }
                }

                 if(n==1){
                        printf("0\n");
                        continue;
                }

                for(int i=1; i<=n; i++){
                        for(int j=1; j<=n; j++){
                                row[arr[i][j]] = i;
                                col[arr[i][j]] = j;
                        }
                }

                int steps=0;
                for(int i=2; i<=n*n; i++){
                        //printf("num: %d ==> %d %d\n", i, row[i], col[i]);
                        steps = steps+abs(row[i]-row[i-1])+abs(col[i]-col[i-1]);
                }
                printf("%d\n", steps);
        }

    return 0;
}
