#include<iostream>
#include<stdio.h>
using namespace std;
int abs(int x){
if (x<0)
x=-x;
return x;
}
int main(){
    int N,T;
    cin>>T;
while(T>0){
    cin>>N;
    long long int sum=0; int *X=new int[250001];int *Y=new int[250001];
for(int i=0;i<N;i++){
    for(int j=0;j<N;j++){
        long int s=0;
        cin>>s;
        X[s]=i+1;
        Y[s]=j+1;
    }
}
for(long int s=1;s<N*N;s++){
    sum+=abs(X[s+1]-X[s]) + abs(Y[s+1]-Y[s]);
}
cout<<sum<<'\n';
T--;
}
return 0;
}
