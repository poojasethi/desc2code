t = int(raw_input())
for i in range(t):
    n = int(raw_input())
    mat = [[0 for j in range(n)] for j in range(n)]
    for j in range(n):
        mat[j] = map(int,raw_input().split())
    array = [(0,0) for i in range(1,n*n+1)]
    for j in range(n):
        for k in range(n):
            num = mat[j][k]
            array[num-1] = (j,k)
    count = 0
    for j in range(1,n*n):
        count+=abs(array[j][0]-array[j-1][0])+abs(array[j][1]-array[j-1][1])
    print count