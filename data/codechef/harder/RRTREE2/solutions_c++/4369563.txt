#include <bits/stdc++.h>
#define snd(a) scanf("%d",&(a))
#define snlld(a) scanf("%lld",&(a))
#define rep(i,n) for((i)=0;(i)<(n);(i)+=1)
#define reps(i,s,n) for((i)=(s);(i)<(n);(i)+=1)
#define tr(container,it) for(typeof(container.begin()) it = container.begin(); it != container.end(); it++)
#define pb push_back
#define pf push_front
#define all(a) (a).begin(),(a).end()
#define rall(a) (a).rbegin(),(a).rend()
//#define fill(a,v) memset((a),(v),sizeof(a))
#define sz size()
#define mp make_pair
#define mod  1000000007
using namespace std;
typedef long long ll;
typedef unsigned long long ull;
template<class T> inline T poww(T b,T p){ll a=1;while(p){if(p&1){a=(a*b);}p>>=1;b=(b*b);}return a;}
template<class T> inline T modpoww(T b,T p,T mmod){ll a=1;while(p){if(p&1){a=(a*b)%mmod;}p>>=1;b=(b*b)%mmod;}return a%mmod;}
template<class T>  inline T gcd(T a,T b){ if(b>a)return gcd(b,a);return ((b==0)?a:gcd(b,a%b));}
template<class T> inline void scan(vector<T>& a,int n){T b;int i; rep(i,n){cin>>b;a.pb(b);}}
inline void scand(vector<int>& a,int n){int b;int i; rep(i,n){snd(b);a.pb(b);}}
#define modd  20071027
#define pii pair<int,int>
#define vpii vector<pii >
#define vi vector<int>
#define vvi vector<vi >
#define vl vector<long long>
#define fr first
#define sd second

vvi e;
vi w;
vi  tw;
vl sum;
int n,ts;
vi ans;

ll md;
int dfs_wt(int k){
    int i;
    tw[k]=w[k];
    rep(i,e[k].sz)tw[k]+=dfs_wt(e[k][i]);
    //cout<<"k="<<k<<" tw="<<tw[k]<<"\n";
    return tw[k];
}
inline void add(int wt){
    int i;
    for(i=ts;i>=wt;i--){
        sum[i]=(sum[i]+sum[i-wt]);

        if(sum[i]>md)sum[i]%=md;
    }
}
inline void remove(int wt){
    int i;
    for(i=wt;i<=ts;i++){
        sum[i]=(sum[i]-sum[i-wt]);

        if(sum[i]<0)sum[i]+=md;
       // if(sum[i])ans[i]=1;
    }

}
inline void update(int wt){
    int i;
    for(i=ts;i>=wt;i--){
        if(sum[i-wt])ans[i]=1;

    }
}
void dfs(int k,int wt){
    update(wt+w[k]);
   // sum[wt+w[k]]++;
    int i,j;
    rep(i,e[k].sz){
      //  if(k==0){rep(j,ts+1){cout<<"sum="<<j<<" ct="<<sum[j]<<"\n";}cout<<"\n";}
        add(tw[e[k][i]]);
        //if(k==0){rep(j,ts+1){cout<<"sum="<<j<<" ct="<<sum[j]<<"\n";}cout<<"\n";}
    }
    rep(i,e[k].sz){
        remove(tw[e[k][i]]);
        dfs(e[k][i],wt+w[k]);
        add(tw[e[k][i]]);
    }
    rep(i,e[k].sz){
        remove(tw[e[k][i]]);
    }
    //sum[wt+w[k]]--;
     //remove(wt+w[k]);
}
int main(){

    int j,k,i;
    snd(n);
    scand(w,n);
    e.resize(n);
    tw.resize(n);
    reps(i,1,n){
        snd(j);
        j--;
        e[j].pb(i);
    }
    k=dfs_wt(0);
    ts=k;
   // cout<<"ts="<<ts<<"\n";
    ts=k;
    sum.resize(k+1,0);
    sum[0]=1;
    ans.resize(k+1,0);
    for(i=mod;i<=mod+2;i+=2){
        md=i;
        dfs(0,0);
        rep(j,ts+1){sum[j]=0;}
       sum[0]=1;
    //break;
    }
    reps(i,1,ts+1)if(ans[i])cout<<1;else cout<<"0";cout<<"\n";

}




