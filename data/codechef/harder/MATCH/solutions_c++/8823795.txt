#include <map>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

#define n	105
#define m	50005
#define DB	double
#define I64	long long
#define For(i,a,b)	for(int i=a;i<=b;i++)

I64		Q[m],tmp[n];
int		N,M,U,T,C[n],G[m][n];
DB		Ans,A[n][n],B[n][n],F[n][m];
map<I64,int>D;

int		main(){
		scanf("%d%d",&N,&M);	int U=(1<<N)-1;
		For(i,1,N)	For(j,1,M)	scanf("%lf",&A[i][j]);
		For(i,1,M)	For(j,0,U)	{
			B[i][j]=1;
			For(k,1,N)	if	((1<<k-1)&j)	B[i][j]*=A[k][i];
				else	B[i][j]*=1-A[k][i];
		}

		Q[T=1]=D[1]=1;
		for	(int l=0,r=1;l<r;){
			I64	u=Q[++l];
			For(i,1,N)	{
				tmp[i]=u;
				For(j,0,U)	if	((1ll<<j)&u)	tmp[i]|=1ll<<(j|(1<<i-1));
			}
			For(i,0,U)	{
				I64 t=u;
				For(j,1,N)	if	((1<<j-1)&i)	t|=tmp[j];
				if	(!D[t])	D[t]=++T,Q[++r]=t;	G[l][i]=D[t];
			}
		}

		F[0][1]=1;
		For(i,1,M)	For(j,1,T)	if	(F[i-1][j])
		For(k,0,U)	F[i][G[j][k]]+=F[i-1][j]*B[i][k];

		For(i,1,U)	C[i]=C[i>>1]+(i&1);
		For(i,1,T)	if	(F[M][i]){
			int t=0;
			For(j,0,U)	if	((1ll<<j)&Q[i])	t=max(t,C[j]);
			Ans+=t*F[M][i];
		}
		printf("%.12lf\n",Ans);
}