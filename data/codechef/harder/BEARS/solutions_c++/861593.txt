#include<iostream>
#include<queue>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<set>
#include<string>
#include<cstring>
#include<map>
#include<numeric>
#include<sstream>
#include<cmath>
using namespace std;
#define all(v) (v).begin(), (v).end()
#define rall(v) (v).rbegin(), (v).rend()
#define pb push_back
#define f(i,x,y) for(int i = x; i<y; i++)
#define FOR(it,A) for(typeof A.begin() it = A.begin(); it!= A.end(); it++)
#define quad(x) (x) * (x)
#define mp make_pair
#define clr(x, y) memset(x, y, sizeof x)
#define fst first
#define snd second
typedef pair<int, int> pii;
typedef long long ll;
typedef long double ld;
#define inf (1LL << 40)
#define N 1005
vector<int> E[N];
int A[N], B[N];
ll d[N];
int in[4];
ll get(int u, int falta = 2){
    in[falta] = u;
    if(falta == 0){
             int a = in[2], b = in[1], c = in[0];
             if(a == c) return 0;
             return (d[a] + d[b] - 3) * (d[b] + d[c] - 3);
    }
    ll res = 0;
    FOR(v, E[u]) res += get(*v, falta - 1);
    return res;   
}
int main(){
       int t; cin >> t;
       while(t--){
                  int n, m; cin >> n >> m;
                  f(i, 0, n) E[i].clear();
                  f(i, 0, m){
                        int a, b; scanf("%d %d", &a, &b);
                        a--; b--;
                        E[a].pb(b); E[b].pb(a);
                        A[i] = a; B[i] = b;
                  }
                  f(i, 0, n) d[i] = E[i].size();
                  ll v3 = 0, e3 = 0;
                  
                  f(i, 0, m) v3 += (d[A[i]] - 1) * (d[B[i]] - 1);
                  f(i, 0, n) v3 += d[i] * (d[i] - 1) * (d[i] - 2) / 2;
                  
                  f(i, 0, n) e3 += get(i);
                  e3 /= 2;
                  f(i, 0, m){
                       ll dd = d[A[i]] + d[B[i]] - 2;
                       e3 += dd * (dd - 1) * (dd - 2) / 2;
                  }
                  
                  cout << v3 << " " << e3 << endl;             
       }
       //cin >> t;
}
