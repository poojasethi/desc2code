#define _CRT_SECURE_NO_DEPRECATE
#define _SCL_SECURE_NO_WARNINGS

#include <cstdio>
#include <cstdlib>
#include <algorithm>

using namespace std;

class randomized_tree {
public:
	struct node {
		node *left, *right;
		int weight; int size;
		int val; int flip;
		node() {
			left = 0; right = 0;
			weight = rand(); size = 1;
			val = 0; flip = 0;
		}
	};

	static int size(node *t) {
		return t ? t->size : 0;
	}

	static void norm(node *t) {
		if (t->flip) {
			t->flip = 0;
			swap(t->left, t->right);
			if (t->left) t->left->flip ^= 1;
			if (t->right) t->right->flip ^= 1;
		}
	}

	static void split(node *t, node *&x, node *&y, int pos) {
		if (!t) {
			x = y = 0;
			return;
		}
		norm(t);
		if (pos <= size(t->left)) {
			node *u;
			split(t->left, x, u, pos);
			t->size -= size(x);
			t->left = u;
			y = t;
		}
		else {
			node *u;
			split(t->right, u, y, pos - size(t->left) - 1);
			t->size -= size(y);
			t->right = u;
			x = t;
		}
	}

	static node *merge(node *x, node *y) {
		if (!x) return y;
		if (!y) return x;
		norm(x); norm(y);
		if (x->weight < y->weight) {
			y->size += size(x);
			y->left = merge(x, y->left);
			return y;
		}
		else {
			x->size += size(y);
			x->right = merge(x->right, y);
			return x;
		}
	}

	static void print(node *t) {
		if (!t) return;
		norm(t);
		print(t->left);
		printf("%d ", t->val);
		print(t->right);
	}
};

int main() {
	int n, m; scanf("%d %d", &n, &m);
	randomized_tree::node *nodes = new randomized_tree::node[n];
	
	randomized_tree::node *root = 0;
	for (int i = 0; i < n; i++) {
		randomized_tree::node *t = &nodes[i];
		t->val = i + 1;
		root = randomized_tree::merge(root, t);
	}

	for (int i = 0; i < m; i++) {
		int a, b, c; scanf("%d %d %d", &a, &b, &c);
		
		randomized_tree::node *an = 0, *bn = 0, *cn = 0;
		randomized_tree::split(root, an, root, a);
		randomized_tree::split(root, bn, root, b);
		root = randomized_tree::merge(an, root);

		randomized_tree::split(root, cn, root, c);
		if (bn) bn->flip ^= 1;
		root = randomized_tree::merge(bn, root);
		root = randomized_tree::merge(cn, root);
	}
	randomized_tree::print(root); printf("\n");

	delete[] nodes;
	return 0;
}
