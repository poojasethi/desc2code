// just testing shdut's solution

#define _CRT_SECURE_NO_DEPRECATE
#define _SCL_SECURE_NO_WARNINGS

#include <cstdio>
#include <cstdlib>
#include <algorithm>

using namespace std;

class randomized_tree {
public:
	struct node {
		node *left, *right;
		int weight; int size;
		int val; int flip;
		node() {
			left = 0; right = 0;
			weight = rand(); size = 1;
			val = 0; flip = 0;
		}
	};

	static int size(node *r) {
		return r ? r->size : 0;
	}

	static void norm(node *r) {
		if (r->flip) {
			r->flip = 0;
			swap(r->left, r->right);
			if (r->left) r->left->flip ^= 1;
			if (r->right) r->right->flip ^= 1;
		}
	}

	static void split(node *p, node *&A, node *&B, int cnt) {
		if (!p) {A=B=0; return;}
		norm(p);
		if (cnt<=size(p->left)) {
			node *u;
			split(p->left, A, u, cnt);
			p->left=u;
			B=p;
			p->size-=size(A);
		}else{
			node *u;
			split(p->right, u, B, cnt-size(p->left)-1);
			p->size-=size(B);
			p->right=u;
			A=p;
		}
	}
	
	static node *merge(node *root, node *a) {
		if (!root) return a;
		if (!a) return root;
		norm(root); norm(a);
		if (root->weight>=a->weight) {
			root->size+=size(a);
			root->left=merge(root->left, a);
			return root;
		}
		else{
			a->size+=size(root);
			a->right=merge(root, a->right);
			return a;
		}
	}

	static void print(node *x) {
		if (!x) return;
		norm(x);
		print(x->left);
		printf("%d ", x->val);
		print(x->right);
	}
};

#define SZ 100000
randomized_tree::node nodes[SZ];

int main() {
	int n, m; scanf("%d %d", &n, &m);
	randomized_tree::node *root = 0;
	for (int i = 0; i < n; i++) {
		randomized_tree::node *a = &nodes[i];
		a->val = i+1;
		root=randomized_tree::merge(a, root);
	}

	for (int i = 0; i < m; i++) {
		int a, b, c;
		scanf("%d %d %d", &a, &b, &c);
		randomized_tree::node *an = 0, *bn = 0, *cn = 0;
		randomized_tree::split(root, an, root, a);
		randomized_tree::split(root, bn, root, b);
		root = randomized_tree::merge(root, an);
		randomized_tree::split(root, cn, root, c);
		if (bn) bn->flip ^= 1;
		root = randomized_tree::merge(root, bn);
		root = randomized_tree::merge(root, cn);
	}
	randomized_tree::print(root); printf("\n");
	return 0;
}
