#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<cmath>
#include<vector>

using namespace std;

#define ll long long
#define llu unsigned long long
#define MOD 1000000007
#define INF 2000000000

vector <int> adj[100005];
int fpar[100005],par[100005];
int ans[100005],mn[100005];

int get(int node)
{
    if(fpar[node]==-1)
    return node;
    
    if(fpar[fpar[node]]!=-1)
    {
       mn[node] = min(mn[node],get(fpar[node]));
       fpar[node] = fpar[fpar[node]];
    }
    return mn[node];
}

int main()
{
    int t,i,j,u,v,n,m,q;
    scanf("%d",&t);
    while(t--)
    {
              scanf("%d%d%d",&n,&m,&q);
              for(i=0;i<=n;i++)
              adj[i].clear();
              
              while(m--)
              {
                   scanf("%d%d",&u,&v);
                   adj[v].push_back(u);
              }
              
              int mx;
              
              for(i=1;i<=n;i++)
              {
                 fpar[i] = -1;
                 ans[i] = mx = 0;
                 for(j=0;j<adj[i].size();j++)
                 {
                     if(adj[i][j]<i)
                     {
                        mx = max(mx,adj[i][j]);
                     }
                 }
                 par[i] = mx;
              }
              
              for(i=n;i>=2;i--)
              {
                 int tmp = i;
                 for(j=0;j<adj[i].size();j++)
                 {
                     u = adj[i][j];
                     tmp = min(tmp,get(u));
                     if(tmp == 1)
                     break;
                 }
                 
                 fpar[i] = par[i];
                 mn[i] = tmp;
                 ans[tmp]++;
              }
              
              while(q--)
              {
                   scanf("%d",&u);
                   printf("%d ",ans[u]);
              }
              printf("\n");
    }
    //system("pause");
    return 0;
}
