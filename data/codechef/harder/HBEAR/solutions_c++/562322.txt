#include <iostream>
#include <cstdio>
#include <cstring>
using namespace std;

int N,M,K,Q,a,b;
long long int G[1005][1005],S[1005][1005],t1,t2,tmp,INC[1005],y1;
char c;

int main(){
	scanf("%d%d%d",&N,&M,&K);
	for(int i=1;i<=N;++i)
		for(int j=1;j<=M;++j){
			scanf(" %c",&c);
			if(c == 'H') G[i][j] = G[i-1][j] + 1ll;
			else G[i][j] = G[i-1][j];
		}
	for(int i=1;i<=N;++i)
		for(int j=i;j<=N;++j){
			memset(INC,0,sizeof(INC));
			a = i-1;
			b = j;
			t1 = 1;
			tmp = 0;
			for(int k=1;k<=M;++k){
				tmp += (G[b][k] - G[a][k]);
				while(tmp >= K){
					++INC[k-t1+1];
					--INC[M-t1+2];
					tmp -= (G[b][t1] - G[a][t1]);
					++t1;
				}
			}
			tmp = 0;
			for(int k=1;k<=M;++k){
				tmp += INC[k];
				S[b-a][k] += tmp;
			} 
		}
	for(int i=1;i<=N;++i)
		for(int j=1;j<=M;++j) S[i][j] += (S[i-1][j] + S[i][j-1] - S[i-1][j-1]);
	scanf("%d",&Q);
	for(int i=0;i<Q;++i){
		scanf("%d%d",&a,&b);
		printf("%lld\n",S[a][b]);
		//printf("(%d %d): %lld\n",a,b,S[a][b]);
	}
}
