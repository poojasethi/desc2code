#include <vector>
#include <string>
#include <cstring>
#include <iostream>
#include <cstdio>
#include <cmath>
#include <algorithm>
#include <queue>
#include <stack>
#include <set>
#include <map>
#include <ctime>
using namespace std;
#define length(x) (int)x.size()
const int maxn=333;
long long res[maxn][maxn];
int kq[maxn], a[maxn], sl[maxn][maxn];
int n, m, k;
void khoitao()
{
    for(int i=1; i<=n; i++)
        for(int j=1; j<=n-i+1; j++)
    {
        int h,sum;
        a[0]=0;
        for(h=1; h<=m; h++)
            a[h]=sl[h][i+j-1]-sl[h-1][i+j-1]-sl[h][i-1]+sl[h-1][i-1];
        h=0;    sum=0;
        memset(kq,0,sizeof(kq));
        for(int hg=1; hg<=m; hg++)
        {
            sum=sum-a[hg-1];
            while (sum<k)
            {
                if (h==m) break;
                h++; sum=sum+a[h];
            }
            if (sum<k) break;
            kq[h-hg+1]++;  kq[m-hg+2]--;
        }
        sum=0;
        for(int h=1; h<=m; h++)
        {
            sum+=kq[h];
            res[j][h]+=sum;
        }
    }
}
void totalsum()
{
    for(int i=1; i<=m; i++)
        for(int j=1; j<=n; j++)
            res[j][i]=res[j][i-1]+res[j-1][i]-res[j-1][i-1]+res[j][i];
}
int main()
{
     //freopen("1.inp","r",stdin);
     //freopen("1.out","w",stdout);
     scanf("%d %d %d\n",&m,&n,&k);
     for(int i=1; i<=m; i++)
     {
         string st;
         getline(cin,st);
         for(int j=1; j<=n; j++)
         {
             sl[i][j]=sl[i-1][j]+sl[i][j-1]-sl[i-1][j-1];
             if (st[j-1]=='H') sl[i][j]++;
         }
     }
     khoitao(); totalsum();
     int Q;
     scanf("%d",&Q);
     for(int i=1; i<=Q; i++)
     {
         int A,B;
         scanf("%d %d",&A,&B);
         printf("%lld\n",res[B][A]);
     }
     return 0;
}
