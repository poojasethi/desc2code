#include <cstdio>
using namespace std;

const int Maxn = 302;

int n, m, k, q, has[Maxn][Maxn], res[Maxn][Maxn];

void fill(int arr[][Maxn])
{
     int i, j;
     for (i = 1; i <= n; i++)
        for (j = 1; j <= m; j++)
           arr[i][j] += arr[i-1][j] + arr[i][j-1] - arr[i-1][j-1];
}

int main()
{
    int i, j, a, b;
    char c[Maxn];
    scanf("%d %d %d", &n, &m, &k);
    for (i = 1; i <= n; i++) {
        scanf("%s", c);
        for (j = 1; j <= m; j++)
           has[i][j] = c[j-1] == 'H';
    }
    fill(has);
    for (i = 1; i <= n; i++)
       for (j = 1; j <= m; j++) {
           a = n; b = j;
           while (a >= i && b <= m)
              if (has[a][b] - has[a][j-1] - has[i-1][b] + has[i-1][j-1] >= k) {
                            res[a-i+1][b-j+1]++;
                            res[a-i+1][m+2-j]--;
                            a--;
              } else b++;
       }
    for (i = 1; i <= n; i++)
       for (j = 2; j <= m; j++)
          res[i][j] += res[i][j-1];
    fill(res);
    for (scanf("%d", &q); q--;) {
        scanf("%d %d", &a, &b);
        printf("%d\n", res[a][b]);
    }
    return 0;
}
