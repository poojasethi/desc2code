#include<stdio.h>
#include<vector>
#include<algorithm>
#include<string.h>
using namespace std;
typedef pair<int,int> ii;
vector<ii> v;
bool comp(ii a,ii b)
{
    if(a.first<b.first)
        return true;
    if(a.second==b.second&&a.first>b.first)
        return true;
    return false;
}
int main()
{
    int t,n,i,x,sum,ans;
    char dau[10],logic[5];
    scanf("%d",&t);
    while(t--)
    {
        ans=0;
        sum=0;
        v.clear();
        scanf("%d",&n);
        gets(logic);
        for(i=1;i<=n;i++)
        {
            scanf("%s",&dau);
            scanf("%d",&x);
            scanf("%s",&logic);
            if(logic[0]=='Y')
            {
                if(dau[0]=='>')
                {
                    v.push_back(ii(x+1,1));
                    v.push_back(ii(1e9,-1));
                }
                if(dau[0]=='=')
                {
                    v.push_back(ii(x+1,-1));
                    v.push_back(ii(x,1));
                }
                if(dau[0]=='<')
                {
                    v.push_back(ii(1,1));
                    v.push_back(ii(x,-1));
                }
            }
            else
            {
                if(dau[0]=='>')
                {
                    v.push_back(ii(x+1,-1));
                    v.push_back(ii(1,1));
                }
                if(dau[0]=='=')
                {
                    v.push_back(ii(1,1));
                    v.push_back(ii(x,-1));
                    v.push_back(ii(x+1,1));
                    v.push_back(ii(1e9,-1));
                }
                if(dau[0]=='<')
                {
                    v.push_back(ii(x,1));
                    v.push_back(ii(1e9,-1));
                }
            }
        }
        ans=0;
        sort(v.begin(),v.end());
        for(i=0;i<v.size();i++)
        {
            sum+=v[i].second;
            ans=max(ans,sum);
        }
        printf("%d\n",n-ans);
    }
}
