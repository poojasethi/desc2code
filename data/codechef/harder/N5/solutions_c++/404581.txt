#include <cstdio>
#include <algorithm>
using namespace std;
struct sorted{ int val,index;};
bool sortedcmp(const sorted& l, const sorted& r) {return l.val < r.val;}
sorted sortedarr[100000];
int main() {
    int t; scanf("%d",&t);
    while (t--) {
        int n; 
        scanf("%d",&n);
        for (int i=0; i<n; ++i) {
            scanf("%d",&sortedarr[i].val);
            sortedarr[i].index  = i;
        }
        stable_sort(sortedarr, sortedarr+n, sortedcmp);
        int i = n-1, cnt = 1, previndex = n;
        while (i >= 0) {
            if (previndex > sortedarr[i].index) {
                previndex = sortedarr[i].index;
                i--;
            }
            else {
                while (i > 0 && sortedarr[i].val == sortedarr[i-1].val && sortedarr[i-1].index > previndex) i--;
                previndex = sortedarr[i].index;
                while (i > 0 && sortedarr[i].val == sortedarr[i-1].val) i--;
                i--;
                cnt++;
            }
        }
        int ans = 0;while ((1 << ans) < cnt) ans++;
        printf("%d\n",ans);
    }
    return 0;
}
