#include<iostream>
#include<algorithm>
#include<cstring>
using namespace std;
 
int n;
 
struct data
{
       int loc;
       long long val;
}D[100001];
 
int cmp(const void *a ,const void *b)
{
    if((*(data*)a).val == (*(data*)b).val)
        return (*(data*)a).loc - (*(data*)b).loc;
    if((*(data*)a).val > (*(data*)b).val)
                       return 1;
    return -1;
}
 
 
int main()
{
    int T;
    cin>>T;
    for(int c = 1 ; c <= T ; c++)
    {
            int s = 0;
            cin>>n;
            for(int i = 1 ; i <= n; i++)
            {
                    //cin>>D[i].val;
                    scanf("%lld" , &D[i].val);
                    D[i].loc = i;
            }
            qsort(D+1 , n , sizeof(D[0]) , cmp);
            D[0].loc = 9999999;
            for(int i = 1 ; i <= n ; i++)
            {
                    int sml = 0 , last;
                    for(int j = i ; j <= n ; j++)
                            if(D[j].val != D[i].val)
                                        break;
                            else
                            {
                                last = j;
                                if(D[j].loc < D[i-1].loc)
                                            sml = j;
                            }
                    if(sml > 0)
                    {
                           s++;
                           swap(D[last].loc , D[sml].loc);
                    }
                    i = last;
            }
            int ans = 0 , v = 1;
            while(s > v)
                    ans ++ , v *= 2;
            printf("%d\n" , ans);
    }
    return 0;
}