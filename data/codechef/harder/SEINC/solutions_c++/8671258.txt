#include <stdio.h>
#include <stdlib.h>
using namespace std;

int T,n,i,j,k,ans,t2,t3;
int A[100005],B[100005];

int main()
{
	scanf("%d",&T);
	for(;T;--T)
	{
		scanf("%d",&n);ans=t2=t3=0;
		for(i=1;i<=n;++i)scanf("%d",&A[i]);
		for(i=1;i<=n;++i)scanf("%d",&B[i]);
		for(i=1;i<=n;++i)A[i]=(B[i]+4-A[i])%4;
		for(i=n;i>=1;--i)A[i]-=A[i-1];
		for(i=1;i<=n;++i)
		{
			if(A[i]>=2)
			{
				if(t3)++ans,--t3,A[i]-=4;
				else if(t2)ans+=2,--t2,A[i]-=4;
				
			}
			if(A[i]>0)ans+=A[i];
			if(A[i]==-3)++t3;
			if(A[i]==-2)++t2;
		}
		printf("%d\n",ans);
	}
}