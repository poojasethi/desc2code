#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream>
#include <algorithm>
using namespace std;

#define REP0(i, n) for (int i = 0; i < n; i++)
#define REP1(i, n) for (int i = 1; i <= n; i++)
#define REP(i, l, r) for (int i = l; i <= r; i++)
#define RP(i, r, l) for (int i = r; i >= l; i--)
#define FORE(i, x) for (int i = fi[x]; i != -1; i = e[i].n)

#define MAX_N 110000

int a[MAX_N], s[5];
int test, n, ans;

int main(void)
{
	scanf ("%d", &test);
	while (test-- > 0)
	{
		  scanf ("%d", &n); REP1(i, n) scanf ("%d", a + i);
		  REP1(i, n) { int x; scanf ("%d", &x), a[i] = (x + 4 - a[i]) & 3; }
		  s[0] = s[1] = s[2] = s[3] = 0, s[4] = 100000000;
		  int ans = a[1], now = a[1];
		  REP(i, 2, n)
		  {
			 s[(4 + a[i] - now - 1) % 4 + 1]++;
			 //printf ("%d ", (4 + a[i] - now - 1) % 4 + 1);
			 if (now < a[i])
			 {
				int j = 0; while (!s[j]) j++;
				s[j]--, ans += j;
			 }
			 now = a[i];
		  }
		  printf ("%d\n", ans);
	}
	return 0;
}
