#include<bits/stdc++.h>
#define N 500000
#define M 8000200
using namespace std;int Q,o,x,e,id,L,R,c[M][2],S[M],T[N];
void ins(int y,int&k,int d,int z){
	S[k=++id]=S[y]+1;c[k][0]=c[y][0];c[k][1]=c[y][1];if(d<0)return;
	int o=z>>d&1;ins(c[y][o],c[k][o],d-1,z);
}
int q1(int x,int y,int d,int z){
	if(d<0)return 0;int o=z>>d&1;
	return (S[c[y][o^1]]-S[c[x][o^1]])?q1(c[x][o^1],c[y][o^1],d-1,z)+(1<<d):q1(c[x][o],c[y][o],d-1,z);
}
int q2(int x,int y,int d,int z){
	if(d<0)return 0;int o=z>>d&1;
	return o?q2(c[x][1],c[y][1],d-1,z)+(S[c[y][0]]-S[c[x][0]]):q2(c[x][0],c[y][0],d-1,z);
}
int q3(int x,int y,int d,int z){
	return d<0?0:(S[c[y][0]]-S[c[x][0]]<z)?q3(c[x][1],c[y][1],d-1,z-S[c[y][0]]+S[c[x][0]])+(1<<d):q3(c[x][0],c[y][0],d-1,z);
}
int main(){
	for(scanf("%d",&Q);Q--;){
		scanf("%d",&o);o++;
		if(o==1)scanf("%d",&x),ins(T[e],T[e+1],18,x),e++;
		if(o==3)scanf("%d",&x),e-=x;
		if(o==2||o==4||o==5){
			scanf("%d%d%d",&L,&R,&x);
			if(o==2)printf("%d\n",q1(T[L-1],T[R],18,x)^x);
			if(o==4)printf("%d\n",q2(T[L-1],T[R],18,x+1));
			if(o==5)printf("%d\n",q3(T[L-1],T[R],18,x));
		}
	}
}