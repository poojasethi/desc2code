/*
    Problem:
    Algorithm:
    Note:
*/
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<set>
#include<vector>
#include<map>
#include<string>
#include<iomanip>
#include<iostream>
#include<cmath>
#include<queue>
using namespace std;

#define rep(i,x,y) for(i=x;i<=y;i++)
#define _rep(i,x,y) for(i=x;i>=y;i--)
#define CL(S,x) memset(S,x,sizeof(S))
#define CP(S1,S2) memcpy(S1,S2,sizeof(S2))
#define ALL(x,S) for(x=S.begin();x!=S.end();x++)
#define sqr(x) ((x)*(x))
#define mp make_pair
#define fi first
#define se second
#define upmin(x,y) x=min(x,y)
#define upmax(x,y) x=max(x,y)

typedef long long ll;
typedef long double real;
void read(int&x){bool fu=0;char c;for(c=getchar();c<=32;c=getchar());if(c=='-')fu=1,c=getchar();for(x=0;c>32;c=getchar())x=x*10+c-'0';if(fu)x=-x;};
char getc(){char c;for(c=getchar();c<=32;c=getchar());return c;}

const int inf=1000000000;
int T,n,m,i,j,k,l,p,x,y;
int a[1010][1010],s[1010][1010],to[1010],back[1010];
int f1[1010],f2[1010];

int main()
{
    //freopen(".in","r",stdin);
    //freopen(".out","w",stdout);
	for(read(T);T;T--)
	{
		read(n);read(m);
		
		rep(i,1,n+1)rep(j,1,n+1)a[i][j]=s[i][j]=0;
		rep(i,1,n+1)to[i]=back[i]=0;
		
		rep(i,1,m)
		{
			read(x);read(y);x++;y++;
			a[x][y]++;	
		}
		
		rep(i,1,n)rep(j,1,n)s[i][j]=s[i][j-1]+a[i][j];
		rep(j,1,n)_rep(i,n,1)s[i][j]=s[i+1][j]+s[i][j];
		rep(i,1,n)to[i]=to[i-1]+s[i-1][i];
		_rep(i,n,1)back[i]=back[i+1]+s[i+1][i];
		
		rep(i,1,n+1)f1[i]=f2[i]=inf;
		
		f1[2]=s[2][1];
		f2[2]=s[1][2];
		
		rep(i,3,n)
		{
			rep(j,2,i-1)
			{
				upmin(f2[i],s[j-1][i]+(back[j]-back[i-1])+f1[j]);
				upmin(f1[i],s[i][j-1]+(to[i-1]-to[j])+f2[j]);
			}
		}
		int ans=min(f1[n]+s[n-1][n],f2[n]+s[n][n-1]);
		printf("%d\n",ans);
	}
	    
    scanf("\n");
    return 0;
}
