#include<iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<string.h>
#include<ctime>
#define MAX 1010

#define gc getchar_unlocked()
#define pc putchar_unlocked

typedef long long ll;




inline void get(ll &x){register ll c=gc;x=0;ll neg=0;for(;((c<48||c>57)&&c!='-');c=gc);if(c=='-'){neg = 1;c=gc;}for(;c>47&&c<58;c=gc){x=(x<<1)+(x<<3)+c-48;}if(neg)x=-x;}

inline void put(ll n){ll i=0;char ch[20];if(n==0)pc('0');while(n>0)ch[i]=(n%10)+'0',n=n/10,i++;while(i>0)pc(ch[i-1]),i--;}


using namespace std;
ll lcs[MAX][MAX],checki[MAX],checkj[MAX];
char v[MAX],a[MAX],b[MAX];

int main(){
    ll t,i,j,k,f=0;
    double timer=clock();
    get(t);
    for(k=1;k<=t;k++){
ll n,m,val;
get(n);	
scanf("%s",a);
get(m);
scanf("%s",b);
printf("case %lld",k);
if(!f){
for(i=0;i<=n;i++)
    lcs[i][0]=0;
for(j=0;j<=m;j++)
    lcs[0][j]=0;
for(i=1;i<=n;i++){
    for(j=1;j<=m;j++){
        if(a[i-1]==b[j-1]){
            lcs[i][j]=lcs[i-1][j-1]+1;

        }
        else if(lcs[i][j-1]>lcs[i-1][j]){
            lcs[i][j]=lcs[i][j-1];
        }
        else{
            lcs[i][j]=lcs[i-1][j];
        }
    }
}
i=n;j=m;
ll ind =0;
while(true){
    if(a[i-1]==b[j-1]){
        v[ind]=a[i-1];
        checki[ind]=i;
        checkj[ind]=j;
        ind++;
        i--;    j--;
    }
    else if(lcs[i-1][j]>lcs[i][j-1]){
        i--;
    }
    else
        j--;
    if(i==0||j==0)
        break;
}


if(lcs[n][m]==0){
	printf(" N\n");

		
}
else{
printf(" Y\n%lld\n",lcs[n][m]);
for(i=ind-1;i>=0;i--){
    //cout<<v[i]<<" "<<checki[i]<<" "<<checkj[i]<<"\n";
    printf("%c %lld %lld\n",v[i],checki[i],checkj[i]);
}


}
}
if(f)
	printf(" N\n");

timer=(clock()-timer)/CLOCKS_PER_SEC;
if(timer>4.85)
	f=1;




}

return 0;
}
