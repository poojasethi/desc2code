#include<stdio.h>
#include<time.h>
#define MAX 1010
#define gc getchar_unlocked()

int lcs[MAX][MAX],checki[MAX],checkj[MAX];
char v[MAX],a[MAX],b[MAX];


inline void get(int &x){register int c=gc;x=0;int neg=0;for(;((c<48||c>57)&&c!='-');c=gc);if(c=='-'){neg = 1;c=gc;}for(;c>47&&c<58;c=gc){x=(x<<1)+(x<<3)+c-48;}if(neg)x=-x;}


int main(){
    int t,i,j,k,f=0, n,m;

    double timer=clock();
    scanf("%d",&t);
    for(k=1;k<=t;k++){
    	int ind=0;
//scanf("%d",&n);
get(n);
scanf("%s",a);
//scanf("%d",&m);
get(m);
scanf("%s",b);
printf("case %d",k);
if(!f){
for(i=0;i<=n;i++)
    lcs[i][0]=0;
for(j=0;j<=m;j++)
    lcs[0][j]=0;
for(i=1;i<=n;i++){
    for(j=1;j<=m;j++){
        if(a[i-1]==b[j-1]){
            lcs[i][j]=lcs[i-1][j-1]+1;

        }
        else if(lcs[i][j-1]>lcs[i-1][j]){
            lcs[i][j]=lcs[i][j-1];
        }
        else{
            lcs[i][j]=lcs[i-1][j];
        }
    }
}
i=n;j=m;

while(1){
    if(a[i-1]==b[j-1]){
        v[ind]=a[i-1];
        checki[ind]=i;
        checkj[ind]=j;
        ind++;
        i--;    j--;
    }
    else if(lcs[i-1][j]>lcs[i][j-1]){
        i--;
    }
    else
        j--;
    if(i==0||j==0)
        break;
}


if(lcs[n][m]==0){
	printf(" N\n");

		
}
else{
printf(" Y\n%d\n",lcs[n][m]);
for(i=ind-1;i>=0;i--){
    //cout<<v[i]<<" "<<checki[i]<<" "<<checkj[i]<<"\n";
    printf("%c %d %d\n",v[i],checki[i],checkj[i]);
}


}
}
if(f)
	printf(" N\n");

timer=(clock()-timer)/CLOCKS_PER_SEC;
if(timer>4.9)
	f=1;

}
return 0;
}
