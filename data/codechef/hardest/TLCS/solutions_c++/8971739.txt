#include <iostream>
#include <stdio.h>
using namespace std;
			int L[1001][1001];

		int lcs(char s[],char t[],int m,int n)
		{
			for(int i=0;i<=m;i++)
			{
				for(int j=0;j<=n;j++)
				L[i][j]=0;
			}
			for(int i=0;i<=m;i++)
			{
				for(int j=0;j<=n;j++)
				{
					if(i==0 || j==0)
					L[i][j]=0;
					
					else if(s[i-1]==t[j-1])
					L[i][j]=1+L[i-1][j-1];
					else{
						L[i][j]=max(L[i-1][j],L[i][j-1]);
					}
				}
			}
			return 1;
		}

int main() {
		int i,j,q,test,m,n;
		cin>>test;	
		char s[1001],t[1001];
	for(q=0;q<test;q++)
	{
		scanf("%d %s %d %s",&m,&s,&n,&t);
//		printf("%s %s ",s,t);
	lcs(s,t,m,n);
	int check=L[m][n];
//	printf("%d lolol ",check);
	char x[check+1];int y[check+1],z[check+1];
		printf("case %d ",q+1);
		if(check!=0)	
		{
			printf("Y\n%d\n",check);
			int i=m,j=n,k=check-1;
			while(i>0 && j>0)
			{
				if(s[i-1]==t[j-1])
				{
					x[k]=s[i-1];
					y[k]=i;
					z[k]=j;
					i--;j--;k--;
				}
				else if(L[i-1][j]>L[i][j-1])
				i--;
				else
				j--;
			}
			x[check]='\0';
			for(i=0;i<check;i++)
			{
				printf("%c %d %d\n",x[i],y[i],z[i]);
			}
		}
		else
		{
			printf("N\n");
		}
	}
	// your code goes here
	return 0;
}
