    #include <bits/stdc++.h>
    using namespace std;
    char s1[1003],s2[1003],s3[1003];
    int tmp1[1003],tmp2[1003];
    int main()
    {
        int t,l1,l2,g=0;
        scanf("%d",&t);
        while(t--)
        {
        scanf("%d %s",&l1,s1);
        scanf("%d %s",&l2,s2);
        int c=0,i,j,dp[l1+1][l2+1];
        memset(dp,0,sizeof(dp));
        for(i=1;i<=l1;i++)
        {
            for(j=1;j<=l2;j++)
            {
                if(s1[i-1]==s2[j-1])
                    dp[i][j]=dp[i-1][j-1]+1;
                else
                    dp[i][j]=max(dp[i-1][j],dp[i][j-1]);
                if(dp[i][j]>c)
                    c=dp[i][j];
            }
        }
        g++;
        if(c>1)
        {
            printf("case %d Y\n",g);
            printf("%d\n",c);
        int l=-1,x=l1,y=l2;
        while(1)
        {
            if(s1[x-1]==s2[y-1])
            {
                l++;
                //printf("%c",b[y-1]);
                s3[l]=s2[y-1];
                tmp1[l]=x;
                tmp2[l]=y;
                x--;
                y--;
            }
            else if(dp[x-1][y]>=dp[x][y-1])
                x--;
            else
                y--;
            if(x==0||y==0)
                break;
        }
        for(i=l;i>=0;i--)
        printf("%c %d %d\n",s3[i],tmp1[i],tmp2[i]);
        }
        else
            printf("case %d N\n",g);
        }
        return 0;
    }

