#include <iostream>
#include<stdio.h>
using namespace std;
void lcs(char *A,int n1,char *B,int n2,int tst,int v)
{
    int i,j,flag;
    int C[n1+1][n2+1];
   for(i=0;i<=n1;i++)
    {
        for(j=0;j<=n2;j++)
        {
            if(i==0||j==0)
                C[i][j]=0;
            else if(A[i-1]==B[j-1])
                C[i][j]=1+C[i-1][j-1];
            else
               C[i][j]=max(C[i-1][j],C[i][j-1]);

        }
    }

     flag=C[n1][n2];
    int x=2*(flag);

    if(flag>0)
    {
     printf("case %d Y\n",v-tst);
     cout<<flag<<"\n";
    char arr[flag+1];
  int sp[x];
 // cout<<x<<"\n";
    arr[flag]='\0';
    i=n1,j=n2;
   while(i>0&&j>0)
    {
      if(A[i-1]==B[j-1])
       {
           arr[flag-1]=A[i-1];
           sp[x-2]=i;
           sp[x-1]=j;
        flag--,i--,j--,x=x-2;

          }
        else if(C[i-1][j]>C[i][j-1])
            i--;
      else
        j--;
    }




  int k=0;
  for(i=0;i<C[n1][n2];i++)
  {
      //cout<<"heyyyyyy";
     cout<<arr[i]<<" "<<sp[k]<<" "<<sp[k+1]<<"\n";
      k=k+2;

  }
    }
    else
         printf("case %d N",v-tst);
    }
int main()
{

    int tst;

    char A[1001],B[1001];
    int n1,n2;
    scanf("%d",&tst);
    int v=tst;
    while(tst--)
    {
        scanf("%d",&n1);
        scanf("%s",A);
        scanf("%d",&n2);
        scanf("%s",B);
        lcs(A,n1,B,n2,tst,v);

    }


    return 0;
}
