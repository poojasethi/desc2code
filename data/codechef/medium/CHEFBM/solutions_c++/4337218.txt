#include<bits/stdc++.h>
#include<stdio.h>
#define gc getchar//_unlocked

using namespace std;

int readint() {
  char c = gc();
  while(c<'0' || c>'9') c = gc();
  int ret = 0;
  while(c>='0' && c<='9') {
    ret = 10 * ret + c - 48;
    c = gc();
  }
  return ret;
}
int main()
{
  //freopen("chefbm.txt","r",stdin);
    int n=readint(),m=readint(),p=readint();
    int pos=0;
   // reader(&n,&m,&p);
    int  a[m];
   /* for(int i=1;i<=m;i++)
    {
        a.push_back(i);
    }*/
   /* for(int p=0;p<a.size();p++)
    {
        printf("a=%d   ",a[p]);
    }*/
    vector<int > l[n+1];
    for(int i=0;i<p;i++)
    {   int p1=readint(),p2=readint();
       // l.push_back(make_pair(p1,p2));
       l[p1].push_back(p2);
    }
   /*  for(int i=0;i<p;i++)
    {
     //   l.push_back(make_pair(readint(),readint()));
        printf("%d %d\n",l[i].first,l[i].second);
    }*/
   //sort(l.begin(),l.end());
   for(int p=0;p<m;p++)
        {
            a[p]=p+1;
        }
    for(int i=1;i<=n;i++)
    {   int res=1;
       // vector<int > temp(a.begin(),a.end());
       /* for(int p=0;p<temp.size();p++)
        {
            printf("%d     ",temp[p]);
        }
        */


        for(int j=0;j<l[i].size();j++)
        {
            a[(l[i][j])-1]++;
            /*if((temp[(l[pos].second)-2]>temp[(l[pos].second)-1]))
            {
        res=0;
            }*/
        }
       /*for(int p=0;p<m;p++)
        {
            printf("%d     ",a[p]);
        }*/
        for(int p=0;p<l[i].size();p++)
        {
            if(l[i][p]!=m&&a[(l[i][p])-1]>a[l[i][p]])
            {
                    res=-1;
                break;

            }

        }
        if(res==1)
        {
                printf("%d\n",a[m-1]-a[0]);
        }
        else
        {
            printf("-1\n");
        }
        for(int j=0;j<l[i].size();j++)
        {
            a[(l[i][j])-1]=l[i][j];
            /*if((temp[(l[pos].second)-2]>temp[(l[pos].second)-1]))
            {
        res=0;
            }*/
        }

    }
    return 0;
}
