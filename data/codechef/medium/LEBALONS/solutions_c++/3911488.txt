#include<cmath>
#include <iostream>
#include<cstdlib>
#include<iomanip>
using namespace std;

int main() {
	int t,n,m;
	cin>>t;
	while(t--){
		bool nc[41]={0};
		int color[41]={0},cost[41]={0},tc=0;
		cin>>n>>m;
		for(int i=0;i<n;i++){
			int c,p;
			cin>>c>>p;
			nc[c]=true;
			color[c]++;
			cost[c]+=p;
		}
		for(int i=1;i<41;i++)if(nc[i])tc++;
		
		long long int dp1[41][41],dp2[41][41]={0};
		for(int i=0;i<41;i++)dp1[0][i]=0;
		for(int i=0;i<41;i++)dp1[i][0]=1;
		
		for(int i=1;i<41;i++){
			for(int j=1;j<41;j++){
				dp1[i][j]=dp1[i-1][j] + dp1[i-1][j-1]*(pow(2,color[i])-1);
			}
		}
		for(int i=1;i<41;i++){
			for(int j=1;j<41;j++){
				dp2[i][j]=dp2[i-1][j] +dp2[i-1][j-1]*(pow(2,color[i])-1) +dp1[i-1][j-1]*cost[i]*pow(2,(color[i]-1));
			}
		}
		
	/*	for(int i=1;i<41;i++){
			for(int j=1;j<41;j++){
			cout<<dp1[i][j]<<" ";
			}
			cout<<endl;
		}
		cout<<endl<<endl;
		for(int i=1;i<41;i++){
			for(int j=1;j<41;j++){
			cout<<dp2[i][j]<<" ";
			}
			cout<<endl;
		}*/
		long long int num=0,den=0;
		for(int i=m;i<=40;i++){
			num += dp2[40][i];
    		den += dp1[40][i];
		}
	
	cout <<fixed<<setprecision(6)<<double (num)/double (den)<<endl;
	}
	return 0;
}
