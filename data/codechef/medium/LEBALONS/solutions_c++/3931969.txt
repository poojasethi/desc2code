#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <iomanip>
 
using namespace std;
 
typedef long long ll;
  
void solve()
{
	int color[42] = {0};
	int cost[42]  = {0};
	int N, M, c, p;
	
	cin >> N >> M;
 
	for(int i = 0; i < N; i++)
	{
		cin >> c >> p;
		color[c] += 1;
		cost[c] += p;
	}
 
	ll DP1[42][42] = {{0}};
 
	for(int i = 0; i < 42; i++)		DP1[0][i] = 0;
	for(int i = 0; i < 42; i++)		DP1[i][0] = 1;
 
	for(int i = 1; i < 41; i++)
		for(int j = 1; j < 41; j++)
			DP1[i][j] = DP1[i-1][j]  +							
					   DP1[i-1][j-1] * ((1 << color[i]) - 1) ;						
 
	ll DP2[42][42] = {{0}};
 
	for(int i = 1; i < 41; i++)
		for(int j = 1; j < 41; j++)
			DP2[i][j] = DP2[i-1][j]  +							// We dont select color i -> Now we have to select atleast j colors from i-1 ballons
					   DP2[i-1][j-1] * ((1 << color[i]) - 1) +	// We select color i -> Now we have to select j-1  colors from i-1 balloons 
					   DP1[i-1][j-1] * cost[i] * (1 << (color[i] - 1)); // We also add the total cost of selecting i * No of ways of selecting j-1 colors from i-1 balloons
 
 
	ll Num = 0, Den = 0;
	for(int i = M; i < 41; i++)
	{
		Num += DP2[40][i];       // This is the numerator(Total Expected Cost)
		Den += DP1[40][i];		 // This is the denominator(Total No of subsets having atleast M colors)
	}
 
	cout << fixed << setprecision(6) << double(Num) / double(Den) << endl;
	return ;
}
 
int main()
{
	int t;
 
	ios_base::sync_with_stdio(false);
 
	cin >> t;
	while(t--)
	{
		solve();
	}
	return 0;
} 