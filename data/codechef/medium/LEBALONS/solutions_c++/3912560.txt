#include <bits/stdc++.h>
using namespace std;

///N,chose,
#define LL long long
LL dp[44][44][2];
LL Cost[44],Number[44];
#define pll pair<LL,LL>
#define mp make_pair
#define pb push_back
int main()
{
        int tst;
        cin>>tst;
        while(tst--) {
                int N,M;
                memset(dp,0,sizeof(dp));
                memset(Cost,0,sizeof(Cost));
                memset(Number,0,sizeof(Number));
                cin>>N>>M;
                for(int i=1; i<=N; i++) {
                        int a,b;
                        cin>>a>>b;
                        Cost[a]+=b;
                        Number[a]++;
                }
                vector<pll>vecc(1);
                for(int a=0; a<44; a++) {
                        if(Number[a]>0)vecc.pb(mp(Number[a],Cost[a]));
                }
                for(int i=1; i<vecc.size(); i++) {
                        for(int j=1; j<=i; j++) {
                                dp[i][j][0]=dp[i-1][j][0];
                                //if(i==2&&j==2)cout<<dp[i][j][0]<<endl;

                                if(dp[i-1][j-1][1]==0)dp[i][j][0]+=vecc[i].second*(1<<(vecc[i].first-1));
                                else dp[i][j][0]+=dp[i-1][j-1][1]*vecc[i].second*(1<<(vecc[i].first-1));

                                //if(i==2&&j==2)cout<<dp[i][j][0]<<endl;

                                dp[i][j][0]+=dp[i-1][j-1][0]*((1<<vecc[i].first)-1);
                                //cout<<i<<"\t"<<j<<"\t"<<dp[i][j][0]<<endl;
                                //if(i==2&&j==2)cout<<dp[i][j][0]<<endl;

                                int mult=((1<<vecc[i].first)-1);
                                dp[i][j][1]=dp[i-1][j][1];
                                if(dp[i-1][j-1][1]==0)dp[i][j][1]+=mult;
                                else dp[i][j][1]+=dp[i-1][j-1][1]*mult;
                        }
                }
                LL num=0,den=0,siz=vecc.size();
                /*&for(int i=1;i<siz;i++){
                    for(int j=1;j<=i;j++)cout<<dp[i][j][0]<<"\t";
                    cout<<endl;
                }
                cout<<endl<<endl;
                for(int i=1;i<siz;i++){
                    for(int j=1;j<=i;j++)cout<<dp[i][j][1]<<"\t";
                    cout<<endl;
                }*/
                for(int j=M;j<siz;j++)num=num+dp[siz-1][j][0],den=den+dp[siz-1][j][1];
                if(M==0)den++;
                //cout<<num<<"\t"<<den<<endl;
                printf("%.8f\n",(double)num/(double)den);
        }
        return 0;
}
/*
3
6 0
1 2
2 3
2 4
3 5
3 6
3 7
*/
