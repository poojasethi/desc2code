#include<bits/stdc++.h>
int main()
{
    int i,t,j,color,k,n,m,c[50],p[50];
    long long cost[50],den,num,costfreq[50],colfreq[50],freq[50],col[50],dp1[50][50],dp2[50][50],subcol[50];
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d %d",&n,&m);
        den=num=0LL;
        for(i=0;i<=n;i++)
            {freq[i]=0LL;
            costfreq[i]=0LL;}
        for(i=0;i<n;i++)
        {
            scanf("%d %d",&c[i],&p[i]);
            freq[c[i]]++;
            costfreq[c[i]]+=p[i];
        }
        j=0;
        for(i=0;i<=n;i++)
            if(freq[i]!=0LL)
        {
            col[j]=i;
            colfreq[j]=freq[i];
            cost[j]=costfreq[i];
            subcol[j]=(1LL<<freq[i])-1LL;
            j++;
        }
        dp1[0][0]=1LL;
        dp1[0][1]=subcol[0];
        for(i=2;i<=j;i++)
            dp1[0][i]=0LL;
        for(i=1;i<j;i++)
            dp1[i][0]=1LL;
        for(i=1;i<j;i++)
            for(k=1;k<=j;k++)
                dp1[i][k]=dp1[i-1][k]+(dp1[i-1][k-1]*subcol[i]);
        for(i=m;i<=j;i++)
            den=den+dp1[j-1][i];
        //printf("%lld\n",den);
        dp2[0][0]=0LL;
        dp2[0][1]=(1LL<<(colfreq[0]-1LL))*cost[0];
        for(i=2;i<=j;i++)
            dp2[0][i]=0LL;
        for(i=1;i<j;i++)
            dp2[i][0]=0LL;
        for(i=1;i<j;i++)
            for(k=1;k<=j;k++)
                dp2[i][k]=(dp2[i-1][k])+(dp2[i-1][k-1]*subcol[i])+(dp1[i-1][k-1]*cost[i]*(1LL<<(colfreq[i]-1LL)));
        for(i=m;i<=j;i++)
            num=num+dp2[j-1][i];
        //printf("%lld\n",num);
        printf("%0.8lf\n",(double)num/den);
    }
    return 0;
}
