#include<iostream>
#include<stdio.h>
#include<cstring>
#include<math.h>
typedef long long int ll;
using namespace std;
int scan_int(){
int r=0,c;
do{
c=getc(stdin);
if(c>=48&&c<=57)
r=r*10+(c-48);
else if(c=='\n'||c==' ')
return r;

}while(1);
}

int main(){

int t,i,j;
ll a[41];
a[0]=1;
for(i=1;i<=40;i++)
{

    a[i]=a[i-1]*2;
}
t=scan_int();
while(t--){
        double ans;
    int n,m,i,j;
    ll dp1[42][42],dp2[42][42],color[42]={0},cost[42]={0},color1[42],cost1[42];
    memset(dp1,0,sizeof(dp1));
    memset(dp2,0,sizeof(dp2));

    n=scan_int(),m=scan_int();
    for(i=1;i<=n;i++){
            int A,b;
        A=scan_int(),b=scan_int();
    color[A]++;
    cost[A]+=b;
    }
    int di=1;
    for(i=1;i<=40;i++)
        if(color[i]){
        color1[di]=color[i];
        cost1[di]=cost[i];
        di++;
        }
        di--;
    for(i=0;i<=di;i++)
        dp1[i][0]=1;
    for(i=1;i<=di;i++){
        for(j=1;j<=di;j++){
            dp1[i][j]+=dp1[i-1][j]+(dp1[i-1][j-1]*(a[color1[i]]-1));
    dp2[i][j]+=dp2[i-1][j]+(dp2[i-1][j-1]*(a[color1[i]]-1))+(dp1[i-1][j-1]*(a[color1[i]-1])*cost1[i]);
        }
    }
    ll num=0,den=0;
    for(i=m;i<=di;i++){
        num+=dp2[di][i];
        den+=dp1[di][i];
    }
    printf("%.8lf\n",(double)num/(double)den);
}
return 0;
}
