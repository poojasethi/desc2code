#include<iostream>
#include<stdlib.h>
#include<stdio.h>
#include<stack>
#include<map>

using namespace std;

#define ll long long
#define INF 2000000000
#define pb push_back
#define pob pop_back
#define f first
#define s second

int main(){
  int t=1;
  scanf("%d",&t);
  while(t--){
    map<int,int> am,cm;
    int n,m;
    cin>>n>>m;
    for(int i=0;i<n;i++){
      int x,y;
      cin>>x>>y;
      am[x]+=y;
      cm[x]++;
    }
    n=0;
    ll a[41],c[41];
    map<int,int> :: iterator it;
    for(it=am.begin();it!=am.end();it++){
      n++;
      a[n]=(*it).s;
      c[n]=cm[(*it).f];
    }
    ll comb[41][41]={0},cost[41][41]={0};
    for(int i=0;i<=n;i++)
      comb[i][0]=1;
    for(int i=1;i<=n;i++){
      for(int j=1;j<=i;j++){
        comb[i][j]=comb[i-1][j-1]*(((1LL)<<c[i])-1)+comb[i-1][j];
        cost[i][j]=cost[i-1][j-1]*(((1LL)<<c[i])-1)+comb[i-1][j-1]*(((1LL)<<(c[i]-1))*a[i])+cost[i-1][j];
      }
    }
    long double tcost=0,tcomb=0;
    for(int i=m;i<=n;i++){
      tcost+=cost[n][i];
      tcomb+=comb[n][i];
    }
    if(tcost==0)
      printf("%.7LF\n",(tcost));
    else
      printf("%.7LF\n",(tcost/tcomb));
  }
  return 0;
}
