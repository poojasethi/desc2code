#include<iostream>
#include<stdio.h>
#include<vector>
using namespace std;

int main()
{
    int t; cin>>t;
    while(t--)
    {
        vector<int> colors(45,0), cst(45,0);
        int n,m,dcol=0;
        cin>>n>>m;

        for(int i=0;i<n;i++)
        {   int x,y; cin>>x>>y;
            if(!colors[x])dcol++;
            colors[x]++;
            cst[x] += y;   }

        vector< vector<long long> > DP1(45, vector<long long> (45,0)) ;
        for(int i=0;i<=40;i++)
            DP1[i][0] = 1;

        for (int i = 1; i <= 40; i++)
            for (int j = 1; j <= dcol; j++)
                DP1[i][j] = DP1[i-1][j] + DP1[i-1][j-1] * ((1LL << colors[i]) - 1);

        vector< vector<long long> > DP2(45, vector<long long> (45,0)) ;
        for (int i = 1; i <= 40; i++)
            for (int j = 1; j <= dcol; j++)
                DP2[i][j] = DP2[i-1][j] + DP2[i-1][j-1] * ((1LL << colors[i]) - 1) + DP1[i-1][j-1] * cst[i] * (1LL << (colors[i] - 1));

        long long a=0, b=0;
        for(int i=m;i<=dcol;i++)
        {   a += DP2[40][i];
            b += DP1[40][i];   }
        printf("%.7f\n",1.*a/b);
    }
    return 0;
}
