#include<iostream>
#include<stdio.h>
#include<map>
using namespace std;
int main()
{
	long long i,j,k,t,l,m,o,n,ans,temp,x,len,total;
	char ch;
	long long arr[100005];
	cin>>t;
	while(t--)
	{
	 	cin>>n>>m;
	 	for(i=0;i<=n;i++)
	 	{
 		arr[i]=-1;	
	 	}
	 	for(i=0;i<m;i++)
	 	{
	 	scanf("\n%c%lld",&ch,&temp);
	 	arr[temp]=(ch-'A');
	 	}
	 	
	 	ans=1;
	 	j=-1;
	 	x=-1;
	 	for(i=0;i<=n;i++)
 	 	{
 	 		if(arr[i]!=-1)
 	 		{
 	 			if(j!=-1)
 	 			{
		 	 		if(arr[i]!=x)
		 	 		{
	 	 			
		 	 		ans=(ans*(i-j))%1000000009;
		 	 		j=i;
		 	 		x=arr[i];
		 	 		}
		 	 		else
		 	 		{
	 	 			j=i;
	 	 			}
	 	 		}
		 	 	else
		 	 	{
 	 				j=i;
 	 				x=arr[i];
 				}
	 	 	
 	     	}
 		 }
 	 cout<<ans<<'\n';
	}
	return 0;
} 