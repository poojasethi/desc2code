#include<iostream>
#include<stdio.h>
#include<vector>
#include<algorithm>
using namespace std;

int main()
{
long long int t,n,m,i,r,p,q;

    scanf("%lld\n",&t);
    while(t--){
    //int n,m;
    vector <int> a(100005);

    scanf("%lld %lld\n",&n,&m);

    for( i=0;i<m;i++){
    char c;
    int temp;
    scanf("%c %d",&c,&temp);
    //scanf("%d",&temp);
    getchar();
    a[temp-1]=c;
    }
    //cout<<endl;
//for(i=0;i<n;i++)
//cout<<a[i];
p=0;q=0;r=1;
for(i=0;i<n;i++)
{
if(!(a[i]>=65 && a[i]<=91))
p++;
else
{
break;
}}
while(p<n && q<n)
{

q=p+1;
for(i=p+1;i<n;i++)
{
if(!(a[i]>=65 && a[i]<=91))
q++;
else
    break;
}
if(a[p]==a[q] && i<n)
r=(r*1)%1000000009;
else if(a[p]!=a[q] && i<n)
r=(r*(q-p))%1000000009;
p=q;
}a.clear();
cout<<r<<endl;

}
return 0;
}
