#include<iostream>
#include<vector>
#include<algorithm>
#include<utility>
#include<functional>
#include<cstring>
#include<map>
using namespace std;
int main()
{
	int t;
	long int n, i;
	long long int b, l;
	vector<pair<long long int, long long int> > v;
	map < int,bool> flag;
	cin>>t;
	while (t--)
	{
		flag.clear();
		cin>>n;
		for (i=0; i<n;i++) 
		{
			cin>>b>>l;
			v.push_back(make_pair(l, b));
		}
		sort(v.begin(), v.end());
		//for (i=0; i<n; i++) cout<<v[i].first<<"  "<<v[i].second<<endl;
		long long int ans=0, len=0, count=0;
		for (i=0; i<n; i++)
		{
		
		//int temp=v[i].second;
		//cout<<flag[temp]<<endl;
			if (flag[v[i].second]==false)
			{
				count++;
				ans=ans+count*v[i].first;
				flag[v[i].second]=true;
								
			}
			else
			{
				len=len+v[i].first;
				
			}
		}
		ans=ans+len*count;
		cout<<ans<<endl;
		v.clear();
		
	}
	return 0;
	
}