#include <iostream>
#include <vector>
#include <set>
#include <algorithm>

using namespace std;

int main()
{
    int t,n,i;
    long long b,l,p,q,coun;
    cin >> t;
    while (t--) {
          cin >> n;
          vector < pair<long long, long long> > a(n);
          long long in[n];
          set <long long> k;
          for (i = 0; i < n; i++) {
              cin >> b >> l;
              a[i].first = l;
              a[i].second = b;
          }
          
          sort(a.begin(), a.end());
          
          p = 0;
          coun = 0;
          for (i = 0; i < n; i++) {
              if (k.count(a[i].second) == 0) {
                 k.insert(a[i].second); 
                 q = (long long)(k.size());
                 p = p + (a[i].first)*q;
              }
              else {
                   in[coun++] = a[i].first;
              }
          }
          long long t=0;
              for (i = 0; i < coun; i++) {
                  t = t + q*in[i];
              }
              p = p + t;
          cout << p << endl;
    }
    
    return 0;
}
