#include<iostream>
#include<algorithm>
#include<vector>
#include<limits>
using namespace std;
 
#define MAX 100002
 
int main()
{
    int t;
    cin >> t;
    while(t--)
    {
        std::vector< pair<long long, long long> > info;
        long long n;
 
        cin >> n;
        for(long long i=0;i<n;i++)
        {
            long long b, l;
            cin >> b >> l;
            info.push_back( make_pair(b, l) );
        }
 
        sort(info.begin(), info.end());
 
        long long previousBand = -1, bandCount = 0;
        long long minL[MAX];
 
        unsigned long long result = 0;
 
        for(long long i=0;i<n;i++)
        {
            if( previousBand != info[i].first )
            {
                previousBand = info[i].first;
                minL[bandCount++] = info[i].second;
            }
        }
 
        sort(minL, minL + bandCount);
 
        for(long long i=1;i<=bandCount;i++)
            result += i*minL[i-1];
 
        previousBand = -1;
        for(long long i=0; i<n; i++)
        {
            if( previousBand != info[i].first )
                previousBand = info[i].first;
            else
            {
                result += bandCount*info[i].second;
            }
        }
 
        cout << result << endl;
 
    }
 
}