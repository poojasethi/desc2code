#include <iostream>
#include <iomanip>
#include <iterator>
#include <cstdio>
#include <cstdlib>
#include <climits>
#include <cstring>
#include <cmath>
#include <cassert>
#include <ctime>
#include <algorithm>
#include <numeric>
#include <map>
#include <stack>
#include <set>
#include <sstream>
#include <queue>
#include <list>
#include <vector>
#include <bitset>
#include <deque>
#include <fstream>
#include <functional>
#include <utility>

using namespace std;

typedef vector<int> vi;
typedef vector<vi> vvi;
typedef pair<int,int> ii;
typedef vector<ii> vii;
typedef set<int> si;
#define lb lower_bound
#define ub upper_bound
#define pb push_back
#define pf push_front
#define mp make_pair
#define ull unsigned long long
#define ll long long
#define fileinput freopen("input.txt", "r", stdin)
#define fileoutput freopen("output.txt", "w", stdout)
#define iptr istream_iterator
#define optr ostream_iterator
#define OUTPUT(stl,type) copy(stl.begin(),stl.end(),optr<type> (cout," "))
// can't be used for map & multimap (can be used for set & multiset)

#define F(i,a,n) for(ll i=(a);i<(n);++i)
#define R(i,a,n) for(ll i=(a);i>=(n);--i)
#define tr(it,container) for(typeof(container.begin()) it = container.begin(); it != container.end(); ++it)
#define S(x) scanf("%d",&x)
#define Sl(x) scanf("%lld",&x)
#define Su(x) scanf("%llu",&x)
#define M(x,i) memset(x,i,sizeof(x))      // useful to clear array of integer
#define debug(i,sz,x) F(i,0,sz){cout<<x[i]<<" ";}cout<<endl

#define fr first
#define se second
#define Debug false
#define sz(a) ((int)a.size())
#define len(a) ((int)a.length())
#define FASTIO          1
#define INF 2147483647
#define MOD 1000000007
#define all(x)             x.begin(),x.end()
#define SORT(x)            sort(ALL(x))
#define v(x)               vector< x >
#define fastio	     ios::sync_with_stdio(false)
#define present(container,element) (container.find(element) != container.end())
#define cpresent(container,element) (find(all(container),element) != container.end())

int ABS(int a) { if ( a < 0 ) return (-a); return a; }
const double pi = acos(-1.0);
int main()
{
	ll t,n,i,x,y,sum,j;
	set<ll> b;
	Sl(t);
	while(t--) {
		j = 0;
		sum = 0;
		Sl(n);
		ll late[n];
		ii band[n];
		F(i,0,n) {
			Sl(x);Sl(y);
			band[i] = mp(y,x);
		}
		sort(band,band+n);
		F(i,0,n) {
			if (b.count(band[i].se)) {
				late[j] = band[i].fr;
				j++;
				continue;
			}
			b.insert(band[i].se);
			sum += ((ll)b.size())*band[i].fr;
		}
		F(i,0,j) {
			sum += ((ll)b.size())*late[i];
		}
		cout<<sum<<endl;
		b.clear();
	}
	return 0;
}
