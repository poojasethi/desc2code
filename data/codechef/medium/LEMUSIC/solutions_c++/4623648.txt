#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

#define f first
#define s second

pair<int, int>a[100005];
int t,n,i,x,y,m;
long long ans,total;
vector<int>songs;

int main()
{
    cin>>t;
    while(t--){
        cin>>n;
        for(i=0;i<n;i++){
            cin>>x>>y;
            a[i]=make_pair(x,y);
        }
        sort(a,a+n);
        total=0ll;songs.clear();
        for(i=0;i<n;i++){
            if( i==0 || (a[i-1].f < a[i].f) )
                songs.push_back(a[i].s);
            else
                total+=(long long)a[i].s;
        }
        sort(songs.begin(),songs.end());
        m=songs.size();
        ans=(long long)m*total;
        for(i=0;i<m;i++)ans+=(i+1ll)*songs[i];
        cout<<ans<<endl;
    }
    return 0;
}
