#include<iostream>
#include<vector>
#include<algorithm>
#include<utility>
#include<functional>
#include<cstring>
#include<map>
using namespace std;
inline void scanint(long long int* x)
{
	register char c = getchar_unlocked();
	*x = 0;
	for(; (c<48)||(c>57);c = getchar_unlocked());
	for(; (c>47)&&(c<58);c = getchar_unlocked())
		*x = (long long int)((((*x)<<1) + ((*x)<<3)) + c - 48);
}

inline void scanint(int* x)
{
	register char c = getchar_unlocked();
	*x = 0;
	for(; (c<48)||(c>57);c = getchar_unlocked());
	for(; (c>47)&&(c<58);c = getchar_unlocked())
		*x = (long long int)((((*x)<<1) + ((*x)<<3)) + c - 48);
} 
inline void printint(int n)
{
	if(n == 0)
	{
		putchar_unlocked('0');
		putchar_unlocked('\n');
	}
	else
	{
		char buf[20];
		buf[19] = '\n';
		int i = 18;
		while(n)
		{
			buf[i--] = n % 10 + '0';
			n /= 10;
		}
		while(buf[i] != '\n')
			putchar_unlocked(buf[++i]);
	}	
}
 
int main()
{
	int t;
	long long int n, i;
	long long int b, l;
	vector<pair<long long int, long long int> > v;
	map < int,bool> flag;
	scanint(&t);
	while (t--)
	{
		flag.clear();
		scanint(&n);
		for (i=0; i<n;i++) 
		{
			scanint(&b);
			scanint(&l);
			v.push_back(make_pair(l, b));
		}
		sort(v.begin(), v.end());
		//for (i=0; i<n; i++) cout<<v[i].first<<"  "<<v[i].second<<endl;
		long long int ans=0, len=0, count=0;
		for (i=0; i<n; i++)
		{
		
		//int temp=v[i].second;
		//cout<<flag[temp]<<endl;
			if (flag[v[i].second]==false)
			{
				count++;
				ans=ans+count*v[i].first;
				flag[v[i].second]=true;
								
			}
			else
			{
				len=len+v[i].first;
				
			}
		}
		ans=ans+len*count;
		//cout<<ans<<endl;
		printf("%lld\n", ans);
		v.clear();
		
	}
	return 0;
	
}