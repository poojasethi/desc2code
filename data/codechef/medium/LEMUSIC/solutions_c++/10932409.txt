#include<bits/stdc++.h>
using namespace std;

class song{
	public:
	long long b,l;
};

bool f(song c1,song c2){
	if(c1.b!=c2.b) return c1.b<c2.b;
	return c1.l<c2.l;
}  

int main(){
	long long t;cin>>t;
	for(long long qq=0;qq<t;qq++){
		long long n;cin>>n;
		vector<song> v(n);
		vector<long long> vm;
		for(long long i=0;i<n;i++){
			scanf("%lld%lld",&v[i].b,&v[i].l);
		}
		sort(v.begin(),v.end(),f);
		
		long long tot1=0,tot2=0,bands=1;
		vm.push_back(v[0].l);
		for(long long i=1;i<n;i++){
			if(v[i].b!=v[i-1].b){
				bands++;
				vm.push_back(v[i].l);
				//cout<<"L "<<v[i].l<<endl;
			}
			else{
				tot2+=v[i].l;
			}
		}
		sort(vm.begin(),vm.end());
		for(long long i=0;i<vm.size();i++){
			tot1+=((i+1)*vm[i]);
		}
		//cout<<tot1<<" "<<tot2<<endl;
		tot1+=bands*tot2;
		cout<<tot1<<endl;
	}
}

