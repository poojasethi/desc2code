#include<bits/stdc++.h>
#define int long long int
#define ii pair<int,int>
using namespace std;
 main()
{
	int t;
	scanf("%lld",&t);
	while(t--)
	{
		int n,c,l,i,ans=0,m;
		scanf("%lld",&n);
		vector<ii> a;
		vector<int> b;
		a.resize(n);
		for(i=0;i<n;i++)
		{
			scanf("%lld%lld",&a[i].first,&a[i].second);
		}
		sort(a.begin(),a.end());
		for(i=0;i<n;i++)
		{
			if(i==0||a[i].first>a[i-1].first)
			b.push_back(a[i].second);
			else
			ans+=a[i].second;
		}
		m=b.size();
		ans=ans*m;
		sort(b.begin(),b.end());
		for(i=0;i<m;i++)
		ans+=(i+1)*b[i];
		printf("%lld\n",ans);
	}
}
		
