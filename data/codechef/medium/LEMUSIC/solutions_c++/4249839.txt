#include<stdio.h>
#include<algorithm>
#include<vector>

#define MAX 100002


int main()
{
    int t;
    scanf("%d", &t);
    while(t--)
    {
        std::vector< std::pair<long long, long long> > info;
        long long n;

        scanf("%lld", &n);
        for(long long i=0;i<n;i++)
        {
            long long b, l;
            scanf("%lld %lld", &b, &l);
            info.push_back( std::make_pair(b, l) );
        }

        sort(info.begin(), info.end());

        long long previousBand = -1, bandCount = 0;
        long long minL[MAX];

        unsigned long long result = 0;

        for(long long i=0;i<n;i++)
        {
            if( previousBand != info[i].first )
            {
                previousBand = info[i].first;
                minL[bandCount++] = info[i].second;
            }
        }

        std::sort(minL, minL + bandCount);

        for(long long i=1;i<=bandCount;i++)
            result += i*minL[i-1];

        previousBand = -1;
        for(long long i=0; i<n; i++)
        {
            if( previousBand != info[i].first )
                previousBand = info[i].first;
            else
            {
                result += bandCount*info[i].second;
            }
        }

        printf("%lld\n", result);
    }

}
