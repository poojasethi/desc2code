#include<iostream>
#include<string.h>
using namespace std;
int pos[1000000][2];
char curssors[1000000];
int main()
{
	int test;
	int n,m,x,y,l;
	int index;
	int com;
	int len;
	int i,j;
	int x_c,y_c;
	cin>>test;
	while(test--)
	{
		cin>>n>>m>>x>>y>>l;
		cin>>curssors;
		len=strlen(curssors);
		index=0;
		com=0;
		pos[index][0]=x;
		pos[index][1]=y;
		while(com<len)
		{
			x_c=pos[index][0];
			y_c=pos[index][1];
			index++;
			if(curssors[com]=='U')
			{
				pos[index][0]=x_c;
				pos[index][1]=y_c+1;
			}
			else if(curssors[com]=='D')
			{
				pos[index][0]=x_c;
				pos[index][1]=y_c-1;
			}
			else if(curssors[com]=='L')
			{
				pos[index][0]=x_c-1;
				pos[index][1]=y_c;
			}
			else if(curssors[com]=='R')
			{
				pos[index][0]=x_c+1;
				pos[index][1]=y_c;
			}
			com++;

		}
		int flag;
		int x_r,y_r;
		if(pos[l-1][1]==pos[l-2][1])
		{
			if(pos[l-1][0]>pos[l-2][0])
			{
				flag=0;
                                x_r=n;y_r=pos[l-1][1];
				for(i=l-3;i>=0;i--)
				{
					if(pos[i][1]==pos[l-1][1]&&pos[i][0]>pos[l-1][0]&&pos[i][0]-pos[l-1][0]<=i)
					{
						flag=1;
						if(x_r>pos[i][0])
							x_r=pos[i][0];
					}

				}
				if(flag==1)
				{
					cout<<"BODY "<<x_r-pos[l-1][0]-1;
				}
				else
					cout<<"WALL "<<x_r-pos[l-1][0];
			}
			else if(pos[l-1][0]<pos[l-2][0])
			{
				flag=0;
				x_r=1;y_r=pos[l-1][1];
				for(i=l-3;i>=0;i--)
				{
					if(pos[i][1]==pos[l-1][1]&&pos[i][0]<pos[l-1][0]&&pos[l-1][0]-pos[i][0]<=i)
					{
						flag=1;
						if(x_r<pos[i][0])
							x_r=pos[i][0];
					}
				}
				if(flag==1)
					cout<<"BODY "<<pos[l-1][0]-x_r-1;
				else
					cout<<"WALL "<<pos[l-1][0]-x_r;
			}
		}
		else if(pos[l-1][0]==pos[l-2][0])
		{
			if(pos[l-1][1]>pos[l-2][1])
			{
				flag=0;
				x_r=pos[l-1][0];y_r=m;
				for(i=l-3;i>=0;i--)
				{
					if(pos[i][0]==pos[l-1][0]&&pos[i][1]>pos[l-1][1]&&pos[i][1]-pos[l-1][1]<=i)
					{
						flag=1;
						if(y_r>pos[i][1])
							y_r=pos[i][1];
					}
				}
				if(flag==1)
					cout<<"BODY "<<y_r-pos[l-1][1]-1;
				else
					cout<<"WALL "<<y_r-pos[l-1][1];
			}
			else if(pos[l-1][1]<pos[l-2][1])
			{
				flag=0;
				x_r=pos[l-1][0];y_r=1;
				for(i=l-3;i>=0;i--)
				{
                                      if(pos[i][0]==pos[l-1][0]&&pos[i][1]<pos[l-1][1]&&pos[l-1][1]-pos[i][1]<=i)
				      {
					      flag=1;
					      if(y_r<pos[i][1])
						      y_r=pos[i][1];
				      }
				}
				if(flag==1)
					cout<<"BODY "<<pos[l-1][1]-y_r-1;
				else
					cout<<"WALL "<<pos[l-1][1]-y_r;
			}
		}
		cout<<endl;
		



		
	}
return 0;
}
