#include<stdio.h>
#define mod 1000000
int hash[1000004][2];
long long int val[1000004];
 
int main()
{
long long int t,n,a,b,c,d,i,temp,prev,f,last,j,ti,sum,m;
scanf("%lld",&t);
while(t--)
{
scanf("%lld%lld%lld%lld%lld",&n,&a,&b,&c,&d);
last=0;
val[0]=d;
hash[d][0]=1;
hash[d][1]=last;
prev=d;
temp=(a*prev*prev+b*prev+c)%mod;
i=1;
while(i<n && hash[temp][0]==0)
{
last++;
hash[temp][0]=1;
hash[temp][1]=last;
val[last]=temp;
prev=temp;
temp=(a*prev*prev)%mod;
temp=(temp+b*prev+c)%mod;
i++;
}
if(i!=n)
{
j=hash[temp][1];
m=(n-i)%(last-j+1);
ti=(n-i)/(last-j+1);
if(ti%2==1)
{
j=j+m;
for(i=j;i<=last;i++)
{
hash[val[i]][0]=0;
}
}
else
{
last=j+m-1;
for(i=j;i<=last;i++)
{
hash[val[i]][0]=0;
}
}
}
sum=0,f=1;
for(i=999999;i>=0;i--)
{
if(hash[i][0]==0)
{
continue;
}
 
else if(f==1)
{
sum+=i;
hash[i][0]=0;
f=0;
}
else
{
sum-=i;
hash[i][0]=0;
f=1;
}
}
if(sum<0)
sum=sum*-1;
printf("%lld\n",sum);
}
//main();
return 0;
} 
