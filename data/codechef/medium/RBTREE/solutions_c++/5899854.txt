#include<bits/stdc++.h>
using namespace std;
int c=0,ce=0;
int fun(int x,int a,int b) // a>b 
{
	while(a!=b)
	{
		c++;
		if(a%2==0)
		ce++;
		
		x=x/2;
		a--;
	}
	return x;
}
int main()
{

	int t,a,b,x,y,flag=0;
	char ch;
	cin>>t;
	
	while(t--)
	{
		c=0;ce=0;
		cin>>ch>>ch;
		if(ch=='i')
		{
			flag++;
			continue;
		}
		cin>>x>>y;
		a=log2(x);
		b=log2(y);
		
		if(a>b)
		x=fun(x,a,b);
		else
		if(b>a)
		y=fun(y,b,a); 
		
		a=log2(x);
		while(x!=y)
		{
			c=c+2;
			if(a%2==0)
			ce=ce+2;
			
			a--;
			x=x/2;
			y=y/2;
		}
		c++;
		a=log2(x);
		if(a%2==0)
		ce++;
		
		if(ch=='b')
		{
			if(flag%2==0)
			cout<<ce;
			else
			cout<<c-ce;
		}
		else
		{
			if(flag%2==0)
			cout<<c-ce;
			else
			cout<<ce;
		}
		cout<<"\n";
	}
}