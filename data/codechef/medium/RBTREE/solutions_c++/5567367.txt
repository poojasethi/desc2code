#include <iostream>
#include <cstdio>
#include <cstring>
#include <cmath>
using namespace std;

int main()
{
        long long int i,Q,x,y,count,c,lev_an,levx,levy,nax,nay,coloran,r,b,swap,t1,t2;
        char s1[] = "Qi";
        char s[4];
        scanf("%lld", &Q);
        count = 0;
        while(Q--) {
                scanf("%s", s);
                c = strcmp(s,s1);
                if(c==0) count++;
                else {
                        scanf("%lld%lld", &x,&y);
                        t1 = x;
                        t2 = y;
                        while(t1!=t2) {
                                if(t1>t2) t1=t1/2;
                                else t2=t2/2;
                        }
                        lev_an = floor(log2(t1)) +1;
                        levx = floor(log2(x)) +1;
                        levy = floor(log2(y)) +1;
                        nax = levx - lev_an;
                        nay = levy - lev_an;
                        if(lev_an%2==0) coloran = 1;
                        else coloran = 0;
                        if(coloran==0) {
                                r = ceil(((double)nax)/2) + ceil(((double)nay)/2);
                                b = floor(((double)nax)/2) + floor(((double)nay)/2) + 1;
                        } else {
                                b = ceil(((double)nax)/2) + ceil(((double)nay)/2);
                                r = floor(((double)nax)/2) + floor(((double)nay)/2) + 1;
                        }
                        if(count%2!=0) {
                                swap = r;
                                r = b;
                                b = swap;
                        }
                        if(c<0) printf("%lld\n", b);
                        else printf("%lld\n", r);
                }
        }
        return 0;
}