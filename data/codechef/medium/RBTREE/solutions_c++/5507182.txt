#include <bits/stdc++.h>
using namespace std;
int main()
{
    int Q;
    scanf("%d",&Q);
    long long i=0;
    getchar();
    while (Q--)
    {
            char str[3];
            scanf("%s", str);
            long long x,y,red,black;
            red=black=0;
            if (str[1]=='i')
            {
                i++;
            }
            else
            {
                red=black=0;
                scanf("%lld %lld", &x, &y);
                int X,Y;
 
                //printf("%d\t%d\n", X,Y);
                while (x!=y)
                {
                        X= log2(x);
                		Y= log2(y);
                        if (x>y)
                        {
                            if ((X+i)%2==0)
                                                black++;
                            else
                                red++;
                            x=x/2;
 
                        }
                        else
                        {
 
                            if ((Y+i)%2==0)
                                                black++;
                            else
                                red++;
 
                            y=y/2;
 
                        }
                }
 
                X = log2(x);
 
                if ((X+i)%2==0)
                                black++;
                else
                                red++;
 
                if (str[1]=='r')
                            printf("%lld\n", red);
                else
                            printf("%lld\n", black);
            }
    }
    return 0;
}