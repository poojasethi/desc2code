#include<iostream>
using namespace std;
#define red 1
#define black 0
int level(int n)
{
    int level=1;
    while((n>>=1) >0)
        level++;
    return level;
}
int change(int c)
{
    if(c==black)
        return red;
    else
        return black;
}
int main()
{
    int x,y,q,count=0;
    string s;

    cin>>q;
    while(q--)
    {
        cin>>s;
        if(s=="Qi")
            count++;
        else
        {
            cin>>x>>y;
            int levelx=level(x);
            int levely=level(y);
            int colorx=(count&1?(levelx&1?red:black):(levelx&1?black:red));
            int colory=(count&1?(levely&1?red:black):(levely&1?black:red));
            int color;
            if(x==y)
                cout<<1<<endl;
            else
            {
                if(s=="Qb")
                    color=black;
                else
                    color=red;

                int ans=0;

                if(colorx==color)
                    ans++;
                if(colory==color)
                    ans++;
                while(x!=y)
                {
                    if(x<y)
                    {
                        y>>=1;
                        colory=change(colory);
                        if(colory==color && x!=y)
                            ans++;
                    }
                    else
                    {
                        x>>=1;
                        colorx=change(colorx);
                        if(colorx==color && x!=y)
                            ans++;
                    }
                }
                cout<<ans<<endl;
            }
        }

    }
    return 0;
}
