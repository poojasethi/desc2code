#include <cstdio>
#include <iostream>
#include <vector>
#include <algorithm>
#include <math.h>
#include <cassert>
#include <string>
#include <stack>
#include <queue>
using namespace std;

#define Ss(x) scanf("%s",&x)
#define S(x) scanf("%d",&x)
#define Sl(x) scanf("%ld",&x)
#define Sll(x) scanf("%lld",&x)
#define ull unsigned long long
#define ul unsigned long
#define V(x) vector<x>
#define vecit(x) vector<x>::iterator
#define pb(x) push_back(x)
#define Fl(i,a,n) for(i=(a);i<n;i++)
#define Fg(i,n) for(i=(n);i>0;i--)
#define tin freopen("aain.txt","r",stdin)
#define minof(a,b) a>b?b:a
#define maxof(a,b) a>b?a:b
#define strit string::iterator
#define mod 1000000007

// 0 black 1 red
int main()
{
    ull q, x, y, i;
    long long rc, bc;
    int yr,xr;
    int root = 0;
    cin >> q;
    string query;
    Fl(i, 1, q+1) {
        rc = bc = 0;
        cin >> query;
        if(query == "Qi") {
            if(root == 0) root = 1;
            else root = 0;
        } else {
            cin >> x >> y;
            //cout <<(int)log2(x) << " " << (int)log2(y) << endl;
            if((int)log2(x) % 2 == 0) {
                if(root==0) {
                    bc++;
                    xr = 0;
                } else {
                    rc++;
                    xr = 1;
                }
            } else {
                if(root==0) {
                    rc++;
                    xr = 1;
                } else {
                    bc++;
                    xr = 0;
                }
            }
            if((int) log2(y)%2 == 0) {
                if(root==0) {
                    bc++;
                    yr = 0;
                } else {
                    rc++;
                    yr = 1;
                }
            } else {
                if(root==0) {
                    rc++;
                    yr = 1;
                } else {
                    bc++;
                    yr = 0;
                }
            }
            while(x != y) {
                if(x < y) {
                        y = y / 2;
                        if(yr == 1) {
                            yr = 0;
                            bc++;
                        } else {
                            yr = 1;
                            rc++;
                        }
                } else {
                        x = x / 2;
                        if(xr == 1) {
                            xr = 0;
                            bc++;
                        } else {
                            xr = 1;
                            rc++;
                        }
                }
            }
            if(xr == 1) rc--;
            else bc--;
            if(query == "Qr") cout<<rc<<endl;
            else cout <<bc << endl;
        }
    }
    return 0;
}
