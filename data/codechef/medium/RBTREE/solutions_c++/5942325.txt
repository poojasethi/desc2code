#include<stdio.h>
#include<math.h>
int main()
{
	
	long long int q,z=0;
	scanf("%lld",&q);
	while(q--)
	{
		char str[3];
		long long int r=0,b=0,c=0,l1,l2,x,y,l,total=0;
		scanf("%s",str);
		
		if(str[1]=='i')
		{
			z++;
		}
		
		else if(z%2==0)
		{
			scanf("%lld%lld",&x,&y);
			for(l1=1;l1<31;l1++)
			{
				if((pow(2,(l1-1))<=x)&&(x<=pow(2,l1)-1))
				break;
			}
			for(l2=1;l2<31;l2++)
			{
				if((pow(2,(l2-1))<=y)&&(y<=pow(2,l2)-1))
				break;
			}
			if(l1>l2)
			l=l1;
			if(l2>l1)
			l=l2;
			while(l1!=l2)
			{
				if(l%2!=0)
				b++;
				else
				r++;
				
				if(l1>l2)
				{
					l1--;
					x=x/2;
					l=l1;
				}
				if(l1<l2)
				{
					l2--;
					y=y/2;
					l=l2;
				}
			}
			c=1;
			while(x!=y)
			{
				x=x/2;
				y=y/2;
				c++;
			}
			total=2*c-1;
			if(l1%2==0)
			{
				r+=c;
				b+=total-c;
			}
			else if(l1%2!=0)
			{
				b+=c;
				r+=total-c;
			}
			if(str[1]=='r')
			printf("%lld\n",r);
			else if(str[1]=='b')
			printf("%lld\n",b);
		}
		
		
		
		
		else if(z%2!=0)
		{
		scanf("%lld%lld",&x,&y);
			for(l1=1;l1<31;l1++)
			{
				if((pow(2,(l1-1))<=x)&&(x<=pow(2,l1)-1))
				break;
			}
			for(l2=1;l2<31;l2++)
			{
				if((pow(2,(l2-1))<=y)&&(y<=pow(2,l2)-1))
				break;
			}
			if(l1>l2)
			l=l1;
			if(l2>l1)
			l=l2;
			while(l1!=l2)
			{
				if(l%2!=0)
				r++;
				else
				b++;
				
				if(l1>l2)
				{
					l1--;
					x=x/2;
					l=l1;
				}
				if(l1<l2)
				{
					l2--;
					y=y/2;
					l=l2;
				}
			}
			c=1;
			while(x!=y)
			{
				x=x/2;
				y=y/2;
				c++;
			}
			total=2*c-1;
			if(l1%2==0)
			{
				b+=c;
				r+=total-c;
			}
			 else if(l1%2!=0)
			{
				r+=c;
				b+=total-c;
			}
			if(str[1]=='r')
			printf("%lld\n",r);
			else if(str[1]=='b')
			printf("%lld\n",b);
		} 
	}
	return 0;
}