#include <cstring>
#include <iostream>
#include <cstdio>
#include <cmath>
using namespace std;
typedef long long int ll;

int main() {
	int test,odd,q,x,l1,l2,oc,ec,a,b,i,j,k;
	char c;
	test=1;
	while(test--)
	{
		odd=1;//1=black,0=red;
		cin>>q;
		while(q--)
		{
			scanf(" %c",&c);
			scanf("%c",&c);
			if(c=='i')
			{
				odd^=1;
			}
			else
			{
				oc=ec=0;
				cin>>a>>b;
				if(a>b)
				{
					x=a;a=b;b=x;
				}
				l1=log2(a);
				l2=log2(b);
				i=l2;j=l1;
				while(j>=0)
				{
					bool u,v;
					u=a&(1<<j);
					v=b&(1<<i);
					if(u!=v)	break;
					i--;j--;
				}
				//cout<<i<<" "<<j<<endl;
				if(j>=0)
				{
					k=l1-j;
					for(;k<=l1+1;k++)	
					{
						if(k%2)	oc++;
						else	ec++;
					}
					k=l2-i+1;
					for(;k<=l2+1;k++)
					{
						if(k%2)	oc++;
						else 	ec++;
					}
				}
				else
				{
					for(i=l1+1;i<=l2+1;i++)
					{
						if(i%2)	oc++;
						else	ec++;
					}
				}
				
				if(c=='r')
				{
					if(odd==1)	cout<<ec<<endl;
					else		cout<<oc<<endl;
				}
				else
				{
					if(odd==1)	cout<<oc<<endl;
					else		cout<<ec<<endl;
				}
			}
		}
	}
	return 0;
}