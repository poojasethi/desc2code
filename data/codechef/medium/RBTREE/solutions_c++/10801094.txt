#include <bits/stdc++.h>

#define FOR(i,a,b) for(int i= a; i<= b; i++)
#define FORD(i,a,b) for(int i= a; i>= b; i--)
#define For(i,a,b) for(int i= a; i< b; i++)
#define Ford(i,a,b) for(int i= a; i> b; i--)
#define FORE(i,v) for (__typeof((v).begin()) i=(v).begin();i!=(v).end();i++)
#define Fill(s,a) memset(s,a,sizeof(s));
#define pb push_back
#define mp make_pair
#define fi first
#define se second

using namespace std;

typedef long long ll;
typedef vector<int> vi;
typedef pair<int, int> pii;
typedef unsigned long long ull;

const int N = 100100;

int findColor(int x)
{
    int level = 0;
    while (x != 1)
    {
        x/= 2;
        level++;
    }
    return level % 2;
}

int main()
{
    ios_base::sync_with_stdio(false);
    //freopen("test.inp","r",stdin);
    //freopen("test.out","w",stdout);
    int q;
    cin >> q;

    int fl = 0;
    while (q--)
    {
        string type;
        int x, y;
        cin >> type;
        if (type != "Qi") cin >> x >> y;
        if (type == "Qi") fl = 1 - fl;
        else
        {
            int cnt[2];
            Fill(cnt,0);
            int colorX = findColor(x);
            if (fl) colorX = 1 - colorX;
            int colorY = findColor(y);
            if (fl) colorY = 1 - colorY;
            while (x != y)
            {
                if (x > y)
                {
                    cnt[colorX]++;
                    colorX = 1 - colorX;
                    x/= 2;
                }
                else
                {
                    cnt[colorY]++;
                    y/= 2;
                    colorY = 1 - colorY;
                }
            }
            cnt[colorX]++;
            if (type == "Qb") cout << cnt[0] << endl;
            else cout << cnt[1] << endl;
        }
    }
    return 0;
}
