#include<iostream>
using namespace std;
int t,flag=0,black=1,red=0;

long long int power(long long int a,long long int b)
{
    long long int be=1;
    int i;
    for(i=1;i<=b;i++)
    {
        be=be*a;
    }
    return be;
}
char findcolor(int n)
{
    int i;
    for(i=0;;i++)
    {
        if(n<power(2,i+1)&&n>=power(2,i))
            break;
    }
    if(black==1)
    {
        if(i%2!=0)
            return 'r';
        else
            return 'b';
    }
    else
    {
        if(i%2!=0)
            return 'b';
        else
            return 'r';
    }

}
int main()
{
    ios_base::sync_with_stdio(false);
    cin>>t;
    while(t--)
    {
        char a[3]={'\0'};
        cin>>a;
        if(a[1]=='i')
        {
            if(flag%2==0)
            {
                black=0;
                red=1;
            }
            else
            {
                black=1;
                red=0;
            }
            flag++;
            continue;
        }
        else if(a[1]=='r')
        {
          int n,m,n1,m1,ans,i=0,j=0;
          cin>>n>>m;
          n1=n;
          m1=m;
          while(n1!=m1)
          {
              if(n1>m1)
                {
                n1=n1/2;
                i++;
                }
              else
                {
                m1=m1/2;
                j++;
                }//cout<<endl<<i<<" "<<j<<endl;
          }
                char color=findcolor(n1);
                if(color=='b')
                {
                    if(i%2==0)
                        i=i/2;
                    else
                        i=i/2 +1;
                    if(j%2==0)
                        j=j/2;
                    else
                        j=j/2 +1;
                        ans=i+j;

                }
                else
                {
                        ans=i/2+j/2 +1;
                }
                cout<<ans<<endl;

          }




        else if(a[1]=='b')
        {
           int n,m,n1,m1,ans,i=0,j=0;
          cin>>n>>m;
          n1=n;
          m1=m;
          while(n1!=m1)
          {
              if(n1>m1)
                {
                n1=n1/2;
                i++;
                }
              else
                {
                m1=m1/2;
                j++;
                }
          }
                char color=findcolor(n1);
                if(color=='r')
                {
                    if(i%2==0)
                        i=i/2;
                    else
                        i=i/2 +1;
                    if(j%2==0)
                        j=j/2;
                    else
                        j=j/2 +1;
                        ans=i+j;

                }
                else
                {
                        ans=i/2+j/2 +1;
                }
                cout<<ans<<endl;
          }

        }


    return 0;
}
