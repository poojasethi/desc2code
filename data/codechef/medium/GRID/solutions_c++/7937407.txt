/*_______SHREY MANIK______*/
#include <iostream>
#include <string>
#include <climits>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#include <vector>
#include <algorithm>
#include <utility>
#include <queue>
#include <stack>
#include <map>
#include <set>
#include <cstring>
#include <iomanip>
#include<list>
#define ff first
#define ss second
#define MOD 1000000007
#define LL long long
#define SET(a) memset(a,-1,sizeof(a))
#define CLEAR(a) memset(a,0,sizeof(a))
#define mp(a,b) make_pair(a,b)
#define pb(a) push_back(a)
using namespace std;
template<class T>T gcd(T a,T b){return (b==0)?a:gcd(b,a%b);}
template<class T>T lcm(T a,T b){return (a*b)/gcd(a,b);}
char a[1005][1005];
int t,a1[1005][1005],a2[1005][1005],ct,n;
int main()
{
  cin>>t;
  while(t--)
  {
  cin>>n;
  ct=0;
  for(int i=0;i<n;i++)
  cin>>a[i];
  CLEAR(a1);
  CLEAR(a2);
  for(int i=n-1;i>=0;i--)
  {
  for(int j=n-1;j>=0;j--)
  {
   if(j<n-1)
   {
     if(a[i][j]=='#'||a1[i][j+1]==1)
     a1[i][j]=1;
   }
   else if(a[i][j]=='#')
   a1[i][j]=1;
  }
 }
 for(int i=n-1;i>=0;i--)
 {
 for(int j=n-1;j>=0;j--)
 {
    if(i<n-1)
    {
    if(a[i][j]=='#'||a2[i+1][j]==2)
    a2[i][j]=2;
    }
    else if(a[i][j]=='#')
    a2[i][j]=2;
    
 }
 }
 for(int i=0;i<n;i++)
 {
 for(int j=0;j<n;j++)
 {
  if(a1[i][j]==1||a2[i][j]==2||a[i][j]=='#')
  {}
  else ct++;
 }
 }
  cout<<ct<<"\n";
  }
  return 0;
}