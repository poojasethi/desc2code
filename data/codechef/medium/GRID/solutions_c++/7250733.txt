 #include <stdio.h>
     
    int main()
    {
    int t, n, i, j, k, x;
    char arr[1000][1000];
    scanf("%d", &t);
    for(i=0; i<t; i++)
    {
    int ans = 0;
    scanf("%d", &n);
    int row[1000], col[1000];
    getchar_unlocked();
    for(j=0; j<n; j++, getchar_unlocked())
    for(k=0; k<n; k++)
    arr[j][k] = getchar_unlocked();
     
    for(j=0; j<n; j++)
    {
    for(k=n-1; k>=0; k--)
    if(arr[j][k] == '#')
    {
    row[j] = k;
    break;
    }
    if(k == -1) row[j] = k;
    }
     
    for(j=0; j<n; j++)
    {
    for(k=n-1; k>=0; k--)
    if(arr[k][j] == '#')
    {
    col[j] = k;
    break;
    }
    if(k == -1) col[j] = k;
    }
     
    for(j=0; j<n; j++)
    for(k=row[j]+1; k<n; k++)
    if(col[k] < j)
    ans ++;
    printf("%d\n", ans);
    }
    }  