#include <iostream>
#include<cstdio>
#include<cstring>
int d[1000][1000];
 int main()
 {long long int t,flag,i,j,n,count,k;
  char s[1002][1002];
  
  scanf("%lld",&t);
  while(t--)
  { count=0;
    memset(d,0,sizeof(int)*1000000);
   scanf("%lld",&n);
   for(k=0;k<n;k++)
   {
    scanf("%s",s[k]);
   }
    for(i=0;i<n;i++)
    {
      for(j=n-1;j>=0;j--)
    	{ if(s[i][j]=='.')
	      {d[i][j]+=1;
	      }
	      if(s[i][j]=='#')
	      {break;
	      }
	 
	   }
	
	}
	for(j=0;j<n;j++)
    {
      for(i=n-1;i>=0;i--)
    	{ if(s[i][j]=='.')
	      {d[i][j]+=1;
	      }
	      if(s[i][j]=='#')
	      {break;
	      }
	 
	   }
	
	}
	for(i=0;i<n;i++)
	{for(j=0;j<n;j++)
	 {if(d[i][j]==2)
	  count+=1;
	 }
	}
	
   printf("%lld\n",count);	
  }
   return 0;
 }