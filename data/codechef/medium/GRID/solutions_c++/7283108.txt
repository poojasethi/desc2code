#include<bits/stdc++.h>

using namespace std;

#define si(x) scanf("%d",&x)
#define pri(x) printf("%d",x)
#define sll(x) scanf("%lld",&x)
#define pll(x) printf("%lld",x)
#define sch(x) scanf("%c",&x)
#define sstr(s) scanf("%s",s)
#define pstr(s) printf("%s",s)
#define nl printf("\n")
#define ll long long int

int rt[1000][1000],dn[1000][1000];

int main()
{
    int t;
    si(t);
    while(t--)
    {
	int n;
	si(n);
	char a[n][n],x;
	for(int i=0;i<n;++i)
	{
	    sch(x);
	    for(int j=0;j<n;++j)
		sch(a[i][j]);
	}
	memset(rt,0,sizeof(rt));
	memset(dn,0,sizeof(dn));
	int ans=0;
	if(a[n-1][n-1]=='.')
	{
	    rt[n-1][n-1]=dn[n-1][n-1]=1;
	    ans++;
	}
	for(int i=n-2;i>=0;--i)
	{
	    if(a[n-1][i]=='.')
		dn[n-1][i]=1;
	    if(a[n-1][i]=='.' && rt[n-1][i+1]==1)
	    {
		rt[n-1][i]=1;
		ans++;
	    }
	}
	for(int i=n-2;i>=0;--i)
	{
	    if(a[i][n-1]=='.')
	    {
		rt[i][n-1]=1;
		if(dn[i+1][n-1]==1)
		{
		    dn[i][n-1]=1;
		    ans++;
		}
	    }
	    for(int j=n-2;j>=0;--j)
	    {
		if(a[i][j]=='.')
		{
		    if(rt[i][j+1]==1 && dn[i+1][j]==1)
		    {
			dn[i][j]=rt[i][j]=1;
			ans++;
		    }
		    if(rt[i][j+1]==1)
			rt[i][j]=1;
		    if(dn[i+1][j]==1)
			dn[i][j]=1;
		}
	    }
	}
/*	for(int i=0;i<n;++i) {
	    for(int j=0;j<n;++j)
		cout<<rt[i][j]<<" ";
	    nl;
	}
	for(int i=0;i<n;++i) {
	    for(int j=0;j<n;++j)
		cout<<dn[i][j]<<" ";
	    nl;
	}
*/	pri(ans); nl;
    }
    return 0;
}
