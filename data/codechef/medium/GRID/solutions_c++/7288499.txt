#include <bits/stdc++.h>
using namespace std;

int main() {
	int t;cin>>t;
	while(t--){
	    int n;cin>>n;
	    char A[n][n];
	    int i,j;
	    for(i=0;i<n;i++)
	        for(j=0;j<n;j++)
	            cin>>A[i][j];
	    
	    bool dp1[n][n];
	    
	    for(i=0;i<n;i++)
	        if(A[i][n-1]=='#')
	            dp1[i][n-1]=0;
	        else 
	            dp1[i][n-1]=1;
	            
	    for(i=0;i<n;i++)
	        for(j=n-2;j>=0;j--)
	            if(A[i][j]=='#')
	            dp1[i][j]=0;
	        else 
	            dp1[i][j]=dp1[i][j+1];
	            
	    bool dp2[n][n];
	    
	    for(i=0;i<n;i++)
	        if(A[n-1][i]=='#')
	            dp2[n-1][i]=0;
	        else 
	            dp2[n-1][i]=1;
	            
	    for(i=n-2;i>=0;i--)
	        for(j=0;j<n;j++)
	            if(A[i][j]=='#')
	            dp2[i][j]=0;
	        else 
	            dp2[i][j]=dp2[i+1][j];
	 
	    int count=0;
	    for(i=0;i<n;i++)
	        for(j=0;j<n;j++)
	            if(dp1[i][j]&&dp2[i][j])
	            count++;
	    cout<<count<<endl;
	    
	}
}
