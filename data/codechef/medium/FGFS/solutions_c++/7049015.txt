#include<iostream>
#include<vector>
#include<algorithm>
using namespace std;
typedef long long ll;
 
#ifndef ONLINE_JUDGE
inline int getchar_unlocked()
{
	return getchar();
}
#endif
inline long long scn()
{
	long long n = 0, c = getchar_unlocked(),t=0;
	while(c < '0' || c > '9')
	{
		if(c==45)t=1;
		c = getchar_unlocked();
	}
	while(c >= '0' && c <= '9')n = (n<<3) + (n<<1) + c - '0', c = getchar_unlocked();
 
	if(t==0)return n;
	else return -n;
}

int main()
{
	ll t=scn();
	while(t--)
	{
		ll n=scn(),k=scn();
		if(n==0)
		{ cout<<0<<endl;
		continue;
		}
		vector< pair<ll,pair<ll,ll> > > a;
		for(int i=0;i<n;i++)
		{
			int s=scn(),f=scn(),p=scn();
			a.push_back(make_pair(p,make_pair(f,s)));
		}
		
		sort(a.begin(),a.end());
		/*
		for(int i=0;i<a.size();i++)
		{
			cout<<a[i].first<<" "<<a[i].second.first<<" "<<a[i].second.second<<endl;
		}
		*/
		ll cnt=0,temp=1,f=a[0].second.first,p=a[0].first;
		
		for(int i=1;i<n;i++)
		{
			if(a[i].first==p)
			{
				if(a[i].second.second<f)
				continue;
				else
				{ temp++;
				  f=a[i].second.first;
				}
			}
			else
			{
				cnt+=temp;
				p=a[i].first;
				temp=1;
				f=a[i].second.first;
			}
		}
		cnt+=temp;
		cout<<cnt<<endl;
		
	}
}