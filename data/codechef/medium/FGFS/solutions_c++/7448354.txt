
#include <cstdio>
#include <cstring>
#include <algorithm>
#include<unistd.h>
#include<stdint.h>
using namespace std;
int inline take()
{
	char c;
	int n=0;
	
	c=getchar();
	while(c < '0' || c >'9') {c=getchar();}
    while(c>='0' && c<='9')
	{
		n=(n<<3)+(n<<1)+c-'0';
		c=getchar();
	}
	return n;
}
class hello
{
	public :
	int s,f,p;
	bool operator <(const hello &b) const {
		if (p != b.p) return p < b.p;
		return f < b.f;
	}
}c[100005];

main()
{
	int T,t,n,k,i,add;
	T=take();
	while(T--)
	{
		n=take();
		k=take();
		for(i=0;i<n;i++)
		{
			c[i].s=take();
			c[i].f=take();
			c[i].p=take();
			
		}
		sort(c,c+n);
		
		add=0;
		
		for(i=0;i<n;i=k)
		{
			for(t=0,k=i;c[k].p==c[i].p && k<n;k++)
			{
				if(t<=c[k].s)
				{
					add++;
					t=c[k].f;
				}
				
			}
		}
		printf("%d\n",add);
	}
	
}