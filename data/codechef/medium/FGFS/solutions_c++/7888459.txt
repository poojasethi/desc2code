#include <stdio.h>
#include <algorithm>
using namespace std;

#define fi "Bon Appetit.inp"
#define fo "Bon Appetit.out"

struct entry
{
	int start;
	int end;
	int compartment;
};
typedef struct entry customer;
bool compare(customer a,customer b)
{
	if(a.compartment<b.compartment) return true;
	else if(a.compartment==b.compartment)
	{
		return (a.end<b.end);
	}
	else return false;
}
customer c[100009];
int main()
{
 	
 	//freopen(fi,"r",stdin);
	//freopen(fo,"w",stdout);
 	
	int t,n,k,p,q,r;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%d %d",&n,&k);
		for(int i=0;i<n;i++)
		{
			scanf("%d %d %d",&p,&q,&r);
			c[i].start=p;
			c[i].end=q;
			c[i].compartment=r;
		}
		sort(c,c+n,compare);
		int i=0, cnt=0;
		while(i<n)
		{
			int comp=c[i].compartment;int j=i; i++; ++cnt;
			while(i<n && c[i].compartment==comp)
			{
				if(c[i].start>=c[j].end) { cnt++; j=i; }
				i++;
			}
		}
		printf("%d\n",cnt );
	}
}