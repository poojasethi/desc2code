#include <bits/stdc++.h>
using namespace std;
typedef pair<int,int> pii;
typedef map<int,vector<pii> > mvp;
bool fun(pii a,pii b)
{
	if(a.second<b.second)
		return true;
	else if(a.second==b.second)
		return a.first>b.first;
	else
		return false;
}
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n,k,s,f,p,i,cur_fin;
		mvp a;
		scanf("%d %d",&n,&k);
		for(i=0;i<n;i++)
		{
			scanf("%d %d %d",&s,&f,&p);
			a[p].push_back(make_pair(s,f));
		}
		int ans=0;
		for(mvp::iterator it=a.begin(); it!=a.end();it++)
		{
			sort((it->second).begin(),(it->second).end(),fun);
			cur_fin=it->second[0].second;
			ans++;
			for(i=1;i<(it->second).size();i++)
			{
				
				if(it->second[i].first>=cur_fin)
				{
					ans++;
					cur_fin=it->second[i].second;
				}
			}
		}
		printf("%d\n", ans);
	}
	return 0;
}