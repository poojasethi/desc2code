#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<cmath>
#include<vector>
#include<map>
using namespace std;
typedef pair<int,int> pii;
typedef pair<int,pii> ppii;
int T,n,k;
int main()
{
	scanf("%d",&T);
	while(T--)
	{
		scanf("%d %d",&n,&k);
		ppii A[n];
		map<int,int>mp;
		int s,t,pi,count=0;
		for(int i=0;i<n;i++)
		{
			scanf("%d %d %d",&s,&t,&pi);
			if(mp[pi]==0)mp[pi]=++count;
			
			A[i].first=mp[pi];
			A[i].second.first=t;
			A[i].second.second=s;
		}
		sort(A,A+n);
		
		vector<int> C(count+1,0);
		int res=0;
		for(int i=0;i<n;i++)
		if(C[A[i].first]==0||A[i].second.second>=C[A[i].first])
		{
			res++;
			C[A[i].first]=A[i].second.first;
		}
		cout<<res<<"\n";
	}
	return 0;
}
