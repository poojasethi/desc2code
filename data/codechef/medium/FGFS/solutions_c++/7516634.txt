#include<bits/stdc++.h>
#define lli long long int
using namespace std;
struct node{
	lli s,f,n;
};
inline int input()
{
	int n = 0;
	int ch = getchar_unlocked();
	while (ch < '0' || ch > '9') ch = getchar_unlocked();
	while (ch >= '0' && ch <= '9') {
		n = (n << 3) + (n << 1) + (ch - '0');
		ch = getchar_unlocked();
	}
	return n;

}
inline void output(lli a)
{
	char snum[20];
	int i=0;
	do
	{
		snum[i++]=a%10+48;
		a=a/10;
	}while(a!=0);
	i=i-1;
	while(i>=0)
		putchar_unlocked(snum[i--]);
	putchar_unlocked('\n');

}
int fun(struct node a,struct node b)
{
	if(a.n<b.n)
		return 1;
	else if(a.n>b.n)
		return 0;
	else
	{
		if(a.f<b.f)
			return 1;
		else if(a.f>b.f)
			return 0;
		else
		{
			if(a.s<b.s)
				return 1;
			else
				return 0;
		}
	}
}
int main()
{
	lli l,i,j,k,m,t,a,b,count,ff;
	t=input();
	while(t--)
	{
		a=input();
		b=input();
		struct node arr[a];
		for(i=0;i<a;i++)
		{
			arr[i].s=input();
			arr[i].f=input();
			arr[i].n=input();
		}
		sort(arr,arr+a,fun);
		count=0;

		for(i=0;i<a;i++)
		{
			l=arr[i].n;ff=-1;
			while(arr[i].n==l)
			{
				if(arr[i].s>=ff)
				{
					count++;
					ff=arr[i].f;
				}
				i++;
			}
			i--;
		}
		output(count);
	}
}
