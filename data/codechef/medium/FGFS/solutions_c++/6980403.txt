#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<cstdlib>
#include<map>
#include<algorithm>
#include<climits>
#include<set>
#include<vector>
#include<stack>
#include<queue>
#include<list>
#include<utility>

typedef long long int ll;
using namespace std;

const ll mod=1e9+7;

ll calculate(vector< pair<ll,ll> > a) {
    ll len=a.size();

    if(len==0)
        return 0;

    sort(a.begin(),a.end());
    ll i,ans=1;

    ll lst=a[0].first;

    for(i=1;i<len;i++) {
        if(a[i].second >= lst) {
            ans++;
            lst=a[i].first;
        }
    }

    return ans;
}

int main()
{
    ll t;
    scanf("%lld",&t);

    while(t--) {

        ll n,k,i,cnt=0,s,f,p,pos=0;

        vector< pair<ll,ll> > a[100002];
        map<ll,ll> my;

        scanf("%lld %lld",&n,&k);

        if(n==0) {
            printf("0\n");
            continue;
        }

        for(i=1;i<=n;i++) {
            scanf("%lld %lld %lld",&s,&f,&p);
            p--;

            if(my.count(p)==0) {
                my[p]=pos++;
            }

            a[my[p]].push_back(make_pair(f,s));
        }

        ll ans=0;

        for(i=0;i<n;i++) {
            ans+=calculate(a[i]);
        }

        printf("%lld\n",ans);

    }

    return 0;
}
