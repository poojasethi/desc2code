#include<bits/stdc++.h>
#define mp make_pair
#define pb push_back
using namespace std;
int solve(vector< pair<int,int> > vv) {
    int n=vv.size();
    if(vv.size()==0)
        return 0;
    sort(vv.begin(),vv.end());
    int mx=-1;
    int ans=0;
      for(int i=0;i<n;i++) {
            if(vv[i].second>=mx) {
                ans++;
                mx=vv[i].first;
            }
     }
    return ans;
}
vector< pair<int,int> > v[100005];
map<int,int> m;
int main() {
    int t;cin>>t;
    while(t--) {
        m.clear();
        int cnt=0;
        int n,k;
        scanf("%d%d",&n,&k);
        for(int i=0;i<n;i++) {
            v[i].clear();
            int x,y,z;
          //  cin>>x>>y>>z;
            scanf("%d%d%d",&x,&y,&z);
            z--;
            if(m.count(z)==0) {
                m[z]=cnt++;
            }
            v[m[z]].pb(mp(y,x));
        }
        if(n==0) {
            cout<<0<<endl;
            continue;
        }
        int ans=0;
        for(int i=0;i<cnt;i++) {
            ans+=solve(v[i]);
        }
        cout<<ans<<endl;
    }
}
