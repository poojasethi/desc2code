#include<iostream>
#include<cstdio>
#include<algorithm>

using namespace std;

int main()
{
    int res,n,mat[305][305],arr[12],i,j,x1,y1,x2,y2,ans[13],q,pre[11][305][305],k,flag=0;
    scanf("%d",&n);
    for(i=1;i<=n;i++)
        for(j=1;j<=n;j++)
            scanf("%d",&mat[i][j]);
    for(k=1;k<=10;k++)
        for(i=1;i<=n;i++)
            for(j=1;j<=n;j++)
                pre[k][i][j]=0;

    for(k=1;k<=10;k++)
    {
        if(mat[1][1]==k)
            pre[k][1][1]=1;
        else
            pre[k][1][1]=0;
        for(j=2;j<=n;j++)
        {
            if(mat[1][j]==k)
                flag=1;
            else
                flag=0;
            pre[k][1][j] = pre[k][1][j-1]+flag;
        }
    }
    for(k=1;k<=10;k++)
    {
        for(i=2;i<=n;i++)
        {
            if(mat[i][1]==k)
                flag=1;
            else
                flag=0;
            pre[k][i][1] = pre[k][i-1][1]+flag;
        }
    }

    for(k=1;k<=10;k++)
        for(i=2;i<=n;i++)
            for(j=2;j<=n;j++)
            {
                if(mat[i][j]==k)
                    flag=1;
                else
                    flag=0;
                pre[k][i][j] = pre[k][i-1][j]+pre[k][i][j-1]-pre[k][i-1][j-1]+flag;

            }
    scanf("%d",&q);
    while(q--)
    {
        scanf("%d %d %d %d",&x1,&y1,&x2,&y2);
        //ans=0;
        for(k=1;k<=10;k++)
        {
            ans[k]=0;
        }
        for(k=1;k<=10;k++)
        {
            ans[k] = pre[k][x2][y2]-pre[k][x2][y1-1]-pre[k][x1-1][y2]+pre[k][x1-1][y1-1];
        }
        res=0;
        for(k=1;k<=10;k++)
        {
            if(ans[k]>0)
            res+=1;
        }
        printf("%d\n",res);
    }
    return 0;
}
