#include<iostream>
#include<algorithm>
#include<cmath>
#include<cstdio>
#include<string.h>
#include<cstdlib>

using namespace std;

int gcd(int a,int b)
{
 int r, i;
  while(b!=0){
    r = a % b;
    a = b;
    b = r;
  }
  return a;
}


int min(int a,int b)
{
        return a<b?a:b;
}


int max(int a,int b)
{
        return a>b?a:b;
}

int a[310][310];
int dp[11][310][310];
int main()
{
        int t,i,j,k,m,n,p,q,an,x1,y1,x2,y2;
        scanf("%d",&n);
        for(i=1;i<=n;i++)
        {
                for(j=1;j<=n;j++)
                {
                        scanf("%d",&a[i][j]);
                }
        }


        for(i=1;i<=10;i++)
        {
                for(j=0;j<=n;j++)
                {
                        dp[i][0][j]=0;
                        dp[i][j][0]=0;
                }
        }


        for(i=1;i<=10;i++)
        {
                for(j=1;j<=n;j++)
                {
                        for(k=1;k<=n;k++)
                        {
                                dp[i][j][k]=dp[i][j][k-1]+dp[i][j-1][k]-dp[i][j-1][k-1] + (a[j][k]==i?1:0);
                        }
                }
        }
        scanf("%d",&q);
        while(q--)
        {
                an=0;
                scanf("%d",&x1);
                scanf("%d",&y1);
                scanf("%d",&x2);
                scanf("%d",&y2);
                for(i=1;i<=10;i++)
                {
                        t=dp[i][x2][y2]-dp[i][x2][y1-1]-dp[i][x1-1][y2]+dp[i][x1-1][y1-1];
                        if(t>0)
                        {
                                //printf("i %d\n",i);
                                an++;
                        }
                }
                printf("%d\n",an);
        }
        return 0;
}
