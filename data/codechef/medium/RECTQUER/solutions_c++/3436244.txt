#include<iostream>
#include<cstdio>
#include<stdlib.h>
#include<ctype.h>
#include<string.h>
#include<math.h>

using namespace std;
int cnt[302][302][12]={0},count[12]={0},a[302][302];
int main()
{
    int n,q,x1,y1,x2,y2,c,i,j,k;
    scanf("%d",&n);
    for(i=1;i<=n;i++)
    for(j=1;j<=n;j++)
    scanf("%d",&a[i][j]);
    for(k=1;k<11;k++)
    {
        for(i=1;i<=n;i++)
        {
            count[k]=0;
            for(j=1;j<=n;j++)
            {
                count[a[i][j]]++;
                cnt[i][j][k]=count[k]+cnt[i-1][j][k];
            }
        }
    }

  scanf("%d",&q);
  while(q--)
  {
      scanf("%d%d%d%d",&x1,&y1,&x2,&y2);
      for(i=1;i<11;i++)
      {
          count[i]=cnt[x2][y2][i]-cnt[x2][y1-1][i]-(cnt[x1-1][y2][i]-cnt[x1-1][y1-1][i]);
      }
      c=0;
      for(i=1;i<11;i++)
      { if(count[i])
         c++;
      }
      printf("%d\n",c);
  }

    return 0;
}
