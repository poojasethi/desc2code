#include <stdio.h>
using namespace std;
const int MAXROWS=300,MAXNUM=10;
int G[MAXROWS][MAXROWS],n,q,D[MAXROWS][MAXROWS][MAXNUM]={0};
int main() {
	scanf("%d",&n);
	for(int i=0;i<n;++i) for(int j=0;j<n;++j) scanf("%d",&G[i][j]),G[i][j]--;
	D[0][0][G[0][0]]++;
	for(int j=1;j<n;++j) {
		for(int k=0;k<MAXNUM;++k) {
			D[0][j][k]=D[0][j-1][k];
		}
		D[0][j][G[0][j]]++;
	}
	for(int i=1;i<n;++i) {
		for(int k=0;k<MAXNUM;++k) {
			D[i][0][k]=D[i-1][0][k];
		}
		D[i][0][G[i][0]]++;
	}
	for(int i=1;i<n;++i) {
		for(int j=1;j<n;++j) {
			for(int k=0;k<MAXNUM;++k) {
				D[i][j][k]=D[i-1][j][k]+D[i][j-1][k]-D[i-1][j-1][k];
			}
			D[i][j][G[i][j]]++;
		}
	}
	scanf("%d",&q);
	while(q--) {
		int ii,jj,iii,jjj;
		scanf("%d%d%d%d",&ii,&jj,&iii,&jjj);
		ii--,jj--,iii--,jjj--;
		int ans=0;
		for(int k=0;k<MAXNUM;++k) {
			ans+=(bool)(D[iii][jjj][k]-(ii?D[ii-1][jjj][k]:0)-(jj?D[iii][jj-1][k]:0)+((ii&&jj)?D[ii-1][jj-1][k]:0));
		}
		printf("%d\n",ans);
	}
	return 0;
}

