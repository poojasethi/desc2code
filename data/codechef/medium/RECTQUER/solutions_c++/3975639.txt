#include<iostream>
#include<stdio.h>
#include<string.h>

using namespace std;
int arr[302][302][11];
int main(){
int n,i,j,k,ans=0;
scanf("%d",&n);
for(i=1;i<=n;i++){
    for(j=1;j<=n;j++){
        int t;
        scanf("%d",&t);
        for(k=1;k<=10;k++){
            arr[i][j][k]+=arr[i-1][j][k]+arr[i][j-1][k]-arr[i-1][j-1][k];
            if(k==t)
                arr[i][j][t]+=1;
        }
    }
}
int q;
scanf("%d",&q);
while(q--){
        ans=0;
    int x1,x2,y1,y2;
    scanf("%d %d %d %d",&x1,&y1,&x2,&y2);
    for(k=1;k<=10;k++){
        if(arr[x2][y2][k]-arr[x2][y1-1][k]-arr[x1-1][y2][k]+arr[x1-1][y1-1][k]>0)
        ans++;
    }
printf("%d\n",ans);
}
return 0;
}
