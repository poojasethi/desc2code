#include<iostream>
#include<stdio.h>
#include<string.h>

using namespace std;
int scan_int(){
int r=0,c;
do{
c=getc(stdin);
if(c>=48&&c<=57)
r=r*10+(c-48);
else if(c=='\n'||c==' ')
return r;

}while(1);
}
int arr[302][302][11];
int main(){
int n,i,j,k,ans=0;
n=scan_int();
for(i=1;i<=n;i++){
    for(j=1;j<=n;j++){
        int t;
        t=scan_int();
        for(k=1;k<=10;k++){
            arr[i][j][k]+=arr[i-1][j][k]+arr[i][j-1][k]-arr[i-1][j-1][k];
            if(k==t)
                arr[i][j][t]+=1;
        }
    }
}
int q;
q=scan_int();
while(q--){
        ans=0;
    int x1,x2,y1,y2;
    x1=scan_int(),y1=scan_int(),x2=scan_int(),y2=scan_int();
    for(k=1;k<=10;k++){
        if(arr[x2][y2][k]-arr[x2][y1-1][k]-arr[x1-1][y2][k]+arr[x1-1][y1-1][k]>0)
        ans++;
    }
printf("%d\n",ans);
}
return 0;
}
