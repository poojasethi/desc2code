#include <iostream>
#include <cstdio>
#include <vector>

using namespace std;

int main()
{
	int n;
	int q;
	int x1, y1, x2, y2;
	int a[301][301];
	int b[301][301][11] = {0};
	
	scanf("%d", &n);
	
	for (int i = 1; i <= n; i++) {
		for (int j = 1; j <= n; j++) {
			scanf("%d", &a[i][j]);
		}
	}
	
	for (int i = 1; i <= n; i++) {
		for (int j = 1; j <= n; j++) {
			for (int k = 1; k <= 10; k++) {
				b[i][j][k] = b[i - 1][j][k] + b[i][j - 1][k] - b[i - 1][j - 1][k];
			}
			b[i][j][a[i][j]]++;
		}
	}
	
/*	
for (int i = 0; i <= n; i++) {
		for (int j = 0; j <= n; j++) {
			for (int k = 1; k <= 10; k++) {
				cout << b[i][j][k] << " ";
			}
			cout << endl;
		}
		cout << endl << endl;
	}
	cout << endl;
	
	*/
scanf("%d", &q);
	while (q--) {
		int c[11] = {0};
		int count = 0;
		
		scanf("%d%d%d%d", &x1, &y1, &x2, &y2);
		
		/*if (x1 == x2 && y1 == y2) {
			cout << "1" << endl;
		}*/
		//else {
			for (int i = 1; i <= 10; i++) {
				//c[i] = b[x2][y2][i] - (b[x1][y1][i] + b[x1 - 1][y1][i] + b[x1][y1 - 1][i] + b[x2][y1 - 1][i] + b[x1 - 1][y2][i]);
				c[i] = b[x2][y2][i] - b[x2][y1 - 1][i] - b[x1 - 1][y2][i] + b[x1 - 1][y1 - 1][i];
				//c[a[x1][y1]]++;
				if (c[i] > 0) {
					count++;
				}
			}
			cout << count << endl;
		//}
	}
	
	return 0;
}