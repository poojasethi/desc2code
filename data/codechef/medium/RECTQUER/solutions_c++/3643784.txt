#include<cstdio>
#include<iostream>
#include<algorithm>
#include<bitset>
#include<vector>
using namespace std;
int hash[12][302][302];
int a[305][305];
inline int Scan_f()
{
    register int noRead=0;
    register char p=getchar_unlocked();
    //register char p=getc(stdin);
    for(;p<48 || p>57;p=getchar_unlocked());
    //for(;p<48 || p>57;p=getc(stdin));
    while(p>47 && p<58){ noRead = (noRead << 3) + (noRead << 1) + (p - '0');p=getchar_unlocked();}
    //while(p>47 && p<58){ noRead = (noRead << 3) + (noRead << 1) + (p - '0');p=getc(stdin);}
    return noRead;
}; 

int main()
{
  int n,i,j,q,ans,k,l,x1,x2,y1,y2,tmp;
  scanf("%d",&n);
  for(i=1;i<=n;i++)
  {
   for(j=1;j<=n;j++)
   {
    a[i][j] = Scan_f();
   }
  }
  for(i=1;i<=10;i++)
  {
   tmp = 0;
   for(j=1;j<=n;j++)
   {
    for(k=1;k<=n;k++)
    {
      if(a[j][k] == i)
       tmp++;
      hash[i][j][k] = tmp; 
    }
   }
  }  
 scanf("%d",&q);
 for(k=0;k<q;k++)
 {
   x1 = Scan_f();
   y1 = Scan_f();
   x2 = Scan_f();
   y2 = Scan_f();
   ans = 0;
   for(i=1;i<=10;i++)
   {
    tmp = 0;  
   for(j=x1;j<=x2;j++)
   {
   	if(y1 > 1)
	{
	 tmp += hash[i][j][y2] - hash[i][j][y1-1];
    }
    else
    {
 	 tmp += hash[i][j][y2] - hash[i][j-1][n];
    }
   }
   if(tmp > 0)
    ans++;
   }	   				
   printf("%d\n",ans);
 } 
 return 0;
}
 
