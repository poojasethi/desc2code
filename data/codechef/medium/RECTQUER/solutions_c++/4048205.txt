#include<bits/stdc++.h>
#define pb push_back
using namespace std;
int dp[301][301][11],n,q,x1,y,x2,y2,a[301][301];
int main()
{
	cin>>n;
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=n;j++)
		{
			cin>>a[i][j];
			dp[i][j][a[i][j]]++;
			for(int k=1;k<=10;k++)
			{
				dp[i][j][k]+=(dp[i-1][j][k] + dp[i][j-1][k] - dp[i-1][j-1][k]);
			}
		}
	}
	cin>>q;
	for(int i=0;i<q;i++)
	{
		cin>>x1>>y>>x2>>y2;
		int ans=0;
		for(int i=1;i<=10;i++)
		{
			if(dp[x2][y2][i]-dp[x1-1][y2][i]-dp[x2][y-1][i]+dp[x1-1][y-1][i]>0)ans++;
		}
		cout<<ans<<"\n";
	}
	return 0;
}