#include <iostream>
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
using namespace std;
long long int n;
long long int Qu;
long long int arr[301][301] ;
long long int X1,X2,Y2,Y1 ;
long long int q[301][301][11] ;
int main(){
	cin >> n ;
	for(int i=0;i<=n;i++){
		for(int j=0;j<=n;j++){
			for(int k=0;k<=10;k++){
				q[i][j][k]=0;
			}
		}
	}
	for(long long int i=1;i<=n;i++){
		for(long long int j=1;j<=n;j++){
			cin >> arr[i][j];
			for(int k=1;k<=10;k++){
				q[i][j][k]+=q[i][j-1][k];
				q[i][j][k]+=q[i-1][j][k];
				q[i][j][k]-=q[i-1][j-1][k];
			}
			q[i][j][arr[i][j]]++;
		}
	}
	cin >> Qu;
	for(long long int i=0;i<Qu;i++){
		cin >> X1 >> Y1 >> X2 >> Y2;
		long long int counter=0;
		for(int k=1;k<=10;k++){
			if(q[X2][Y2][k]-q[X2][Y1-1][k]-q[X1-1][Y2][k]+q[X1-1][Y1-1][k]>0){counter++;}
		}
		cout << counter << endl ;
	}
	return 0;
}
