#include <stdio.h>
#include <iostream>
#include <queue>

using namespace std;

int main()
{
    int n;
    scanf("%d",&n);
    int arr[n][n];
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<n;j++)
        {
            scanf("%d",&arr[i][j]);
        }
    }
    int arrs[n][n][10];
    for(int k=0;k<10;k++)
        arrs[0][0][k]=0;
    arrs[0][0][((arr[0][0])-1)]=1;
    for(int i=1;i<n;i++)
    {
        for(int k=0;k<10;k++)
        {
            arrs[i][0][k]=arrs[i-1][0][k];
        }
        arrs[i][0][(arr[i][0]-1)]++;
    }
    for(int j=1;j<n;j++)
    {
        for(int k=0;k<10;k++)
        {
            arrs[0][j][k]=arrs[0][j-1][k];
        }
        arrs[0][j][(arr[0][j]-1)]++;
    }
    for(int i=1;i<n;i++)
    {
        for(int j=1;j<n;j++)
        {
            for(int k=0;k<10;k++)
            {
                arrs[i][j][k]=arrs[i-1][j][k]+arrs[i][j-1][k]-arrs[i-1][j-1][k];
            }
            arrs[i][j][(arr[i][j]-1)]++;
        }
    }
    int q;
    scanf("%d",&q);
    for(int i=0;i<q;i++)
    {
        int x1,y1,x2,y2;
        scanf("%d %d %d %d",&x1,&y1,&x2,&y2);
        int temp[10];
        if(x1>1 && y1>1){
        for(int k=0;k<10;k++)
        {
            temp[k]=arrs[x2-1][y2-1][k]-arrs[x2-1][y1-2][k]-arrs[x1-2][y2-1][k]+arrs[x1-2][y1-2][k];
        }}
        if(x1==1 && y1>1){
        for(int k=0;k<10;k++)
        {
            temp[k]=arrs[x2-1][y2-1][k]-arrs[x2-1][y1-2][k];
        }
        }
        if(x1>1 && y1==1){
        for(int k=0;k<10;k++)
        {
            temp[k]=arrs[x2-1][y2-1][k]-arrs[x1-2][y2-1][k];
        }
        }
        if(x1==1 && y1==1){
        for(int k=0;k<10;k++)
        {
            temp[k]=arrs[x2-1][y2-1][k];
        }
        }
        int ans=0;
        for(int k=0;k<10;k++)
        {
            if(temp[k]>0)
                ans++;
        }
        printf("%d\n",ans);
    }
    return 0;
}
