
# include <cstdio>
# include <cstring>
# include <cmath>
# include <cstdlib>
# include <iostream>
# include <vector>
# include <algorithm>
# include <queue>
# include <set>
# include <map>
using namespace std;
#define N 300
typedef vector<int> vi;
vi diff(vi const &a, vi const &b){
	vi ret(11,0);
	for(int i=0;i<11;++i){
		//cout<<a[i]<<" " << b[i]<<endl;
		ret[i]=a[i]-b[i];
	}
	return ret;
}
vi add(vi const &a, vi const &b){
	vi ret(11,0);
	for(int i=0;i<11;++i) ret[i]=a[i]+b[i];
	return ret;
}
int main(){
	int mat[N+1][N+1];
	int n,q,x1,x2,y1,y2;
	cin>>n;
	vi pref[N+1][N+1];
	//cout<<"hi"<<endl;
	for(int i=0;i<=n;++i) for(int j=0;j<=n;++j) pref[i][j].resize(11,0);
	for(int i=1;i<=n;++i)
		for(int j=1;j<=n;++j) cin>>mat[i][j];

	for(int i=1;i<=n;++i){
		for(int j=1;j<=n;++j){
			pref[i][j]=diff(add(pref[i][j-1],pref[i-1][j]),pref[i-1][j-1]);
			//pref[i][j]=pref[i][j-1];
			++pref[i][j][mat[i][j]];
			//cout<<" for "<<i<< " "<<j<<" "<< pref[i][j][mat[i][j]]<<endl;
		}
	}

	cin>>q;

	while(q--){
		scanf("%d%d%d%d",&x1,&y1,&x2,&y2);
		vi res(11,0);
		res = add ( diff(diff(pref[x2][y2],pref[x2][y1-1]),pref[x1-1][y2]), pref[x1-1][y1-1]);
		//for(int i=x1;i<=x2;++i)
		//	add(res,diff(pref[i][y2],pref[i][y1-1]));
		int dis = 0;
		for(int i=0;i<11;++i) if(res[i]>0) ++dis;
		printf("%d\n",dis);
	}

	return 0;
}
