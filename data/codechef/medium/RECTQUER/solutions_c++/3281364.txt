#include<iostream>
#include<cstdio>
using namespace std;

int main(){
	int m,n,k,i,j;
	scanf("%d",&n);
	int arr[n+1][n+1];
	int bits[n+1][n+1][11];
	for(i=1;i<=n;i++)
		for(j=1;j<=n;j++){
			for(k=1;k<=10;k++)
				bits[i][j][k]=0;
			scanf("%d",&arr[i][j]);
		}
	
	int i1,j1;
	for(i=1;i<=n;i++){
		for(j=1;j<=n;j++){
			for(k=1;k<=10;k++)
				bits[i][j][k]=bits[i-1][j][k]+bits[i][j-1][k]-bits[i-1][j-1][k];
			bits[i][j][arr[i][j]]++;
		}
	}
	//bool hash[m+1][n+1][26]={0};
	scanf("%d",&m);
	
	
	
	while(m--){
		scanf("%d%d%d%d",&i,&j,&i1,&j1);
		int count=0,l;
		for(k=1;k<=10;k++){
			l=bits[i1][j1][k]-bits[i-1][j1][k]-bits[i1][j-1][k]+bits[i-1][j-1][k];
			if(l>0)
				count++;
		}
		printf("%d\n",count);
	}
	return 0;
}