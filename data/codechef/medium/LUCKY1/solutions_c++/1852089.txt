// Februar 2012 - Lucky Count

#include <stdio.h>
#include <map>
using namespace std;

int d[1000001];

const int OFF = 150000;

long long dp[100001];
int s_four[100001], s_seven[100001];

int in[500000];

int Q;

int main()
{
	int maxi = 0;
	
	int T;
	scanf("%d", &T);
	
	
	for(int i = 0; i < T; i++)
	{
		scanf("%d", in + i);
		maxi = max(maxi, in[i]);
	}
	
	d[OFF + 0]++;
	dp[1] = 1;
	for(int i = 2; i <= maxi; i++)
	{
		int four = 0, seven = 0;
		int x = i;
		while(x)
		{
			four  += (x % 10 == 4);
			seven += (x % 10 == 7);
			x /= 10;
		}
		
		s_four[i]  =  s_four [i - 1] + four;
		s_seven[i] =  s_seven[i - 1] + seven;
		
		dp[i] = dp[i - 1] + d[OFF + s_four[i] - s_seven[i]] + (four == seven);
		d[OFF + s_four[i - 1] - s_seven[i - 1]]++;
	}
	
	for(int t = 0; t < T; t++)
		printf("%lld\n", dp[in[t]]);

	
	
	return 0;
}
