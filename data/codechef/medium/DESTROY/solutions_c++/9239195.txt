#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<cmath>
#include<cstdlib>
#include<vector>
#include<climits>
#include<set>
#include<queue>
#include<map>
#include<time.h>
#define s(x) scanf("%d",&x)
#define sl(x) scanf("%lld",&x)
#define pp pair<int,int>
#define lim1 50007
#define mod 1000000007
#define gc getchar_unlocked
typedef long long ll;
using namespace std;
map<ll,int> m;
vector<int> v;
priority_queue<int> pq;
map<ll,int>::iterator it;
bool cmp(const pp& l,const pp& r)
{
    if(l.first==r.first)
    return l.second<r.second;
   return l.first<r.first;
}
bool cmp2(const int& l, const int& r){
    return l>r;
}
int main(){
    int t;
    s(t);
    while(t--){
        m.clear();
        v.clear();
        int n;
        ll ans=0,a;
        s(n);
        for(int i=0;i<n;i++){
            s(a);
            m[a]++;
        }
        for(it=m.begin();it!=m.end();it++)
            pq.push(it->second);
        while(!pq.empty()){
            if(pq.size()==1){
                ans+=pq.top();
                pq.pop();
            }
            else{
                int x=pq.top()-1;
                pq.pop();
                int y=pq.top()-1;
                pq.pop();
                ans++;
                if(x)
                    pq.push(x);
                if(y)
                    pq.push(y);
            }
        }
        printf("%lld\n",ans);
        
    } 
}