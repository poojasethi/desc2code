#include <bits/stdc++.h>
#include <cstdio>
using namespace std;
typedef long long ll;
const int N = 5e4 + 5;
const int SN = 1 << 18;
const int mod = 1e9 + 7;
int tt;
int n;
int a[N];











int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    cin >> tt;
    while(tt--){
       cin >> n;
       for(int i = 0; i<n; ++i) cin >> a[i];
       sort(a , a + n);
       int ct = 1;
       vector < int > res;
       for(int i = 1; i<n; ++i){
        if(a[i]!=a[i-1]){
            res.push_back(ct);
            ct = 1;
            continue;
        }
        ++ct;
       }
       if(ct > 0)
        res.push_back(ct);
       sort(res.begin(),res.end());
       int pt = 0;
       ct = 1;
       for(int i = 1; i<n; ++i){
        ct += a[i]==a[pt];
        ct -= a[i]!=a[pt];
        if(!ct){
            pt = i;
            ct = 1;
        }
       }
       ct = 0;
       for(int i = 0; i<n; ++i) ct += a[i]==a[pt];
       int ans = max(n/2+(n&1) , ct);
       /*int cost = 0;
       int to = (int)(res.size());
       //int pt = to - 1;
       for(int i = 0; i<to; ++i){
        if(res[i]){
            if(pt > i){
            cost += min(res[i],res[pt]);
            if(res[pt] > res[i]) res[pt] -= res[i],res[i] = 0;
            else res[i] -= res[pt],res[pt] = 0,--pt;
            }
            else break;
        }
       }
       for(int i = 0; i<to; ++i) cost += res[i];*/
       cout << ans << endl;
    }
    return 0;
}

