// Training is Nothing.WILL is EVERYTHING!
#include<iostream>
#include<vector>
#include<queue>
#include<algorithm>
#include<map>
#include<stack>
#include<stdio.h>
#include<math.h>
#include<string>
#include<assert.h>
#include<stdlib.h>
using namespace std;

int main(){
	int t,n,x,y,ans;
	cin>>t;
	
	while(t--){
		cin>>n;
		vector<pair<int,int> > v;
		map<int,int> mp;
		while(n--){
			cin>>x;
			if(mp.count(x)<=0){
				v.push_back(make_pair(x,1));
				mp[x]=v.size()-1;
			}else{
				v[mp[x]].second++;				
			}
		}
		priority_queue<int> pq;
		for(int i=0;i<v.size();i++){
			pq.push(v[i].second);
		}
		ans=0;
		while(!pq.empty()){
			x=pq.top();
			pq.pop();
			if(!pq.empty()){
				y=pq.top();
				pq.pop();				
				if(x>1){
					pq.push(x-1);
				}
				if(y>1){
					pq.push(y-1);
				}
				ans+=1;
			}else{
				ans+=x;
			}
		}
		cout<<ans<<endl;
	}
	
	return 0;
}