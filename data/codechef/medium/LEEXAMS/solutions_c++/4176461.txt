#include<bits/stdc++.h>
 
using namespace std;
long long int mod=1000000007;
int gcd(int a,int b)
{
 int r, i;
  while(b!=0){
    r = a % b;
    a = b;
    b = r;
  }
  return a;
}
 
long long int power(long long int x,long long int y)
{
    long long int temp,ty,my;
    long long int mod;
    //mod=1000000007;
    if( y == 0)
        return 1;
    temp = power(x, y/2);
    ty=(temp)*(temp);
    if (y%2 == 0)
        {
 
                return ty;
        }
    else
        {
                my=(x)*(ty);
                return my;
        }
}
struct acm
{
        //int icpc;
        //int bb;
        int ar[17];
};
 
 
 
double solve(int i,int ad,int *p,int *a,int *b,int n,struct acm abhi)
{
        int j,m,k,w,t;
        double a1,a2,a3,a4=0;
        if(i==n)
                return 1;
        else
        {
                //abhi[ad].icpc=1;
                abhi.ar[ad]=1;
                //if(abhi[a[i]].icpc==0 || i==0)
                if(abhi.ar[a[i]]==0 || i==0)
                {
 
                        a1=((p[i]*1.0)/100)*solve(i+1,a[i],p,a,b,n,abhi);
 
                }
                else
                        a1=0;
 
                if(abhi.ar[b[i]]==0  || i==0)
                {
                        //abhi[ad].icpc=1;
                        a2=((100.0-p[i])/100)*solve(i+1,b[i],p,a,b,n,abhi);
 
                }
                else
                        a2=0;
 
                //printf("abhi.ar[a[i]]->%d  a[i]->%d  i->%d  a1->%lf\n",abhi.ar[a[i]],a[i],i,a1);
                //printf("abhi.ar[b[i]]->%d  b[i]->%d i->%d  a2->%lf\n",abhi.ar[b[i]],b[i],i,a2);
                a4=a1+a2;
                return a4;
        }
 
}
 
int p[100];
int a[100];
int b[100];
int main()
{
        struct acm abhi;
        int t,i,j,n,m,k;
        cin>>t;
        while(t--)
        {
                //for(i=0;i<18;i++)
               // {
                       // abhi[i].icpc=0;
                        //abhi[i].bb=0;
                //}
 
                for(i=0;i<17;i++)
                abhi.ar[i]=0;
 
                double ans=0;
                cin>>n;
                for(i=0;i<n;i++)
                {
                        cin>>p[i];
                        cin>>a[i];
                        cin>>b[i];
                }
                if(n>16)
                        printf("%0.9lf\n",ans);
                else
                {
                        ans=solve(0,0,p,a,b,n,abhi);
                        printf("%0.9lf\n",ans);
                }
        }
 
        return 0;
}