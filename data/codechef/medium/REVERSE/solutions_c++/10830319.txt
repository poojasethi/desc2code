#include<bits/stdc++.h>
using namespace std;
int n,m;
vector< pair<int,int> >a[100001];
int dis[100001];
queue < int > q;

int solve()
    {
    int node;
    q.push(1);
while(! q.empty())
{
    node=q.front();
    //printf("Node-->%d\n",node);
    q.pop();
    for(int i=0; i<a[node].size();i++ )
    {
//printf("condition-->dist[%d]=%d > %d + %d size=%d\n",a[node][i].first,dis[a[node][i].first],dis[node],(dis[a[node][i].second]==1),a[node].size());

if( dis[a[node][i].first] > dis[node] + a[node][i].second )
    {
//printf("dist[node]=%d\n",dis[node]);


dis[a[node][i].first] = dis[node] + a[node][i].second;
//printf("PUSH- dist[%d]=%d %d+%d\n",a[node][i].first,dis[a[node][i].first],dis[node],a[node][i].second==1);

q.push(a[node][i].first);
   // printf("A=%d-->%d\n",a[node][i].first,dis[a[node][i].first]);
   }
   //printf("\n");
    }
}
    return dis[n]==999999?-1:dis[n];
}
int main()
    {
        //int arr1[7]={2,3,3,7,6,1,7},arr2[7]={1,2,4,4,2,2,5};
    int x,y;
   // n=m=7;
    scanf("%d%d",&n,&m);
    for(int  i=1;i<=n;i++)
        {
        dis[i]=999999;
    }
    dis[1]=0;
    for(int i=0;i<m;i++)
        {
        scanf("%d%d",&x,&y);
   // x=arr1[i],y=arr2[i];
    a[x].push_back(make_pair(y,0));
    a[y].push_back(make_pair(x,1));
    }
    printf("%d",solve());
    return 0;
}
