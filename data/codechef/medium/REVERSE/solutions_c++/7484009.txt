#include<bits/stdc++.h>
using namespace std;
 
typedef long long ll;
typedef std::vector<int> vi;
typedef pair<int,int> ii;
typedef vector<ii> vii;
#define TRvii(c,it) for(vii::iterator it = (c).begin();it != (c).end() ; it++)
 
int main(){
    int n,m;
    scanf("%d %d",&n,&m);
    vii adjList[n];//(neighbour,weight)
    int i,j;
    for(i=0;i<m;i++){
        int u,v;
        scanf("%d %d",&u,&v);
        u--,v--;
        adjList[u].push_back(ii(v,0));
        adjList[v].push_back(ii(u,1));
    }
    int dist[n];
    bool visited[n];
    memset(visited,0,sizeof(visited));
    int inf=10000000;
    for(i=0;i<n;i++)
        dist[i]=inf;
    dist[0]=0;
    deque <int> pq;
    pq.push_back(0);
    while(!pq.empty()){
        int u=pq.front();
        pq.pop_front();
        //if(visited[u])continue;
        visited[u]=1;
        TRvii(adjList[u],it){
            int v=it->first;
            int weight_u_v=it->second;
            if(dist[v]>dist[u]+weight_u_v){
                if(weight_u_v==0)
                    pq.push_front(v);
                else 
                    pq.push_back(v);
            dist[v]=dist[u]+weight_u_v;
            }
        }
    }
    if(dist[n-1]==inf)cout<<-1;
    else
    cout<<dist[n-1];
} 
