#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define MAXN 1000005
vector<pair<int,int > > vec[100005];
bool visited[MAXN];
ll n,ans[MAXN];
bool bfs(int node){
	queue<int> q;
	q.push(node);
	ans[1] = 0;
	while(!q.empty()){
		node = q.front();
		q.pop();
		int sz = vec[node].size();
		for(int i=0;i<sz;i++){
			if(ans[vec[node][i].first]>ans[node] + vec[node][i].second){
				ans[vec[node][i].first] = ans[node] + vec[node][i].second;
				q.push(vec[node][i].first);
				
			}
		}
	}
	if(ans[n] == 10000000) return false;
	else{
		cout<<ans[n]<<endl;
		return true;
	}
}
int main(){
    ll m,u,v;
    #ifndef ONLINE_JUDGE
        freopen("inp.txt","r",stdin);
    #endif
	cin>>n>>m;
	while(m--){
		cin>>u>>v;
		if(v!=u){
			vec[u].push_back(make_pair(v,0));
			vec[v].push_back(make_pair(u,1));
		}	
	}
	for(int i=1;i<=n;i++) ans[i] = 10000000;
	bool flag = bfs(1);
	
	if(!flag){
		cout<<"-1"<<endl;
	}
    return 0;
} 