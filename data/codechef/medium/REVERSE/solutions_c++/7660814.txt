#include <iostream>
#include <vector>
#include <queue>
#include <map>
#include <cstdio>
#include <cmath>
#include <cstring>
//#include <conio.h>
using namespace std;
#define ii pair<long int,long int>
#define vii vector<ii>
 
vector<vii> adj;
 
priority_queue<ii,vector<ii>,greater<ii> > Q;
 
vii temp;
vector<long int> dist;
 
int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    long int n,m;
    cin>>n>>m;
    
    for(long int i=0;i<n;i++)
    adj.push_back(temp);
    
    long int u,v,weight;
    //undirected graph
    for(long int i=0;i<m;i++)
    {
             cin>>u>>v;
             adj[u].push_back(make_pair(v,0));
             adj[v].push_back(make_pair(u,1));
             }
      dist.resize(n+10);
      
      for(long int i=1;i<=n;i++)
      dist[i]=99999999;
      
      dist[1]=0;
      
      Q.push(ii(0,1));
      
      while(!Q.empty() )
      {
           ii topnode=Q.top();
           Q.pop();
           
         long  int d=topnode.first;
          long  int v=topnode.second;
                       
               long  int v2,cost;
                 
                 if(d<=dist[v])
                 {
                               dist[v]=d;
                         for(vii::iterator it=adj[v].begin();it!=adj[v].end();it++)
                         {
                            v2=it->first;cost=it->second;
                             
                            if(dist[v2]>dist[v]+cost)
                            {
                                                   dist[v2]=dist[v]+cost;
                                                   Q.push(ii(dist[v2],v2));  
                                                     }              
                                          }      
                               
                               }  
                   
                       
                       }
          
 
 
//    for(int i=1;i<=n;i++)
  //  cout<<i<<" "<<dist[i]<<endl;                        
    if(dist[n]>=n+5)
    cout<<-1<<endl;
    else
    cout<<dist[n]<<endl;
    
 
//getch();
return 0;    
}