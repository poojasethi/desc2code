#include<iostream>
#include<string.h>
#include<stdio.h>

using namespace std;

int main() {

int i,T;
char s[1000001];
scanf("%d",&T);
while(T--) {
	//s = new char[100001];
	cin>>s;
	long long S = strlen(s);
	long long ans = (S*(S+1))>>1;
	long long rm = 0;
	long long count = 0;
	for(i=0;i<S;i++) {		
		if(s[i]=='7') {
			count++;
		}
		else if (count>0 && s[i]=='4'){
			rm+=((count*(count+1))>>1);			
			count = 0;
		}
	}
	rm+=((count*(count+1)))/2;
	ans = ans - rm;
	printf("%lld\n",ans);
//	delete s;
}
return 0;
}