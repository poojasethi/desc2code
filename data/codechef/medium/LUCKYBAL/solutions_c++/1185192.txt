#include<cstdio>
#include<cstdlib>
#include<iostream>
#include<algorithm>
#include<vector>
#include<cstring>
#include<ctype.h>
#include<climits>
#include<set>
#include<string>

using namespace std;

#define FOR(i, a, b) for(i=(a);i<=(b);i++)
#define FORR(i, a, b) for(i=(a);i>=(b);i--)
#define S(n) scanf("%d", &n)
#define P(k) printf("%d\n", k)
#define Pl(k) printf("%lld\n", k)
#define pb push_back
#define mp make_pair
#define ll long long

int main(){
    int i, j, k, m, n, t, t1, t2, t3, l, ans;
    char s[100005];
    S(t);
    while(t--){
        scanf("%s", s);
        n = strlen(s);
        ll ans = (ll) n*(n+1)>>1;
        FOR(i, 0, n-1) if(s[i] == '7') break;
        while(i < n){
            j = i+1;
            while(j < n && s[j] == '7') j++;
            ans -= (ll)(j - i)*(j-i+1)>>1;
            while(j < n && s[j] == '4') j++;
            i = j;
        }
        Pl(ans);
    }
    system("pause");
    return 0;
}
