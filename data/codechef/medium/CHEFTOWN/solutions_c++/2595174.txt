#include <iostream>
#include <cstdio>
#include <deque>
using namespace std;

deque<int> minq, maxq;
int h[400001];

int main() {
  int n, w, i, j, t, min, max, res;
  scanf("%d%d",&n,&w);
  for(i=0;i<n;++i) scanf("%d",h+i);
  for(i=1;i<w;++i) {
    t = h[i-1];
    while(maxq.size() && maxq.back()<t) maxq.pop_back();
    maxq.push_back(t);
    while(minq.size() && minq.back()>t) minq.pop_back();
    minq.push_back(t);
  }
  res = 0;
  for(--i;i<n;++i) {
    t = h[i];
    while(maxq.size() && maxq.back()<t) maxq.pop_back();
    maxq.push_back(t);
    while(minq.size() && minq.back()>t) minq.pop_back();
    minq.push_back(t);
    min = minq.front();
    max = maxq.front();
    if((max-min+1)==w) ++res;
    t = h[i-w+1];
    if(t==min) minq.pop_front();
    if(t==max) maxq.pop_front();
  }
  
  printf("%d\n",res);
  return 0;
}