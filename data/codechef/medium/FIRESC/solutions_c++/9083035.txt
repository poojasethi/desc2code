#include<bits/stdc++.h>

using namespace std;

#define s(x) scanf("%lld" , &x)
#define ll long long
#define M 1000000007
vector<ll> v[100007];
stack<ll> s;
ll visited[100007] , arr[100007];
int main()
{
    ll t;
    s(t);
    while(t --){
        ll n , m , i , a , b , connected_component = 0 , k = 0 , c = 0 , j;
        s(n);
        s(m);
        for(i = 1; i <= n; i ++){
            visited[i] = 0;
        }
        for(i = 0; i < m; i ++){
            s(a);
            s(b);
            v[a].push_back(b);
            v[b].push_back(a);
        }
        ll p;
        for(i = 1; i <= n; i ++){
            if(visited[i] == 0){
                connected_component = (connected_component + 1)%M;
                c = 0;
                s.push(i);
                while(!s.empty()){
                    visited[s.top()] = 1;
                    c ++;
                    p = s.top();
                    s.pop();
                    for(j = 0; j < v[p].size(); j ++){
                        if(visited[v[p][j]] == 0){
                            s.push(v[p][j]);
                            visited[v[p][j]] = 1;
                        }
                    }
                }
                arr[k++] = c;
            }
        }
        ll mul = 1;
        for(i = 0; i < k; i ++){
            mul = (mul*arr[i])%M;
        }
        printf("%lld %lld\n" , connected_component%M , mul%M);
        for(i = 1; i <= n; i++){
            v[i].clear();
        }
    }
    return 0;
}
