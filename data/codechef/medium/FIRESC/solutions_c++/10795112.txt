#include<bits/stdc++.h>
using namespace std;
#define ll long long
int parent[200000];

int find_parent(int s)
{
    if (parent[s]==s)
        return parent[s];
    else
        parent[s]=find_parent(parent[s]);
        return parent[s];
}
map<ll,ll>store;
int main()
{
    ll mod=1000000007;
    int s,d;int i;
    int test;int t;
    cin>>test;
    for(t=0;t<test;t++)
    {
        store.clear();
        int n;
        cin>>n;
        for(i=0;i<n;i++)
        {
            parent[i]=i;
        }
        int m;
        cin>>m;
        int p1,p2;
        for(i=0;i<m;i++)
        {
           // cout<<i<<" "<<m<<" check"<<"\n";
            cin>>s>>d;
            s--;d--;
            p1=find_parent(s);
            p2=find_parent(d);
            int val=min(p1,p2);
          //  cout<<p1<<" "<<p2<<"\n";
            //parent[s]=val;parent[d]=val;
            parent[p1] = p2;
        }
     //   cout<<m<<" here\n";
        ll count1=0;
        for(i=0;i<n;i++)
        {
            parent[i]=find_parent(i);
            //cout<<i<<" "<<parent[i]<<"\n";
            if (store[parent[i]]==0)
            {
                store[parent[i]]++;
                count1++;
            }
            else
                store[parent[i]]++;
        }
        cout<<count1<<" ";
        map<ll,ll>::iterator it;
        ll result=1;
        for(it=store.begin();it!=store.end();it++)
        {
            result=(result%mod*(it->second)%mod)%mod;
        }
        cout<<result%mod<<"\n";
    }

    return 0;
}//main
