#include<bits/stdc++.h>
using namespace std;
long long parent[100005];
long long ran[100005];
long long has[100005];
# define mod 1000000007
int findpar(int x)
{
    if(x!=parent[x])
        parent[x]=findpar(parent[x]);
    return parent[x];
}
int main()
{
    long long t,n,i,j,k,a,b,q,x,y;
    cin>>t;
    while(t--)
    {
        cin>>n>>q;
        for(i=1;i<=n;i++)
        {
            parent[i]=i;
            ran[i]=1;
        }
      //     cin>>q;
        while(q--)
        {
            cin>>x>>y;
          // int x=findpar(a);
          //  int y=findpar(b);
           /* if(ran[x]>ran[y])
                parent[y]=x;
            else
            {
                if(ran[x]==ran[y])
                {
                    parent[y]=x;
                    ran[x]++;
                }
                else
                    parent[x]=y;
            }*/
            int px = findpar(x);
            int py =findpar(y) ;
             if (ran[px] > ran[py])
             parent[py] = px;
               else
               {
               parent[px] = py;
              // cout<<px<<" "<<py;
                if (ran[px] == ran[py])
                {
                ran[py] = ran[py] + 1 ;
              //  cout<<3;
                }
               }
        }
        for(i=1;i<=n;i++)
        {
            //cout<<parent[i];
            has[i]=0;
        }
        for(i=1;i<=n;i++)
        {
            j=i;
        while(parent[j]!=j)
            j=parent[j];
            has[j]++;
        }
            long long prod=1;
            long long co=0;
        for(i=1;i<=n;i++)
        {
            if(has[i]>0)
            {
            prod*=has[i];
            prod%=mod;
                co++;
        }
        }
        cout<<co<<" "<<prod<<"\n";
    }
}
