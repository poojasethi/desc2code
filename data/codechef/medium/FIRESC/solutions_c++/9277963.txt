#include<bits/stdc++.h>
using namespace std;
bool visit[100099];
long long mod=1e9+7;
int c=0;
void dfs(int el,list<int> v[])
    {
    	c++;
        visit[el]=true;
        list<int>::iterator it;
        for(it=v[el].begin();it!=v[el].end();it++)
        {
            if(visit[*it]==false)
                dfs(*it,v);
        }
    }
int main()
{
 int t,n,m,j,x,y;
 cin>>t;
 while(t--)
 {
     memset(visit,false,sizeof(visit));
     cin>>n>>m;
     list<int>li[100099];
     for(j=0;j<m;j++)
     {
         cin>>x>>y;
         li[x].push_back(y);
         li[y].push_back(x);
     }
     long long int ans=1,co=0;
     for(j=1;j<=n;j++)
     {
         if(visit[j]==false){
            dfs(j,li);
          ans=((ans%mod)*(c%mod))%mod;
            c=0;
            co++;
         }
     }
        cout<<co<<" "<<ans<<endl;
 }
    return 0;
}