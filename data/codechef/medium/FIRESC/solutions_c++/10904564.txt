#include <cstdio>
#include <vector>
#include <queue>
#define MOD 1000000007
using namespace std;
typedef long long int ll;
void ans(vector<int> v[],int n){
      bool visit[n];
      int group[n];
      for(int i=0;i<n;i++){
            visit[i]=false;
            group[i]=0;
      }
      int group_count=0;
      for(int i=0;i<n;i++){
            if(visit[i]==false){
                queue<int> q;
                q.push(i);
                visit[i]=true;
                while(q.size()>0){
                      int u=q.front();
                      q.pop();
                      group[group_count]++;
                      for(int j=0;j<v[u].size();j++){
                           if(visit[v[u][j]]==false)
                            {
                                  visit[v[u][j]]=true;
                                  q.push(v[u][j]);
                            }
                      }
                }
                group_count++;
            }
      }
      
      ll permutation=group[0];
      for(int i=1;i<group_count;i++){
            permutation=(permutation*group[i])%MOD;
      }
      printf("%d %lld\n",group_count,permutation);
}
int main() {
	int t;
	scanf("%d",&t);
	while(t--){
	      int n,m;
	      scanf("%d %d",&n,&m);
	      vector<int> g[n];
	      for(int i=0;i<m;i++){
	            int u,v;
	            scanf("%d %d",&u,&v);
	            u--;
	            v--;
	            g[u].push_back(v);
	            g[v].push_back(u);
	      }
	      ans(g,n);
	}
	return 0;
}
