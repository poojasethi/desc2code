#include<bits/stdc++.h>
using namespace std;
typedef long long int ll;
typedef long int l;
#define M 1000000007

bool visited[100001];
ll c=0;
void dfs(l num, vector<l> a[100001])
{
    l j;
    for(j=0; j<a[num].size();++j)
    {
        if(visited[a[num][j]]==0)
        {
            visited[a[num][j]]=1;
            c++;
            dfs(a[num][j],a);
        }
    }
}

int main()
{
	ios::sync_with_stdio(false);
	int t;
	l i,n,m,x,y,ctr;
	ll ans;
	scanf("%d",&t);
	while(t--)
	{
        vector<l> a[100001];
        ans=1;
        ctr=0;
        scanf("%ld%ld",&n,&m);
        for(i=1;i<=n;++i)
        {
            visited[i]=false;
            a[i].push_back(i);
        }
        for(i=1;i<=m;++i)
        {
            scanf("%ld%ld",&x,&y);
            a[x].push_back(y);
            a[y].push_back(x);
        }
        for(i=1;i<=n;++i)
        {
            dfs(i,a);
            if(c)
            {
                ans=(ans*c)%M;
                ctr++;
            }
            c=0;
        }
        printf("%ld %lld\n",ctr,ans);
	}
	return 0;
}