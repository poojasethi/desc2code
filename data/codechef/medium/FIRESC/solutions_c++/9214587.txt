#include <bits/stdc++.h>
using namespace std;
#define vi vector<int>
#define vvi vector< vi >
typedef unsigned long long ll;
#define MOD 1000000007

inline int input() {
	int x;
	scanf("%d",&x);
	return x;
}
vi adj[100005];
bool visited[100005];
set<int> myset;
ll cot = 0;
void initialise() {
	for(int i = 0; i < 100005; i++) {
		adj[i].clear();
		visited[i] = false;
	}
}
void dfs(int src) {
	cot++;
	visited[src] = true;
	for(int i = 0; i < adj[src].size(); i++) {
		if(visited[adj[src][i]] == 0)
			dfs(adj[src][i]);
	}
}
int main() {
	int tc,n,m,x,y;
	tc = input();
	while(tc--) {
		n = input();
		m = input();
		initialise();
		for(int i = 0; i < m; i++) {
			x = input();
			y = input();
			adj[x].push_back(y);
			adj[y].push_back(x);
		}
		
		ll cc = 0, ca = 1;
		for(int i = 1; i <= n; i++) {
			if(visited[i] == 0) {
				cc++;
				dfs(i);
				ca = (ca * cot)%MOD;
				cot = 0;
			}
		}
		cout<<cc<<" "<<ca<<endl;
	}
	return 0;
}