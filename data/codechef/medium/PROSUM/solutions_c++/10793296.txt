#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define pb push_back
int  arr[2000000];
int tcount[2000000];
int zcount[2000000];
int ocount[2000000];
int main()
{
    int test;int t;int i;
    scanf("%d",&test);ll temp;
    for(t=0;t<test;t++)
    {
        int n;
        scanf("%d",&n);
        for(i=0;i<n;i++)
        {
            scanf("%d",&arr[i]);
            tcount[i]=0;
            zcount[i]=0;
            ocount[i]=0;
        }
        if (arr[n-1]==0)
        {
            zcount[n-1]=1;
        }
        if (arr[n-1]==1)
        {
            ocount[n-1]=1;
        }
        if (arr[n-1]==2)
        {
            tcount[n-1]=1;
        }
        for(i=n-2;i>=0;i--)
        {

            if (arr[i]==0)
            {
                zcount[i]=1;
            }
            if (arr[i]==1)
            {
                ocount[i]=1;
            }
            if (arr[i]==2)
            {
                tcount[i]=1;
            }
            zcount[i]+=zcount[i+1];
            ocount[i]+=ocount[i+1];
            tcount[i]+=tcount[i+1];
        }

        ll result=0;
        for(i=0;i<n-1;i++)
        {

            if (arr[i]==0)
            {
                continue;
            }
            else if (arr[i]==1)
            {
                continue;
            }
            else if (arr[i]==2)
            {
                result+=n-1-i-tcount[i+1]-ocount[i+1]-zcount[i+1];
            }
            else
            {
                result+=n-i-1-ocount[i+1]-zcount[i+1];
            }
        }

    cout<<result<<"\n";
    }

return 0;
}//main
