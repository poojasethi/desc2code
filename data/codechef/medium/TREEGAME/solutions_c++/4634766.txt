#include <iostream>
#include <cstdio>
#include <vector>
#include <cstring>

using namespace std;

#define pb push_back

int main()
{
    int t, n, i, x, y, m, j, k, u, lw, tmp;
    scanf("%d", &t);
    while (t--) {
        scanf("%d", &n);
        vector <int> v[n+10];
        vector <int> l[n+10];
        for (i = 0; i < (n-1); i++) {
            scanf("%d%d", &x, &y);
            v[x].pb(y);
            v[y].pb(x);
        }
        l[0].pb(1);
        m = 1;
        int ck[n+10];
        memset(ck, 0, sizeof(ck));
        for (i = 1; m < n; i++) {
            for (j = 0; j < l[i-1].size(); j++) {
                ck[l[i-1][j]] = 1;
                for (k = 0; k < v[l[i-1][j]].size(); k++) {
                    if (ck[v[l[i-1][j]][k]] == 0) {
                        l[i].pb(v[l[i-1][j]][k]);
                        m++;
                    }
                }
            }
        }
        u = 0;
        lw = i - 1;
        m = 0;
        tmp = 0;
        while (u <= lw) {
            if (tmp % 2 == 0)
                u++;
            else {
                l[lw].erase(l[lw].begin());
                if (l[lw].size() == 0)
                    lw--;
            }
            m++;
            tmp++;
        }
        printf("%d\n", m);
    }
    return 0;
}
