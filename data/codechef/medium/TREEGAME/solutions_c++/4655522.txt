#include<bits/stdc++.h>
#define pb push_back
#define tr(c,i) for(typeof((c).begin() )i = (c).begin(); i != (c).end(); i++)
#define mod 1000000000
using namespace std;
typedef long long ll;



deque<int> bfs;
queue<int> q;

int flag[10010];
int main()
{
  int t,n,w,i,j,cnt=0,k,sm,lp,tmp;
  cin>>t;
  while(t--)
  {

      cin>>n;
      vector< vector<int> > v(n+2);
      cnt=0;sm=0;
      for(i=1;i<n;i++)
      {
          scanf("%d%d",&j,&k);
          v[j].pb(k);
          v[k].pb(j);
          flag[i]=0;
      }
      flag[n]=0;
      q.push(1);
     while(!q.empty())
     {
         i=q.front();
         q.pop();
         flag[i]=1;
         bfs.pb(i);
         for(j=0;j<v[i].size();j++)
         {
             if(!flag[v[i][j]])
             q.push(v[i][j]);

         }
     }
     if(!bfs.empty())
     {
         cnt++;
         i=bfs.front();
         bfs.pop_front();
     }
     tmp=v[i].size();
     if(!bfs.empty())
     {
         cnt++;
         bfs.pop_back();
     }

     while(!bfs.empty())
     {  lp=0; sm=0;
         while(!bfs.empty()&&lp<tmp)
         {
             i=bfs.front();
             //cout<<i<<"  ";
             sm+=v[i].size()-1;
             bfs.pop_front();
             lp++;
         }
         cnt++;
         if(!bfs.empty())
         {cnt++;
         bfs.pop_back();
         }
         tmp=sm;
     }

     cout<<cnt<<"\n";
  }
  return 0;
}
