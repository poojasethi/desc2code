#include<iostream>
using namespace std;

int fact[10000001];

int main(){
	int n,m;
	long long p;
	cin>>n>>m;
	fact[0]=1%m;

	for(int i=1;i<m;i++){
		fact[i]=((long long)fact[i-1]*i)%m;
	}
	long long ans=0;

	for(int i=0;i<n;i++){
		cin>>p;
		if(p+1<m)
			ans=(ans+fact[p+1])%m;
		long long a=p;
		long long b=p+1;
		if(a%2)
			b/=2;
		else 
			a/=2;
		a%=m; b%=m; p%=m;
		ans=(ans+((a*b)%m*p)%m+m-1)%m;
	}
	cout<<ans<<endl;		
	return 0;
}
