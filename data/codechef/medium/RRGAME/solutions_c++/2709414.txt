#include<stdio.h>
int main()
{
	long long unsigned n,m,k;
	scanf("%llu %llu %llu",&n,&m,&k);
	long long unsigned a,m1=0,m2=0,sum=0,min,max,ans;
	int i;
	if(n<3)
	{
		printf("1\n");
		return 0;				
	}	
	for(i=0;i<n;i++)
	{
		scanf("%llu",&a);
		sum+=(a=(m-a)/k+1);
		if(a>m1)
			m2=m1,m1=a;
		else if(a>m2)
			m2=a;
	}
	min=sum-m1;
	max=sum;
	if(min<(m2<<1))
		min=m2*2;
	else if(min&1)
		min++;
	if(max<(m1<<1))
		max=(sum-m1)*2;
	else if(max&1)
		max--;
	ans=((max-min+2)/2)%1000000007;
	printf("%llu\n",ans);
	return 0;
}
