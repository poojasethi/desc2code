#include<stdio.h>
#include<strings.h>
typedef unsigned long long uint64_t;

uint64_t getInt() {
    uint64_t r = 0;
    char c;
    while (!(c >= '0' && c <= '9')) c = getchar_unlocked();
    while (c >= '0' && c <= '9') {
        r = r * 10 + (c - '0');
        c = getchar_unlocked();
    }
    return r;
}

uint64_t A[100001];
int main()
{
        uint64_t N, M, K, i;
        uint64_t sum;
        uint64_t m1=0, m2=0;
        uint64_t max=0, min=0;
        N = getInt();
        M = getInt();
        K = getInt();
        //scanf("%lld %lld %lld", &N, &M, &K);
        sum = 0;
        for(i=1; i <= N; i++) {
                A[i] = getInt();
                //scanf("%lld", &A[i]);
                A[i] = 1 + (M - A[i])/K;
                sum+=A[i];
                if (A[i] > m1) {m2=m1, m1 = A[i];}
                else if (A[i] > m2) m2 = A[i];
        }
        max = (m1 > sum/2) ? (sum-m1):sum/2;
        //printf("sum %lld m1 %lld m2 %lld\n", sum, m1, m2);
        min = ((sum - m1)%2 == 1)? ((sum - m1)/2 + 1):((sum - m1)/2);
        if (min < m2)
                min = m2;
        //printf("max %lld min %lld\n", max, min);
        printf("%lld", (max-min+1) % 1000000007);

        return (0);
}
