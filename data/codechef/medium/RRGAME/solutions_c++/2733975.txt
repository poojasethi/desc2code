#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;
const long long N = 100000+5, MO = 1000000000+7;
long long n, m, k, qa, a[N], q[N];
long long F(long long s, long long f, long long ty)
{
    if(s < 0)
    s = 0;
    long long res;
    res = (f+2-ty)/2;
    res = res-((s-1)+2-ty)/2;
    return res;
}
int main()
{
    //freopen("input.txt", "r", stdin);
    scanf("%lld%lld%lld", &n, &m, &k);
    for(long long i = 1; i <= n; ++ i)
        scanf("%lld", &a[i]);
    for(long long i = 1; i <= n; ++ i)
        q[i] = (m-a[i])/k+1;
    sort(q+1, q+n+1);
    for(long long i = 1; i < n; ++ i)
        qa+=q[i];
    if(n==1)
    {
        printf("1\n");
        return 0;
    }
    long long result;
    if(q[n] > qa)
    {
        result = F(q[n-1]+1, qa, qa%2);
        qa-=q[n-1];
        result = result+F(q[n-1]-qa, q[n-1], (qa+q[n-1])%2);
    }
    else
    {
        result = F(q[n-1]+1, q[n], qa%2);
        qa-=q[n-1];
        result = result+F(q[n-1]-qa, q[n-1], (qa+q[n-1])%2);
    }
    printf("%lld\n", result%MO);
    return 0;
}
