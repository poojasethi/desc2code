#include <bits/stdc++.h>

using namespace std;

typedef long long LL;

LL N, M, K;
LL a[100005];
LL cnt[100005];

LL mod = (LL) ((1e9) + 7);
int main()
{
    //freopen ("input.txt", "r", stdin);

    cin >> N >> M >> K;
    for (int i=0;i<N;i++)
    {
        cin >> a[i];
        cnt[i] = (M - a[i]) / K + 1;
    }

    sort (cnt, cnt + N);

    if (N <= 2)
    {
        cout << 1 << endl;
        return 0;
    }

    /*-for (int i = 0; i < N; i++)
        cout << cnt[i] << " ";
    cout << endl;
    */

    LL mn = 0, mx = 0;
    LL sum = 0;
    for (int i=0;i+1<N;i++)
        sum += cnt[i];
/*
    mx = min (sum, (sum + cnt[N - 1] / 2));
        sum -= cnt[N - 2];

    LL temp = (sum + cnt[N - 2]);
    LL t = temp / 2 + temp % 2;
    mn = max (cnt[N-2], t);

*/
    if (cnt[N - 1] > sum)
        mx = sum;
    else
    {
        LL temp = sum + cnt[N - 1];
        mx = temp / 2;
    }

    sum -= cnt[N - 2];
    if (cnt[N - 2] > sum)
    {
        mn = cnt[N - 2];
    }
    else
    {
        LL temp = (sum + cnt[N - 2]);
        mn = temp / 2 + temp % 2;
    }

    //cout << mn << " " << mx << endl;

    cout << (mx - mn + 1) % mod << endl;

    return 0;
}
