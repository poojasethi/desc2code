#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cctype>
#include<ctime>
#include<assert.h>

#include<cmath>
#include<iostream>
#include<fstream>

#include<string>
#include<vector>
#include<queue>
#include<map>
#include<algorithm>
#include<set>
#include<sstream>
#include<stack>
#include<limits.h>

using namespace std;

#define MAX(a,b) ((a)>(b) ? (a) : (b))
#define MIN(a,b) ((a)<(b) ? (a) : (b))
#define EPS 1e-9
#define asdf exit(0);


typedef long long LL;
//typedef __int64 LL;





LL val[100010];


int main()
{
    //freopen("in.txt","r",stdin);
	//freopen("out.txt","w",stdout);


    LL n,m,k;
    int i,j;

    scanf("%lld %lld %lld",&n,&m,&k);
	//scanf("%I64d %I64d %I64d",&n,&m,&k);



    for(i=0;i<n;i++)
    {
        scanf("%lld",&val[i]);
        LL x=(m-val[i])/k;
        x++;
        val[i]=x;


    //    cout<<x<<" ";
    }
    sort(val,val+n);
    //asdf









    LL sum=0;
    for(i=0;i<(n);i++)
        sum+=val[i];




    LL ans=0;
    LL mod=1000000007,x,y;


    if(n==1)
    {
        printf("0\n");
    }
    else
    {
        if(sum%2)
        {
            sum--;
            val[n-1]--;
        }


        sum-=val[n-1];



        if(val[n-1]>sum)
        {
            val[n-1]=sum;
        }




		ans=1;
	    if(val[n-1]>=val[n-2])
        {
            x=((val[n-1]-val[n-2])/2);
            ans=(ans+x)%mod;
            val[n-1]-=2*x;
        }




        if(val[n-1]>val[n-2])
        {
            ans=(ans+1)%mod;
            val[n-1]-=2;
        }



        sum+=val[n-1];
        sum-=val[n-2];


        x=(sum-val[n-2])/2;
        y=val[n-1]/2;

        x=MIN(x,y);


        ans=(ans+x)%mod;


        printf("%lld\n",ans);



    }



    return 0;
}
