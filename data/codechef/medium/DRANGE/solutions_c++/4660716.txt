#include <bits/stdc++.h>

typedef long long lld;
typedef unsigned long long llu;
#define rep(i,x,y) 	for(i=x;i<y;i++)
#define rrep(i,x,y) for(i=x;i>=y;i--)
#define trv(y,x) 	for(typeof(x.begin())y=x.begin();y!=x.end();y++)
#define MAX(a,b,c)  max(max(a,b),c)
#define MIN(a,b,c)  min(min(a,b),c)
using namespace std;

int main()
{
    ios_base::sync_with_stdio(false);
	cin.tie(NULL);
    int t,i,j,n,m,w,x,y,z,_min,_max,A,B;
    cin>>t;
    while(t--)
    {
        cin>>n>>m;
        int D[n+1];
        fill(D,D+n+1,1);
        rep(i,0,m)
        {
            cin>>w>>x>>y>>z;
            if(w==2) z=-z;
            D[x-1]+=z;
            D[y]-=z;
        }
        _min=_max=A=(D[0]-0);
        rep(i,1,n)
        {
            B=A+D[i];
            if(B>_max)
                _max=B;
            if(B<_min)
                _min=B;
            A=B;
        }
        cout<<_max-_min<<"\n";
    }
	return 0;
}
