#include<map>
#include<cmath>
#include<stack>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<utility>
#include<iostream>
#include<algorithm>
using namespace std;
#define MOD 10000
#define pi(x) printf("%d",x)
#define pl(x) printf("%lld",x)
#define pn    printf("\n");
#define si(x) scanf("%d",&x)
#define sl(x) scanf("%lld",&x)
#define max(a,b) a>b?a:b
#define min(a,b) a>b?b:a
#define PII pair<int,string>
#define x first
#define y second
int main()
{
	int t;
	si(t);
	while(t--)
	{
		int q,n;
		si(n),si(q);
		int A[n+5];
		memset(A,0,sizeof A);
		while(q--)
		{
			int t,x,y,z;
			si(t),si(x),si(y),si(z);
			if(t==1)
			{
				A[x-1]+=z;
				A[y]-=z;
			}
			else
			{
				A[x-1]-=z;
				A[y]+=z;
			}
			
			
		}
		int temp=0,mx=0,mn=100000000;
		for(int i=0;i<n;i++)
		{
			temp+=A[i];
			mx=max(mx,temp+i+1);
			mn=min(mn,temp+i+1);
			
		}
		pi(mx-mn);pn;
		
	}
}