#include<bits/stdc++.h>
#define lli long long int
using namespace std;
inline int input()
{
	int n = 0;
	int ch = getchar_unlocked();
	while (ch < '0' || ch > '9') ch = getchar_unlocked();
	while (ch >= '0' && ch <= '9') {
		n = (n << 3) + (n << 1) + (ch - '0');
		ch = getchar_unlocked();
	}
	return n;

}
inline void output(lli a)
{
	char snum[20];
	int i=0;
	do
	{
		snum[i++]=a%10+48;
		a=a/10;
	}while(a!=0);
	i=i-1;
	while(i>=0)
		putchar_unlocked(snum[i--]);
	putchar_unlocked('\n');

}

int main()
{
	int q,i,v,j,k,m,n,t,a,b,a1,p,max,min,a2;
	t=input();
	while(t--)
	{
		n=input();
		q=input();
		int d[n];
		for(i=1;i<n;i++)
			d[i]=1;
		while(q--)
		{
			p=input();
			a1=1;
			if(p==1)//add
			{
				a=input();
				b=input();
				v=input();
				if(a!=1)
					d[a-1]+=v;
				if(b!=n)
					d[b]-=v;
				if(a==1)
					a1+=v;
			}
			else//subtract
			{
				a=input();
				b=input();
				v=input();
				v=-v;
				if(a!=1)
					d[a-1]+=v;
				if(b!=n)
					d[b]-=v;
				if(a==1)
					a1+=v;
			}
		}
		max=a1;
		min=a1;
		for(i=1;i<=n-1;i++)
		{
			a2=a1+d[i];
			if(a2>max)
				max=a2;
			if(a2<min)
				min=a2;
			a1=a2;
		}
		output(max-min);
	}
}
