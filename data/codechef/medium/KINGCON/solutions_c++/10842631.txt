#include<bits/stdc++.h>
#define ll long long int
#define mp make_pair
#define pb push_back
#define si(x) scanf("%d",&x)
#define pi(x) printf("%d\n",x)
#define s(x) scanf("%lld",&x)
#define p(x) printf("%lld\n",x)

using namespace std;

vector<int>vec[3002];int val;
bool yes[3002];
int visited[3002];

int dfs(int i){
    val++;
	visited[i]=val;
	int temp,minv,node;
	minv=val;
	int cnt=0;

	for(int k=0;k<vec[i].size();k++){
		node=vec[i][k];
		if(visited[node]==0){
                temp=dfs(node);
                if(temp>=visited[i] && i!=0) yes[i]=true;
                if(i==0) cnt++;
        }
		else temp=visited[node];

		if(temp<minv) minv=temp;
	}
	if(i==0 && cnt>1) yes[0]=true;

	return minv;
}

int main() {
	int t;
	si(t);
	while(t--){
		val=0;int n,m,k,i;
		si(n);si(m);si(k);
		memset(yes,false,sizeof(yes));
		memset(visited,0,sizeof(visited));

		for(i=0;i<m;i++){
            int u,v;
			si(u);si(v);
			vec[u].pb(v);
			vec[v].pb(u);
		}
		dfs(0);

    int ans=0;
	 for(i=0;i<n;i++){
        if(yes[i]) ans++;
	 }

     pi(ans*k);
     for(i=0;i<n;i++) vec[i].clear();
	}
	return 0;
}
