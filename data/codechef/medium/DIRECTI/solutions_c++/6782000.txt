#include <iostream>
#include <vector>
#include <stdio.h>
#include <cstring>
using namespace std;

int main()
{
	int t;
	cin>>t;
	vector<vector<string> > global;
	for(int te=0;te<t;te++)
	{
		vector<string> instructions;
		vector<string> ans;
		int n;
		cin>>n;
		for(int i=0;i<=n;i++)
		{
			string str;
			getline(cin,str);
			instructions.push_back(str);
		}
		string direction="Begin";
		string road="";
		for(int i=0;i<n;i++)
		{
			string cur = instructions.back();
			instructions.pop_back();
			if(cur[0] == 'L')
				road = cur.substr(8);
			else
				road = cur.substr(9);
			string new_ins = (direction + " on " + road);
			ans.push_back(new_ins);
			if(cur[0] == 'L')
				direction = "Right";
			else if(cur[0]=='R')
				direction = "Left";
			else if (cur[0]=='B')
				direction = "Exit";
		}
		global.push_back(ans);
	}
	for(int j=0;j<t;j++)
	{
		for(int i=0;i<global.at(j).size();i++)
		{
			cout << (global.at(j).at(i)) << endl;
		}
		cout << endl;
	}
	return 0;
}