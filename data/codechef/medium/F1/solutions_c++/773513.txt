#define DEBUG 0

#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;

int main(void) {
  int tc, cn, Y, X, k, y, x, count[500][500], big[500][500], i, j, in, ylimit, xlimit;
//  int a[500][500];
 
  scanf("%d", &tc);
  for(cn=1;cn<=tc;cn++) {
    if(cn>1)
      printf("\n");
    printf("Case %d:\n", cn);
    memset(count, 0, sizeof(count));
    scanf("%d%d%d", &Y, &X, &k);
    for(y=0;y<Y;y++)
      for(x=0;x<X;x++)
        scanf("%d", &big[x][y]);

    xlimit=X-k+1; ylimit=Y-k+1;
    for(x=0;x<X;x++)
      for(y=0;y<ylimit;y++)
        for(i=y;i<y+k;i++)
          if(big[x][y]<big[x][i]) {
            big[x][y]=big[x][i];
            count[x][y]=1;
          } else if(big[x][y]==big[x][i])
            count[x][y]++;

    if(DEBUG)
      for(y=0;y<ylimit;y++) {
        for(x=0;x<X;x++)
          printf("%d(%d) ", big[x][y], count[x][y]);
        printf("\n");
      }

    for(y=0;y<ylimit;y++) {
      for(x=0;x<xlimit;x++) {
        for(i=x+1;i<x+k;i++)
          if(big[x][y]<big[i][y]) {
            big[x][y]=big[i][y];
            count[x][y]=count[i][y];
          } else if(big[x][y]==big[i][y])
            count[x][y]+=count[i][y];
        if(x>0)
          printf(" ");
        if(count[x][y]>1)
          printf("%d(%d)", big[x][y], count[x][y]);
        else
          printf("%d", big[x][y]);
      }
      printf("\n");
    }
  }
  return 0;
}
