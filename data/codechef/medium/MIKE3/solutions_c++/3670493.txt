#include<stdio.h>
char a[22][20002];
int m,yes[22],CH,ABC;
int inp()
{
	int n = 0;
	char c = getchar_unlocked();
	while( c < '0' || c > '9' )
		c = getchar_unlocked();
	while( !(c < '0' || c > '9') ){
		n = (n << 3) + (n << 1) + c - '0';
		c = getchar_unlocked();
	}
	return n;
}
int fun(int no,int p)
{
	int i,max=-1,k,z=CH;
	CH=(CH & yes[no]);
	for(i=no+1;i<=m;i++){
		if(CH & (1<<i)){
			k=fun(i,p+1);
			if(k>max)
				max=k;
		}
	}
	CH=z;
	if(max==-1)
		return p;
	return max;
}
int main(){
	int n,i,j,p,q,c,k,z;
	n=inp();
	m=inp();
	for(i=1;i<=m;i++){
		p=inp();
		for(j=1;j<=p;j++){
			q=inp();
			a[i][q]=1;
		}
	}
	for(i=1;i<=m;i++){
		for(j=i+1;j<=m;j++){
			c=0;
			for(k=1;k<=n;k++){
				if(a[i][k] & a[j][k]){
					c=1;
					break;
				}
			}
			if(c==0)
				yes[i]|=(1<<j);
		}
	}
	ABC=0;
	for(i=1;i<=m;i++){
		if((m-i+1)>ABC){
			CH=-1;
			z=fun(i,1);	
			if(z>ABC)
				ABC=z;
		}
	}
	printf("%d\n",ABC);
	return 0;
} 