#include <iostream>
#include <vector>
#include <cstdio>
#include <memory.h>
#define pb push_back
#define MAX 20020
using namespace std;

vector <vector<int> > vec(30);
bool used[MAX];
int q[30][30];
vector <int> g;

int main()
{
    int n, m, k, a;
    cin >> n >> m;
    for(int i = 1; i <= m; i++)
    {
        cin >> k;
        for(int j = 1; j <= k; j++)
        {
            cin >> a;
            vec[i].pb(a);
        }
    }
    for(int i = 1; i <= m; i++)
    {
        memset(used,0,sizeof(used));
        for(int w = 0; w < vec[i].size(); w++)
            used[vec[i][w]] = 1;
        for(int j = i + 1; j <= m; j++)
        {
            for(int r = 0; r < vec[j].size(); r++)
            {
                int to = vec[j][r];
                if(used[to]) {q[i][j] = 1; q[j][i] = 1; break;}
            }
        }
    }
    int maxx = 0;
    for(int i = 1; i < (1<<m); i++)
    {
        g.clear();
        for(int j = 0; j < m; j++)
            if(i & (1<<j)) g.pb(j+1);
        bool ok = true;
        for(int j = 0; j < g.size(); j++)
        {
            for(int t = j + 1; t < g.size(); t++)
            {
                if(q[g[j]][g[t]]) {ok = false; break;}
            }
            if(!ok) break;
        }
        int it = g.size();
        if(ok) maxx = max(it, maxx);
    }
    cout << maxx << endl;
    return 0;
}
