#include<iostream>
using namespace std;
int A[21][20001], ad[21][21], m, add[21];
int calc(int i,int n)
{ int max=0,p=0,j;
  for(j=0;j<n;j++)
  {
   if(ad[i][add[j]]==0)
    return 0;
    }
  for(j=i+1;j<m;j++)
  {
   if(ad[i][j]==1)
    {
     add[n]=i;
     p=calc(j,n+1);
     if(p>max)
      max=p;
     }
   }
return(max+1);
}
int main()
{
    int i, j, n, p, q, t, max;
    cin>>n>>m;
    for(i=0; i<m; i++)
    {
        cin>>A[i][0];
        for(j=1; j<=A[i][0]; j++)
            cin>>A[i][j];
    }
    for(i=0;i<m;i++)
    {
        ad[i][i]=0;
        for(j=i+1;j<m;j++)
        { p=1;q=1;t=0;
          while(p<=A[i][0]&&q<=A[j][0])
          {
           if(A[i][p]==A[j][q])
           {
            t=1;
            break;
           }
          while(A[i][p]<A[j][q]&&p<=A[i][0])
           p++;
          if(A[i][p]==A[j][q])
          {
           t=1;
           break;
           }
          while(A[i][p]>A[j][q]&&q<=A[j][0])
           q++;
         }
       if(t==1)
       { ad[j][i]=0;
         ad[i][j]=0;
        }
       else
       { ad[i][j]=1;
         ad[j][i]=1;
        }
      }
   }

 max=0;
 p=0;
 for(i=0;i<m;i++)
 {
  p=calc(i,0);
  if(p>max)
   max=p;
 }
 cout<<max<<endl;
 return 0;
}
