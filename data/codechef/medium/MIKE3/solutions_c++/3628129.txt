#include<iostream>
#include<algorithm>
#include<cmath>
#include<cstdio>
#include<string.h>
#include<cstdlib>
#include<vector>
#include<queue>

using namespace std;

int ar[25][20010];
int main()
{
        int n,m,i,ii,k1,t,x,y,br=1,j,p,off,flag=0,ans=0,ans1,mini;
        int a[25][25];
        int b[25];
        int k[25];
        for(i=0;i<25;i++)
        {
                for(j=0;j<25;j++)
                {
                        a[i][j]=0;
                }
        }
        for(i=1;i<=20;i++)
        {
                for(j=1;j<=20008;j++)
                {
                        ar[i][j]=0;
                }
        }
        scanf("%d",&n);
        scanf("%d",&m);
        for(i=1;i<=m;i++)
        {
                scanf("%d",&k[i]);
                for(j=1;j<=k[i];j++)
                {
                        scanf("%d",&off);
                        ar[i][off]=1;
                }
        }
        for(i=1;i<=m;i++)
        {
                for(j=1;j<=m;j++)
                {
                        if(j!=i)
                        {
                                for(ii=1;ii<=20000;ii++)
                                {
                                        if(ar[i][ii]==1 && ar[i][ii]==ar[j][ii])
                                        {
                                                a[i][j]=1;
                                                a[j][i]=1;
                                                break;
                                        }
                                }
                        }
                }
        }
        k1=pow(2,m);
        for(ii=1;ii<k1;ii++)
        {
                t=0;
                x=0;
                br=1;
                for(j=0;j<m;j++)
                {
                        if(ii&(1<<j))
                        {
                                b[t]=j+1;
                                t++;
                        }
                }
                for(i=0;i<t;i++)
                {
                        for(j=i+1;j<t;j++)
                        {
                                if(a[b[i]][b[j]]==1)
                                {
                                        br=0;
                                        break;
                                }
                        }
                        if(br==0)
                                break;
                }
                if(br==0)
                        ans1=0;
                else
                        ans1=t;
                if(ans1>ans)
                        ans=ans1;
        }
        printf("%d\n",ans);

        return 0;
}
