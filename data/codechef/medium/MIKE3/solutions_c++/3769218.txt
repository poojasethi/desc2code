#include<cstdio>
#include<algorithm>
#include<cmath>
#include<cstdlib>
#include<string>
#include<cstring>
#include<map>
#include<iostream>

using namespace std;
#define FOR(i,a,b) for(i=a;i<b;i++)

int a[30][30],b[30][200010],c[30],am=0,d[30],p=0;

void dfs(int x,int y,int m)
{
	int i,j;
	/*if(x==m)
	{
	printf("%d %d %d\n",x,y,p);
	FOR(i,0,p)
		printf("%d ",d[i]);
	printf("\n");
	}*/
	if(x>=m)
	{
		//printf("\n%d\n",y);
		if(y<=am)
			return;
		FOR(i,0,p)
		{
			FOR(j,i+1,p)
			{	
				if(a[d[i]][d[j]])
					return;
			}
		}
		//printf("\n%d\n",y);
		am=y;
		return;
	}
	d[p]=x;
	++p;
	dfs(x+1,y+1,m);
	--p;
	dfs(x+1,y,m);
	return;
}

int check(int n,int m)
{
	int i,j;
	for(i=0,j=0;i<c[n] || j<c[m];)
	{
		if(b[n][i]==b[m][j])
			return 0;
		if(i>c[n] - 1 || b[n][i]>b[m][j] && j<(c[m]-1))
			++j;
		else
			++i;
	}
	return 1;
}

int main()
{
	int m,n,i,j,k;
	scanf("%d%d",&n,&m);
	FOR(i,0,m)
	{
		scanf("%d",&c[i]);
		FOR(j,0,c[i])
		{
			scanf("%d",&b[i][j]);
		}
	}
	FOR(i,0,m)
	{
		FOR(j,i+1,m)
		{
			if(!check(i,j))
				a[i][j]=1;
		}
	}
	/*FOR(i,0,m)
	{
		FOR(j,0,m)
			printf("%d ",a[i][j]);
		printf("\n");
	}*/
	dfs(0,0,m);
	printf("%d\n",am);
	return 0;
}
