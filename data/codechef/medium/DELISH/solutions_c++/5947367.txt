/*
ID: beta_user
PROG:DELISH
LANG: C++
*/
#include <iostream>
#include <algorithm>
#include<vector>
#include<queue>
#include<cmath>
#define endl "\n"
#define min(a,b) (a<b?a:b)
#define max(a,b) (a>b?a:b)
using namespace std;
typedef long  int lint;
typedef long long int llint;
int main()
{
int t,n;
llint i,j,temp1,temp2;
llint mmax;
cin>>t;
for(i=0;i<t;i++)
{
cin>>n;
vector<llint> d(n),hleftmin(n),hleftmax(n),hrightmin(n),hrightmax(n),lmin(n),lmax(n);
for(j=0;j<n;j++)
    cin>>d[j];
hleftmin[0]=d[0];
hleftmax[0]=d[0];
lmin[0]=d[0];
lmax[0]=d[0];
for(j=1;j<n;j++)
    {
       hleftmin[j]=min(d[j],hleftmin[j-1]+d[j]);
       hleftmax[j]=max(d[j],hleftmax[j-1]+d[j]);
       lmin[j]=min(lmin[j-1],hleftmin[j]);
       lmax[j]=max(lmax[j-1],hleftmax[j]);
    }
    hrightmin[n-1]=d[n-1];
    hrightmax[n-1]=d[n-1];
 for(j=n-2;j>=0;j--)
 {
     hrightmin[j]=min(d[j],d[j]+hrightmin[j+1]);
     hrightmax[j]=max(d[j],d[j]+hrightmax[j+1]);
 }
 temp1=abs(hrightmax[1]-lmin[0]);
    temp2=abs(lmax[0]-hrightmin[1]);
    mmax=max(temp2,temp1);
for(j=1;j<n-1;j++)
{
    temp1=abs(hrightmax[j+1]-lmin[j]);
    temp2=abs(lmax[j]-hrightmin[j+1]);
    mmax=max(mmax,temp1);
    mmax=max(mmax,temp2);
}
cout<<mmax<<endl;
}




}







