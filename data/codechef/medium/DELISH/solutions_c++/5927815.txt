    #include <bits/stdc++.h>
     
    using namespace std;
     
    int main(){
    int t;
    cin>>t;
     
    while(t--){
    int n;
    cin>>n;
     
    long long arr[n];
    for(int i=0 ; i<n ; i++)
    cin>>arr[i];
    long long maximum, minimum, one[n], two[n], a, b;
    maximum = arr[0];
    minimum = arr[n-1];
    one[0] = arr[0];
    two[n-1] = arr[n-1];
     
    for(int i=1 ; i<n ; i++){
    maximum = max(arr[i], maximum + arr[i]);
    one[i] = max(maximum, one[i-1]);
     
    minimum = min(arr[n-i-1], minimum + arr[n-i-1]);
    two[n-i-1] = min(minimum, two[n-i]);
    }
     
    a = abs(one[0] - two[1]);
     
    for(int i=1 ; i<n-1 ; i++){
    if(a < abs(one[i] - two[i+1]))
    a = abs(one[i] - two[i+1]);
    }
     
    maximum = arr[0];
    minimum = arr[n-1];
    one[0] = arr[0];
    two[n-1] = arr[n-1];
     
    for(int i=1 ; i<n ; i++){
    maximum = min(arr[i], maximum + arr[i]);
    one[i] = min(maximum, one[i-1]);
     
    minimum = max(arr[n-i-1], minimum + arr[n-i-1]);
    two[n-i-1] = max(minimum, two[n-i]);
    }
     
    b = abs(one[0] - two[1]);
     
    for(int i=1 ; i<n-1 ; i++){
    if(b < abs(one[i] - two[i+1]))
    b = abs(one[i] - two[i+1]);
    }
     
    cout<<max(a, b)<<endl;
    }
     
    return 0;
    } 