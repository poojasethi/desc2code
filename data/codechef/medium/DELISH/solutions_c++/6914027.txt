#include<iostream>
using namespace std;
long long int arr[10002],minLeft[10002],maxLeft[10002],minRight[10002],maxRight[10002];
long long int maxDiffer(int i)
{
   if(maxRight[i+1]-minLeft[i]>maxLeft[i]-minRight[i+1])
      return maxRight[i+1]-minLeft[i];
   return maxLeft[i]-minRight[i+1];
}
int main()
{
   int T,N,i;
   long long int maxDifference,Difference,j;
   cin>>T;
   while(T--)
   {
      cin>>N;
      cin>>minLeft[0];
      maxLeft[0]=minLeft[0];
      for(i=1;i<N;i++)
      {
         cin>>arr[i];
         if(minLeft[i-1]>0)
            minLeft[i]=arr[i];
         else
            minLeft[i]=arr[i]+minLeft[i-1];
         if(maxLeft[i-1]>0)
            maxLeft[i]=arr[i]+maxLeft[i-1];
         else
            maxLeft[i]=arr[i];
      }
      if(arr[N-1]-minLeft[N-2]>maxLeft[N-2]-arr[N-1])
         maxDifference=arr[N-1]-minLeft[N-2];
      else
         maxDifference=maxLeft[N-2]-arr[N-1];
      maxRight[N-1]=minRight[N-1]=arr[N-1];
      for(i=N-2;i+1;i--)
      {
         if(minRight[i+1]>0)
            minRight[i]=arr[i];
         else
            minRight[i]=arr[i]+minRight[i+1];
         if(maxRight[i+1]>0)
            maxRight[i]=arr[i]+maxRight[i+1];
         else
            maxRight[i]=arr[i];
         j=maxDiffer(i);
         if(j>maxDifference)
            maxDifference=j;
      }
      cout<<maxDifference<<endl;
   }
return 0;
}
