#include <bits/stdc++.h>
using namespace std;

long long int ldp[1000004][2],rdp[1000004][2], a[1000004];

long long int max(long long int a, long long int b) {
	if(a > b) {
		return a;
	} else {
		return b;
	}
}

long long int min(long long int a, long long int b) {
	if(a > b) {
		return b;
	} else {
		return a;
	}
}

inline int rec(int n) {
	int i;
	ldp[0][0] = a[0];
	ldp[0][1] = a[0];
	
	for(i = 1; i < n; i++) {
		ldp[i][0] = max(ldp[i-1][0], 0) + a[i];
		ldp[i][1] = min(ldp[i-1][1], 0) + a[i];
	}
	
	rdp[n-1][0] = a[n-1];
	rdp[n-1][1] = a[n-1];
	
	for(i = n-2; i >= 0; i--) {
		rdp[i][0] = max(rdp[i+1][0],0) + a[i];
		rdp[i][1] = min(rdp[i+1][1],0) + a[i];
	}
	
	long long int ans = 0;
	for(int i = 0; i < n-1; i++) {
	   ans = max(ans, abs(ldp[i][0] - rdp[i+1][1]));
	   ans = max(ans, abs(ldp[i][1] - rdp[i+1][0]));
	}
	printf("%lld\n",ans);
}
int main()
{
	int n, t, i;
	cin>>t;
	while(t--) {
		cin>>n;
		for(i = 0; i < n; i ++) {
			cin>>a[i];
		}
		
		rec(n);
	}
	return 0;
}