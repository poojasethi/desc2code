#include<bits/stdc++.h>
using namespace std;
#define LL int long long
//#define max(a,b) a>=b ? a : b
//#define min(a,b) a<=b ? a : b
const LL INF=(1LL<<60LL);
const int N=1e4+5;
LL dp[4][N];
LL A[N];
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n;
		scanf("%d",&n);
		int i;
		for(i=1;i<=n;i++)
		{
			scanf("%lld",&A[i]);
		}
		for(i=0;i<(n+2);i++)
		{
			dp[0][i]=dp[2][i]= -INF;
		    dp[1][i]=dp[3][i]= INF;
		}
		LL sum= -INF;
		for(i=1;i<=n;i++)
		{
			sum=max(A[i],sum+A[i]);
			dp[0][i]=max(dp[0][i-1],sum);
		}
		sum=INF;
		for(i=1;i<=n;i++)
		{
            sum=min(A[i],sum+A[i]);
            dp[1][i]=min(dp[1][i-1],sum);
		}
		sum= -INF;
		for(i=n;i>=1;i--)
		{
			sum=max(A[i],sum+A[i]);
			dp[2][i]=max(dp[2][i+1],sum);
		}
		sum= INF;
		for(i=n;i>=1;i--)
		{
			sum=min(A[i],sum+A[i]);
			dp[3][i]=min(dp[3][i+1],sum);
		}
		LL ans=0;
		for(i=1;i<n;i++)
		{
         ans=max(ans,max(abs(dp[0][i]-dp[3][i+1]),abs(dp[1][i]-dp[2][i+1])));
		}
		printf("%lld\n",ans);
	}
	return 0;
} 