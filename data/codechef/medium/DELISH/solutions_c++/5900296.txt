#include<cstdio>
#include<algorithm>
using namespace std;
 
long long int ans,lhmax[10001],lhmin[10001],rhmax[10001],rhmin[10001], ls[10001], rs[10001];
int i,j,n,t,k,a[10001];
int main()
{
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d",&n);
        for(i=0;i<n;i++)
            scanf("%d",&a[i]);
        lhmax[0]=lhmin[0]=a[0];
        for(i=1;i<n;i++)
            {lhmax[i]=max((long long)a[i],a[i]+lhmax[i-1]);lhmin[i]=min((long long)a[i],a[i]+lhmin[i-1]);}
 
        rhmax[n-1]=rhmin[n-1]=a[n-1];
        for(i=n-2;i>=0;i--)
            {rhmax[i]=max((long long)a[i],a[i]+rhmax[i+1]);rhmin[i]=min((long long)a[i],a[i]+rhmin[i+1]);}
        //for(i=0;i<n;i++)printf("%lld ",lh[i]);printf("\n");for(i=0;i<n;i++)printf("%lld ",rh[i]);
        //need hard for soft
        //soft nn
        ls[0]=a[0];
        for(i=1;i<n;i++)
            ls[i]=max(ls[i-1],lhmax[i]);
        rs[n-1]=a[n-1];
        for(i=n-2;i>=0;i--)
            rs[i]=max(rs[i+1],a[i]+rhmax[i]);
        ans=0;
        for(i=1;i<n;i++)
            ans=max(ans,lhmax[i-1]-rhmin[i]);
        for(i=1;i<n;i++)
            ans=max(ans,rhmax[i]-lhmin[i-1]);
        printf("%lld\n",ans);
    }
    return 0;
}