#include<bits/stdc++.h>
using namespace std;

struct compare
{
    bool operator()(pair<int, int> a, pair<int, int> b)
    {
        if(a.first==b.first)
        {
            return a.second>b.second;
        }
        else
        {
            return a.first<b.first;
        }
    }
};
int main()
{
  int t,n;
  double ans;
  cin>>t;
  while(t--)
  {
  ans=0.0;
  cout<<endl;
  cin>>n;
  pair<int,int>pr[n];
  for(int i=0;i<n;i++)
  {
    cin>>pr[i].first>>pr[i].second;
  }
  sort(pr,pr+n, compare());
  for(int i=0;i<n-1;i++)
  {
    if(pr[i].first==pr[i+1].first)
    {
      if(pr[i].second<pr[i+1].second)
      {
        swap(pr[i],pr[i+1]);
      }
    }
  }
  for(int i=0;i<n-1;i++)
  {
    ans+=sqrt(((pr[i+1].first-pr[i].first)*(pr[i+1].first-pr[i].first))+((pr[i+1].second-pr[i].second)*(pr[i+1].second-pr[i].second)));
  }
  printf("%.2f\n",ans);
}
return 0;
}
