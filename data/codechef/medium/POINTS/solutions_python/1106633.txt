import math
n = int(raw_input())
 
for i in range(n):
    raw_input() ## account for input format
    np = int(raw_input())
 
    points = []
    for i in range(np):
        points.append(map(int, raw_input().split()))
 
    points = sorted(points, key=lambda x: x[0] + 1.0/(1+x[1]))
    
    total = 0
    for i in range(np-1):
        total += math.sqrt((points[i][0] - points[i+1][0])**2 + (points[i][1] - points[i+1][1])**2)
    print "%.2f" % total