#!/usr/bin/env python


import sys
import math

def cmppts(a,b):
    if a[0] < b[0]:
        return -1
    if a[0] == b[0]:
        if a[1] > b[1]:
            return -1
    return 1

def d(a,b):
    return math.sqrt((a[0]-b[0])**2 + (a[1]-b[1])**2)

if __name__ == '__main__':
    tc = int(sys.stdin.readline())
    while tc:
        tc -= 1
        sys.stdin.readline()
        n = int(sys.stdin.readline())
        points = []
        for i in xrange(n):
            points.append(map(int, sys.stdin.readline().split()))
        points.sort(cmppts)
        dst = 0.0
        for i in xrange(len(points)-1):
            dst += d(points[i], points[i+1])
        print "%.2f" % dst
    sys.exit(0)
