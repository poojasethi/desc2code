def getdistance(p1, p2):
    return ((p1[0] - p2[0]) ** 2 + (p1[1] - p2[1]) ** 2) ** .5

for case in xrange(int(raw_input())):
    raw_input()
    points = [tuple(map(int,raw_input().split())) for i in xrange(int(raw_input()))]
    points = sorted(points, key = lambda (x, y): (x, -y))
    distance = sum(getdistance(p1, p2) for p1, p2 in zip(points, points[1:]))
    print "%.2f" % distance
    