from math import *
for i in range(int(raw_input())):
    raw_input()
    points = int(raw_input())
    point = []
    for i in range(points):
        point.append(map(int, raw_input().split()))
    point = sorted(point, key=lambda x: x[0] + 1.0/(1+x[1]))
    distance = 0
    for j in range(points-1):
        distance += sqrt((point[j][0]-point[j+1][0])**2 + (point[j][1]-point[j+1][1])**2)
    print "%.2f" % distance