#include <iostream>
#include <stdio.h>
#include<math.h>

using namespace std;

#define mod 1000000007

/* Optimized version of power() in method 4 */
unsigned long long int power(unsigned long long int m, unsigned long long int n)
{
	//printf("m:%llu n:%llu\n",m,n);
	unsigned long long int t1,t2;
	if(n == 0) return 1 ;
	if(n == 1) return (m%mod);
	
	t1=n/2;
	t2=power(m, t1);
	
	t2=(t2*t2)%mod;
	
	if (n%2 != 0)
		t2=(t2*m)%mod;
		
	return t2;
}

int main()
{
	int test;
	scanf("%d",&test);
	unsigned long long int n,m,q,k,i;
	unsigned long long int result;
	for(i=0;i<test;i++){
		scanf("%llu %llu %llu %llu",&n,&m ,&q,&k);
		if(q>m) printf("%d\n",0);
		else{
			//printf("%llu %llu %llu %llu\n",(m-q),power(q+1,n),2*power(q,n),power(q-1,n));
			result=((m-q)*(((power(q+1,n)-(2*power(q,n))%mod+mod)%mod)+power(q-1,n))%mod)%mod;
			printf("%llu\n",result);
		}
	}
	return 0;
}