#include<iostream>
#define N 1000000007
long long int modexp(long long int x,long long int n)
{

    if(n==0)
        return 1;
    if(n%2)
        return((x%N *modexp(x,n-1))%N);
    else{

        long long int t = modexp(x,n/2);
        return ((t*t)%N);

    }

}
using namespace std;
int main()
{

    int t;
    cin>>t;

    while(t--)
    {

        long long int n;



        long long int m,q,k;
        cin>>n>>m>>q>>k;

        if(m<=q)
            {
                cout<<"0"<<endl;
                continue;
            }
            long long int a = modexp(q+1,n);
            long long int b = modexp(q-1,n);
            long long int c = (2*modexp(q,n))%N;

long long int ans =a+b-c+N;

        ans = ((m-q)*ans)%N;

        cout<<ans<<endl;

    }

    return 0;
}
