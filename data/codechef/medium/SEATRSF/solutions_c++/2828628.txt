#include<iostream>
#include<cmath>
#include<vector>
#include<cstdio>
#include<string>
#include<sstream>
#include<algorithm>
#define ll long long
using namespace std;
int T;
ll n,m,q,k;
const ll pMOD=(ll)1e9+7;
ll powr(ll q, ll n)
{
	q=q%pMOD; n=n%(pMOD-1);
	if(n==0) return 1;
	if(q==0) return 0;
	if(n%2==0)
	{
		ll k=powr(q,n/2);
		k=(k*k)%pMOD;
		return k;
	}
	else
	{
		ll k=powr(q,(n-1)/2);
		k=(k*k)%pMOD;
		k=(k*q)%pMOD;
		return k;
	}
}
int main()
{
	cin>>T;
	for(int ii=0;ii<T;ii++)
	{
		cin>>n>>m>>q>>k;
		if(m<q){cout<<0<<endl;continue;}
		ll ans=powr(q-1,n);
		ans+=powr(q+1,n);
		ans-=2*powr(q,n);
		ans*=(m-q);
		while(ans<0) {ans+=pMOD;}
		ans=ans%pMOD;
		cout<<ans<<endl;
	}
	return 0;
}
