#include<iostream>
#include<algorithm>
#include<string>
#include<cmath>
#include<cstdio>
#include<cstdlib>
#include<map>
#define pii pair<int,int>

using namespace std;
int p = 1000000007;

long long _pow(long long int q,long long int n){
if(n<0)return 0;
if(n==0)return 1;
if(n==1)return q;
if(!(n&1)){
long long tem = _pow(q,n>>1);
tem = tem%p;
return (tem*tem)%p;
}
return (q%p * _pow(q,n-1)%p)%p;
}

int main(){
long long int n,m,q,k,t,tem,tem2;
scanf("%lld",&t);
while(t--){
scanf("%lld%lld%lld%lld",&n,&m,&q,&k);
tem = _pow(q+1,n);
tem = tem + _pow(q-1,n);
tem = tem % p;
tem2 = _pow(q,n);
tem2 = (2*tem2)%p;
tem = (tem - tem2 + p)%p;
tem = ((m-q)%p*tem%p)%p;
if(m<=q)tem=0;
printf("%lld\n",tem);
}
return 0;
}
