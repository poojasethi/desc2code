#include<cstdio>
#include<iostream>
#include<cmath>
#include<algorithm>
#include<cstring>
#include<stdlib.h>
using namespace std;

int main()
{
   
  int n;
  cin>>n;
  //int arr[n][n];
  int dp[n+1][n+1];
  
  for(int i=1;i<=n;i++)
   for(int j=1;j<=n;j++)
    cin>>dp[i][j];

  
  for(int k=1;k<=n;k++)
  {
    for(int i=1;i<=n;i++)
     {
       for(int j=1;j<=n;j++)
       {
         if(dp[i][j]>dp[i][k]+dp[k][j])
           dp[i][j]=dp[i][k]+dp[k][j];
       }
     }
   } 
   // for(int i=1;i<=n;i++){
   //for(int j=1;j<=n;j++)
    //cout<<dp[i][j]<<" ";cout<<endl;}
   int s,g,d,m;
   cin>>m;
   while(m--)
   {
     cin>>s>>g>>d;
     long long temp=dp[s+1][g+1]+dp[g+1][d+1];

     cout<<temp<<" ";
     cout<<temp-dp[s+1][d+1]<<endl; 
   }
 } 
