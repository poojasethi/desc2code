#include <iostream>
#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;
typedef long long ll;
const int maxn = 1e5 + 9;

int n,k;
ll num[maxn],dp[maxn], mx[maxn];
ll aux[maxn];

int main()
{
	int t = 0;
	cin >> t;

	while(t--)
	{
		fill(aux,aux + n,-(ll)2000000000);
		fill(mx,mx + n,-(ll)2000000000);
		fill(dp,dp + n,-(ll)2000000000);

		cin >> n >> k;
		for(int i = 1; i <= n; i++)
			cin >> num[i];

		mx[n + 1] = -(ll)2000000000;
		dp[n + 1] = -(ll)2000000000;
		aux[n + 1] = -(ll)2000000000;
		for(int i = n; i >= 1; i--)
		{
			dp[i] = max(num[i], dp[i + 1] + num[i]);
			mx[i] = max(mx[i + 1], dp[i]);
		}
		ll res = -(ll)2000000000;

		for(int i = 1; i <= n - k - 1 ; i++)
		{
			aux[i] = max(num[i], num[i] + aux[i - 1]);
			res = max(res,aux[i] + mx[i + k + 1]);
		}
		//cout << mx[5] << endl;
		//system("pause");
		cout << res << endl;

	}

	return 0;
}
