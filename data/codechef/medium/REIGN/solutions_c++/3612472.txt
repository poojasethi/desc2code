#include<iostream>
#include<algorithm>
#include<cmath>
#include<cstdio>
#include<string.h>
#include<cstdlib>
 
using namespace std;
 
int gcd(int a,int b)
{
 int r, i;
  while(b!=0){
    r = a % b;
    a = b;
    b = r;
  }
  return a;
}
 
 
int min(int a,int b)
{
        return a<b?a:b;
}
 
 
long long int max(long long int a,long long int b)
{
        return a>b?a:b;
}
 
long long int a[100010];
long long int dpf[100010];
long long int dpb[100010];
long long int b[100010];
long long int c[100010];
 
int main()
{
        long long int t,i,j,m,k,p,n,ans;
        scanf("%lld",&t);
        while(t--)
        {
                ans=-2000000035;
                scanf("%lld",&n);
                scanf("%lld",&k);
                for(i=0;i<n;i++)
                {
                        scanf("%lld",&a[i]);
                }
                dpf[0]=a[0];
                b[0]=a[0];
                for(i=1;i<n;i++)
                {
                        b[i]=max(b[i-1]+a[i],a[i]);
                        dpf[i]=max(dpf[i-1],b[i]);
                }
                dpb[n-1]=a[n-1];
                c[n-1]=a[n-1];
                for(i=n-2;i>=0;i--)
                {
                        c[i]=max(c[i+1]+a[i],a[i]);
                        dpb[i]=max(dpb[i+1],c[i]);
                }
                for(i=0;i<(n-k-1);i++)
                {
                        j=dpf[i]+dpb[i+k+1];
                        if(j>ans)
                                ans=j;
                }
                printf("%lld\n",ans);
        }
        return 0;
}