#include <algorithm>
#include <cstdio>

using namespace std;

const int MAXN = 100010;
typedef long long ll;

ll inp[MAXN];
ll mx1[MAXN], mx2[MAXN];

int main() {
//    freopen("ques.txt", "r", stdin);
//    freopen("ans.txt", "w", stdout);
    int t, n, k;
    scanf("%d", &t);
    while(t--) {
        scanf("%d%d", &n, &k);
        for (int i = 0; i < n; i++)
            scanf("%lld", inp + i);
        ll sum = inp[0] > 0 ? inp[0] : 0LL;
        mx1[0] = inp[0];
        for (int i = 1; i < n; i++) {
            sum += inp[i]; // include mx_sum such that inp[i] has to be taken
            mx1[i] = sum;
            if (sum < 0LL) sum = 0LL;
        }
        sum = inp[n - 1] > 0 ? inp[n - 1] : 0LL;
        mx2[n - 1] = inp[n - 1];
        for (int i = n - 2; i >= 0; i--) {
            sum += inp[i]; 
            mx2[i] = sum;
            if (sum < 0LL) sum = 0LL;
        }
        ll mx_fnd = mx2[n - 1];
        for (int i = n - 2; i >= 1; i--) {
            if (mx_fnd >= mx2[i]) mx2[i] = mx_fnd;
            else mx_fnd = mx2[i];
        }
/*        printf("lhs aray\n");
        for (int i = 0; i < n; i++)
            printf("%lld ", mx1[i]);
        printf("\nrhs array\n");
        for (int i = 0; i < n ; i++)
            printf("%lld ", mx2[i]);
        printf("\n");*/
        ll ans = 0LL;
        for (int i = 0; i < n - k - 1; i++) {
            if (i != 0)
                ans = max(ans, mx1[i] + mx2[i + k + 1]);
            else ans = mx1[i] + mx2[i + k + 1];
        }
        printf("%lld\n", ans);
    }
    return 0;
}
