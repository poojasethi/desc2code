#include<iostream>
#include<vector>
#include<algorithm>

using namespace std ;

void func()
{
        int n , k ;
        cin >> n >> k ;
        vector<long long> vals ;
        for(int i=0;i<n;i++)
                {
                long long in ;
                cin >> in ;
                vals.push_back(in) ;

        }


long long  left[n] ;
long long  right[n] ;
long long  maxleft = vals[0] ;
long long maxright = vals[n-1] ;
left[0]=vals[0] ;
right[n-1]=vals[n-1] ;


for(int i=1;i<n;i++)
{
        maxleft = maxleft+vals[i] ;

        maxleft = max(maxleft , vals[i]) ;
        left[i]=max(maxleft,left[i-1] );


}

for(int i=n-2 ;i>=0 ;i--)
{

        maxright = maxright+vals[i] ;
  maxright = max(maxright , vals[i]) ;
        right[i] = max(maxright,right[i+1]);


}

long long ans ;

ans = left[0]+right[n-1] ;
for(int i=0;i<n-k-1;i++)
{
        long long check ;
        check=left[i]+right[i+k+1] ;
        ans = max(ans , check) ;
}
        cout << ans << endl ;

}

int main()
{
        int t ;
        cin >> t ;
        while(t--)
                func() ;
        return 0 ;

}