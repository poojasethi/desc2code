#include<iostream>
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<string.h>
#include<ctype.h>
#define maxq -1000000000000000
#define mod 1000000007
using namespace std;
typedef long long ll;
ll mx1[100010],mx2[100010];
int x,a[100010];
ll max(ll x, ll y)
{ return (y > x)? y : x; }

void maxSubArraySum(int a[], int start,int end,ll mx[])
{
   ll max_so_far = a[start];int i;
   ll curr_max = a[start];
   mx[start]=a[start];
 //x=start;
   for (i=start+1; i<=end; i++)
   {
        curr_max = max(a[i], curr_max+a[i]);
       if(max_so_far<curr_max)
       { max_so_far=curr_max;
         //x=i;
       }
       mx[i]=max_so_far;
   }
   //return max_so_far;
}
void maxiSubArraySum(int a[], int start,int end,ll mx[])
{
   ll max_so_far = a[end];int i;
   ll curr_max = a[end];
   mx[end]=a[end];
 //x=start;
   for (i=end-1; i>=start; i--)
   {
        curr_max = max(a[i], curr_max+a[i]);
       if(max_so_far<curr_max)
       { max_so_far=curr_max;
         //x=i;
       }
       mx[i]=max_so_far;
   }
   //return max_so_far;
}

ll maxp=-2000000000;
int main()
{
    int start1,end1,start2,end2,n,t,i,j,k,p,q;
    ll max1,max2;
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d%d",&n,&k);
        for(i=0;i<n;i++)
        scanf("%d",&a[i]);
       // p=n-k-2;
    //    j=0;
        start1=0;
        end1=n-k-2;
        maxSubArraySum(a,start1,end1,mx1);
        start2=k+1;
        end2=n-1;
        maxiSubArraySum(a,start2,end2,mx2);
        maxp=-2000000010;
        for(i=0;i<=end1;i++)
        {
            max1=mx1[i]+mx2[i+k+1];
            if(max1>maxp)
            maxp=max1;
        }

        printf("%lld\n",maxp);
    }

}
