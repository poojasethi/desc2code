//REIGN

#include<cstdio>
#include<cstring>
#include<cstdlib>
#define MAXN 100001
#define get getchar
#define max(a, b) ((a)>(b)?(a):(b))

int N, K;
long long int a[MAXN], dp[MAXN];

long long int input(){
	long long int in=0, sg=1;
	char c=get();
	while(c<'0' && c>'9' && c!='-') c=get();
	if(c=='-'){
		sg=-1;
		c=get();
	}
	while(c>='0' && c<='9'){
		in=(in<<3)+(in<<1)+c-'0';
		c=get();
	}
	return in*sg;
}

int main(){
	int test;
	test=input();
	while(test--){
		N=input();
		K=input();
		for(int i=0; i<N; i++) a[i]=input();
		long long max_here=a[0], max_far=a[0];
		dp[0]=a[0];
		for(int i=1; i<N-K-1; i++){
			max_here=(max_here<0)?a[i]:(max_here+a[i]);
			max_far=max(max_here, max_far);
			dp[i]=max_far;
		}
		max_here=max_far=a[N-1];
		long long int maximum=max_here+dp[N-1-(K+1)];
		for(int i=N-2; i>=(K+1); i--){
			max_here=(max_here<0)?a[i]:(max_here+a[i]);
			max_far=max(max_here, max_far);
			if(maximum<dp[i-(K+1)]+max_far) maximum=dp[i-(K+1)]+max_far;
		}
		printf("%lld\n",maximum);
	}
}