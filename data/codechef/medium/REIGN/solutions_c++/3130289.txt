#include<iostream>
#include<climits>
using namespace std;
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
	long long int n,k;
	cin >> n >> k;
	long long int a[n],maxf[n],maxb[n],max=INT_MIN,v=0,i,curMax;
	for(i=0;i<n;i++)
	    cin>>a[i];
	//(a[0]<0)?curMax=0:curMax=a[0];
	curMax = maxf[0] = a[0];
	for(i=1;i<n;i++)
	{
	    if(curMax<0)
		curMax = a[i];			    
	    else
		curMax += a[i];

	    if(maxf[i-1] < curMax)
		maxf[i] = curMax;
	    else
		maxf[i] = maxf[i-1];

	    //cout << maxf[i] << " ";

	}
	//cout << endl;

	//(a[n-1]<0)?curMax=0:curMax=a[n-1];
	curMax = maxb[n-1] = a[n-1];
	for(i=n-2;i>=0;i--)
	{
	    if(curMax<0)
		curMax = a[i];			    
	    else
		curMax += a[i];

	    if(maxb[i+1]<curMax)
		maxb[i] = curMax;
	    else
		maxb[i] = maxb[i+1];
	//    cout << maxb[i] << " " ;
	}
	//cout << endl;



	/*for(i=0;i<n;i++)
	    cout << maxf[i] << " ";
	cout << endl;
	for(i=0;i<n;i++)
	    cout << maxb[i] << " ";
	cout << endl;
	*/

	for(i=0;i<n-k-1;i++)
	{
	    v = maxf[i] + maxb[i+k+1];
	    if(max < v)
		max = v;
	   // cout << i << " " << v << endl;
	}
	cout << max << endl;
	
    }
    
    return 0;
}
