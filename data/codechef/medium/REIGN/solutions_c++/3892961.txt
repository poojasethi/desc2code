#include<iostream>
#include<cstdio>
typedef long long int ll;
using namespace std;
ll a[100005],b[100005],c[100005],d[100005],i,j,tc,n,k,m1,m2;
int main()
{
    cin>>tc;
    while(tc--)
    {
        cin>>n>>k;
        for(i=1;i<=n;i++)
        cin>>a[i];
        b[1]=a[1];
        for(i=2;i<=n;i++)
            b[i]=((b[i-1]+a[i])>a[i])?b[i-1]+a[i]:a[i];
        c[n]=a[n];d[n]=c[n];
        for(i=n-1;i>=1;i--)
        {
            c[i]=((c[i+1]+a[i])>a[i])?c[i+1]+a[i]:a[i];
            if(c[i]>d[i+1]) d[i]=c[i];
            else d[i]=d[i+1];
        }
        m1=b[1]+d[k+2];
        for(i=1;i<n-k;i++)
        {
            m2=d[i+k+1];
            if((b[i]+m2)>m1)
                m1=b[i]+m2;
        }
        cout<<m1<<endl;
    }
    return 0;
}
