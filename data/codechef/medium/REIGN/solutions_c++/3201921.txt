//CodeChef submission 3197809 (C++ 4.3.2) plaintext list. Status: AC, problem REIGN, contest . By squal (squal), 2014-01-06 17:18:21.
#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<stdlib.h>
#include<algorithm>
#define getcx getchar_unlocked
#ifndef ONLINE_JUDGE
    #define getcx getchar
#endif
#define l long long
using namespace std;
inline int inp()
{
   int n=0;
   int ch=getcx();int sign=1;
   while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();}
 
   while(  ch >= '0' && ch <= '9' )
           n = (n<<3)+(n<<1) + ch-'0', ch=getcx();
   return n*sign;
}
inline long long in()
{
   long long n=0;
   long long ch=getcx();long long sign=1;
   while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();}
 
   while(  ch >= '0' && ch <= '9' )
           n = (n<<3)+(n<<1) + ch-'0', ch=getcx();
   return n*sign;
}
l a[100001];
int main()
{
	l t,n,k;
	t=in();
	while(t--)
	{
		n=in();
		k=in();
		for(l i=0;i<n;++i)
		{
			a[i]=in();
			//a[i]=a[i-1]+e;
		}
		l max3=n-1,max1[100001]={0},best_for=a[0];
		max1[0]=a[0];
		for(l i=1;i<=max3;++i)
		{
			best_for=max(best_for,(l)0)+a[i];
			max1[i]=max(max1[i-1],best_for);
		}
 
		l max2[100001]={0},ans=-10000000000LL;
		max2[n-1]=a[n-1];
		best_for=a[n-1];
		for(l i=n-2;i>=0;--i)
		{
			best_for=max(best_for,(l)0)+a[i];
			max2[i]=max(best_for,max2[i+1]);
		}
        for(l i=0;i<n-k-1;i++)
		{
		ans=max(ans,max1[i]+max2[i+k+1]);
		}
	//	if(ans==-10000000000LL)
	//		printf("0\n");
	//	else
			printf("%lld\n",ans);
	}
return 0;
}   