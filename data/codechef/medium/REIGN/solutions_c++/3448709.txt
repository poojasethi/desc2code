#include<cstdio>
#include<cstring>
#include<cmath>
#include<ctime>
#include<iostream>
#include<algorithm>
using namespace std;

int get_int(){
    int x=0;char c;int t=0;
    for (c=getchar();(c<'0'||c>'9')&&c!='-';c=getchar());
    if (c=='-'){t=1;c=getchar();}
    for (;c>='0'&&c<='9';c=getchar()){x*=10;x+=c-48;}
    if (t) x=-x;return x;  
}

bool upmax(long long &v,long long x){if(x>v){v=x;return true;}return false;}
bool upmin(long long &v,long long x){if(x<v){v=x;return true;}return false;}
const int maxn=100050;
long long sum[maxn];
long long f[maxn],g[maxn];
long long inf=(1<<30);
int n,k;

int main()
{
    int T=get_int();
    inf*=inf;
    while(T--)
    {
      n=get_int(),k=get_int();
      for(int i=1;i<=n;i++)sum[i]=sum[i-1]+get_int();
      long long minsum=0;
      f[0]=-inf;
      for(int i=1;i<=n;i++)
        {
          f[i]=sum[i]-minsum;
          upmax(f[i],f[i-1]);
          upmin(minsum,sum[i]);
        }
      long long maxget=-inf,ans=-inf;
      for(int i=k+2;i<=n;i++)
      {
        upmax(maxget,f[i-1-k]-sum[i-1]);
        upmax(ans,sum[i]+maxget);
      }
      printf("%lld\n",ans); 
    }
}
