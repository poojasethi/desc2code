#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <cmath>
#include <climits>
long long int n,k;
long long int arr[100000];
long long int F[100000];
long long int S[100000];
long long int q[100000];
using namespace std;
int main(){
	int t;cin >> t ;
	while(t--){
		cin >> n>>k;
		for(int i=0;i<n;i++){cin >> arr[i];}
		F[0]=arr[0];
		for(int i=1;i<n;i++){
			F[i]=max(F[i-1]+arr[i],arr[i]);
		}
		S[n-1]=arr[n-1];
		for(int i=n-2;i>=0;i--){
			S[i]=max(S[i+1]+arr[i],arr[i]);
		}
		//q[n-1]=F[n-k-2]+S[n-1];
		q[n-1]=S[n-1];
		for(int i=n-2;i>=0;i--){
			q[i]=max(q[i+1],S[i]);
		}
		long long int ans=F[0]+q[k+1];
		for(int i=2;i<=n-k-1;i++){
			long long int A = F[i-1]+q[k+i];
			ans=max(ans,A);
		}
		cout << ans << endl ;
	}
	return 0;
}
