#include<iostream>
#include<limits.h>

using namespace std;
void func(long long l[],long long r[],long long a[],long long n)
{
	long long max,msf;
	max=msf=INT_MIN;
	//left arr
	for(int i=0;i<n;i++)
	{
		if(msf<0)
		msf=a[i];
		else
		msf=msf+a[i];
		if(max<msf)
		max=msf;
		l[i]=max;
	}
	//right arr
	max=msf=INT_MIN;
	for(int i=n-1;i>=0;i--)
	{
		if(msf<0)
		msf=a[i];
		else 
		msf=msf+a[i];
		if(max<msf)
		max=msf;
		r[i]=msf;
	}
}
int main()
{
	long long t,n,k;
	cin>>t;
	while(t--)
	{
		cin>>n>>k;
		long long a[n],r[n],l[n];
		k++;
		for(int i=0;i<n;i++)
		cin>>a[i];
		func(l,r,a,n);
		long long max=INT_MIN;
		for(int i=0;i<n-k;i++)
		{
			if(l[i]+r[i+k]>max)
			max=l[i]+r[i+k];
		}
		cout<<max<<endl;
		
	}
	return 0;
}