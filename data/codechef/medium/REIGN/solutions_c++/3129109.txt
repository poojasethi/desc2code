#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;
long long int lefty[100005], righty[100005], a[100005];
int main () {
	int N, k, T;
	cin >> T;
	while ( T -- ) {
	long long int sum = 0, j;
	cin >> N >> k;
	int i;
	for ( i = 0; i < N; i ++ ) {
		cin >> a[i];
	}
	for ( i = 0; i < N; i ++ ) {
		sum = max (a[i], a[i]+sum);
		if ( i ) {
			lefty[i] = max (sum, lefty[i-1]);
		}
		else
			lefty[i] = sum;
	}
	sum = 0;
	for ( i = N-1; i >= 0; i -- ) {
		sum = max(a[i], a[i]+sum);
		if (i != N-1)
			righty[i] = max(righty[i+1], sum);
		else
			righty[i] = sum;
	}
	/*for ( i = 0; i < N; i ++ ) {
		cout << lefty[i] << " " << righty[i] << endl;
	}*/
	sum = lefty[0] + righty[N-1];
	i = 0;
	j = k+1;
	while ( i < N && j < N ) {
		sum = max(lefty[i++] + righty[j++], sum );
	}
	cout << sum << endl;
	}
	return 0;
}