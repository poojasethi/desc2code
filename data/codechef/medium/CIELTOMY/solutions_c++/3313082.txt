//source--Editorial

#include<stdio.h>
#define INT_MAX 10000
int main() {
  int t;
  int N, M, A[100], B[100], C[100];
  scanf("%d", &t);
  while(t--) {

    scanf("%d%d", &N, &M);
    int ways[10][10], dist[10][10];
    for(int i=0;i<N;i++)
    for(int j=0;j<N;j++)
    {
        ways[i][j] = 0;
        dist[i][j] = INT_MAX;
    }
     for(int i=0;i<N;i++)
     {
         dist[i][i] = 0;
         ways[i][i] = 1;
     }
    for(int i = 0; i < M; ++i)
     {
      int a, b, c;
      scanf("%d%d%d", &a, &b, &c);
      --a; --b;//vertex started from 0
      dist[a][b] = c;
      dist[b][a] = c;
      ways[a][b] = 1;
      ways[b][a] = 1;
     }

    for(int k=0;k<N;k++)
     for(int i=0;i<N;i++)
     for(int j=0;j<N;j++)
       {
         if(i == k || j == k) continue;
         if(dist[i][k] + dist[k][j] < dist[i][j])
        {
          dist[i][j] = dist[i][k] + dist[k][j];
          ways[i][j] = ways[i][k] * ways[k][j];
        }
         else if (dist[i][j] == dist[i][k] + dist[k][j])
         {
          ways[i][j] += ways[i][k] * ways[k][j];
         }
      }
    printf("%d\n", ways[0][N-1]);
  }
  return 0;
}
