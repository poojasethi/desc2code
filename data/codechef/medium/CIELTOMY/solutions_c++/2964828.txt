#include <cstdio>

int main() 
{
	int T;
	scanf("%d", &T);
  	while(T--) 
	{
    	int N, M;
    	scanf("%d %d", &N, &M);
    	int ways[11][11], dist[11][11];
    	for(int i = 1; i <= N; i++)
			for(int j = 1; j <= N; j++)
		 		ways[i][j] = 0, dist[i][j] = 1000;
    	for(int i = 1; i <= N; i++) 
			dist[i][i] = 0, ways[i][i] = 1;
    	for(int i = 1; i <= M; ++i) 
		{
      		int a, b, c;
	      	scanf("%d %d %d", &a, &b, &c);
     	 	dist[a][b] = c;
     	 	dist[b][a] = c;
     	 	ways[a][b] = 1;
     	 	ways[b][a] = 1;
    	}

    	for(int k = 1; k <= N; k++) 
			for(int i = 1; i <= N; i++)
				for(int j = 1; j <= N; j++) 
				{
      				if(i == k || j == k) 
						continue;
      				if(dist[i][k] + dist[k][j] < dist[i][j]) 
					{
        				dist[i][j] = dist[i][k] + dist[k][j];
        				ways[i][j] = ways[i][k] * ways[k][j];
      				} 
					else if (dist[i][j] == dist[i][k] + dist[k][j]) 
					{
        				ways[i][j] += ways[i][k] * ways[k][j];
      				}
				}
    	printf("%d\n", ways[1][N]);
	}
	return 0;
}
