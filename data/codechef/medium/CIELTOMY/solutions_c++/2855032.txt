#include <vector>
#include <list>
#include <map>
#include <set>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include<string>
 
using namespace std;
typedef long long int  LLD;

int main()
{ 
	LLD t,n,m,i,j,a,b,c,k;
	
	cin>>t;
	
	while(t--)
	{
		LLD cnt[15][15] = {{0}},adj[15][15] = {{0}};
		
		cin>>n>>m;
		
		
			for(i=1;i<=n;i++)
			{
				for(j=1;j<=n;j++)
				{
					if(i == j)
					adj[i][j] = 0;
					else
					adj[i][j] = 10000000;
				}
			}
		
		
		for(i=1;i<=m;i++)
		{
			cin>>a>>b>>c;
			adj[a][b] = adj[b][a]=c;
			cnt[a][b]=cnt[b][a]=1;
		}
	//	cout<<n<<m;
		
		for(k=1;k<=n;k++)
		{
			for(i=1;i<=n;i++)
			{
				for(j=1;j<=n;j++)
				{
					if((adj[i][k] + adj[k][j] < adj[i][j] )&& (i!=j)&&(j!=k)&&(k!=i))
					{
						adj[i][j] = adj[i][k] + adj[k][j];
						cnt[i][j] = cnt[i][k]*cnt[k][j];
					}
					else if((adj[i][k] + adj[k][j] == adj[i][j]) && (i!=j)&&(j!=k)&&(k!=i))
					{
						//cout<<i<<" "<<j<<" "<<k<<endl; 
						cnt[i][j]+= cnt[i][k]*cnt[k][j];
					}
					
				}
			}
		}
		
		cout<<cnt[1][n]<<endl;
	}
	
	
return 0;
}
 