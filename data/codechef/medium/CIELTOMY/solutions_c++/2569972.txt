#include <iostream>
#include <cstdio>
#include <cstring>
#include <vector>
#include <algorithm>

#define MAX 100

using namespace std;

int adj[10][10];
bool visited[10];
int mind,np;
int ln;

void go(int k,int l) {
    if(l>mind){
        return;
    }
    if(k==ln) {
        if(l<mind) {
            mind=l;
            np=1;
            return;
        }
        else if(l==mind) {
            np++;
            return;
        }
    }
    visited[k]=true;
    for(int i=0;i<=ln;i++) {
        if(visited[i]==false && adj[k][i]!=11) {
            go(i,l+adj[k][i]);
        }
    }
    visited[k]=false;
}

int main() {
    //freopen("input.txt","r",stdin);freopen("output.txt","w",stdout);
    int t;
    cin>>t;
    while(t--) {
        for(int i=0;i<10;i++) {
            for(int j=0;j<10;j++) {
                adj[i][j]=11;
            }
        }
        for(int i=0;i<10;i++) {
            visited[i]=false;
        }
        mind=MAX;np=0;
        int n,m;
        cin>>n>>m;
        ln=n-1;
        for(int i=0;i<m;i++) {
            int a,b,c;
            cin>>a>>b>>c;
            adj[a-1][b-1]=c;
            adj[b-1][a-1]=c;
        }
        go(0,0);
        cout<<np<<endl;
    }
    return 0;
}
