#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
int main()
{
    ll tc,r,g,b,k,a[3],cnt;
    scanf("%lld",&tc);
    while(tc--)
    {
        cnt=0;
        scanf("%lld %lld %lld %lld",&r,&g,&b,&k);
        a[0]=max(r,max(g,b));
        a[2]=min(r,min(g,b));
        a[1]=r+g+b-a[0]-a[2];
        if(a[2]>=k)
            cnt+=k*3-2;
        else
        {
            cnt+=a[2]*3;
            k-=a[2];
            a[0]-=a[2];
            a[1]-=a[2];
            if(a[1]>=k)
                cnt+=k*2-1;
            else
            {
                cnt+=a[1]*2;
                k-=a[1];
                a[0]-=a[1];
                cnt+=k;
            }
        }
        printf("%lld\n",cnt);
    }
}
