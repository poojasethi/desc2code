n,m=map(int,raw_input().split())
a=map(int,raw_input().split())
l=0
while(m>0):
    b,t=raw_input().split()
    if(b=='C'):
        l=(l+int(t))%n
    elif(b=='A'):
        l=(l+n-int(t))%n
    else:
        k=(l+int(t)-1)%n
        print(a[k])
    m=m-1        