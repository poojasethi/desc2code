#include<stdio.h>
#include <iostream>
using namespace std;
int A[100000];
int main(){
 
int n,m,i=0,k=0,j=0;

 
char a;
 
scanf("%d%d",&n,&m);
 
for(i=0;i<n;i++){
 
scanf("%d",&A[i]); 
 
}
 
i=0;j=n-1;
 
while(m-- > 0){
 
//fflush(stdin);
cin>>a;
scanf("%d",&k);
 
if(a== 'C'){
i=(i+k)%n;
j=(j+k)%n;
// printf("i=%ld j=%ld\n",i,j);
}
else if (a=='A'){
i=(i+n-k)%n;
j=(j+n-k)%n;
// printf("i=%ld j=%ld\n",i,j);
}
else{
// printf("i=%ld j=%ld\n",i,j);
printf("%d\n",A[(i+k-1)%n]);
}
 
 
 
//printf("The value of m:%ld\n",m);
}
 
//getch();
return 0;
 
}