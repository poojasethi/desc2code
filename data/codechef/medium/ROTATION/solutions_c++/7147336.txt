#include<stdio.h>
#include<stdlib.h>
int a[100005];

int inline take()
{
	char c;
	int n=0;
	
	c=getchar();
	while(c < '0' || c >'9') {c=getchar();}
    while(c>='0' && c<='9')
	{
		n=(n<<3)+(n<<1)+c-'0';
		c=getchar();
	}
	return n;
}

int main()
{
	int N,M,i,x,start;
	char c;
	N=take();
	M=take();
	start=0;
	for(i=0;i<N;i++)
	a[i]=take();
	for(i=0;i<M;i++)
	{
		fflush(stdin);
		c=getchar();
		x=take();
		switch(c)
		{
			case 'R':
				printf("%d\n",a[(start+x-1)%N]);
				break;
			case 'C':
				start = (start+x)%N;
				break;
				
			case 'A':
				start= (N+start-x)%N;
				break;
				
		}
	}
	return(0);
}