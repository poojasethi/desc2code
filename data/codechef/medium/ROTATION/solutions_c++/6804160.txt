#include<iostream>
using namespace std;
int arr[100000];
int main()
{
	int n,m,i,count=0,d,y,z;
	char ch;
	cin>>n>>m;
	for(i=0;i<n;i++)
	cin>>arr[i];
	while(m--)
	{
		cin>>ch;
		if(ch=='A')
		{
			cin>>d;
			count=(count+d)%n;
		}
		if(ch=='C')
		{
			cin>>d;
			count=(count-d)%n;
		}
		if(ch=='R')
		{
			cin>>d;
			if(count==0)
			cout<<arr[d-1]<<"\n";
			else
			if(count<0)
			{
				y=d-count;
				if(y<=n)
				cout<<arr[y-1]<<"\n";
				else
				{
					z=y%n;
					cout<<arr[z-1]<<"\n";
					
				}
			}
			else
			if(count>0)
			{
				y=d-count;
				if(y>=1)
				cout<<arr[y-1]<<"\n";
				else
				{
					if(y==0)
					cout<<arr[n-1]<<"\n";
					if(y<0)
					cout<<arr[n-1+y]<<"\n";
				}
			}
		}
	}
	count=0;
	return 0;
}