#include<iostream>
using namespace std;
int main()
{
		int n,m,d,count,i,temp;
		cin>>n>>m;
		int arr[n];
		char ch;
		for(i=0;i<n;i++)
		cin>>arr[i];
		count=0;
		while(m--)
		{
			cin>>ch;
			cin>>d;
			
			if(ch=='C')
			{
				d%=n;
				count+=d;
				count%=n;
			}
			else if(ch=='A')
			{
				d%=n;
				count+=n-d;
				count%=n;
			}
			else
			{
				d--;
				temp=count+d;
				temp%=n;
				cout<<arr[temp]<<endl;
			}
		}
	return 0;
}