#include<bits/stdc++.h>
using namespace std;
int arr[100001];
int main()
{
    int n,q;
scanf("%d%d",&n,&q);
for(int i=0;i<n;i++)
scanf("%d",arr+i);
    int start=0;
while(q--)
{

    char c;
    int d;
    scanf("%c",&c);
    getchar();
    scanf("%d",&d);
    getchar();
    if(c=='C')
        start=(start+d)%n;
    else if(c=='A')
        start=(start-d+n)%n;
    else
        printf("%d\n",arr[(start+d-1+n)%n]);
}
}
