#include <iostream>

using namespace std;

int array[1000];

int main() {
	int t, n, k, answer;
	string str;
	cin >> t;
	while(t --) {
		cin >> n >> k >> answer;
		cin >> array[0];
		for(int i = 1; i < n; i ++) {
			cin >> array[i];
		}
		cin >> str;
		long long result = array[0];
		if(str.compare("XOR") == 0) {
			for(int i = 1; i < n; i ++) {
				result = result ^ array[i];
			}
			if(k == 0) {
				result = answer;
			} else if(k % 2 == 1) {
				result = result ^ answer;
			} else {
				result = answer;
			}
		} else if(str.compare("AND") == 0) {
			for(int i = 1; i < n; i ++) {
				result = result & array[i];
			}
			if(k == 0) {
				result = answer;
			} else {
				result = result & answer;
			}
		} else {
                        for(int i = 1; i < n; i ++) {
                                result = result | array[i];
                        }
			if(k == 0) {
				result = answer;
			} else {
				result = result | answer;
			}
		}
		cout << result << endl;
	}
	return 0;
}