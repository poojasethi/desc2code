#include <iostream>
#include <cstdio>
#define ll long long int
#define read(x) scanf("%lld",&x)
using namespace std;

ll anding(ll *a,int n)
{
    ll ans = a[0];
    for(int i = 1; i<n; ++i)
        ans &= a[i];
    return ans;
}

ll xoring(ll *a,int n)
{
    ll ans = a[0];
    for(int i = 1; i<n; ++i)
        ans ^= a[i];
    return ans;
}

ll oring(ll *a, int n)
{
    ll ans = a[0];
    for(int i = 1; i<n; ++i)
        ans |= a[i];
    return ans;
}

void process()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        ll n,k,answer,ans;
        read(n);
        read(k);
        read(answer);
        ll a[n];
        for(int i = 0; i<n; ++i)
            read(a[i]);
        string op;
        cin >> op;
        if(k == 0)
        {
            printf("%lld\n",answer);
            continue;
        }
        if(op == "AND"){
            ans = anding(a,n) & answer;
            printf("%lld\n",ans);
        }
        else if(op == "OR"){
            ans = (oring(a,n)) | answer;
            printf("%lld\n",ans);
        }
        else{
            ans = xoring(a,n);
            if(k%2 == 0)
                ans = 0;
            printf("%lld\n",ans ^ answer);
        }
    }
}

int main()
{
    process();
    return 0;
}
