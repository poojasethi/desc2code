#include<stdio.h>
#include<iostream>
#include<algorithm>
#include<string.h>
#include<math.h>
#include<iomanip>
#include<vector>
#include<map>
#include<set>
using namespace std;
typedef long long ll;
typedef unsigned long long ull;
typedef double db;

ll a[10000001]={0};//,b[10000001]={0},c[10000001];

ll FX(ll n ,ll ans)
{
	for(int i=0;i<n;i++)
	 ans=ans^a[i];
	return ans; 
}

ll FA(ll n ,ll ans)
{
	for(int i=0;i<n;i++)
	 ans=ans&a[i];
	return ans; 
}

ll FO(ll n ,ll ans)
{
	for(int i=0;i<n;i++)
	 ans=ans|a[i];
	return ans; 
}

int main()
{
  //ios_base::sync_with_stdio(false);
  //cin.tie(NULL);
 char str[10];//,str2[50],pl;
    ll t;
	cin>>t;
	while(t--)
	{ ll n,k,ans;
	  cin>>n>>k>>ans;
	  for(int i=0;i<n;i++)
	  {
	  	cin>>a[i];
	  }
	  cin>>str;
	  
	  if(k==0)
	   cout<<ans<<"\n";
	  else
	  {
	  	if((str[0]=='A')) 
	  	  cout<<FA(n,ans)<<"\n";
	  	else if(str[0]=='O')
		  cout<<FO(n,ans)<<"\n";  
	  	else
		  {
		  	if(k%2!=0)
		  	  cout<<FX(n,ans)<<"\n";
		  	else
			   cout<<ans<<"\n";  
			}  
	  	 
	   } 
    }     
   	return 0;
}