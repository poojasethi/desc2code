#include<stdio.h>
using namespace std;
int main()
{
    int t,n,i;
    char op[4];
    long long int k,ans,a[1000],temp;
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d%lld%lld",&n,&k,&ans);
        for(i=0;i<n;++i)
            scanf("%lld",&a[i]);
        scanf("%s",op);
        if(k==0)
        {
            printf("%lld\n",ans);
            continue;
        }
        if(op[0]=='A')
        {
            temp=a[0];
            for(i=1;i<n;++i)
                temp=temp&a[i];
            ans=ans&temp;
            printf("%lld\n",ans);
            continue;
        }
        if(op[0]=='O')
        {
            temp=a[0];
            for(i=1;i<n;++i)
                temp=temp|a[i];
            ans=ans|temp;
            printf("%lld\n",ans);
            continue;
        }
        if(op[0]=='X')
        {
            if(k%2)
            {
                temp=a[0];
                for(i=1;i<n;++i)
                    temp=temp^a[i];
                ans=ans^temp;
                printf("%lld\n",ans);
                continue;
            }
            else
            {
                printf("%lld\n",ans);
                continue;
            }
        }
    }
    return 0;
}
