#include <iostream>
#include <cstring>
#include <climits>
#include <cmath>
#include <cstdlib>

using namespace std;

#define MAX_N 1000

int main(){
	int a[MAX_N];
	int t;
	int ans,n,k;
	char op[5];
	cin>>t;
	while(t--){
		cin>>n>>k>>ans;
		for (int i = 0; i < n; ++i)
		{
			cin>>a[i];
		}
		cin>>op;
		int num;
		if(strcmp(op, "XOR")==0){
			num=ans;	
			if(k%2==1){
				for (int i = 0; i < n; ++i)
					num^=a[i];
			}
		}else if(strcmp(op, "AND")==0){
			num=ans;
			if(k>0)
				for (int i = 0; i < n; ++i)
					num&=a[i];
		}else{
			num=ans;
			if(k>0)
				for (int i = 0; i < n; ++i)
					num|=a[i];
		}
		cout<<num<<"\n";
	}
	return 0;
}