#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

int main(int argc, char const *argv[])
{
	int t, n, ans, k, a[1003];
	string op;
	cin >> t;
	while(t--) {
		cin >> n >> k >> ans;
		for(int i = 0; i < n; i++)
			cin >> a[i];
		cin >> op;

		if(k == 0) {
			cout << ans << endl;
		}
		else if(op == "XOR") {
			if(k & 1) {
				for(int i = 0; i < n; i++) {
					ans = ans ^ a[i];
				}
				cout << ans << endl;
			}
			else
				cout << ans << endl;
		}
		else if(op == "AND") {
			for(int i = 0; i < n; i++) {
				ans = ans & a[i];
			}
			cout << ans << endl;
		}
		else if(op == "OR") {
			for(int i = 0; i < n; i++) {
				ans = ans | a[i];
			}
			cout << ans << endl;
		}

	}
	return 0;
}