#include <iostream>
#include <algorithm>
#include <vector>
#include <string>
using namespace std;
typedef long long ll;
typedef vector<ll> vll; 
int main()
{
	ll t,n,k,temp,i,ans;
	string op;
	scanf("%lld",&t);
	vll nos;
	while(t--)
	{
		scanf("%lld",&n);
		scanf("%lld",&k);
		scanf("%lld",&ans);
		for(i=0;i<n;i++)
		{
			scanf("%lld",&temp);
			nos.push_back(temp);
		}
		cin>>op;
		//op.erase( remove_if( op.begin(), op.end(), ::isspace ), op.end() );
		//ll i1=op.find_first_not_of(" \t");
		//ll i2=op.find_last_not_of(" \t");
		//op=op.substr(i1,i2-i1+1);
		//cout<<"hi"<<op<<"it"<<endl;
		if(k==0)
		{
			printf("%lld\n",ans);
		}
		else
		{
			 if(op=="AND")
			{
				for(i=0;i<n;i++)
				{
					ans=ans&nos[i];
				}
			}
			else if(op=="OR")
			{
				for(i=0;i<n;i++)
				{
					ans=ans|nos[i];
				}
			}
			else if(op=="XOR")
			{
				if(k%2!=0)
				{
					for(i=0;i<n;i++)
					{
						ans=ans^nos[i];
					}
				}	
			}
	
			printf("%lld\n",ans);
		}
			nos.clear();
	}
	return 0;
}