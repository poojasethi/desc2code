#include<bits/stdc++.h>
using namespace std;
# define N 10005
long long int k,arr[N],ans,m;
long long int minvalue(long long int k,int n)
{
	return (k<n)?k:n;
}
int main()
{
	int t,n;
	char str[5];
	scanf("%d",&t);
	while(t--)
	{
		ans=0;
		m=0;
		scanf("%d%lld%lld",&n,&k,&ans);
		for(int i=0;i<n;i++)
		{
			scanf("%lld",&arr[i]);
		}
		scanf("%s",str);
		if(str[0]=='X')
		{
			if(k%2==0)
				printf("%lld\n",ans);
			else
			{
				for(int i=0;i<n;i++)
				{
					ans^=arr[i];
				}
				printf("%lld\n",ans);
			}
		}
		if(str[0]=='A')
		{
			if(k==0)
			{
				printf("%lld\n",ans);
			}
			else
			{
				for(int i=0;i<n;i++)
					ans&=arr[i];
				printf("%lld\n",ans);
			}
		}
		if(str[0]=='O')
		{
			if(k==0)
			{
				printf("%lld\n",ans);
			}
			else
			{
				for(int i=0;i<n;i++)
					ans|=arr[i];
				printf("%lld\n",ans);
			}
			
		}
		
	}
return 0;
}
