#include<bits/stdc++.h>
using namespace std;
#include<stdio.h>
#define ll long long

int main(){

    ll int i,j,n,k,ans,arr[10000];
    string str;
    ll int t;
    scanf ("%lld",&t);
    while(t--){
        scanf("%lld%lld%lld",&n,&k,&ans);
        for ( i=1;i<=n;i++){
            scanf("%lld",&arr[i]);
        }
        cin >> str;
        if ( str =="XOR" && k%2!=0){
            for ( i=1; i<=n;i++){
                ans = ans ^ arr[i];
            }
        }
        else if ( str == "AND" && k!=0){
            for ( i=1; i<=n;i++){
                ans = ans & arr[i];
            }
        }
        else if ( str == "OR" && k!=0){
            for ( i=1;i<=n;i++){
                ans = ans | arr[i];
            }
        }
        cout << ans << endl;
    }

    return 0;
}


