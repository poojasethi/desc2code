#include <iostream>
using namespace std;
 
int main() {
	long long int t,j,i,n,k,ans;
	string s;
	cin>>t;
	while(t--)
	{
		cin>>n>>k>>ans;
		long long int A[n];
		for(i=0;i<n;i++)
		{
			cin>>A[i];
		}
		cin>>s;
		if(s=="XOR")
		{
			if(k!=0)
			{
			 if(k%2==0)
		  for(j=0;j<2;j++)
		  {
			for(i=0;i<n;i++)
			{
				ans=ans^A[i];
			}
		 }
		 else
		 {
		 for(i=0;i<n;i++)
			{
				ans=ans^A[i];
			}
		 }
		}
		}
		else if(s=="AND")
		{
			if(k!=0)
			{
			for(i=0;i<n;i++)
			{
				ans=ans&A[i];
			}
			}
		}
		else if(s=="OR")
		{
			if(k!=0)
			{
			for(i=0;i<n;i++)
			{
				ans=ans|A[i];
			}
			}
		}
		cout<<ans;
		if(t!=0)
		 cout<<endl;
	}
	return 0;
} 
