#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

int A[1001];
char s[16];

int FAnd(int N, int K, int Answer)
{
  for(int j = 0; j < N; ++j)
    Answer = Answer & A[j];
  return Answer;
}

int FOr(int N, int K, int Answer)
{
  for(int j = 0; j < N; ++j)
    Answer = Answer | A[j];
  return Answer;
}

int FXor(int N, int K, int Answer)
{
  if((K & 1))
    K = 1;
  else
    K = 2;

  for(int i = 0; i < K; ++i)
  {
    for(int j = 0; j < N; ++j)
      Answer = Answer ^ A[j];
  }

  return Answer;
}

int main()
{
  int T;
  scanf("%d\n", &T);
  while(T--)
  {
    int N, K, Answer;
    scanf("%d %d %d\n", &N, &K, &Answer);

    for(int i = 0; i < N; ++i)
      scanf("%d ", A + i);

    gets(s);

    int res = Answer;
    if(K > 0)
    {
      if(s[0] == 'A')
        res = FAnd(N, K, Answer);
      else if(s[0] == 'O')
        res = FOr(N, K, Answer);
      else
        res = FXor(N, K, Answer);
    }

    printf("%d\n", res);
  }

  return 0;
}
