#include<iostream>

using namespace std;

int main(){
        long long int n,k,ans,i,a[1005],t,x;
         cin>>t;
         while(t--){
        cin>>n>>k>>ans;
        for(i=0;i<n;++i)
           cin>>a[i];
        char s[7];
        cin>>s;
        if(k==0){
          cout<<ans<<endl;
          continue;
        }
        if(s[0]=='A'){
           for(i=0;i<n;++i)
                   ans=ans&a[i];
        }
       else if(s[0]=='O'){
          for(i=0;i<n;++i)
            ans=ans|a[i];
       }
       else {
          if(k%2==0)
             ans=ans;
          else
          {
           for(i=0;i<n;++i)
            {
              x=ans^a[i];
              ans=x;
            }
          }
       }
       cout<<ans<<endl;
     }
     return 0;
}
