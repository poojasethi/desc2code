#include <iostream>
#include <cstring>
using namespace std;

int main() {
	// your code goes here
	int t,n,i;
	long int k,answer;
	char str[1000];
	cin>>t;
	while(t--)
	  { cin>>n>>k>>answer;
	    long int arr[n+1];
	  	for(i=0;i<n;i++)
	  	  {
	  	  	cin>>arr[i];
	  	  }
	  	cin>>str;
	  	if(strcmp(str,"AND")==0)
	  	  {if(k>0)
	  	  	  { for(i=0;i<n;i++)
	  	  	    {
	  	  	  	answer=answer & arr[i];
	  	  	    }
	  	  	  }
	  	  }
	  	else if(strcmp(str,"OR")==0)
	  	  { if(k>0)
	  	  	  { for(i=0;i<n;i++)
	  	  	    {
	  	  	  	answer=answer|arr[i];
	  	  	    }
	  	  	  }
	  	  }  
	  	  
	  	else
	  	  {	if(k%2!=0)
	  	  	  {
	  	  	  	for(i=0;i<n;i++)
	  	  	  	   {
	  	  	  	   	answer=answer^arr[i];
	  	  	  	   }
	  	  	  }
	  	  }
	   cout<<answer<<endl;	  
	  }
	return 0;
}