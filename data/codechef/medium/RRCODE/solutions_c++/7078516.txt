#include<bits/stdc++.h>

using namespace std;

int main()
{
	int t;
	scanf("%d", &t);
	long long int n,k,ans;
	while(t--)
	{
		scanf("%lld %lld %lld", &n, &k, &ans);
		long long int a[n];
		
		for(int i=0; i<n; i++)
		scanf("%lld", &a[i]);
		
		char str[4];
		scanf("%s", str);
		
		if(strcmp("XOR", str)==0)
		{
			
			if(k%2==0) 
			{
				printf("%lld\n", ans);
			}
			else
			{
				for(int j=0; j<n; j++)
				ans= ans^a[j];
				printf("%lld\n", ans);
			}
			
		}
		
		else if(strcmp("AND", str)==0)
		{
			if(k)
			{
				for(int j=0; j<n; j++)
				ans= ans & a[j];
			}
			printf("%lld\n", ans);
		}
		
		else
		{
			if(k)
			{
				for(int j=0; j<n; j++)
				ans= ans | a[j];
			}
			printf("%lld\n", ans);
			
		}
		
		
	}
	return 0;
}
