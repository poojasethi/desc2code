#include<iostream>
#include<algorithm>
#include<cmath>

using namespace std;

int main()
{
	int t, n, i, j;
	long long k, answer;
	string S;
	cin>>t;
	while(t--)
	{
		cin>>n>>k>>answer;
		long long A[n];
		for(i=0;i<n;i++)
		{
			cin>>A[i];
		}
		cin>>S;
		if(k==0)
		{
			cout<<answer<<endl;
		}
		else if(S.compare("XOR")==0)
		{
			if(k%2==0)
			{
				answer=answer^0;
				cout<<answer<<"\n";
			}
			else
			{
				for(i=0;i<n;i++)
				{
					answer=answer^A[i];
				}
				cout<<answer<<endl;
			}
		}
		else if(S.compare("AND")==0)
		{
			for(i=0;i<n;i++)
			{
				answer=answer&A[i];
			}
			cout<<answer<<endl;
		}
		else if(S.compare("OR")==0)
		{
			for(i=0;i<n;i++)
			{
				answer=answer|A[i];
			}
			cout<<answer<<endl;
		}
	}
	return 0;
}