def main():
    t = input()
    for i in xrange(t):
        n, k, ans = map(int, raw_input().split())
        arr = map(int, raw_input().split())
        operator = raw_input().strip()
        if k == 0:
            print ans
            continue
        if operator == 'OR':
            ans |= reduce(lambda x,y: x|y, arr)
        elif operator == 'AND':
            ans &= reduce(lambda x,y: x&y, arr)
        elif k%2:
            ans ^= reduce(lambda x,y: x^y, arr)
        print ans
main()