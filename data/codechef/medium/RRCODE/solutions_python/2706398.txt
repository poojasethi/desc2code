for t in range(input()):
    n,k,ans=map(int,raw_input().split())
    a=map(int,raw_input().split())
    op=raw_input().strip()
    if k==0:
        print ans
        continue
    x=ans
    for i in range(n):
        if op=="OR":
            x=x|a[i]
        elif op=="AND":
            x=x&a[i]
        elif k%2:
            x=x^a[i]
    print x
