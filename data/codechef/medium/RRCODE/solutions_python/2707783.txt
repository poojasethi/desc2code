t=input()
for q in range(t):
    n,k,ans=map(int,raw_input("").strip().split())
    arr=map(int,raw_input("").strip().split())
    op=raw_input("").strip()
    if(k==0):
        print ans
        continue
    if(op=='OR'):
        for i in arr:
            ans=ans|i
    elif(op=='AND'):            
        for j in xrange(min(k,1)):
            for i in arr:
                ans=ans&i
    elif(op=='XOR'):
        if(k%2==1):
            for i in arr:
                ans=ans^i
    print ans