#include <bits/stdc++.h>
#define lldd long long int
#define pb push_back
#define mp make_pair
#define vi vector <pair<int,int> >
using namespace std;
bool visited[2505];
lldd arr[2505];
lldd dist[2505][2505];
priority_queue <pair<lldd,int>,vector <pair<lldd,int> >,greater <pair<lldd,int> > > Q;
lldd dis(pair <int,int> a,pair <int,int> b)
{
	return (b.second-a.second)*(b.second-a.second) +  (b.first-a.first)*(b.first-a.first);
}
lldd dijisk(int n)
{
	for(int i=0;i<n+2;i++)
	{
		visited[i]=false;
		arr[i]=99999999999;
	}
	arr[n]=0;
	Q.push(mp(0,n));
	while(!Q.empty())
	{
		lldd d=Q.top().first;
		int l=Q.top().second;
		Q.pop();
		visited[l]=true;

		if(d<=arr[l])
		{for(int i=0;i<n+2;i++)
		{
			if(arr[i]>(d+dist[i][l]) || arr[l]==99999999999)
			{
				arr[i]=d+dist[i][l];
				Q.push(mp(arr[i],i));
			}
		}
	}
	}
	return arr[n+1];
}
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
{
	int n;
	scanf("%d",&n);
	vi v;
	for(int i=0;i<n+2;i++)
	{
		int a,b;
		scanf("%d %d",&a,&b);
		v.pb(mp(a,b));
	}
	for(int i=0;i<n+2;i++)
		for(int j=0;j<n+2;j++)
			dist[i][j]=dis(v[i],v[j]);
		lldd ans=dijisk(n);
	printf("%lld\n",ans);
}
return 0;
}