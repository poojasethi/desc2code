#include<stdio.h>
int main()
{
	int t,nT,i,j,k,h,min,tmp;
	scanf("%d",&t);
	int X[2502],Y[2502];
	int ed[2502];
	while(t--)
	{
		int mark[2502]={0};
		scanf("%d",&nT);
		for(i=1;i<=nT;i++)
			scanf("%d %d",&X[i],&Y[i]);
		scanf("%d %d",&X[0],&Y[0]);
		scanf("%d %d",&X[i],&Y[i]);
		for(i=1,j=0;i<=nT+1;i++)
		{
			ed[i]=((X[i]-X[j])*(X[i]-X[j])+(Y[i]-Y[j])*(Y[i]-Y[j]));
			if(ed[i]<=min)
			{
				min=ed[i];
				h=i;
			}
		}
		mark[0]=1;
		j=h;
		while(j!=nT+1)
		{
			min=1000000000;
			if(mark[j]==0)
			{
				mark[j]=1;
				for(i=1;i<=nT+1;i++)
				{
					if(mark[i]==0)
					{
						tmp=((X[i]-X[j])*(X[i]-X[j])+(Y[i]-Y[j])*(Y[i]-Y[j]))+ed[j];
						if(tmp<ed[i])
							ed[i]=tmp;
						if(ed[i]<=min)
						{
							min=ed[i];
							h=i;
						}
					}
				}
				j=h;
			}
		}
		printf("%d\n",ed[nT+1]);
	}
	return 0;
}
