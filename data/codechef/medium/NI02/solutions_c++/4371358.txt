#include<cstdio>
#include<cmath>
#include<iostream>
#include <stdio.h>
#include<string.h>
#define ull unsigned long long int
using namespace std;
#define min(a,b) a<b?a:b
struct point
{
    int x,y;
}data[2500+10];
int n;
ull cost[25000+2][2500+2];
ull dist[2500+2],flag[2500+2];
void dij(int v)
{
 int i,u,count,w;
 ull mm;
 for(i=0;i<=1+n;i++)
  flag[i]=0,dist[i]=cost[v][i];
 count=0;
 flag[v]=1;
while(count<=n)
 {
  mm=100000000000000LL;
  for(w=0;w<=1+n;w++)if(dist[w]<mm && !flag[w]) mm=dist[w],u=w;
  flag[u]=1;
  count++;
  for(w=0;w<=1+n;w++) if((dist[u]+cost[u][w]<dist[w]) && !flag[w]) dist[w]=dist[u]+cost[u][w];
 }
}
int main()
{
 int t,v,q,ff;
 cin>>t;
 	while(t--)
 	{
 		cin>>n;
	    for(int i=1;i<=n;++i)scanf("%d%d",&data[i].x,&data[i].y);
	    cin>>data[0].x>>data[0].y;
	    cin>>data[n+1].x>>data[n+1].y;
	    for(int i=0;i<=n+1;++i)
			{
				for( int j=0;j<=n+1;++j)
				{
					cost[i][j]=pow(data[i].x-data[j].x,2)+pow(data[i].y-data[j].y,2);
				}
				cost[i][i]=10000000000LL;
			}
			dij(0);//***********
	   	cout<<dist[n+1]<<endl;
 	}
 }