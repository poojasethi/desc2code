#include<cstdio>
#include<queue>
#include<climits>
#include<cmath>
using namespace std;

struct node
{
    int x;
    int y;
}arr[2503];
int a[2503][2503],b[2503],mark[2503],n;

int dijikstra()
{int i,j,k,pos,u;
    for(i=0;i<n;i++)
        b[i]=INT_MAX;
    b[0]=0;
for(k=0;k<n;k++)
{
    u=INT_MAX;
   for(i=0;i<n;i++)
   {
       if(mark[i]==0)
       {
           if(b[i]<u)
           {
               pos=i;
               u=b[i];
           }
       }
   }
   mark[pos]=1;
   for(j=0;j<n;j++)
    b[j]=min(b[j],b[pos]+a[pos][j]);
}

return b[n-1];
}

int main()
{int t,i,j;
    scanf("%d",&t);
    while(t--)
    {   scanf("%d",&n);
        for(i=1;i<=n;i++)
        scanf("%d %d",&arr[i].x,&arr[i].y);
        scanf("%d %d",&arr[0].x,&arr[0].y);
        scanf("%d %d",&arr[n+1].x,&arr[n+1].y);
        n=n+2;
        for(i=0;i<n;i++)
            mark[i]=0;
        for(i=0;i<n;i++)
        {
            for(j=0;j<n;j++)
                a[i][j]=pow(arr[i].x-arr[j].x,2)+pow(arr[i].y-arr[j].y,2);
        }
        printf("%d\n",dijikstra());
    }
return 0;
}
