#include<iostream>
using namespace std;
#define lld long long int

lld maxm(lld a,lld b)
{
	return a>b?a:b;
}


lld A[100008],start[100008],end[100008];

int main()
{
	lld tc,N,i,curr,ans,max;
	
	cin>>tc;
	
	while(tc--)
	{
		cin>>N;
		
	   	for(i=0; i<N; i++)
 	   	cin>>A[i];
     
       ans=-1000000000;	
        
        curr=0;
        
        for(i=0; i<N; i++)
        {
        	curr=maxm(A[i],curr+A[i]);
        	
        	ans=maxm(curr,ans);
        	
        	end[i]=curr;
        }
	    	
		curr=0,ans=-1000000000;	
				
        for(i=N-1; i>=0; i--)
        {
        	curr=maxm(A[i],curr+A[i]);
        	
        	ans=maxm(curr,ans);
        	
        	start[i]=curr;
        }
        
        for(i=1; i<N-1; i++)
        {
           ans=maxm(ans,start[i+1]+end[i-1]);	
        }
 
         cout<<ans<<endl;
	}
	
return 0;	
}