#include <bits/stdc++.h>
using namespace std;
long long prev[100010],next[100010],a[100010];
int main() {
	int t,n;
	cin>>t;
	while(t--)
	{
	    long long ans=INT_MIN;
	    memset(prev,0,sizeof prev);
	    memset(next,0,sizeof next);
	    memset(a,0,sizeof a);
	    cin>>n;
	    for(int i=1;i<=n;i++)
	    {
	        cin>>a[i];
	        prev[i]=max(a[i],prev[i-1]+a[i]);
	    }
	    for(int i=n;i>0;i--)
	    {
	        next[i]=max(next[i+1]+a[i],a[i]);
	    }
	    for(int i=1;i<=n;i++)
	    {
	        ans=max(max(prev[i],prev[i-1]+next[i+1]),ans);
	    }
	    cout<<ans<<endl;
	}
	return 0;
}
 