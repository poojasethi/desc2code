#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const int MAXN = 100005;

long long E[MAXN], nums[MAXN], S[MAXN];

int main() {
 int t,n; cin >> t;
 while(t--) {
  cin >> n;
  for(int i = 0; i < n; i++) cin >> nums[i];
  long long acu = 0;
  long long ans = -(10000LL * 10000LL * 10000LL * 10000LL);
  for(int i = 0; i < n; i++) {
    acu = max(acu + nums[i], nums[i]);
    E[i] = acu;
    ans = max(ans, E[i]);
  }
  acu = 0;
  for(int i = n - 1; i >= 0; i--) {
    acu = max(acu + nums[i], nums[i]);
    S[i] = acu;
    ans = max(ans, S[i]);
  }
  
  for(int i = 1; i < n - 1; i++) {
    ans = max(ans, E[i - 1] +  S[i + 1]);
  }
  cout << ans << endl;
 }
}