
#include <stdio.h>
#include <stdlib.h>

int main() {
    int test;
    int n;
    int i;
    long long int least_sum;
    long long int answer;
    long long least_block_sum;
    long long int most_neg_sum;
    long long int * cum_sum;
    long long int * arr;
    scanf("%d", &test);

    while(test--)
    {
          scanf("%d", &n);
        arr = (long long int *)calloc(n, sizeof(long long int));
        for(i=0;i<n;i++)
            scanf("%lld",&arr[i]);

        cum_sum = (long long int *)calloc(n, sizeof(long long int));

        cum_sum[0] = arr[0];

        if(arr[0] < 0)
            most_neg_sum = arr[0];
        else most_neg_sum = 0;

        answer = arr[0];
        least_block_sum = most_neg_sum;
        for(i=1;i<n;i++)
        {
            cum_sum[i] = cum_sum[i-1] + arr[i];


            if(cum_sum[i] - most_neg_sum > answer)
                answer = cum_sum[i] - most_neg_sum;

            if(arr[i] < 0)
            {
                if(least_block_sum + arr[i] < most_neg_sum)
                    most_neg_sum = least_block_sum + arr[i];


                if(cum_sum[i] < least_block_sum)
                    least_block_sum = cum_sum[i];

                if(least_block_sum < most_neg_sum)
                    most_neg_sum = least_block_sum;
            }
        }
        printf("%lld\n", answer);
    }
    return 0;
}

/*
6
1 2 3 4 5 5

*/
