#include <bits/stdc++.h>
using namespace std;
 
int main() {
	int T;
	long long int N;
	long long int A[100000];
	cin>>T;
	long long int TillA[100001],FromA[100001];
	while(T--)
	{
		cin>>N;
		long long int c,a;
		a=LLONG_MIN;
		c=0;
		for(int i=0;i<N;i++)
		{
			cin>>A[i];
			c=max(A[i],c+A[i]);
			a=max(a,c);
			TillA[i]=c;
			//cout<<TillA[i]<<" ";
		}
		//cout<<endl;
		c=0;
		for(int i=N-1;i>=0;i--)
		{
			c=max(A[i],c+A[i]);
			FromA[i]=c;
			//cout<<FromA[i]<<" ";
		}
		//cout<<endl;
		for(int i=1;i<N-1;i++)
		{
			a=max(a,TillA[i-1]+FromA[i+1]);
		}
		cout<<a<<endl;
	}
	return 0;
}
