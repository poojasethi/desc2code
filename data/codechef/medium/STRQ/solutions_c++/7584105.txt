#include<stdio.h>
#include<cstring>
#include<iostream>
#define gc getchar_unlocked
 
void scanint(int &x)
{
    register int c = gc();
    x = 0;
    for(;(c<48 || c>57);c = gc());
    for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
}
using namespace std;
int main()
{
    char a[1000002];
    gets(a);
    int t,k,len;
    //printf("\nfail\n");
    //char p1='c',p2='h',p3='e',p4='f';
    //k=a.length();
    //for(len=0;a[len]!='\0';len++);
    //printf("%lld\t%lld\n",k,len);
    k=strlen(a);
    static long long int s1[3][1000001],s2[3][1000001],s3[3][1000001],s4[3][1000001],s5[3][1000001],s6[3][1000001],s7[3][1000001],s8[3][1000001],s9[3][1000001],s10[3][1000001],s11[3][1000001],s12[3][1000001];
   // printf("\nfail\n");
    int u=0,c1=0,i;
    long long int count,sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='c')
                count++;
        if(a[i]=='h')
                    sum=sum+count;
        s1[0][i]=sum;
 
    }
    s1[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='c')
                count++;
        if(a[i]=='e')
                    sum=sum+count;
        s2[0][i]=sum;
    }
    s2[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='c')
                count++;
        if(a[i]=='f')
                    sum=sum+count;
        s3[0][i]=sum;
    }
    s3[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='h')
                count++;
        if(a[i]=='e')
                    sum=sum+count;
        s4[0][i]=sum;
 
    }
    s4[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='h')
                count++;
        if(a[i]=='f')
                    sum=sum+count;
        s5[0][i]=sum;
 
    }
    s5[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='e')
                count++;
        if(a[i]=='f')
                    sum=sum+count;
        s6[0][i]=sum;
 
    }
    s6[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='h')
                count++;
        if(a[i]=='c')
                    sum=sum+count;
        s7[0][i]=sum;
    }
    s7[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='e')
                count++;
        if(a[i]=='c')
                    sum=sum+count;
        s8[0][i]=sum;
 
    }
    s8[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='f')
                count++;
        if(a[i]=='c')
                    sum=sum+count;
        s9[0][i]=sum;
 
    }
    s9[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='e')
                count++;
        if(a[i]=='h')
                    sum=sum+count;
        s10[0][i]=sum;
    }
    s10[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='f')
                count++;
        if(a[i]=='h')
                    sum=sum+count;
        s11[0][i]=sum;
    }
    s11[0][i]=sum;
    count=0;
    sum=0;
    for(i=0;a[i]!='\0';i++)
    {
        if(a[i]=='f')
                count++;
        if(a[i]=='e')
                    sum=sum+count;
        s12[0][i]=sum;
    }
    s12[0][i]=sum;
    long long int count1,count2;
    count1=0;
    count2=0;
    //printf("\nfail\nhere");
    for(i=0;a[i]!='\0';i++)
        {
        if(a[i]=='c')
        {
            ++count1;
            s1[1][i]=count1;
            s2[1][i]=count1;
            s3[1][i]=count1;
            s7[2][i]=count1;
            s8[2][i]=count1;
            s9[2][i]=count1;
        }
        else
        {
            s1[1][i]=count1;
            s2[1][i]=count1;
            s3[1][i]=count1;
            s7[2][i]=count1;
            s8[2][i]=count1;
            s9[2][i]=count1;
        }
        }
     count1=0;
    count2=0;
    for(i=0;a[i]!='\0';i++)
        {
        if(a[i]=='h')
        {
            ++count1;
            s1[2][i]=count1;
            s4[1][i]=count1;
            s5[1][i]=count1;
            s7[1][i]=count1;
            s10[2][i]=count1;
            s11[2][i]=count1;
        }
        else
        {
            s1[2][i]=count1;
            s4[1][i]=count1;
            s5[1][i]=count1;
            s7[1][i]=count1;
            s10[2][i]=count1;
            s11[2][i]=count1;
        }
        }
 
     count1=0;
    count2=0;
    for(i=0;a[i]!='\0';i++)
        {
        if(a[i]=='e')
        {
            ++count1;
            s2[2][i]=count1;
            s4[2][i]=count1;
            s6[1][i]=count1;
            s8[1][i]=count1;
            s10[1][i]=count1;
            s12[2][i]=count1;
        }
        else
        {
            s2[2][i]=count1;
            s4[2][i]=count1;
            s6[1][i]=count1;
            s8[1][i]=count1;
            s10[1][i]=count1;
            s12[2][i]=count1;
        }
        }
 
     count1=0;
    count2=0;
    for(i=0;a[i]!='\0';i++)
        {
        if(a[i]=='f')
        {
            ++count1;
            s3[2][i]=count1;
            s5[2][i]=count1;
            s6[2][i]=count1;
            s9[1][i]=count1;
            s11[1][i]=count1;
            s12[1][i]=count1;
        }
        else
        {
            s3[2][i]=count1;
            s5[2][i]=count1;
            s6[2][i]=count1;
            s9[1][i]=count1;
            s11[1][i]=count1;
            s12[1][i]=count1;
        }
        }
      //  printf("\nfailed here\n");
    scanint(t);
    while(t--)
    {
    char ch1,ch2;
    int pp,l;
    scanf("%c %c",&ch1,&ch2);
    scanint(pp);
    scanint(l);
    long long int sum=0;
    if(ch1=='c'&&ch2=='h')
    {
        sum=s1[0][l-1];
        if(pp!=1)
            {
                sum-=(s1[0][pp-2]);
                sum-=(s1[1][pp-2])*((s1[2][l-1])-(s1[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='c'&&ch2=='e')
    {
        sum=s2[0][l-1];
        if(pp!=1)
            {
                sum-=(s2[0][pp-2]);
                sum-=(s2[1][pp-2])*((s2[2][l-1])-(s2[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='c'&&ch2=='f')
    {
        sum=s3[0][l-1];
        if(pp!=1)
            {
                sum-=(s3[0][pp-2]);
                sum-=(s3[1][pp-2])*((s3[2][l-1])-(s3[2][pp-2]));
                //printf("%d\t%d\t%d\n",s3[1][k-2],s3[2][l-1],s3[2][k-2]);
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='h'&&ch2=='e')
    {
        sum=s4[0][l-1];
        if(pp!=1)
            {
                sum-=(s4[0][pp-2]);
                sum-=(s4[1][pp-2])*((s4[2][l-1])-(s4[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='h'&&ch2=='f')
    {
        sum=s5[0][l-1];
        if(pp!=1)
            {
                sum-=(s5[0][pp-2]);
                sum-=(s5[1][pp-2])*((s5[2][l-1])-(s5[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='e'&&ch2=='f')
    {
        sum=s6[0][l-1];
        if(pp!=1)
            {
                sum-=s6[0][pp-2];
                sum-=(s6[1][pp-2])*((s6[2][l-1])-(s6[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='h'&&ch2=='c')
    {
        sum=s7[0][l-1];
        if(pp!=1)
            {
                sum-=s7[0][pp-2];
                sum-=(s7[1][pp-2])*((s7[2][l-1])-(s7[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='e'&&ch2=='c')
    {
        sum=s8[0][l-1];
        if(pp!=1)
            {
                sum-=(s8[0][pp-2]);
                sum-=(s8[1][pp-2])*((s8[2][l-1])-(s8[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='f'&&ch2=='c')
    {
        sum=s9[0][l-1];
        if(pp!=1)
            {
                sum-=s9[0][pp-2];
                sum-=(s9[1][pp-2])*((s9[2][l-1])-(s9[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='e'&&ch2=='h')
    {
        sum=s10[0][l-1];
        if(pp!=1)
            {
                sum-=s10[0][pp-2];
                sum-=(s10[1][pp-2])*((s10[2][l-1])-(s10[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='f'&&ch2=='h')
    {
        sum=s11[0][l-1];
        if(pp!=1)
            {
                sum-=s11[0][pp-2];
                sum-=(s11[1][pp-2])*((s11[2][l-1])-(s11[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    if(ch1=='f'&&ch2=='e')
    {
        sum=s12[0][l-1];
        if(pp!=1)
            {
                sum-=s12[0][pp-2];
                sum-=(s12[1][pp-2])*((s12[2][l-1])-(s12[2][pp-2]));
            }
            printf("%lld\n",sum);
            continue;
    }
    }
    return 0;
}