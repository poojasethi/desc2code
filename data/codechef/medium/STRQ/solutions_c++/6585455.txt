#include <cstdio>
#include <cctype>
#include <cstring>
#include <cstdlib>
#include <climits>
#include <cmath>
#include <algorithm>
using namespace std;

int c2id(char c){
	switch(c){
		case 'c':default:
		return 0;
		case 'h':return 1;
		case 'e':return 2;
		case 'f':return 3;
	}
}

char str[1000005];
int cnt[4][1000005];
long long cc[4][4][1000005];

int main()
{
	gets(str+1);
	int len=strlen(str+1);
	for(int i=len;i>=1;i--){
		for(int j=0;j<4;j++)
			cnt[j][i]=cnt[j][i+1];
		cnt[c2id(str[i])][i]++;
	}
	for(int i=len;i>=1;i--){
		for(int j=0;j<4;j++)
			for(int k=0;k<4;k++)
				cc[j][k][i]=cc[j][k][i+1];
		for(int k=0;k<4;k++)
			cc[c2id(str[i])][k][i]+=cnt[k][i];
	}
	int q;
	for(scanf("%d",&q);q--;){
		char a,b;
		int ida,idb,l,r;
		scanf(" %c %c %d %d",&a,&b,&l,&r);
		ida=c2id(a);idb=c2id(b);
		long long ans=cc[ida][idb][l]-cc[ida][idb][r+1];
		ans-=(long long)cnt[idb][r+1]*(long long)(cnt[ida][l]-cnt[ida][r+1]);
		printf("%lld\n",ans);
	}
    return 0;
}
