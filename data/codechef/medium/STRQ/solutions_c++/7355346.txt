#include<iostream>
#include<string.h>
typedef long long ull;
using namespace std;
char str[1000001];
ull c[1000001],h[1000001],e[1000001],f[1000001];
ull ch[1000001]={0},ce[1000001]={0},cf[1000001]={0};
ull eh[1000001]={0},ec[1000001]={0},ef[1000001]={0};
ull hc[1000001]={0},he[1000001]={0},hf[1000001]={0};
ull fh[1000001]={0},fe[1000001]={0},fc[1000001]={0};
ull ct=0,ht=0,et=0,ft=0;
void func(char a,ull i)
{
		if(a=='c')
	 {
	 	if(str[i]=='h')
	 	 {   
	 	 	ch[i]=c[i]+ch[i-1];
	 	 }
	 	 else
	 	  ch[i]=ch[i-1];
	 	  
	 	  if(str[i]=='e')
	 	  {
	 	  	
	 	 	ce[i]=c[i]+ce[i-1];
	 	  }
	 	  else
	 	   ce[i]=ce[i-1];
	 	   
	 	  if(str[i]=='f')
	 	  {
	 	 	cf[i]=c[i]+cf[i-1];	
	 	  }
	 	  else
	 	  cf[i]=cf[i-1];
	 }
	 
	 
	 if(a=='h')
	 {
	 	if(str[i]=='c')
	 	 {   
	 	 	hc[i]=h[i]+hc[i-1];
	 	 }
	 	 else
	 	  hc[i]=hc[i-1];
	 	  
	 	  if(str[i]=='e')
	 	  {
		 	 	he[i]=h[i]+he[i-1];
	 	  }
	 	  else
	 	   he[i]=he[i-1];
	 	   
	 	  if(str[i]=='f')
	 	  {
	 	  	
	 	 	hf[i]=h[i]+hf[i-1];
	 	  }
	 	  else
	 	   hf[i]=hf[i-1];
	 }
	 
	 
	 if(a=='e')
	 {
	 	if(str[i]=='c')
	 	 {   
	 	 	ec[i]=e[i]+ec[i-1];
	 	 }
	 	 else
	 	  ec[i]=ec[i-1];
	 	  if(str[i]=='h')
	 	  {
	 	  	
	 	 	eh[i]=e[i]+eh[i-1];
	 	  }
	 	  else
	 	   eh[i]=eh[i-1];
	 	   
	 	  if(str[i]=='f')
	 	  {
	 	 	ef[i]=e[i]+ef[i-1];
	 	  	
	 	  }
	 	  else
	 	   ef[i]=ef[i-1];
	 }
	 
	 
	  if(a=='f')
	 {
	 	if(str[i]=='c')
	 	 {   
	 	 	fc[i]=f[i]+fc[i-1];
	 	 }
	 	 else
	 	 fc[i]=fc[i-1];
	 	  if(str[i]=='h')
	 	  {
	 	 	fh[i]=f[i]+fh[i-1];
	 	  }
	 	  else
	 	   fh[i]=fh[i-1];
	 	  if(str[i]=='e')
	 	  {
	 	
	 	 	fe[i]=f[i]+fe[i-1];
	 	  	
	 	  }
	 	  else
	 	  fe[i]=fe[i-1];
	 }
}

int main()
{   
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    char a,b;
    ull i=0,n,l,r;
    
	cin>>str;
	ull len=strlen(str);
	
	for(i=0;i<len;i++) //creating an array for frequencies of c,h,e,f before/at ith position 
	{   
		if(str[i]=='c')
		 {  
             ct++;
		 	c[i]=ct;
		 }
		 else
		  c[i]=ct;
		  
		  if(str[i]=='h')
		 {
		 	ht++;
		 	h[i]=ht;
		 }
		 else
		  h[i]=ht;
		  
		 if(str[i]=='e')
		 {
		 	et++;
		 	e[i]=et;
		 }
		 else
		  e[i]=et;
		 
		 if(str[i]=='f')
	     {
	     	ft++;
	     	f[i]=ft;
	     }
		else
		 f[i]=ft;
		 
		 
		 func('c',i);
		 func('c',i);
		 func('c',i);
		 
		 func('h',i);
		 func('h',i);
		 func('h',i);
		 
		 func('e',i);
		 func('e',i);
		 func('e',i);
		 
		 func('f',i);
		 func('f',i);
		 func('f',i);

	}
	
/*	for( i=0;str[i]!='\0';i++)
	{
		cout<<fe[i]<<" ";
	}
	cout<<endl;
	for( int j=0;str[j]!='\0';j++)
		cout<<c[j]<<" ";
*/
	cin>>n;
	for( i=0;i<n;i++)
	{
	cin>>a>>b>>l>>r;
	ull k=l-2;
	ull r2=r-1,l2=l-1;
            if(a=='c' && b=='h')  cout<<ch[r2]-ch[l2]-(c[k]*(h[r2]-h[l2]));    
	else	if(a=='c' && b=='e')  cout<<ce[r2]-ce[l2]-(c[k]*(e[r2]-e[l2])); 
	else	if(a=='c' && b=='f')  cout<<cf[r2]-cf[l2]-(c[k]*(f[r2]-f[l2]));	
	else	if(a=='h' && b=='c')  cout<<hc[r2]-hc[l2]-(h[k]*(c[r2]-c[l2]));
	else	if(a=='h' && b=='e')  cout<<he[r2]-he[l2]-(h[k]*(e[r2]-e[l2]));
	else	if(a=='h' && b=='f')  cout<<hf[r2]-hf[l2]-(h[k]*(f[r2]-f[l2]));
	else	if(a=='e' && b=='c')  cout<<ec[r2]-ec[l2]-(e[k]*(c[r2]-c[l2]));
	else	if(a=='e' && b=='h')  cout<<eh[r2]-eh[l2]-(e[k]*(h[r2]-h[l2]));
	else	if(a=='e' && b=='f')  cout<<ef[r2]-ef[l2]-(e[k]*(f[r2]-f[l2]));
	else    if(a=='f' && b=='c')  cout<<fc[r2]-fc[l2]-(f[k]*(c[r2]-c[l2]));
	else	if(a=='f' && b=='h')  cout<<fh[r2]-fh[l2]-(f[k]*(h[r2]-h[l2]));
	else	if(a=='f' && b=='e')  cout<<fe[r2]-fe[l2]-(f[k]*(e[r2]-e[l2]));
	cout<<"\n";
   }
 
	return 0;
}