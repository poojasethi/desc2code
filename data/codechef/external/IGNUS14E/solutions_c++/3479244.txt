#include<iostream>
//#include<conio.h>
using namespace std;
int a[1000][1000]={0},b[1004][1004]={0},c[1000]={0};
int main()
{
int t=0,n=0,m=0,q=0,k=0,count=0,p=0,s=0,i=0,j=0,x1=0,x2=0,y1=0,y2=0,x=0;
//int a[1000][1000]={0},b[1000][1000]={0},c[1000]={0};
cin >> t;
while(t--)
{
cin >> n >> m >> q;
for(i=0;i<n+2;i++)
for(j=0;j<m+2;j++)
b[i][j]=0;
for(i=2;i<n+2;i++)
for(j=2;j<m+2;j++)
cin>>a[i][j];
for(i=2;i<n+2;i++)
{
for(j=2;j<m+2;j++)
{
cin>>x;
if(a[i][j]==x)
b[i][j]=1;
else
b[i][j]=0;
}
}
for(i=2;i<n+2;i++)
{
for(j=3;j<m+2;j++)
b[i][j]+=b[i][j-1];
}
for(i=2;i<m+2;i++)
{
for(j=3;j<n+2;j++)
b[j][i]+=b[j-1][i];
}
for(i=1;i<=q;i++)
{
cin>> x1 >> y1 >> x2 >> y2;
c[i]=b[x2+1][y2+1]-(b[x2+1][y1]+b[x1][y2+1]-b[x1][y1]);
}
for(i=1;i<=q;i++)
cout << c[i] << endl;
}
// getch();
return 0;
}
