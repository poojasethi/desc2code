#include<cstdio>
#include<iostream>
using namespace std;
int main()
{
 int a[1010][1010];
 int t,count,m,n,q,ans,x1,x2,y1,y2,h;
 scanf("%d",&t);
 while(t--)
 {
   scanf("%d%d%d",&n,&m,&q);
   for(int i=1;i<=n;i++)
   for(int j=1;j<=m;j++)
   scanf("%d",&a[i][j]);
   for(int i=1;i<=n;i++)
    {
    count=0;
   for(int j=1;j<=m;j++)
   {
     scanf("%d",&h);
     if(a[i][j]==h)
      count++;
      a[i][j]=count;
    }
   }
   for(int i=1;i<=m;i++)
    {
     for(int j=2;j<=n;j++)
   {
    a[j][i]+=a[j-1][i];
   }
   }
   while(q--)
   {
     scanf("%d%d%d%d",&x1,&y1,&x2,&y2);
     ans=a[x2][y2]-a[x2][y1-1]-a[x1-1][y2]+a[x1-1][y1-1];
    printf("%d\n",ans);
   }
 }
 return 0;
}