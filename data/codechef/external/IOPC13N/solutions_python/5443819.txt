#include <bits/stdc++.h>
 
using namespace std;
 
int graph[100000];
 
bool bfs(int graph[], int src, int dest)
{
	while(true)
	{
		if(graph[src]== -1)
		return false;
		if(graph[src]==dest)
		return true;
		src= graph[src];
	}
}
 
int main()
{
	for(int i=0;i<100000;i++) graph[i]= -1;
	int n, q, u, x, y;
	scanf("%d%d%d", &n, &q, &u);
	for(int i=1;i<n;i++)
	{
		scanf("%d%d", &x, &y);
		graph[y]= x;
	}
	
	while(q--)
	{
		scanf("%d%d", &x, &y);
		bool q1=bfs(graph, x, y);
		bool q2=bfs(graph, y, x);
		
		if(q1)
		{printf("1\n");}
		else{ if(q2)
		{printf("-1\n");}
		else
		{printf("0\n");}}
	}
	return 0;
}
 