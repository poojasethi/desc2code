#include <bits/stdc++.h>
//char c = getchar_unlocked();
using namespace std;
#define si 100001
bool v[si]={0};
int pre [si], post [si], t=0;
vector < vector<int> > g;
inline int scan(){
    char c = getchar_unlocked();
    int x = 0;
    while(c<'0'||c>'9'){
        c=getchar_unlocked();
    }
    while(c>='0'&&c<='9'){
        x=(x<<1)+(x<<3)+c-'0';
        c=getchar_unlocked();
    }
    return x;
}

int dfs(int u)
{
    pre[u]=++t;

    int i;
    for(i=0;i<g[u].size();i++)
    {
        if(v[g[u][i]]==0)
        {
            v[g[u][i]]=1;
            dfs(g[u][i]);
        }
    }
    post[u]=++t;
}

int main()
{
    int n,q,i,j,x,y,adm;


    n=scan();
    q=scan();
    adm=scan();

    g.resize(n);

    for(i=1;i<n;i++)
    {
        x=scan();
        y=scan();

        g[x].push_back(y);
    }


    dfs(adm);

    for(i=1;i<=q;i++)
    {
        x=scan();
        y=scan();

        if(pre[x]<pre[y]&&post[x]>post[y])
            printf("-1\n");
        else if ( pre[x]>pre[y]&&post[x]<post[y])
            printf("1\n");
        else
            printf("0\n");
    }
}
