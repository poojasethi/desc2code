#include<bits/stdc++.h>
using namespace std;
inline int scan(){
    char c = getchar_unlocked();
    int x = 0;
    while(c<'0'||c>'9'){
        c=getchar_unlocked();
    }
    while(c>='0'&&c<='9'){
        x=(x<<1)+(x<<3)+c-'0';
        c=getchar_unlocked();
    }
    return x;
}
int parent[100001];
bool dfs(int x,int y){
    if(y==-1){
        return 0;
    }
    return x==y?1:dfs(x,parent[y]);
}
int main(){
    int n=scan(),q=scan(),root=scan();
    parent[root]=-1;
    for(int i=1;i<n;i++){
        int x=scan(),y=scan();
        parent[y]=x;
    }
    while(q--){
        int x=scan(),y=scan();
        bool f=dfs(y,x);
        if(f){
            printf("1\n");
        }
        else{
            f=dfs(x,y);
            if(f){
                printf("-1\n");
            }
            else{
                printf("0\n");
            }
        }
    }
} 