#include<bits/stdc++.h>
using namespace std;
bool func(int v[],int x,int y){
    if(x==-1) return false;
    if(x==y) return true;
    return func(v,v[x] ,y);
}
int main(){
    int n,q,u;
    scanf("%d",&n);
    scanf("%d",&q);
    scanf("%d",&u);
    //cin>>n>>q>>u;
    //cout<<n<<" "<<q<<" "<<u<<endl;
    int v[1000001];
    for(int i=0;i<n-1;i++){
        //scanf("%d",&x);
        //scanf("%d",&y);
        int x,y;
        //cin>>x>>y;
        scanf("%d",&x);
        scanf("%d",&y);
        v[y]=x;
    }
    //cout<<"bjch j\n";
    v[u]=-1;
    
    //cout<<q<<endl;
    while(q--){
        //cout<<"bjch j\n";
        //cout<<"hjjk\n";
        int x,y;
        scanf("%d",&x);
        scanf("%d",&y);
        //cin>>x>>y;
        
        if(func(v,x,y))
        cout<<"1\n";
        else if(func(v,y,x))
        cout<<"-1\n";
        else
        cout<<"0\n";
    }
}