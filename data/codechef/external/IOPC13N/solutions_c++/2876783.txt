#include<iostream>
#include<cstdio>

using namespace std;

int parent[100005];

int main()
{
	//freopen("input.txt","r",stdin);
	
	for(int i=0;i<100005;i++)
	parent[i]=-1;
	
	
	int N,Q,U,x,y;
	
	scanf("%d %d",&N,&Q);
	scanf("%d",&U);
	
	for(int i=0;i<N-1;i++)
	{
		scanf("%d %d",&x,&y);
		parent[y] = x;
		
	}
	
	
	for(int i=0;i<Q;i++)
	{
		scanf("%d %d",&x,&y);
		
		
		int ans=0;
		int curr;
		
		curr=x;
		
		while(curr!=-1)
		{
			if(parent[curr]==y)
			{
				ans=1;
				break;
			}
			else
			curr = parent[curr];
		}
		
		curr = y;
		
		while(curr!=-1)
		{
			if(parent[curr]==x)
			{
				ans=-1;
				break;
			}
			else
			curr = parent[curr];
		}
		
		printf("%d\n",ans);
	}
	return 0;
}