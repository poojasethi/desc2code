#include<iostream>
#include<cstring>
#include<cstdio>
using namespace std;
inline void fi(int *a)
{
 register char c=0;
 while (c<33) c=getchar_unlocked();
 *a=0;
 while (c>33)
 {
     *a=*a*10+c-'0';
     c=getchar_unlocked();
 }
}
int main()
{
    int n,m,u;
    fi(&n);fi(&m);fi(&u);
    int A[n];
    memset(A,-1,sizeof(A));
    for(int i=1;i<n;i++)
    {
            int x,y;
            fi(&x);fi(&y);
            A[y]=x;
    }
    for(int i=0;i<m;i++)
    {
            int x,y,tmp=0,x1,y1;
            fi(&x);fi(&y);
            x1=x;y1=y;
            while(1)
            {
                    if(A[x]==y)
                    {
                               printf("1\n");
                               tmp=1;
                               break;
                    }
                    else if(A[x]==-1) break;
                    else x=A[x];
            }
            if(tmp==0)
            {
            while(1)
            {
                    if(A[y1]==x1)
                    {
                               printf("-1\n");
                               tmp=2;
                               break;
                    }
                    else if(A[y1]==-1) break;
                    else y1=A[y1];
            }
            }
            if(tmp==0) printf("0\n");
    }
    return 0;
}
            