#include<iostream>
#include<vector>
#include<climits>
#include<stdio.h>
#define MAX 100010
using namespace std;

inline int inp( )
{
	int n=0;
	int ch=getchar_unlocked();
	while(!(ch >= '0' && ch <= '9') )ch=getchar_unlocked();
	while( ch >= '0' && ch <= '9' )
	n = (n<<3)+(n<<1) + ch-'0', ch=getchar_unlocked();
	return n;
}


vector<int> graph(MAX);
int flag;
void  dfs(int u,int v){
	if(u==INT_MIN)
	return;
	if(u==v)
	{
		flag=1;
		return;
	}
	else
	dfs(graph[u],v);
}



int main(){
	int n,q,u;
	n=inp( );
	q=inp( );
	u=inp( );
	
	for(int i=0;i<n;i++)
	graph[i]=INT_MIN;
	
	for(int i=0;i<n-1;i++){
		int x,y;
		x=inp( );
		y=inp( );
		graph[y]=x;
		
	}
	for(int i=0;i<q;i++){
		int u,v;
		u=inp( );
		v=inp( );
		flag=0;
		dfs(u,v);
		if(flag==1)
		cout<<"1";
		else{
			dfs(v,u);
			if(flag==1)
			cout<<"-1";
			
		}
		if(flag==0)
		cout<<"0";
		cout<<"\n";
	}
	
}