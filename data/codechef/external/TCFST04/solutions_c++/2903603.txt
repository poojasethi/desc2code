#include <iostream>
#include <sstream>
#include <cstdio>
#include <cstdlib>
#include <algorithm>
#include <cmath>
#include <cstring>
#include <string>
#include <map>
#include <set>
#include <stack>
#include <vector>
#include <queue>

using namespace std;

#define SI ({int x;scanf("%d",&x);x;})
#define MP make_pair
#define PB push_back
#define all(x) (x).begin(), (x).end()
#define rall(x) (x).rbegin(), (x).rend()
#define getSize(x) ((int) (x).size()) 
const int INF = (1000000007);
typedef pair<int,int> PII;
typedef long long LL;

int N, M, K, X;
vector<int> pos[100001];
int main(int argc, char** argv)
{
     N = SI, M = SI, K = SI;
     for(int i = 0; i < N; ++i)
     {
	  X = SI;
	  pos[X].PB(i - getSize(pos[X]));
     }

     int res = 1;
     for(int i = 1; i <= M; ++i)
	  for(int j = 0; j < getSize(pos[i]); ++j)
	       res = max(res, j - int(lower_bound(all(pos[i]), pos[i][j] - K) - pos[i].begin()) + 1);
     printf("%d\n", res);
     return 0;
}

