#include<cstdio>
using namespace std;
#define MAX 1050
int canvas[MAX][MAX];
int ans;
struct set{
	int p;
	int size;
}sets[MAX*MAX];
int dir_x[]={0,0,1,-1};
int dir_y[]={-1,1,0,0};
int findset(int p)
{
	while(p!=sets[p].p)
	p=sets[p].p;
	return p;
}
void setUnion(int p1,int p2)
{
	p1=findset(p1);
	p2=findset(p2);
	if(p1==p2)
	return;
	int size=sets[p1].size+sets[p2].size;
	if(sets[p2].size>sets[p1].size)
	{
		sets[p1].p=p2;
		sets[p2].size=size;
	}
	else
	{
		sets[p2].p=p1;
		sets[p1].size=size;
	}
	if(ans<size)
	ans=size;
}
int main()
{
	int M,N,Q,B;
	int i,j,k;
	int p,p1;
	scanf("%d%d",&M,&N);
	scanf("%d",&Q);
	while(Q--)
	{
		scanf("%d",&B);
		if(B==0)
		printf("%d\n",ans);
		else if(B==1)
		{
			scanf("%d%d",&i,&j);
			if(canvas[i][j]==0)
			{
				canvas[i][j]=1;
				p=i*M+j;
				sets[p].p=p;sets[p].size=1;
				ans+=(ans==0);
				for(k=0;k<4;k++)
				if(canvas[i+dir_x[k]][j+dir_y[k]])
				{
					p1=(i+dir_x[k])*M+(j+dir_y[k]);
					setUnion(p,p1);
				}
			}
		}
	}
	return 0;
}
