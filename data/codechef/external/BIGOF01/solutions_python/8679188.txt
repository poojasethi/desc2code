#include<bits/stdc++.h>
using namespace std;
int dad[1000001];
#define s(t)   scanf("%d",&t)
int count1;
int find(int x)
{
   if (dad[x]!=x)
   {
      return find(dad[x]);
   }
   return x;
}
 
int merge(int a,int b)
{
   a=find(a);
   b=find(b);
   if(a!=b)
   {
      dad[b]=a;
   }
}
int main()
{
   int t;
   s(t);
   while(t--)
   {
      int n;
      s(n);
      int c;
      s(c);
      for(int i=1;i<=n;i++)
      {
         dad[i]=i;
      }
      while(c--)
      {
         int x,y;
         s(x);s(y);
         merge(x,y);
         //cout<<dad[1]<<" "<<dad[4]<<endl;
      }
      int q;
      s(q);
      while(q--)
      {
         int x,y;
         s(x);s(y);
         if(dad[x]==dad[y])
         {
            puts("Yes");
         }
         else
         puts("No");
      }
   }
}
