#include<bits/stdc++.h>
using namespace std;
int dad[1000001];
#define si(n) scanf("%d",&n)
int ran[1000001];
int count1;
int find(int x)
{
   if (dad[x]!=x)
   {
      return dad[x]=find(dad[x]);
   }
   return x;
}

int merge(int a,int b)
{
   a=find(a);
   b=find(b);
   if(a!=b)
   {
      if(ran[b]<ran[a])
      {
         swap(a,b);
         
      }
         dad[a]=b;
         ran[b]+=ran[a];
      
   }
}
int main()
{  //freopen("in.txt","r",stdin);
   int t;
   si(t);
   while(t--)
   {
      int n;
      si(n);
      int c;
      si(c);
      for(int i=1;i<=n;i++)
      {
         dad[i]=i;
         ran[i]=1;
      }
      while(c--)
      {
         int x,y;
         si(x);si(y);
         merge(x,y);
         //cout<<dad[1]<<" "<<dad[4]<<endl;
      }
      int q;
      cin>>q;
      while(q--)
      {
         int x,y;
         si(x);si(y);
         if(dad[x]==dad[y])
         {  
            puts("Yes");
         }
         else
         puts("No");
      }
   }
}
