#include <stdio.h>
#include <stdlib.h>

int id[1000001];
int size[1000001];

int root(int i)
{
    while( i != id[i])
    {
        id[i] = id[id[i]];
        i = id[i];
    }
    return i;
}
void un( int p , int q)
{
    int i , j;
    i = root(p);
    j = root(q);
    if(i == j)
        return ;
    if(size[i] > size[j])
    {
        id[j]=i;
        size[i] += size[j];
    }
    else
    {
        id[i] = j;
        size[j] += size[i];
    }
}
int main()
{
    int t , n , c , a , b , q , s , d , i;


//    printf("T = ");
    scanf("%d",&t);
    while(t--)
    {

//        printf("N = ");
        scanf("%d",&n);
        for( i = 1 ; i <= n; i++ )
        {
            id[i] = i;
            size[i] = 1;
        }

//        printf("C = ");
        scanf("%d",&c);
        while(c--)
        {
//            printf("a = ");
            scanf("%d",&a);
//            printf("B = ");
            scanf("%d",&b);

            un(a,b);
        }
//        printf("Q = ");
        scanf("%d",&q);
        while(q--)
        {
//            printf("S = ");
            scanf("%d",&s);
//            printf("D = ");
            scanf("%d",&d);
            if( root(s) == root(d))
                printf("Yes\n");
            else
                printf("No\n");
        }
    }
    return 0;
}
