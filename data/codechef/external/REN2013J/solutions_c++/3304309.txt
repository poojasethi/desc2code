    #include<iostream>
    #include<vector>
    #include<set>
    #include<stdio.h>
    using namespace std;
    int tr[100010],a[100010];
    set<int> s;
    int update(int idx,int value)
    {
    while(idx<=100000)
    {
    tr[idx]+=value;
    idx+=((idx)&(-idx));
    }
    }
    int query(int idx)
    {
    int sum=0;
    while(idx>0)
    {
    sum+=tr[idx];
    idx-=((idx)&(-idx));
    }
    return sum;
    }
    int main()
    {
    int n,q,u,v,t;
    scanf("%d",&n);
    for(int i=1;i<=n;i++){scanf("%d",&a[i]);update(i,a[i]);s.insert(i);}
    scanf("%d",&q);
    while(q--)
    {
    scanf("%d",&t);
    if(t==1)
    {
    scanf("%d %d",&u,&v);
    set<int>::iterator it;
    it=s.lower_bound(u);
    int k=*it;
    if(it!=s.end())
    while(k<=v)
    {
    update(k,-a[k]+a[k]/2);
    a[k]/=2;
    if(a[k]==0){s.erase(k);it=s.lower_bound(k);}
    else ++it;
    if(it==s.end())break;
	k=*it;
    }
    }
    else
    {
    scanf("%d %d",&u,&v);
    printf("%d\n",query(v)-query(u-1));
    }
    }
    } 