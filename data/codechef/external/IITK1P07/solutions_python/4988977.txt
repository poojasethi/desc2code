# your code goes here
def f(x,m,n):
	d=1
	while(m):
		if(m%2==1):
			d=(d*x)%n
		x=(x*x)%n
		m=m/2
	return d%n
	
t=int(raw_input())
while(t):
	x,m,n=raw_input().split()
	x=long(x)
	m=long(m)
	n=long(n)
	if(x==1):
		ans=(m+1)%n
	else:
		n=n*(x-1)
		ans=(f(x,m+1,n)-1)%n
		ans=ans/(x-1)
	print ans
	t=t-1