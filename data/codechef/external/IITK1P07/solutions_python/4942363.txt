#!/usr/bin/env python
#try:
t=int(raw_input())
while t>0:
	x,m,n=raw_input().split()
	#x,m,n= int(u) for u in raw_input().strip().split()
	#lis = map(int, raw_input().split())
	x=int(x)
	m=int(m)
	n=int(n)
	ans=0
	if x==1:print (m+1)%n
	else:
		#for i in range (0,m+1):
		#	ans= (ans + pow(x,i,n))%n
		print ((pow(x,m+1,(x-1)*n)-1+(x-1)*n)%((x-1)*n))/(x-1)
	t=t-1
#except:
#	pass
