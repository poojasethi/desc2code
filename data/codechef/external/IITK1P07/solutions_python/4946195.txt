t=int(raw_input())
for _ in range(t):
    x,m,n=map(int,raw_input().split())
    if n==1:
        print 0
    elif x==1:
        print (m+1)%n
    else:
        b = (x-1)*n
        ans=pow(x,m+1,b)
        ans-=1
        ans%=b
        ans/=x-1
        print ans