t=int(input())

for i in range(t):
    x,m,n=map(int,raw_input().split())
    if x==1:
        ans=(m+1)%n
    else:
        n=n*(x-1)
        ans=pow(x,m+1,n)-1
        ans=(ans+n)%n
        ans=ans/(x-1)
    print(ans)