t=input()

for _ in xrange(t):
    x,m,n=map(int,raw_input().split())
    if x==1:
        print (m+1)%n
    else:
        z=((1-pow(x,m+1,n*(x-1)))%(n*(x-1)))
        z=z/(1-x)
        if z<0:
            z+=n
        print z
