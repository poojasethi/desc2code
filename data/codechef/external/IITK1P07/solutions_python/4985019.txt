t=int(input())
 
for i in range(0,t):
    x,m,n=map(int,raw_input().split(" "))
    if x==1:
        ans=(m+1)%n
        ans=int(ans)
    else:
        ans=pow(x,m+1,(x-1)*n)
        ans=(ans+((x-1)*n)-1)
        ans=ans%((x-1)*n)
        ans=ans/(x-1)
        ans=int(ans)
    print(ans)