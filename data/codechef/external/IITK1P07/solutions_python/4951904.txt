for i in range(input()):
	x,m,n = map(int,raw_input().split());
	if x == 1:
		print (m+1) % n
		continue;
		
	mod = n * (x - 1)
	
	ans = (pow(x,m+1,mod) + mod - 1) % mod
	
	print ans/(x-1)
	