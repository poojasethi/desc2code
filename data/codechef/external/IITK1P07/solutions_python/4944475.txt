def modulo(a,c,b):
    x=1
    y=a
    while c>0:
        if c%2!=0:
            x=(x*y)%b
        y=(y*y)%b
        y%=b
        c=int(c/2)
    return (x-1)%b
t=int(raw_input())
for i in range(t):
    a,b,c=map(int,raw_input().split(" "))
    if a==1:
        g=((b+1)%c)
    else:
        g=modulo(a,b+1,(a-1)*c)
        g+=(a-1)*c
        g%=(a-1)*c
        g=g/(a-1)
        g=int(g)
    print(g)
