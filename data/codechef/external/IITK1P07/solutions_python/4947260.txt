def powMod(a,b,m):
	if(b==0) : return 1
	if(b==1) : return a%m
	if(b%2) : return (a*powMod(a*a%m, b/2, m))%m
	else : return powMod(a*a%m, b/2, m)
t = int(raw_input())
while(t):
	t-=1
	inp = raw_input().split(' ')
	x = int(inp[0])
	m = int(inp[1])
	n = int(inp[2])
	if(x==1) : print (m+1)%n
	else : print ((powMod(x,m+1,n*(x-1))-1+n*(x-1))%(n*(x-1)))/(x-1)