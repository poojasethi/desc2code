t=int(input())
for i in range(t):
	x, m, n = map(int,raw_input().split())
	if x==1:
		print (m+1)%n
	else:	
		n=n*(x-1)	
		a=pow(x,m+1,n)
		a=(a+n-1)%n	
		print a/(x-1)