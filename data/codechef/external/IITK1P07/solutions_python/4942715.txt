def main():
    t=int(input())
    while t>0:
        t=t-1
        x,m,n=map(int,raw_input().split())
        if x==1:
            print (m+1)%n
        else:
            temp=(x-1)*n
            s=pow(x,m+1,temp)
            s=(s-1+(temp))%temp
            s/=(x-1)
            print s
    return 0
main()
