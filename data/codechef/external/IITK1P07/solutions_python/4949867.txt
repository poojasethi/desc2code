t=input()
while t:
    xx=raw_input()
    y=xx.split()
    x=int(y[0])
    m=int(y[1])
    n=int(y[2])
    if x==1: print (m+1)%n
    else:
        print ((pow(x,m+1,(x-1)*n)-1)%((x-1)*n))/(x-1)
    t-=1