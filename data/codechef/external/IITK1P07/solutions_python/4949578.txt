test_cases = int(input())
for i in range(test_cases):
	x,m,n = map(int,raw_input().split())
	if x == 1:
		result = (m+1)%n
	else :
		temp = n*(x-1)
		result = ((pow(x,m+1,temp) - 1 + temp)%temp)/(x-1)
	print(result)
