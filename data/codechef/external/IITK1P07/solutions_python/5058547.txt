t=input()
t=int(t)
while t:
	t=t-1
	x,m,n=raw_input().split()
	x=int(x)
	m=int(m)
	n=int(n)
	if(x==1):
		print (m+1)%n
	else:
		n=n*(x-1)
		y=(pow(x,m+1,n)-1)%n
		print y/(x-1)