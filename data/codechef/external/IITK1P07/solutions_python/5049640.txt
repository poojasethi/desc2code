for _ in range(input()):
    x,m,n=map(int,raw_input().split())
    if x==1: print (m+1)%n;
    else:
        print ((pow(x,m+1,(x-1)*n)-1+(x-1)*n)%((x-1)*n))/(x-1)