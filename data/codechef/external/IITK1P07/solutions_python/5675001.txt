t=(int)(input())
for i in range (t):
    x,m,n=raw_input().split()
    x=int(x)
    m=int(m)
    n=int(n)
    if(x==1):
        print (m+1)%n
    else:
        n=n*(x-1)
        z=pow(x,m+1,n)
        y=(z-1+n)%n
        print (y/(x-1))