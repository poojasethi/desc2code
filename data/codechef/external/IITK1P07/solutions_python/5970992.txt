

test_cases = int(raw_input())

while(test_cases):
	#we need to calculate (a/b)%c
	#also equal to (a%bc)/b
	#here a = x^(m+1) - 1, b= x-1 and c = n
	values = raw_input().split()
	x = int(values[0])
	m = int(values[1])
	n = int(values[2])

	if(x==1):
		print (m+1)%n
	else:
		newmod = n*(x-1)
		solution = pow(x, m+1, newmod) -1
		solution = (solution+newmod)%newmod;
		solution = solution/(x-1)
		print solution


	test_cases-=1

