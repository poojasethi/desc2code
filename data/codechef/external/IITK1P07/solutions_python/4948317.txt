t = input()
while t>0:
    t-=1
    l=raw_input()
    z=l.split(" ")
    x = int(z[0])
    m = int(z[1])
    n = int(z[2])
    if x==1:
        print (m+1)%n
    else:
        n = n*(x-1)
        ans = pow(x,m+1,n)-1
        ans=(ans+n)%n
        ans/=x-1
        print ans

        
    
