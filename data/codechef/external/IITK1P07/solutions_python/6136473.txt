
# your code goes here
def modexpo(x,m,n):
    temp=x%n
    ans=1
    while(m>0):
        if((m%2)==1):
            ans=(ans*temp)%n
        temp=(temp*temp)%n
        m=m/2
    return ans


t=int(input())
while t>0 :
    t=t-1
    x,m,n = map(int, raw_input().split())
    if x==1 :
        answer=(m+1)%n
    else :
        n=n*(x-1)
        answer=modexpo(x,m+1,n)
        answer=(answer-1+n)%n
        answer=answer/(x-1)
    print answer
