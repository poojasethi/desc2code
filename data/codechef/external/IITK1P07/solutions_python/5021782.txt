t=input()
for i in range(0,t):
    x,m,n=list(map(lambda x:int(x),raw_input().split()))
    if(x==1):
        print (m+1)%n
    else:
        n=n*(x-1)
        z=pow(x,m+1,n)
        y=(z-1+n)%n
        print (y/(x-1)) 