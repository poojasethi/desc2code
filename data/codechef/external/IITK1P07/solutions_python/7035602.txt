t=int(raw_input())
for i in range(0,t):
     x,m,n=map(long,raw_input().split())
     if x==1:
        print (m+1)%n
     else:
         n=n*(x-1)
         ans=pow(x,m+1,n)-1
         ans=(ans+n)%n
         print ans/(x-1)
