for i in xrange(input()):
	x,m,n=map(int,raw_input().split())
	if x==1:
		print (m+1)%n
	else:
		n*=(x-1)
		tmp=pow(x,m+1,n)
		res=(tmp-1+n)%n
		res/=(x-1)
		print res