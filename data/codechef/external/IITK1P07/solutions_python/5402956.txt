
def pwr(x,n,mod):
	if n==0:
		return 1
	temp=pwr(x,n/2,mod)
	temp=(temp*temp)%mod
	if n%2==1:
		temp=(temp*x)%mod
	return temp
t=int(raw_input())
while t:
	t-=1	
	x,m,n=[int(i) for i in raw_input().split()]
	# print x
	
	if x==1:
		print (m+1)%n
		continue
	den = x-1
	mod = n*(den)
	num = pwr(x,m+1,mod)
	num=num-1
	num=num%mod
	# print mod
	# print num,den
	if num<0:
		num=num+mod
	print num/den
	