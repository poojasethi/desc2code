# your code goes here
t=input()
for i in range(t) :
	x,m,n=map(int,raw_input().split())
	if x==1 :
		print (m+1)%n
	else :
		newmod=n*(x-1)
		z=(pow(x,m+1,newmod)-1+newmod)%newmod
		print z/(x-1)