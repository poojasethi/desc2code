t=input()
while t:
    x,m,n=raw_input().split()
    x=int(x)
    m=int(m)
    n=int(n)
    if (x==1):
        print (m+1)%n
    else:
        n=n*(x-1)
        p=pow(x,m+1,n)-1;
        p=(p+n)%n
        print p/(x-1)
    t=t-1
