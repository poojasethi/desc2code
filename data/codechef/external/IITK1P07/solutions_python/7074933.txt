t=int(raw_input())
while(t):
    t=t-1
    x,m,n=map(int,raw_input().split())
    if x==1:
        print(int((m+1)%n))
    else:
        n=n*(x-1)
        ans=pow(x,m+1,n)-1
        ans=(ans+n)%n
        print(int(ans/(x-1)))