# your code goes here

t = input()
t = int(t)

for i in range (t):
	x, m, n = raw_input().split()
	x = int(x)
	m = int(m)
	n = int(n)
	if(x == 1):
		ans = (m+1)%n
		print ans
		continue
	
	n = n*(x - 1)
	ans = pow(x, m+1, n)
	ans = ans + n - 1
	ans = ans%n
	
	ans = ans/(x - 1)
	
	print ans
	
