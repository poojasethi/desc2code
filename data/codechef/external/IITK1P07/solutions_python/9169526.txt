T = int(raw_input())
for t in range(T):
	x,m,n=map(int,raw_input().split())
	if x == 1:
		print (m+1)%n
	else:
		n=n*(x-1)
		res = (pow(x, m+1, n)-1)
		res = (res+n)%n
		print int(res/(x-1))