t=raw_input()
t=int(t)
while t:
	x,m,n=raw_input().split()
	x=int(x)
	m=int(m)
	n=int(n)
	ans=0
	if(x==1):
		ans=(m+1)%n
	else:
		ans=pow(x,m+1,n*(x-1))-1+n*(x-1)
		ans=ans%(n*(x-1))
		ans=ans/(x-1)
	print (ans)
	t=t-1 