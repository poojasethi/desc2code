import math
t= input()
t=int(t)

while (t > 0):
	t=t-1
	z = raw_input()
	z=z.split()
	x = int(z[0])
	m =int(z[1])
	n=int(z[2])
	if (x==1):
		print (m+1)%n
	else:
		n=n*(x-1)
		powx = pow(x,m+1,n)-1
		powx= (powx+n)%n
		print powx/(x-1)


	
