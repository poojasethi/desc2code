t=int(raw_input(""))
while t>0:
    t=t-1
    x,m,n=map(int, raw_input().split());
    if x==1:
        print (m+1)%n
    else:
        n=n*(x-1)
        y=pow(x,m+1,n)-1;
        y=(y+n)%n;
        print y/(x-1)
