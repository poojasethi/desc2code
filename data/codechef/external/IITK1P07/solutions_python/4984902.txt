t=int(input())
 
def pow(a,b,mod):
    x=1
    y=a
    while b!=0:
        if b&1:
            x=x*y
        x=x%mod
        y=y*y
        y=y%mod
        b=b>>1
    return x
 
for i in range(0,t):
    x,m,n=map(int,raw_input().split())
    if x==1:
        ans=(m+1)%n
        ans=int(ans)
    else:
        ans=pow(x,m+1,(x-1)*n)
        ans=(ans+((x-1)*n)-1)
        ans=ans%((x-1)*n)
        ans=ans/(x-1)
        ans=int(ans)
    print(ans) 