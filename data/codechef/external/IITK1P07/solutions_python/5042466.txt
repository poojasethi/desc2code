# Karan Singh
# (a/b)%c means c = c * b
#  y = (a%c)/b 
#  y =  (y + n)%n

t = input()
while t>0 :
	t = t - 1
	x,m,n=map(int,raw_input().split())
	if(x==1):
		print((m+1)%n)
	else:
		n = n*(x-1) 
		y = (pow(x,m+1,n)-1)/(x-1)
		print(y+n)%n
		