#include<bits/stdc++.h>
#define MOD 215372682525
long long int power[100001]={0};
long long int pre[100001]={0};
using namespace std;
int main()
{
long long int first=0,second=0,a,d,n,x,sum=0,t,i=0;
scanf("%lld",&t);
while(t--)
{
scanf("%lld %lld %lld %lld",&a,&d,&n,&x);
long long int ans=0;
power[0]=1;
pre[0]=0;				//contains (id)%MOD
for(i=1;i<=n;i++)
{
	power[i]=((power[i-1]%MOD)*(x%MOD))%MOD;		//contains power of x from 1 to n
//	pre[i]=(i*d)%MOD;
}
for(i=0;i<=n;i++)
{
	first=(((a)*(power[n-i]))%MOD);
	second=((((d)*(power[n-i]))%MOD)*(i))%MOD;
	sum=sum+((first)+(second))%MOD;
	sum%=MOD;
}
printf("%lld\n",sum);
sum=0;

}
return 0;
}

