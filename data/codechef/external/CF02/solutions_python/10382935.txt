#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
using namespace std;
int matrix[3009][3009];
int LCSfind(string a, string b)
{
    int len1,len2;
    len1=a.size();
    len2=b.size();
    //int matrix[len1+1][len2+1];
    register int i,j;
    for(i=0; i<=len1; i++)
        matrix[i][0]=0;
    for(i=0; i<=len2; i++)
        matrix[0][i]=0;
    for(i=1; i<=len1; i++)
        for(j=1; j<=len2; j++)
        {
            if(a[i-1]==b[j-1])
                matrix[i][j]=matrix[i-1][j-1]+1;
            else matrix[i][j]=max(matrix[i-1][j],matrix[i][j-1]);
        }
    return  matrix[len1][len2];
}

int main()
{
    int cas;
    scanf("%d",&cas);
    while(cas--)
    {
        string a="",b="";
        char p;
        int k,tem;
        scanf("%d",&k);
        register int i,j;
        getchar();
        for(i=0; i<k; i++)
        {
            scanf("%c",&p);
            scanf("%d",&tem);
            for(j=0; j<tem; j++)
                a+=p;
        }
        //cout<<a<<endl;
        scanf("%d",&k);
        getchar();
        for(i=0; i<k; i++)
        {
            scanf("%c",&p);
            scanf("%d",&tem);
            for(j=0; j<tem; j++)
                b+=p;
        }
        //cout<<b<<endl;
        int longes=LCSfind(a,b);
        //printf("%d\n",longes);
        printf("%d\n",(a.size()-longes)*2+(b.size()-longes));
    }

    return 0;
}