#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<map>
#include<set>
#include<queue>
#include<utility>
#include<cstring>
#include<cmath>
#define LL long long int
#define mod 1000000007
#define vi vector<int>
#define vvi vector < vi >
#define pii pair<int,int>
#define all(c) c.begin(),c.end()
#define sf(x) scanf("%d",&x);
#define sl(x) scanf("%lld",&x);
#define sf2(x,y) scanf("%d%d",&x,&y);
#define mem(a,val) memset(a,val,sizeof(a))
#define nl printf("\n");
#define pb push_back
#define mp make_pair
//#define f first
//#define s second
#define cf I64
using namespace std;
LL p[100005],q[100005],s[100005],cnt[100005];
int main()
{	LL t,i,j,n,m,ans,sum=0,n1,n2,n3,l,r,mid;
	sl(t);
	while(t--)
	{	sl(n1);
		sum=0;
		for(i=0;i<n1;i++) sl(p[i]);
		sl(n2);
		for(i=0;i<n2;i++) sl(q[i]);
		sl(n3);
		for(i=0;i<n3;i++) sl(s[i]);
		mem(cnt,0);
		for(j=0;j<n2;j++)
		{	//Binary search
			l=j;r=n3-1;
			while(l<r)
			{	mid=(l+r)/2;
				if(s[mid]>=q[j]) r=mid;
				else l=mid+1;
			}
			if(l<n3&&s[l]>=q[j])
				cnt[j]+=n3-l;
		}
		for(i=n2-2;i>=0;i--)
			cnt[i]+=cnt[i+1];
		/*for(i=0;i<n2;i++)
			printf("%d ",cnt[i]);
		nl;*/	
		for(j=0;j<n1;j++)
		{	//Binary search
			l=j;r=n2-1;
			while(l<r)
			{	mid=(l+r)/2;
				if(q[mid]>=p[j]) r=mid;
				else l=mid+1;
			}
			if(l<n2&&q[l]>=p[j])
				sum+=cnt[l];
		}
		printf("%lld\n",sum);	
	}
	return 0;
}
