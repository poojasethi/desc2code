#include<bits/stdc++.h>
using namespace std;
#define maxn 100005
typedef long long int ll;
ll P[maxn],Q[maxn],R[maxn],tree[4*maxn],freq[maxn];
map<ll,ll> m;
ll read(ll idx)
{
    ll cnt=0;
    while(idx>0)
    {
        cnt+=tree[idx];
        idx-=(idx&-idx);
    }
    return cnt;
}

void update(ll pos)
{
    while(pos<3*maxn)
    {
        tree[pos]+=1;
        pos+=(pos&-pos);
    }
}

int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        int p,q,r;
        scanf("%d",&p);
        for(int i=0;i<p;i++){
            scanf("%lld",&P[i]);
            m[P[i]]=1;
        }
        scanf("%d",&q);
        for(int i=0;i<q;i++) {
            scanf("%lld",&Q[i]);
            m[Q[i]]=1;
        }
        scanf("%d",&r);
        for(int i=0;i<r;i++){
            scanf("%lld",&R[i]);
            m[R[i]]=1;
        }
        int cnt=1;
        for(map<ll,ll>::iterator it=m.begin();it!=m.end();it++)
            it->second=cnt++;
        for(int i=0;i<p;i++){
            P[i]=m[P[i]];
        }
        for(int i=0;i<q;i++)
        {
            Q[i]=m[Q[i]];
        }
        for(int i=0;i<r;i++)
            R[i]=m[R[i]];
        int i;
        for(i=r-1;i>=min(r-1,q-1);i--)
        {
            update(R[i]);
        }
        i++;
        while(i>=0)
        {
            ll cnt=read(Q[i]-1);//stictly smaller
            freq[i]=r-i-cnt;//greater than or equal to
            if(i==0)
                break;
            update(R[i-1]);
            i--;
        }
        memset(tree,0,sizeof(tree));
        ll ans=0;
        for(i=0;i<min(p,q);i++)
        {
            update(P[i]);
            int cnt=read(Q[i]);
            ans+=cnt*freq[i];
        }
        while(i<q)
        {
            int cnt=read(Q[i]);
            ans+=cnt*freq[i];
            i++;
        }
        printf("%lld\n",ans);
        memset(tree,0,sizeof(tree));
        memset(freq,0,sizeof(freq));
        m.clear();
    }
}
