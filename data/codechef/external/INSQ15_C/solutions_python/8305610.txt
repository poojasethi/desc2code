#include<bits/stdc++.h>
#define ll long long
using namespace std;

ll finalans=0,n,a,b,k,arr[1000],niceee[1000];
vector<ll> vec1[1000];

void func(ll ind,ll final,ll value,ll taken)
{
	if(ind==final)
	{
		vec1[taken].push_back(value);
		return;
	}

	func(ind+1,final,value,taken);
	func(ind+1,final,value+niceee[ind],taken+1);
}

void func2(ll ind,ll final,ll value,ll taken)
{
	if(ind==final)
	{
		for (int i = 0 ; i+taken <= k; ++i)
		{
			vector<ll>::iterator ans1=lower_bound(vec1[i].begin(),vec1[i].end(),a-value);
			vector<ll>::iterator ans2=upper_bound(vec1[i].begin(),vec1[i].end(),b-value);
			finalans+=(ll)(ans2-ans1);
		}
		return;
	}

	func2(ind+1,final,value,taken);
	func2(ind+1,final,value+niceee[ind],taken+1);
}

int main()
{
	cin>>n>>k>>a>>b;

	for(int i = 0; i < n; ++i)
	{
		cin>>arr[i];
		niceee[i]=1;
		ll temp=arr[i];

		for(int j = 2; j*j<=temp ; ++j)
		{
			if(temp%j==0)
			{
				niceee[i]*=j;

				while(temp%j==0)
					temp/=j;
			}
		}

		if(temp>1)
			niceee[i]*=temp;
		if(niceee[i]==1)
			niceee[i]=0;
	}

	func(0,n/2+1,0,0);

	for (int i = 0; i < 50; ++i)
		sort(vec1[i].begin(),vec1[i].end());

	func2(n/2+1,n,0,0);
	cout<<finalans<<endl;
	return 0;
}