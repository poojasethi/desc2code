#include<bits/stdc++.h>
#define s(n) scanf("%d",&n)
#define ll long long
#define pb push_back
 using namespace std ;

int calc(int num){
   int ans = 1,i;
   int nn = num ;
   for(i=2;i*i<=nn;++i){
      if(num%i==0){
         ans*=i;
         while(num%i==0)
            num/=i;
      }
   }
   if(num>1)
        ans*=num;
   return  ans ;
}

int main(){

int t,n,i,j,k,a,b,x,y;

cin>>n>>k>>a>>b;
int ele ;
int ar[n+1];
for(i=1;i<=n;++i)
    cin>>ar[i];

vector<int>nice;
for(i=1;i<=n;++i){
  nice.pb(calc(ar[i]));
}

vector<int>v1,v2;
for(i=0;i<n/2;++i){
   v1.pb(nice[i]);
}
for(i=n/2;i<n;++i)
    v2.pb(nice[i]);

vector<ll>all1[17],all2[17];

for(i=0;i<(1<<(v1.size()));++i){
    ll sum = 0;
    int ct = 0;
    for(j=0;j<v1.size();++j)
        if(i&(1<<j)){
            ct++;
            sum+=v1[j];
        }

    all1[ct].pb(sum);
}

for(i=0;i<(1<<(v2.size()));++i){
    ll sum = 0;
    int ct = 0;
    for(j=0;j<v2.size();++j)
        if(i&(1<<j)){
           ct++;
            sum+=v2[j];
        }
    all2[ct].pb(sum);
}

for(i=0;i<=v2.size();++i)
sort(all2[i].begin(),all2[i].end());

ll an = 0;
for(i=0;i<=v1.size();++i){
   for(j=0;j<=v2.size();++j){
    if(i+j>k)
        continue;
    for(x=0;x<all1[i].size();++x){

        int lft = -1,ri = -1;

        int lo = 0;
        int hi = all2[j].size()-1;

   while(lo<=hi){
      int mi = (lo+hi)/2;
      if(all1[i][x]+all2[j][mi]<a)
        lo = mi+1;
      else if(all1[i][x]+all2[j][mi]>b)
        hi = mi - 1;
      else{
        lft = mi ;
        hi = mi-1;
      }
   }

   lo = 0;
   hi = all2[j].size()-1;

   while(lo<=hi){
      int mi = (lo+hi)/2;
      if(all1[i][x]+all2[j][mi]<a)
        lo = mi+1;
      else if(all1[i][x]+all2[j][mi]>b)
        hi = mi - 1;
      else{
        ri = mi ;
        lo = mi+1;
      }
   }

   if(lft!=-1){
      an+=(ri-lft+1);
   }
}}}

cout<<an<<endl;

return 0;
}
