#include<bits/stdc++.h>
using namespace std;

#define S(a) scanf("%d",&a)
#define S2(a,b) scanf("%d%d",&a,&b)
#define SL(a) scanf("%lld",&a)
#define SL2(a,b) scanf("%lld%lld",&a,&b)
#define r5 100005
#define r6 1000055
#define f(i,a,b) for(i=a;i<b;i++)
#define P(a) printf("%d",a)
#define PL(a) printf("%lld",a)
#define pb push_back
#define nl printf("\n")
#define X first
#define Y second
#define DEBUG(x) cout<<">value ("<<#x<<") : "<<x<<endl;
typedef long long int lli;
typedef pair<int,int> ii;
typedef vector<int> vi;
typedef long long ll;
typedef long long unsigned int llu;

#define getcx getchar
inline void inp(int &n)
{
   n=0;
   int ch=getcx();
   int sign=1;
   while(ch < '0' || ch > '9'){
		if(ch=='-')
			sign=-1;
		ch=getcx();
   }
   while(ch >= '0' && ch <= '9')
    	n = (n<<3) + (n<<1) + ch - '0', ch = getcx();
   n=n*sign;
}


int arr[100];
int niceness[100];
vector<int> rec1[100];
vector<int> rec2[100];

void generate1(int st, int en){
    int sz = en-st+1;
    for(int subset=0; subset<(1<<sz); subset++){
        int x=0,sum=0;
        for(int i=0;i<sz;i++){
            if(subset&(1<<i)){
                sum+=niceness[i+st];
                x++;
                //cout<<i<<" ";
            }
        }
//        nl;
//        DEBUG(x);
        rec1[x].push_back(sum);
    }
//    cout<<"first\n";
//    for(int i=0;i<=sz;i++){
//        cout<<"for size : "<<i<<endl;
//        for(int j=0;j<rec1[i].size();j++){
//            cout<<rec1[i][j]<<" ";
//        }
//        nl;
//    }
}
void generate2(int st, int en){
    int sz = en-st+1;
    for(int subset=0; subset<(1<<sz); subset++){
        int x=0,sum=0;
        for(int i=0;i<sz;i++){
            if(subset&(1<<i)){
                sum+=niceness[i+st];
                x++;
            }
        }
        rec2[x].push_back(sum);
    }
//    cout<<"second\n";
//    for(int i=0;i<=sz;i++){
//        cout<<"for size : "<<i<<endl;
//        for(int j=0;j<rec2[i].size();j++){
//            cout<<rec2[i][j]<<" ";
//        }
//        nl;
//    }
}

int main(){
    int n,k,a,b,i;
    //scanf("%d%d%d%d",&n,&k,&a,&b);
    inp(n);inp(k);inp(a);inp(b);
    f(i,0,n){
        inp(arr[i]);
        niceness[i]=1;
        int x=arr[i];
        for(int j=2;j*j<=x;j++){
            if(x%j == 0){
                niceness[i]*=j;
                while(x%j == 0)
                    x=x/j;
            }
        }
        if(x>1)
            niceness[i]*=x;
    }

    int mid = (n-1)/2;
    generate1(0,mid);
    generate2(mid+1,n-1);

    for(i=0;i<=(n-mid-1);i++){
        sort(rec2[i].begin(), rec2[i].end());
    }
    ll ans=0;
    for(i=0;i<=mid+1;i++){
        for(int j=0;j<rec1[i].size();j++){
            int upto = min(k-i,(n-mid-1));
            for(int k=0;k<=upto;k++){
                int up = upper_bound(rec2[k].begin(), rec2[k].end(), b-rec1[i][j]) - rec2[k].begin();
                int low = lower_bound(rec2[k].begin(), rec2[k].end(), a-rec1[i][j]) - rec2[k].begin();
                ans = ans + (up-low);
                //cout<<i<<" "<<k<<" "<<rec1[i][j]<<" "<<ans;nl;
            }
        }
//        DEBUG(i);
//        DEBUG(ans);
    }
    printf("%lld",ans);
    return 0;
}
