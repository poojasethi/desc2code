#include <bits/stdc++.h>
using namespace std;


#ifndef ONLINE_JUDGE
#   define DEBUG
#   define TRACE
#else
//#   define NDEBUG
#endif

typedef long long ll;
typedef vector<int> vi;
typedef vector<ll> vll;
typedef pair <int, int> pii;
typedef pair <ll, ll> pll;
typedef vector<pii> vpii;
typedef vector<pll> vpll;

#define MOD 1000000007
#define pb push_back
#define mp make_pair
#define fi first
#define sc second
#define gc getchar_unlocked

#ifdef TRACE
    #define trace(x)            cerr<<x<<endl;
    #define trace1(x)           cerr<<__FUNCTION__<<":"<<__LINE__<<": "#x" = "<<x<<endl;
    #define trace2(x,y)         cerr<<__FUNCTION__<<":"<<__LINE__<<": "#x" = "<<x<<" | "#y" = "<<y<<endl;
    #define trace3(x,y,z)       cerr<<__FUNCTION__<<":"<<__LINE__<<": "#x" = "<<x<<" | "#y" = "<<y<<" | "#z" = "<<z<<endl;
    #define trace4(a,b,c,d)     cerr<<__FUNCTION__<<":"<<__LINE__<<": "#a" = "<<a<<" | "#b" = "<<b<<" | "#c" = "<<c<<" | "#d" = "<<d<<endl;
    #define trace5(a,b,c,d,e)   cerr<<__FUNCTION__<<":"<<__LINE__<<": "#a" = "<<a<<" | "#b" = "<<b<<" | "#c" = "<<c<<" | "#d" = "<<d<<" | "#e" = "<<e<<endl;
    #define trace6(a,b,c,d,e,f) cerr<<__FUNCTION__<<":"<<__LINE__<<": "#a" = "<<a<<" | "#b" = "<<b<<" | "#c" = "<<c<<" | "#d" = "<<d<<" | "#e" = "<<e<<" | "#f" = "<<f<<endl;
#else
    #define trace(x)
    #define trace1(x)
    #define trace2(x,y)
    #define trace3(x,y,z)
    #define trace4(a,b,c,d)
    #define trace5(a,b,c,d,e)
    #define trace6(a,b,c,d,e,f)
#endif
void s(ll &x)
{
	ll c = gc();
	x = 0;
	for(;(c<48 || c>57);c = gc());
	for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
}
void si(int &x)
{
	int c = gc();
	x = 0;
	for(;(c<48 || c>57);c = gc());
	for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
}
ll lpow(ll base, ll exp) {
	if (exp == 0)
		return 1;
	ll x = lpow(base, exp/2);
	x = (x * x);

	if (exp % 2)
		x =  x * base;
	return x;
}
ll n, k , a, b;
ll ar[37];
vector <vector<ll> > n1;
vector <vector <ll> > n2;

ll nice(ll v) {
	ll p = 1;
	for (ll i=2; i*i <= v; i++) {
		if (v % i == 0)
			p *= i;
		while (v % i == 0)
			v /= i;
	}
	if (v != 1)
		p = p*v;
	return p;
}

int flg  = 0;
void rec(ll val, ll l, ll r, ll noe) {
	if (l >  r )  {
		if (flg == 0)
			n1[noe].pb(val);
		else
			n2[noe].pb(val);
		return ;
	}
	rec (val + ar[l], l + 1, r, noe+1);
	rec (val, l+1, r, noe);
}

int main () {

	s(n); s(k); s(a); s(b);
	for (int i = 0; i < n; i++) {
		s(ar[i]);
		ar[i] = nice(ar[i]);
	}
	n1.resize(n+1);
	n2.resize(n+1);
	
	rec(0, 0, n/2, 0);
	flg = 1;
	rec(0, n/2+1, n-1, 0);	
	

	for (int i = 0; i <= n; i++) {
		sort(n1[i].begin(), n1[i].end() );
		sort(n2[i].begin(), n2[i].end() );
	}
	ll ans = 0;

	for (int i = 0; i <= k; i++) {
		int sz = n1[i].size();
		vector<ll> :: iterator itl, itu;
		itl = lower_bound (n1[i].begin(), n1[i].end(), a);
		itu = lower_bound (n1[i].begin(), n1[i].end(), b+1);
		ans += itu - itl;
		
		for (int m = 0; m < sz; m++) {
			ll b2 = b - n1[i][m];
			ll a2 = a - n1[i][m];
			for (int j = 1; j <= k - i; j++) {
				itl = lower_bound (n2[j].begin(), n2[j].end(), a2);
				itu = lower_bound (n2[j].begin(), n2[j].end(), b2+1);
				ans += itu - itl;
			}
		}
	}
	
	printf ("%lld\n", ans);

	return 0;
}
