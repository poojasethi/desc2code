#include<bits/stdc++.h>
#define pb push_back
#define ll long long
using namespace std;
int main()
{
	ll i,n,k,l,x,y,u,pro,mid,midm,j,size_subset,temp,sz,sum,count,ans,lowerbd,upperbd,p,low,high;
	
	scanf("%lld%lld%lld%lld",&n,&k,&l,&u);
	vector<ll> v1[(n/2)+5],v2[(n/2)+5];
	ll a[n+5],nice[n+5];
	for(i=0;i<n;++i)
	{
		scanf("%lld",&a[i]);
		temp=a[i];
		pro=1;	//prime divisors of a[i]
		if(temp%2==0)
		{
			pro*=2;
			while(!(temp&1))
			{
				temp/=2;
			}
		}
		for(j=3;j*j<=temp;j+=2)
		{
			if(temp%j==0)
			{
				pro*=j;
				while(temp%j==0)
				{
					temp/=j;
				}
			}
		}
		if(temp>2)
		{
			pro*=temp;
		}
		nice[i]=pro;
	}
	midm=n/2;
	size_subset=1<<midm;
	for(i=0;i<size_subset;++i)
	{
		
		sum=0;count=0;
		for(j=0;j<midm;++j)
		{
			if(i&(1<<j))
			{
				sum+=nice[midm-j-1];
				++count;
			}
		}
		if(sum||i==0)
		v1[count].pb(sum);
		
	}
	size_subset=1<<(n-midm);
	for(i=0;i<size_subset;++i)
	{
		
		sum=0;count=0;
		for(j=0;j<n-midm;++j)
		{
			if(i&(1<<j))
			{
				sum+=nice[n-j-1];
				++count;
			}
		}
		if(sum||i==0)
		v2[count].pb(sum);
		
	}
	for(i=0;i<=n-midm;++i)
	{
		sort(v2[i].begin(),v2[i].end());
	}
/*
 
	for(i=0;i<=mid;++i)
	{
		sz=v1[i].size();
		for(j=0;j<sz;++j)
		{
			printf("%d  ",v1[i][j]);
		}
		printf("\n");
	}
 
	
	for(i=0;i<=n-mid;++i)
	{
		sz=v2[i].size();
		for(j=0;j<sz;++j)
		{
			printf("%d  ",v2[i][j]);
		}
		printf("\n");
	}
	*/
	ans=0;
	for(i=0;i<=midm;++i)
	{
		sz=v1[i].size();
		for(j=0;j<sz;++j)
		{
			lowerbd=l-v1[i][j];
			upperbd=u-v1[i][j];
			for(p=0;p+i<=k&&(p<=n-midm);++p)
			{
				
				int upper = upper_bound(v2[p].begin(), v2[p].end(), upperbd) - v2[p].begin();
				int lower = lower_bound(v2[p].begin(), v2[p].end(), lowerbd) - v2[p].begin();
				ans = ans + (upper -lower);
		//		printf("%lld %lld\n",lower,upper);
				/*
				low=0;
				high=v2[p].size()-1;
				while(low<high)
				{
					mid=(low+high)>>1;
					if(v2[p][mid]>=lowerbd)
					{
						high=mid;
					}
					if(v2[p][mid]<lowerbd)
					{
						low=mid+1;
					}
				}
				x=low;
				
				
				
				
				
				low=0;
				high=v2[p].size()-1;
				while(low<high)
				{
					mid=(low+high+1)>>1;
					if(v2[p][mid]>upperbd)
					{
						high=mid-1;
					}
					if(v2[p][mid]<=upperbd)
					{
						low=mid;
					}
				}
				y=low;
				if(x<=y&&v2[p][x]>=lowerbd&&v2[p][y]<=upperbd)
				{
					ans+=(y-x+1);
		//			printf("%d %d  %d  %d\n",i, p,x,y);
				}
				*/
			}
		}
	}
	printf("%lld\n",ans);
	return 0;
} 