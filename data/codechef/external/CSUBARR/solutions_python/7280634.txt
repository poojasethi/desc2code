#include <bits/stdc++.h>
using namespace std;

const int N = 1e5+10;

int n, a[N], bit[N];
pair<int,int> tmp[N];

bool bySecond(pair<int,int> a, pair<int,int> b){
    return (a.second < b.second);
}

void modify(int pos, int v){
    for(int i = pos; i <= n; i += (i&-i)){
        bit[i] += v;
    }
}

int query(int pos){
    int ans = 0;
    for(int i = pos; i >= 1; i -= (i&-i)){
        ans += bit[i];
    }
    return ans;
}

int main(){
    long long k;
    scanf("%d %lld", &n, &k);
    for(int i = 1; i <= n; i++){
        scanf("%d", &tmp[i].first);
        tmp[i].second = i;
    }
    // Compression ==================================
    sort(tmp+1,tmp+n+1);
    for(int i = 1; i <= n; i++) tmp[i].first = i;
    sort(tmp+1,tmp+n+1,bySecond);
    for(int i = 1; i <= n; i++) a[i] = tmp[i].first;
    // ==============================================
    long long ans = 0LL, qtd = 0LL;
    for(int left = 1, right = 1; right <= n; right++){
        qtd += query(n)-query(a[right]);
        modify(a[right],1);
        while(left < right){
            int take = query(a[left]-1);
            if(qtd-take >= k){
                qtd -= take;
                modify(a[left++],-1);
            }else break;
        }
        if(qtd >= k) ans += left;
    }
    printf("%lld\n", ans);

    return 0;
}