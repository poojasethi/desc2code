#include<bits/stdc++.h>
using namespace std;
const int maxn = 500001;
 int n, A[maxn];
 int st[4 * maxn];
int gcd ( int a, int b )
{
  if ( a==0 ) return b;
  return gcd ( b%a, a );
}
void merge(int &p, int &l, int &r) {
  		p = gcd(l,r);
  	}

void buildst(int idx,int ss,int se){
		if( ss == se ){
 			st[idx] = A[ss];
 			return;
		}
		int mid = (ss+se) >> 1;
      	buildst(2*idx, ss, mid);
		buildst(2*idx+1, mid+1, se);
		merge(st[idx], st[2*idx], st[2*idx+1]);
	}
int query(int idx,int ss,int se,int l,int r){
		if( l > se || r < ss ) return 0;
		if( l <= ss && se <= r ) return st[idx];
		int mid = ( ss + se ) >> 1;
		int L = query(2*idx, ss, mid, l, r);
		int R = query(2*idx+1, mid+1, se, l, r);
		int res;
      	merge(res, L, R);
      	return res;
	}
int maxgcd(int l,int r,int k)
{
	int max=0;
	
	while(r<=n)
	{
		if(l==r)
			r++;
		if(query(1,1,n,l,r)>=k)
		{
			if((r-l+1)>max)
			max=r-l+1;
			r++;
		}
		else
		l++;
	}
	return max;
}
int main()
{
	int k,i,ans;
	cin>>n>>k;
	for(i=1;i<=n;i++)
	{
		cin>>A[i];
	}
	buildst(1,1,n);
	ans=maxgcd(1,1,k);
	//cout<<ans;
	if(ans>1)
	cout<<ans<<"\n";
	else 
	cout<<"0\n";
	
	return 0;
}