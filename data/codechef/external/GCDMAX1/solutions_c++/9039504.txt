#include<bits/stdc++.h>
#define ll long long
#define sl(a) scanf("%lld",&a);

using namespace std;

ll arr[500001],n,k,pre[500001],suf[500001];

bool chk(ll a)
{
	ll i,j,s,l;
	for(i=1;i<=n;i+=a)
	{
		s=i;
		l=min(n,i+a-1);
		pre[s]=arr[s];
		suf[l]=arr[l];
		for(j=s+1;j<=l;j++)
		{
			pre[j]=__gcd(pre[j-1],arr[j]);
		}
		for(j=l-1;j>=s;j--)
		{
			suf[j]=__gcd(suf[j+1],arr[j]);
		}
	}
	for(i=1;i+a-1<=n;i++)
	{
		if(__gcd(suf[i],pre[i+a-1])>=k)
			return true;
	}
	return false;
}

ll solve()
{
	ll mid,s=0,l=n;
	while(s<l)
	{
		mid=ceil(((double)s+(double)l)/2.0);
		if(chk(mid))
		{
		//	printf("(%lld)",mid);
			s=mid;
		}
		else
		{
			l=mid-1;
		}
	}
	return s;
}

int main()
{
	ll i,a;
	sl(n)
	sl(k)
	for(i=1;i<=n;i++)
	{
		sl(a)
		arr[i]=a;
	}
	printf("%lld",solve());
	return 0;
}
