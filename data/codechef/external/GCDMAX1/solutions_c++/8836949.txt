#include<bits/stdc++.h>
using namespace std;
int a[500005],pre[500005],suff[500005],n,k;
int gcd(int a,int b)
{
	if(b==0)
	return a;
	return gcd(b,a%b);
}
int call(int m)
{
   for(int i=1;i<=n;i+=m)
   {
   	int l=i;
   	int r=min(n,i+m-1);
   	pre[l]=a[l];
   	for(int j=l+1;j<=r;j++)
   	pre[j]=gcd(pre[j-1],a[j]);
   	suff[r]=a[r];
   	for(int j=r-1;j>=l;j--)
   	suff[j]=gcd(suff[j+1],a[j]);
   }
   for(int i=1;i+m-1<=n;i++)
   {
   	if(gcd(suff[i],pre[i+m-1])>=k)
   	return 1;
   }
   return 0;
}
int search()
{
	int l=1;
	int r=n+1;
	while(l<r)
	{
		int mid=(l+r)>>1;
		if(call(mid))
		l=mid+1;
		else
		r=mid;
	}
	return l-1;
}
int main()
{
    scanf("%d%d",&n,&k);
    for(int i=1;i<=n;i++)
    scanf("%d",&a[i]);
    printf("%d",search());
}