#include <bits/stdc++.h>
#define ll long long
#define sc(a) scanf("%lld", &a)
#define pr(a) printf("%lld\n", a)
#define sz 500005

using namespace std;

ll arr[sz], pre[sz], suf[sz];

long long gcd(long long a, long long b)
{
    while (b != 0)
    {
        a %= b;
        a ^= b;
        b ^= a;
        a ^= b;
    }

    return a;
}

bool check(ll len, ll n, ll k)
{
	ll i,j,ct;
	for (i = 0; i < n; i++) {
		if (i%len == 0) {
			pre[i] = arr[i];
		}
		else {
			pre[i] = gcd(arr[i], pre[i-1]);
		}
	}
	for (j = len-1; j < n; j += len) {
		ct = 0;
		for (i = j; ct != len; ct++, i--) {
			if ((i+1)%len == 0) {
				suf[i] = arr[i];
			}
			else {
				suf[i] = gcd(arr[i], suf[i+1]);
			}
		}
	}
/*	cout << len << endl;
	for (i = 0; i < n; i++) {
		cout << pre[i] << " ";
	}
	cout << endl;
	for (i = 0; i < n; i++) {
		cout << suf[i] << " ";
	}
	cout << endl;
*/	
	for (i = 0; i+len-1 < n; i++) {
		if (gcd(suf[i], pre[i+len-1]) >= k) return true;
	}
	return false;
}

int main()
{
	ll mid,st,en,ma,i,j,k,l,m,n;
	sc(n);
	sc(k);
	ma = -1;
	for (i = 0; i < n; i++) {
		sc(arr[i]);
		if (ma < arr[i])
			ma = arr[i];
	}
	if (ma < k) {
		cout << "0\n";
	}
	else {
		st = 1;
		en = n;
		while (en-st > 1) {
			mid = (st+en)/2;
			if (check(mid, n, k)) {
				st = mid;
			}
			else {
				en = mid-1;
			}
		}
		if (check(en, n, k))
			cout << en << endl;
		else
			cout << st << endl;
	}
	
 	return 0;
}
