//============================================================================
// Author      : SHALIN SHAH
// Institution : IIT Hyderabad
//============================================================================

#include <bits/stdc++.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>
#include <limits.h>

using namespace std;

// Input Macros

#define si(x) scanf("%d",&x)
#define sli(x) scanf("%ld",&x)
#define slli(x) scanf("%lld",&x);
//#define sllicf(x) scanf("%I64d",&x);
#define sc(x) scanf("%c",&x);
#define ss(x) scanf("%s",x);
#define sd(x) scanf("%lf",&x);

// Output Macros

#define pi(x) printf("%d",x)
#define pli(x) printf("%ld",x)
#define plli(x) printf("%lld",x)
#define pllicf(x) printf("%I64d",x)
#define pc(x) printf("%c",x)
#define ps(x) printf("%s",x)
#define pd(x) printf("%lf",x)

#define pri(x) printf("%d\n",x)
#define prli(x) printf("%ld\n",x)
#define prlli(x) printf("%lld\n",x)
#define prllicf(x) printf("%I64d\n",x)
#define prc(x) printf("%c\n",x)
#define prs(x) printf("%s\n",x)
#define prd(x) printf("%lf\n",x)

#define bitcount __builtin_popcount
#define gcd __gcd

#define llu long long unsigned int
#define lli long long int
#define li long int
#define fi first
#define se second
#define pb push_back
#define mod 1000000007
#define mp make_pair

#define vi vector<int>
#define vlli vector<long long int>
#define pii pair<int,int>

int a[500010],pre[500010],suf[500010];
int n,k;
bool check(int len)
{
	int i,j;
	for(i=0;i<n;i+=len)
	{
		pre[i]=a[i];
		for(j=i+1;j<min(i+len,n);j++)
		{
			pre[j]=__gcd(pre[j-1],a[j]);
		}
		for(j=min(i+len,n)-1;j>=i;j--)
		{
			if(j==min(i+len,n)-1)
			{
				suf[j]=a[j];
			}
			else
			{
				suf[j]=__gcd(suf[j+1],a[j]);
			}
		}
	}
	int flag=0;
	for(i=0;i<=n-len;i++)
	{
		int temp=__gcd(suf[i],pre[i+len-1]);
		if(temp>=k)
		{
			flag=1;
			break;
		}
	}
	return flag;
}

int bs(int l,int r)
{
	int ans;
	while(l<=r)
	{
		int mid=l+(r-l)/2;
		if(check(mid))
		{
			ans=mid;
			l=mid+1;
		}
		else
		{
			r=mid-1;
		}
	}
	return ans;
}

int main()
{
	//freopen("input.txt","r",stdin);
    //freopen("output.txt","w",stdout);
	int i,j;
	cin>>n>>k;
	int flag=0;
	for(i=0;i<n;i++)
	{
		cin>>a[i];
		if(a[i]>=k)
			flag=1;
	}			
	if(flag==0)
	{
		cout<<"0"<<endl;
		return 0;
	}
	int ans=bs(1,n);
	cout<<ans<<endl;
	return 0;
}