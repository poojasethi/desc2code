#include <iostream>
using namespace std;
int main()
{
	int r,c,i,j,count=0;
	bool jf,esc=false;
	cin>>r>>c;
	char maze[r+1][c],ma[r+1][c];
	for(i=0;i<c;i++)
	cin>>maze[i];
	/*for(i=0;i<r;i++)
		{
		  for(j=0;j<c;j++)
		  {  if(maze[i][j]=='J') cout<<i<<j<<endl;
		}
	}*/
	while(1)
	{
		count++;
		for(i=0;i<r;i++)
		{
		  for(j=0;j<c;j++)
		  {  
			esc=false;
			jf=true;
			//cout<<maze[i][j];
			if(maze[i][j]=='J')
			{
			//	cout<<i<<j;
				if((i+1)==r) break;
				if((i-1)==-1) break;
				if((j+1)==c) break;
				if((j-1)==-1) break;
			}
		  }
		  //cout<<endl;
		  if(maze[i][j]=='J')
		  {
		    if((i+1)==r) {esc=true;jf=false;break;}	
		    if((i-1)==-1) {esc=true;jf=false;break;}
		    if((j+1)==c) {esc=true;jf=false;break;}
		    if((j-1)==-1) {esc=true;jf=false;break;}
		  }
		}
		//cout<<jf<<esc;
		/*for(i=0;i<r;i++)
		{for(j=0;j<c;j++)
		cout<<maze[i][j];
		cout<<endl;
		}*/
		if(!jf) break;
		for(i=0;i<r;i++)
		{for(j=0;j<c;j++)
		  if(maze[i][j]=='J') break;
		 if(j!=c) break;
		}
		if(i==r && j==c) {esc=false;break;}
		//cout<<"out";
		for(i=0;i<r;i++)
		for(j=0;j<c;j++)
		ma[i][j]=maze[i][j];
		for(i=0;i<r;i++)
		for(j=0;j<c;j++)
		{
			if(ma[i][j]=='J')
			{
				if((i+1)<r && ma[i+1][j]=='.') maze[i+1][j]='J';
				if((i-1)>=0 && ma[i-1][j]=='.') maze[i-1][j]='J';
				if((j+1)<c && ma[i][j+1]=='.') maze[i][j+1]='J';
				if((j-1)>=0 && ma[i][j-1]=='.') maze[i][j-1]='J';
				maze[i][j]='K';
			}	
		}
		for(i=0;i<r;i++)
		for(j=0;j<c;j++)
		{
			if(ma[i][j]=='F')
			{
				if((i+1)<r && ma[i+1][j]!='#') maze[i+1][j]='F';
				if((i-1)>=0 && ma[i-1][j]!='#') maze[i-1][j]='F';
				if((j+1)<c && ma[i][j+1]!='#') maze[i][j+1]='F';
				if((j-1)>=0 && ma[i][j-1]!='#') maze[i][j-1]='F';
			}	
		}
	}
	if(esc) cout<<count<<endl;
	else cout<<"IMPOSSIBLE\n";
	return 0;
}