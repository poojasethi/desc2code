#include <stdio.h>
 
int main()
{    
int fall, i, j, R, z, m, x, a[1000][1000];

for(scanf("%d\n",&fall); fall--; printf("%d\n",x))
	{
	for(i=!scanf("%d",&R); i<R; i++)
		for(j=0; j<R; scanf("%d",&z),a[i][j++]=z);
	for(i=R-1; i>0; i--)
		{
		if(a[i][0]>a[i][1])
			a[i-1][0]=a[i-1][0]+a[i][0];
		else
			a[i-1][0]=a[i-1][0]+a[i][1];
		for(j=1; j<R-1; a[i-1][j]=m+a[i-1][j], j++)
			{
			if(a[i][j]>(m=a[i][j-1]))
				m=a[i][j];
			if(a[i][j+1]>m)
				m=a[i][j+1];
			}
		if(a[i][R-1]>a[i][R-2])
			a[i-1][R-1]=a[i-1][R-1]+a[i][R-1];
		else
			a[i-1][R-1]=a[i-1][R-1]+a[i][R-2];
		}
	for(x=(i=1)*0+a[0][0]; i<R; i++)
		if(a[0][i]>x)
			x=a[0][i];
	if(!R)
		x=0;
	if(R==1)
		x=a[0][0];
	}

return 0;
}
