/*
 * The_Grid.cpp
 *
 *  Created on: 21-May-2011
 *      Author: jivitesh
 */


#include <stdio.h>
#define MAX(A,B) A>B?A:B

int main() {

	int numCases;
	scanf("%d", &numCases);

	while(numCases>0){

		int gridSize;
		scanf("%d", &gridSize);

		int i, j;
		int grid[gridSize][gridSize];

		for(i=0; i<gridSize; i++){
			for(j=0; j<gridSize; j++){
				grid[i][j]=0;
			}
		}

		for(i=0; i<gridSize; i++){
			for(j=0; j<gridSize; j++){
				int temp, x;
				scanf("%d", &temp);
				if(i>0)
					if (j==0){
						x = MAX(grid[i-1][j], grid[i-1][j+1]);
						grid[i][j] = temp + x;
					}
					else if (j==gridSize-1){
						x = MAX(grid[i-1][j], grid[i-1][j-1]);
						grid[i][j] = temp + x;
					}
					else{
						int r;
						r = MAX(grid[i-1][j-1], grid[i-1][j+1]);
						x = MAX(r, grid[i-1][j]);
						grid[i][j] = temp + x;
					}
				else
					grid[i][j] = temp;
			//	printf("%d[%d %d] ", grid[i][j], temp, x);
			}
			//printf("\n");
		}


		int max = -100000000;

		for(int j=0; j<gridSize; j++){
			if(max<grid[gridSize-1][j])
				max = grid[gridSize-1][j];
		}

		printf("%d\n", max);

		numCases--;
	}

}
