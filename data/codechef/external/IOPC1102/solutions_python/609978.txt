#include <stdio.h>
#define siz 1010
#define P e[i][j]

main()
{
int fall, i, j, k, x;
long m[siz], n[siz], p[siz], q[siz];
long long e[siz][siz];
long double t=0, u=0, a=0, f[siz];
for(x=!scanf("%u",&fall); ++x<=fall; scanf("%ld %ld %ld %ld",&m[x],&n[x],&p[x],&q[x]));
for(i=-1; ++i<siz; e[0][i]=e[i][0]=0);
for(i=1; i<siz; i++)
	for(j=1; j<siz; j++)
		if(i==1)
			P=j;
		else if(i==j)
			P=1;
		else
			{
			if(i<j)
				{
				if((j-((k=j/i)*i)>i))
					P=k+e[i][j-(k*i)];
				else if((j-(k*i)<i))
					P=k+e[j-(k*i)][i];
				else
					P=k;
				}
			if(i>j)
				P=e[j][i];
			}
for(i=0; ++i<siz;)
	for(j=0; ++j<siz; P+=e[i][j-1]);
for(x=0; ++x<=fall;)
	for(j=p[x]-!(f[x]=0); ++j<=q[x]; t=n[x]/j,u=(m[x]-1)/j,a=e[j][j],f[x]=f[x]+((a*t+(t*(t-1)*j)/2+(n[x]%j)*t+e[j][n[x]%j])-(a*u+u*(u-1)*j/2+((m[x]-1)%j)*u+e[j][(m[x]-1)%j])));
for(x=1; x<=fall; printf("%.0Lf\n",f[x++]));
return 0;
}
