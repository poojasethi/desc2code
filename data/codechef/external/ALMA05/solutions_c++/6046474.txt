#include<iostream>
#include<cstdio>
#define ll long long
using namespace std;

ll arr[40][40], sum[40][40], dp[40][40][40][40];

ll func(ll x1, ll y1, ll x2, ll y2, ll level) {
    if (dp[x1][y1][x2][y2]!=-1) return dp[x1][y1][x2][y2];
    if (x1>x2 || y1>y2) return 0;
    ll a=func(x1, y1+1, x2, y2, level+1)+level*(sum[x2][y1]-sum[x1-1][y1]-sum[x2][y1-1]+sum[x1-1][y1-1]);
    ll b=func(x1+1, y1, x2, y2, level+1)+level*(sum[x1][y2]-sum[x1-1][y2]-sum[x1][y1-1]+sum[x1-1][y1-1]);
    ll c=func(x1, y1, x2-1, y2, level+1)+level*(sum[x2][y2]-sum[x2-1][y2]-sum[x2][y1-1]+sum[x2-1][y1-1]);
    ll d=func(x1, y1, x2, y2-1, level+1)+level*(sum[x2][y2]-sum[x1-1][y2]-sum[x2][y2-1]+sum[x1-1][y2-1]);
    dp[x1][y1][x2][y2]=max(max(a, b), max(c, d));
    return dp[x1][y1][x2][y2];
}

main() {
    ll t;
    scanf("%lld", &t);
    while (t--) {
        for (ll i=0; i<40; i++) {
            for (ll j=0; j<40; j++) {
                for (ll k=0; k<40; k++) {
                    for (ll l=0; l<40; l++) dp[i][j][k][l]=-1;
                }
            }
        }
        ll n, m;
        scanf("%lld %lld", &n, &m);
        for (ll i=1; i<=n; i++) {
            for (ll j=1; j<=m; j++) scanf("%lld", &arr[i][j]);
        }
        for (ll i=1; i<=n; i++) {
            for (ll j=1; j<=m; j++) sum[i][j]=arr[i][j]+sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1];
        }
        cout<<func(1,1,n,m,1)<<endl;
    }
}
