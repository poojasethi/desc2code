  //Coder: Vipin Singh
#include<bits/stdc++.h>
using namespace std;
#define lli long long
#define pb push_back
#define mp make_pair
#define mod 1000000007
const int limit = 35;
int in[limit][limit];
lli dp[limit][limit][limit][limit];
int n,m;

lli getit(int sr,int er,int sc,int ec,int day){
	
    lli ans = 0,temp=0;
    if(sr<0 || sr>=n || er<0 || er>=n || sc<0 || sc>=m || ec<0 || ec>=m || sr>er || sc>ec) return 0;
    
    if(dp[sr][er][sc][ec] != -1)
    	return dp[sr][er][sc][ec];
    	
    //up row
    temp=0;
    for(int j=sc;j<=ec;j++)
    	temp += in[sr][j];
    temp = temp*day;
    ans = max(ans,temp+getit(sr+1,er,sc,ec,day+1));
    
	//down row
    temp = 0;
    for(int j=sc;j<=ec;j++)
    	temp += in[er][j];
    temp = temp*day;
    ans = max(ans,temp+getit(sr,er-1,sc,ec,day+1));
    
	//left column
    temp = 0;
    for(int j=sr;j<=er;j++)
    	temp += in[j][sc];
    temp = temp*day;
    ans = max(ans,temp+getit(sr,er,sc+1,ec,day+1));
    
	//right column
    temp = 0;
    for(int j=sr;j<=er;j++)
    	temp += in[j][ec];
    temp = temp*day;
    ans = max(ans,temp+getit(sr,er,sc,ec-1,day+1));
    
	dp[sr][er][sc][ec]=ans;
    return ans;
}

int main(){
    int t;
    scanf("%d",&t);
    while(t--){
    	memset(dp,-1,sizeof(dp));
    	scanf("%d %d",&n,&m);
    	for(int i=0;i<n;i++){
    		for(int j=0;j<m;j++)
    			scanf("%d",&in[i][j]);
    	}
    	lli ans=getit(0,n-1,0,m-1,1);
    	printf("%lld\n",ans);
    }
} 