#include <bits/stdc++.h>
#define N 35
#define ll long long
using namespace std;

ll A[N][N], dp[N][N][N][N], n, m;

ll f(ll x1, ll y1, ll x2, ll y2){
    if(x1 > x2 || y1 > y2)  return 0;
    if(dp[x1][y1][x2][y2]!=-1)  return dp[x1][y1][x2][y2];
    ll temp = 0, sum = 0, c = (n - (x2-x1)) + (m - (y2-y1)) - 1;
    for(ll i=x1;i<=x2;i++) sum += A[i][y1];
    temp = max(temp, sum*c + f(x1, y1+1, x2, y2));
    sum = 0;
    for(ll i=x1;i<=x2;i++)    sum += A[i][y2];
    temp = max(temp, sum*c + f(x1, y1, x2, y2-1));
    sum = 0;
    for(ll i=y1;i<=y2;i++)    sum += A[x1][i];
    temp = max(temp, sum*c + f(x1+1, y1, x2, y2));
    sum = 0;
    for(ll i=y1;i<=y2;i++)    sum += A[x2][i];
    temp = max(temp, sum*c + f(x1, y1, x2-1, y2));
    dp[x1][y1][x2][y2] = temp;
    //cout<<x1<<","<<y1<<"  "<<x2<<","<<y2<<"-->"<<temp<<endl;
    return dp[x1][y1][x2][y2];
}

int main(){

    ll t;
    cin>>t;
    while(t--){
        memset(dp, -1, sizeof(dp));
        cin>>n>>m;
        for(ll i=0;i<n;i++){
            for(ll j=0;j<m;j++){
                cin>>A[i][j];
                dp[i][j][i][j] = A[i][j]*(n+m-1);
            }
        }
        cout<<f(0, 0, n-1, m-1)<<endl;
    }
    return 0;
}
