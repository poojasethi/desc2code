#include<bits/stdc++.h>
#define pb(x) push_back(x)
#define all(x) x.begin(), x.end()
#define cout2(x, y) cout << x << " " << y <<  endl
#define N 100004

#define MOD 1000000007
using namespace std;

long long fastPow(long long b, long long e){
	
	if(b == 0)return 0;
	long long ans = 1;
	
	while(e > 0){
	
		if(e&1)ans = ans * b;
		if(ans >= MOD)ans %= MOD;
		
		b = b * b;
		if(b >= MOD)b %= MOD;
		
		e >>= 1;
	}
	
	return ans;
}

int main(){

	int tc = 0;
	scanf("%d", &tc);
	
	while(tc--){
		
		long long n, k;
		scanf("%lld%lld", &n, &k);
		
		if(n == 1)printf("%lld\n", k);
		else{
			
			long long ans = 1;
			
			if(n%2 == 1){
				
				ans = (k * (k - 1))%MOD; n -= 2;
				if(n == 1)ans = (ans * (k - 2))%MOD;
				else{
					
					long long aux = (k - 1) + (k - 2) * (k - 2);
					aux %= MOD;
					
					ans = (ans * fastPow(aux, n/2))%MOD;
					ans = (ans * (k - 2))%MOD;	
					
				}
			}
			else{
				
				ans = (k * (k - 1))%MOD; n -= 2;
				long long aux = (k - 1) + (k - 2) * (k - 2);
				
				aux %= MOD;
				ans = (ans * fastPow(aux, n/2))%MOD;	
			}
			
			printf("%lld\n", ans);
		}	
		
	}

}

