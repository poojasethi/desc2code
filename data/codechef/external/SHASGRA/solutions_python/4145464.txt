#include <iostream>
#include <stdio.h>
#define MOD 1000000003
 
using namespace std;
 
int n,m;
long long dp[1<<18];
int a[18][18];
 
long long go(int msk,int index)
{
    if(msk == (1<<n)-1 && index==n)
        return 1;
    else if(index==n)
        return 0;
    else if(dp[msk]!=-1)
        return dp[msk];
    else {
        long long cnt = 0;
        for (int i = 0 ; i < n ; i++)
            if(((1<<i)&msk)==0 && a[i][index]==1)
                cnt+=go(msk|1<<i,index+1);
        return dp[msk] = cnt;
    }
 
}
int main()
{
    int t;
    scanf("%d",&t);
    int u,v;
    
    while(t-->0)
    {
        scanf("%d%d",&n,&m);
        
        for (int i = 0 ; i < n;i++)
            for (int j = 0 ; j < n; j++)
            	a[i][j]=0;
		
        for(int i=0;i<m;i++){
        	scanf("%d %d",&u,&v);
        	a[u][v-n] =1;
        }
 
        for (int i = 0 ; i < 1<<n;i++)
                 dp[i] = -1;
 
        long long  ans = go(0,0);
        printf("%lld\n",ans%MOD);
 
 
 
 
    }
 
    return 0;
}