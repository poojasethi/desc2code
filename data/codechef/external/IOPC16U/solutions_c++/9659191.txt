#include<bits/stdc++.h>
using namespace std;
map<string,int> mp;
string name[10010];
vector<int> vec[10010];
int len[10010];

int main()
{
  int t,n,q,i,j;
  cin>>t;
  while(t--)
  {
   cin>>n>>q;
   for(i=1;i<=n;i++)
   {
     vec[i].clear();
     cin>>name[i];
     mp[name[i]]=1;   //lexicographically sorted
     len[i]=name[i].length();
   }

   int cnt=0;
   map<string,int>::iterator it;

   for(it=mp.begin();it!=mp.end();it++)
   {
     cnt++;
     (*it).second=cnt;
   }


   for(i=1;i<=n;i++)
   {
     vec[mp[name[i]]].push_back(i);
   }
    int l,r;
    int ans,sz;
   while(q--)
   {
    cin>>l>>r;
    ans=0;
    sz=0;
    for(i=1;i<=cnt;i++)
    {
      int ss=vec[i].size();
      int le=0;
      for(j=0;j<ss;j++)
      {
         if(vec[i][j]>=l && vec[i][j]<=r)
         {
            le=len[vec[i][j]];
         }
      }

      if(le>0)
      {
         sz++; ans+=sz*le;
      }
    }
    cout<<ans<<endl;


   }


   mp.clear();

  }

}
