#include <bits/stdc++.h>
using namespace std;
#define ll unsigned long long
ll ans(ll n, ll p)
{	ll ret = 1;
	ll a = n/p,b=n%p;
	for(int i = 1;i<=b;i++)
	{
		ret=(ret*i)%p;
	}
	if(a==0)
	{
		return ret;
	}
	if(a&1)
	{
		ret = (p-ret);
	}
	return (ret*ans(a,p))%p;
}
int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		ll n,p;
		cin>>n>>p;
		cout<<ans(n,p)<<endl;
	}
	return 0;
}