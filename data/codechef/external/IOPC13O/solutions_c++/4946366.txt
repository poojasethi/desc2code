#include <iostream>
#include <cstdio>
#include <cstdlib>
using namespace std;
#define ll long long
ll p,ans;
void fact(ll n)
{
	int i;
	ll k=n/p;
	if(n==0) return ;
	if(k&1)
	{
		ans=(ans*(p-1))%p;
	}
	for(i=1;i<=n%p;i++)
	{
		ans=(ans*i)%p;
	}
	fact(k);
	return ;
}
int main()
{
	ll t,n;
	cin >> t;
	while(t--)
	{
		ans=1;
		cin >> n >> p;
		fact(n);
		cout << ans%p << endl;
	}
}