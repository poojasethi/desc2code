#include <stdio.h>
 
int main() 
{
    int t, p, ans;
    long long n, r;
    scanf("%d", &t);
    while (t--) 
    {
        scanf("%lld %d", &n, &p);
        ans = 1;
        while (n) 
        {
            r = n % p;
            while (r>0) 
            {
                ans = (long long)ans*r % p;
                r--;
            }
            n -= r;
            n /= p;
            if (n&1)
                ans = (p-ans) % p;
        }
        printf("%d\n", ans);
    }
    return 0;
}