#include<stdio.h>

typedef long long LL;








long long int powr(long long int a,long long int n,long long int pr)
{
long long int res=1,p;

for(p=a%pr;n!=0;n=n>>1,p=(p*p)%pr)
{
if(n&1==1)
{
	res=(res*p)%pr;
}


}



return res;


}






LL fact_r_mod(LL n,LL p)
{
LL t1,i,res,res2;


res=0;

t1=(n/p)%(p-1);

res=powr(p-1,t1,p);


t1=n%p;

res2=1;
for(i=1;i<=t1;i++)
{
  res2=(res2*i)%p;
   




}





return (res*res2)%p;








}














int main()
{

LL n,p,res,i,res2=1,t1;
int t;



scanf("%d",&t);


while(t--)
{
	

 scanf("%lld%lld",&n,&p);



  for(res=1;n!=0;n/=p)
  {

     res=(res*fact_r_mod(n,p))%p;
     

  //  printf("%lld ",fact_r_mod(n,p));

  }



printf("%lld\n",res);
  

}




	return 0;
}