#include <stdio.h>
 
int main() 
{
    int t;
    scanf("%d", &t);
    while (t--) 
    {
        long long n;
        int p;
        scanf("%lld %d", &n, &p);
        int ans = 1;
        while (n) 
        {
            long long r = n % p;
            while (r>0) 
            {
                ans = (long long)ans*r % p;
                r--;
            }
            n -= r;
            n /= p;
            if (n&1)
                ans = (p-ans) % p;
        }
        printf("%d\n", ans);
    }
    return 0;
}