#include<stdio.h>
#include<iostream>
#include<map>
#include<set>
#include<vector>
#include<queue>
#include<stack>
#include<algorithm>

#define MOD 1000000007
#define INF 2000000000

using namespace std;

long long fact[10000005];

void fill_fac(long long mod)
{
     long long i;
     
     fact[0]=1;
     
     for(i=1;i<mod;i++)
     {
                             fact[i]=(fact[i-1]*i)%mod;
                            
     }
     
     return;
}

long long powmod(long long base,long long exp,long long mod)
{
     long long ret=1;
     
     while(exp)
     {
               if(exp&1)
               {
                        ret*=base;
                        ret%=mod;
               }
               base*=base;
               base%=mod;
               
               exp>>=1;
     }
     
     return ret;
}

long long solve(long long n,long long p)
{
     long long ret=1;
     
     fill_fac(p);
     
     if(n<p)
      return fact[n];
     
     while(n)
     {
             ret*=powmod(fact[p-1],n/p,p);
             ret%=p;
             
             ret*=fact[n%p];
             ret%=p;
             
             n/=p;
     }      
     
     
     return ret;
}
               
  
int main()
{
    int  t;
    
    long long n,p;
    
    scanf("%d",&t);
    
    while(t--)
    {
              scanf("%lld %lld",&n,&p);
              
              printf("%lld\n",solve(n,p));
    }
    
    return 0;
}
