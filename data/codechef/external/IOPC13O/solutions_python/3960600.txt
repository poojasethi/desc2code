#include<stdio.h>
#include<iostream>
#include<algorithm>
#include<string.h>
#include<math.h>
#include<vector>
#define DEBUG if(0)
#define LL                           long long
#define INF                         (LL)1e18
#define maX(a,b)                     ( (a) > (b) ? (a) : (b))
#define miN(a,b)                     ( (a) < (b) ? (a) : (b))
#define F(i,L,R)                      for (int i = L; i < R; i++)
#define FE(i,L,R)                     for (int i = L; i <= R; i++)
#define FF(i,L,R)                     for (int i = L; i > R; i--)
#define FFE(i,L,R)                      for (int i = L; i >= R; i--)
#define FIT(a,b)                      for (__typeof((b).begin()) (a)=(b).begin(); (a)!=(b).end(); (a)++)

#define MOD (LL)(1e9 +  7)
using namespace std;

LL factmod(LL n, LL p)
{
	LL res=1;
	while (n>0)
	{
		for (int i=1;i<=n%p;i++)
			res=(res*i)%p;
		n=n/p;
		if (n%2!=0)
			res=p - res;
	}
	return res;
}

int main()
{
LL n,p;
int t;
scanf("%d",&t);
while(t--)
{
	scanf("%lld%lld",&n,&p);
	printf("%lld\n", factmod(n,p));
}


}