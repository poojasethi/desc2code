#include<stdio.h>
long long solve(long long n,long long p)
{
	long long d=1,i;
	while(n>0)
	{
		for(i=2;i<=n%p;i++)			
			d=(d*i)%p;	
		n/=p;		
		if(n%2!=0)
			d=p-d;	
	}
	return d;
}
int main()
{
	long long n,p,t,i,j,a,b,c,ans,d,e,k,f,g,h;
	scanf("%lld",&t);
	while(t--)
	{		
				
		scanf("%lld %lld",&n,&p);
		printf("%lld\n",solve(n,p));
	}
	return 0;
}
