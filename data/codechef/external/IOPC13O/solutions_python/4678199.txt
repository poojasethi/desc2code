#include<bits/stdc++.h>
using namespace std;
typedef long long ll;

long long int power(long long int a,long long int b,ll MOD){
	if(b==0)
		return 1;
	long long int y=power(a,b/2,MOD),k,ans;
	ans=(y*y);//%MOD;
	if(ans>=MOD){
		k=ans/MOD;
		ans-=k*MOD;
	}
	if(b%2){
		ans=(ans*a);//%MOD;
		if(ans>=MOD){
			k=ans/MOD;
			ans-=k*MOD;
		}
	}
	return ans;
}

ll fct[10000005];

int main(){
	int t;
	cin >> t;
	while(t--){
		ll n;
		cin >> n;
		ll p;
		cin >> p;
		ll k=n/p;
		ll l=n%p;
		
		fct[1]=fct[0]=1;
		ll ans=1;
		int i;
		for(i=2;i<p;i++)
			fct[i]=(fct[i-1]*i)%p;
		while(k){
			/*for(i=1;i<=k;i++){
				ans=(ans*fct)%p;
			}*/
			ans=(ans*power(fct[p-1],k,p))%p;
			ans=(ans*fct[l])%p;
			l=k%p;
			k=k/p;
			
		}
		ans=(ans*fct[l])%p;
		cout << ans << endl;
	}
	return 0;
}