#include<stdio.h>

int newfac(long long n,long long p)
{
	long long i;
	long long prod=1;
	long long t;
	/*while(n>=2)
	{
		if(n%p==0)
		{
			t=n;
			while(t%p==0)
			{
				t=t/p;
			}

			prod=(prod*t)%p;
			n--;
		}

		else
		{
			prod=(prod*n)%p;
			n--;
		}
	}*/
	
	while(n>0){
	for(i=2;i<=n%p;i++)
		prod=(prod*i)%p;

	n=n/p;

	if(n%2!=0)
		prod=p-prod;
	}
	return prod;	
}


int main()
{
	int T,p;
	long long n;

	scanf("%d",&T);
	
	while(T--)
	{
		scanf("%lld %d",&n,&p);

		printf("%d\n",newfac(n,p));

	}
	return 0;
}
