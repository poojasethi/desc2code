#include<stdio.h>
long long int fact(long long n,long long p)
{
	long long int d=1,i;
	while(n>0)
	{
			for(i=2;i<=n%p;i++)			
			d=(d*i)%p;	
			n/=p;		
			if(n%2!=0)
			d=p-d;	
	}
	return d;
}
int main()
{
	long long int p,n;
	int t;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%lld%lld",&n,&p);
		printf("%lld\n",fact(n,p));
		
	}
	return 0;
}
