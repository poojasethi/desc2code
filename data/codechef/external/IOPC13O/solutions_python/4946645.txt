//saurav shekhar
#include <bits/stdc++.h>

using namespace std;

#define EPS 1e-7
#define INF 1234567890
#define MOD 1000000007

typedef unsigned long long LL;
typedef pair<int, int> ii;
typedef vector<int> vi;

const int LIM = 100005; 

int main() {
  int T=1;
  scanf("%d",&T);
  LL n, p, ans, q;
  while(T--) { 
    cin >> n >> p;
    ans = 1;
    while(n > 0) {
      q = n % p;
      for(LL i = 2; i <= q; i++) ans = (ans * i) % p;
      q = n / p;
      if(q & 1) ans = p - ans;
      n = q;
    }
    cout << ans << "\n";
  }

  return 0;
}




















