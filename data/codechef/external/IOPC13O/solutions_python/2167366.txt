#include <stdio.h>

using namespace std;

long long int find(long long int n, long long int p)
{
     if(n==0) return 1;
     long long int a=1,b=n%p;
     if(b<0) b+=p;
     while(b)a=(a*b--)%p;
     if((n/p)%2==1) a*=-1;
     a=(a*find(n/p,p))%p;
     if(a<0) a+=p;
     return a;
     }
     
int main()
{
    int t;
    long long int n,p;
    scanf("%d",&t);
while(t--)
{
          scanf("%lld%lld",&n,&p);
          if(p==2){printf("1\n");continue;}
          printf("%lld\n",find(n,p));
          }
return 0;
}
