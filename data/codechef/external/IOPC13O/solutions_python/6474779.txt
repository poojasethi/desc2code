#include<iostream>

using namespace std;
int main()
{  long long int n,p,i,t,m;
    cin>>t;
    while(t>0)
    {m=1;
    cin>>n>>p;
   while(n>0)
  { 
   for(i=1;i<=(n%p);i++)
    m=(m*i)%p;
    n=n/p;
    if(n%2!=0)
    m=p-m;
 }
   cout<<m%p<<"\n";
   t--;}
   return 0;
}
