#include<stdio.h>

long long int solve(long long int n,long long int p,long long int mul)
{
	long long int k,i,t=1;//,c 
	 k=n/p;
      for(i=2;i<=(n%p);i++)
          t=(t*i)%p;
   // c=k;
   
   /*  while(c>1)
     {
     	
     	
     	if(c%2==0)
             c=c/2;

          else 
             {
                c=(c-1)/2;
               
             t=(mul*t)%p;
          
               }
        
        mul=(mul*mul)%p; 
      }   */

  if(k%2!=0)
     return p-t;
// if(k==0) 
 //   mul=1;

     return t;
      
}

int main()
{
  int T;
   scanf("%d",&T);
  long long int i,n,p,ans,mul; 
  while(T--)
  {
  	
  	scanf("%lld%lld",&n,&p);
    if(p==1)
     { printf("0\n");
        continue;}
        
     if(n==1)
      {
      	 printf("1\n");
      	  continue;
      }
      
      ans=1;mul=1;
      
       for(i=2;i<p;i++)
          mul=(mul*i)%p;
      
      while(n>0)
       { ans=(ans*solve(n,p,mul))%p;
        n=n/p;
       }
       
     printf("%lld\n",ans);  
      
  }

 return 0;
}