#include<bits/stdc++.h>
#define FOR(i,a,n) for(int i=a;i<n;i++)
#define si(x) scanf("%d",&x)
#define sll(x) scanf("%lld",&x)
#define ss(x) scanf("%s",x)
#define pi(x) printf("%d\n",x)
#define pll(x) printf("%lld\n",x)
#define ps(x) printf("%s\n",ch)
#define all(x) (x).begin(),(x).end()
#define M 1000000007
#define ll long long
#define mp make_pair
#define pb push_back
#define fr first
#define se second
using namespace std;
int block,cnt[1000069],arr[200069],n,m,k;
ll ans[200069],tot=0;
struct mo
{
    int le,ri,ind;
}q[200069];
bool cmp(struct mo l,struct mo r)
{
    if(l.le/block==r.le/block)
        return l.ri<r.ri;
    return l.le<r.le;
}
void add(int x)
{
    tot+=(1LL*2*cnt[arr[x]]+1)*arr[x];
    cnt[arr[x]]++;
    //tot+=1LL*cnt[arr[x]]*cnt[arr[x]]*arr[x];
   // cout<<arr[x]<<"add"<<cnt[arr[x]]<<"\n";
}
void del(int x)
{
    tot-=(1LL*2*cnt[arr[x]]-1)*arr[x];
    cnt[arr[x]]--;
    //tot+=1LL*cnt[arr[x]]*cnt[arr[x]]*arr[x];
    //cout<<arr[x]<<"del"<<cnt[arr[x]]<<"\n";
}
int main()
{
    si(n),si(m);
    FOR(i,1,n+1)
        si(arr[i]);
    block=sqrt(n)+1;
    FOR(i,1,m+1)
    {
        int x,y;
        si(x),si(y);
        q[i].le=x;
        q[i].ri=y;
        q[i].ind=i;
    }
    sort(q+1,q+1+m,cmp);
    int mor=0,mol=1;
    FOR(i,1,m+1)
    {
        int ql=q[i].le;
        int qr=q[i].ri;
        int in=q[i].ind;
        while(ql<mol)
            add(--mol);
        while(ql>mol)
            del(mol++);
        while(qr>mor)
            add(++mor);
        while(qr<mor)
            del(mor--);
      //  puts("");
        ans[in]=tot;
    }
    FOR(i,1,m+1)
        pll(ans[i]);
	return 0;
}
