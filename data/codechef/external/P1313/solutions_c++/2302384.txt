#include "stdio.h"
#include "stdlib.h"
#include <algorithm>

long long int nC2(long int i) {return ((i*(i-1))/2);}

long int n;
int *array;
long int *cumulative;

int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%ld",&n);
		array = new int [n];
		cumulative = new long int [n];
		for(long int index=0;index<n;index++) scanf("%d",array+index);
		cumulative[0] = array[0];
		for(long int index=1;index<n;index++) cumulative[index] = cumulative[index-1] + array[index];
		std::sort(cumulative,cumulative+n);
		long int current = cumulative[0];
		long int count = 1;
		long long int result = 0;
		for(long int index=1;index<n;index++)
		{
			if(cumulative[index]==current) count++;
			else 
			{	
				result += nC2(count);
				if(current == 0) result += count;
				current = cumulative[index];
				count = 1;
			}
		}
		result += nC2(count);
		if(current == 0) result += count;
		printf("%lld\n",result);
	}


	return 0;
}