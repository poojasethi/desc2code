#include<iostream>
#include<string.h>
#include<climits>
#include<stdio.h>
#include<string>
#include<algorithm>
#include<queue>
#include<math.h>
#include<sstream>
#include<vector>
#include<map>
#define big 20000000
#define small 10000000 
using namespace std;
int main(int argc, char const *argv[])
{
	int testcases,i,n,input;
	cin>>testcases;
	while(testcases--)
	{ 
		int sum=0,total=0,count=0,*reset,*cumulative,current;
		scanf("%d",&n);
		reset = new int[n];
		cumulative= new int [n];
		for(i=0;i<n;i++)
		{
			scanf("%d",&input);
			sum=sum+input;
			cumulative[i]=sum;
		}
		std::sort(cumulative,cumulative+n);
		current = cumulative[0];
		count=1;
		for(i=1;i<n;i++)
		{
			if(cumulative[i] == current)
			{
				count++;
			}
			else
			{
				if(current == 0)
				{
					total = total + ((count+1)*(count)/2);
				}
				else
				{
					total = total + ((count-1)*(count)/2);
				}
				current = cumulative[i];
				count=1;
			}
		}
		if(current == 0)
		{
			total = total + ((count+1)*(count)/2);
		}
		else
		{
			total = total + ((count-1)*(count)/2);
		}
		printf("%d\n",total);
	}
	return 0;
}