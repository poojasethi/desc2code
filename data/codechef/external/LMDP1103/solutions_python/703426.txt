#include <stdio.h>

main()
{
int fall;
long long k=0, i, j, a, b, z, n, x, y, p, c, e, g;
for(scanf("%d",&fall); fall--; printf("%lld\n",e/a))
	{
	for(k=2*!!scanf("%lld %lld %lld",&x,&y,&z),n=z; z>1&&k*k<=n; k++)
		for(a=0; !(z%k); a++,z/=k);
	for(g=(z==!(e=0))?(--k):(z+!(a=1)),p=x*y; p; e+=p/g,p/=g);
	}
return 0;
}
