//Mukul Gupta

#include<stdio.h>


int p[1000100];
long primes[100000];

int main()
{long long k=0,i,j;
 long long a,b,z,number,x,y;
 
  for (i=2;i<1000000;i++)
 {
     if (p[i]==0)
     {                primes[k++]=i;
                      for (j=i+i;j<1000000;j+=i)
                      p[j]=1;
     }

 } 
 long long u=k;
 int t;
 long long product,check,exp,temp;
 scanf("%d",&t);
 
 while(t--)
 {
  scanf("%lld %lld %lld",&x,&y,&z);          
  k=0;
  number=z;
  while(z>1 && primes[k]*primes[k]<=number && k<u)
  {
   
   a=0;
    while(z%primes[k]==0)                  
    {                                      a++;
                                           z/=primes[k];      
                                                     
    }
    k++;
   }        
  if (z==1)
  {
  check=primes[--k];         
  }        
  else
  {
      check=z;
      a=1;
  }
          
    product=x*y;      
    exp=0;
    
    temp=check;

    while(product)
    {
    exp+= product/temp;       
    product=product/temp;      
    }
             
    printf("%lld\n",exp/a);      
  
  }

           
 
 
 return 0;
}
