#include<stdio.h>
#include<math.h>
int main()
{
    int t;
    long long i,j,x,y,z,pro,ans,num,temp,k,xx,maxp;
    scanf("%d",&t);
    while(t--)
    {
		scanf("%lld %lld %lld",&x,&y,&z);
		num = z;
		k=2;
		while(num>1&&k*k<=z)
		{
			if(num%k==0)
			{
				xx=0;
				while(num%k==0)
				{
					xx++;
					num/=k;					
				}
			}
			k++;
		}
		if(num==1)
		{
			maxp=k-1;
		}
		else
		{
			maxp= num;
			xx=1;
		}
		
		
		
		ans=0;
		pro = x*y;
		while(pro>0)
		{
			ans += pro/maxp;
			pro = pro/maxp;
		}
		printf("%lld\n",ans/xx);
	
              
    }
   	
	return 0;
}
