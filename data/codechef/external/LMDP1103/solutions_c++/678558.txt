#include <iostream>
#include <cstdio>
#include <cctype>
#include <string>
#include <cmath>
#include <vector>
#include <algorithm>
#include <stack>
#include <queue>
#include <map>
#include <set>
#include <sstream>
#include <ctime>
#include <cassert>
#include <string.h>
using namespace std;

typedef long long ll;

const int maxs = 1000000 + 555;
bool notprime[maxs];
int primes[maxs];
int main()
{
int index=0;
for(int i=2;i<maxs;i++)
{
	if(notprime[i])
	continue;
	primes[index++]=i;
	for(int j=i; j<maxs;j+=i)
	{
		notprime[j]=1;
	}
}


int t;
scanf("%d",&t);
while(t--)
{
	ll ret = 1LL<<62;
	ll r,f,b;
	cin>>r>>f>>b;
	ll a = r*f;
	for(int i=0;primes[i]*primes[i] <= b || b>1 ;i++)
	{
		ll reduce = primes[i];
		if(reduce * reduce > b) reduce = b;
		ll cnt = 0,has = 0;
		
		while(b%reduce==0)
		{
			cnt++;
			b/=reduce;
		}
		
		if(cnt==0)	continue;
		
		ll temp = a, j = reduce;
		
		while(temp>=reduce)
		{
			has+=a/j;
			temp/=reduce;
			j*=reduce;
			
		}
		
		ll s = has/cnt;
		ret = min(ret,s);
		if(b==1)break;	
	}		
	cout<<ret<<endl;
	
} 	
//system("PAUSE");
return 0;
}
