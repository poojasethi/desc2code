#include <bits/stdc++.h>
#define f(x,y) (m*((((2*((x/3)%c)*(y%c))%c)+1)%c))%c
using namespace std;
int main()
{
    long long m,n,k,s,c=1000000007,x,y;
    scanf("%lld%lld%lld",&n,&k,&m);s=m;
    switch(k)
    {
        case 2:s=(((2*n-1)%c)*m)%c;break;
        case 3:s=(m*(2*n*n -2*n+1)%c)%c;break;
        case 4:x=(n%3-1)?2*n*n-n+3:n-1;
                y=(n%3==1)?2*n*n-n+3:n-1;
        case 5:if(k==5){x=((n*n-n)%3)?n*n-n+4:n*n-n;
                y=((n*n-n)%3)?n*n-n:n*n-n+4;}
                s=f(x,y);
    }
    cout<<s<<endl;
    return 0;
}