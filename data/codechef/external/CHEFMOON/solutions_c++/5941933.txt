#include<iostream>
#include<algorithm>
#include<climits>
using namespace std;
long long int Dist[1004][1004];

int main()
{
	long long int n,m,k;
	cin>>n>>m>>k;
	for (int i = 0; i < 1004; ++i)
	for (int j=0; j <1004; ++j)
	     if(i!=j)
	        Dist[i][j]=INT_MAX;

	while(m--)
	{
		int x,y,w;
		cin>>x>>y>>w;
		Dist[x-1][y-1]=w;
		Dist[y-1][x-1]=w;
	}
	for(int k=0;k<n;k++){
		for(int i=0;i<n;i++){
			for(int j=0;j<n;j++){
				if((Dist[i][k]+Dist[k][j])<Dist[i][j]){
					 Dist[i][j]=Dist[i][k]+Dist[k][j];
					 //cout<<Dist[i][j]<<endl;
					}
				}
			}
			
		}
	
		
	int q;
	cin>>q;
	while(q--)
	{
		int u,v;
		cin>>u>>v;
		if(Dist[u-1][v-1]<=k)																											
			cout<<"YES"<<endl;
		else
			cout<<"NO"<<endl;
	}

}