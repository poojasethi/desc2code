#include<iostream>
#include<cstdlib>
#include<climits>
using namespace std;
void floydwarshell(int input[][105],int n)
{
	int i,j,h;
	for(h=1;h<=n;h++)
	for(i=1;i<=n;i++)
	for(j=1;j<=n;j++)
	{
		if(input[i][h]+input[h][j]<input[i][j])
		input[i][j]=input[i][h]+input[h][j];
	}
}
int main()
{
	int n,m,k;
	int a,b,c;
	int q,u,v;
	int input[105][105]={INT_MAX};
	cin>>n>>m>>k;
	for(int f=1;f<=n;f++)
	for(int r=1;r<=n;r++)
	input[f][r]=1005;
	while(m--)
	{
		cin>>a>>b>>c;
		input[a][b]=c;
		input[b][a]=c;
	}
	floydwarshell(input,n);
	cin>>q;
	while(q--)
	{
		cin>>u>>v;
		if(input[u][v]<=k)
		cout<<"YES"<<endl;
		else
		cout<<"NO"<<endl;
	}
	return 0;
}
 