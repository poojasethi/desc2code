#include<bits/stdc++.h>
using namespace std;
int arr[101][101];

int main()
{
	int n,m,k;
	std::ios::sync_with_stdio(false);
	cin>>n>>m>>k;
	memset(arr,9999,sizeof(arr));
	for(int i=0;i<m;i++)
	{
		int strt,end,cost;
		cin>>end>>strt>>cost;
		arr[end-1][strt-1]=cost;
		arr[strt-1][end-1]=cost;
	}
/*	for(int i=0;i<n;i++)
	{
		for(int j=0;j<n;j++)
		cout<<arr[i][j]<<" ";
		cout<<endl;
	} */
	for(int tt=0;tt<n;tt++)
	{
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				if(arr[i][tt]+arr[tt][j]<arr[i][j])
				arr[i][j]=arr[i][tt]+arr[tt][j];
			}
		}
	}
//	cout<<"x"<<endl;
/*	for(int i=0;i<n;i++)
	{
		for(int j=0;j<n;j++)
		cout<<arr[i][j]<<" ";
		cout<<endl;
	}
	*/
	int query;
	cin>>query;
	while(query--)
	{
		int strt,end,ans;
		cin>>strt>>end;
		//cout<<arr[strt-1][end-1];
		if(arr[strt-1][end-1]<=k)
		cout<<"YES"<<endl;
		else
		cout<<"NO"<<endl;
	}
}