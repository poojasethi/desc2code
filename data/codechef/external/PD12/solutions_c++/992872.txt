#include <iostream>
using namespace std;
char tab[200][200];
int n, k;
void re(int i, int j)
{
    if(tab[i][j] != '#')
        return;
    else
    {
        tab[i][j] = '.';
        if(i-1 >=0)
            re(i-1,j);
        if(i+1<n)
            re(i+1,j);
        if(j-1>=0)
            re(i,j-1);
        if(j+1<n)
            re(i,j+1);
        if((i-1 >=0)&&(j-1>=0))
            re(i-1,j-1);
        if((j-1>=0)&&(i+1<n))
            re(i+1,j-1);
        if((i-1 >=0)&&(j+1<n))
            re(i-1,j+1);
        if((i+1<n)&&(j+1<n))
            re(i+1,j+1);
    }


}
int main()
{

    int r;
    cin>>r;
   /* for(int i =0;i<200;i++)
        for(int j=0;j<200;j++)
            tab[i][j] = '.';*/
    for(int ro=0;ro<r;ro++)
    {
        int ans = 0;
        cin>>n>>k;
        for(int i =0;i<n;i++)
        {
            for(int j=0;j<k;j++)
            {
                cin>>tab[i][j];
            }
        }
        for(int i =0;i<n;i++)
        {
            for(int j=0;j<k;j++)
            {
                cout<<tab[i][j];
            }
            cout<<endl;
        }
        for(int i=0;i<n;i++)
        {
            for(int j=0;j<k;j++)
            {
                if(tab[i][j] == '#')
                {
                    ans++;
                    re(i,j);
                }
            }
        }
cout<<ans<<endl;
    }
   return 0;
}
