#include <iostream>
#include <cstdio>
using namespace std;
void find(char data[202][202],int y,int x){
        data[y][x]=-1;
        if(data[y-1][x-1]==3){
            find(data,x-1,y-1);
        }
        if(data[y-1][x]==3){
            find(data,y-1,x);
        }
        if(data[y-1][x+1]==3){
            find(data,y-1,x+1);
        }
        if(data[y][x+1]==3){
            find(data,y,x+1);
        }
        if(data[y+1][x+1]==3){
            find(data,y+1,x+1);
        }
        if(data[y+1][x]==3){
            find(data,y+1,x);
        }
        if(data[y+1][x-1]==3){
            find(data,y+1,x-1);
        }
        if(data[y][x-1]==3){
            find(data,y,x-1);
        }
}
int main()
{
    int ans=0;
    int n,x,y;
    char temp;
    cin >> n;
    for(int i=0;i<n;i++){
        cin >> y >> x;
        char data[202][202]={0};
        for(int iy=1;iy<=y;iy++){
            for(int ix=1;ix<=x;ix++){
                cin >> temp;
                if(temp=='.'){
                    data[iy][ix]=-1;
                }else{
                    data[iy][ix]=0;
                }
            }
        }
        for(int iy=1;iy<=y;iy++){
            for(int ix=1;ix<=x;ix++){
                if(data[iy][ix]==0){
                    if(data[iy-1][ix-1]!=-1&&data[iy-1][ix-1]!=0){
                        data[iy][ix]=data[iy-1][ix-1];
                    }else if(data[iy-1][ix]!=-1&&data[iy-1][ix]!=0){
                        data[iy][ix]=data[iy-1][ix];
                    }else if(data[iy-1][ix+1]!=-1&&data[iy-1][ix+1]!=0){
                        data[iy][ix]=data[iy-1][ix+1];
                    }else if(data[iy][ix+1]!=-1&&data[iy][ix+1]!=0){
                        data[iy][ix]=data[iy][ix+1];
                    }else if(data[iy+1][ix+1]!=-1&&data[iy+1][ix+1]!=0){
                        data[iy][ix]=data[iy+1][ix+1];
                    }else if(data[iy+1][ix]!=-1&&data[iy+1][ix]!=0){
                        data[iy][ix]=data[iy+1][ix];
                    }else if(data[iy+1][ix-1]!=-1&&data[iy+1][ix-1]!=0){
                        data[iy][ix]=data[iy+1][ix-1];
                    }else if(data[iy][ix-1]!=-1&&data[iy][ix-1]!=0){
                        data[iy][ix]=data[iy][ix-1];
                    }else{
                        data[iy][ix]=3;
                    }
                }
            }
        }
        /*
        for(int o=1;o<=y;o++){
            for(int w=1;w<=x;w++){
                printf("% c",data[o][w]+'.'-2);
            }
            cout << endl;
        }*/
        for(int iy=1;iy<=y;iy++){
            for(int ix=1;ix<=x;ix++){
                if(data[iy][ix]==3){
                    find(data,iy,ix);
                    ans++;
                }
            }
        }
        cout << ans << endl;
        ans=0;
    }
    return 0;
}
