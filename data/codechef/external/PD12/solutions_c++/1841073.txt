#include <iostream>
 
using namespace std;
 
struct rahad
{
    int x;
    int check;
};
 
typedef struct rahad lahad;
 
lahad tarang[201][201];
 
int main()
{
    int n;
     int g=0;
     int ans[100];
     int kill;
     int numi=1;
     char temp;
     cin >> n;
     int x,y;
     for(int z=0;z<n;z++)
     {
         ans[z]=0;
         numi=1;
     cin >> x;
     cin >> y;
     for(int i=0;i<x;i++)
     {
         for(int j=0;j<y;j++)
         {
             cin >>temp;
             if(temp=='.')
             {
                 tarang[i][j].x=0;
             }
             else
             {
                 tarang[i][j].x=numi;
                 numi++;
                 tarang[i][j].check=0;
             }
 
         }
     }
 
     if((x>2)&&(y>2))
     {
        for(int i=1;i<x;i++)
        {
            for(int j=1;j<y-1;j++)
            {
                if(tarang[i][j].x!=0)
                {
                    g=0;
                if(tarang[i][j-1].x!=0)
                {
                    //cout << "1" << endl;
                    if(tarang[i][j].check==0)
                    {
                        tarang[i][j].x=tarang[i][j-1].x;
                        tarang[i][j].check=1;
                        g++;
                    }
                }
                if(tarang[i-1][j-1].x!=0)
                {
                    //cout << "2" << endl;
                    if(tarang[i][j].check==0)
                    {
                        g++;
                        tarang[i][j].x=tarang[i-1][j-1].x;
                        tarang[i][j].check=1;
                    }
                }
 
                if(tarang[i-1][j].x!=0)
                {
                    //cout << "3" << endl;
                    if(tarang[i][j].check==0)
                    {
 
                        tarang[i][j].x=tarang[i-1][j].x;
                        tarang[i][j].check=1;
                        g++;
                    }
                    else
                    {
                        if(tarang[i][j].x!=tarang[i-1][j].x)
                        {
                        ans[z]--;
                        kill=tarang[i-1][j].x;
                        for(int a=0;a<i;a++)
                        {
                            for(int b=0;b<y;b++)
                            {
                                if(tarang[a][b].x==kill)
                                {
                                    tarang[a][b].x=tarang[i][j].x;
                                }
                            }
                        }
                        }
                    }
                }
                if(tarang[i-1][j+1].x!=0)
                {
                 //   cout << "4" << endl;
                    if(tarang[i][j].check==0)
                    {
                        g++;
                        tarang[i][j].x=tarang[i-1][j+1].x;
                        tarang[i][j].check=1;
 
                    }
                    else
                    {
                        if(tarang[i][j].x!=tarang[i-1][j+1].x)
                        {
                        ans[z]--;
                        kill=tarang[i-1][j+1].x;
 
                        for(int a=0;a<i;a++)
                        {
                            for(int b=0;b<y;b++)
                            {
                                if(tarang[a][b].x==kill)
                                {
                                    tarang[a][b].x=tarang[i][j].x;
                                }
                            }
                        }
                        }
                    }
                }
                if(g==0)
                ans[z]++;
            }
            }
        }
     }
     }
 
 
 
     for(int z=0;z<n;z++)
     {
         cout << ans[z] << endl;
     }
 
     return 0;
}
 