#include <bits/stdc++.h>
using namespace   std;



#define mod 1000000009
#define si 5001
#define f first
#define s second
#define rep(i,n) for(i=0;i<n;i++)
#define pb push_back
#define endl '\n'
#define ll long long


bool v[si]={0};
int dp[si][2];
vector<int> l;
vector< vector <int> > g;
vector< vector <int> > dg;
void dfs(int u)
{
    v[u]=1;
    int i;
    rep(i,g[u].size())
    {
        if(v[g[u][i]]==0)
        {
            v[g[u][i]]=1;
            dfs(g[u][i]);
            dg[u].pb(g[u][i]);
        }
    }

    l.pb(u);
}

int main()
{
 
 int n,i,j,a,b,t1,t0,t,f;

cin>>t;
rep(f,t)
{
  cin>>n;
 memset(v,0,sizeof(v));
 memset(dp,0,sizeof(dp));
 l.resize(0);
 g.resize(0);
 dg.resize(0);
 g.resize(n+1);
 dg.resize(n+1);

 rep(i,n-1)
 {
     cin>>a>>b;
     g[a].pb(b);
     g[b].pb(a);
 }

 dfs(0);

 rep(i,n)
 {

     a=l[i];
     //cout<<a<<endl;
     //dp[a][1]=dp[a][0]=1;
     t0=0;
     t1=1;
     rep(j,dg[a].size())
     {
         b=dg[a][j];

         t0+=max(dp[b][1],dp[b][0]);
         t1+=dp[b][0];
        
     }

     dp[a][1]=t1;
     dp[a][0]=t0;


 }

 cout<<max(dp[0][1],dp[0][0])<<endl;    
}


}