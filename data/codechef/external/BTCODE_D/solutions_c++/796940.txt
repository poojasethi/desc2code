#include<iostream>
//#include<conio.h>
using namespace std;
int main()
{
    int t,m,n,i,j;
    long long int max,sum;
    scanf("%d",&t);
    while(t--)
    {
              sum=max=0;
              scanf("%d%d",&m,&n);
              long long int a[m][n],b[m][n],c[m][n];
              for(i=0;i<m;i++)
              for(j=0;j<n;j++)
              scanf("%lld",&a[i][j]);
              for(i=0;i<m;i++)
              for(j=0;j<n;j++)
              scanf("%lld",&b[i][j]);
              for(i=0;i<m;i++)
              for(j=0;j<n;j++)
              scanf("%lld",&c[i][j]);
              for(i=0;i<m;i++)
              for(j=0;j<n;j++)
              {
                              b[i][j]=(a[i][j]<b[i][j]?a[i][j]:b[i][j]);
                              c[i][j]*=b[i][j];
              }
              for(i=0;i<m;i++)
              {
                              max=0;
                              for(j=0;j<n;j++)
                              max=(max<c[i][j]?c[i][j]:max);
                              sum+=max;
              }
              printf("%lld\n",sum);
    }
    //getch();
    return 0;
}
