#include <iostream>
#include <cstdio>
#include <vector>
#include <sstream>
using namespace std;
#define MAX 104
long long a[MAX][MAX], b[MAX][MAX], c[MAX][MAX];
void solve()
{
		int m, n;
		int i, j;
		scanf("%d%d", &m, &n);
		m++;n++;
		for(i = 1; i < m; i++)
			for(j = 1; j < n; j++)
				scanf("%lld", &a[i][j]);
		for(i = 1; i < m; i++)
			for(j = 1; j < n; j++)
				scanf("%lld", &b[i][j]);
		for(i = 1; i < m; i++)
			for(j = 1; j < n; j++)
				scanf("%lld", &c[i][j]);
		for(i = 1; i < m; i++)
			for(j = 1; j < n; j++)
			{
				b[i][j] = min(a[i][j],b[i][j]);
				c[i][j] = c[i][j] * b[i][j];
			}
		long long ret = 0;
		for(i = 1; i < m; i++)
		{
			long long mx = 0;
			for(j = 1; j < n; j++)
				mx = max(c[i][j], mx);
			ret += mx;
		}
		cout << ret << endl;		
}
int main()
{
	int t;
	scanf("%d", &t);
	while(t--)
		solve();
	return 0;
}