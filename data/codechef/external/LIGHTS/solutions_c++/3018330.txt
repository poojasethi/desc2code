#include<iostream>
#include<vector>
#include<queue>
#include<algorithm>

//#include<fstream> //COMMENT THIS LATER

using namespace std;

class dots
{
    public:
    int count,row;
    bool operator < (const dots& rhs)const{
        return this->count > rhs.count;
    }
};

int main()
{
    //ifstream in("in.txt"); //COMMENT THIS
    //cin.rdbuf(in.rdbuf()); //COMMENT THIS
    int T,N,M,count,K,tcount=0;
    int rnum;
    char x;
    priority_queue<dots> Q;
    dots P;
    cin>>T;
    while(T--)
    {
        cin>>N>>M>>K;
        for(int i=0;i<N;i++)
        {
            count=0;
            for(int j=0;j<M;j++)
            {
                cin>>x;
                if(x=='*') count++;
            }
            tcount+=count;
            P.count=count;
            P.row=i;
            Q.push(P);
        }
        while(K--)
        {
            P = Q.top();
            Q.pop();
            tcount=tcount+(M-P.count)-P.count;
            P.count=(M-P.count);
            Q.push(P);
        }
        cout<<tcount<<"\n";
        tcount=0;
        while(!Q.empty()) Q.pop();
    }
    return 0;
}
