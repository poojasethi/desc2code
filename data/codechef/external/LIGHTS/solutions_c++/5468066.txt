#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<queue>
#include<stack>
#include<map>
#include<algorithm>
#include<set>
#include<vector>
#include<limits.h>
using namespace std;
#define pb push_back
#define mk make_pair
#define scani(n) scanf("%d",&n);
#define ll long long
int n,m;
int k;
int dp[300][300];
int br[300],dr[300];
int fun(int i,int cou)
{
if(cou%2==1)
return dr[i];
else
return br[i];
}
int main()
{
int t,i,c,j,pos1,cc,mx;
string str;
cin>>t;
while(t--)
{
memset(dp,-1,sizeof(dp));
memset(br,0,sizeof(br));
memset(dr,0,sizeof(dr));
cin>>n>>m>>k;
for(i=1;i<=n;i++)
{
cin>>str;
c=0;
for(j=0;j<m;j++)
{
if(str[j]=='*')c++;
}
br[i]=c;
dr[i]=m-c;
}
/* for(i=1;i<=n;i++)
cout<<br[i]<<" "<<dr[i]<<endl;
*/	i=1;
for(c=0;c<=k;c++)
{
dp[i][c]=fun(i,c);
// cout<<dp[i][c]<<" ";
}
// cout<<endl;
for(i=2;i<=n;i++)
{
for(c=0;c<=k;c++)
{
mx=-1;
for(cc=0;cc<=c;cc++)
{
pos1=fun(i,cc)+dp[i-1][c-cc];
// cout<<pos1<<" ";
mx=max(pos1,mx);
}
// cout<<endl;
dp[i][c]=mx;
}
}
cout<<dp[n][k]<<endl;
 
}
 
return 0;
}