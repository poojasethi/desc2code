#include<string.h>
#include<stdio.h>
#include<stdlib.h>

using namespace std;

bool flag=false;
char ch[6][1000];

bool check(char *a){
	int i,j,k,l,m,n;
	n=5;
	
	for(i=0;i<n;i++){
		l=strlen(ch[i]);	
		for(j=0;j<l;j+=2){
			if((ch[i][j]>='1' && ch[i][j]<='5') || (ch[i][j]>='A' && ch[i][j]<='E')){
				
				if(ch[i][j]>='A' && ch[i][j]<='E'){
					
					for(k=0;k<n-1;k++)
						if( (a[k]==(i+'A') && a[k+1]==ch[i][j] ) || ((a[k+1]==(i+'A') && a[k]==ch[i][j] )) )
							break;
							
					if(k==n-1)	return false;
				}
				else if( a[ch[i][j]-'1']!=(i+'A') )
					return false;									
			}else if(ch[i][j]=='N'){				
				if(ch[i][j+1]>='A' && ch[i][j+1]<='E'){					
					for(k=0;k<n-1;k++)
						if( ( a[k]==(i+'A') && a[k+1]==ch[i][j+1] ) || (a[k+1]==(i+'A') && a[k]==ch[i][j+1] ) )
							return false;
				}
				else if( a[ch[i][j+1]-'1']==(i+'A') )
					return false;
				j++;
			}else if(ch[i][j]=='+'){				
				for(k=0;k<n;k++)
					if(a[k]==(i+'A'))	return false;
					else if(a[k]==ch[i][j+1])	break;
				j++;
			}else{
				for(k=0;k<n;k++)
					if(a[k]==ch[i][j+1])	return false;
					else if(a[k]==(i+'A'))	break;			
				j++;
			}			
		}		
	}
	
	return true;
}

void swap (char *x, char *y)
{
    char temp;
    temp = *x;
    *x = *y;
    *y = temp;
}

void permute(char *a, int i, int n)
{
	char temp;
	if(flag)	return;
   int j;
   if (i == n)
   {
   		if(!flag && check(a))
		{
			printf("%s\n",a);
			flag=true;
			return;
		}
   }
   else
   {   	
	   	if(flag)	return;
        for (j = i; j <= n; j++)
       {    	  
		    temp = *(a+i);
    		*(a+i) = *(a+j);
		    *(a+j) = temp;
          permute(a, i+1, n);          
          if(flag)	return;
		    temp = *(a+i);
    		*(a+i) = *(a+j);
		    *(a+j) = temp;
       }
   }
} 

int main()
{
	int i,j,k,b,n,m,t;	
	n=5;	
	
	scanf("%d",&t);
	getchar();
	
	while(t--){
		
		char a[]="ABCDE";					
		for(i=0;i<n;i++)
			gets(ch[i]);
		
		flag=false;
		permute(a,0,4);
	}
	
}