/* bhupkas */

#include "iostream"
#include "stdio.h"
#include "algorithm"
#include "vector"
#include "string.h"
#include "string"

using namespace std;

int main()
{
	int t,i,j;
	string s[10];
	string s1="ABCDE";
	
	cin>>t;
	getchar ();
	
	while(t--)
	{
		vector <vector <string> > a (5);
			
		for(i=0;i<5;i++) 
		{
			getline (cin, s[i]);
			string temp = "";
		
			for (int j = 0; j < s[i].size(); j++)
			{
				if (s[i][j] == ' ')
				{
					if (temp.size() != 0)
					{
						a[i].push_back (temp);
						temp = "";	
					}
				} else temp += s[i][j];
			}
			if (temp.size() != 0)
			{
				a[i].push_back (temp);
				temp = "";	
			}
		}
		
		
		string ans = "";
		
		do
		{
			int ok = true;
			
			int pos[10] = {0};
			
			for (int i = 0; i < s1.size(); i++)
				pos[s1[i] - 'A'] = i+1;
			
			for (int i = 0; i < 5; i++)
			{
				for (int j = 0; j < a[i].size(); j++)
				{
					string temp = a[i][j];
					
					if (temp.size() == 1)
					{
						if (temp[0] >= 'A' && temp[0] <= 'Z')
						{
							if (abs (pos[i] - pos[temp[0] - 'A']) != 1)
								ok = false;
						}
						else 
						{	
							if (pos[i] != (temp[0] - '0')) ok = false;
						}	
					}
					else 
					{
						if (temp[0] == '+' || temp[0] == '-')
						{
							if (temp[0] == '+')
							{
								if (pos[i] <= pos[temp[1] - 'A']) ok = false;	
							}
							else 
							{
								if (pos[i] >= pos[temp[1] - 'A']) ok = false;
							}
						}
						else if (temp[1] >= '1' && temp[1] <= '9') 
						{
							if (pos[i] == (temp[1] - '0')) ok = false;
						}
						else 
						{
							if (abs (pos[i] - pos[temp[1] - 'A']) == 1)
								ok = false;
						}
					}
				}
			}	
			
			if (ok)
			{
				ans = s1;
				break;
			} 													
		}
		while(next_permutation(s1.begin(),s1.end()));
		
		cout << ans << endl;
		s1 = "ABCDE";
		
	}
	
	return 0;
}