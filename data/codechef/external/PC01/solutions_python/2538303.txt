#include <iostream>
#include <sstream>
#include <cstdlib>
#include <cstdio>
#include <algorithm>
#include <string>
#include <vector>
#include <cmath>

using namespace std;

vector< vector<string> > v(5);
int p[5] = {1, 2, 3, 4, 5};
int flag = 0;

void check()
{
	for(int i = 0; i < 5; i++) {
		for(int j = 0; j < v[i].size(); j++) {
			if(v[i][j].size() == 1) {
				char c = v[i][j][0];
				if(v[i][j][0] >= '1' && v[i][j][0] <= '5') {
					if(p[i] != (c - '0')) {
						flag = 1;
						break;
					}
				}
				else {
					int r = c - 'A';
					if(abs(p[i] - p[r]) > 1) {
						flag = 1;
						break;
					}
				}
			}
			else  {
				char a = v[i][j][0];
				char b = v[i][j][1];
				int r = b - 'A';
				if(a == 'N') {
					if(v[i][j][1] >= '1' && v[i][j][1] <= '5') {
						if(p[i] == (b - '0')) {
							flag = 1;
							break;
						}
					}
					else if(abs(p[i] - p[r]) == 1) {
						flag = 1;
						break;
					}
				}
				else if(a == '+' && p[i] < p[r]) {
					flag = 1;
					break;
				}
				else if(a == '-' && p[i] > p[r]) {
					flag = 1;
					break;
				}
			}
		}
		if(flag == 1) break;
	}
}


int main()
{
	int t;
	cin >> t;
	getchar();
	while(t--) {
		for(int i = 0; i < 5; i++) {
			 p[i] = i+1;
			 v[i].clear();
		}
		//vector< vector<string> v(5);

		string s,a;
		for(int i = 0; i < 5; i++) {
			getline(cin, s);
			stringstream ss;
			ss << s;
			while(ss >> a) {
				v[i].push_back(a);
			}
		}
		
		do {
			flag = 0;
			check();
			if(flag == 0) {
				char ans[5];
				for(int i = 0; i < 5; i++)
					for(int j = 0; j < 5; j++)
						if(p[j] == i+1) cout <<(char)(j+ 'A');

				cout << endl;
				break;
			}
		}while(next_permutation(p, p+5));
	}

	return 0;
}