#include <stdio.h>
//#include <conio.h>
#include <iostream>
using namespace std;

int check(int floor[], char cond[10][100])
{
    int i, f, j;
    for(i=1;i<=5;i++)
    {
        j = 0;
        while(cond[i][j] != '\0')
        {
            switch(cond[i][j])
            {
                case 'N' :
                     j++;
                     if(isdigit(cond[i][j]))
                     {
                         f = cond[i][j] - '0';
                         j++;
                         if ( floor[i] == f )
                             return 0;
                     }
                     else
                     {
                         f = cond[i][j] - 'A' + 1;
                         j++;
                         if( floor[i]-1 == floor[f] || floor[i]+1 == floor[f] )
                             return 0;
                     }
                     break;
                
                case '+' :
                     j++;
                     f = cond[i][j] - 'A' + 1;
                     j++;
                     if(!(floor[i] > floor[f]))
                         return 0;
                     break;
                
                case '-' :
                     j++;
                     f = cond[i][j] - 'A' +1;
                     j++;
                     if(!(floor[i] < floor[f]))
                         return 0;
                     break;
                
                case ' ' :
                     j++;
                     break;
                default :
                     if(isdigit(cond[i][j]))
                     {
                         f = cond[i][j] - '0';
                         j++;
                         if(floor[i] != f)
                             return 0;
                     }
                     else
                     {
                         f = cond[i][j] - 'A' +1;
                         j++;
                         if( floor[i]-1 != floor[f] && floor[i]+1 != floor[f] )
                             return 0;
                     }
                     break;
            }
        }
    }
    return 1;
}
                     
void perm(int floor[], char cond[10][100], int count, int ans[])
{
    int i;
    if( count == 6 )
    {
        if(check(floor,cond))
        {
            for(i=1;i<=5;i++)
                ans[i] = floor[i];
        }
    }
    for(i=1;i<=5;i++)
    {
        if( floor[i] == -1 )
        {
            floor[i] = count;
            perm(floor,cond,count+1,ans);
            floor[i] = -1;
        }
    }
}

int char2int(char c[])
{
    int i=0, sum=0;
    while(c[i]!='\0')
    {
        sum = sum*10 + c[i]-'0';
        i++;
    }
    return sum;
}

int main()
{
    int t;
    char c[2];
    std::cin.getline(c,2);
    t = char2int(c);
    while(t--)
    {
        char cond[10][100], order[10];
        int floor[100], ans[100];
        int i;
        for(i=1;i<=5;i++)
        {
            std::cin.getline(cond[i],100);
            floor[i] = -1;
        }
        perm(floor,cond,1,ans);
        char ch='A';
        for(i=1;i<=5;i++)
        {
            order[ans[i]] = ch;
            ch++;
        }
        for(i=1;i<=5;i++)
            cout<<order[i];
        cout<<endl;
    }

    //getch();
    return 0;
}
        
                                
        
