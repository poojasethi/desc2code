#include <iostream>
#include <sstream>
#include <map>
#include <vector>
#include <algorithm>
#include <cstdio>

using namespace std;

map<char, int> m;

bool check(string s, vector<string> v)
{
    for(int i = 0; i < 5; i++) {
        m[s[i]] = i+1;
    }
    string s1;
    string temp = "ABCDE";
    for(int i = 0; i < 5; i++) {
        stringstream ss;
        ss << v[i];
        while(ss.good()) {
            ss >> s1;
            if(s1.size() == 1) {
                if(s1[0] >= '1' && s1[0] <= '5') {
                    if(m[temp[i]] != s1[0]-'0') return false;
                }
                else {
                    if(abs(m[temp[i]]-m[s1[0]]) != 1) return false;
                }
            }
            else if(s1[0] == 'N') {
                if(s1[1] >= '1' && s1[1] <= '5') {
                    if(m[temp[i]] == s1[1]-'0') return false;
                }
                else {
                    if(abs(m[temp[i]]-m[s1[1]]) == 1) return false;
                }
            }
            else {
                if(s1[0] == '+') {
                    if(m[temp[i]] < m[s1[1]]) return false;
                }
                else {
                    if(m[temp[i]] > m[s1[1]]) return false;
                }
            }
        }
    }
    return true;
}

int main()
{
        int t;

        cin >> t;
        getchar();
        while(t--) {
                vector<string> v;
                string s;
                for(int i = 0; i < 5; i++) {
                    getline(cin, s);
                    v.push_back(s);
                }
                string ss = "ABCDE";
                do {
                    if(check(ss, v)) {
                        cout << ss << endl;
                        break;
                    }
                }while(next_permutation(ss.begin(), ss.end()));
        }
}
