#include<iostream>
#include<cstdlib>
using namespace std;

int main(void)
{
	int T, N, count[103], A[103];
	long long sum;

	scanf("%d", &T);

	while (T--)
	{
		scanf("%d", &N);

		scanf("%lld", &A[0]);

		for (int i = 0; i < N; i++)
			count[i] = 1;

		for (int i = 1; i < N; i++)
		{
			scanf("%d", &A[i]);

			if (A[i] > A[i - 1])
			{
				if (count[i] <= count[i - 1])
				{
					count[i] = count[i - 1] + 1;
				}
			}
			else if (A[i] < A[i - 1])
			{
				if (count[i - 1] <= count[i])
				{
					count[i - 1] = count[i] + 1;
				}
			}
		}

		for (int i = 1; i < N; i++)
		{
			if (A[i] > A[i - 1])
			{
				if (count[i] <= count[i - 1])
				{
					count[i] = count[i - 1] + 1;
				}
			}
			else if (A[i] < A[i - 1])
			{
				if (count[i - 1] <= count[i])
				{
					count[i - 1] = count[i] + 1;
				}
			}
		}

		sum = 0;
		for (int i = 0; i < N; i++)
			sum += count[i];
		printf("%lld\n", sum);
	}

	return 0;
}