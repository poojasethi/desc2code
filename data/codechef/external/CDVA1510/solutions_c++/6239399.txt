#include<bits/stdc++.h>
#define f(i,a,b) for(long long int i=(long long int)a;i<(long long int)b;i++)
typedef long long int lli ;
int main()
{
lli i,j,k,c,t,n;
lli a[100005]={0},b[100005]={0};
 
 f(i,0,100004)
 b[i]=-1;
 
 //f(i,0,100004)  
 //printf("%lld ",b[i]);
 
scanf("%lld",&n);
  f(i,0,n)
	scanf("%lld",&a[i]); 
i=0,j=1,k=2,c=0;
   while(i<n-2&&j<n-1&&k<n)
    {
    	if(a[i]>a[j])
    	{ // 	printf("in a[i]=%lld>a[j]=%lld i=%lld j=%lld k=%lld c=%lld b[%lld]=%lld\n ",a[i],a[j],i,j,k,c,j,b[j]);
    	
    		if(b[j]!=-1&&k==j+1)
    		{
    			c+=b[j];
    			j++;
    			
//printf("in a[i]=%lld>a[j]=%lld && b[j]!=-1 i=%lld j=%lld k=%lld c=%lld b[%lld]=%lld\n ",a[i],a[j],i,j,k,c,j,b[j]);
    		}
    		else {if(a[j]>a[k])
    		 {   
    		 	c++;
    		 	if(b[j]==-1)b[j]=1;
    		 	else b[j]++;
    	//	 printf("in a[j]=%lld>a[k]=%lld i=%lld j=%lld k=%lld c=%lld  b[%lld]=%lld\n",a[j],a[k],i,j,k,c,j,b[j]);
    		 }
    		 k++;
    		if(k==n)
    		{
    			j++; k=j+1;
    		//	printf("in k==n i=%lld j=%lld k=%lld c=%lld  b[%lld]=%lld\n",i,j,k,c,j,b[j]);
    		}
    		}
    	   if(j==n-1)
    	   {
    	   	 i++;j=i+1;k=j+1;
    	   	 //printf("in j==n-1 i=%lld j=%lld k=%lld c=%lld  b[%lld]=%lld\n",i,j,k,c,j,b[j]);
    	   }
    		
    	}
    	
    	else
    	{
    		j++;
    		k=j+1;
    		//printf("in else i=%lld j=%lld k=%lld c=%lld\n",i,j,k,c);
    		if(j==n-1)
    		{ 
    			i++;
    			j=i+1;
    			k=j+1;
    		//	printf("in else if i=%lld j=%lld k=%lld c=%lld\n",i,j,k,c);
    		}
    	}
    }
   
printf("%lld\n",c);
 
return 0;
}
 
 