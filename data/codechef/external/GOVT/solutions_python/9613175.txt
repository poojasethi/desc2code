#include <stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>
 
long long int fn(long long int a[], long long int b, long long int i){
    return (b*a[i+1]+b+a[i+1]);
}
 
int main() {
 
    /* Enter your code here. Read input from STDIN. Print output to STDOUT */    
    long long int T, N, M, X, i, j, c_sort[1005], sorted[1005], k, l, count;
    scanf("%lld", &T);
    while(T--){
        scanf("%lld %lld", &N, &M);
        for(i=1;i<=N;i++){
            scanf("%lld", &sorted[i]);
//            c_sort[X]++;
        }
        /*
        j=1;
        for(i=0;i<1001;i++){
            while(c_sort[i]!=0){
                sorted[j]=i;
                j++;
                c_sort[i]--;
            }
        }
        */
        /*
        for(i=0;i<5;i++){
            printf("%lld\n", sorted[i]);
        }
        */
        if(N==1){
            printf("%lld\n", sorted[1]%M);
        }
        else{
            count=sorted[1]*sorted[2]+sorted[1]+sorted[2];
            for(k=2;k<N;k++){
                count=fn(sorted, count, k)%M;
//                printf("%lld\n", count);
            }
            printf("%lld\n", count%M);
        }
    }
    return 0;
}