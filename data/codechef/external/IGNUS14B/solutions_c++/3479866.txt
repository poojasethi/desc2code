#include <iostream>
#include<cstdio>
#include<cstring>
#include<string>
#include<algorithm>
using namespace std;
  bool isPrime[100010];
   int odd[100010];
int manchester(string s1) {
string s="^";
int len = s1.length();
for(int i=0; i<len; i++) {
s += '#';
s += s1[i];
}
s += "#";
len = s.length();
int C=0, R=0, im;
int *p = new int[len];
for(int i=1; i<len; i++) {
im = C - (i-C);
p[i] = (R > i)?min(R-i, p[im]):0;
while(s[i+1+p[i]] == s[i-1-p[i]]) p[i]++;
if(i+p[i] > R) {
C = i;
R = i+p[i];
}
}
long long int ans=0;
for(int i=1;i<len;i++)
{
  if(p[i]%2==0 && p[i]>0)
  ans++;
  else
  ans+=odd[p[i]];
}
 printf("%lld\n",ans);
}

int main() {
    char ss[100010];

     isPrime[0] = isPrime[1] = false;
    for (int i = 2; i < 100010; ++i) {
isPrime[i] = true;
}
for (int i = 2; i * i < 100010; ++i) {
if (isPrime[i]) {
for (int j = i * i; j < 100010; j += i) {
isPrime[j]=false;
}
}
}
  int count=0;
  odd[1]=0;
  for(int i=3;i<100010;i=i+2)
  {
  if(isPrime[i])
  count++;
   odd[i]=count;
}
  int t;
  scanf("%d",&t);
  while(t--)
  {
     scanf("%s", ss);
     string s = string(ss);
      manchester(s);
  }
	return 0;
}