#include <iostream>
#include <stdio.h>
#include <algorithm>
#include <map>
#include <set>
#include <cmath>
#include <string>
#include <vector>
#include <fstream>
using namespace std;

//Separar por O e por X compara TODAS AS COMBINAÃ‡OES

struct board
{
	char a[4][4];
};

static string winning_configsx[5] = {"XXXX","XTXX","XXTX","TXXX","XXXT"};
static string winning_configso[5] = {"OOOO","TOOO","OTOO","OOTO","OOOT"};

bool xwins(board b)
{
	vector<string> aux;
	for(int i = 0; i < 4; i++)
	{
		string slin = "";
		for(int j = 0; j < 4; j++)
		{
			slin += b.a[i][j];
		}
		aux.push_back(slin);
	}
	for(int i = 0; i < 4; i++)
	{
		string scol = "";
		for(int j = 0; j < 4; j++)
		{
			scol += b.a[j][i];
		}
		aux.push_back(scol);
	}
	string sdiag1 = "";
	string sdiag2 = "";
	for(int i = 0; i < 4; i++)
	{
		sdiag1 += b.a[i][i];
	}
	aux.push_back(sdiag1);
	for(int i = 0; i < 4; i++)
	{
		sdiag2 += b.a[i][3-i];
	}
	aux.push_back(sdiag2);
	
	for(int a = 0; a < aux.size(); a++)
	{
		for(int b = 0; b < 5; b++)
		{
			if(aux[a]==winning_configsx[b])
			{
				return true;
				break;
			}
		}
	}
	return false;
}
	
bool owins(board b)
{
	vector<string> aux;
	for(int i = 0; i < 4; i++)
	{
		string slin = "";
		for(int j = 0; j < 4; j++)
		{
			slin += b.a[i][j];
		}
		aux.push_back(slin);
	}
	for(int i = 0; i < 4; i++)
	{
		string scol = "";
		for(int j = 0; j < 4; j++)
		{
			scol += b.a[j][i];
		}
		aux.push_back(scol);
	}
	string sdiag1 = "";
	string sdiag2 = "";
	for(int i = 0; i < 4; i++)
	{
		sdiag1 += b.a[i][i];
	}
	aux.push_back(sdiag1);
	for(int i = 0; i < 4; i++)
	{
		sdiag2 += b.a[i][3-i];
	}
	aux.push_back(sdiag2);
	for(int a = 0; a < aux.size(); a++)
	{
		for(int b = 0; b < 5; b++)
		{
			if(aux[a]==winning_configso[b])
			{
				return true;
				break;
			}
		}
	}
	return false;
}

bool boardfull(board t)
{
	int aux = 0;
	for(int i = 0; i < 4; i++)
		{
			for(int j = 0; j < 4; j++)
			{
				if(t.a[i][j] != '.')
				aux++;
			}
		}
		if(aux==16)
		return true;
		else
		return false;
}
	
int main()
{
	int t;
	cin >> t;
	for(int i = 0; i < t; i++)
	{
		board x;
		for(int i = 0; i < 4; i++)
		{
			for(int j = 0; j < 4; j++)
			{
				cin >> x.a[i][j];
			}
		}
		
		if(xwins(x)==true)
		cout << "Case #"<<i+1<<": " << "X won" << endl;
		else if(owins(x)==true)
		cout << "Case #"<<i+1<<": " << "O won" << endl;
		else if(xwins(x) == false and owins(x)==false and boardfull(x)==true)
		cout << "Case #"<<i+1<<": " << "Draw" << endl;
		else
		cout << "Case #"<<i+1<<": " << "Game not completed" << endl;	
	}
	
	return 0; 
	
	//OOOX
//X.TX
//X.XX
//OOOX

}