#include <iostream>
#include<stdio.h>
using namespace std;

bool isOpening(char ch)
{
    return (ch=='(' || ch=='[' || ch=='{');
}

bool isClosing(char ch)
{
    return (ch==')' || ch==']' || ch=='}');
}

bool check(char ch, char ch1)
{
    return((ch=='{'&&ch1=='}')||(ch=='['&&ch1==']')||(ch=='('&&ch1==')'));
}

int main()
{
    int t;
    cin>>t;
    while(t--)
    {
        int i,j=-1,flag=0;
        char s[1001],a[1001]={'\0'};
        scanf("%s",s);
        for(i=0;s[i]!='\0';i++)
        {
            if(isOpening(s[i]))
            {
                j++;
                a[j]=s[i];
            }
            else if(isClosing(s[i]))
            {
                if(!check(a[j],s[i]))
                {flag=1;
                break;
                }
                else
                {
                    a[j]='\0';
                    j--;
                }
            }
        }

        if(flag==0 && j==-1)
        cout<<"BALANCED"<<endl;

        else
        cout<<"NOT BALANCED"<<endl;
    }
    return 0;
}