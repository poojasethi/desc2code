#include<bits/stdc++.h>

using namespace std;

map<long long int ,long long int> count_left;
map<long long int,long long int> count_right;
map<long long int,long long int>:: iterator it;
long long int a[1000007];
long long int calc_ans(long long int sum)
{
	long long int ans,x,y;
	it=count_left.begin();
	ans=0;
	while(it!=count_left.end())
	{
		x=it->first;
		y=it->second;
		//cout<<x<<" "<<y<<" "<<count_right[sum-x];
		ans+=(y*(count_right[sum-x]));
		it++;
	}
	return ans;
}
void mapcount(long long int index,long long int temp)
{
	if(index==1)
	{
		count_left[temp]++;
	}
	else
	{
		count_right[temp]++;
	}
}
void assign_count(long long int loop,long long int index,long long int offset)
{
	long long int i,sum,j,temp;
	for(i=0;i<(1<<loop);i++)
	{
		sum=0;
		for(j=0;j<loop;j++)
		{
			temp=(1<<j);
			if((i & temp)!=0)
			{
				sum+=(a[j+offset+1]);
			}
		}

		mapcount(index,sum);
	}
}
void display()
{
	it=count_right.begin();
	cout<<"\n";
	while(it!=count_right.end())
	{
		cout<<it->first<<" "<<it->second<<"\n";
		it++;
	}
}
int main()
{
	long long int n,k,ans,mid,i;
	cin>>n>>k;
	for(i=1;i<=n;i++)
	{
		cin>>a[i];
	}
	mid=(n/2);
	assign_count(mid,1,0);
	assign_count(n-mid,2,mid);
//	display();
	/*cout<<"h";
	cout<<ans<<"\n";*/
	ans=calc_ans(k);
	cout<<ans<<"\n";
	return 0;
}