#include <bits/stdc++.h>

using namespace std;

#define pb push_back
#define mp make_pair
#define ll long long int
#define s(x) scanf("%d", &x)
#define sl(x) scanf("%lld", &x)
#define mod 1000000007

int a[100005];

int main()
{
    int t, n, m, x, y, sum, i, j, k;
    ll ans;
    s(t);
    while (t--) {
        s(n);
        s(m);
        s(x);
        memset(a, 0, sizeof(a));
        while (n--) {
            s(y);
            ++a[y%m];
        }
        ans = sum = 0;
        for (i = 0; i <= x; ++i)
            sum += a[i];
        ans = sum * 1LL * a[0];
        for (i = 1, j = m-1, k = x; i < m; ++i, --j, k = (k-1+m)%m) {
            sum = sum - a[k] + a[j];
            ans += sum * 1LL * a[i];
        }
        printf("%lld\n", ans);
    }
    return 0;
}
