#include<iostream>
#include<stdio.h>

using namespace std;

int main()
{
	int t,N,M,X;
	cin >> t;
	while(t--)
	{
		cin >>N>>M>>X;
		int sum[M],arr[M];
		int count =0,temp;
		long long ans = 0;
		for(int i=0; i<M;i++)
		{
			arr[i] = 0;
		}
		for(int i=0;i<N; i++)
		{
			cin>>temp;
			arr[temp%M]++;
		}
		sum[0] = arr[0];
		for(int i=1;i<M;i++)
		{
			sum[i] = sum[i-1] + arr[i];
		}
		int i = 0;
		for(i=0;i<=X;i++)
        {
            ans += arr[i] * sum[X-i];
            ans += arr[i] * (sum[M-1] - sum[M-i-1]);
        }
        for(; i < M;i++)
        {
        	ans += arr[i] * (sum[M+X-i] - sum[M - i-1]);
        }
		cout<<ans<<endl;

	}

	getchar();
	return 0;
}
