#include <bits/stdc++.h>
#define fr(i,a,b) for(int i=a;i<b;++i)
#define rf(i,a,b) for(ll  i=a;i>=b;--i)
#define pyes cout<<"YES"<<endl
#define pno cout<<"NO"<<endl
#define ff first
#define ss second
#define pb push_back
#define re return
#define ioS ios_base::sync_with_stdio(0);cin.tie(0);
#define coutd(a,b) cout<<a<<" "<<b<<endl
#define coutt(a,b,c)cout<<a<<" "<<b<<" "<<c<<endl;
#define coutq(a,b,c,d)cout<<a<<" "<<b<<" "<<c<<" "<<d<<endl;
#define cina(a,n) fr(i,0,n)cin>>a[i]
#define coutar(a,n)  fr(i,0,n)cout<<a[i]<<" ";cout<<endl;
#define couts(a) cout<<a<<endl
#define MAXN 1001000
#define MOD  1000000007
using namespace std;

typedef long long int ll;
typedef long double ld;
typedef pair<int,int>pi;
multiset<int>mst;
set<int>st;
set<int>::iterator it;
vector<ll>g[MAXN];
map<ll,ll>mp[MAXN],m1[MAXN],m2[MAXN];

int a[MAXN];

ll b[300100];

int main()
{
    ioS;
    int t,n,m,x;
    cin>>t;
    while(t--)
    {
       cin>>n>>m>>x;
     fr(i,0,m+x+2)b[i]=0;
       for (int i = 1; i<=n; i++)
       {
           cin>>a[i];
           a[i] = a[i]%m;
           b[a[i]]++;
       }

       fr(i,1,m+x+1)b[i] = b[i-1] + b[i];

       ll ans = 0;

       fr(i,1,n+1){
           if (x >= a[i])ans += b[x - a[i]];
           ans += (b[m+x-a[i]] - b[m-1-a[i]]);
       }
       couts(ans);
    }

}



