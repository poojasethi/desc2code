#include<bits/stdc++.h>
using namespace std;
int main()
{
	int i,t,n,m=0,x,arr[100008]={0},a,r;
	long long ans;
	scanf("%d",&t);
	while(t--)	{

     
	 scanf("%d%d%d",&n,&m,&x);
	
	 for(i=0;i<n;i++)
	 { scanf("%d",&a);
	  arr[a%m]++;	
	 }
	
	 ans=0;
	 for(i=1;i<m;i++) arr[i] += arr[i-1]; 
	 // sum of 2 numbers will vary from 0 to 2*m-2
     // ans=-(arr[x/2]+arr[(m+x)/2]-arr[(m-1)/2]);
	 
     for(i=0;i<m;i++) {
    
	   if(i == 0) r = arr[0];
       else r = arr[i]-arr[i-1];
	
	    if(i<=x)
	    {    ans += r*arr[x-i];
	         ans += r*(arr[m-1]-arr[m-1-i] ) ;  	
        }
        else ans += r*(arr[m+x-i]-arr[m-1-i]);    
		}
	printf("%lld\n",ans);
	for(i=0;i<m;i++)arr[i]=0;
	
	
    }
	return 0;
	
}
