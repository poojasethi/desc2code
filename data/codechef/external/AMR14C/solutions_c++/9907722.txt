#include <stdio.h>
#include <algorithm>
#include <cmath>
#include <utility>
#include <queue>
#include <cstring>

#define MAX 100001
#define BASE 29
#define MOD 1000000007
using namespace std;

int main() {
  //freopen("input.inp", "rt", stdin);
  //freopen("output.oup", "wt", stdout);
  
  int t, n, m, x;
  int mod[MAX];
  int mods[MAX];
  long long n_pair;
  int tmp;  
  
  scanf("%d", &t);
  while (t--)
  {        
    n_pair = 0;
    scanf("%d%d%d", &n, &m, &x);    
    for (int i = 0; i < m; ++i)
      mod[i] = 0;
    for (int i = 0; i < n; ++i)
    {
      scanf("%d", &tmp);
      ++mod[tmp % m];
    }
    mods[0] = mod[0];
    for (int i = 1; i < m; ++i)
      mods[i] = mod[i] + mods[i - 1];    
    //printf("%d\n", mods[m-1]);
       
    for (int i = 0; i <= x; ++i)
    {
      n_pair += mod[i] * (mods[m - 1] - mods[m - i - 1] + mods[x - i]);
      //printf("%d %d %d\n", i, x-i, m-i-1);
    }
    for (int i = x + 1; i < m; ++i)
    {
      n_pair += mod[i] * (mods[m - i + x] - mods[m - i - 1]);
      //printf("%d %d %d\n", i, m-i-1, m-i+x);
    }        
    //printf("%I64d\n", n_pair);
    printf("%lld\n", n_pair);
  }
  
  return 0;
}