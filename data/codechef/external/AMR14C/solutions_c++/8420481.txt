#include <iostream>
#include <cstdio>
using namespace std;

long long cnt1[100000],cnt2[100000];

long long find1(int a,int b){
    return cnt2[b]*cnt1[a];
}

long long find2(int i,int a,int b,int m){
    if(a>=m)
        return 0;
    if(b>=m)
        return cnt1[i]*(cnt2[m-1]-cnt2[a-1]);
    return cnt1[i]*(cnt2[b]-cnt2[a-1]);
}

int main(){
    int t,n,m,x,temp;
    scanf("%d",&t);
    while(t--){
        long long ans=0LL;
        scanf("%d%d%d",&n,&m,&x);
        for(int i=0;i<100000;i++)
            cnt1[i]=0;
        for(int i=0;i<n;i++){
            scanf("%d",&temp);
            temp%=m;
            cnt1[temp]++;
        }
        cnt2[0]=cnt1[0];
        for(int i=1;i<100000;i++)
            cnt2[i]=cnt2[i-1]+cnt1[i];
        for(int i=0;i<=x;i++)
            ans+=find1(i,x-i);
        for(int i=0;i<m;i++)
            ans+=find2(i,m-i,m+x-i,m);
        printf("%lld\n",ans);
    }
}
