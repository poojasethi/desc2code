#include<bits/stdc++.h>
#define ll long long
#define sl(a) scanf("%lld",&a);

using namespace std;

ll cnt[1000005],maxval=100004,arr[100005];

void set_()
{
	ll i;
	for(i=0;i<1000005;i++)
	{
		cnt[i]=0;
	}
}
int main()
{
	ll i,t,n,m,x,a,sum;
	sl(t)
	while(t--)
	{
		set_();
		sum=0;
		sl(n)
		sl(m)
		sl(x)
		for(i=1;i<=n;i++)
		{
			sl(a)
			arr[i]=a%m;
			cnt[arr[i]]++;
		}
		for(i=1;i<1000005;i++)
		{
			cnt[i]+=cnt[i-1];
		}
		for(i=1;i<=n;i++)
		{
			if(arr[i]<=x)
			{
				sum+=cnt[x-arr[i]];	
			}
			sum+=cnt[m-arr[i]+x]-cnt[m-arr[i]-1];
		}
		printf("%lld\n",sum);
	}
	return 0;
}
