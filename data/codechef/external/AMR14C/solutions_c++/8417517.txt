#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
int main(){
  ll t,n,m,x,a[100000],i,z,x1,x2,y1,y2;
  map<ll,ll> mp;
  scanf("%lld",&t);
  while(t--){
    ll ht[200002]={0};
    scanf("%lld%lld%lld",&n,&m,&x);
    for(i=0;i<n;i++){
      scanf("%lld",&z);
      a[i]=z%m;
      ht[a[i]]++; 
    }
    ll cn=0;
    for(i=1;i<=m+x;i++) 
       ht[i]+=ht[i-1];
    for(i=0;i<n;i++){
       x1=0;
       x2=x-a[i];
       y2=m+x;
       y1=m-a[i];
       if(x2>=0){
         cn+=ht[x2];
       }     
       cn+=(ht[y2-a[i]]-ht[y1-1]);  
    } 
    printf("%lld\n",cn);
  }
  return 0;
}
  
     