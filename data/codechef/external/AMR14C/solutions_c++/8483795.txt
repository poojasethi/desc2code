/*
    ***************************************************************************************************************
     
                              Author : SUBHENDU SETHI
                              Codechef Handle: subhendu_sethi
                              SPOJ Handle: codekatte
                              Codeforces Handle: subhendu_sethi
                              UVA Handle: codekatte
     
    **************************************************************************************************************
    */
    #include <bits/stdc++.h>
    #define ll long long int
    #define LD long double
    #define si(x) scanf("%lld",&x)
    #define sl(x) scanf("%lld",&x)
    #define sd(x) scanf("%lf",&x)
    #define sc(x) scanf("%c",&x)
    #define ss(x) scanf("%s",x)
    #define vl vector<ll>
    #define vi vector<int>
    #define vvl vector< vl >
    #define vvi vector< vi >
    #define ii pair<int,int>
    #define pb push_back
    #define mp make_pair
    #define F first
    #define S second
    #define MOD 1299709
    #define MOD1 1000000000
    #define mem(x,y) memset(x,y,sizeof(x))
    #define f(i,a,b) for(ll i=(a);i<(b);i++)
    #define max_int_value 2147483647
    #define max_long_value 9223372036854775807
    #define FOR( gg,itit )  for( auto itit=gg.begin();itit!=gg.end();itit++ )
    #define ub(X,v) upper_bound(X.begin(),X.end(),v)
    #define lb(X,v) lower_bound(X.begin(),X.end(),v)
    #define cons 5000
    #define MAXN 250000
    #define gc getchar_unlocked
    using namespace std;
    ll n,t,m,x;
    ll hash[MAXN];
    ll data[MAXN/2];
    /*  bool isP[150000];
    vl primes;
    void prime()
    {
      int  flag = 0;
      primes.pb(2);primes.pb(3);primes.pb(5);
      f(i,6,32000)
      {
        for(int j=0;primes[j]*primes[j]<=i;j++)
        {
          flag = 0;
          //cout<<"i primes[j] "<<i<<" "<<primes[j]<<endl;
          if(i%primes[j] == 0)
          {
            flag = 1;
            break;
          }
        }
          if(!flag)
          {
            primes.pb(i);
            isP[i]  = true;
          }
      }
    }*/
    void prec()
    {
 
    }
    void read(void)
    {
        scanf("%lld",&t);
    }
    void solve()
    {
        while(t--)
        {
            memset(hash,0,sizeof(hash));
            scanf("%lld %lld %lld",&n,&m,&x);
            f(i,0,n)
            {
                scanf("%lld",&data[i]);
                data[i]%=m;
                hash[data[i]]++;
            }
            f(i,1,m+x+1)
            {
                hash[i] = hash[i-1]+hash[i];
            }
            ll ans =0;
            f(i,0,n)
            {
                if(data[i]<=x)
                {
                    ans+=hash[x-data[i]];
                }
                ans+=hash[m+x-data[i]]-hash[m-1-data[i]];
            }
            printf("%lld\n",ans);
        }
    }
    int main()
    {
        
        read();
        solve();
        return 0;
    }
    // A MAN MUST MATH oj 