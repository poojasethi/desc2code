#include <iostream>
#include <vector>
#include <math.h>
using namespace std;

int main()
{
	int t,n,m,x;
	cin>>t;
	while(t--)
	{
		cin>>n>>m>>x;
		int A[n];
		vector<long long> times(m,0);
		vector<long long> sumtimes(m,0);
		for(int i = 0;i<n;i++)
		{
			cin>>A[i];
			times[A[i]%m]++;
		}
	
		sumtimes[0] = times[0];
		for(int i = 1;i<m;i++)
		{
			sumtimes[i] = times[i]+sumtimes[i-1];
		}
	
		long long ans = 0;
	for(int i = 0;i<n;i++)
		{
			int y = A[i]%m;
			if(y<=x)
			{
				ans+=sumtimes[x-y]+sumtimes[m-1]-sumtimes[m-y-1];
			}
			else{ans+=sumtimes[m+x-y]-sumtimes[m-y-1];}

		}
		cout<<ans<<endl;
	}
}