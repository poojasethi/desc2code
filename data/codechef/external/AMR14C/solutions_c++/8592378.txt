#include<iostream>
#include<algorithm>
#include<stdio.h>

using namespace std;

long long int a[100005], sum[100005];
long long int n, m, x, ans;
void calculate();

int main()
{
	long long int i, t, y;

	cin >> t;

	while (t--)
	{
		cin >> n >> m >> x;

		for (i = 0; i < m; i++)
		{
			a[i] = 0;
		}

		for (i = 0; i < n; i++)
		{
			cin >> y;
			y = y%m;
			a[y]++;
		}

		calculate();

		printf("%lld\n", ans);

	}

	return 0;
}

void calculate()
{
	long long int i, j;

	sum[0] = a[0];

	for (i = 1; i < m; i++)
	{
		sum[i] = sum[i-1] + a[i];
	}

	i = 0;
	j = x;
	ans = 0;

	while (i < m)
	{
		if (i <= x)
		{
			ans += a[i] * (sum[j] + sum[m - 1] - sum[m - i - 1]);
		}
		else
		{
			ans += a[i] * (sum[j] - sum[j - x - 1]);
		}

		i++;
		j--;

		if (j < 0)
		{
			j = m - 1;
		}
	}
	
}