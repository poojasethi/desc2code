#include <bits/stdc++.h>
using namespace std;

#define ll long long

ll gcd(ll a,ll b)
{
    if(b==0) return a;
    else return gcd(b,a%b);
}

ll lcm(ll a,ll b)
{
    return (a*b)/gcd(a,b);
}

int main()
{
    ll n,i,j,k,l,r,q,a,b,lc;
    scanf("%lld",&n);
    ll arr[n+1];
    for(i=1;i<=n;i++) scanf("%lld",&arr[i]);
    scanf("%lld",&q);
    while(q--)
    {
        scanf("%lld %lld",&l,&r);
        string s;
        cin>>s;
        a=b=1;
        for(i=1;i<l;i++) a=lcm(arr[i],a);
        for(i=r+1;i<=n;i++) b=lcm(arr[i],b);
        lc=lcm(a,b);
        lc%=26;
        for(i=0;i<s.size();i++)
        {
            if(s[i]>='A'&&s[i]<='Z')
            {
                s[i]-=lc;
                if(s[i]<'A') s[i]+=26;
                printf("%c",s[i]);
            }
            else
            {
                s[i]-=lc;
                if(s[i]<'a') s[i]+=26;
                printf("%c",s[i]);
            }
        }
        cout<<endl;
    }
    return 0;
}
