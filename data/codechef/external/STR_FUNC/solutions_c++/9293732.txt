#include <iostream>
#include <stdio.h>
using namespace std;

int n;
long long mod=1000000007;
long long A[600500];
long long Gsm[600500][21];
long long Fsm[600500][21];
long long F[600500];
long long G[600500];

int main(){
	scanf("%d",&n);
	for(int i=0;i<n;i++){
		scanf("%lld",&A[i]);
	}
	for(int i=0;i<n;i++){
		for(int j=0;j<=20;j++){
			Gsm[i][j]=0;
			if(j>0){
				Gsm[i][j]=Gsm[i][j-1];
			}
			if(i&(1<<j)){
				Gsm[i][j]+=Gsm[i-(1<<j)][j];
			}
			Gsm[i][j]%=mod;
		}
		F[i]=(Gsm[i][20]*Gsm[i][20])%mod;
		F[i]+=(A[i]*A[i])%mod;
		F[i]%=mod;
		
		for(int j=0;j<=20;j++){
			Fsm[i][j]=0;
			if(j>0){
				Fsm[i][j]=Fsm[i][j-1];
			}
			if(i&(1<<j)){
				Fsm[i][j]+=Fsm[i-(1<<j)][j];
			}
			Fsm[i][j]%=mod;
		}
		for(int j=0;j<=20;j++){
			Fsm[i][j]+=F[i]*F[i];
			Fsm[i][j]%=mod;
		}
		G[i]=Fsm[i][20];
		for(int j=0;j<=20;j++){
			Gsm[i][j]+=G[i];
			Gsm[i][j]%=mod;
		}
	}
	long long sol=0;
	for(int i=0;i<n;i++){
		sol+=(((i*G[i])%mod)*F[i])%mod;
		sol%=mod;
	}
	printf("%lld\n",sol);
}