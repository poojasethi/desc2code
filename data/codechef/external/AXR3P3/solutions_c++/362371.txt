#include<iostream>
#include<cstdio>
#include<stack>
#include<string.h>
using namespace std;
inline int inputpre(char c)
{
	switch(c)
	{
		case '+':
		case '-':return 1;
		case '*':
		case '/':return 3;
		case '^':return 6;
		case '(':return 9;
		case ')':return 0;
		default:return 7;
	}
}
inline int stackpre(char c)
{
	switch(c)
	{
		case '+':
		case '-':return 2;
		case '*':
		case '/':return 4;
		case '^':return 5;
		case '(':return 0;
		default:return 8;
	}
}
void
topostfix(char * infix)
{
	stack<char> s;
	int j=0;
	char temp;
	char postfix[505]={0};
	s.push('(');
	int i=strlen(infix);
	infix[i]=')';
	infix[i+1]=0;
	for(i=0;!s.empty(),infix[i]!=0;i++)
	{
		if(infix[i]==' ')
			continue;
		while(stackpre(s.top())>inputpre(infix[i]))
		{
			postfix[j++]=s.top();
			s.pop();
		}
		if(stackpre(s.top())!=inputpre(infix[i]))
			s.push(infix[i]);
		else
			s.pop();
	}
	postfix[j]=0;
	puts(postfix);
}
		
		
int main()
{
	int t;
	
	scanf("%d",&t);
	char infix[505];
	while(t--)
	{
		scanf("%s",infix);
		topostfix(infix);
	}
	return 0;
}