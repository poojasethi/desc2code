#include<iostream>
using namespace std;
int main()
{
      int N,M;
      cin>>N>>M;
      int i,j,mat[N][N];
      for(i=0;i<N;i++)
            for(j=0;j<N;j++)
            cin>>mat[i][j];
      while(M--)
      {
            int angle,a,b;
            cin>>angle;
            a=angle/90;
            if(a%4==0)
            {
                  for(i=0;i<N;i++)
                  {
                    for(j=0;j<N;j++)
                        cout<<mat[i][j]<<" ";
                        cout<<"\n";
                  }
            }
            else if(a%4==1)
            {
                  for(i=0;i<N;i++)
                  {
                        for(j=N-1;j>=0;j--)
                        {
                              cout<<mat[j][i]<<" ";

                        }
                        cout<<"\n";
                  }
            }
             else if(a%4==2)
            {
                  for(i=N-1;i>=0;i--)
                  {
                        for(j=N-1;j>=0;j--)
                        {
                              cout<<mat[i][j]<<" ";

                        }
                        cout<<"\n";
                  }
            }
             else
            {
                  for(i=N-1;i>=0;i--)
                  {
                        for(j=0;j<N;j++)
                        {
                              cout<<mat[j][i]<<" ";

                        }
                        cout<<"\n";
                  }
            }
            cout<<endl;
      }

}
