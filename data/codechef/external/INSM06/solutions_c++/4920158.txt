#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>

using namespace std;


int main(){

    int N,M,angle,turn;
    int arr[100][100];

    scanf("%d %d",&N,&M);

    for(int i=0;i<N;i++){

        for(int j=0;j<N;j++){
            scanf(" %d ",&arr[i][j]);
        }
    }

    while(M--){

            scanf("%d",&angle);
            turn=angle/90;

            if(turn%4==0){

                    for(int i=0;i<N;i++){
                        for(int j=0;j<N;j++){
                            printf("%d ",arr[i][j]);
                        }
                        printf("\n");
                    }

            }
            else if(turn%4==1){

                        for(int i=0;i<N;i++){
                            for(int j=N-1;j>=0;j--){
                            printf("%d ",arr[j][i]);
                            }
                            printf("\n");
                        }
            }
            else if(turn%4==2){

                        for(int i=N-1;i>=0;i--){
                            for(int j=N-1;j>=0;j--){
                                printf("%d ",arr[i][j]);
                            }
                                printf("\n");
                        }


            }
            else if(turn%4==3){

                            for(int j=N-1;j>=0;j--){
                                for(int i=0;i<N;i++){
                                    printf("%d ",arr[i][j]);
                                }
                                    printf("\n");
                            }


            }

            printf("\n");
    }
    return 0;
}
