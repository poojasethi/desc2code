#include <iostream>
using namespace std;

int main() {
	// your code goes here
	int n,m,x,i,j;
	cin>>n>>m;
	int a[n][n];
	for( i=0;i<n;++i)
	{ for( j=0;j<n;j++)
	cin>>a[i][j];
	}
	while(m--)
{	cin>>x;
	if(x%360==90)
{{
for(j=0;j<n;++j)
	 {for(i=n-1;i>=0;--i)
	  cout<<a[i][j]<<" ";
	  cout<<"\n";
	  } 
	  cout<<"\n";
	  }
	  
	  }
	  if(x%360==0)
	 { { for(i=0;i<n;++i)
	    { for(j=0;j<n;++j)
	     cout<<a[i][j]<<" ";
	     
	     cout<<"\n";
	     }
	     
	     cout<<"\n";
	     }
	     }
	     if(x%360==180)
	    { { for(i=n-1;i>=0;--i)
	       { for(j=n-1;j>=0;--j)
	          cout<<a[i][j]<<" ";
	          cout<<"\n";
	          }
	          
	          cout<<"\n";
	          }}
	          if(x%360==270)
	         { { for(j=n-1;j>=0;--j)
	            { for(i=0;i<n;++i)
	            cout<<a[i][j]<<" ";
	            
	            cout<<"\n";
	            }
	            
	            cout<<"\n";
	            }}
	       }     
	              
	  
	
	return 0;
}