#include <iostream>
using namespace std;

int main(){
    int n,m,x,k,i,j,l,p;
    cin>>n>>m;
    int a[n][n];
    int b[n][n];
    int c[n][n];
    for(i=0;i<n;i++)
    {
        for(j=0;j<n;j++)
        {
            cin>>a[i][j];
        }
    }

    for(i=0;i<m;i++)
    {
        cin>>x;
        k=x/90;
        k=k%4;
        for(l=0;l<n;l++)
            {
                for(p=0;p<n;p++)
                {
                    c[l][p]=a[l][p];
                    b[l][p]=a[l][p];
                }
            }
        for(j=0;j<k;j++)
        {
            for(l=0;l<n;l++)
            {
                for(p=0;p<n;p++)
                {
                    b[l][p]=c[n-p-1][l];
                }
            }
            for(l=0;l<n;l++)
            {
                for(p=0;p<n;p++)
                {
                    c[l][p]=b[l][p];
                }
            }
        }
        for(l=0;l<n;l++)
            {
                for(p=0;p<n;p++)
                {
                    cout<<b[l][p]<<" ";
                }
               cout<<endl;
            }
    }

    return 0;
}
