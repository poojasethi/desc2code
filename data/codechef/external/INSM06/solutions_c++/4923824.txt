#include<iostream>

using namespace std;

int main()
 {
     int n,m,angle,rots;
     cin>>n>>m;
     int arrr[n][n];
     for(int loop=0;loop<n;loop++)
     {
         for(int i_loop=0;i_loop<n;i_loop++)
            cin>>arrr[loop][i_loop];
     }
     while(m--)
     {
         cin>>angle;
         rots=angle/90;
         int mods=rots%4;
         /*switch(mods)
         {
         case 1:
             for(int loop=0;loop<n;loop++)
              {
                for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
              }
              break;

         case 2:
              for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
                break;

         case 3:
             for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
                }
                break;

         case 4:
            for(int loop=0;loop<n;loop++)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
                break;

         }
          cout<<"\n";
     }
*/












        if(rots%4==1)
         {
           for(int loop=0;loop<n;loop++)
              {
                for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
              }
         }

         else if(rots%4==2)
         {
             for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
         }
         else if(rots%4==3)
         {
             for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
                }
         }
         else if(rots%4==0)
         {
             for(int loop=0;loop<n;loop++)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
         }
     cout<<"\n";

    }
 return 0;}
