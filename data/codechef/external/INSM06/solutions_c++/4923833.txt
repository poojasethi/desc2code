#include<iostream>

using namespace std;

int main()
 {
     int n,m,angle,rots;
     cin>>n>>m;
     int arrr[n][n];
     for(int loop=0;loop<n;loop++)
     {
         for(int i_loop=0;i_loop<n;i_loop++)
            cin>>arrr[loop][i_loop];
     }
     while(m--)
     {
         cin>>angle;
         rots=angle/90;
         if(rots%4==1)
         {
           for(int loop=0;loop<n;loop++)
              {
                for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
              }
         }

         else if(rots%4==2)
         {
             for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=(n-1);i_loop>=0;i_loop--)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
         }
         else if(rots%4==3)
         {
             for(int loop=(n-1);loop>=0;loop--)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[i_loop][loop]<<" ";
                       cout<<"\n";
                }
         }
         else if(rots%4==0)
         {
             for(int loop=0;loop<n;loop++)
                {
                 for(int i_loop=0;i_loop<n;i_loop++)
                       cout<<arrr[loop][i_loop]<<" ";
                       cout<<"\n";
                }
         }
     cout<<"\n";

    }
 return 0;}
