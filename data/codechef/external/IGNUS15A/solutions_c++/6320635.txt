#include <vector>
#include <list>
#include <map>
#include <set>
#include <queue>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>

using namespace std;
#define LL_max 200000000000
#define mod 1000000007

#define LL long long
#define mp make_pair
#define pb push_back

int lcs( string X, string Y, string Z,string A )
{
    int n=X.size();
   int L[n+1][n+1][n+1][n+1];
   int i,j,k,l;
   for (i=0; i<=n; i++)
   {
     for (j=0; j<=n; j++)
     {
         for(k=0;k<=n;k++)
         {
             for(l=0;l<=n;l++)
             {
                 if (i == 0 || j == 0 || k==0 || l==0)
                    L[i][j][k][l] = 0;
                 else if (X[i-1] == Y[j-1] && Y[j-1] == Z[k-1] && Z[k-1] == A[l-1])
                    L[i][j][k][l] = L[i-1][j-1][k-1][l-1] + 1;

                 else
                    L[i][j][k][l] = max(L[i][j][k][l-1],max(L[i][j][k-1][l],max(L[i-1][j][k][l], L[i][j-1][k][l])));

             }
         }
     }
   }
   return L[n][n][n][n];
}
int main()
{
    int i,j,k,t;
    cin >> t;
    while(t--)
    {
        string s1,s2,s3,s4;
        cin >> k;
        cin >> s1 >> s2 >> s3 >> s4;
        cout << lcs(s1,s2,s3,s4) << endl;
    }
    return 0;

}
