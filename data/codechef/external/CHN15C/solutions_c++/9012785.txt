#include <bits/stdc++.h>

using namespace std;
int rpos[105][105];
int lpos[105][105];
int ldpos[105][105];
int rdpos[105][105];
int dp[105][105];
bool vis[105][105];
int n;
int rec(int l,int r){
    if(l>r)
        return 0;
    if(vis[l][r])
        return dp[l][r];
    vis[l][r]=true;
    int m=l-1+n-r;
    int a=lpos[l][l]+rpos[l][r+1]+rec(l+1,r);
    int b=rpos[r][r]+lpos[r][l-1]+rec(l,r-1);
     int c=ldpos[l][l]+rdpos[l][r+1]+rec(l+1,r);
    int d=rdpos[r][r]+ldpos[r][l-1]+rec(l,r-1);
    a=min(a,b);
    b=min(c,d);
    //cout << l << " " << r << " " << f << " " << g << endl;
    dp[l][r]=min(a,b);
    return dp[l][r];
}
int main(){
    int t;
    cin >> t;
    while(t--){
    cin >> n;
    for(int i=0;i<105;++i)
        for(int j=0;j<105;++j)
            vis[i][j]=0;
    for(int i=0;i<105;++i){
        for(int j=0;j<105;++j){
            rpos[i][j]=0;
 lpos[i][j]=0;
 ldpos[i][j]=0;
 rdpos[i][j]=0;
        }
    }
    int A[n+1];
    for(int i=1;i<=n;++i)
        cin >> A[i];



    for(int i=n;i>0;--i){
        int count=0;
        for(int j=n;j>=i;--j){
            if(A[j]>A[i])
                ++count;
            rpos[i][j]=count;
         //   cout << i << " " << j << " " << rpos[i][j] << endl;        }

    }
    }
    for(int i=1;i<=n;++i){int count=0;
        for(int j=1;j<=i;++j){
            if(A[j]>A[i])
                ++count;
            lpos[i][j]=count;
           //  cout << i << " " << j << " " << lpos[i][j] << endl;
        }

    }
    for(int i=n;i>0;--i){
        int count=0;
        for(int j=n;j>=i;--j){
            if(A[j]<A[i])
                ++count;
            rdpos[i][j]=count;
         //   cout << i << " " << j << " " << rpos[i][j] << endl;        }

    }
    }
    for(int i=1;i<=n;++i){int count=0;
        for(int j=1;j<=i;++j){
            if(A[j]<A[i])
                ++count;
            ldpos[i][j]=count;
           //  cout << i << " " << j << " " << lpos[i][j] << endl;
        }

    }

    rec(1,n);


    cout << dp[1][n] << endl;

    }
    return 0;







}
