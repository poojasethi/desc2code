#include <bits/stdc++.h>
using namespace std;
double dist[1020][1020];
double cost[1020][1020];
int main()
{

    int test;
    cin>>test;
    for(int z =1; z <= test;z++)
    {
        int v;
        cin>>v;
        for(int i =1;i <= v;i++)
            for(int j=1;j <=v;j++)
            cost[i][j]=0.0;
        int x,y;
        double val;
        while(cin>>x>>y>>val)
        {
            cost[x][y]=cost[y][x]=val;
            if(x<0)break;
        }
        for(int i =1;i <= v;i++)
            for(int j=1;j <=v;j++)
            dist[i][j]=cost[i][j];
        for(int k=1;k <= v;k++)
        {
            for(int i=1;i<= v;i++)
                for(int j =1;j <= v;j++)
                dist[i][j]=max(dist[i][j],min(dist[i][k],dist[k][j]));
        }
        double res = dist[1][v];
        printf("%.7f \n",res);
    }
}
