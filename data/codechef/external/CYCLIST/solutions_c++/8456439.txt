#include<stdio.h>
#include<iostream>
#include<string.h>
#include<map>
#include<math.h>
#include<queue>
#include<limits.h>
#include<algorithm>
#include<vector>
#define s(n) scanf(" %d",&n)
#define ss(n) scanf(" %s",n)
#define s2(a,b) scanf(" %d %d",&a,&b)
#define pb push_back
#define mp make_pair
#define vi vector<int>
#define ii pair<int,int>
#define F first
#define S second
#define P printf
#define E <<endl
#define mid (st+(end-st)/2)
#define MAXN 1004
using namespace std;
double ans[100002];
struct nod 
{
	int v;
	double d;
};

nod tmp;
queue<int> q;
int t,n,i,a,b;
double dist;
double mini(double a,double b)
{
	if(a<b)
	return a;
	return b;
}
int main()
{
	s(t);
	while(t--)
	{
		s(n);
		vector<nod> vec[n+5];
		double ans[n+5];
		for(i=1;i<=n;i++)
		{
			ans[i]=0.00;
			//vec[i].clear();
		}
		while(1)
		{
			s2(a,b);
			scanf("%lf",&dist);
			if(a==-1 && b==-1)
			break;
			tmp.v=b;
			tmp.d=dist;
			vec[a].pb(tmp);
			tmp.v=a;
			vec[b].pb(tmp);
		}
		q.push(1);
	ans[1]=101;
	int x;
	while(q.empty()==0)
	{
		x=q.front();
		q.pop();
		//cout<<x<<ans[x]<<" ";
		for(i=0;i<vec[x].size();i++)
		{
			double y=mini(ans[x],vec[x][i].d);
			if(ans[vec[x][i].v]<y)
			{
				ans[vec[x][i].v]=y;
				q.push(vec[x][i].v);
			}
		}
	}
	    printf("%.6lf\n",ans[n]);		
	}
	return 0;
}