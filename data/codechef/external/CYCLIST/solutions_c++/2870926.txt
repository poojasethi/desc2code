#include<bits/stdc++.h>
using namespace std;
int main()
{
	int t,v;
	double arr[1002][1002];
	cin>>t;
	int a,b;
	double c;
	while(t--)
	{
		cin>>v;
		memset(arr,0.0,sizeof(arr));
		cin>>a>>b>>c;
		while(!(a==-1&&b==-1&&c==-1))
		{
			arr[a][b]=c;
			arr[b][a]=c;
			cin>>a>>b>>c;
		}
		for(int k=1;k<=v;k++)
		for(int i=1;i<=v;i++)
		for(int j=1;j<=v;j++)
		{
			if(min(arr[i][k],arr[k][j])>arr[i][j])
			arr[i][j]=min(arr[i][k],arr[k][j]);
		}
		printf("%.12lf\n",arr[1][v]);
	}
	return 0;
}