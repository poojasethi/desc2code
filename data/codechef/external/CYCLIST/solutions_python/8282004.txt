#include<bits/stdc++.h>

#define INF 2000000000
#define INF_MAX 2147483647
#define INF_MIN -2147483647
#define INF_LL 9223372036854775807LL
#define PI acos(-1.0)
#define EPS 1e-8

#define glue(a,b) a ## b
#define setzero(a) memset(a,0,sizeof(a))
#define sz(a) (int)(a.size())
#define mp make_pair
#define ll long long int

#define si(x) scanf("%d", &x)
#define sl(x) scanf("%lld", &x)
#define sf(x) scanf("%lf", &x)
#define ss(a) scanf("%s", a)

#define tr(container, it) for(typeof(container.begin()) it = container.begin(); it != container.end(); it++)
#define FOR(i,start,end) for(long long i=start; ((start<end)?(i<=end):(i>=end));((start<end)?(i++):(i--)))

#define trace1(x)                cerr << #x << ": " << x << endl
#define rep(i, begin, end) for (__typeof(end) i = (begin) - ((begin) > (end)); i != (end) - ((begin) > (end)); i += 1 - 2 * ((begin) > (end)))
//Works for forward as well as backward iteration

using namespace std;

int p[1000000];

int par(int v)
{
	if (p[v]==v)
		return v;

	return p[v] = par(p[v]);
}

ll A, B;
double C;

void un(int X, int Y)
{
	ll p1 = par(X);
	ll p2 = par(Y);

	if(p1!=p2)
		p[p1] = p2;
}

int main(){std::ios::sync_with_stdio(false);

	ll t=0;
	cin>>t;
	while(t--){
		vector < pair<double, pair<int,int> > > v;
		ll n;
		cin>>n;
		for(int i=1;i<=n;i++)
			p[i]=i;

		int size=0;
		while(1)
		{
			cin>>A;
			cin>>B;
			cin>>C;

			if(A==-1 || B==-1 || C==-1)
				break;
			v.push_back(mp(C,mp(A,B)));
			size++;
		}

		sort(v.rbegin(), v.rend());

		int i=0;
		ll X,Y;
		double W;
		while(i<size && par(1)!=par(n))
		{
			X = v[i].second.first;
			Y = v[i].second.second;
			W = v[i].first;

			un(X,Y);
			i++;
		}
		if(i==n+1 && par(1) != par(n))
			cout<<"-1\n";
		else
			printf("%0.6lf\n",W);
	}




	return 0;
}


