#include<iostream>
#include<vector>
#include<queue>
#include<cstdio>

using namespace std;

typedef pair<double,int> ii;

double fn(vector<ii> adj[],int vtot)
{
    double d;
    vector<double> dis(vtot+1,0);
    int v;
    priority_queue<ii> pq;
    pq.push(ii(101,1));
    dis[1]=101;

    while(!pq.empty())
    {
        ii top=pq.top();
        pq.pop();

        v=top.second; d=top.first;

        if(d==dis[v])
        {
            for(vector<ii>::iterator it=adj[v].begin(); it!=adj[v].end();it++)
            {
                if(dis[it->second]<min(d,it->first))
                {
                    dis[it->second]=min(d,it->first);
                    pq.push(ii(dis[it->second],it->second));
                }
            }
        }
    }
    return dis[vtot];
}

int main()
{
    int t,a,b,v;
    double d;
    cin>>t;
    while(t--)
    {
        cin>>v;
        vector<ii> adj[v+1];

        cin>>a>>b>>d;
        while(a!=-1)
        {
            adj[a].push_back(ii(d,b));
            adj[b].push_back(ii(d,a));
            cin>>a>>b>>d;
        }
        printf("%0.7lf\n",fn(adj,v));
    }
    return 0;
}