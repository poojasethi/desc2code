#include<iostream>
#include<math.h>
 
using namespace std;
 
long long int logarithm(long long int n,long long int k){
long long int ans=(long long int)((log(n))/(log(k)));
if((long long int)pow(k,ans+1)<=n) ans=ans+1;
//cout<<"parameters "<<n<<" "<<k<<" "<<ans<<"\n";
return ans;
}
 
int main(){
long long int t;
cin>>t;
while(t--){
long long int n,k,ans=0,temp,factor;
cin>>n>>k;
//n=t;
//k=2;
if(k==1){
cout<<n<<"\n";
continue;
}
while(n>0){
//cout<<n<<"\n";
temp=(long long int)(pow(k,logarithm(n,k)));
factor=min(k,(n)/(temp));
ans+=(factor);
n=n-(temp)*(factor);
}
cout<<ans<<"\n";
}
return 0;
}