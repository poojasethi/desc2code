#include <cstdio>
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <set>
#include <map>
#include <queue>
#include <deque>
#include <cmath>
#include <list>
#include <vector>
#include <algorithm>

using namespace std;

#define pi acos(-1)
#define mx 200
#define sz 100
#define pf printf
#define sf scanf
#define true 1
#define false 0

#define pb(a) push_back(a)
#define size(e) (int) e.size()
#define clr(a,b) memset(a,b,sizeof(a))
#define lld long long int

lld oc[mx],f[mx],divisor,op,n,k, val;

int bs(lld key);

int main()
{
    int tst,cas=1;
    sf("%d", &tst);
    while(tst--)
    {
        sf("%lld %lld", &n, &k);
//        divisor = n/k;
        divisor = n;
        val = ((double) log10(n) / (double) log10(k));
//        pf("val =%lld\n", val);
        oc[0] = 1;
        oc[1] = k;
        for(int i = 2; i<=val; ++i)
            oc[i]=oc[i-1]*k;
        for(int i = 0; i<=val; ++i)
            f[i] = k;
        op = 0;
        int cnt = val;
        while(divisor>=k)
        {
           op+=(divisor/oc[cnt]);
           divisor%=oc[cnt];
            --cnt;
        }
//        pf("op = %lld divisor=%lld\n",op, divisor);
        pf("%lld\n",op+divisor);
    }
}

int bs(lld key)
{
    int lb = 0, ub=val,mid;
    while(lb <=ub)
    {
        mid=(lb+ub)/2;
        if(oc[mid]<key)
            lb = mid+1;
        else
        ub = mid-1;
//        pf("lb = %d ub = %d\n",lb,ub);
//        if(oc[mid]==key)
//        return mid;
    }
    return mid;
}

/*
25
1000000000000000000 2
*/
