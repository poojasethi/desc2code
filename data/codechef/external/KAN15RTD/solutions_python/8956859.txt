#include <iostream>
#include <string>
#include <climits>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#include <vector>
#include <algorithm>
#include <utility>
#include <queue>
#include <stack>
#include <map>
#include <set>
#include <cstring>
#include <iomanip>
#include <list>
#include <bitset>
#define ff first
#define ss second
#define mod 1000000007
#define SET(a) memset(a,-1,sizeof(a))
#define CLEAR(a) memset(a,0,sizeof(a))
#define mp(a,b) make_pair(a,b)
#define pb(a) push_back(a)
using namespace std;
typedef long long LL;
typedef pair< int , int > pii;
typedef pair< LL, LL> pll;
typedef vector< LL >vll;
typedef vector< int > vi;
template<class T>T gcd(T a,T b){return (b==0)?a:gcd(b,a%b);}
template<class T>T lcm(T a,T b){return (a*b)/gcd(a,b);}

vector<int> v[50005];
int par[50005];
int mark[50005];
int mark2[50005];
void dfs(int x)
{
	mark[x]=1;
	
	for(int i=0;i<v[x].size();i++)
	{
		if(mark[v[x][i]]==1)
		   continue;
		par[v[x][i]]=x;
		  dfs(v[x][i]);
	}
}
int c;
int n;
void find(int x)
{
	if(x==1) return;
	if(x>n)
	return;
	if(mark2[x]==1)
	   return ;
	   c++;
	  mark2[x]=1;
	  find(par[x]);
}
int main()
{
	int m,t,a,b,q;
	scanf("%d",&t);
	while(t--)
	{
		
		scanf("%d",&n);
		c=1;
		for(int i=0;i<=n;i++)
		{
			v[i].clear();
			mark[i]=mark2[i]=0;
			par[i]=0;
			
		}
		for(int i=0;i<n-1;i++)
		{
			scanf("%d%d",&a,&b);
			v[a].pb(b);
			v[b].pb(a);
		}
		par[1]=-1;
		dfs(1);
		
		scanf("%d",&m);
		mark2[1]=1;
		 int f1=0;
		while(m--)
		{
			scanf("%d",&q);
			if(q>n && f1==0)
			 {printf("%d\n",n);continue;}
			 f1=1;
			find(q);
			printf("%d\n",n-c);
			
		}
		
     }
      return 0;		
}
