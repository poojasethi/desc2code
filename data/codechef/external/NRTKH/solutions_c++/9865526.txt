#include <bits/stdc++.h>
#define ll long long int
#define s(a) scanf("%lld",&a)
#define f first
#define sc second
#define pb push_back
#define mp make_pair
#define inf 10e16

using namespace std;

string s;
map<ll,ll>dp;

int main()
{
    ll t,n,i,j,k,l,w,ww,x,y,z;
    s(t);
    while(t--) {
        dp.clear();
        s.clear();
        s(l);
        cin>>s;
        dp[0]=1;
        ll ans=0;
        ll sum=0;

        for(i=0;i<l;i++) {
            if(s[i]=='a') {
                sum+=2;
            }
            else if(s[i]=='b') sum-=3;
            ans=ans+dp[sum];
            dp[sum]++;
        }

        ll neg=0;
        sum=0;
        if(s[0]=='c') sum++;
        else sum=0;
        for(i=1;i<l;i++) {
            if(s[i]!='c' && s[i-1]=='c') {neg=neg+(sum*(sum+1))/2;sum=0;}
            else if(s[i]=='c') {
                sum++;
            }
        }
        if(sum>0) {
            neg=neg+(sum*(sum+1))/2;
        }
        //cout<<ans<<" "<<neg<<endl;
        cout<<ans-neg<<endl;
    }
    return 0;
}
