#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define s(n) scanf("%d", &n);
#define sll(n) scanf("%lld", &n);
#define p(n) printf("%d\n", n)
#define pll(n) printf("%lld\n", n)
#define MOD 1000000007
#define mp make_pair
#define pb push_back

map<ll,ll> m;
map<ll,ll> :: iterator it;

int main()
{
	ll n,t,i,j; 
	sll(t);
	while(t--)
	{
		string s;
		m.clear();
		cin>>n>>s;
		m[0]++;
		ll a=0, b=0, c=0, ans=0;
		for(i=0; i<n; i++)
		{
			if(s[i] == 'c')
				c++;
			else
			{
				ans -= c*(c+1)/2;
				c = 0;
			}
			if(s[i] == 'a')
				a++;
			else
			if(s[i] == 'b')
				b++;
			m[2*a-3*b]++;
		}
		ans -= c*(c+1)/2;
		for(it=m.begin(); it!=m.end(); it++)
		{
			ll z = it->second;
			ans += z*(z-1)/2;
		}
		pll(ans);
	}
	return 0;
}