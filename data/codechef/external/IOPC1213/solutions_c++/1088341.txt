#include<iostream>
#include<stdio.h>
#include<string.h>
#include<set>
#define N 100000007
using namespace std;

int adjMat[105][105];
int visited[105];

int n,m,q;
int k,x,y;

void dfs(int u) {
	visited[u]=true;
	for(int i=0;i<n;i++)
		if(adjMat[u][i]==1 && !visited[i])
			dfs(i);
}

int main()
{
	int T,i,j;
	scanf("%d",&T);
	while(T--)
	{
		scanf("%d %d %d", &n,&m,&q);
		i=j=0;
		memset(visited,0,sizeof(visited));
		memset(adjMat,0,sizeof(adjMat));
		for(i=0;i<m;i++)
		{
			int tmp1,tmp2;
			scanf("%d %d",&tmp1,&tmp2);
			adjMat[tmp1][tmp2]=1;
			adjMat[tmp2][tmp1]=1;
		}
		//printf("Setlength = %d\n",setLength);
		int setLength=0;
		for(i=0;i<n;i++)
		{
			if(!visited[i]){
				dfs(i);
				setLength++;
			}
		}
		
		while(q--)
		{
			long long ans=1;
			scanf("%d",&k);
			//printf("%d ",k);
			if(k<=1)
				scanf("%d %d",&x,&y);
			//printf("k=%d c=%d\n",k,setLength);
			if(k>1)
			{
				for(i=0;i<setLength;i++)
				{
					ans=(ans*k);
					if(ans>=N)
						ans=ans%N;
				}
				for(i=0;i<n-setLength;i++)
				{
					ans=(ans*(k-1));
					if(ans>=N)
						ans=ans%N;
				}
				printf("%lld\n",ans);
			}
			else if(k==1)
				setLength++;
			else if(k==0)
				setLength--;
		}
		setLength=0;
	}
}
