#include<cstdio>
#include<cmath>
using namespace std;
typedef unsigned long long ull;
#define mod 100000007
ull power(ull x, ull y)
{
    ull temp;
    if( y == 0)
        return 1;
    temp = power(x, y/2);
    if (y%2 == 0)
        return ((temp%mod)*(temp%mod))%mod;
    else
        return ((x%mod)*(temp%mod)*(temp%mod))%mod;
}
main()
{
      int tc;
      scanf("%d",&tc);
      while(tc--)
      {
          ull n,m,q,a,b;
          scanf("%llu %llu %llu",&n,&m,&q);
          for(int i=0;i<m;i++)
          {
             scanf("%d %d",&a,&b);
          }
          ull edges = m,vertices=n;
          ull result1,result2,result3;
          ull op,v;
          for(int i=0;i<q;i++)
          {
              scanf("%llu",&op);
              if(op==0)
              {
                 scanf("%d %d",&a,&b);
                 edges++;
              }
              else if(op==1)
              {
                 scanf("%d %d",&a,&b);
                 edges--;
              }
              else
              {
                  result1 = power(op,vertices-edges);
                  result2 = power(op-1,edges);
                  result3 = (result1*result2)%mod;
                  printf("%llu\n",result3);
              }
          }
      }
      return 0;
}
