#include <algorithm>
#include <bitset>
#include <cmath>
#include <cstdio>
#include <cstdlib>
#include <ctime>
#include <deque>
#include <functional>
#include <iomanip>
#include <iostream>
#include <list>
#include <map>
#include <numeric>
#include <queue>
#include <set>
#include <sstream>
#include <stack>
#include <utility>
#include <vector>
#include <cstring>
#define mod 100000007
using namespace std;

int n,m,Q,T;

long long power(int x,int p) {
  if (!p) return 1;
  long long q = power(x,p/2);
  q = (q * q) % mod;
  if (p & 1) q = (q * x) % mod;
  return q;
}

void solveTestCase() {
  scanf("%d %d %d", &n, &m, &Q);
  int u,v;
  for (int i = 0; i < m; i++) scanf("%d %d", &u, &v);
  int ncomp = n - m;
  while (Q--) {
    int K;
    scanf("%d", &K);
    if (K == 0 || K == 1) {
      scanf("%d %d", &u, &v);
      if (K == 0) ncomp--; else ncomp++;
    }
    else printf("%lld\n", (power(K,ncomp) * power(K - 1,n - ncomp)) % mod);
  }
}

int main() {
  scanf("%d", &T);
  while (T--) solveTestCase();
}
