#include <iostream>
#include <cstdio>
using namespace std;
#define mod 100000007
#define ll long long
ll fast_pow(int val,int pow)
{
        if(pow==0)return 1;
        if(pow==1)return val;
        ll ans=fast_pow(val,pow/2);
        ans*=ans;
        if(ans>=mod)ans%=mod;
        if(pow%2==1)ans*=val;
        if(ans>=mod)ans%=mod;
        return ans;
}
int main()
{
        int tst;
        scanf("%d",&tst);
        //cin>>tst;
        while(tst--) {
                int N,M,Q,edges,a,b,c;
                scanf("%d%d%d",&N,&M,&Q);
                //cin>>N>>M>>Q;
                edges=M;
                while(M--) {
                        scanf("%d%d",&a,&b);
                        //cin>>a>>b;
                }
                while(Q--) {
                        //cin>>a;
                        scanf("%d",&a);
                        if(a==0) {
                                scanf("%d%d",&b,&c);
                                //cin>>b>>c;
                                edges++;
                        } else if(a==1) {
                                scanf("%d%d",&b,&c);
                                //cin>>b>>c;
                                edges--;
                        } else {
                                ll ans=1;
                                int free=N-edges,non_free=edges;
                                ans*=fast_pow(a,free);
                                if(ans>=mod)ans%=mod;
                                ans*=fast_pow(a-1,non_free);
                                if(ans>=mod)ans%=mod;
                                //cout<<ans<<endl;
                                printf("%lld\n",ans);
                        }
                }
        }
        return 0;
}
