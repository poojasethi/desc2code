#include <bits/stdc++.h>
#define ll long long int
#define s(a) scanf("%lld",&a)
#define pb push_back
#define mp make_pair
#define f first
#define sc second
#define inf 10e16
#define sd(a) scanf("%lf",&a)

using namespace std;

ll m,n;

ll check(ll a)
{
    ll up,down,num,low,high;
    up=0;
    down=0;
    num=a;
    while(num>1) {
        up++;
        num/=2;
    }
    if(m<=up) return 0;
    low=a;
    ll count=1;
    high=a;
    while(1) {
        //cout<<"FUVK \n";
        count*=2;
        low*=2;
        high=low+count-1;
        if(low>n) break;
        down=down+min(n,high)-low+1;
    }
    if(n-m < down) return 0;
    return 1;
}

int main()
{
    ll t,i,j,k,l,w,ww,x,y,z,node,high,low,tot,mid;
    //freopen("inp.txt","r",stdin);
    //freopen("out2.txt","w",stdout);
    s(t);
    while(t--) {
        tot=0;
        node=1;
        s(n);s(m);
        if(m==1) {cout<<1<<endl;continue;}
        //cout<<2421342214<<" "<<check(4)<<endl;
        while(1) {
            node*=2;
            low=node;
            high=min(2*low-1,n);
            if(low>n) break;
            if(check(low)) {
                tot=tot+high-low+1;
                //cout<<tot<<endl;
                continue;
            }
            if(check(high)==0) continue;
            while(low<high) {
                //cout<<low<<" "<<high<<endl;
                mid=(low+high)/2;
                if(check(mid)) high=mid;
                else low=mid+1;
            }
            //cout<<low<<endl;
            tot=tot+2*node-low;
            //cout<<tot<<endl;
        }
        cout<<tot<<endl;
    }
    return 0;
}
