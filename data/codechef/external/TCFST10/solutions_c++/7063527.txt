#include <bits/stdc++.h>
using namespace std;
#define N 100000
typedef long long ll;
typedef pair <int,int> ii;
typedef pair <ll,ii> iii;
int rep[N + 1];
ll tot[N + 1];
iii edges[N + 1];
void join(int x,int y)
{
    int a = min(x,y);
    int b = max(x,y);
    rep[b] = a;
    tot[a] = tot[a] + tot[b];
    tot[a]= tot[a]%1000000000;
}
int Rep(int x)
{
    //printf("%d ",x);
    if(x == rep[x]) return x;
    rep[x] = Rep(rep[x]);
    return rep[x];
}
int main()
{
    int n,m,i;
    scanf("%d %d",&n,&m);
    for(i = 1 ; i<=m ; i++)
    {
        scanf("%d %d %lld",&edges[i].second.first,&edges[i].second.second,&edges[i].first);
    }
    for(i = 1 ; i<=n ; i++)
    {
        tot[i] = 1;
        rep[i] = i;
    }
    sort(edges+1,edges+m+1);
    ll cur = 0;
    ll ans = 0;
    for(i = m ; i>0 ; i--)
    {

        int u = edges[i].second.first;
        int v = edges[i].second.second;
        //printf("%d %d\n",u,v);
        int x = Rep(u);
        int y = Rep(v);
        if(x != y)
        {
            //printf("%d %d ",x,y);
            cur = cur + (tot[x]*tot[y]);
            cur = cur%1000000000;
            join(x,y);
        }
        ans = ans + cur*edges[i].first;
        ans = ans%1000000000;
        //printf("%lld %lld\n",cur,ans);
    }
    printf("%lld\n",ans);
    return 0;
}

