#include <iostream>
#include <vector>
#include <algorithm>

#define F first
#define S second
using namespace std;


int i,j,n,r1,r2,T,x,y;
int fix1[111000],fix2[111000];

pair < int , int > a[111000],b[111000];
vector < int > q[111000],p[111000];

void zachistka()
{
	for (int j=0;j<=n;j++){
		q[j].clear();
		p[j].clear();
		fix1[j]=0;
		fix2[j]=0;
	}
}


void goq(int x,int h){
  
   fix1[x]=1; 
   a[x].F=0;
   a[x].S=h;
    
    for (int j=0;j<q[x].size();j++)
     if (fix1[q[x][j]]==0)
       {
       	goq(q[x][j],h+1);
       	a[x].F++;
       }
 }

void gop(int x,int h){
	
	fix2[x]=1;
	b[x].F=0;
	b[x].S=h;
	
	for (int j=0;j<p[x].size();j++)
	 if(fix2[p[x][j]]==0)
	   {
	     gop(p[x][j],h+1);
		 b[x].F++; 
	   }
}

bool XooAra(){
	
	goq(r1,0);
	gop(r2,0);
	
	
	 sort(a,a+n);
	 sort(b,b+n);
	 
	 for (int j=0;j<n;j++)
	  if (a[j]!=b[j]) return false;
	  
	  return true;
}

main()
{
	  cin>>T;
	   
	   while (T--)
	    {
	     cin>>n>>r1;
		   	 
		   	 for (i=1;i<n;i++)
		   	  {
		   	  	 cin>>x>>y;
		   	  	 q[x].push_back(y);
		   	  	 q[y].push_back(x);
		   	  }
	     cin>>r2;
		 
		 for (i=1;i<n;i++)
		      {
		      	 cin>>x>>y;
		      	  p[x].push_back(y);
		      	  p[y].push_back(x);
		      } 	
	    	
	    	
	    	if (XooAra())
	    	 cout<<1<<endl; else 
	    	 cout<<0<<endl;
	    	 
	    	 zachistka();
	    }
	
}