#include<algorithm>
#include<vector>
#include<cstdio>
using namespace std;
#define FOR(i, a, b) for(int i=a; i<b; ++i)
#define all(v) (v).begin(), (v).end()
#define VI vector<int>
int tests, n, r[2], x, y;
VI deg[2]; bool ans;
int main()
{
   scanf("%d", &tests);
   while(tests--)
   {
      scanf("%d", &n);
      deg[0].clear(); deg[1].clear();
      deg[0].resize(n); deg[1].resize(n);
      FOR(t, 0, 2)
      {
	 scanf("%d", r+t);
	 FOR(i, 0, n-1)
	 {
	    scanf("%d%d", &x, &y);
	    ++deg[t][x], ++deg[t][y];
	 }
      }
      if(deg[0][r[0]] != deg[1][r[1]])
	 printf("0\n");
      else
      {
	 sort(all(deg[0])); sort(all(deg[1]));
	 ans = true;
	 FOR(i, 0, n) if(deg[0][i] != deg[1][i])
	 {
	    ans = false; break;
	 }
	 if(ans) printf("1\n");
	 else printf("0\n");
      }
   }
}