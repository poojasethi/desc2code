//gskhirtladze

#include <iostream>
#include <stdio.h>
#include <vector>
#include <algorithm>

#define pb push_back
#define Pii pair < int , int >
#define fi first
#define se second
#define Nmax 105000

using namespace std;

int n,t,R1,R2,a,b,i;
Pii p[Nmax],P[Nmax];
vector < int > g[Nmax],c[Nmax];
bool f1[Nmax],f2[Nmax];

void clr()
 {
  for (int i=1;i<=n;i++)
   g[i].clear(),c[i].clear(),f1[i]=0,f2[i]=0;
 }

void go1(int u,int h)
 {
  f1[u]=1;p[u].fi=1;p[u].se=h;
  for (int i=0;i<g[u].size();i++)
   if (!f1[g[u][i]]) { go1(g[u][i],h+1); p[u].fi++; }
 }

void go2(int u,int h)
 {
  f2[u]=1;P[u].fi=1;P[u].se=h;
  for (int i=0;i<c[u].size();i++)
   if (!f2[c[u][i]]) { go2(c[u][i],h+1); P[u].fi++; }
 }

bool check(int R1,int R2)
 {
  go1(R1,0);
  go2(R2,0);
  sort(p+1,p+n+1);
  sort(P+1,P+n+1);
  for (int i=1;i<=n;i++)
   if (p[i] != P[i]) return false;
  return true;
 }

main()
 {
  cin>>t;
  while (t--)
   {
    cin>>n;
    cin>>R1;R1++;
    for (i=1;i<n;i++)
     {
      scanf("%d%d",&a,&b);
      a++; b++;
      g[a].pb(b);
      g[b].pb(a);
     }
    cin>>R2;R2++;
    for (i=1;i<n;i++)
     {
      scanf("%d%d",&a,&b);
      a++; b++;
      c[a].pb(b);
      c[b].pb(a);
     }
    if (check(R1,R2))
     printf("1\n");else
     printf("0\n");
    clr();
   }
 }
 
