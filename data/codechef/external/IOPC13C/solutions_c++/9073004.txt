#include<cstdio>
#include<iostream>
#include<algorithm>
#include<cstring>
using namespace std;
#define getcx getchar_unlocked
#define min(a,b) a<b?a:b
inline void inp(int &n )//fast input function
{
        n=0;
        int ch=getcx();int sign=1;
        while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();}
 
        while( ch >= '0' && ch <= '9' )
        {n = (n<<3)+(n<<1) + ch-'0' ; ch=getcx();}
        n=n*sign;
}
int arr1[100003];
int arr2[100003];
int main()
{
	int t,n,a,b,r1,i,r2;
	inp(t);
	while(t--)
	{
		inp(n);
		inp(r1);
		memset(arr1,0,(n+1)*sizeof(int));
		memset(arr2,0,(n+1)*sizeof(int));
		for(i=0;i<n-1;i++)
		{
			inp(a);inp(b);
			arr1[a]++;arr1[b]++;
		}
		inp(r2);
		for(i=0;i<n-1;i++)
		{
			inp(a);inp(b);
			arr2[a]++;arr2[b]++;
		}
		sort(arr1,arr1+n);
		sort(arr2,arr2+n);
		for(i=0;(arr1[i]==arr2[i]) && i<n;i++)
			;
		if(i==n)
			printf("1\n");
		else
			printf("0\n");
	}
	return 0;
}