#include <stdio.h>
#include <vector>
# define limit (int)1e5
using namespace std;
vector <int> adj[limit][2];
int num_ele_with_children[limit][2];
int T,N,a,b;
int size[limit][2],R[2];// size stores degree, is at max N-1
void empty()
{
	for(int i=0;i<N;i++)
	{
		adj[i][0].clear();
		adj[i][1].clear();
		//parent[i][1]=parent[i][0]=-1;
		size[i][0]=size[i][1]=0;
		num_ele_with_children[i][0]=num_ele_with_children[i][1]=0;
	}
}
void inp(int x)
{//x is 0 or 1
	scanf("%d",&R[x]);
	for(int i=1;i<N;i++)
	{
		scanf("%d%d",&a,&b);
		adj[a][x].push_back(b);
		adj[b][x].push_back(a);
		size[a][x]++;
		size[b][x]++;
	}
	//size[R[x]][x]++;
	for(int i=0;i<N;i++)
		num_ele_with_children[size[i][x]][x]++;
}
bool compare()
{
	for(int i=0;i<N;i++)
		if(num_ele_with_children[i][0]!=num_ele_with_children[i][1])
			return false;
	return true;
}
int main()
{
	scanf("%d",&T);
	while(T--)
	{
		scanf("%d",&N);
		empty();
		inp(0);
		inp(1);
		printf("%d\n",(compare()?1:0));
	}
	
	return 0;
}
