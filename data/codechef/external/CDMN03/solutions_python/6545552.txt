#include <stdio.h>
#define ll long long
#define MAX 105

int main(){
	int t,n,i,j,k,m,a[MAX],ans;
	ll x[MAX],y[MAX],z[MAX],d;
	ll temp;

	scanf("%d",&t);

	while(t--){
		scanf("%d %lld",&n,&d);

		for(i = 0;i<n;i++){
			scanf("%lld %lld %lld",&x[i],&y[i],&z[i]);
			a[i] = i; 
		}

		for(i = 0;i<n-1;i++){
			for(j = i+1;j<n;j++){
				temp = (x[i] - x[j])*(x[i] - x[j]) + (y[i] - y[j])*(y[i] - y[j]) + (z[i] - z[j])*(z[i] - z[j]);

				//printf("%d %d %lld\n",i+1,j+1,temp);
				if(temp <= d*d){
					/*if(a[i] == i && a[j] == j)
						a[j] = i;
					else if(a[i] != i && a[i] != a[j]){*/
					if(a[i] != a[j]){
						/*k = j;

						while(a[k] != k){
							m = k;
							k = a[k];
							a[m] = i;
						}
						a[k] = i;*/

						for(k = 0;k<n;k++){
							if(a[j] == a[k] && j != k)
								a[k] = a[i];
						}
						a[j] = a[i];
					}
					/*else if(a[j] != j && a[i] != a[j]){
						k = i;

						while(a[k] != k){
							m = k;
							k = a[k];
							a[m] = j;
						}
						a[k] = j;
					}*/
				}

			}
		}

		ans = 0;

		for(i = 0;i<n;i++)
			if(a[i] == i)
				ans++;

		printf("%d\n",ans);
	}


	return 0;
}