#include<bits/stdc++.h>
using namespace std;
#define FOR(i,n) for(int i=0;i<n;i++)
#define MEM(a,b) memset(a,(b),sizeof(a))

template<class T> inline T sqr(T x){return x*x;}
double dist(double x1,double y1,double x2,double y2,double z1,double z2){return sqrt(sqr(x1-x2)+sqr(y1-y2)+sqr(z1-z2));}

#define MAXN 107

struct point{
	long long x,y,z;
};

long long Dist(point a, point b)
{
    return (a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y) + (a.z - b.z) * (a.z - b.z);
}

int used[MAXN],n,d;
point p[MAXN];

void dfs(int x){
    used[x] = 1;
    FOR(y,n){
        if(!used[y] && Dist(p[x], p[y]) <= (long long)d * d){
            dfs(y);
        }
    }
}

int main(){
	ios::sync_with_stdio(0);
	cin.tie(0);
	int t;
	cin>>t;
	while(t--){
		MEM(used,0);
		int ans=0;
		cin>>n>>d;
		FOR(i,n){
			cin>>p[i].x>>p[i].y>>p[i].z;
		}
		FOR(i,n){
            if(!used[i]){
                ans++;
                dfs(i);
            }
        }
        cout << ans <<endl;
	}
	
	return 0;
}