    #include <stdio.h>

    int main(){
    long long int t,n,i,j,k,m,a[105],ans;
    long long int x[105],y[105],z[105],d;
    long long int temp;

    scanf("%lld",&t);

    while(t--){
    scanf("%lld %lld",&n,&d);

    for(i = 0;i<n;i++){
    scanf("%lld %lld %lld",&x[i],&y[i],&z[i]);
    a[i] = i;
    }

    for(i = 0;i<n-1;i++){
    for(j = i+1;j<n;j++){
    temp = (x[i] - x[j])*(x[i] - x[j]) + (y[i] - y[j])*(y[i] - y[j]) + (z[i] - z[j])*(z[i] - z[j]);

    if(temp <= d*d){

    if(a[i] != a[j]){

    for(k = 0;k<n;k++){
    if(a[j] == a[k] && j != k)
    a[k] = a[i];
    }
    a[j] = a[i];
    }
    }

    }
    }

    ans = 0;

    for(i = 0;i<n;i++)
    if(a[i] == i)
    ans++;

    printf("%lld\n",ans);
    }


    return 0;
    }
