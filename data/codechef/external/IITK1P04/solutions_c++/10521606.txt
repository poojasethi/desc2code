#include <bits/stdc++.h>
using namespace std;
int E[600][600],T[600][600],R[600][600],par[700],vis[700];
int num;
int bfsAugment(int a,int sink)
{
    queue<int>Q;
    int i;
    Q.push(a);
    for(i=0;i<num;i++)
        vis[i]=0;
    int flow=INT_MAX;
    bool flag=false;
    vis[a]=1;
    par[a]=-1;
    while(!(Q.empty()))
    {
        a=Q.front();
        Q.pop();
        for(i=1;i<num;i++)
        {
            if(i==a)
                continue;
            else
            {
                if(E[a][i]>0&&vis[i]==0)
                {
                    vis[i]=1;
                    Q.push(i);
                    par[i]=a;
                     if(i==sink)
                    {
                        flag=true;
                        break;
                    }
                }

            }
        }
        if(flag)
            break;
    }
    if(flag==false)
    {
        return 0;
    }
    a=sink;
    while(par[a]!=-1)
    {
        flow=min(flow,E[par[a]][a]);
        a=par[a];
    }
    a=sink;
    while(par[a]!=-1)
    {
        E[par[a]][a]-=flow;
        E[a][par[a]]+=flow;
        a=par[a];
    }
   // cout<<"Returning";
    return flow;
}
int maxflow(int source,int sink)
{
    int a,ans=0;
    while(1)
    {
        a=bfsAugment(source,sink);
     //   cout<<a<<" Flow"<<endl;
        if(a<=0)
        {
            return ans;
        }
        else
        {
            ans=ans+a;
        }
    }
}
int main()
{
    int n,m,a,b,c,t,i,j,ans;
        scanf("%d %d",&n,&m);
        memset(E,0,sizeof(E));
        for(i=0;i<m;i++)
        {

            scanf("%d %d %d",&a,&b,&c);
            E[a][b]=c;
        }
        num=n+1;
        for(i=1;i<=n;i++)
        {

            for(j=1;j<=n;j++)
            {
                if(E[i][j]!=0&&E[j][i]!=0)
                {
                    E[i][num]=E[i][j];
                    E[num][j]=E[i][j];
                    E[i][j]=0;
                    num++;
                }
            }
        }
        for(i=1;i<num;i++)
        {

            for(j=1;j<num;j++)
            {
               T[i][j]=E[i][j];
            }
        }
        scanf("%d",&t);
        while(t>0)
        {
            t--;
            scanf("%d %d",&a,&b);
            ans=maxflow(a,b);
            printf("%d\n",ans);
            for(i=1;i<num;i++)
            {

                for(j=1;j<num;j++)
                {
                    E[i][j]=T[i][j];
                }
            }
        }
}
