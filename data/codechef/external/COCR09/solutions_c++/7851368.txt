/* Author : RISHAV GOYAL */
 
#include <bits/stdc++.h> // sherlock holmes
using namespace std;
 
#define LL long long int
#define UL unsigned long long int
 
#define imax INT_MAX
#define imin INT_MIN
#define LLmax LLONG_MAX
#define LLmin LLONG_MIN
 
#define FOR(i,a,b) for(int i= (int)a; i<= (int)b; i++)
#define rep(i,n) for(int i= int(1); i<= (int)n; i++)
#define FORd(i,a,b,d) for(int i=(int)a; i<= (int)b; i+=(int)d)
 
#define pr() printf("Reached here 1...\n");
#define pr1() printf("Reached here 2...\n");
 
#define CLR(a) memset(a,0,sizeof(a));
#define SET(a) memset(a,-1,sizeof(a));
 
#define str strlen
#define sz size()
#define pb(x) push_back(x)
#define mp make_pair
#define ii pair<int,int>
#define ll pair<LL,LL>
 
#define F first
#define S second
#define gcd(a,b) __gcd(a,b)
 
#define mod int(1e9 + 7)
#define MAX int(1e5 + 10)
 
#define si(a) scanf("%d",&a);
 
#define VI vector<int>
#define VL vector<LL>
#define VS vector<string>
#define VC vector<char>
 
LL powmod(LL a,int b,int n){LL rm=1;while (b){if (b % 2) { rm = (rm * a) % n; }a = (a * a) % n;b /= 2;}return rm;}
 
#define gc getchar_unlocked
 
void sint(int &x)
{
	register int c = gc();
	x = 0;
	for(;(c<48 || c>57);c = gc());
	for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
}

vector<int> edge[5010];
int answer = 0;
int a[6000], n, K;

void dfs(int v,int p,int mn,int mx,int l){
	++l;
	mn = min(mn , a[v]);
	mx = max(mx, a[v]);
	if(l>1 && mx-mn>=K){
		answer++;
	}
	for(int i=0;i<edge[v].sz;++i){
		int vr = edge[v][i];
		if( vr != p){
			dfs(vr,v,mn,mx,l);
		}
	}
}

int main()
{
	int u,v;
	sint(n); sint(K);
	rep(i,n) sint(a[i]);
	rep(i,n-1){
		sint(u); sint(v);
		edge[u].pb(v);
		edge[v].pb(u);
	}
	for(int i=1;i<=n;++i){
		dfs(i,-1,a[i],a[i],0);
	}
	printf("%d\n",answer/2);
	return 0;
}
