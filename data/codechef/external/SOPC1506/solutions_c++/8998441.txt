//#include<bits/stdc++.h>
#include <iostream>
#include <cstdio>
#include <vector>
#include <map>
#include <queue>
#include <stack>
#include <cstring>
#include <algorithm>
#include <cstdlib>
#include <cmath>
#include <set>
using namespace std;
#define w(t) while(t--)
#define S(x) scanf("%d",&x)
#define SLL(x) scanf("%lld",&x)
#define P(x) printf("%d",x)
#define fl(i , a, b) for(i = (int)a; i<(int)b; i++)
#define mem(a , value) memset(a , value , sizeof(a))
#define tr(c, itr) for(itr = (c).begin(); itr != (c).end(); itr++)
#define MOD 1000000007
#define MAX 1000000010
#define ll long long
#define mp make_pair
#define pb push_back
typedef pair<int,int> pp;
// int m1[85][85][85][85];
int l[100][100] , r[102][102], t[102][102] , b[102][102];
int n ; 
int check(int x, int y)
{
	if(x >=1 && x<=n && y>=1 && y<=n)
		return 1;
	return 0 ;
}
int main()
{
	//std::ios_base::sync_with_stdio(false);
	int x,  y , t1 , i , j , m, ui , vi , side ,c,final ;
	char ch;
	S(t1);
	while(t1--)
	{
		cin >> n >> m ;
		final =0 ;
		memset(t , 0 ,sizeof(t)) ;
		 memset(b , 0 ,sizeof(b)) ;
		 memset(l , 0 ,sizeof(l)) ;
		 memset(r , 0 ,sizeof(r)) ;
		fl(i , 0  ,  m )
		{
			cin >> ch >> ui >> vi ;
			if(ch=='H')
			{
				r[ui][vi] =1;
				l[ui][vi+1]=1;
			}
			else
			{
				b[ui][vi] = 1;
				t[ui+1][vi] = 1;
			}
		}
		for (i = 1; i <=n; ++i)
		{
			for (j = 1; j <=n; ++j)
			{
				fl(side , 1 , n+1)
				{
					int f1 =1 , f2 =1 , f3 =1 , f4= 1 ;
					c = side ; 
					x = i ; y = j ; 
					while(c> 0 )
					{
						if(check(x, y ) && check(x , y+1))
						{
							if(r[x][y]==0)
							{
								f1=0 ;break;
							}
						}
						else{
							f1=0 ; break ; 
						}
						y++;
						c--;
					}
					c = side; 
					while(c> 0 )
					{
						if(check(x, y ) && check(x+1, y))
						{
							if(b[x][y]==0)
							{
								f2=0 ;break; 
							}
						}
						else{
							f2=0;
							break ; 
						}
						x++;
						c--;
					}
					c = side; 
					while(c> 0 )
					{
						if(check(x, y ) && check(x , y-1))
						{
							if(l[x][y]==0)
							{
								f3=0 ;break; 
							}
						}
						else{
							f3 =0 ; break ;
						}
						y--;
						c--;
					}
					c =side; 
					while(c> 0 )
					{
						if(check(x, y ) && check(x-1 , y))
						{
							if(t[x][y]==0)
							{
								f4=0 ;break; 
							}
						}
						else{
							f4= 0 ;break ;
						}
						x--;
						c--;
					}
					if(f1 && f2 && f3&& f4)
						final++;
				}
			}	
		}
		cout << final << endl;
	}
	return 0;
}
/*
45
2
4
H 2 1
V 1 2
H 1 1
V 1 1

*/