T=input()
for _ in xrange(T):
	N,C=map(int,raw_input().split())
	A=map(int,raw_input().split())
	val,temp=0,0
	for x in A:
		x-=C
		temp=max(0,temp+x)
		val=max(temp,val)
	print val
	
