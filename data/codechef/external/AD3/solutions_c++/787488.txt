#include <string.h>
#include <stdio.h>

char Data[200];
int  InputLen;
unsigned int  Results[200][5][3][3];
int Min(int a , int b)
{
	return (a>b) ?  b :  a;
}
int Max(int a , int b)
{
	return (a>b) ?  a :  b;
}

unsigned int ProblemResult(int n,int current,int min ,int max )
{
	if (max - min  > 2 )
		return 0;
	if (n == InputLen )
		return 1;
	unsigned int  Result;
	if ( Results[n][current+2][min+2][max] != 0)
		return  Results[n][current+2][min+2][max] -1;
	if (Data[n] == '0' || Data[n] == '1') //fixed
	{
		int i ;
		if  (Data[n] == '0')
			i = -1 ;
		else
			i = 1 ;
		Result = ProblemResult(n+1 , current + i , Min(min , current+i) , Max(max , current+i));
	}
	else
		Result = ProblemResult(n+1 , current+1 , min , Max(max , current+1)) + ProblemResult(n+1 , current-1 ,Min(min , current-1) , max);
	Results[n][current+2][min+2][max] = Result+1;
	return Result;
}
int main()
{
	int n ;
	scanf("%d",&n);
	for (int k = 0 ; k < n ; k++)
	{
		scanf("%s",Data);
		memset(Results,0,sizeof(Results));
		InputLen = strlen(Data);
		if (Data[strlen(Data)-1] == '\r'||Data[strlen(Data)-1] == '\n')
			InputLen--;
		printf("%d\n",ProblemResult(0,0,0,0));
	}
	return 0;
}

