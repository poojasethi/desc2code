#include<cstdio>

using namespace std;

int main() {
	
	int m,n,x;

	while(scanf("%d",&m)>0) {
	
		//scanf("%d",&m);
		if(m==0) break;     n=m;
		int arr[m][n],sum[m][n];

		for(int i=0;i<m;i++) {
		for(int j=0;j<n;j++)
		{
			scanf("%d",&x);
			arr[i][j]=x;
			//printf("%d ",arr[i][j]);				
		}
		//printf("\n");	
		}

		//printf("\n");
		//each  i,j is the sum of elements of subRectangle (0,0,i,j)
	
		int t=0;
		for(int jj=0;jj<n;jj++) {
			t+=arr[0][jj];
			sum[0][jj]=t;	
		}
		int tt=0;
		for(int ii=0;ii<m;ii++) {
			tt+=arr[ii][0];
			sum[ii][0]=tt;	
		}

	/*	for(int i=0;i<m;i++) {
		for(int j=0;j<n;j++)
		printf("%d ",sum[i][j]);
		printf("\n");
		}
	*/

		//printf("sum arr:\n");	
		for(int i=0;i<m;i++)
		for(int j=0;j<n;j++)
		{
			if(i-1>=0 && j-1>=0) {
			sum[i][j]=arr[i][j]+sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1];	
			//printf("%d,%d=%d ",i,j,sum[i][j]);
			}
		}
	
/*	for(int i=0;i<m;i++) {
	for(int j=0;j<n;j++)
		printf("%d ",sum[i][j]);
	printf("\n");
	}
*/

		int max=sum[0][0],curr_sum=0;
		
		for(int r1=0;r1<m;r1++)
		for(int r2=r1;r2<m;r2++)
		{
			int lc=0;
			for(int rc=0;rc<n;rc++)
			{
				if(r1-1>=0 && lc-1>=0) {
					curr_sum=sum[r2][rc]-sum[r1-1][rc]-sum[r2][lc-1]+sum[r1-1][lc-1];
					if(curr_sum>max) max=curr_sum;
				}
				else
				{
					if(r1==0 && lc!=0) {
						curr_sum=sum[r2][rc]-sum[r2][lc-1];
						if(curr_sum>max) max=curr_sum;
					}
					else if(lc==0 && r1!=0) {
						curr_sum=sum[r2][rc]-sum[r1-1][rc];
						if(curr_sum>max) max=curr_sum;
					}	
					else if(lc==0 && r1==0) {
						curr_sum=sum[r2][rc];
						if(curr_sum>max) max=curr_sum;
					}
				
				}
	
				if(curr_sum<0)
				lc=rc+1;
			}
		}
	
		printf("%d\n",max);
	}//wh(1)

	return 0;
}

