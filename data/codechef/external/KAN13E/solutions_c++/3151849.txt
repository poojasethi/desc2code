/* in the name of ALLAH, most gracious, most merciful */
#include <cstdio>
#include <algorithm>
#include <vector>
#include <map>

using namespace std;

vector <int> deg;
map <int, int> m;

void init (int n) {
    m.clear ();
    deg = vector <int> (n, 0);
}

int main () {
#ifdef Local
	freopen ("input.txt", "r", stdin);
	// freopen ("output.txt", "w", stdout);
#endif
    int t;
    scanf ("%d", &t);

    for (int cs = 1; cs <= t; ++cs) {
        int n, e;
        scanf ("%d %d", &n, &e);

        init (n);

        int cnt = 0;
        for (int i = 0; i < e; ++i) {
            int u, v;
            scanf ("%d %d", &u, &v);

            if (m.find (u) == m.end ())
                m [u] = cnt++;
            if (m.find (v) == m.end ())
                m [v] = cnt++;

            u = m [u], v = m [v];
            ++deg [u], ++deg [v];
        }

        sort (deg.begin (), deg.end (), greater <int> ());

        int i, sum = 0;
        for (i = 0; i < n; ++i) {
            if (deg [i] >= i)
                sum += deg [i];
            else break;
        }

        i = i > 1 ? (i * (i - 1)) / 2 : 0;
        bool flag = (e == sum - i);

        printf ("%s\n", flag ? "YES" : "NO");
    }
	return 0;
}
