#include<bits/stdc++.h>
#define block 150
using namespace std;
typedef long long ll;
ll bit[20011]={0};
ll arr[20011];
vector<pair<pair<ll,ll> ,ll > >v;
bool cmp(pair<pair<ll,ll> ,ll> a,pair<pair<ll,ll> ,ll> b)
{
	if(a.first.first/block==b.first.first/block)
	{
		return ((a.first.second/block)<(b.first.second/block));
	}
	else
	{
		return ((a.first.first/block)<(b.first.first/block));
	}
}
void update(ll ind,ll val)
{
	
	while(ind<20011)
	{
		bit[ind]+=val;
		ind+=(ind&(-ind));
	}
}
ll get(ll ind)
{
	ll sum=0;
	while(ind)
	{
		sum+=bit[ind];
		ind-=(ind&(-ind));
	}
	return sum;
}
int main()
{
	ll n,i;
	scanf("%lld",&n);
	map<ll,ll>mm;
	mm.clear();
	ll co=1;
	for(i=0;i<n;i++)
	{
		scanf("%lld",&arr[i]);
		if(mm.find(arr[i])==mm.end())
		{
			mm[arr[i]]=1;
		}
	}
	map<ll,ll>::iterator it;
	for(it=mm.begin();it!=mm.end();it++)
	{
		it->second = co++;
	}
	for(i=0;i<n;i++)
	{
		arr[i]=mm[arr[i]];
	}
	ll q,a,b;
	scanf("%lld",&q);
	ll kk=q;
	i=0;
	while(q--)
	{
		
		scanf("%lld%lld",&a,&b);
		a--;
		b--;
		v.push_back(make_pair(make_pair(a,b),i));
		i++;
	}
	q=kk;
	ll l=0;
	ll r=0;
	ll ans=0;
	sort(v.begin(),v.end(),cmp);
	vector<ll>anss;
	anss.clear();
	for(i=0;i<q;i++)
	{
		anss.push_back(0);
	}
	
	for(i=0;i<q;i++)
	{
		//cout<<"ll"<<endl;
		
		a=v[i].first.first;
		b=v[i].first.second;
		//cout<<l<<" "<<r<<endl;
		while(l<a)
		{
			ans-=get(arr[l]-1);
			update(arr[l],-1);
			l++;
		}
		while(l>a)
		{
			ans+=get(arr[l-1]-1);
			update(arr[l-1],1);
			l--;
		}
		while(r<=b)
		{
			ans+=get(20010)-get(arr[r]);
			update(arr[r],1);
			r++;
		}
		while(r>b+1)
		{
			ans-=get(20010)-get(arr[r-1]);
			update(arr[r-1],-1);
			r--;
		}
		anss[v[i].second]=ans;
	//	cout<<ans<<endl;
	}
	for(i=0;i<q;i++)
	{
		cout<<anss[i]<<endl;
	}
}