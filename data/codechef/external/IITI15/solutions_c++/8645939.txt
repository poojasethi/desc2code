#include <bits/stdc++.h>
using namespace std;
#define md int(1e5+100)
#define modul int(1e9+7)
#define FOR(i,a,b) for( int i=(a),_b=(b);i<=_b;i++)
#define DOW(i,b,a) for( int i=(b),_a=(a);i>=_a;i--)
int xx[4]={0,0,1,-1};
int yy[4]={1,-1,0,0};
typedef long long ll;
int n;
struct re
{
    int l,r,i;
};
re q[md];
pair<int,int> a[md];
int b[md],t[md+100],ans[md],len;
bool cmp(re a, re b)
{
    if (a.l/len<b.l/len || (a.l/len==b.l/len && a.r<b.r)) return true;
    return false;
}

int sum(int x)
{
    int res=0;
    while (x>0)
    {
        res+=t[x];
        x-=(x&-x);
    }
    return res;
 }

void update(int x,int gt)
{
    while (x <=md)
    {
        t[x]=t[x]+gt;
        x+=(x&-x);
    }
}

int main()
{
    //freopen("inp.txt","r",stdin);
    scanf("%d",&n);
    FOR(i,1,n)
    {
        scanf("%d",&a[i].first);
        a[i].second=i;
    }
    sort(a+1,a+1+n);
    int d=0;
    FOR(i,1,n)
    {
        if (i==1 || a[i].first!=a[i-1].first)
        {
            d++;
        }
        b[a[i].second]=d;
    }
    int m;
    len=int(sqrt(n))+1;
    scanf("%d",&m);
    FOR(i,1,m)
    {
        scanf("%d%d",&q[i].l,&q[i].r);
        q[i].i=i;
    }
    sort(q+1,q+m,cmp);
    int l=1,r=1,res=0;
    update(b[1],1);
    FOR(i,1,m)
    {
        while (r<q[i].r)
        {
            r++;
            update(b[r],1);
            res+=(r-l+1)-sum(b[r]);
        }
        while (r>q[i].r)
        {
            res-=(r-l+1)-sum(b[r]);
            update(b[r],-1);
            r--;
        }
        while (l>q[i].l)
        {
            l--;
            update(b[l],1);
            res+=sum(b[l]-1);
        }
        while (l<q[i].l)
        {
            res-=sum(b[l]-1);
            update(b[l],-1);
            l++;
        }
        ans[q[i].i]=res;
    }
    FOR(i,1,m)
    printf("%d\n",ans[i]);
}
