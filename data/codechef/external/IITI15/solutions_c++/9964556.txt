#include <bits/stdc++.h>

using namespace std;

typedef pair <int, int> pii;
typedef pair<int,pii> piii;
#define fi first
#define sc second
#define mkp make_pair

bool cnt[1000007];
int ar[1000007];
int tmp[100007];
int BLOCKSIZE;
int qans[1000007];
int f[1000007];
int BIT[20007];
map <int, int> mp;

void update(int idx, int v) {
    for (int i = idx ; i <= 20001; i = i + (i & -i)) {
        BIT[i] = BIT[i] +  v;
    }
}
int  query(int idx) {
    int s = 0;
    for (int i = idx; i > 0; i = i - (i & -i)) {
        s = s + BIT[i];
    }
    return s;
}

vector <piii> queries;

int ans = 0;

int calBLOCKSIZE (int n) {
    BLOCKSIZE = sqrt(n);
}
int BLOCKIDX(int n) {
    return (n / BLOCKSIZE);
}
bool cmp1(const piii a, const piii b) {
    if (BLOCKIDX(a.sc.fi)  == BLOCKIDX(b.sc.fi)) {
        return a.sc.sc < b.sc.sc;
    } 
    return BLOCKIDX(a.sc.fi)  <  BLOCKIDX(b.sc.fi);
}

int cl = 1;
int cr = 0;

void operate(int l, int r) {
    while (cl < l) {
        int x = query(mp[ar[cl]]-1);
       /// cout <<"*"<<" " <<l <<" " <<x << endl;
        
        ans = ans - x;
        update (mp[ar[cl]],-1);
        cl++;
    }
    // cout <<ans <<endl;
    while (cl >  l) {
        cl--;
        int x = query(mp[ar[cl]]-1);
        ans = ans + x;
        update (mp[ar[cl]], 1);
    }

    while (cr < r) {
        cr ++;
        int x = query(20000) - query(mp[ar[cr]]);
        ans = ans + x;
        update (mp[ar[cr]], 1);
    }
  
    while (cr >  r) {
        int x = query(20000) - query(mp[ar[cr] ] );
        ans = ans - x;
        update (mp[ar[cr]], -1);
        cr --;
    }
}

int main()
{
    //freopen("/home/spharish/input.txt", "r", stdin);
    int n;
    scanf ("%d", &n);
    
    calBLOCKSIZE(n);
    for (int  i = 1; i <= n; i++) {
        scanf ("%d", &ar[i]);
        tmp[i-1] = ar[i];
    }
    sort(tmp, tmp + n);
    int cntr = 1;
    for (int i = 0 ; i  < n; i++) {
        if (i == 0) {
            mp[tmp[i]] = cntr++;
        }
        else if (tmp[i] != tmp[i-1]) {
            mp[tmp[i]] = cntr++;
        }
    }
    // for (int i = 1; i <= n; i++) {
    //     cout <<ar[i] <<" "<<mp[ar[i]]<<endl;
    // }
    int q;
    cin >> q;
    for (int i = 0; i < q; i++) {
        int l, r;
        scanf("%d%d", &l, &r);
        queries.push_back(mkp(i,mkp(l,r)));
    }
    sort (queries.begin(), queries.end(), cmp1);
    cl = queries[0].sc.fi;
    cr = cl-1;

    for (int i = 0; i < q; i++) {
       //cout << cl <<" " << cr <<" " << queries[i].sc.fi <<" "<<  queries[i].sc.sc <<" "<<ans<<endl;
        operate(queries[i].sc.fi, queries[i].sc.sc);
     //   cout << cl <<" " << cr <<" " << queries[i].sc.fi <<" "<<  queries[i].sc.sc <<" "<<ans<<endl;
        qans[queries[i].fi] = ans;
        // cout <<ans <<endl;
    }
    for (int i = 0; i < q; i++)
        printf ("%d\n", qans[i]);
}