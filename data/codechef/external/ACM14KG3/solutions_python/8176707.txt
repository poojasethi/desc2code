#include<bits/stdc++.h>
#define vi vector<int>
#define vvi vector< vi >
#define pii pair<int,int>
#define pb push_back
#define mp make_pair
#define all(c) c.begin(),c.end()
#define rall(c) c.rbegin(),c.rend() 
#define sz(c) c.size()
#define tr(c,it)  for(typeof(c.begin()) it=c.begin();it!=c.end();it++)  
#define max(a,b) (a>b?a:b)
#define min(a,b) (a<b?a:b)
#define present(c,x) find(all(c),x)!=c.end()
#define cpresent(c,x) c.find(x)!=c.end()  
#define permute(c) next_permutation(all(c))
using namespace std;
int main(){
     //freopen("input_file_name.in","r",stdin);
     // freopen("output_file_name.out","w",stdout);
     int t,M,adj[27][27],i,j,k;
     char S[1005],T[1005],a,b,c,d;
     cin>>t;
     while(t--){
     	  scanf("%s",S);
     	  scanf("%s",T);
     	  memset(adj,0,sizeof(adj));
     	  int lens=strlen(S);
     	  int lent=strlen(T);
     	  cin>>M;
     	  for(i=0;i<M;i++){
     	  	 cin>>a>>c>>d>>b;
     	  	 adj[a-97+1][b-97+1]=1;
     	  }
     	  if(lens==lent){
     	        for(k=1;k<=26;k++){
     	  	      for(i=1;i<=26;i++){
     	  	 	       for(j=1;j<=26;j++){
     	  	 		        adj[i][j]=adj[i][j]||(adj[i][k]&&adj[k][j]);
     	  	 	       }
     	  	       }
     	        }
     	        int flag=1;
     	        /*for(i=1;i<=26;i++){
     	        	for(j=1;j<=26;j++){
     	        		cout<<adj[i][j]<<" ";
     	        	}
     	        	cout<<"\n";
     	        }*/
     	        for(i=0;i<lens;i++){
     	        	if(S[i]==T[i])
     	        	  continue;
     	   	        if(adj[S[i]-97+1][T[i]-97+1]!=1){
     	   	  	        flag=0;
     	   	  	        break;
     	   	        }
     	        }
     	         if(flag==0)
     	             printf("NO\n");
     	         else
			         printf("YES\n");  
           }
           else{
         	    printf("NO\n");
           }
     }
     return 0;
}