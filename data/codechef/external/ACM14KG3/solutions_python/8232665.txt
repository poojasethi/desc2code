#include<stdio.h>
#include<string.h>
int main()
{
	
	int t,i,j,k,len1,len2,m;
	scanf("%d",&t);
	while(t--)
	{
		char s1[1000+5],s2[1000+5],u,v,misc;
		scanf("%s%s",s1,s2);
	//	printf("%s\n%s",s1,s2);
		len1=strlen(s1);
		len2=strlen(s2);
		
		bool adj[27][27]={false};
		scanf("%d",&m);
		
		for(i=0;i<m;++i)
		{
			getchar();
			scanf("%c%c%c%c",&u,&misc,&misc,&v);
			adj[u-'a'][v-'a']=true;
		}
		if(len1!=len2)
		{
			printf("NO\n");
			continue;
		
		}
		/*
		for(i=0;i<26;++i)
		{
			for(j=0;j<26;++j)
				printf("%d " ,adj[i][j]);
			printf("\n");
		
		}
		printf("\n-----------------------------------------\n\n");
		
		*/
		for(k=0;k<26;++k)
		{
			for(i=0;i<26;++i)
			{
				for(j=0;j<26;++j)
				{
					if(adj[i][k]&&adj[k][j])
						adj[i][j]=true;
				
				}
			
			
			}
		
		
		}
		/*
		for(i=0;i<26;++i)
		{
			for(j=0;j<26;++j)
				printf("%d " ,adj[i][j]);
			printf("\n");
		
		}
		*/
		for(i=0;s1[i];++i)
		{
			if(s1[i]!=s2[i])
			if(!adj[s1[i]-'a'][s2[i]-'a'])
			{
				break;
			}
		
		}
		if(!s1[i])
			printf("YES\n");
		else printf("NO\n");
	
	}

	return 0;
}