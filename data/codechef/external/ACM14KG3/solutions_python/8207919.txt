#include "stdio.h"
#include "stdlib.h"
#include "string.h"
#define N 26
#define M 1002
int main(){
	int i,j,k,m,n,a[N][N];
	char s[M],t[M],map[5];
	scanf("%d",&m);
	while(m--){
		scanf("%s%s",s,t);
		//printf("First string is:%s\n",s );
		//printf("Second string is:%s\n",t );
		scanf("%d",&n);
		for(i=0;i<N;i++){
			for(j=0;j<N;j++)
				a[i][j] = 0;
			a[i][i] = 1;
		}
		while(n--){
			scanf("%s",map);
			a[map[0]-'a'][map[3]-'a'] = 1;
		}
		if(strlen(s)!=strlen(t))
			printf("NO\n");
		else{
			for(k=0;k<N;k++){
				for(i=0;i<N;i++){
					for(j=0;j<N;j++){
						if(a[i][k] && a[k][j] )
							a[i][j] = 1;
					}
				}
			}
			
			// for(i=0;i<N;i++){
			// 	for(j=0;j<N;j++)
			// 		printf("%d ",a[i][j] );
			// 	printf("\n");
			// }
			n = strlen(s);
			for(i=0;i<n;i++){
				if(!a[s[i]-'a'][t[i]-'a'])
					break;
			}
			if(i==n)
				printf("YES\n");
			else
				printf("NO\n");
		}
	}
	return 0;	 
} 