/*this is for a directed graph*/
#include<bits/stdc++.h>
using namespace std;
#define INF 100000000
int main()
{
	char ch1[1009],ch2[1009],ch[10];
	int l1,l2,t,k,m,i,j;
	scanf("%d",&t);
	while(t--)
	{
		int dis[28][28];
		scanf("%s",ch1);
		scanf("%s",ch2);
		l1=strlen(ch1);
		l2=strlen(ch2);
		scanf("%d",&m);
		for(i=0;i<=26;i++)
		{
			for(j=0;j<=26;j++)
			{
				if(i==j)
				dis[i][j]=0;
				else
				dis[i][j]=INF;
			}
		}
		for(i=0;i<m;i++)
		{
			scanf("%s",ch);
			dis[ch[0]-'a'][ch[3]-'a']=1;
		}
		for(k=0;k<27;k++)
		{
			for(i=0;i<27;i++)
			{
				for(j=0;j<27;j++)
				dis[i][j]=min(dis[i][j],dis[i][k]+dis[k][j]);
			}
		}
		if(l1!=l2)
		printf("NO\n");
		else
		{
			for(i=0;i<l1;i++)
			{
				if(dis[ch1[i]-'a'][ch2[i]-'a']==INF)
				break;
			}
			if(i==l1)
			printf("YES\n");
			else
			printf("NO\n");
		}
		
	}
	return 0;
}