#include <bits/stdc++.h>
using namespace std;
int adj[26][26],p[26][26];
int main() 
{
	int z,m,i,j,k,lens,lent,flag;
	char ch;
	string s,t;
	char mp[4];
	scanf("%d",&z);
	while(z--)
	{
		memset(adj,0,sizeof(adj));
		memset(p,0,sizeof(p));
		cin>>s>>t;
		//cout<<"s="<<s<<" t="<<t<<endl;
		lens=s.length();
		lent=t.length();
		//cout<<"lens="<<lens<<" lent="<<lent<<endl;
		if(lens==lent)
		{	
			scanf("%d",&m);
			while(m--)
			{
				scanf("%s",mp);
				i=mp[0]-97;
				j=mp[3]-97;
				adj[i][j]=1;
			}
			for(i=0;i<26;i++)
			adj[i][i]=1;
			for(i=0;i<26;i++)
			for(j=0;j<26;j++)
			p[i][j]=adj[i][j];
			for(k=0;k<26;k++)
			{	
				for(i=0;i<26;i++)
				for(j=0;j<26;j++)
				p[i][j]=(p[i][j] || (p[i][k] && p[k][j]));
			}
			flag=0;
			for(i=0;i<lens;i++)
			{
				if(p[s[i]-97][t[i]-97]==1);
				else
				{
					flag=1;
					break;
				}
			}
			if(flag==0)
			printf("YES\n");
			else
			printf("NO\n");	
		}
		else
		printf("NO\n");
	}
	return 0;
}