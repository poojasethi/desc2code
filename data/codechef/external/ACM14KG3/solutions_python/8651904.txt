#include<bits/stdc++.h>

using namespace std;
typedef long long int ll;
typedef vector<int> vi;
typedef vector<vi> vvi;
typedef pair<int,int> ii;
typedef vector<ii> vii;

#define all(x) (x).begin(),(x).end()
#define pb push_back
#define mp make_pair
#define tr(c,it) for(typeof((c).begin()) it=(c).begin();it!=(c).end();it++)
#define rd(x) scanf("%lld",&x)
#define wr(x) printf("%lld\n",x)
#define rep(i,a,b) for(i=a;i<b;i++)
#define pi 3.141592653589793238462643383279
#define MOD 1000000007     // 10^9+7



int main()
{
    ll p;
   rd(p);
   while(p--)
   {
       char S[1005],T[1005];
       ll len1,len2,i,m,src,dest,j,k;
       scanf("%s",S);
       scanf("%s",T);
       len1=strlen(S);
       len2=strlen(T);
       if(len1!=len2)
       {
           printf("NO\n");
           continue;
       }
       ll matrix[26][26];
      for(i=0;i<26;i++)
        for(j=0;j<26;j++)
          matrix[i][j]=0;
       rep(i,0,26)
         matrix[i][i]=1;
       rd(m);
       while(m--)
       {
           char mapping[5];
           scanf("%s",mapping);
           src=mapping[0]-'a';
           dest=mapping[3]-'a';
           matrix[src][dest]=1;
       }
/*
       for(i=0;i<26;i++)
       {
           for(j=0;j<26;j++)
           {
               if(matrix[i][j]&&i!=j)
               {
                   for(k=0;k<26;k++)
               {
                   if(matrix[j][k])
                    matrix[i][k]=1;
               }
               }

           }
       } */
       for(i=0;i<26;i++)
       {
           for(j=0;j<26;j++)
           {
               for(k=0;k<26;k++)
               {
                   if(matrix[j][i]&&matrix[i][k])
                    matrix[j][k]=1;
               }

           }
       }
       rep(i,0,len1)
       {
           if(!matrix[S[i]-'a'][T[i]-'a'])
            break;
       }

       if(i==len1)
        printf("YES\n");
       else
        printf("NO\n");


    }



   return 0;
}
