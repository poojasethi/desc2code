// codechef_codes.cpp : Defines the entry point for the console application.
//
 
#include <iostream>
#include <vector>
#include <algorithm>
#include <string>
#include <cstring>
#include <cstdio>
#include <cassert>
#include <cmath>
#include <time.h>
#include <cstdlib>
 
#define boost ios_base::sync_with_stdio(0);cin.tie(0);cout.tie(0)
#define max(a,b) ((a)>(b)?a:b)
#define min(a,b) ((a)<(b)?a:b)
#define min_3(a,b,c) (min((a),min((b),(c))))
#define INF 1000000007
 
using namespace std;
 
int a[107];
int arr[27][27];
 
int main() {
	boost;
	int tc,l,co,cou,flag;
	string str1,str2,str;
	cin >> tc;
	while (tc--) {
		flag = 1;
		for (int i = 0; i < 26; i++) {
			for(int j = 0 ; j < 26 ; j++)
				arr[i][j] = 0;
				}	
				cin>>str1>>str2;
				if (str1.length() != str2.length()) {
					cout << "NO"<<endl;
					continue;
				}
				cin >> l;
				for(int i = 0 ; i < l; i++){
					cin >> str;
					arr[str[0]-'a'][str[3]-'a'] = 1;
					}
				for (int k = 0; k < 26; k++) {
					for (int i = 0; i < 26; i++) {
						for(int j = 0; j < 26 ; j++)
							arr[i][j] = arr[i][j] | (arr[i][k]&arr[k][j]);
					}
				}
				for (int i = 0; i < str1.length(); i++) {
					if (str1[i] != str2[i]) {
						if(arr[str1[i] - 'a'][str2[i] - 'a'] != 0)
							flag = 1;
						else {
							flag = 0;
							break;
						}
					}
				}
				if(flag)
					cout << "YES"<<endl;
				else
					cout << "NO"<<endl;
	}
} 