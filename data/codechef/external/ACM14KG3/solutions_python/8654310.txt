#include <bits/stdc++.h>
using namespace std;

#define sd(x) scanf("%d",&x)
#define ll long long

bool graph[26][26];

int main(){
	int m,t;
	string a,b,tmp;
	bool ans;
	sd(t);
	while(t--){
		ans=1;
		memset(graph,0,sizeof(graph));
		for(int i=0;i<26;i++)graph[i][i]=1;
		cin>>a>>b;
		sd(m);
		while(m--){
			cin>>tmp;
			graph[tmp[0]-'a'][tmp[3]-'a']=1;
		}
		if(a.size()==b.size()){
			for(int i=0;i<26;i++){
				for(int j=0;j<26;j++){
					for(int k=0;k<26;k++){
						graph[j][k]=(graph[j][k] || (graph[j][i] & graph[i][k]));
					}
				}
			}
			for(int i=0;i<a.size();i++){
				if(graph[a[i]-'a'][b[i]-'a']==0){
					ans=0;
					break;
				}
			}
		}
		else ans=0;
		cout<<(ans?"YES\n":"NO\n");
	}
	return 0;
}