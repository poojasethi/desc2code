#include<bits/stdc++.h>
using namespace std;
typedef long long ll; 
typedef unsigned long long ull;
typedef pair<int,int> pii;
typedef vector<int> vec; 
const int INF   = 1000000001;
const ll  INFL  = 1000000000000000001;
#define loop(i,a,b) for(i=a;i<b;i++)
#define fill(a,i) memset(a,i,sizeof(a))
#define M 1000000007
#define pb push_back
#define popb pop_back
#define pf push_front
#define make make_pair
#define fi first
#define sec second
#define debug(x) cout << '>' << #x << '=' << x << endl;
#define sz(x) ((int)x.size())
#define si(n) scanf("%d",&n)
#define gi(n) printf("%d\n",n)
#define sl(n) scanf("%I64d",&n)
#define gl(n) printf(" %I64d\n",n)
#define sll(n) scanf("%lld",&n)
#define gll(n) printf("%lld\n",n)
#define nl() printf("\n")
#define limit 1000009
#define pi 3.14159
#define fread freopen("abc.txt","r",stdin)
#define fwrite freopen("out.txt","w",stdout);
//map< int , map<int , int > > mp;
bool dis[30][30];
int floyd()
{
	 
	 int i,j,k;
	 
	 loop(k,1,27)
	 {
		 loop(i,1,27)
		 {
			 loop(j,1,27)
			 {
				 if( dis[i][k]==true && dis[k][j]==true )
				 {
					 dis[i][j] = true;
					 
					
				 }
			 }
		 }
	 }
	 
	 return 0;
	 
}
int main()
{
  
 // fread;
  int t;
  cin>>t;
  while(t--)
  {
	  fill(dis,false);
	 
	  string s,t;
	  cin>>s>>t;
	  int m,i;
	  loop(i,0,30)
	  dis[i][i]=true;
	  
	  cin>>m;
	  
	  loop(i,0,m)
	  {
		  string x;
		  cin>>x;
		  
		  int u = x[0]-96;
		  int v= x[3]- 96;
		  dis[u][v]= true;
	  }
	  
	  floyd();
	  
	  int l = s.size();
	  int flag=0;
	  loop(i,0,l)
	  {
		  int r1 = s[i]-96;
		  int r2 = t[i]-96;
		  
		  if(dis[r1][r2]==false)
		  {
			flag=1;
			break;
	      } 
		  
	  }
	  
	  int l2= t.size();
	  //cout<<dis[1][2];
	  if(flag|| l!=l2)
	  cout<<"NO\n";
	  else
	  cout<<"YES\n";
	  
  }
  
  return 0;
}


