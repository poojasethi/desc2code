#include <bits/stdc++.h>

typedef long long ll;
using namespace std;

char s[1010],t[1010];
char temp[10];
int d[26][26];
int main()
{
    int p,i,j,k,n,m;
    scanf("%d",&p);
    while(p--) {
        scanf("%s",s);
        scanf("%s",t);
        scanf("%d",&m);
        for(i=0;i<26;i++)
            for(j=0;j<26;j++)
                d[i][j]=(i==j)?1:1000000000;
        while(m--) {
            scanf("%s",temp);
            d[temp[0]-'a'][temp[3]-'a']=1;
        }
        n=(int)strlen(s);
        if(strlen(t)!=n) {
            printf("NO\n");
        }
        else {
            for(k=0;k<26;k++)
                for(i=0;i<26;i++)
                    for(j=0;j<26;j++)
                        d[i][j]=min(d[i][j],d[i][k]+d[k][j]);
            for(i=0;i<n;i++) {
                if(d[s[i]-'a'][t[i]-'a']<1000000000) continue;
                else break;
            }
            if(i==n) {
                cout<<"YES\n";
            }
            else {
                cout<<"NO\n";
            }
        }
    }
    return 0;
}