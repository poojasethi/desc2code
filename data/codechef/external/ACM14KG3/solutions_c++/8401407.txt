#include <iostream>
#include <stdio.h>
#include <vector>
#include <string.h>
using namespace std;
typedef long long ll;
#define INF 1000000000
#define MAXN 1005
ll A[26][26];
char S[MAXN], T[MAXN], mp[MAXN];
void solve() {
    for(int i = 0; i < 26; i++) for(int j = 0; j < 26; j++) A[i][j] = INF;
    scanf("%s", S); scanf("%s", T);
    int M; scanf("%d", &M);
    for(int i = 0; i < 26; i++) A[i][i] = 1;
    for(int i = 0; i < M; i++) {
        scanf("%s", mp);
        int a = mp[0] - 'a'; int b = mp[3] - 'a';
        A[a][b] = 1;
    }
    for(int k = 0; k < 26; k++) {
        for(int i = 0; i < 26; i++) {
            for(int j = 0; j < 26; j++) {
                A[i][j] = min(A[i][j], A[i][k] + A[k][j]);
            }
        }
    }
    int P = strlen(S), Q = strlen(T);
    if(P != Q) puts("NO");
    else {
        for(int i = 0; i < P; i++) {
            int x = S[i] - 'a', y = T[i] - 'a';
            if(A[x][y] >= INF) {
                puts("NO");
                return;
            }
        }
        puts("YES");
    }
}
int main() {
    int t;
    scanf("%d", &t);
    while(t--) solve();
}
