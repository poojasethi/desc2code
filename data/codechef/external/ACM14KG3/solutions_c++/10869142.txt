#include<iostream>
#include<string>
#include<vector>

using namespace std;
int main()
{
    int t;
    cin>>t;
    string str1;
    string str2;
    int m;
    int l;
    int i,j,k;
    string g;
    int ans;
    while(t--)
    {
        bool arr[26]={false};

        int graph[26][26]={0};
        for(i=0;i<26;i++)
            graph[i][i]=1;

        ans=0;
        cin>>str1;
        cin>>str2;

        cin>>m;
        while(m--)
        {
        cin>>g;
        graph[g[0]-'a'][g[3]-'a']=1;
        }


        if(str1.length()!=str2.length())
        {
            cout<<"NO\n";
            ans=1;
            continue;

        }

        else
            l=str1.length();

        for(k=0;k<26;k++)
            for(i=0;i<26;i++)
                for(j=0;j<26;j++)
                if(graph[i][j]==0)
                        if(graph[i][k]==1 && graph[k][j]==1)
                        {
                            graph[i][j]=1;
                        }

        for(i=0;i<l;i++)
            if(str1[i]==str2[i])
                continue;
            else
            if(graph[str1[i]-'a'][str2[i]-'a']==0)
            {
                cout<<"NO\n";
                ans=1;
                break;
            }

        if(ans==0)
            cout<<"YES\n";




    }


    return 0;

}
