#include<iostream>
using namespace std;
#include<stdio.h>
#include<algorithm>
#include<vector>
#include<queue>
#include<utility>
#include<stack>
#include<map>
#include<set>
#include<string.h>
#include<math.h>
#define MOD 1000000007
#define MIN -100000000
#define MAX 100000000
#define ll long long int
template<class T>T gcd(T a,T b){return (b==0)?a:gcd(b,a%b);}
template<class T>T lcm(T a,T b){return (a*b)/gcd(a,b);}
template<class T>T powmod(T a,T b,T mod) {T res=1;if(a>=mod)a%=mod;for(;b;b>>=1){if(b&1)res=res*a;if(res>=mod)res%=mod;a=a*a;if(a>=mod)a%=mod;}return res;}

/* HOPE n WILL :)
	NGU :)
	_/\_ 	*/
// MG

int floyd[27][27];
char s[1005];
char t1[1005];
char temp[15];
void floyd1()
{
	int i,j,k;
	for(k=0;k<26;k++)
	{
		for(i=0;i<26;i++)
		{
			for(j=0;j<26;j++)
			{
				floyd[i][j]=floyd[i][j] || (floyd[i][k] && floyd[k][j]);
			}
		}
	}
}
int main()
{
	int l1,j,l2,n,i,t,a,m,ans;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%s",s);
		scanf("%s",t1);
		l1=strlen(s);
		l2=strlen(t1);
		scanf("%d",&m);
		for(i=0;i<27;i++)
		for(j=0;j<27;j++)
		floyd[i][j]=0;
		while(m--)
		{
			scanf("%s",temp);
			floyd[temp[0]-'a'][temp[3]-'a']=1;
		}
		
		floyd1();
		if(l1!=l2)
		{
			printf("NO\n");
			continue;
		}
		int f=0;
		
		for(i=0;i<l1;i++)
		{
			if(s[i]==t1[i])
			continue;
			if(floyd[s[i]-'a'][t1[i]-'a']==1)
			continue;
			else {
				f=1;
				break;
			}
		}
		if(f)
		printf("NO\n");
		else printf("YES\n");
	}
	return 0;
}