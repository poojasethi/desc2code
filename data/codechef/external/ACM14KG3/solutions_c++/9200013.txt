#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define scan(a) scanf("%d", &a)
#define scanll(a) scanf("%lld", &a)
#define scanlf(a) scanf("%lf", &a)
#define print(a) printf("%d", a)
#define printll(a) printf("%lld", a)
#define printlf(a) printf("%lf", a)
#define newline printf("\n")
#define spacebar printf(" ")
#define testcases int t; scanf("%d", &t); while(t--)
#define pb push_back
#define mp make_pair

int dist[40][40];

int convert(char ch){
	char a = 'a';
	return (int) ch - (int) a + 1;
}

bool check(string A, string B, int len, vector< pair< char, char > > maps){
	for(int i = 0; i < 30; i++) for(int j = 0; j < 30; j++) dist[i][j] = -1;
	int mapsLen = maps.size();
	for(int i = 0; i < mapsLen; i++) {
		int x = convert(maps[i].first);
		int y = convert(maps[i].second);
		dist[x][y] = 1;
	}
	for(int i = 1; i <= 26; i++){
		dist[i][i] = 1;
	}
	for(int k = 1; k <= 26; k++){
		for(int i = 1; i <= 26; i++){
			for(int j = 1; j <= 26; j++){
				if((dist[i][k] == 1 && dist[k][j] == 1) || dist[i][j] == 1){
					dist[i][j] = 1;
				}
			}
		}
	}
	for(int i = 0; i < len; i++){
		int x = convert(A[i]);
		int y = convert(B[i]);
		if(dist[x][y] == -1) return false;
	}	
	return true;
}

int main(){
//	cout << convert('a') << convert('b') << convert('c');
//	char ask;
//	cin >> ask;
//	if(ask == 'n') return 0;
//	freopen("i.txt", "r", stdin);
	testcases{
		string A, B;
		cin >> A >> B;
		int M;
		scan(M);
		vector< pair< char, char > > maps;
//		cout << "scanned!\n";
		for(int i = 0; i < M; i++){
			string temp;
			cin >> temp;
			maps.pb(mp(temp[0], temp[3]));
		}
//		cout << "map complete!\n";
		int lenA = A.size();
		int lenB = B.size();
		if(lenA != lenB) printf("NO\n");
		else {
			if(check(A, B, lenA, maps)) printf("YES\n");
			else printf("NO\n");
		}
	}	
	return 0;
}
