#include <bits/stdc++.h>

using namespace std;

int main(){
  int t,n,m,a,i,j,k;
  string s1,s2,z;
  cin>>t;
  while(t--){
    cin>>s1>>s2;
    bool dp[26][26]={false};
    cin>>m;
    while(m--){
        cin>>z;
        dp[z.at(0)-97][z.at(3)-97]=true;

    }
    if(s1.length()!=s2.length()){
        cout<<"NO"<<endl;
        continue;
    }
    for(i=0;i<26;++i)
        dp[i][i]=true;
    for(k=0;k<26;++k){
        for(i=0;i<26;++i){
            for(j=0;j<26;++j){
                dp[i][j] = dp[i][j] || (dp[i][k] && dp[k][j]);
            }
        }
    }
    int l = s1.length();
    for(i=0;i<l;++i){
        if(dp[s1.at(i)-97][s2.at(i)-97]==false)
            break;
    }
    if(i==l)
        cout<<"YES"<<endl;
    else
        cout<<"NO"<<endl;
  }
  return 0;
}
