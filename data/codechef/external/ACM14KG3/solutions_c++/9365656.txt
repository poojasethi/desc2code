#include<iostream>
#include<cstdio>
#include<queue>
#include<vector>
#include<limits.h>
#include<map>
#include<algorithm>
#include<utility>
#include<cstring>

#define f(i,a,b) for(int i=a;i<b;i++)
#define b(i,a,b) for(int i=a;i>b;i--)
#define mpr(a,b) make_pair(a,b)
#define pr pair<int,int>
#define si(a) scanf("%d",&a)
#define ss(a) scanf("%s",a)
#define newline printf("\n")
using namespace std;

main()
{
    //freopen("input.txt","r",stdin);
    int p,m;
    char u[5],s[1005],t[1005];
    si(p);
    while(p--)
    {
        int graph[26][26]={0};
        ss(s);ss(t);
        si(m);
        f(i,0,m)
        {
            ss(u);
            graph[u[0]-'a'][u[3]-'a']=1;
        }
        f(i,0,26)
        {
            f(j,0,26)
            {
                
                if(graph[i][j]==0)
                    graph[i][j]=200000;
            }
        }
        if(strlen(s)!=strlen(t))
            printf("NO\n");
        else
        {
            f(k,0,26)
            {
                f(i,0,26)
                {
                    f(j,0,26)
                    {
                        graph[i][j]=min(graph[i][j],graph[i][k]+graph[k][j]);
                    }
                }
            }
            int l=strlen(s);int d=0;
            f(i,0,l)
            {
                if(s[i]!=t[i]&&graph[s[i]-'a'][t[i]-'a']>=200000)
                {
                    d=1;
                    break;
                }
            }
            /*f(i,0,26)
            {
                f(j,0,26)
                cout<<graph[i][j]<<" ";
                newline;
            }
            newline;*/
            if(d==1)
                printf("NO\n");
            else
                printf("YES\n");
        }
    }
}
