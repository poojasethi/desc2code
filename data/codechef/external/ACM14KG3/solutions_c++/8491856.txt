#include<bits/stdc++.h>

#define llu unsigned long long
#define ll long long
#define pi 3.141592
#define nl printf("\n")
#define f(i,l1,l2) for(i=l1;i<l2;i++)
#define gc getchar_unlocked
#define vi vector<int>
#define vit vi::iterator
#define all(c) c.begin(), c.end()
#define pb push_back
using namespace std;

/*void fin(int &x)       //does not compile in codeblocks but does in online judges
{                        //use if input too large ( only for integers )
int i=0;x=0;
register int c=gc();
while(c<48||c>57)
c=gc();
while(c>47&&c<58)
{
x=(x<<1)+(x<<3) + c-48;
i++;
c=gc();
}
}*/

bool visited[30];


bool dfs(vector<vector<int> > &x, int s, int e)
{
    //cout<<s<<" "<<e<<endl;
    if(visited[s])
        return false;

    if(s==e)
        {
            return true;
            //cout<<"bla";
            }
    visited[s] =  true;
    bool f = 0;
    int i;
    f(i,0,x[s].size())
    {
        int v = x[s][i];
        f = f|dfs(x,v,e);
        if(f)
            break;

    }
    return f;
}
int main()
{
    std::ios::sync_with_stdio(false);
    cin.tie(0);
    int t,i,n,e;
    cin>>t;
    while(t--)
    {

        string a,b;
        cin>>a;
        cin>>b;
        vector<vector<int> > G(30);

        int m;
        cin>>m;
        while(m--)
        {
            char y[5];
            cin>>y;
            G[y[0]-97].pb(y[3]-97);
            //G[y[0]-97].pb(y[0]-97);
            //G[y[3]-97].pb(y[3]-97);
        }
        int j;


        int len_a = a.length();
        if(len_a!= b.length())
        {
            cout<<"NO\n";
        }
        else
        {
            int sid = 1;
            f(i,0,len_a)
            {
                fill(visited,visited+30,0);
                if(!dfs(G,(int)a[i]-97,(int)b[i]-97))
                {sid =0;
                break;}
            }

            if(sid)
                cout<<"YES\n";
            else
                cout<<"NO\n";

        }


    }

    return 0;
}
