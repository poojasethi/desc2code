#include<iostream>
#include<stdio.h>
#include<bits/stdc++.h>
using namespace std;
int vis[100];

bool dfs(int st,int end,list<int> arr[])
{
	 memset(vis,0,sizeof(vis));
	 vis[st]=1;
	 stack<int>s;
	 s.push(st);
	 while(!s.empty())
	 {
	 	  int nd=s.top();
	 	  s.pop();
	 	  if(nd==end)
	 	  return 1;
	 	  list<int>::iterator it;
	 	  for(it=arr[nd].begin();it!=arr[nd].end();it++)
	 	  {
	 	  	   if(!vis[*it])
	 	  	   {
	 	  	   	  vis[*it]=1;
				   s.push(*it);
				  }
		   }
	 }
	 return 0;
}
int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		list<int> arr[29];
		  string str1,str2;
		   cin>>str1;
		   cin>>str2;
		   int q;
		   cin>>q;
		   char inp[10];
		   while(q--)
		   {
		   	   cin>>inp;
		   	   arr[inp[0]-'a'].push_back(inp[3]-'a');
		   	   
		   }
		   int l1=str1.size();
		   int l2=str2.size();
		   if(l1!=l2)
		   {
		   	cout<<"NO"<<endl;
		   	continue;
		   }
		   else
		   {
		   	    int l=l1;
		   	    bool f=0;
		   	    for(int i=0;i<l;i++)
		   	    {
		   	           int c1=str1[i]-'a';
						  int c2=str2[i]-'a';
						  if(c1==c2)
						  continue;
						  if(dfs(c1,c2,arr)==0)
						  {
						  	  f=1;
						  	  break;
							  }	
				}
				if(f==0)
				cout<<"YES"<<endl;
				else
				cout<<"NO"<<endl;
		   }
	}
	return 0;
}