#include<bits/stdc++.h>
using namespace std;
void dfs(int b[][26],int i,int j,int vis[],int *ans)
{
	//cout<<i<<" "<<j<<endl;
	vis[i]=1;
	if(i==j)
	{
	*ans=1;
	return ;
    }
	int k;
	for(k=0;k<26;k++)
	{
		if(!vis[k] && b[i][k])
		dfs(b,k,j,vis,ans);
	}
}
int main()
{
    int t,a,y,z,i,j;
    cin>>t;
    string s,r,u;
    while(t--)
    {
    	int b[26][26],vis[26];
		for(i=0;i<26;i++)
		{
			vis[i]=0;
			for(j=0;j<26;j++)
			{
			b[i][j]=0;	
			}
		}
		cin>>r>>s;
    	cin>>a;
    	while(a--)
    	{
    	cin>>u;
        y=u[0]-97;
        z=u[3]-97;
        b[y][z]=1;
        }
        if(s.size()!=r.size())
        cout<<"NO"<<endl;
        else
        {
        	for(i=0;i<s.size();i++)
        	{
        		for(j=0;j<26;j++)
				vis[j]=0;
				int ans=0;
				dfs(b,r[i]-97,s[i]-97,vis,&ans);
				if(ans==1)
        		continue;
        		else
        		break;
        	}
        	if(i==s.size())
        	printf("YES\n");
        	else
        	printf("NO\n");
        }
    }
	return 0;
}