#include <bits/stdc++.h>
#define loop(i,k,n) for(int i=k;i<n;i++)
using namespace std;
int main() 
{   int t;
cin>>t;
while(t--){
	stack<string> stack,stack1;
	int i,j;
	int n;
	cin>>n;
	string str[n],cd[n],final;

	loop(i,0,n)
	{   
			cin>>cd[i];
		     if(cd[i]=="pwd")
		     { 	
		      for (std::stack<string> dump = stack; !dump.empty(); dump.pop())
		      		{
    				// final=final+dump.top()+'/';
    				 stack1.push(dump.top());
    				// cout<<final<<endl;
    				 }
    				
    				 final="";
    			 for (std::stack<string> dump = stack1; !dump.empty(); dump.pop())
    				 final=final+dump.top()+'/';
    				 
    				 if(final=="")
    				 cout<<'/'<<endl;
    				 else
    				 if(final[0]!='/'){
    				 final='/'+final;
    				 cout<<final<<endl;
    				 }
    				 else
    				 cout<<final<<endl;
    				   while (!stack1.empty())
  						{
    				
    					 stack1.pop();
  						}
    				 
		     }
		     else
		     {cin>>str[i];
		     if(str[i][0]=='/'&&str[i][1]=='.')
		     {
		     	
		     }else
		     if(str[i][0]=='/'){
		     	
		     	    while (!stack.empty())
  						{
    				
    					 stack.pop();
  						}
		     }
		     	int count=0,k=0;char cat[1000];
		     	loop(j,0,str[i].length())
		     	{   
		     	     	if(str[i][j]=='/'&&count!=0)
		     		{     cat[k]='\0';
		     				if(strcmp(cat, "..") == 0||strcmp(cat, "/..") == 0){
		     				stack.pop();}
		     				else{
		     					//cout<<cat;
		     		        stack.push(cat);}
		     		        count=0;
		     				k=0;
		     		}else
		     		{
		     			count=1;
		     		}	
		     		if(count==1)
		     		{
		     			cat[k]=str[i][j];
		     		  k++;
		     		}
		     	
		     	
		     	}
		     	if(count==1)
		     	{ cat[k]='\0';
		     	 if(strcmp(cat, "..") == 0||strcmp(cat, "/..") == 0){
		     		stack.pop();}
		     		else{
		     			//cout<<cat;
		     		stack.push(cat);}
		     		
		     	}
		     }

	}
}
	
	return 0;
}