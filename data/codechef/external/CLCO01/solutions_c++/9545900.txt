#include<iostream>
#include<string>
#include<stack>
#include<algorithm>
using namespace std;
 stack<string> st,st1;
int main()
{
	int t,n,i;
	cin>>t;
	string s,s1,s2,s3,c,p;
	c="cd";
	p="pwd";
	bool chk;
	
	while(t--)
	{
		cin>>n;
		chk=false;
		while(n--)
		{
			cin>>s;
			if(s == c) {
			  cin>>s1;
			  s1=s1+"/";
			  s2="";
			  for(i=0;i<s1.length();i++)
			  {
			  	   if(i==0 && s1.at(0)!='/' && st.empty()) chk=true;
				   if(s1.at(i)=='/') 
				   {
				   	 if(i==0)
				   	 	 while(!st.empty()) st.pop();
				   	 if(!s2.empty()) 
						{
						  if(chk) {
						    st.push("/");
						    chk=false;
						   }
						  st.push(s2);
					     }
			  	 	 st.push("/");
			  	 	 //cout<<s2<<"\n";
			  	 	 s2=""; 
				   }
				   
				   else if(s1.at(i) == '.')
				   {
				   	  st.pop();
				   	  st.pop();
				   	  i+=2;
				   }
				   else 
			         s2=s2+s1.at(i);
			  }	
			}
			else
			{
				if(st.empty()) cout<<"/\n";
				else 
				{
				  st1=st;
				  s2="";
				  while(!st1.empty())
				  {
				    s2=st1.top()+s2;
				    st1.pop();
				  }
				  cout<<s2<<"\n";
			    }
			    }
		}
		s2="";
		while(!st.empty()) st.pop();
	}
	return 0;
}
