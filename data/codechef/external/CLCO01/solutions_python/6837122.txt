import re
#t test cases
t = int(raw_input())
for i in range(0,t):
        #n command lines
        n = int(raw_input())
        path = "/"
        for j in range(0,n):
                com = raw_input()
                #print "New command"
                if com == "pwd":
                        #print current working dir
                        print path

                else:
                        com = com.split(' ')[1]
                        if com[-1] != '/':
                                com = com + '/'
                        while com != "":
                                #print "Processing : ", com," PWD : ", path
                                #shift to the directory as per command
                                if com[0] == '.' and com[1] == '/':
                                        # same dir
                                        com = com[2:]
                                elif com[0:2] == "..":
                                        # one dir back
                                        path = path.rsplit('/',2)[0] + '/'
                                        com = com[3:]
                                elif com[0] == '/':
                                        # from root
                                        path = "/"
                                        com = com.split('/',1)[1]
                                else:
                                        # within the current dir
                                        path = path + com.split('/', 1)[0] + '/'
                                        com = com.split('/',1)[1]

