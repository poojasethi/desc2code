#include <bits/stdc++.h>
using namespace std;
const int N = 1000000;
int n;
long long t[N<<1];
void build(){
	int i;
	for(i=0; i<n; ++i) scanf("%lld",t+n+i);
	for(i=n-1; i>0; --i) t[i] = t[i<<1] | t[i<<1|1];
}
 
void update(int p, long long x){
	for(t[p+=n] = x; p>1; p >>= 1) t[p>>1] = t[p] | t[p^1];
}
long long query(int l, int r){
	long long res = 0;
	for(l += n, r += n; l<r; l >>= 1, r >>= 1){
		if(l&1) res |= t[l++];
		if(r&1) res |= t[--r];
	}
	return res;
}
long long pw(long long a, long long b){
	long long res = 1;
	while(b){
		if(b&1) res = res * a % 1000000007;
		a = a * a % 1000000007;
		b >>= 1;
	}
	return res;
} 
//XOR SUM of ALL SUBSEQUENCES of LIST = 2^(N-1) x OR SUM of N-SIZED LIST
int main(){
	int q, qt, l, r, v; long long x;
	scanf("%d %d",&n,&q);
	
	build();
    
    while(q--){
    	scanf("%d",&qt);
    	if(qt==1){
    		scanf("%d %d",&l,&r);
    		printf("%lld\n",query(l-1,r) * pw(2,r-l) % 1000000007);
    	}
    	else{
    		scanf("%d %lld",&v,&x);
    		update(v-1,x);
    	}
    }
    return 0;
} 