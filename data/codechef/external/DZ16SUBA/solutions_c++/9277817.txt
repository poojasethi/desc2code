#include<bits/stdc++.h>
#define ll long long
#define fi first
#define se second
ll mpow(ll a, ll n,ll mod)
{ll ret=1;ll b=a;while(n) {if(n&1)
    ret=(ret*b)%mod;b=(b*b)%mod;n>>=1;}
return (ll)ret;
}
using namespace std;
#define mem(x,a) memset(x,a,sizeof(x))
#define pii pair<int,int>
#define mp make_pair
#define pb push_back
#define all(v) v.begin(),v.end()
using namespace std;
#define N (int)(1e6+3)
ll MOD=1e9+7;
ll pow2[N];
ll seg[6*N];
int a[N],n,q;
void build(int i,int l,int r){
    if(l==r){
        seg[i]=a[l];
        return;
    }
    build(2*i,l,(l+r)/2);
    build(2*i+1,(l+r)/2+1,r);
    seg[i]=seg[2*i]|seg[2*i+1];
}
void update(int i,int l,int r,int x,ll val){
    if(x<l||x>r)
        return;
    if(l==r&&l==x){
        seg[i]=val;
        return;
    }
    update(2*i,l,(l+r)/2,x,val);
    update(2*i+1,(l+r)/2+1,r,x,val);
    seg[i]=seg[2*i]|seg[2*i+1];
}
ll query(int i,int l,int r,int ql,int qr){
    if(ql>r||qr<l)
        return 0;
    if(ql<=l&&r<=qr){
        return seg[i];
    }
    return query(2*i,l,(l+r)/2,ql,qr)|query(2*i+1,(l+r)/2+1,r,ql,qr);
}
int main(){
    scanf("%d%d",&n,&q);
    for(int i=1;i<=n;i++){
        scanf("%d",&a[i]);
    }
    build(1,1,n);
    pow2[0]=1;
    for(int i=1;i<n+2;i++){
        pow2[i]=(pow2[i-1]*(2ll));
        if(pow2[i]>=MOD)
            pow2[i]-=MOD;
    }
    while(q--){
        int t;
        scanf("%d",&t);
        if(t==2){
            int x,v;
            scanf("%d%d",&v,&x);
            update(1,1,n,v,x);
        }
        else{
            int l,r;
            scanf("%d%d",&l,&r);
            ll x=query(1,1,n,l,r);
            x=(x*pow2[r-l])%MOD;
            printf("%lld\n",x);
        }
    }
    return 0;
}
