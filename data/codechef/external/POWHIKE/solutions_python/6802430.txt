import java.io.*;
class Trb 
{
    public static void main(String[] args)throws IOException
    {
        DataInputStream d=new DataInputStream(System.in);
        int T=Integer.parseInt(d.readLine());
        int flag2=0,flag=0;
        
        long n=0,m=0,k=0,x=0,base=1,store=1;
        while(T>0)
        {
            StringBuffer s=new StringBuffer(d.readLine());
            
            
            for(int j=0 ; j<s.length() ; j++)
            {
                 if(s.charAt(j)==' ')
                  {
                      flag++;
                      continue;
                  }
                  if(flag==0)
                    n=n*10+Integer.parseInt(s.charAt(j)+"");
                  if(flag==1)
                    m=m*10+Integer.parseInt(s.charAt(j)+"");
                  if(flag>1)
                      k=k*10+Integer.parseInt(s.charAt(j)+"");
            }
       
             StringBuffer s3=new StringBuffer();
             String s2=Long.toBinaryString(m);
             s3=s3.append(s2);
             s3=s3.reverse();
             //System.out.println(s3);
             base=n%k;
             for(int i=1;i<s3.length();i++)
             {
                 if(s3.charAt(i)=='0')
                     continue;
                 else if(store==0)
                     break;
                 else if(s3.charAt(i)=='1')
                 {
                     for(int j=1 ; j<=i-x ; j++)
                         base=((base%k)*(base%k))%k;
                     
                     x=i;
                     store=(store*base)%k;
                 }
               
             }
             if(s3.charAt(0)=='1')
                 store=(store*(n%k))%k;
             
             System.out.println(store);
             x=0;base=1;store=1;
             n=0;m=0;k=0;flag=0;
             T--;
    }
    
}
}