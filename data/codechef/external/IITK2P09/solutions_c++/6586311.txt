#include <bits/stdc++.h>

#define MOD (1000000009)
#define MAXINT 1e9
#define EPS (1e-9)
#define mp   make_pair
#define pb   push_back
#define pii  pair<int,int> 
#define vi   vector<int> 
#define se   second
#define fi   first
#define ll long long int
#define FOR(i,a,b) for(int i=a;i<b;i++)
#define MM 100000000000000LL

using namespace std;

vi adj[200005];
int a1[200005],a2[200005],n;


void dfs(int node,int *d)
{
	int i,c;
	for(i=1;i<=n;i++)
		d[i]=-1;
	queue<int> q;
	q.push(node);
	d[node]=0;
	while(!q.empty())
	{
		node=q.front();
		q.pop();
		for(i=0;i<adj[node].size();i++)
		{
			c=adj[node][i];
			if(d[c]==-1)
			{
				d[c]=d[node]+1;
				q.push(c);
			}
		}
	}
}

void solve(void)
{
	int i,x,y,x1,x2;
	scanf("%d",&n);
	for(i=0;i<=n;i++)	
		adj[i].clear();
	for(i=0;i<n-1;i++)
	{
		scanf("%d%d",&x,&y);
		adj[x].pb(y);
		adj[y].pb(x);
	}
	dfs(1,a1);
	x1=1;
	for(i=2;i<=n;i++)
		if(a1[i]>a1[x1])
				x1=i;
	dfs(x1,a1);
	x2=1;
	for(i=2;i<=n;i++)
		if(a1[i]>a1[x2])
				x2=i;
	dfs(x2,a2);
	float a=0;
	for(i=1;i<=n;i++)
		a+=max(a1[i],a2[i]);
	a/=n;
	printf("%.7f\n",a);
}

int main()
{
	int t,test;
	cin>>test;
	for(t=1;t<=test;t++)
		solve();
	return 0;
}