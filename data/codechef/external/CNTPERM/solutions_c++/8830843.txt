#include<bits/stdc++.h>
#define ll long long
#define MAX 10487577
using namespace std;
map<int, long long> dp;
long long mod;
ll fact[MAX], inv[MAX];
ll bpow(ll a,ll n){
    ll res = 1;
    while(n){
        if(n&1)
            res = (res * a) % mod;
        a = (a * a) % mod;
        n >>= 1;
    }
    return res;
}
void pre(){
    fact[0] = 1;
    for(int i = 1;i <= MAX; ++i)
        fact[i] = (fact[i - 1] * i) % mod;
}
ll C(int n, int r){
    ll ans = fact[n];
    ans *= bpow(fact[n - r], mod - 2);
    ans %= mod;
    ans *= bpow(fact[r], mod - 2);
    ans %= mod;
    return ans;

}
void calc(int a){
    int x = a / 2;
    int l = a - x;
    int r = a - l - 1;
    if(a % 2)
        l -= 1, r += 1;
    dp[a] = (((dp[l]*dp[r]) % mod)*C(a - 1, l)) % mod;
    if(a % 2 == 0){
        dp[a] *= 2;
        dp[a] %= mod;
    }
}
int main(){
    dp[1] = 1;
    dp[2] = 2;
    dp[3] = 2;
    int n;
    cin >> n >> mod;
    pre();
    for(int i = 3;i <= 20; ++i){
        int a = (1 << i) - 1;
        calc(a);
        calc(a - 1);
    }
    cout << dp[n] << "\n";
    return 0;
}
