#include <bits/stdc++.h>

#define f(i, a, n) for (i = a; i < n; i++)
#define fd(i, n, a) for (i = n; i >= a; i--)
#define rep(i,n) f(i,0,n)
#define pb push_back
#define MOD 1000000007

#define s(x) scanf("%lld", &x); //s(x) is for long long int.
#define si(x) scanf("%d", &x);

#define p(x) printf("%lld", x);  //p(x) is for long long int.
#define pn(x) printf("%lld\n", x);  //..n(x) is for printing with New Line.
#define ps(x) printf("%lld ", x);  //..s(x) is for printing with Space.
#define pi(x) printf("%d", x);
#define pin(x) printf("%d\n", x);
#define pis(x) printf("%d ", x);

typedef long long ll;
using namespace std;
ll i, j;
ll m, n;
ll a[105][105];
int tc;
int main()
{
	#ifndef ONLINE_JUDGE
	freopen("/home/spharish/input.txt", "r", stdin);
	#endif
	si(tc);
	while (tc--) {
		ll ans = LONG_MIN;
		s(m); s(n);
		rep(i, m) {
			rep(j, n) {
				s(a[i][j]);
			}
		}

		rep(i, m) {
			rep(j, n) {
				ll tmp = 0;
				ll k = 1;
				tmp = a[i][j];
				while (i+ k < m and i-k >= 0 and j+k < n and j-k >= 0) {
					ans = max(ans, tmp+a[i-k][j-k]+a[i+k][j-k]+a[i-k][j+k]+a[i+k][j+k]);
					tmp = tmp+a[i-k][j-k]+a[i+k][j-k]+a[i-k][j+k]+a[i+k][j+k];
					k++;
				}
			}
		}

		rep(i, m) {
			rep(j, n) {
				ll tmp = 0;
				if (i+1 < m and j+1 < n) {
					tmp = a[i][j]+a[i+1][j]+a[i][j+1]+a[i+1][j+1];
				}
				else {
					break;
				}
				ans = max(tmp, ans);
				ll k = 1;
				while (i-k >= 0 and j-k >= 0 and i+1+k < m and j+1+k < n){
					ans = max(ans, tmp+a[i-k][j-k]+a[i-k][j+k+1]+a[i+1+k][j-k]+a[i+1+k][j+1+k]);
					tmp = tmp+a[i-k][j-k]+a[i-k][j+k+1]+a[i+1+k][j-k]+a[i+1+k][j+1+k];
					k++;
				}
			}
		}

		pn(ans);
	}

	return 0;
}