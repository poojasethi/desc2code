/*************************************************************
 * Purpose : https://www.codechef.com/problems/ACM14AM4

 * Author: Sahil Arora

 * Version: 1.0

 * Date: 10/10/15

 * Bugs : None

*************************************************************/
#include<bits/stdc++.h>
using namespace std;
int main(int argc, char const *argv[])
{
	/* code */
	std::ios_base::sync_with_stdio(false);
	long long test;
	cin>>test;
	while(test--){
		int m,n;
		cin>>m>>n;
		long long max=-1*INT_MAX,temp;
		vector< vector<int> > a(m,vector<int>(n,0));
		for(int i=0;i<m;++i)
			for(int j=0;j<n;++j)
				cin>>a[i][j];
		for(int i=1;i<m-1;++i)
			for(int j=1;j<n-1;++j){
				temp = a[i][j];
				for(int k=1;j-k>=0 && i-k>=0 && i+k<m && j+k<n;++k){
					temp += a[i-k][j-k] + a[i-k][j+k] + a[i+k][j-k] + a[i+k][j+k];
					if(temp > max)
						max = temp;
				}
			}
		for(int i=1;i<m;++i)
			for(int j=1;j<n;++j){
				temp = 0;
				for(int k=1;i+k-1<m && j+k-1<n && i-k>=0 && j-k>=0;++k){
					temp += a[i+k-1][j+k-1] + a[i+k-1][j-k] + a[i-k][j+k-1] + a[i-k][j-k];
					if(temp>max)
						max = temp;
				}

			}			
		cout<<max<<"\n";		
	}
	return 0;
}
