#include<bits/stdc++.h>
#define f(i,n) for(int i=0;i<n;i++)
#define fr(i,r,n) for(int i=r;i<n;i++)
#define s(a) scanf("%d",&a)
#define sc(a) scanf("%s",&a)
#define p(a) printf("%d\n",a)
#define ll long long
using namespace std;

int mat[105][105];
int diag[105][105];
int m,n;

void cal()
{
	f(i,n)
	{
		f(j,m)
		{
			if(!i || j==m-1)
			diag[j][i]=mat[j][i];
			else
			diag[j][i]=diag[j+1][i-1]+mat[j][i];
		}
	}
}
 int dsum(int x1,int y1,int x2,int y2)
 {
	int r;
	
	if(!y1 || x1==m-1)
	r=0;
	else
	r=diag[x1+1][y1-1];

	return diag[x2][y2]-r;
}
int main()
{
	int t;
	s(t);
	
	while(t--)
	{
		s(m); s(n);
		
		f(i,m)
		{
			f(j,n)
			s(mat[i][j]);
		}
		
		cal();
		/*cout<<"diag\n";
		f(i,m)
		{
			f(j,n)
			cout<<diag[i][j]<<" ";
			cout<<endl;
		}*/
		
		int maxi=-INT_MAX;
		
		f(i,m)
		{
			f(j,n)
			{
				int sum=mat[i][j];
				
				fr(l,1,m-i)
				{
					if(j+l<n)
					{	
						//right diag				
						sum+=mat[i+l][j+l];
						//left diag
						int sum2=sum+dsum(i+l,j,i,j+l);
						
						if(!(l&1))
						{
							//middle elem twice considered
							sum2-=mat[i+l/2][j+l/2];
						}
					//	cout<<"sum2 "<<" "<<sum2<<" "<<sum<<" "<<dsum(i+l,j,i,j+l)<<endl;
						maxi=max(sum2,maxi);
					}
					else
					break;
				}
				//cout<<endl;	
			}
			//cout<<endl;
		}
		
		p(maxi);
	}	
}