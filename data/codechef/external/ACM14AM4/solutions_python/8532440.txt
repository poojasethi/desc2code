#include<iostream>
#include<algorithm>
#include<string>
#include<map>//int dx[4]={0,0,-1,1};int dy[4]={-1,1,0,0};
#include<set>//int gcd(int a,int b){return b?gcd(b,a%b):a;}
#include<vector>
#include<cmath>
#include<stack>
#include<string.h>
#include<stdlib.h>
#include<cstdio>
#define mod 1e9+7
#define ll long long
using namespace std;
int x[105][105];
ll dp1[105][105],dp2[105][105];
int main(){
	int t;
	scanf("%d",&t);
	while(t--){
		int n,m;
		cin>>n>>m;
		for(int i=1;i<=n;++i){
			for(int j=1;j<=m;++j){
				cin>>x[i][j];
				dp1[i][j]=x[i][j];
				dp2[i][j]=x[i][j];
			}
		} 
		for(int i=2;i<=n;i++){
			for(int j=2;j<=m;j++){
				dp1[i][j]+=dp1[i-1][j-1];
			}
		}
		for(int i=n-1;i>=1;--i){
			for(int j=2;j<=m;j++){
				dp2[i][j]+=dp2[i+1][j-1];
			}
		}
		ll ss=-1000000000000000;
		for(int i=1;i<=n-1;++i){
			for(int j=1;j<=m-1;++j){
				for(int k=1;k<=min(n-i,m-j);++k){
					ll s=dp1[i+k][j+k]-dp1[i][j]+x[i][j];
					s+=dp2[i][j+k]-dp2[i+k][j]+x[i+k][j];
					if(k%2==0)
						s-=x[i+k/2][j+k/2];
					ss=max(ss,s);
				} 
			}
		}
		cout<<ss<<endl;
	}
	return 0;
}