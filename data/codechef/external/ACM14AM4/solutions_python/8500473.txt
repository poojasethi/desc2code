#include <bits/stdc++.h>
using namespace std;
#define inf 100000000
typedef long long ll;
int main()
{
    ll t, m, n, w[101][101], i, j, k, dp[101][101][101], min, max;
    cin >> t;
    while(t--)
    {
        cin>>m>>n;
        for (i=0; i<m; ++i)
        {
            for (j=0; j<n; ++j)
            {
                cin >> w[i][j];
            }
        }
        k = 1;
        min = (m>n)?n:m;
        max = -inf;
        for (i=0; i<m-1; ++i)
        {
            for (j=0; j<n-1; ++j)
            {
                dp[i][j][k] = w[i][j]+w[i+1][j]+w[i][j+1]+w[i+1][j+1];
                if (dp[i][j][k] > max)
                    max = dp[i][j][k];
            }
        }
        k = 2;
        for (i=0; i<m-2; ++i)
        {
            for (j=0; j<n-2; ++j)
            {
                dp[i][j][k] = w[i][j]+w[i+2][j]+w[i][j+2]+w[i+1][j+1]+w[i+2][j+2];
                if (dp[i][j][k] > max)
                    max = dp[i][j][k];
            }
        }
        for (k=3; k<=min; ++k)
        {
            for (i=0; i<m-k; ++i)
            {
                for (j=0; j<n-k; ++j)
                {
                    dp[i][j][k] = w[i][j]+w[i+k][j]+w[i][j+k]+w[i+k][j+k]+dp[i+1][j+1][k-2];
                    if (dp[i][j][k] > max)
                        max = dp[i][j][k];
                }
            }
        }
        cout << max << endl;
    }
    return 0;
}