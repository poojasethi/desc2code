#include<bits/stdc++.h>
using namespace std;

int main(int argc, char const *argv[]){
	std::ios_base::sync_with_stdio(false);
	long long t;
	cin>>t;
	while(t--){
		int m,n;
	cin>>m>>n;	
	vector<vector<int> > v(m,vector<int>(n,0));
	for(int i=0;i<m;i++)
		for(int j=0;j<n;j++)
			cin>>v[i][j];
	long long temp,ans=-1*INT_MAX;
	for(int i=1;i<m-1;++i){
		for(int j=1;j<n-1;++j){
			temp=v[i][j];
			for(int k=1;i-k>=0&&j-k>=0&&i+k<m&&j+k<n;++k){
			temp+=v[i-k][j-k]+v[i+k][j-k]+v[i-k][j+k]+v[i+k][j+k];
			if(ans<temp)
			    ans=temp;
			}
		}
	}
	for(int i=1;i<m;++i){
		for(int j=1;j<n;++j){
			temp=0;
			for(int k=1;i-k>=0&&j-k>=0&&i+k-1<m&&j+k-1<n;++k){
				temp+=v[i-k][j-k]+v[i+k-1][j-k]+v[i-k][j+k-1]+v[i+k-1][j+k-1];
				if(ans<temp)
			    	ans=temp;
			    }
			  
		}
	}
	   cout<<ans<<endl;		 
}
	return 0;
}