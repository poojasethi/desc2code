
#include <bits/stdc++.h>
#define lli long long int
#define sl(x) scanf("%lld", &x)
#define pn(x) printf("%lld\n", x)
#define pl(x) printf("%lld", x)
#define rep(i,x) for (lli i = 0; i < x; ++i)
#define repr(i,x,y) for (lli i = x; i < y; ++i)

using namespace std;

int main(void) {
	lli t;
	sl(t);
	while (t--) {
		lli m, n;
		sl(m); sl(n);
		lli a[m][n];
		lli sm[m][n];
		lli st[m][n];
		rep(i, m) rep(j, n) {
			sl(a[i][j]);
			st[i][j] = a[i][j];
			sm[i][j] = a[i][j];
		}
		lli mx = -100000000000000LL;
		repr(l, 2, min(m, n) + 1) {
			rep(i, m - l + 1) {
				rep(j, n - l + 1) {
					st[i][j] += a[i + l - 1][j + l - 1];
					sm[i][j + l - 1] += a[i + l - 1][j];
					lli s = st[i][j] + sm[i][j + l - 1];
					if (l & 1) s -= a[i + l / 2][j + l / 2];
					if (s > mx) mx = s;
				}
			}
		}
		pn(mx);
	}
}

