#include<bits/stdc++.h>
#define N 1000000007
#define maxs 100005
#define mins 1005
#define pf printf
#define sc scanf
#define ll long long
#define pb push_back
using namespace std;
int a[105][105];
ll m1[105][10005];

int main()
{
	int t;
	sc("%d",&t);
	while(t--)
	{
		int n,m,i,j,k;
		sc("%d %d",&n,&m);
		for(i=0;i<n;i++)
		{
			for(j=0;j<m;j++)
			{
				sc("%d",&a[i][j]);
			}
		}
		int l,w;
		int x,y;
		ll sum;
		for(i=0;i<n;i++)
		{
			for(j=0;j<m;j++)
			{
				sum=a[i][j];
				for(k=1;k<min(n,m);k++)
				{
					if(i+k>=n || j+k>=m)
					break;
					sum+=a[i+k][j+k];
					m1[k][(i)*m+j]=sum;
					//cout<<sum<<" "<<i<<" "<<" "<<k<<endl;
				}
			}
		}
		/*for(int i=0;i<m;i++)
		{
			for(j=0;j<10;j++)
			{
				cout<<m1[i][j]<<" ";
			}
			cout<<endl;
		}*/
		//cout<<endl;
		ll max1=-1000000000000;
		int fl;
		for(i=n-1;i>=0;i--)
		{
			for(j=m-1;j>=0;j--)
			{
				sum=a[i][j];
				for(k=1;k<min(n,m);k++)
				{
					fl=0;
					if(j+k>=m || i-k<0)
					{
						//cout<<i<<" "<<j<<" "<<"brk"<<endl;
						break;
					}
					if(k%2==0)
					fl=1;
					int x1=(i-(k/2));
					int y1=(j+(k/2));
					x=(i-k);
					y=j;
					ll temp=m1[k][(x)*m+y];
					sum+=a[i-k][j+k];
				//	cout<<i<<" "<<j<<" "<<x<<" "<<y<<" "<<sum<<" "<<k<<endl;
					if(fl==0)
					max1=max(max1,sum+temp);
					else
					max1=max(max1,sum+temp-a[(int)x1][(int)y1]);
						//cout<<"b"<<max1<<endl;
				}
			}
		}
		pf("%lld\n",max1);
		memset(m1,0,sizeof m1);
	}
	return 0;
}