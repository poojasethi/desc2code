#include <bits/stdc++.h>
using namespace std;
#define ll long long
const ll mod = 1e9+7;
#define ld long double

const int maxn = 1e5 + 10;
ld invfact[maxn];
void pre()
{
	
	invfact[0] = 1.0;
	for(int i = 1;i<maxn;i++)
	{
		invfact[i] = 1./((ld)i);
	}
}
ll dp[maxn];
vector<int> s[maxn];
bool dead[maxn];
void dfs(int i, int p)
{
	
	for(int j = 0;j<s[i].size(); j++)
	{
		int x = s[i][j];
		if(x == p)
			continue;
		dp[x] = dp[i];
		if(dead[i]) {
			dp[x]++;
		}
		
		 dfs(x, i);
	}
}

int main()
{	
	pre();
	int t,n,m,u,v;
	cin>>t;
	while(t--)
	{	
		memset(dead,0,sizeof dead);
		cin>>n;
		for(int i=1; i<=n; i++)
			s[i].clear();
			
		
		for(int i = 0;i<n-1;i++) {
			scanf("%d %d",&u,&v);
			s[u].push_back(v);
			s[v].push_back(u);
		}
		
		cin>>m;
		for(int i = 0;i<m;i++)
		{
			scanf("%d",&u);
			dead[u] = 1;
		}
		dp[1] = 0;
		dfs(1, -1);
		ld ans = 0;
		for(int i = 1;i<=n;i++)
		{
			ans+=1-invfact[dp[i]+1];
		}
		cout << setprecision(10) << ans<<endl;
	}
}