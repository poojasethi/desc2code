#include <stdio.h>
#include <vector>
#define Max 100005
using namespace std;

vector<int> v[Max];
double pp[Max],ret;
bool dead[Max];

void dfs(int x,int p,int c)
{
    ret+=(1-(1/(double)(c+1)));

    int i,j;

    for(i=0;i<v[x].size();i++)
    {
        j=v[x][i];

        if(j==p) continue;

        dfs(j,x,c+dead[x]);
    }
}

int main()
{
    int i,j,k,t,T,n,m;

    //freopen("fssync.txt","r",stdin);

    scanf("%d",&T);

    for(t=1;t<=T;t++)
    {
        scanf("%d",&n);

        for(ret=0,i=1;i<=n;i++)
        {
            v[i].clear();
            dead[i]=0;
        }

        for(i=1;i<n;i++)
        {
            scanf("%d %d",&j,&k);
            v[j].push_back(k);
            v[k].push_back(j);
        }

        scanf("%d",&m);

        for(i=0;i<m;i++)
        {
            scanf("%d",&j);
            dead[j]=1;
        }

        dfs(1,0,0);

        printf("%.8lf\n",ret);
    }

    return 0;
}
