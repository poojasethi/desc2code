#include <iostream>
#include <vector>
#include <cstdio>

using namespace std;

double ans;

vector<int> v[100005];
vector<bool> vis(100005);

void solve(int x)
{
       double val1, val2;
       val1 = x;
       val2 = x+1;
        //cout << x << "/" << x+1 << endl;
       ans += (double)(val1/val2);

}

void dfs(int pos, int prev, int dead)
{
        solve(dead);
        for(int i = 0; i < v[pos].size(); i++) {
            if(v[pos][i] != prev) {
                dfs(v[pos][i], pos, dead+vis[pos]);
            }
        }
}

int main()
{
    int t;

    cin >> t;

    while(t--) {
        int n, x, y, val;
        ans = 0.0;

        cin >> n;

        for(int i = 0; i < n; i++) {
            v[i].clear();
            vis[i] = 0;
        }

        for(int i = 0; i < n-1; i++) {
            cin >> x >> y;
            x--;
            y--;
            v[x].push_back(y);
            v[y].push_back(x);
        }

        int m;

        cin >> m;

        for(int i = 0; i < m; i++) {
            cin >> val;
            val--;
            vis[val] = 1;
        }

        dfs(0, -1, 0);

        printf("%.8f\n", ans);
    }
}
