#include<iostream>
using namespace std;
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n;
		scanf("%d",&n);
		char a[n][n];
		int i,j,k,p,q,r=0,s,flag=-1;
		scanf("%d",&k);
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
			cin>>a[i][j];
			}
		//	fflush(stdin);
		}
		int count=0;
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]=='.')
				count++;
				
			}
		}
		
		if(k==1)
		{
			for(i=0;i<n;i++)
			{
				for(j=0;j<n;j++)
				{
					if(a[i][j]=='.')
					{
						flag=0;
						break;
					}
				}
				if(j<n)
				break;
			}
			
		}
		else if(count==(n*n))
		{
			if(k==1)
			flag=0;
		}
		else
		{
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]=='X')
				{	    p=i+1;
						q=j+1;
						r=0;
					for(s=1;s<k&&q<n&&p<n;)
					{
					//	cout<<"a s"<<a[p][q]<<s;
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   
					   p++;
					   q++;
					   s++;
					   
					  // cout<<"ss"<<s;
						
					}
				//	cout<<"rs"<<r<<s;
					if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
				//	break;
				    p=i-1;
					q=j-1;
					r=0;
					for(s=1;s<k&&q>=0&&p>=0;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   p--;
					   q--;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i-1;
					q=j+1;
					r=0;
					for(s=1;s<k&&q<n&&p>=0;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   p--;
					   q++;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i+1;
					q=j-1;
					r=0;
					for(s=1;s<k&&q>=0&&p<n;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   p++;
					   q--;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i-1;
					q=j;
					r=0;
					for(s=1;s<k&&p>=0;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   p--;
					   //q--;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i+1;
					q=j;
					r=0;
					for(s=1;s<k&&p<n;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   p++;
					 //  q--;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i;
					q=j-1;
					r=0;
					for(s=1;s<k&&q>=0;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   
					   q--;
						
					}
					if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					  p=i;
					q=j+1;
					r=0;
					for(s=1;s<k&&q<n;s++)
					{
					   if(a[p][q]=='.')
					   r++;
					   else if(a[p][q]=='O')
					   break;
					   //p--;
					   q++;
						
					}
				if(r==1&&s>=(k))
					{
						flag=0;
						break;
					}
					
				}
			}
			if(j<n)
			break;
		}
	}
		if(flag==0)
		cout<<"YES\n";
		else
		cout<<"NO\n";
	}
}