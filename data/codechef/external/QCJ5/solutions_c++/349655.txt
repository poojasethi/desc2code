#include <stdio.h>
#include <string.h>
#include <iostream>
using namespace std;
int main()
{

	char str[20][201],t[3];
	int N, ind=0,cur=0,sum=0;
	scanf("%d", &N);
	gets(t);
	gets(t);
	int max=0;
	for (int i=0; i<N; i++)
	{
		gets(str[i]);
		if (strlen(str[i])>max)
			max=strlen(str[i]);
		if (str[i][0]!=32)
			ind=i;
	}
	printf("Total Walk Distance = %d\n", max);
	int set=0;
	while (set!=max)
	{
		if (str[ind][set]==47)
		{
			while (str[ind][set]==47 && ind>=0)
				set++,ind--, cur++;
			printf("Up %d steps\n", cur);
			cur=0;
			if (strlen(str[ind+1])>set && str[ind][set]!=95)
					ind++;
		}
		else if (str[ind][set]==92 )
		{
			while (str[ind][set]==92 && ind<N)
				set++,ind++, cur++;
			printf("Down %d steps\n", cur);
			cur=0;
			if (strlen(str[ind-1])>=set )
					ind--;
			
		}
		else if (str[ind][set]==95)
		{
			while (str[ind][set]==95)
				set++,cur++;
			printf("Walk %d steps\n", cur);
			cur=0;
			if (ind!=N-1 && strlen(str[ind+1])>set && str[ind+1][set]==92)
				ind++;
		}
	}
	return 0;
}
