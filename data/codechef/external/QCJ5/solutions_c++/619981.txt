#include<iostream>
#include<cstring>
#include<map>
#include<vector>
using namespace std;

#define TR(a,it) 	for(typeof((a).begin()) it = (a).begin(); it != (a).end(); ++it)

int main()
{
    //freopen("input.txt", "r", stdin);
    //freopen("output.txt", "w", stdout);

    char a[21][205];
    char c;
    int n;
    memset(a, ' ', sizeof(a));
    vector< pair<char, int> >p;
    cin >> n;
    gets(a[0]);
    gets(a[1]);
    int i = n - 1;
    /*
    while(gets(a[i]))
    {
       cout << a[i] << endl;
       i--; 
    }*/
    
    for(; i>=0; i--){
       cin.getline(a[i], 200);
       //cout << a[i] << endl;
       }
    
    int row = 0, col = 0, count = 0;
    char current = a[0][0];
    
    int length = strlen(a[0]);
    
    cout << "Total Walk Distance = " << length << endl;
    
    while(col < length)
    {
         //cout << row << " " << col << endl;
         if(a[row][col] == current)
             count++;
         else
         {
              p.push_back(pair<char, int>(current, count));
              if(current == '_')
                  cout << "Walk " << count << " steps" << endl;
              else if(current == '\\')
                  cout << "Down " << count << " steps" << endl;
              else
                  cout << "Up " << count << " steps" << endl;
              count = 1;
              current = a[row][col];
         }
         
         col++;
         if(row+1 < n && a[row+1][col] != ' ')
             row++;
         else if(row -1 >= 0 && a[row-1][col] != ' ')
             row--;
    }
    
    if(current == '_')
         cout << "Walk " << count << " steps" << endl;
    else if(current == '\\')
         cout << "Down " << count << " steps" << endl;
    else
        cout << "Up " << count << " steps" << endl;
                  
    /*
    TR(p, it)
    {
          cout <<  it->first << " " << it->second << endl;
    }*/
    
    //system("pause");
    return 0;
}
