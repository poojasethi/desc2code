#include<iostream>
#include<cstring>
#include<cstdio>
int main()
{
        int n, maxlen, i, j, u, d, w, c;
        char ch;

        scanf("%d", &n);
        getchar();

        char a[n+1][100000];

        while((ch=getchar())!='\n');


        maxlen=-1;
        for(i=0; i<n; i++)
        {
                j=0;
                while((a[i][j]=getchar())!='\n')
                        j++;
                a[i][j]=0;

                if(maxlen<j)
                        maxlen=j;
        }

/*      for(i=0;i<n; i++)
        {
                for(j=0;j<maxlen; j++)
                        printf("%c", a[i][j]);
                printf("\n");
        }
*/
        i=n-1; j=0;
        u=d=w=c=0;

        char b[1000];
        int p[1000], z=0;

        for(j=0; j<maxlen; j++)
        {
                for(i=n-1; i>=0; i--)
                {
                        if(a[i][j] == '/')
                        {
//                              printf("up %d %d\n", i, j);
                                if(u==0)
                                {
                                        if(d != 0)
                                        {
                                                b[z] = 'd';
                                                p[z++] = d;
                                        }
                                        else if(w != 0)
                                        {
                                                b[z] = 'w';
                                                p[z++] = w;
                                        }

                                        u++;
                                        c++;
                                        d = w = 0;
                                }
                                else
                                {
                                        u++;
                                        c++;
                                }
                                break;
                        }
                        else if(a[i][j] == '_')
                        {
//                              printf("walk %d %d\n", i, j);
                                if(w==0)
                                {
                                        if(u != 0)
                                        {
                                                b[z] = 'u';
                                                p[z++] = u;
                                        }
                                        else if(d != 0)
                                        {
                                                b[z] = 'd';
                                                p[z++] = d;
                                        }

                                        w++;
                                        c++;
                                        u = d = 0;
                                }
                                else
                                {
                                        w++;
                                        c++;
                                }
                                break;
                        }
                        else if(a[i][j] == '\\')
                        {
//                              printf("down %d %d\n", i, j);
                                if(d==0)
                                {
                                        if(w != 0)
                                        {
                                                b[z] = 'w';
                                                p[z++] = w;
                                        }
                                        else if(u != 0)
                                        {
                                                b[z] = 'u';
                                                p[z++] = u;
                                        }

                                        d++;
                                        c++;
                                        w = u = 0;
                                }
                                else
                                {
                                        d++;
                                        c++;
                                }
                                break;
                        }
                }
        }

        if(u != 0)
        {
                b[z] = 'u';
                p[z++] = u;
        }
        else if(d != 0)
        {
                b[z] = 'd';
                p[z++] = d;
        }
        else
        {
                b[z] = 'w';
                p[z++] = w;
        }

        printf("Total Walk Distance = %d\n", c);

        for(i=0; i<z; i++)
        {
                if(b[i] == 'u')
                        printf("Up");
                else if(b[i] == 'd')
                        printf("Down");
                else
                        printf("Walk");

                printf(" %d steps\n", p[i]);
        }

        return 0;

}
