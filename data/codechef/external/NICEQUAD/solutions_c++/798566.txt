#include <iostream>
#include <cstdio>
#include <cstring>

using namespace std;

int ni(){
    int v;
    scanf("%d", &v);
    return v;
}

long long int cnt[4][4];
int N;

int abs(int i){
    return (i >=0) ? i : -i;
}

int getRegion(int x, int y){
    if(x > 0 && y > 0) return 0;
    if(x < 0 && y > 0) return 1;
    if(x < 0 && y < 0) return 2;
    if(x > 0 && y < 0) return 3;
    return -1;
}

int getSubRegion(int x, int y){
    x = abs(x) % 2;
    y = abs(y) % 2;
    return 2*x+y;
}

bool valid(int i, int j, int k, int l){
    int ax = i/2, bx = j/2, cx = k/2, dx = l/2;
    int ay = i%2, by = j%2, cy = k%2, dy = l%2;

    int res = abs((ax*by + bx*cy + cx*dy + dx*ay) - (ay*bx + by*cx + cy*dx + dy*ax)) % 2;
    return 1-res;
}

int main(){
    int t = ni();
    while(t--){
        memset(cnt,0,sizeof(cnt));
        N = ni();
        for(int i = 0; i < N; i++){
            int x = ni();
            int y = ni();
            int r = getRegion(x,y);
            int sr = getSubRegion(x,y);
            //printf("(%d %d), %d, %d\n", x, y, r, sr);
            if(r == -1) continue;
            cnt[r][sr]++;
        }

        long long int res = 0;
        for(int i = 0; i < 4; i++){
        for(int j = 0; j < 4; j++){
        for(int k = 0; k < 4; k++){
        for(int l = 0; l < 4; l++){
        if(valid(i,j,k,l)){
            res += (cnt[0][i]*cnt[1][j]*cnt[2][k]*cnt[3][l]);
        }}}}}
        printf("%lld\n", res);
    }
}
