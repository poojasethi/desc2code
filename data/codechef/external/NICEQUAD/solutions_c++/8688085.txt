#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
typedef pair<long long ,long long> pll;
#define sl(l) scanf("%lld",&l)
#define pl(l) printf("%lld\n",l)
#define LOOP(i,n) for(ll i=0;i<n;i++)
ll a[4][4];

int parse_x(int x)
{
	if(x==0 || x==1)return 0;
	else return 1;
}


int parse_y(int x)
{
	if(x==0 || x==2)return 0;
	else return 1;
}

int parse_gcd(int a,int b)
{
	if(a%2==0 && b%2==0)return 0;
	else return 1;
}


int main()
{
	ll t;
	sl(t);
	while(t--)
	{
		ll n;
		sl(n);
		memset(a,0,sizeof(a));
		LOOP(i,n)
		{
			ll x,y;
			sl(x);sl(y);
			if(x>0 && y>0)
			{
					if(x%2==0)
					{
						if(y%2==0)a[0][0]++;
						else a[0][1]++;
					}
					else
					{
						if(y%2==0)a[0][2]++;
						else a[0][3]++;	
					}
			}
			else if(x<0 && y>0)
			{
					if(x%2==0)
					{
						if(y%2==0)a[1][0]++;
						else a[1][1]++;
					}
					else
					{
						if(y%2==0)a[1][2]++;
						else a[1][3]++;	
					}
			}
			else if(x<0 && y<0)
			{
					if(x%2==0)
					{
						if(y%2==0)a[2][0]++;
						else a[2][1]++;
					}
					else
					{
						if(y%2==0)a[2][2]++;
						else a[2][3]++;	
					}
			}
			else if(x>0 && y<0) 
			{
					if(x%2==0)
					{
						if(y%2==0)a[3][0]++;
						else a[3][1]++;
					}
					else
					{
						if(y%2==0)a[3][2]++;
						else a[3][3]++;	
					}
			}
		}


		ll sum=0;
		LOOP(i,4)
		{
			LOOP(j,4)
			{
				LOOP(k,4)
				{
					LOOP(l,4)
					{
						ll temp = 0;
						temp+=parse_gcd(abs(parse_x(i) - parse_x(j)), abs(parse_y(i)-parse_y(j)));
						temp+=parse_gcd(abs(parse_x(k) - parse_x(j)),abs(parse_y(k)-parse_y(j)));
						temp+=parse_gcd(abs(parse_x(k) - parse_x(l)),abs(parse_y(k)-parse_y(l)));
						temp+=parse_gcd(abs(parse_x(i) - parse_x(l)),abs(parse_y(i)-parse_y(l)));

						if(temp%2==0)sum+=a[0][i]*a[1][j]*a[2][k]*a[3][l];
					}
				}
			}
		}


		printf("%lld\n",sum);





	}
	return 0;
}