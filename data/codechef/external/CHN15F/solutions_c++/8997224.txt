#include<bits/stdc++.h>
using namespace std;

#define sd(mark) scanf("%d",&mark)
#define ss(mark) scanf("%s",&mark)
#define sl(mark) scanf("%lld",&mark)
#define clr(mark) memset(mark,0,sizeof(mark))
#define F first
#define S second
#define MP make_pair
#define PB push_back
#define sz(x) (int((x).size()))
#define PII pair<int,int>
#define PIL pair<int,long long>
#define PLL pair<long long,long long>
#define PIS pair<int,string>
#define MII map<int,int>
#define ll long long
#define FILEIO(name) \
    freopen(name".in", "r", stdin); \
    freopen(name".out", "w", stdout);
#define INF 100000000000000000LL

#define N 212345

ll rs[110][2187];

int fn[8][2200][150];
int merg(int poss1 , int nlev , int w)
{
    int bitp[w+2] , bitn[w+2] , bitres[w+2] ;
    for(int i=1;i<=w;i++)
    {
        bitp[i] = 0;
        bitn[i] = 0;
        bitres[i] = 0;
    }
    bitp[0] = 1; bitp[w+1] = 1;
    bitn[0] = 1; bitn[w+1] = 1;
    int currp = poss1 , currn = nlev;
    for(int i=1; i<=w ; i++)
    {
        bitp[i] = currp%3;
        currp /= 3;
        bitn[i] = currn%2;
        currn /= 2;
    }
    for(int i=1;i<=w;i++)
    {
        if(bitn[i] == 1)
        {
            bitres[i] = 1;
        }
        else
        {
            if(bitp[i] == 2)bitres[i] = 2;
            else if(bitp[i-1]==2 && bitp[i]==0)bitres[i] = 2;
            else if(bitp[i+1]==2 && bitp[i]==0)bitres[i] = 2;
        }
    }
    int res=0 , curr = 1;
    for(int i=1;i<=w;i++)
    {
        res += bitres[i]*curr;
        curr *= 3;
    }
    return res;
}



void solve()
{
    int H,W,h,w,j,k;
    ll M;

    sd(W);
    sd(H);
    w = W;
    int lim = pow(3,w);
    sl(M);
    memset(rs,0,sizeof(rs));
    rs[0][2] = 1;
    for(k=0;k<(1<<w);++k)
    {
        if(k%2==1) continue;
        rs[1][fn[w][5][k]] = 1;
        //cout<<"k" << k<<" "<<fn[w][5][k]<<endl;
    }
    for(h=1;h<H;++h)
    {
        for(j=0;j<lim;++j)
        {
            int tmp = j;
            bool check = false;
            while(tmp)
            {
                if((tmp%3) == 2)
                {
                    check = true;
                    break;
                }
                tmp /= 3;
            }
            if(!check)rs[h][j]=0;
            for(k=0;k<(1<<w);++k)
            {
                rs[h+1][fn[w][j][k]] += rs[h][j];
                if(rs[h+1][fn[w][j][k]] >= 100000000000000LL) rs[h+1][fn[w][j][k]]%=M;
            }
        }
    }
    ll frs = 0;
    for(j=0;j<lim;++j)
    {
        int tmp = j;
        bool check = false;
        while(tmp)
        {
            if((tmp%3) == 2)
            {
                check = true;
                break;
            }
            tmp /= 3;
        }
        if(!check)rs[H][j]=0;
        frs += rs[H][j];
        if(frs >= 10000000000000000LL) frs %= M;
    }

    printf("%lld\n",frs%M);
}

int main()
{
    for(int i=1;i<=7;i++)
    {
        for(int j=0;j<2187;j++)
        {
            for(int k=0 ; k<128; k++)
            {
                fn[i][j][k] = merg(j,k,i);
            }
        }
    }

    int t = 1;
    scanf("%d",&t);
    while(t--)
    {
        solve();
    }
}
