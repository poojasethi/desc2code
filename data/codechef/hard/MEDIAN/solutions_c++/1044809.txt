#include <cstdio>
#include <iostream>
using namespace std;
int A[40], D[40], C[40], Z[40], casos, ctos, grande, emp, va, cuenta, mejor, mide, tiene, suma, m1, m2, final, nuevo, m, aqui1, aqui2;
void aslo(int num){
    for(int i=ctos; i>0; i--){
        if(num>=D[i-1]){
            num-=D[i-1];
            Z[i]=1;
        }
        else {
            Z[i]=0;
        }
    }
    va=0;
    for(int i=1; i<=ctos; i++){
        C[i]=0;
    }
    for(int i=1; i<=ctos; i++){
        if(Z[i]==1){
            if(Z[i-1]==1){
                C[va]++;
            }
            else {
                va++;
                C[va]=1;
            }
        }
        else {
            va++;
        }
    }
    mide=va;
}
int mal;
void busca(int queda, int lleva);
void pasalo(int dnde1, int dnde2, int lleva){
    aqui1=0;
    for(int i=1; i<=mide; i++){
        if(C[i]==0){
            aqui1++;
        }
        else {
            aqui1+=C[i];
        }
        if(i==dnde1){
            m1=aqui1;
        }
        else if(i==dnde2){
            m2=aqui1;
            i=mide;
        }
    }
    for(int i=m1; i<=m2; i++){
        Z[i]=1;
    }
    nuevo=0;
    for(int i=1; i<=ctos; i++){
        if(Z[i]==1){
            nuevo+=D[i-1];
        }
    }
    busca(nuevo, lleva+1);
}
void busca(int queda, int lleva){
    if(lleva<final or final==-1){
    aslo(queda);
    suma=0;
    for(int i=1; i<=mide; i++){
        suma+=C[i];
    }
    if(suma==ctos){
        if(lleva<final or final==-1){
            final=lleva;
        }
    }
    else if(suma*2>=ctos){
        if(lleva+1<final or final==-1){
            final=lleva+1;
        }
    }
    else {
        for(int i=1; i<mide; i++){
            if(C[i-1]==0){
            cuenta=C[i];
            mejor=i;
            tiene=C[i];
            if(tiene==0){
                tiene++;
            }
            for(int e=i+1; e<=mide; e++){
                tiene+=C[e];
                if(C[e]==0){
                    tiene++;
                }
                cuenta+=C[e];
                if(cuenta*2>=tiene){
                    mejor=e;
                }
            }
            if(mejor>i){
                pasalo(i, mejor, lleva);
                aslo(queda);
            }
            }
        }
    }
    }
}
int main()
{
    D[0]=1;
    for(int i=1; i<30; i++){
        D[i]=D[i-1]*2;
    }
    scanf("%d",&casos);
    while(casos--){
        scanf("%d",&ctos);
        grande=0;
        for(int i=1; i<=ctos; i++){
            scanf("%d",&A[i]);
            if(A[i]>grande){
                grande=A[i];
            }
        }
        emp=0;
        for(int i=1; i<=ctos; i++){
            if(A[i]!=grande){
                A[i]=0;
            }
            else {
                A[i]=1;
                emp+=D[i-1];
            }
        }
        final=-1;
        busca(emp, 0);
        printf("%d\n",final);
    }
    return 0;
}
