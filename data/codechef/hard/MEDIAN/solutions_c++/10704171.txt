#include <bits/stdc++.h>
using namespace std;

#define DEBUG(x)    cerr << #x << " = " << x << endl
#define INPUT       freopen("Data.inp", "r", stdin)
#define OUTPUT      freopen("Data.out", "w", stdout)

typedef long long LL;
typedef pair<int, int> II;
typedef vector<int> VI;

string Next() {
    string S; cin >> S;
    return S;
}
int NextInt() {
    int n; scanf("%d", &n);
    return n;
}
LL NextLong() {
    LL n;
    #ifdef _WIN32
        scanf("%I64d", &n);
    #else
        scanf("%lld", &n);
    #endif
    return n;
}

const int N = 30;
int n, a[N];
map<int, int> DP;

int Compute(int x, int h = 0) {
    if (h >= 6) return 1000;
    if (x == (1 << n) - 1) return 0;
    if (DP.count(x)) return DP[x];
    DP[x] = 1000;
    for (int i = 0; i < n; ++i) {
        int c = x >> i & 1, p = -1;
        for (int j = i + 1; j < n; ++j) {
            c += x >> j & 1;
            if (c < j - i + 1 && 2 * c >= j - i + 1) p = j;
        }
        if (p == -1) continue;
        int y = x | (((1 << (p - i + 1)) - 1) << i);
        DP[x] = min(DP[x], Compute(y, h + 1) + 1);
    }
    return DP[x];
}

int main() {
    #ifdef LOCAL
        INPUT;
        OUTPUT;
    #endif

    int TC = NextInt();
    while (TC--) {
        n = NextInt();
        for (int i = 0; i < n; ++i) a[i] = NextInt();

        int f = *max_element(a, a + n);
        int x = 0;
        for (int i = 0; i < n; ++i) x |= (a[i] == f) << i;

        DP.clear();
        printf("%d\n", Compute(x));
    }

    return 0;
}
