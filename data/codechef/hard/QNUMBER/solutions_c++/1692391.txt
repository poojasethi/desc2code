#include <cstdio>
#include <vector>
#include <utility>

#define min(a, b) (a<b? a:b)

using namespace std;

typedef long long LL;

int main()
{
    LL N;
    int Q;
    scanf("%lld %d", &N, &Q);

    vector< pair<LL,int> > primeFactorsN;
    int numFactorsN = 1;
    LL tmp=N;
    for(int i=2; 1ll*i*i<=tmp; i++) if(tmp%i==0) {
        int cnt=0;
        while(tmp%i==0) {
            cnt++;
            tmp/=i;
        }
        primeFactorsN.push_back(make_pair(i, cnt));
        numFactorsN = numFactorsN * (cnt+1);
    }

    if(tmp>1) {
        primeFactorsN.push_back(make_pair(tmp, 1));
        numFactorsN <<=1;
    }

    while(Q--) {
        int T, T1, T2;
        LL K;
        scanf("%d %lld", &T, &K);

        tmp = K;
        T1 = T2 = 1;
        for(int i=0; i<primeFactorsN.size(); i++) {
            LL p; int a;
            p = primeFactorsN[i].first;
            a = primeFactorsN[i].second;
            int cnt=0;
            while(tmp%p==0) {
                tmp/=p;
                cnt++;
            }
            T1 = T1 * (min(cnt, a) + 1);
            T2 = T2 * (a-cnt+1);
            if(cnt>a) T2 = 0;
            if(T2==0 && T!=1) break;
        }

        if(tmp>1) T2=0;

        if(T==1) printf("%d\n", T1);
        if(T==2) printf("%d\n", T2);
        if(T==3) printf("%d\n", numFactorsN - T2);
    }
}

