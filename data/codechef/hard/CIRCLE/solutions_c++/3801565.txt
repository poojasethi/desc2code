#include "cstdio"
#include "iostream"
#include "vector"
#include "algorithm"
#include "cstring"
#include "cmath"
#include "set"
#define runtime() ((double)clock() / CLOCKS_PER_SEC)
#define rep(i, n) for(int i=0; i<n; i++)
#define repp(i, a, b) for(int i=a; i<a+b; i++)
#define repd(i, a, b) for(int i=a; i>a-b; i--)
using namespace std;
inline int getint(){
	char c = getchar();
	for(;c<'0'||c>'9';) c = getchar();
	int x = 0;
	for(;c>='0' && c<='9'; c = getchar()) x*=10, x+=c-'0';
	return x;
}
const int maxn = 1010;
char s[maxn][maxn];
int n,m,k;
int a[maxn][maxn], b[maxn][maxn], c[maxn][maxn], d[maxn][maxn];

int chk(int x, int y){
	if(y<0 || y>=m) return 0;
}
void pt(int a[][maxn]){
	repp(i,1,n){
		repp(j,1,m) printf("%d ", a[i][j]);
		printf("\n");
	}
	printf("==========\n");
}

int get(int a[][maxn], int i, int j){
	if(i<0 || j<0) return 0;
	return a[i][j];
}
int main(int argc, char const *argv[])
{
	int cass = getint();
	rep(cas, cass){
		memset(a, 0, sizeof(a));
		memset(b, 0, sizeof(b));
		memset(c, 0, sizeof(c));
		memset(d, 0, sizeof(d));
		n = getint(), m = getint();
		repp(i, 1, n) scanf("%s", s[i]+1);
		repp(i, 2, n-2)repp(j, 2, m-2) 
			if(s[i][j]=='W' && s[i-1][j]=='B' && s[i+1][j]=='B' && s[i][j-1]=='B'&& s[i][j+1]=='B'){
				a[i][j] = b[i][j] = c[i][j] = d[i][j] = 1;
				//printf("%d %d\n", i,j);
			}
		repp(i,1,n) repp(j,1,m) a[i][j] += a[i-1][j];
		repp(i,1,n) repp(j,1,m) a[i][j] += a[i][j-1];
		repp(i,1,n) repd(j,m,m) b[i][j] += b[i-1][j];
		repp(i,1,n) repd(j,m,m) b[i][j] += b[i][j+1];
		repd(i,n,n) repp(j,1,m) c[i][j] += c[i+1][j];
		repd(i,n,n) repp(j,1,m) c[i][j] += c[i][j-1];
		repd(i,n,n) repd(j,m,m) d[i][j] += d[i+1][j];
		repd(i,n,n) repd(j,m,m) d[i][j] += d[i][j+1];
		//pt(a), pt(b), pt(c), pt(d);
		int ans = 0;
		repp(i,1,n)repp(j,1,m) if(get(a,i-2,j-2)+get(b,i-2,j+2)+get(c,i+2,j-2)+get(d,i+2,j+2)==0) ans = 1;
		printf("%s\n", ans? "YES":"NO");
	}
	return 0;
}