#define _USE_maH_DEFINES
#define _CRT_SECURE_NO_DEPRECATE
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <vector>
#include <sstream>
#include <cstring>
#include <string>
#include <map>
#include <set>
#include <algorithm>
#include <cmath>
#include <queue>
using namespace std;
#define EPS 1e-6;
typedef long long int64;
typedef unsigned long long uint64;
typedef pair<int, int> pii;
typedef pair<int64, int64> pi64;
typedef vector<int> vi;
typedef vector<int64> vi64;
typedef vector<vector<int> > vvi;
//------------------------------------------------------------
int n, m, k;
vector < vector <pair <int, int> > > gr;
int d[400010];
int was[400000];
void just_dfs(int u)
{
	was[u] = 1;
	for(int i = 0; i < gr[u].size(); ++i)
		if (!was[gr[u][i].first])
			just_dfs(gr[u][i].first);
}
int dfs(int u)
{
//	cerr << 'u' << ' ' << u << endl;
	for(int i = 0; i < gr[u].size(); ++i)
	{
		int to = gr[u][i].first;
		//cerr << to << "la" << endl;
		if (d[to] != -1)
		{
			//cerr << u << ' ' << to << endl;
			if ((d[to] ^ d[u]) != gr[u][i].second)
				return 0;
			continue;
		}
		d[to] = gr[u][i].second ^ d[u];
		//cerr << d[to] << endl;
		if (!dfs(to))
			return 0;
	}
	return 1;
}
vi vert;
int main()
{
    #ifndef ONLINE_JUDGE
        freopen("input.txt", "r", stdin);
        freopen("output.txt", "w", stdout);
    #endif
	scanf("%d %d %d", &n, &m, &k);
	gr.resize(n);
	for(int i = 0; i < m; ++i)
	{
		int u, v, c;
		scanf("%d %d %d", &u, &v, &c);
		u--;v--;
		gr[u].push_back(pii(v, c));
		gr[v].push_back(pii(u, c));
	}
	for(int i = 0; i < n; ++i)
	{
		if(!was[i])
		{
			just_dfs(i);
			vert.push_back(i);
		}
	}
	memset(d, -1, sizeof d);
	for(int i = 0; i < vert.size() - 1; ++i)
	{
		d[vert[i]] = 0;
		if (!dfs(vert[i]))
		{
			cout << -1;
			return 0;
		}
	}
	int t = vert.back();
	d[t] = k - 1;
	if(!dfs(t))
	{
		cout << -1;
		return 0;
	}
	for(int i = 0; i < n; ++i)
		printf("%d ", d[i]);
}  