#include<bits/stdc++.h>
using namespace std;
int n,m,k,u,v,y,ver;
vector<pair<int,int> > g[200001];
int vis[200001];
queue<int> q;
int lab[200001];
int main(){
	int i,j,v;
	scanf("%d %d %d",&n,&m,&k);
	while(m--){
		scanf("%d %d %d",&u,&v,&y);
		g[u].push_back(make_pair(v,y));
		g[v].push_back(make_pair(u,y));
	}
	memset(vis,0,sizeof vis);
	int last=-1;
	for(i=1;i<=n;i++){
		if(vis[i]==0){
			last=i;
			ver=i;
			q.push(i);
			lab[i]=0;
			vis[i]=1;
			while(!q.empty()) {
				ver=q.front();
				q.pop();
 
				for(j=0;j<g[ver].size();j++) {
					v=g[ver][j].first,y=g[ver][j].second;
					if(vis[v]==0) {
						vis[v]=1;
						lab[v]=lab[ver]^y;
						q.push(v);
					}
					else {
						if(lab[v]!=(lab[ver]^y)) {
							printf("-1\n");
							return 0;
						}
					}
				}
			}
		}
	}
		memset(vis,0,sizeof vis);
	ver=last;
	q.push(last);
	lab[last]=k-1;
	vis[last]=1;
	while(!q.empty()){
		ver=q.front();
		q.pop();
		for(j=0;j<g[ver].size();j++){
			v=g[ver][j].first,y=g[ver][j].second;
			if(vis[v]==0) {
				vis[v]=1;
				lab[v]=lab[ver]^y;
				q.push(v);
			}
			else{
				if(lab[v]!=(lab[ver]^y)) {
					printf("-1\n");
					return 0;
				}
			}
		}
	}
	for(i=1;i<=n;i++)
		printf("%d ",lab[i]);
	return 0;
} 
 