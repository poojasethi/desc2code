#include <bits/stdc++.h>
#define mod 1000000007
using namespace std;

vector<pair<int,long long int> >v[200005];
vector<int>root;
int vis[200005];
long long int label[200005];
int flag;

void dfs(int x)
{
    int j,y;
    vis[x]=1;
    for(j=0;j<v[x].size();j++)
    {
        y=v[x][j].first;
        if(vis[y]==0)
            dfs(y);
    }
    return;
}

void dfl(int x, long long int k)
{
    vis[x]=1;
    label[x]=k;
    int j,y;
    long long int l;
    for(j=0;j<v[x].size();j++)
    {
        y=v[x][j].first;
        l=v[x][j].second;
        if(vis[y]==0)
        {
            dfl(y,k^l);
        }
        else
        {
            if(label[y]!=(k^l))
            {
                flag=1;
                return;
            }
        }
    }
    return;
}

int main()
{
    int n,m,i,a,b;
    long long int k,y;
    scanf("%d%d%lld",&n,&m,&k);
    for(i=0;i<m;i++)
    {
        scanf("%d%d%lld",&a,&b,&y);
        a--;b--;
        v[a].push_back(make_pair(b,y));
        v[b].push_back(make_pair(a,y));
    }
    for(i=0;i<n;i++)
    {
        if(vis[i]==0)
        {
        root.push_back(i);
        dfs(i);
        }
    }
    memset(vis,0,sizeof(vis));
    for(i=0;i<root.size();i++)
    {
        if(i==root.size()-1)
        {
            dfl(root[i],k-1);
        }
        else
            dfl(root[i],0);
    }
    if(flag==1)
    {
        printf("-1");
        return 0;
    }
    for(i=0;i<n;i++)
        printf("%lld ",label[i]);
    return 0;
}
