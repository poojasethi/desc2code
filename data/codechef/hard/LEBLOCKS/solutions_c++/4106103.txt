#include <set>
#include <cmath>
#include <deque>
#include <vector>
#include <cstdio>
#include <cassert>
#include <cstring>
#include <iostream>
#include <algorithm>

using namespace std;

int aa[20], c[20];

int term(int a1, int a2, int k, int l) {
    int left = max(1, a1+l+1-k);
    int right = min(a1+a2+l-k, a1);
    return max(right-left+1,0);
}

int main() {
    //freopen("input.txt","r",stdin);

    double fact[22] = {1};
    for(int i = 1; i <= 21; i++)
        fact[i] = fact[i-1]*i;

    double side[22];
    for(int i = 0; i <= 20; i++)
        side[i] = fact[i+1];

    int T;
    scanf("%d", &T);
    for(int t = 1; t <= T; t++) {
        int n, q;
        scanf("%d %d", &n, &q);
        for(int i = 0; i < n; i++) {
            scanf("%d %d", &aa[i], &c[i]);
        }

        double res = 0;
        for(int i = 0; i < n; i++)
            for(int j = 0; j < i; j++) {
                if(c[i] == c[j]) {
                    int a[20], sum = 0;
                    for(int k = 0, l = 0; k < 20; k++, l++)
                        if(l != i && l != j) {
                            a[k] = aa[l];
                            sum += aa[l];
                        } else
                            k--;

                    double dp[22][222];
                    for(int k = 0; k <= n-2; k++)
                        for(int s = 0; s <= sum; s++)
                            dp[k][s] = 0;

                    int len = 0;
                    dp[0][0] = 1;
                    for(int k = 0; k < n-2; k++) {
                        for(int m = k; m >= 0; m--)
                            for(int l = len; l >= 0; l--) {
                                dp[m+1][l+a[k]] += dp[m][l]*(m+1);
                            }
                        len += a[k];
                    }

                    for(int k = 0; k <= n-2; k++)
                        for(int s = 0; s <= sum; s++) {
                            res += 2.0*(dp[k][s]/fact[n])*side[n-2-k]*term(aa[i], aa[j], q, s);
                        }
                }
            }

        double ans = 0;
        for(int i = 0; i < n; i++)
            ans += max(0, aa[i]-q);

        printf("%f\n", res+ans);
    }
    return 0;
}
