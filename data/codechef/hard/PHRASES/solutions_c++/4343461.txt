/*
codedevloper
*/
#include <stdio.h>
#include <algorithm>
using namespace std;
char s[10][10001];
#define maxn 110000
char ss[maxn];
int wa[maxn],wb[maxn],wv[maxn],ws[maxn];
int r[maxn];
int sa[maxn];
int cmp(int *r,int a,int b,int l){
	return r[a]==r[b]&&r[a+l]==r[b+l];
}
void da(int *r,int *sa,int n,int m){
	int i,j,p,*x=wa,*y=wb,*t;
	for(i=0;i<m;i++) ws[i]=0;
	for(i=0;i<n;i++) ws[x[i]=r[i]]++;
	for(i=1;i<m;i++) ws[i]+=ws[i-1];
	for(i=n-1;i>=0;i--) sa[--ws[x[i]]]=i;
	for(j=1,p=1;p<n;j*=2,m=p){
		for(p=0,i=n-j;i<n;i++) y[p++]=i;
		for(i=0;i<n;i++) if(sa[i]>=j) y[p++]=sa[i]-j;
		for(i=0;i<n;i++) wv[i]=x[y[i]];
		for(i=0;i<m;i++) ws[i]=0;
		for(i=0;i<n;i++) ws[wv[i]]++;
		for(i=1;i<m;i++) ws[i]+=ws[i-1];
		for(i=n-1;i>=0;i--) sa[--ws[wv[i]]]=y[i];
		for(t=x,x=y,y=t,p=1,x[sa[0]]=0,i=1;i<n;i++)
		x[sa[i]]=cmp(y,sa[i-1],sa[i],j)?p-1:p++;
	}
	return;
}
int rank[maxn],height[maxn];
void calheight(int*r,int*sa,int n){
	int i,j,k=0;
	for(i=1;i<n;i++)rank[sa[i]]=i;
	for(i=0;i<n;height[rank[i++]]=k)
	for(k?k--:0,j=sa[rank[i]-1];r[i+k]==r[j+k];k++);
	return;
}
int m;
int mx[11],mn[11],cnt[11];
int ck[maxn];
int ct[maxn];
bool can(int nn,int n){
	int i,j;
	
	for(i=m-1;i<n;){
		for(int k=0;k<m;k++){
			mn[k]=n+1;
			mx[k]=0;
			cnt[k]=0;
		}
		for(j=i;j==i || (j<n && height[j]>=nn);j++){
			int rj=sa[j];
			int k=ck[rj];
			int t=ct[rj];
			cnt[k]++;
			mn[k]=min(mn[k],t);
			mx[k]=max(mx[k],t);
		}
		
		int k;
		
		for(k=0;k<m;k++){
			if(cnt[k]<2) break;
			if(mn[k]+nn>mx[k]) break;
		}
		if(k==m) return 1;
		i=j;
	}
	

	return 0;

}
int main(){
	
	int T,n,i,j;
	for(scanf("%d",&T);T--;){
		scanf("%d",&n);
		m=n;
		int sn=0;
		for(i=0;i<n;i++){
			scanf("%s",s[i]);
			for(j=0;s[i][j];j++){
				ck[sn]=i;
				ct[sn]=j;
				ss[sn++]=s[i][j];
			}
			ss[sn++]='#';
		}
		ss[sn-1]=0;

		
		for(i=0;ss[i];i++) r[i]=ss[i];
		int n=i;
		da(r,sa,n,128);

		calheight(r,sa,n);
		for(i=0;i<n;i++){
			
		}
		
		int lo=0;
		int hi=n+1;
		while(hi-lo>1){
			int mid=(hi+lo)/2;
			if(can(mid,n)) lo=mid;
			else hi=mid;
		}
		printf("%d\n",lo);
	}
}
/*
codedevloper
*/