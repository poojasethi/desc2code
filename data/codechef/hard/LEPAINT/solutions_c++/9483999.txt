#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <string.h>
#include <algorithm>
#include <math.h>
#include <vector>
#include <queue>
#include <set>
#include <stack>
#include <map>
#define INF_MAX 2147483647
#define INF_MIN -2147483647
#define INF_LL 9223372036854775807LL
#define INF 2000000000
#define PI acos(-1.0)
#define inf INT_MAX
using namespace std;
typedef long long int LL;


LL N , c , K , u , v;
double dp[104][104][104];


//dp[i][j][k]    at iteration i , j th index and value is k

void precompute(){
	memset(dp , 0.0 , sizeof(dp));
	
		

	for(int i=1;i<=N;i++)
		dp[0][i][1] = 1.0;


	int p , q;
	double ans = 0.0;
	for(int i=1;i<=K;i++)
	{
		scanf("%d %d",&p,&q);
		for(int j=1;j<=N;j++)
		{
			for(int k=1;k<=c;k++)
			{
				if(j>=p && j<=q)
				{
					for(int l=0;l<=c;l++)
						dp[i][j][(k*l)%c]+=dp[i-1][j][k]/(2.0*c);
					dp[i][j][k]+=(dp[i-1][j][k]*0.5);
				}
				else
					dp[i][j][k]+=dp[i-1][j][k];
			}
		}

	}


	for(int i=1;i<=N;i++)
		for(int l=0;l<c;l++)
			ans = ans + l*dp[K][i][l];

	printf("%.7lf\n",ans );

}


int main(){
int test;
scanf("%d",&test);
while(test--){
scanf("%lld %lld %lld",&N,&c,&K);
precompute();
}
return 0;
}















