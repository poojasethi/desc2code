#include<bits/stdc++.h>
using namespace std;

double dp[51][51][101];
int n,c,k;

int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		
		scanf("%d%d%d",&n,&c,&k);
		memset(dp,0,sizeof(dp));
		for(int i = 0 ; i < n ; i++ ) 
			dp[0][i][1] = 1;
		for(int i = 0 ; i < k ; i++ )
		{
			int L,R;
			scanf("%d%d",&L,&R);
			--L;--R;
			for(int j = 0 ; j < n ; j++ )
			{
				for(int k = 0 ; k < c ; k++)
				{
					if (dp[i][j][k] < 1e-12) {
						continue;
					}
					if(j>=L && j<=R)
					{
						double mul = 1.0 / c / 2;
						for(int m = 0,yu = 0 ; m < c ; m++ )
						{
							yu += k;
							if(yu >= c)
									yu -= c;
							dp[i+1][j][yu] += dp[i][j][k]*mul ;
						}
						dp[i+1][j][k] += dp[i][j][k] * 0.5;
					}
					else
						dp[i+1][j][k] += dp[i][j][k];	
				}
			}
		}
		double ans = 0;
		for(int i  = 0 ; i < n ; i++)
			for(int j = 0 ; j< c ; j++)
				ans += (dp[k][i][j] * j);
		printf("%.10f\n",ans);		
	}
}
