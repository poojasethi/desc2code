#include<bits/stdc++.h>
using namespace std;
#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <cassert>

const int maxT = 10;
const int maxk = 50;
const int maxn = 50;
const int maxc = 100;

int n, k, c;
double f[maxk + 1][maxn][maxc];

int main()
{
	int T;
	cin>>T;
	while(T--){
		memset(f, 0, sizeof(f));
		cin>>n>>c>>k;
		for (int i = 0; i < n; ++ i) {
			f[0][i][1] = 1;
		}
		for (int i = 0; i < k; ++ i) {
			int l, r;
			cin>>l>>r;
			-- l; -- r;
			for (int j = 0; j < n; ++ j) {
				for (int x = 0; x < c; ++ x) {
					if (f[i][j][x] < 1e-12) {
						continue;
					}
					if (l <= j && j <= r) {
						double ratio = 1.0 / c / 2;
						for (int y = 0, yu = 0; y < c; ++ y) {
							yu += x;
							if (yu >= c) {
								yu -= c;
							}
							f[i + 1][j][yu] += f[i][j][x] * ratio; 
						}
						f[i + 1][j][x] += f[i][j][x] * 0.5;
					} else {
						f[i + 1][j][x] += f[i][j][x];
					}
				}
			}
		}
		
		double answer = 0;
		for (int i = 0; i < n; ++ i) {
			for (int j = 0; j < c; ++ j) {
				answer += f[k][i][j] * j;
			}
		}
		
		printf("%.10f\n", answer);
	}
	return 0;
}