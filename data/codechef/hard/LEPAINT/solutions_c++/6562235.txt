/*God is greater than any problem that
u have and u have to not worry because
when u pray and then worry,
the worry nullify your prayer
He is right here, right now !!
*/

#include <bits/stdc++.h>
using namespace std;
#define MAX 105
double dp[MAX][MAX][MAX];
//dp[i][j][k] = probability of occurence of kth color at jth index in ith turn

void solve()
{
	int n, c, k;
	memset(dp, 0, sizeof(dp));
	scanf("%d%d%d", &n, &c, &k);
	for(int j = 1; j <= n; j++) {
		dp[0][j][1] = (double)1.0;
	}		
	for(int turn = 1; turn <= k; turn++) { //turn
		int l, r;
		scanf("%d%d", &l, &r); //ranges
		for(int ind = 1; ind <= n; ind++) { //indices
			for(int color = 0; color < c; color++) {	//color
				if(ind >= l && ind <= r) {
					//if you choose the subset and choose the mth color
					for(int m = 0; m < c; m++) {
						dp[turn][ind][(color * m) % c] += (dp[turn - 1][ind][color] / (double)(2.0 * c));
					}
					//when we not choose index
					dp[turn][ind][color] += (dp[turn - 1][ind][color] * (double)0.5);
				}
				else {
					//not in ranges so unaffected
					dp[turn][ind][color] += dp[turn - 1][ind][color];
				}
			}
		}
	}
	
	double ans = 0;
	for(int i = 1; i <= n; i++) {
		for(int color = 0; color < c; color++) {
			ans += ((double)color * (double)dp[k][i][color]);
		}
	}
	printf("%0.6lf\n", ans);	
}

int main()
{
	int t;
	scanf("%d", &t);
	while(t--) {
		solve();
	}
	return 0;
}

