#include <iostream>
#include <stack>
#include <algorithm>
#include <cstdio>
#include <cstring>
using namespace std;
char s[200];
int id[30],val[30];
int cut;
int solve(int l)
{
	stack<int> stc;
	int a,b,i;
	for(i=l-1;i>=0;i--)
	{
		cut++;
		if(s[i]>='a'&&s[i]<='z')
		{	
		 	stc.push(val[id[s[i]-'a']]);
 		}
		else if(s[i]=='N')
		{	
			a=stc.top();stc.pop();
			stc.push(!a);
		}
		else
		{
			b=stc.top();stc.pop();
			a=stc.top();stc.pop();
			switch (s[i])
			{
				case 'C':
					stc.push(b&&a);
					break;
				case 'D':
					stc.push(b||a);
					break;
				case 'I':
					stc.push((!b)||a);
					break;
				case 'E':
					stc.push(b==a);
					break;
				default:
					break;
			}	
		}
	}
	return stc.top();
}
int main()
{
	//freopen("example.txt","r",stdin);
	int t,i,k,c,l;
	scanf("%d",&t);
	while(t--)
	{
		memset(s,'\0',sizeof(s));
		scanf("%s",s);
		cut=0;
		l=strlen(s);
		k=1;
		memset(id,0,sizeof(id));
		for(i=0;i<l;i++)
		{
			if(s[i]>='a'&&s[i]<='z')
			{
				if(id[s[i]-'a']==0)
					id[s[i]-'a']=k++;
			}
		}
		memset(val,0,sizeof(val));
		int ans;
	 	do
		{
			/*for(int b=1;b<k;b++)
				cout<<val[b];
			cout<<endl;*/
			ans=solve(l);
			if(!ans)
			{
				cout<<"NO"<<endl;
				goto zz;
			}
		 	val[1]++;
			c=val[1]/2;
			val[1]%=2;
			i=2;
			while(c>0)
			{
				val[i]+=c;
				c=val[i]/2;
				val[i]%=2;
				i++;
			}
		}while(i<=k);
		cout<<"YES"<<endl;
		zz:;
	}
	return 0;
}