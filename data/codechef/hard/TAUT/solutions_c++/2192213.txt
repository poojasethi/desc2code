#include<cstdio>
#include<iostream>
#include<vector>
#include<cstring>
#include<algorithm>
#include<set>
#include<cmath>
#include<bitset>
#include<map>
#include<stack>
#define test(t) while(t--)
#define cin(n) scanf("%d",&n)
#define cout(n) printf("%d\n",n)
#define rep(i,a,n) for(i=a;i<n;i++)
#define vi vector<int>
#define vii vector< pair<int,int> >
#define mii map<int,int>
#define pb push_back
#define mp make_pair
#define imax 1000000007
#define ill long long
#define Nmax 2229283
#define mod 500009
using namespace std;
int t,n,ans;map<char,int> m;
char c[200];
stack<int> s;
void check(int st)
{
    int i,a,b;
    while(!s.empty()) s.pop();
    for(i=n-1;i>=0;i--)
    {
        if(c[i]>='a')
        {
                s.push((st&m[c[i]])>0);
        }
        else
        {
            a=s.top();s.pop();
            if(c[i]=='C')
            {
               b=s.top();
                s.pop();
                s.push(a&b);
            }
            else if(c[i]=='D')
            {
                b=s.top();
                s.pop();
                s.push(a|b);
            }
            else if(c[i]=='N')
            {
                s.push(1-a);
            }
            else if(c[i]=='I')
            {
                b=s.top();
                s.pop();
                s.push((1-a)|b);
            }
            else if(c[i]=='E')
            {
               b=s.top();
                s.pop();
                s.push(1-(a^b));
            }
        }
        //cout<<i<<" "<<s.top()<<"\n";
    }
   // cout<<s.top()<<"\n";
   if(s.top()==0)
   {
       ans=1;
   }
}
void f(int i,int st,int v)
{
   // cout<<i<<" "<<st<<" "<<v<<"\n";
    if(i>=n) return check(st);
    if(c[i]>='a' && !(v&m[c[i]]))
    {
        f(i+1,st | m[c[i]],v | m[c[i]]);
        f(i+1,st,v | m[c[i]]);
    }
    else f(i+1,st,v);
}
int main()
{
    int x=0,i;
    cin>>t;
    test(t)
    {
        scanf("%s",c);
        n=strlen(c);
        ans=0;
        x=0;
        m.clear();
        for(i=0;i<n;i++)
        {
            if(c[i]>='a' && m.find(c[i])==m.end())
            {
                m[c[i]] = 1<<x;
                x++;
               // cout<<i<<" "<<m[c[i]]<<"\n";
            }
        }
        f(0,0,0);
        if(!ans) printf("YES\n");
        else printf("NO\n");
    }
    return 0;
}
