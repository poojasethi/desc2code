#include <iostream>

using namespace std;

#define	MAXN	100010

char prime[MAXN];
int factor[MAXN];
long long a[MAXN];

int main(int argc, char *argv[])
{
	for (int i = 2; i * i < MAXN; i++)
		if (prime[i] == 0) {
			for (int j = i + i; j < MAXN; j += i) {
				prime[j] = 1;
				factor[j] = i;
			}
		}

	a[2] = 1;
	factor[2] = 2;
	for (int i = 3; i < MAXN; i++)
		if (prime[i] == 0) {
			factor[i] = i;
			for (int x = i - 1; x != 1; ) {
				int c, y = factor[x];
				for (c = 0; x % y == 0; x /= y) c++;
				a[i] += a[y] * c;
			}
		}

	int nc;
	cin >> nc;
	for (int ci = 0; ci < nc; ci++) {
		int m, p, k;
		cin >> m;
		long long ans = 1;
		for (int i = 0; i < m; i++) {
			cin >> p >> k;
			ans += k * a[p];
			if (p == 2) ans--;
		}

		cout << ans << endl;
	}

	return 0;
}
