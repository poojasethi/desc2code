#include <cstdio>

using namespace std;

#define	MAXN	100001

int phi[MAXN];
long long a[MAXN];

int main(int argc, char *argv[])
{
	for (int i = 0; i < MAXN; i++) phi[i] = i;
	for (int i = 2; i < MAXN; i++)
		if (phi[i] == i)
			for (int j = i; j < MAXN; j += i)
				phi[j] = phi[j] / i * (i - 1);

	for (int i = 3; i < MAXN; i++)
		a[i] = a[phi[i]] + 1;
	a[2] = 1;

	int nc;
	scanf("%d", &nc);
	for (int ci = 0; ci < nc; ci++) {
		int m, p, k;
		scanf("%d", &m);
		long long ans = 1;
		for (int i = 0; i < m; i++) {
			scanf("%d %d", &p, &k);
			ans += k * a[p];
			if (p == 2) ans--;
		}

		printf("%lld\n", ans);
	}

	return 0;
}
