#include <iostream>

using namespace std;

#define	MAXN	100010

char prime[MAXN];
int factor[MAXN];
long long dp[MAXN];

int main(int argc, char *argv[])
{
	int nc, ci;

	for (int i = 0; i < MAXN; i++) prime[i] = 1;
	for (int i = 2; i * i < MAXN; i++)
		if (prime[i]) {
			for (int j = i + i; j < MAXN; j += i) {
				prime[j] = 0;
				factor[j] = i;
			}
		}
	for (int i = 2; i < MAXN; i++)
		if (prime[i]) factor[i] = i;

	dp[2] = 1;
	for (int i = 3; i < MAXN; i++)
		if (prime[i]) {
			for (int x = i - 1; x != 1; ) {
				int c, y = factor[x];
				for (c = 0; x % y == 0; x /= y) c++;
				dp[i] += dp[y] * c;
			}
		}

	cin >> nc;
	for (ci = 0; ci < nc; ci++) {
		int m, p, k;
		cin >> m;
		long long ans = 1;
		for (int i = 0; i < m; i++) {
			cin >> p >> k;
			ans += k * dp[p];
			if (p == 2) ans--;
		}

		cout << ans << endl;
	}

	return 0;
}
