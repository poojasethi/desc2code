#include <bits/stdc++.h>
int num;
inline int inp()
{
    int noRead=0;
    char p= getchar_unlocked();
    for(;p<33;)
    {
     p=getchar_unlocked();
    };
    while(p>32)
    {
     noRead = (noRead << 3) + (noRead << 1) + (p - '0');
     p=getchar_unlocked();
    }
    return noRead;
};
using namespace std;
int compute(int index,vector<int>&lic)
{ vector<int>calc;
   int ans=1;
   vector<int>::iterator temp;
   calc.push_back(lic[index]);
 for(int i=index+1;i<index+num;i++)
   { if(lic[i]<calc[0])
      calc[0]=lic[index];
      else if(lic[i]>calc[calc.size()-1])
      { ans++;
        calc.push_back(lic[i]);
      }
       else{ temp=upper_bound(calc.begin(),calc.end(),lic[i]);
              *temp=lic[i];
       }
   }
  /* for(int i=0;i<calc.size();i++)
    cout<<calc[i];
   cout<<endl;*/
   return ans;
}
int main()
{ int t;
  t=inp();

  while(t--)
  {
    num=inp();
    int len=0;
    vector<int>lic(2*num);
    vector<pair<int,int> >carlos(num);
    for(int i=0;i<num;i++)
    { lic[i]=inp();
      lic[i+num]=lic[i];
      carlos[i].first=lic[i];
      carlos[i].second=i;
    }
    sort(carlos.begin(),carlos.end());
    for(int i=0;i<min(37,num);i++)
        len=max(len,compute(carlos[i].second,lic));
        printf("%d\n",len);
  }




}
