#include<stdio.h>
#include<limits.h>
int t,n,i,i1,len,low,high,mid,pos,res,x;
int lcsans(int arr[])
{
     int lcs[n+1];
     len=0;
     for(i=0;i<n;i++)
        {
           low=1;
           high=len;
           while(low<=high)
           {
               mid=(low+high)/2;
               if(arr[lcs[mid]]<arr[i])
                low=mid+1;
               else
                high=mid-1;

           }
           pos=low;
           lcs[pos]=i;
           if(pos>len)
              len=pos;
        }
        return len;
}
int main()
{
    scanf("%d",&t);
    while(t--)
    {
        res=0;
        scanf("%d",&n);
        int arr[2*n];
        for(i1=0;i1<n;i1++)
        {
            scanf("%d",&arr[i1]);
            arr[i1+n]=arr[i1];
        }
        for(i1=0;i1<n;i1++)
        {
            x=lcsans(arr+i1);
            if(res<x)
               res=x;
            i1++;
        }
        printf("%d\n",res);
    }
}
