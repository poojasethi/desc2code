#include <bits/stdc++.h>
int num;
using namespace std;
int compute(int index,vector<int>&lic)
{ vector<int>calc;
   int ans=1;
   vector<int>::iterator temp;
   calc.push_back(lic[index]);
 for(int i=index+1;i<index+num;i++)
   { if(lic[i]<calc[0])
      calc[0]=lic[index];
      else if(lic[i]>calc[calc.size()-1])
      { ans++;
        calc.push_back(lic[i]);
      }
       else{ temp=upper_bound(calc.begin(),calc.end(),lic[i]);
              *temp=lic[i];
       }
   }
  /* for(int i=0;i<calc.size();i++)
    cout<<calc[i];
   cout<<endl;*/
   return ans;
}
int main()
{ int t;
  cin>>t;
 
  while(t--)
  {
    cin>>num;
    int len=0;
    vector<int>lic(2*num);
    vector<pair<int,int> >carlos(num);
    for(int i=0;i<num;i++)
    { cin>>lic[i];
      lic[i+num]=lic[i];
      carlos[i].first=lic[i];
      carlos[i].second=i;
    }
    sort(carlos.begin(),carlos.end());
    for(int i=0;i<min(37,num);i++)
        len=max(len,compute(carlos[i].second,lic));
        cout<<len<<endl;
  }
 
 
 
 
}