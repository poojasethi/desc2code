#include <iostream>
#include <iterator>
#include <fstream>
#include <string>
#include <vector>
#include <algorithm>
#include <cstdio>
#include <cctype>
#include <cstring>

using namespace std;

bool G[50][50];
int from[200], to[200];
int color[50];
int Q[50];
int main() {
    int T;
    scanf("%d", &T);
    while (T--) {
        int n, m;
        scanf("%d %d", &n, &m);
        for (int i=0; i<m; ++i) {
            scanf("%d %d", from+i, to+i);
        }
        int w, idx;
        scanf("%d", &w);
        for (int i=0; i<w; ++i) {
            scanf("%d", &idx);
            from[idx-1] = 0;
        }

        memset(G, 0, sizeof G);
        for (int i=0; i<m; ++i) {
            if (from[i]) {
                G[from[i]-1][to[i]-1] = 1;
                G[to[i]-1][from[i]-1] = 1;
            }
        }

        memset(color, 0, sizeof color);
        for (int i=0; i<n; ++i) {
            if (color[i] == 0) {
                int head=0, tail=0;
                Q[head] = i;
                color[i] = 1;
                while (head <= tail) {
                    int u = Q[head++];
                    for (int v=0; v<n; ++v) {
                        if (G[u][v]) {
                            if (color[v] == 0) {
                                color[v] = 3 - color[u];
                                Q[++tail] = v;
                            } else if (color[v] != 3 - color[u]) {
                                goto FAILED;
                            }
                        }
                    }
                }
            }
        }

        puts("YES");
        continue;

        FAILED: puts("NO");
    }

	return 0;
}
