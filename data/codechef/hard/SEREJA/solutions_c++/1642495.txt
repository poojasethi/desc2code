#include <iostream>
#define MOD 1000000007
#define SIZE 100002
using namespace::std;

int main()
{
	//clock_t start = clock(), end;
	int arr[SIZE],n,i,j, k,km, max[SIZE], min[SIZE];
	long long prod[SIZE], res;
	
	scanf("%d", &n);
	for(i=1;i<=n;++i)
	{
		scanf("%d",&arr[i]);
	}
	
	prod[0] = prod[1] = 1;
	max[1] = min[1] = arr[1];
	
	res = 1;
	for(i=2;i<=n;++i)
	{
		/*
		for(int jj=1;jj<i;++jj)
			cout << " " << max[jj] ;
		cout << endl;
		
		for(int jj=1;jj<i;++jj)
			cout << " " << min[jj] ;
		cout << endl;
		*/
		k = i-1;
		while(k > 0 && max[k] < arr[i])
		{
			max[k] = arr[i];
			--k;
		}
		
		km = i-1;
		while(km > 0 && min[km] > arr[i])
		{
			min[km] = arr[i];
			--km;
		}
		
		max[i] = min[i] = arr[i];
		
		k = (k<km) ? k : km;
		
		++k;
		
		if(k==1)
			k=2;
			
		for(j=k;j<=i;++j)
		{
			prod[j] = prod[j-1] * (max[j-1]-min[j-1]);
			prod[j] %= MOD;
		}
		
		res *= prod[i];
		res %= MOD;
	}
	
	printf("%lld", res);
	return 0;
}
