#include<iostream>
#include<stdio.h>
#define MOD 1000000007
using namespace std;
int main()
{
long long n,i,j,k,result;
scanf("%lld",&n);
long long num[n+1],max[n+1],min[n+1],product[n+1];
max[0]=-1;
min[0]=1000000007;
product[0]=1;
result=1;
for(i=1;i<=n;i++)
{
scanf("%lld",&num[i]);
j=i-1;
while(j>0 && max[j]<=num[i])
{
max[j]=num[i];
j--;
}
while(j>0 && min[j]>=num[i])
{
min[j]=num[i];
j--;
}
j++;
max[i]=num[i];
min[i]=num[i];
for(k=j;k<i;k++)
product[k]=(product[k-1]*(max[k]-min[k]))%MOD;
result=(result*product[k-1])%MOD;
}
printf("%lld\n",result);
return 0;
}