#include<iostream>
//#include<conio.h>
using namespace std;

#define mod 1000000007
#define max 100010

typedef  long long int LL;
int main(void)
{
int arr[max],m[max],M[max];
LL prod[max],res;
int n,k,j,l,lm,i;
cin>>n;
for(i=1;i<=n;++i)  cin>>arr[i];
prod[0] = prod[1] = 1;
	M[1] = m[1] = arr[1];
	res=1;
for(k=2;k<=n;++k)
{
   /*cout<<"max:";              
   for(i=1;i<=k-1;i++)
   cout<<M[i]<<" ";
                 
   cout<<endl;
   cout<<"min:";
   for(i=1;i<=k-1;i++)
   cout<<m[i]<<" ";
   cout<<endl;*/
   l=k-1;
   while(l>0  && arr[k]>M[l])
   {
     M[l]=arr[k];
     --l;           
   }
   lm=k-1;
   while(lm>0 && arr[k]<m[lm])
   {
   m[lm]=arr[k];
     --lm;                      
   }   
   M[k]=m[k]=arr[k];           
   l=(l<lm)?l:lm;
   ++l;
   if(l==1)l=2;
   for(j=l;j<=k;++j)
   {
     prod[j]=prod[j-1]*(M[j-1]-m[j-1]);               
     prod[j]=prod[j]%mod;               
   }
 res=res*prod[k];
 res=res%mod;
 //cout<<res<<endl;
}
cout<<res; 
//getch();   
return 0;    
}
