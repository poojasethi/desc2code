//
//  main.cpp
//  SerejaAndNewData
//
//  Created by Chandan Giri on 06/12/12.
//  Copyright (c) 2012 Chandan Giri. All rights reserved.
//

#include <iostream>
#include <algorithm>
#define MOD 1000000007

using namespace std;

typedef long long LL;
typedef pair<int,int> PII;

int n;
int A[100001];
int M[100001], m[100001];
LL P[100001], S[100001];


LL solve() {
    M[1] = m[1] = A[1];
    S[1] = P[0] = 1;
    int j = 2, k, i;
    while(j <= n) {
        M[j] = m[j] = A[j];
        k = j;
        for(i=j-1; i>=1; i--) {
            if(M[i] >= M[i+1])
                break;
            else
                M[i] = M[i+1];
        }
        k = min(k, i+1);
        for(i=j-1; i>=1; i--) {
            if(m[i] <= m[i+1])
                break;
            else
                m[i] = m[i+1];
        }
        k = min(k, i+1);
        for(i=k; i<j; i++) {
            P[i] = (P[i-1] * (M[i]-m[i])) % MOD;
        }
        S[j] = (S[j-1] * P[j-1]) % MOD;
        //cout <<"Sj : " <<S[j] << endl;
        j++;
    }
    /*for(int i=1; i<=n; i++)
        cout << m[i] << " ";
    cout << endl;
    for(int i=1; i<=n; i++)
        cout << M[i] << " ";
    cout << endl;
    for(int i=1; i<=n; i++)
        cout << P[i] << " ";
    cout << endl;
    for(int i=1; i<=n; i++)
        cout << S[i] << " ";
    cout << endl;*/
    return S[n];
}

void brute() {
    LL s = 1;
    for(int i=1; i<=n; i++) {
        for(int j=i+1; j<=n; j++) {
            int mi=A[i], mx = A[i];
            for(int k=i+1; k<=j; k++) {
                if(A[k]<mi) mi = A[k];
                if(A[k]>mx) mx = A[k];
            }
            s = (s * (mx-mi))%MOD;
        }
    }
    cout << s << endl;
}

int main()
{
    scanf("%d",&n);
    for(int i=1; i<=n; i++) {
        scanf("%d",&A[i]);
        //A[i] = rand()%MOD;
        //cout << A[i] << " ";
    }
    for(int i=2; i<=n; i++) {
        if(A[i] == A[i-1]) {
            printf("0\n");
            return 0;
        }
    }
    LL sol = solve();
    printf("%lld\n",sol);
    //brute();
    return 0;
}
