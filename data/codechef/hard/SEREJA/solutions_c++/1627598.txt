#include <algorithm>
#include<iostream>
#include <cstdio>
#include <ctime>
#include <vector>
#include <complex>
using namespace std;
#define cd complex<double>
#define vcd vector<cd>
#define si(n) scanf("%d",&n)
#define f(i,a,b) for(int i=a;i<b;i++)
#define pb push_back
#define PI 3.1415926535897932384626433832795
#define mm 30001
#define LL long long
#define mod 1000000007


int main()
{
    int N;
    si(N);
    int A[N+1],M[N+1],m[N+1];
    LL pro[N+1],res=1;
    f(i,1,N+1) si(A[i]);
    M[1]=A[1];
    m[1]=A[1];
    pro[0]=1;
    //pro[1]=M[1]-m[1];
    f(j,2,N+1)
    {
        int k=j-1;
        while(k>0 && M[k]<A[j])
        {
            M[k]=A[j];
            k--;
        }
        while(k>0 && m[k]>A[j])
        {
            m[k]=A[j];
            k--;
        }
        M[j]=m[j]=A[j];
        k++;
        f(i,k,j)
        {
            pro[i]=(pro[i-1]*(M[i]-m[i]))%mod;
        }
        res=(res*pro[j-1])%mod;
    }
    printf("%lld\n",res);
    return 0;
}
