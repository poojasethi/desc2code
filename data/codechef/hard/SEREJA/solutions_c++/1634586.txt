#include <cstdio>
#include <algorithm>
using namespace std;

#define MAXN 100005
#define MOD  1000000007

const int INF = 1 << 30;

int n, a[MAXN];
int M[MAXN], m[MAXN];
long long proddiff[MAXN];

int main() {
    long long ans = 1;
    M[0] = INF;
    m[0] = -INF;
    proddiff[0] = 1;
    scanf("%d", &n);
    for (int k = 1; k <= n; k++) {
        scanf("%d", &a[k]);
        int j = k-1;;
        while (M[j] < a[k])
            M[j--] = a[k];
        while (m[j] > a[k])
            m[j--] = a[k];
        for (int i = j+1; i < k; i++) {
            proddiff[i] = proddiff[i-1] * (M[i] - m[i]);
            if (proddiff[i] >= MOD)
                proddiff[i] %= MOD;
        }
        ans = ans * proddiff[k-1];
        if (ans >= MOD)
            ans %= MOD;
        M[k] = m[k] = a[k];
        proddiff[k] = 0;
    }
    printf("%lld\n", ans);
}
