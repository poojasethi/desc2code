#include<cstdio>
#include<iostream>
#define N 1000000007

using namespace std;
int min(int a,int b)
{
	if(a<b)
		return a;
	return b;

}
int max(int a,int b)
{
	if(a>b)
		return a;
	return b;

}
int main()

{

	int n;
	scanf("%d",&n);
	long long int ans=1;
	long long int M[100005];
	long long int m[100005];
	long long int diff[100005];
	int a[100005];
	for(int i=0;i<n;i++)
	{
		scanf("%d",&a[i]);
	}
	M[0]=a[0];
	m[0]=a[0];
	int bd=0;
	diff[0]=1;

	bool done1=false,done2=false;
	for(int i=1;i<n;i++)
	{
		done1=done2=false;
		int j;
		for( j=bd;j>=0 && !(done1&&done2) ; j--)

		{
			if(M[j]<a[i])
			{
				M[j]=a[i];		
			}
			else
			{
				done1=true;
			}
			if(m[j]>a[i])
			{
				m[j]=a[i];
			}
			else
			{
				done2=true;
			}	
		}
		
		for(int k=j+1;k<=bd;k++)
		{
			diff[k+1]=((diff[k]%N)*((M[k]-m[k])%N))%N;
		}

		ans=((ans%N)*(diff[i]%N))%N;
		bd++;
		M[bd]=m[bd]=a[i];
		
	}
	printf("%lld\n",ans);
	
	return 0;
}
