#include<bits/stdc++.h>
#define ll long long
#define MOD 1000000007
#define ok printf("\n")
using namespace std;
int main()
{
    int num,n,i,j,k;
    cin>>n;
  ll array[n+1],max_ar[n+1],min_arr[n+1],prod[n+1],res=1;
    max_ar[0]=INT_MAX,min_arr[0]=INT_MIN,prod[0]=1;
    for(i=1;i<=n;++i)
    {k=i-1;
        scanf("%d",&num);
        while(num>max_ar[k] && k>=0)
            {max_ar[k--]=num;
           // printf("k=%d MAX=%lld ",k+1,max_ar[k+1]);
            }
        while(num<min_arr[k]&&k>=0)
            {min_arr[k--]=num;
            //printf("k=%d Min=%lld ",k+1,min_arr[k+1]);
            }
            ++k;
            //ok;
        for(j=k;j<i;++j){
        prod[j]=(prod[j-1]*(max_ar[j]-min_arr[j]))%MOD;
        //printf("j=%d PRO=%lld max=%lld min=%lld ",j,prod[j],max_ar[j],min_arr[j]);
        }
        max_ar[i]=min_arr[i]=num;
        res=(res*prod[i-1])%MOD;
    }
    printf("%lld",res);
}
