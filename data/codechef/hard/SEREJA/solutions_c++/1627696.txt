// CodeChef
// December Challenge 2012
// Sereja and Data Structures

#include <stdio.h>
#include <algorithm>
using namespace std;

#define ll unsigned long long
#define MOD 1000000007

ll a[100001], M[100001], m[100001], sol[100001], mult[100001];

int main() {
	int n;
	scanf("%d", &n);
	mult[0] = 1;
	sol[0] = 1;
	for (int i = 1; i <= n; i++) {
		scanf("%ld", &a[i]);
		a[i] = a[i] % MOD;

		int j1;
		for (j1 = i - 1; j1 > 0 && M[j1] < a[i]; j1--)
			M[j1] = a[i];

		int j2;
		for (j2 = i - 1; j2 > 0 && m[j2] > a[i]; j2--)
			m[j2] = a[i];

		int j = min(j1,j2);

		for (int k=j+1; k<i; k++)
			mult[k] = mult[k-1] * (M[k] - m[k]) % MOD;

		sol[i] = sol[i-1] * mult[i-1] % MOD;
		M[i] = a[i];
		m[i] = a[i];
	}
	printf("%ld\n",sol[n]);
	return 0;
}
