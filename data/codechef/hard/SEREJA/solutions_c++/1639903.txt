#include<stdio.h>
#include<stdlib.h>
#define MOD 1000000007
#define INF 1000000000
int main(){
    int n,i,j,k;
    long long int *a,*max,*min,*prod, mul = 1;
    scanf("%d",&n);
     a = (long long int *)malloc((n+1)*sizeof(long long int));
     max = (long long int *)malloc((n+1)*sizeof(long long int));
     min = (long long int *)malloc((n+1)*sizeof(long long int));
     prod = (long long int *)malloc((n+1)*sizeof(long long int));
    max[0] = INF ;min[0] = -INF ; prod[0] = 1 ;
    for(i=1;i<=n;i++){
        scanf("%d",&a[i]);
        max[i] = min[i] = a[i];
        j = k = i-1 ;
        while(max[j] < a[i]) {max[j]= a[i]; j--; }
        while(min[k] > a[i]) {min[k]= a[i]; k--; }
        j = (j < k )? j : k ;j++ ;
        for(k=j;k< i;k++){
            prod[k] = prod[k-1]*(max[k]-min[k]);
            prod[k] %= MOD ;
        }
        mul *= prod[i-1] ; // prod[k]= diff(1,i)* diff(2,i) ...* diff(k,i)
        mul %= MOD ;
    }
    printf("%lld\n",mul);
    free(a);free(max);free(min);free(prod);
return 0;
}
