#include <iostream>
#define MOD 1000000007
using namespace std;
int solve()
{
	long long int M[100010],  m[100010];
        int n; cin >> n;
        M[0] = 1000000007;
        m[0] = 0;
        long long int prod[100010];
        prod[0] = 1;
        long long int res = 1;
        long long int A[100010];
        for ( int j = 1 ; j <= n; j++ )
        {
        	cin >> A[j];
                int k = j - 1;
		while ( M[k] < A[j] )
		{
			M[k] = A[j];
			k--;
		}
		while ( m[k] > A[j] )
		{
			m[k] = A[j] ;
			k--;
		}
		k++;
                if ( j-1 != 0  &&  k == j )
			return 0;
		//M[j] = m[j] = A[j];
		for ( int i = k ; i < j; i++ )
		{
			prod[i] = (prod[i-1]*(M[i]-m[i]))%MOD;
		}
		prod[j] = prod[j-1];
		M[j] = m[j] = A[j];
		res = (res * prod[j])%MOD;
	}
	return res;
 
        
}
int main()
{
	cout << solve() <<endl;
}
