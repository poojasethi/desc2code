#include<cstdio>
#include<iostream>
using namespace std;

#define SZ 100001
#define INF 1000000007
#define MOD 1000000007

typedef long long LL;

int N, A[SZ];
int MAX[SZ], MIN[SZ], prod[SZ];

void display(int* arr, int sz) {
    for(int i=0; i<sz; i++)
    cout<<arr[i]<<" ";
    cout<<endl;
}

int main() {
    scanf("%d", &N);

    for(int i=1; i<=N; i++)
    scanf("%d", &A[i]);

    MAX[0]=INF; MAX[1]=A[1];
    MIN[0]=-INF; MIN[1]=A[1];
    prod[0]=1;

    int ans=1;
    for(int i=2; i<=N; i++) {
        int j=i-1, k=i-1;

        while(A[i]>MAX[j]) {
            MAX[j]=A[i];
            j--;
        }

        while(A[i]<MIN[k]) {
            MIN[k]=A[i];
            k--;
        }

        for(int t=min(j, k)+1; t<i; t++)
            prod[t]=(LL)prod[t-1]*(MAX[t]-MIN[t])%MOD;

        //display(prod, i);

        MAX[i]=MIN[i]=A[i];

        ans=(LL)ans*prod[i-1]%MOD;

    }

    printf("%d\n", ans);

}
