#include <iostream>
#include <cstdio>
using namespace std;

int ans[200001][201];
bool path[201][201];
int a[200001];
int num=100000000;

int main(){
    int t;
    scanf("%d",&t);
    while(t--){
        int m,k,n;
        scanf("%d%d%d",&m,&k,&n);
        for(int i=1;i<=m;i++){
            for(int j=1;j<=m;j++)
                path[i][j]=false;
        }
        while(k--){
            int x,y;
            scanf("%d%d",&x,&y);
            path[x][y]=true;
            path[y][x]=true;
        }
        for(int i=1;i<=m;i++){
            for(int j=1;j<=m;j++){
                for(int k=1;k<=m;k++){
                    if(!path[j][k]){
                        if(path[j][i]&&path[i][k])
                            path[j][k]=true;
                    }
                }
            }
        }
        for(int i=1;i<=n;i++)
            scanf("%d",&a[i]);
        for(int i=1;i<=m;i++){
            if(a[1]==i)
                ans[1][i]=0;
            else if(path[a[1]][i])
                ans[1][i]=1;
            else
                ans[1][i]=num;
        }
        int cost;
        for(int i=2;i<=n;i++){
            cost=num;
            for(int j=1;j<=m;j++){
                cost=min(cost,ans[i-1][j]);
                if(a[i]==j)
                    ans[i][j]=cost;
                else if(path[a[i]][j])
                    ans[i][j]=cost+1;
                else
                    ans[i][j]=num;
            }
        }
        cost=num;
        for(int i=1;i<=m;i++)
            cost=min(cost,ans[n][i]);
        if(cost>=num)
            printf("-1\n");
        else
            printf("%d\n",cost);
    }
}










