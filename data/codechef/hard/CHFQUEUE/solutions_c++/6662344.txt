#include<iostream>
#include<cstdio>
#include<utility>
#include<stack>
#define MOD 1000000007

using namespace std;
typedef long long int ll;

stack<pair<int,int> > s;

int main()
{
	ll N,k,fear=1;
	cin>>N>>k;
	int arr[N];
	for(int i=0;i<N;i++)
	{
		cin>>arr[i];
	}
	for(int i=0;i<N;i++)
	{
		if(s.empty())
		{
			//cout<<"inside if";
			s.push(make_pair(arr[i],i));
		}
		else{
			if(s.top().first<=arr[i])
			{
				//cout<<"iniside else 1 if";
				s.push(make_pair(arr[i],i));
			}
			else{
				while(!s.empty() && s.top().first>arr[i])
				{
					//cout<<"inside while else";
				//	cout<<s.top().first<<' '<<s.top().second;
					fear=(fear%MOD*(long long int)(i-s.top().second+1)%MOD)%MOD;
					s.pop();
				}
				s.push(make_pair(arr[i],i));
			}
		}
	}
	cout<<fear;
}