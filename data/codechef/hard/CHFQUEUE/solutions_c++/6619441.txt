#include<iostream>
#include<stack>
using namespace std;
#define M 1000000007
long long int ar[1000005];

int main()
{
    long long int n,k,i,element,f=1;
    stack <long long int> a;
    stack <long long int> b;
    cin>>n>>k;
    for(i=1;i<=n;i++)
        cin>>ar[i];
        a.push(1);
        b.push(0);
    for(i=1;i<=n;i++)
    {

        if(ar[i]<a.top())
        {
            while(a.top()>ar[i])
            {
                a.pop();
                element=b.top();
                b.pop();
                f=((f%M)*((i-element+1)%M))%M;
            }
        }
        a.push(ar[i]);
        b.push(i);
    }
cout<<f<<'\n';

return 0;
}
