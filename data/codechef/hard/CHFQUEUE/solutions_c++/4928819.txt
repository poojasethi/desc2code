#include <iostream>
#include<stack>
#define mod 1000000007
using namespace std;
 
int main() {
 
	long long int n,k,ans=1,a,j;
	cin>>n>>k;
	stack <long long > b,c;
	b.push(1);c.push(0);
	for(int i=1;i<=n;i++)
	{
		cin>>a;
		if(a<b.top())
		{	
			while(b.top()>a)
			{	j=(i-c.top()+1);
			
			ans=(((ans%mod)*(j%mod))%mod);
				
				c.pop();
				b.pop();
			
 
			}
 
		}
 
		b.push(a);
		c.push(i);
		
 
	}
		cout<<ans;
 
 
	return 0;
}