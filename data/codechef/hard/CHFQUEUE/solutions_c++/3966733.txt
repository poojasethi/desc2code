//In the name of Allah
 
#include <iostream>
#include <vector>
#include <string>
#include <stack>
#include <algorithm>
#include <bitset>
#include <math.h>
#include <queue>
#include <map>
#include <set>
#include <limits.h>
#include <limits>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <sstream>
#include <assert.h>
using namespace std;

const int MAXN = 1000005;
const int MOD = 1000000007;

int N, K, a[MAXN], r[MAXN];
int main(){
    scanf("%d %d", &N, &K);
    for(int i = 0; i < N; i++)
        scanf("%d", &a[i]);
    
    for(int i = N - 1; i >= 0; i--){
        r[i] = i + 1;
        while(r[i] < N && a[i] <= a[r[i]])
            r[i] = r[r[i]];
    }
    
    long long res = 1;
    for(int i = 0; i < N; i++)
        if(r[i] != N)res = (res * (r[i] - i + 1)) % MOD;
    printf("%lld\n", res);
    
    return 0;
}