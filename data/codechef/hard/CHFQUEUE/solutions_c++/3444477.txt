#include<bits/stdc++.h>
#define FOR(a,b,c) for(a = b ; a <= c ; a++)
#define st first
#define nd second
#define inf 2000000000
#define ii pair < int , int >
#define mp make_pair
#define pb push_back
#define mod 1000000007
#define ll long long

using namespace std;

int N,K,last,ans(1);
ii  s[1000005];
int A[1000005];

main()
{
    int a,b,i,j,c;

    cin >> N >> K;

    FOR(i,1,N) scanf("%d",&A[N-i+1]);

    FOR(i,1,N)
    {
        a = A[i];

        while(last && a <= s[last].st)
            last --;

        if(last) ans = (ll)(ans) * (ll)(i-s[last].nd+1) % mod ;

        s[++last] = mp(a,i);
    }

    cout << ans << endl;
}
