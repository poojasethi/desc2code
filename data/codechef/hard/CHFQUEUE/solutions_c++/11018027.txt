#include <iostream>
#include <cstring>
#include <stack>
using namespace std;
int main(){
    stack<long long int> first;
    stack<long long int> second;
    long long int n,k,res=1,prev=0;
    cin >> n >> k;
    long long int arr[n];
    for(long long int i=0;i<n;i++){
        cin >> arr[i];
    }
    for(long long int i=0;i<n;i++)
    {
        if(i==0 || first.empty())
        {
            first.push(arr[i]);
            second.push(i);
        }
        else if(arr[i]>=first.top())
        {
            first.push(arr[i]);
            second.push(i);
        }
        else
        {
            first.pop();
            res *= i-second.top()+1;
            if(res>1000000007){
                res%=1000000007;
            }
            second.pop();
            i--;
        }
    }
    cout << res << endl;
    return 0;
}