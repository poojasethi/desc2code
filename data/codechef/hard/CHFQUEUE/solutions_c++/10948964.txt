#include<bits/stdc++.h>
using namespace std;
#define M 1000000007
struct arr
{
	int l;
	int pos;
};
arr a[1000000];
int main()
{
	int n,i,f,k;
	long long tot = 1;
	cin>>n>>k;
	stack<pair<int,int> > s;
	for(i=0;i<n;i++)
	{
		a[i].pos = i;
		cin>>a[i].l;
	}
	s.push(make_pair(a[0].l,a[0].pos));
	for(i=1;i<n;i++)
	{
		while(!s.empty() && a[i].l<s.top().first)
		{
			f = i - s.top().second + 1;
			tot = (tot%M * f%M)%M;
			s.pop();
		}
		s.push(make_pair(a[i].l,a[i].pos));
	}
	while(!s.empty())
		s.pop();
	cout<<tot;
	return 0;
}