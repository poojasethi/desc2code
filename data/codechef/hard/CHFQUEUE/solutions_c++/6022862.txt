#include<iostream>
#include<stack>
#define M 1000000007
using namespace std;
int main()
{
 long long int n,k,i,x,m,ans;
 cin>>n>>k;
 stack<long long int>a,b;
 a.push(1);
 b.push(0);
 ans=1;
 for(i=1;i<=n;i++)
 {
  cin>>x;
  if(x<a.top())
  {
    while(a.top()>x)
    {
     m=i-b.top()+1;
     ans=((ans%M)*(m%M))%M;
     a.pop();
     b.pop();
    }
  }
    a.push(x);
     b.push(i);
 }
 cout<<ans;
 return 0;
}
