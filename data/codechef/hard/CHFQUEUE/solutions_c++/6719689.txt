#include<stdio.h>
#include<iostream>
#include<set>
#include<vector>
#include<algorithm>
#include<map>
#include<string.h>
#include<limits>
#include<limits.h>
#include<math.h>
#include<stack>
#include<string>

using namespace std;

int main()
{
    stack<pair<long long int,int> >S;
    long long int i,n,p,a,b,s,j,k,m=1000000007,c=0;
    a=1;
    scanf("%lld",&n);
    scanf("%lld",&k);
    for(i=0;i<n;i++)
    {
        scanf("%lld",&b);
        if(S.empty())
            S.push(pair<long long int,int>(b,i));
        else if(b>=S.top().first)
            S.push(pair<long long int,int>(b,i));
        else
        {
            while((!S.empty()) && (S.top().first>b))
            {
                a=(a*((i-S.top().second)+1)%m)%m;
                S.pop();
            }
            S.push(pair<long long int,int>(b,i));
        }
    }
    printf("%lld",a);
    return 0;
}
