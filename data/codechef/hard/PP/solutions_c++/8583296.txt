#include<bits/stdc++.h>
using namespace std;
#define f first
#define s second
#define mp make_pair
#define pb push_back
#define all(v) v.begin(),v.end()
#define pii pair<int,int>
#define ll long long
#define pll pair<ll,ll>
#define pil pair<int,ll>
#define mod 1000000007LL
#define hsh 31LL
map<ll,int>rev,normal;
char str[1000111];
ll p[1000111];
string s[1000111];
vector< int >vec[1000111];
int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        int i,j,n;
        ll ans=0LL;
        scanf("%d",&n);
        cin.ignore();
        normal.clear();
        rev.clear();
        for(i=0; i<=1000000; i++)
            vec[i].clear();
        for(i=0; i<n; i++)
        {
            cin>>s[i];
            vec[(int)s[i].size()].pb(i);
        }
        for(int idx=1; idx<=1000000; idx++)
        {
            for(int q=0; q<vec[idx].size(); q++)
            {
                int i1=vec[idx][q];
                int m=s[i1].size();
                //cout<<s[i1]<<endl;


                ll h=1LL,forw=0LL,bck=0LL;
                p[0]=(ll)(s[i1][0]-'a'+1);
                for(j=1;j<m;j++)
                    p[j]=((p[j-1]*hsh)+(s[i1][j]-'a'+1LL))%mod;
                ans=ans+rev[p[m-1]];
                for(j=m-1; j>=1; j--)
                {
                    forw=((forw*hsh)+(s[i1][j]-'a'+1LL))%mod;
                    bck=(((ll)(s[i1][j]-'a'+1)*h)+bck)%mod;
                    //cout<<forw<<" "<<bck<<" "<<p[j-1]<<endl;
                    if(forw==bck)
                        ans=ans+rev[p[j-1]];
                    h=(h*hsh)%mod;
                }


                h=1LL,forw=0LL,bck=0LL;
                p[m-1]=(ll)(s[i1][m-1]-'a'+1);
                for(j=m-2;j>=0;j--)
                    p[j]=((p[j+1]*hsh)+(s[i1][j]-'a'+1LL))%mod;
                ans=ans+normal[p[0]];
                for(j=0; j<m-1; j++)
                {
                    forw=((forw*hsh)+(s[i1][j]-'a'+1LL))%mod;
                    bck=(((ll)(s[i1][j]-'a'+1)*h)+bck)%mod;
                    //cout<<forw<<" "<<bck<<" "<<p[j+1]<<endl;
                    if(forw==bck)
                        ans=ans+normal[p[j+1]];
                    h=(h*hsh)%mod;
                }
                h=0LL;
                for(j=0; j<m; j++)
                    h=((h*hsh)+(s[i1][j]-'a'+1LL))%mod;
                normal[h]++;
                h=0LL;
                for(j=m-1; j>=0; j--)
                    h=((h*hsh)+(s[i1][j]-'a'+1LL))%mod;
                rev[h]++;
                //printf("%lld\n",ans);
            }
        }
        printf("%lld\n",ans);
    }
    return 0;
}
