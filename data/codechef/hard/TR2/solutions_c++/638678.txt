#include <stdio.h>
#include <string.h>

#define MAXM 105
#define MAXN 1005
#define MAXMN 100007

int numnodes;
int left[MAXN], right[MAXN], sol[MAXN];
int trleft[MAXMN], trright[MAXMN], qnt[MAXMN];

void attach(int v, int r, int d)
{
	int here = ++qnt[r];

	if(sol[here] < d)
		sol[here] = d;

	if(left[v] != -1) {
		if(trleft[r] == -1)
			trleft[r] = numnodes++;
		attach(left[v], trleft[r], d+1);
	}
	if(right[v] != -1) {
		if(trright[r] == -1)
			trright[r] = numnodes++;
		attach(right[v], trright[r], d+1);
	}
}

int main()
{
	int T;
	scanf("%d", &T);
	while(T--) {
		int m;
		scanf("%d", &m);

		numnodes = 1;
		memset(trleft, -1, sizeof trleft);
		memset(trright, -1, sizeof trright);
		memset(qnt, 0, sizeof qnt);
		memset(sol, 0, sizeof sol);

		for(int i = 0; i < m; i++) {
			int n;
			scanf("%d", &n);
			memset(left, -1, sizeof left);
			memset(right, -1, sizeof right);

			for(int j = 0; j < n-1; j++) {
				int u, v;
				char c;
				scanf("%d %c %d", &u, &c, &v);

				u--; v--;
				if(c == 'L') left[u] = v;
				else right[u] = v;
			}
			attach(0,0,0);
		}

		printf("%d", sol[1]);
		for(int i = 2; i <= m; i++)
			printf(" %d", sol[i]);
		printf("\n");
	}
	return 0;
}

