#include<bits/stdc++.h>
#define ll long long
#define S(n) scanf("%d",&(n))
#define P(n) printf("%d",(n))
#define SL(n) scanf("%lld",&(n))
#define PL(n) printf("%lld",(n))
#define NL printf("\n")
#define SP printf(" ")
#define REP(a,b,c) for(int i=(a);i<=(b);i+=(c))
#define Debug cout<<"Hello"
#define N 100000
#define M 1000000007
using namespace std;
int r,c;
int dfs(int x, int y, int **a, int **vis)
{
	vis[x][y]=1;
	
	int adj[][2] = {{x-1,y},{x+1,y},{x,y-1},{x,y+1}};
	int ans = 1;
	for(int i=0;i<4;i++)
	{
		int u = adj[i][0],v = adj[i][1];
		if(u>=1 && u<=r && v>=1 && v<=c && vis[u][v]==0 && a[u][v]==0)
		{
			ans+=dfs(u,v,a,vis);
		}
	}
	
	return ans;
}
int main()
{
	
	//freopen("input.txt", "r", stdin);
	int tc;
	S(tc);
	
	for(int t=1;t<=tc;t++)
	{
		
		S(r);S(c);
		int **a;
		int **vis;
		a = (int **)malloc((r+1)*sizeof(int *));
		vis = (int **)malloc((r+1)*sizeof(int *));
		for(int i=0;i<=r;i++)
		{
			a[i] = (int *)malloc((c+1)*sizeof(int));
			vis[i] = (int *)malloc((c+1)*sizeof(int));
		}
	
		for(int i=1;i<=r;i++)
		{
			string str;
			cin>>str;
			//cout<<str<<endl;
			for(int j=1;j<=c;j++)
			{
				a[i][j] = ((str[j-1]=='#')? 1: 0);
				vis[i][j] = 0;
			}
		}
	    int x0;
		vector<int>arr;
		for(int i=1;i<=r;i++)
		{
			for(int j=1;j<=c;j++)
			{
				if(vis[i][j]==0 && a[i][j]==0)
				{
					int val = dfs(i,j,a,vis);
					if(i==1 && j==1)x0 = val; 
					else arr.push_back(val);
				}
				
			}
		}
		
		double ans = 1;
		
		for(int i=0;i<arr.size();i++)
		{
			ans+=arr[i]*1.0/(x0+arr[i]);
		}
		printf("%.10f\n", ans);
	}
	
	
	
	
}