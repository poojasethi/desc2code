// created by: Prashant Kumar Singh :)
#include<iostream>
#include<algorithm>
#include<utility>
#include<cstring>
#include<string.h>
#include<set>
#include<map>
#include<math.h>
#include<stdio.h>
#include<vector>
#include<functional>
#include<bitset>
#include<iomanip>
#define ll long long
#define gr greater<ll>()
#define pi acos(-1.0)
#define pb push_back
#define MS0(ar) memset(ar,0,sizeof ar)
#define f first
#define s second
#define pii pair<int,int>
#define pll pair<ll,ll>
#define ind(a) scanf("%d",&a)
#define inf(a) scanf("%lf",&a)
#define inl(a) scanf("%lld",&a)
#define ins(a) scanf("%s",a)
#define pd(a) printf("%d\n",a)
#define pl(a) printf("%lld\n",a);
#define bitcnt(x) __builtin_popcountll(x)
#define setpre(x)  cout<<setprecision(x)<<fixed
using namespace std;
int dx[] = { -1, 0, 1, 0};
int dy[] = {0, 1, 0, -1};
ll r, c;
int ans = 0, flag = 0;
string ar[50007];
vector<ll>comp;
void dfs(int x, int y)
{
	if (x == r - 1 && y == c - 1)
		flag = 1;
	ar[x][y]='#';
	for (int i = 0; i < 4; i++)
	{
		//cout<<"prashant fwfjdf\n";
		if (x + dx[i] >= 0 && y + dy[i] >= 0 && y + dy[i] <= c - 1  && x + dx[i] <= r - 1)
		{

			if ( ar[x + dx[i]][y + dy[i]] == 'o')
			{
				//cout << ans << endl;
				ans++;
				dfs(x + dx[i], y + dy[i]);
			}
		}
	}

}
int main()
{
	ios_base::sync_with_stdio(0);
	cin.tie(0);
#ifndef ONLINE_JUDGE
	freopen("input.txt", "r", stdin);
#endif
	ll t;
	cin >> t;
	while (t--)
	{
		cin >> r >> c;
		for (int i = 0; i < r; i++)
		{
			cin>>ar[i];
		}
		//MS0(vis);
		comp.clear();
		ll si = 0;
		for (int i = 0; i < r; i++)
		{
			for (int j = 0; j < c; j++)
			{
				if (ar[i][j] == 'o')
				{
					ans = 1, flag = 0;
					//cout << "prashant kumar singh " << ans << endl;
					dfs(i, j);
					if (flag == 1)
						si = ans;
					else
						comp.pb(ans);
				}
			}
		}
		setpre(6);
		double res = 1.0;
		for (int i = 0; i < comp.size(); i++)
		{
			res += (comp[i] * 1.0) / (comp[i] + si);
		}
		cout << res << endl;
	}
	return 0;
}