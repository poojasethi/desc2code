//O(ElogV)
#include<bits/stdc++.h>
using namespace std;
#define ll long long 
const ll MAX = 10000;
const ll mod =747474747;
ll c[10000][10],d,n,maxdist[MAX],maxindex,mx,ans;
bool visited[MAX];

ll dist(ll x,ll y)
{
    ll i,ans=0;
    
    for(i=1;i<=d;i++)
        ans+=(c[x][i]-c[y][i])*(c[x][i]-c[y][i]);
    return ans;
}


void initialize()
{
    ll i;
    for(i=0;i<10000;i++)
    visited[i]=false,maxdist[i]=0;
    
    ans=1;
    mx=0;
}

void prim(ll x)
{
    ll i;
    visited[x]=true;
    for(i=1;i<=n;i++)
        {
            if(visited[i])
            continue;
        maxdist[i]=max(maxdist[i],dist(x,i));
        }
        
        mx=0;
        for(i=1;i<=n;i++)
        {
            
        if(visited[i])
            continue;
        if(maxdist[i]>mx)
        {
            mx=maxdist[i];
            maxindex=i;
        }
    }
    if(mx==0)
        return;
    ans=(ans%mod)*(maxdist[maxindex]%mod);
    
    prim(maxindex);
}

int main()
{
    ll t,j,i,k,maxCost;
    cin>>t;
    while(t--){
    initialize();
    cin >> n>>d;
    
    for(i = 1;i <=n;++i)
    for(j=1;j<=d;j++)
        cin>>c[i][j];
    
    prim(1);
    cout << ans%mod <<"\n";
    }
    return 0;
}