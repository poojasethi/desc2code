#include<cstdio>
#include<vector>
#include<cmath>
#include<string>
#include<cstring>
#include<algorithm>
#include<queue>
#include<set>
#include<stack>
#include<map>
#include<sstream>
#include<bitset>
#include<deque>
#include<utility>
#include<cstdlib>
#include<iomanip>
#include<cctype>
#include<climits>
#include<iostream>
using namespace std;
#define ll             long long
#define ull            unsigned long long
#define all(x)         x.begin(),x.end()
#define vi             vector<int>
#define vvi            vector<vector<int> >
#define INF            2147483647
#define LIMIT          6666
#define mod            747474747
#define pi             pair<int,int>
#define mp             make_pair
#define pb(v)          v.push_back
#define sz(x)          x.size()
string tostr(ll x)     { stringstream ss; ss << x; return ss.str(); }
ll toint(string &s)    { stringstream ss; ss << s; long long x; ss >> x; return x; }
ll gcd(ll a,ll b){return b?gcd(b,a%b):a;}
ll g[LIMIT+1][LIMIT+1];
bool used[LIMIT+1];
ll min_e[LIMIT+1];
int point[LIMIT+1][5];
int sel[LIMIT+1];
int n;
ll ans;
void init()
{
    //for(int i=0;i<n;i++)for(int j=0;j<n;j++)g[i][j]=0;
    for(int i=0;i<n;i++){used[i]=false;min_e[i]=ans;}
}
int minkey()
{
        ll min1=ans;int min_index;
        for(int v=0;v<n;v++)
                if(used[v]==0&&(min_e[v]<min1))
                        min1=min_e[v],min_index=v;
        return min_index;
}
int prim()
{
        ll total=1;
        min_e[0]=0;
        sel[0]=-1;
        for(int i=0;i<n;i++)
        {
                int v=minkey();
                used[v]=true;
                //if(sel[v]!=-1){if(total==-1)total=1;total=(1LL*total*g[v][sel[v]])%mod;}
                for(int j=0;j<n;j++)
                {
                        if(!used[j]&&g[v][j]<min_e[j])
                        {
                                min_e[j]=g[v][j];
                                //total+=min_e[j];
                                sel[j]=v;
                        }
                }
        }
        for(int i=1;i<n;i++)
    if(g[i][sel[i]]!=0)
    total=(total*((-1*g[i][sel[i]])%mod))%mod;
        return total;
}
int main()
{
    #ifndef ONLINE_JUDGE
     freopen("input.txt","r",stdin);
     freopen("output.txt","w",stdout);
    #endif
     ans=1;
	 for(int i=0;i<18;i++)
		 ans=ans*10;
    //cout<<ans<<endl;
         int t;
         scanf("%d",&t);
         while(t--)
         {
                 int d;
                 scanf("%d%d",&n,&d);
                 for(int i=0;i<n;i++)
                         for(int j=0;j<d;j++)
                                 scanf("%d",&point[i][j]);
                 init();
                 for(int i=0;i<n;i++)
                         for(int j=i+1;j<n;j++)
                         {
                                 ll sum=0;
                                 for(int k=0;k<d;k++){ll dist=(point[i][k]-point[j][k]);
                                 sum=(sum+dist*dist);}
 
                                 g[i][j]=g[j][i]=-1*sum;
                                 g[i][i]=0;
                         }
         printf("%d\n",prim());
         }
    return 0;
}