#include <stdio.h>
#define MAX 6670
#define moD 747474747;
typedef long long ll;

int visited[MAX];
ll a[MAX][10], dist[MAX][MAX], d[MAX];

int main()
{
    int i, j, k, level=0,T, N, D;
    ll Ans, m;
    scanf("%d",&T);

    while(T--)
    {
        scanf("%d%d", &N, &D);
        for (i=0; i<N; i++)
            for (j=0; j<D; j++)
                scanf("%lld", &a[i][j]);
    			
        for (i=0; i<N; i++)
            for (j=i+1; j<N; j++)
            {
                dist[i][j] = 0;
                for(k=0; k<D; k++)  dist[i][j]+=(a[i][k]-a[j][k])*(a[i][k]-a[j][k]);
                dist[j][i] = dist[i][j];
            }
            
        for(i=1; i<N; i++) d[i]=dist[0][i];
        level++, Ans=1;	
		
        while(1)
        {
            k=-1, m=0;
            for (i=1; i<N; i++)
            {
                if(visited[i]==level) continue;
                if(d[i]>m)   m=d[i], k=i;
            }
            if (k==-1 || m==0) break;
            d[k]%=moD;
            Ans = (Ans*d[k])%moD;
            visited[k]=level;
            for(i=1; i<N; i++)  if (visited[i]!=level && d[i]<dist[i][k])   d[i]=dist[i][k];
        }
        printf("%lld\n", Ans);
    }
    return 0;
}