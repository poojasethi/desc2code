#include <bits/stdc++.h>
using namespace std;
 
int visited[6667];
long long int dist[6667];
int a[6667][5];
int n,d;
 
#define MOD 747474747
 
long long int getdist(int p,int q)
{
	long long int k = 0;
	for(int i=0;i<d;i++) {long long int kk = (a[p][i]-a[q][i]); k += kk*kk;}//*(a[p][i]-a[q][i]);
	return k;
}
 
long long int prim()
{
	for(int i=0;i<n;i++)visited[i]=0;
 
	visited[0] = 1;
	for(int i=1;i<n;i++)dist[i] = getdist(0,i);
 
	long long int ans = 1;
	//int vis = n-1;
	
	while(1)
	{
		int nextv = -1; long long int nextd = 0;
		for(int i=0;i<n;i++)
		{
			if(!visited[i] && nextd  < dist[i]){nextv = i; nextd = dist[i];} 
		}
 
		if(nextv==-1)
		break;
 
		ans = (ans*(nextd%MOD))%MOD;
		if(ans==0)
		break;
		visited[nextv] = 1;
 
		for(int i=0;i<n;i++)
		{
			if(!visited[i])
			{ 	
				long long int k = getdist(i,nextv); 
				if(k>dist[i]) dist[i] = k;
			}
		}
	} 
 
	return ans;
}
 
int main()
{
	int t;
	scanf("%d",&t);
 
	while(t--)
	{
		scanf("%d %d",&n,&d);
 
		for(int i=0;i<n;i++)
		for(int j=0;j<d;j++)
			scanf("%d",&a[i][j]);
		printf("%lld\n",prim());
	}
}  