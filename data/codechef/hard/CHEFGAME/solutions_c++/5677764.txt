#include<bits/stdc++.h>
#define FOR(i,a,b)	for(i=(a);i<(b);i++)
#define dbg(x)		{cerr << #x << " = " << x << endl;}
#define DEBUG 0
#define gc getchar_unlocked
#define N 7000
#define D 6
using namespace std;
 
typedef long long ll;
typedef unsigned long long ull;
 
ll point[N][D];
ll dist[N];
bool mark[N];
 
void SOLVE(int n,int d){
	ll i,j,idx,k,maxx,ans=1,mod=747474747;
	ll distance;
	FOR(i,0,n)	dist[i]=0;
	FOR(i,0,n){
		idx=-1;
		maxx=-1;
		FOR(j,0,n){
			if(!mark[j]){
				if(idx==-1){
					idx=j;
					maxx=dist[j];
				}
				else if(idx!=-1 && dist[j]>maxx){
					idx=j;
					maxx=dist[j];
				}
			}
		}
		if(i!=0){
			if(maxx<=1)	break;
			ans=((ans%mod)*(dist[idx]%mod))%mod;
		}
		mark[idx]=true;
		FOR(j,0,n){
			if(!mark[j]){
				distance=0;
				FOR(k,0,d){
					distance+=(point[idx][k]-point[j][k])*(point[idx][k]-point[j][k]);
				}
				dist[j]=max(dist[j],distance);
			}
		}
	}
	cout<<ans<<endl;
}
 
int main(){
	int t,n,i,j,d;
	#ifndef ONLINE_JUDGE
		freopen("inpu.txt","r",stdin);
	#endif
	cin>>t;
	while(t--){
		cin>>n>>d;
		FOR(i,0,n)	mark[i]=false;
		FOR(i,0,n){
			FOR(j,0,d){
				cin>>point[i][j];
			}
		}
		SOLVE(n,d);
	}
	return 0;
}  