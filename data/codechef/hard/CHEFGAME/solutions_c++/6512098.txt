#include <bits/stdc++.h>
using namespace std;
#define ll long long 
#define mod 747474747
int point[6670][5] , d;

ll dist_f(int a , int b){
	ll dist=0 ,  di;
	for(int i=0 ; i<d ; i++){
		di=(point[a][i]-point[b][i]);
		dist+=(di*di);
	}
	if(dist==0) return 1;
	return dist;
}

int main() {
	int t , n ;
	scanf("%d" , &t);
	while(t--){
		scanf("%d %d" , &n , &d);
		
		for(int i=0 ; i<n ; i++)
			for(int j=0 ; j<d ; j++)
				scanf("%d" , &point[i][j]);
				
		int visited[6670]={0}; ll max_dist[6670]={0};
		ll ans=1;
		int i=0;
		while(!visited[i]){
			visited[i]=1;
			if(i) ans=(ans*(max_dist[i]%mod))%mod;
			ll maximum=0; int node=i;
			for(int j=0 ; j<n ; j++){
				if(!visited[j]){
					if(max_dist[j]<dist_f(i , j)) max_dist[j]=dist_f(i , j);
					if(max_dist[j]>maximum) { maximum=max_dist[j]; node=j; }
					}
			}
			i=node;
		}
		printf("%lld\n" , ans);
	}
	return 0;
}