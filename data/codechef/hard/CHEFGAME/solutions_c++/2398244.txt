#include<stdio.h>
#include<string.h>
#define MOD 747474747
#define  loop1 for(int i=0;i<n;i++)
#define  loop4 for(int i=1;i<n;i++)
#define  loop2 for(int j=0;j<n;j++)
#define  loop3 for(int k=0;k<d;k++)
#define input scanf("%d%d",&n,&m)
long long int  points[6670][10];
long long int length[6670];
bool state[6670];
long long int dis[6670][6670];
long long int ans=1;
 
void fastread(int *a)
{    char c=0;
      while(c<33)
      {c=getchar();}
      *a=0;
      while(c>33)
      {
       *a=*a*10+c-'0';
       c=getchar();
      }
}
 
 
 
 
void  maxtree(int root,int n){
 
int r=root;
state[r]=1;
loop4 length[i]=dis[r][i];
while(1){
long long int  d=0;
int current=-1;
         loop4
         if(state[i]==0 && length[i]>d) {d=length[i];current=i;}
 
        if(current==-1 ) return;
        state[current]=1;
        ans=((ans%MOD)*(d%MOD))%MOD;
 
        loop4
        {
        if(state[i]==0 && dis[current][i]>length[i])
        length[i]=dis[current][i];
        }
 
 
}
}
 
 
long long int distanse(int i,int j,int d){
long long int a=0;
loop3
a=a+((points[i][k]-points[j][k])*(points[i][k]-points[j][k]));
return a;
}
 
 
void init(int n,int d){
ans=1;
loop1 state[i]=0;
loop1 length[i]=-1;
loop1
for(int j=i+1;j<n;j++)
{dis[i][j]=dis[j][i]=distanse(i,j,d);
//printf("distanse between %d to %d is %lld\n",i,j,dis[i][j]);
}
 
 
 

}
 
 
 
 
 
 
 
int main(){
    //freopen("input5.txt","r",stdin);
int t,n,d;
long long int cor;scanf("%d",&t);
while(t--){
fastread(&n);fastread(&d);
for(int i=0;i<n;i++){
    for(int j=0;j<d;j++){
    scanf("%lld",&cor);
     points[i][j]=cor;
    }
}
init(n,d);
maxtree(0,n);
 
printf("%lld\n",ans);
 
}
return 0;
}
 
 
