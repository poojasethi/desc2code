#include<bits/stdc++.h>
using namespace std;
#define mod 747474747
long long int x[6668][7];
long long dist[6668];
bool visited[6668];
int d;

long long calc(int i,int j)
{
    long long di=0;
    int k;
    for(k=0;k<d;k++)
        di = di+(x[i][k]-x[j][k])*(x[i][k]-x[j][k]);
    return di;
}
int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        int n,i,j;
        scanf("%d%d",&n,&d);
        for(i=0;i<n;i++)
        {
            for(j=0;j<d;j++)
                scanf("%lld",&x[i][j]);
        }
        for(i=0;i<n;i++)
            visited[i]=0,dist[i]=0;

        visited[0]=1;
        for(i=1;i<n;i++)
            dist[i]= calc(0,i);
        long long res=1;
        int ind;
        long long mx=0;
        while(1)
        {   ind=-1; mx=0;
           for(i=0;i<n;i++)
           {
              if(!visited[i]&&mx<dist[i])
              {
                  ind=i; mx = dist[i];
              }
           }
           if(mx==0) break;
           visited[ind]=1;
           res = (res*(mx%mod))%mod;
           for(i=0;i<n;i++)
            {
                if(!visited[i])
                    dist[i]=max(dist[i],calc(ind,i));
            }
        }
        printf("%lld\n",res);
    }
    return 0;
}
