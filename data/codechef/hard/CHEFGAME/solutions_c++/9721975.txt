#include<stdio.h>
#include<climits>
bool vis[6700];
long long a[6700][6];
long long c[6700];
long long m=747474747;
long long prim(long long s,long long n,long long d)
{
    long long i;
    for(i=0;i<n;i++)
    {
        c[i]=INT_MIN;
        vis[i]=0;
    }
    c[s]=0;
    long long prod=1;
    for(long long ll=0;ll<n;ll++)
    {
        long long maxm=INT_MIN;
        long long maxi;
        for(i=0;i<n;i++)
        {
            if(!vis[i]&&maxm<c[i])
            {
                maxm=c[i];
                maxi=i;
            }
        }
        long long u=maxi;
        if(ll!=0&&maxm==0) return prod;
        if(ll!=0) prod=((prod%m)*(maxm%m))%m;
   //     printf("%lld\n",maxm);
        vis[u]=1;
        long long y;
        for(i=0;i<n;i++)
        {
            long long k=0;
            if(!vis[i])
            {
                for(y=0;y<d;y++)
                {
                    k+=(a[u][y]-a[i][y])*(a[u][y]-a[i][y]);
                }
             //   printf("%lld\n",k);
                if(c[i]<k)
                {
                    c[i]=k;
                }
            }
        }
    }
    return prod;
}
int main()
{
 // freopen("input.txt","r",stdin);
    long long t,n,m,i,j;
    scanf("%lld",&t);
    while(t--)
    {
        long long d;
        scanf("%lld%lld",&n,&d);
     //   printf("%lld%lld",n,d);
        for(i=0;i<n;i++)
        {
            for(j=0;j<d;j++)
            {
                scanf("%lld",&a[i][j]);
            }
        }
        printf("%lld\n",prim(0,n,d));

    }
    return 0;
}
