#include <iostream>
#include <set>
#include <climits>
#include <cstring>

using namespace std;

#define MAX 6670
#define ll  long long

ll point[MAX][6];
ll dist[MAX];
bool vis[MAX];

ll mod =  747474747;


typedef pair<ll, int> pl;

ll getDist(int x, int y, int d)
{
	ll ans = 0;
	for (int i = 0; i < d; i++) {
		ll diff = point[x][i] - point[y][i];
		ans += diff * diff; 
	}
	return ans;
}
ll func(int n, int d)
{
	set<pl> se;
	
	memset(vis, 0, sizeof(vis));
	memset(dist, 0, sizeof(dist));
		
	dist[0] = 1;
	int  s;
	se.insert(pl(1, 0));
	ll ans = 1;
	while (!se.empty()) {
		
		pl pa = *(--se.end());
		se.erase(--se.end());
	
		ans = (ans * (pa.first % mod))% mod;
		s = pa.second;
		vis[s] = true;
		
		for (int i = 0; i < n; i++) {
			if (vis[i]) continue;
			ll dd = getDist(i, s, d);
			if (dd > dist[i]) {
				se.erase(pl(dist[i], i));
				dist[i] = dd;
				se.insert(pl(dist[i], i));
			}
		}
	}	
	return ans;
}

int main()
{
	int test;
	scanf("%d", &test);
	
	while (test--) {
		int n, d;
		scanf("%d%d", &n, &d);
		for (int i = 0; i < n; i++) {
			for (int j = 0; j < d; j++)
			scanf("%lld", &point[i][j]);
		}
		
		printf("%lld\n", func(n, d));		
	}
}