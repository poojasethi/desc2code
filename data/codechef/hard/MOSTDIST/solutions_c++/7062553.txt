#include <stdio.h>
#include <queue>
#define LLD long long
#define PII pair<LLD,int>
using namespace std;
priority_queue<PII> p1,p2,p3,p4;
int hash[500005];
int main()
{
int Q,cnt=0;
char c;
LLD x,y,ans=0,N,f1,f2,f3,f4;
scanf("%d",&Q);
getchar();
while(Q--)
{
	scanf("%c",&c);
	
	if(c=='+')
	{
		scanf("%d %d",&x,&y);
		
		x=ans^x;
		y=ans^y;
		++cnt;
		p1.push(PII(x+y,cnt));
		p2.push(PII(x-y,cnt));
		p3.push(PII(-x+y,cnt));
		p4.push(PII(-x-y,cnt));
		
	}
	else if(c=='-')
	{
		
		scanf("%d",&N);
		N=ans^N;
		hash[N]=1;
	}
	else
	{
		scanf("%d %d",&x,&y);
		x=ans^x;
		y=ans^y;
		
        PII pp=p1.top();
		while(hash[pp.second])
		{
		p1.pop();
		pp=p1.top();	
		}
		f1=pp.first-(x+y);
		
		pp=p2.top();
        while(hash[pp.second])
		{
		p2.pop();
		pp=p2.top();	
		}
		f2=pp.first-(x-y);
		
		pp=p3.top();
		while(hash[pp.second])
		{
		p3.pop();
		pp=p3.top();	
		}
		f3=pp.first-(-x+y);
		
        pp=p4.top();
		while(hash[pp.second])
		{
		p4.pop();
		pp=p4.top();	
		}
		f4=pp.first-(-x-y);
        
		ans=max(max(f1,f2),max(f3,f4));
		printf("%d\n",ans);				
	}
	getchar();
}	
return 0;
}