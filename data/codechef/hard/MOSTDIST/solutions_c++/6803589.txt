// adijimmy
#include <bits/stdc++.h>
using namespace std;
priority_queue< pair<int,int> > a,b,c,d;
int vis[500001];
int main(){
 int n,va,pos,ans = 0,x,y,req;
 scanf("%d",&n);
 string str;
 int idx = 1;
 for(int i=0;i<n;i++){
   cin >> str;
   if(str[0] == '+'){
     scanf("%d %d",&x,&y);
     x ^= ans;
     y ^= ans;
     a.push(make_pair((x+y),idx));
     b.push(make_pair((x-y),idx));
     c.push(make_pair((-x+y),idx));
     d.push(make_pair((-x-y),idx));
     vis[idx] = 1;
     idx++;
   }
   else if(str[0] == '-'){
		scanf("%d",&req);
		req ^= ans;
		vis[req] = 0;
   }
   else{
		scanf("%d %d",&x,&y);
		x ^= ans;
		y ^= ans;
		int res;
		while(!a.empty()){
		 pair<int,int> pa = a.top();
		 va = pa.first;
		 pos = pa.second;
		 if(vis[pos]==1) break;
		 a.pop();
		}
		res = va-(x+y);
		while(!b.empty()){
		 pair<int,int> pa = b.top();
		 va = pa.first;
		 pos = pa.second;
		 if(vis[pos]==1) break;
		 b.pop();
		}
		res = max(res,va-(x-y));
		while(!c.empty()){
		 pair<int,int> pa = c.top();
		 va = pa.first;
		 pos = pa.second;
		 if(vis[pos]==1) break;
		 c.pop();
		}
		res = max(res,va-(-x+y));
		while(!d.empty()){
		 pair<int,int> pa = d.top();
		 va = pa.first;
		 pos = pa.second;
		 if(vis[pos]==1) break;
		 d.pop();
		}
		res = max(res,va-(-x-y));
		ans = res;
		printf("%d\n",ans);
   }
 }
 return 0;
}
