#include<cstdio>
#include<iostream>
#include<cstring>
#include<vector>
#include<memory.h>
#include<cstdlib>
#include<cmath>
#include<cassert>
#include<memory.h>
#include<algorithm>
#include<queue>
#include<utility>
#include<map>
#include<bitset>
using namespace std;

typedef vector<int> VI;
typedef long long LL;
typedef unsigned long long uLL;
typedef pair<int, int> PII;
typedef vector<PII> VPII;
#define pb push_back
#define fi first
#define se second
#define mp make_pair
#pragma comment(linker, "/STACK:266777216")

const int inf=1000000000;
const LL INF=LL(inf)*inf;
const double eps=1e-9;
const double PI=2*acos(0.0);

#define MAXN 100005

bool state[MAXN];
int odd[MAXN], even[MAXN], A[MAXN];
int N;

void solve()
{
    scanf("%d", &N);
    for(int i=1; i<=N; i++)
    {
        scanf("%d", &A[i]);
    }
    LL ans = 0;
    for(int lvl=0; lvl<31; lvl++)
    {
        state[0] = 0, odd[0]=0, even[0] =1;

        for(int i=1; i<=N; i++)
        {
            if(A[i] & (1<<lvl))
            {
                if(state[i-1] == 0)
                {
                    state[i] = 1;
                    odd[i] = odd[i-1] + 1;
                    even[i] = even[i-1];
                    ans += (LL)even[i-1] *(1<<lvl);
                }
                else
                {
                    state[i] = 0;
                    odd[i] = odd[i-1];
                    even[i] = even[i-1] + 1;
                    ans+= (LL)odd[i-1]*(1<<lvl);
                }
            }
            else
            {
                if(state[i-1] == 0)
                {
                    state[i] = 0;
                    odd[i] = odd[i-1];
                    even[i] = even[i-1]+1;
                    ans+= (LL)odd[i-1]*(1<<lvl);
                }
                else
                {
                    state[i] = 1;
                    odd[i] = odd[i-1]+1;
                    even[i] = even[i-1];
                    ans += (LL)even[i-1] *(1<<lvl);
                }
            }
        }
    }
    printf("%lld\n", ans);
}

int main()
{
    #ifndef ONLINE_JUDGE
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    #endif
    int t;
    scanf("%d", &t);
    while(t--)
    {
        solve();
    }
}
