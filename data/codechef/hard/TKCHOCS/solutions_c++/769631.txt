# include <cstdio>
# include <algorithm>
# include<queue>

using namespace std;

int tr[501][501],d[501];
int main()
{

    int t;
    scanf("%d",&t);

    while(t--)
    {
        int n;
        scanf("%d",&n);

        int i,j;
        for(i=0;i<=500;i++){
        for(j=0;j<=500;j++)
        tr[i][j] = 0;}
        
        for(i=n;i>0;i--)
        {
	        for(j=1;j<=n-i+1;j++)
	        scanf("%d",&tr[i][j]);
	
         }
        
        
    int q=(n+1)/2;
 
    for(i=1;i<=q;i++)
	d[i]=d[i-1]+ tr[i][i];
 
    for(i=n-1;i>1;i--)
	for(j=1;j<=min(i-1,n-i+1);j++)
	     tr[i][j]+=max(tr[i+1][j-1],max(tr[i+1][j],tr[i+1][j+1]));
 
     for(j=n-1;j>1;j--)
	    for(i=1;i<=min(j-1,n-j+1);i++)
	    tr[i][j]+=max(tr[i-1][j+1],max(tr[i][j+1],tr[i+1][j+1]));
 
    int ans=0;
    for(i=1;i<=q;i++)
	for(j=1;j<=q;j++)
	 ans=max(ans,max(tr[i+1][i-1],tr[i+1][i])+max(tr[j][j+1],tr[j-1][j+1])+d[max(i,j)]);
  
    printf("%d\n",ans);
        
        
       


    }//end of test cases


}