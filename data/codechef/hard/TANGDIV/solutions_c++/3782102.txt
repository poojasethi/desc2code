#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <algorithm>
#include <iostream>
#include <set>
using namespace std;

#define REP0(i, n) for (int i = 0; i < n; i++)
#define REP1(i, n) for (int i = 1; i <= n; i++)
#define REP(i, l, r) for (int i = l; i <= r; i++)
#define RP(i, r, l) for (int i = r; i >= l; i--)
#define FORE(i, x) for (int i = fi[x]; i != -1; i = e[i].n)

#define MAX_N 2000
#define A first
#define B second
#define MP make_pair
typedef pair < int, int > PT;

int main(void)
{
    int test; scanf("%d", &test);
    while (test-- > 0)
    {
          int n, m, p; scanf("%d%d%d", &n, &m, &p); set < int > s; s.clear();
          bool sign = true;
          REP1(i, m) { int x, y; scanf("%d%d", &x, &y), s.insert(x), s.insert(y % n + 1); }
          REP1(i, p)
          {
              int x, y; scanf("%d%d", &x, &y); y = y % n + 1;
              if (!s.count(x)) sign = false;
              if (!s.count(y)) sign = false;
          }
          puts(sign ? "Yes" : "No");
    }
    return 0;
}
