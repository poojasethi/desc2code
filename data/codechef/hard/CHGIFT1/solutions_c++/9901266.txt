#include<cstdio>
#include<iostream>
using namespace std;
int main()
{
    int t,i,n;
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d",&n);
        long long int a[n],be[n],we[n];
        for(i=0;i<n;i++)
        {
             scanf("%lld",&a[i]);

        }
        be[0]=a[0];
        we[0]=a[0];

        for(i=1;i<n;i++)
        {
            if(a[i]>0)
            {
                be[i]=max(be[i-1]+a[i],max(be[i-1]-a[i],be[i-1]*a[i]));
                we[i]=min(we[i-1]+a[i],min(we[i-1]-a[i],we[i-1]*a[i]));


            }
            else
            {
              be[i]=max(be[i-1]+a[i],max(be[i-1]-a[i],we[i-1]*a[i]));
              we[i]=min(we[i-1]+a[i],min(we[i-1]-a[i],be[i-1]*a[i]));



            }


        }

      printf("%lld\n",we[n-1]);



    }

}
