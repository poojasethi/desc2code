#include <cstdio>
#include <algorithm>
using namespace std;
 
int main(){
    int N, T, A;
    scanf("%d", &T);
    while(T--){
        long long S=0, MP=0, MN=0;
        scanf("%d", &N);
        for(int i=1; i<=N; ++i){
            scanf("%d", &A);
            if(!(i-1))
                S=MP=MN=A;
            else{
                if(A>0){
                    S=min(MN*A, MN-A);
                    MP=max(MP+A, MP*A);
                    MN=min(MN*A, MN-A);
                }
                else{
                    S=min(MP*A, MN+A); long long tmp=MN;
                    MN=min(min(MN*A, MN+A), MP*A);
                    MP=max(MP-A, tmp*A);
                }
            }
        }
        printf("%lld\n", S);
    }
    return 0;
} 