#include <cstdio>
#include <iostream>
#include <cmath>
#include <cstring>
int n,q,prerow[1000000],precol[1000000],col0[1000000],col1[1000000],row0[1000000],row1[1000000],w[1000000];
char s[100];
int x,y;
using namespace std;
int lowbit(int x)
{
	return x & (-x);	
}
int query(int arr[],int x)
{
	int sum=0;
	while (x)
	{
		sum+=arr[x];
		x-=lowbit(x);
	}
	return sum;
}
void insert(int arr[],int x,int key)
{
	while (x<=q){
		arr[x]+=key;
		x+=lowbit(x);
	}
}
int main()
{
	scanf("%d%d",&n,&q);
	for (int i=1;i<=q;++i)
	{
		scanf("%s",s);
		if (s[0]=='R')
		{
			if (s[3]=='Q'){
				scanf("%d",&x);
				int ans=0;
				if (prerow[x]==0||w[prerow[x]]==0){
					ans=n-(query(col1,i)-query(col1,prerow[x]));
				}else {
					ans=query(col0,i)-query(col0,prerow[x]);
				}
				printf("%d\n",ans);
			}
			else {
				scanf("%d%d",&x,&y);
				w[i]=y;
				if (prerow[x]!=0){
					if (w[prerow[x]]==0)
						insert(row0,prerow[x],-1);
					else
						insert(row1,prerow[x],-1);
				}
				prerow[x]=i;
				if (y==0) insert(row0,i,1);else insert(row1,i,1);
			}
		}else{
			if (s[3]=='Q'){
				scanf("%d",&x);
				int ans=0;
				if (precol[x]==0||w[precol[x]]==0){
					ans=n-(query(row1,i)-query(row1,precol[x]));
				}else {
					ans=query(row0,i)-query(row0,precol[x]);
				}
				printf("%d\n",ans);
			}
			else {
				scanf("%d%d",&x,&y);
				w[i]=y;
				if (precol[x]!=0){
					if (w[precol[x]]==0)
						insert(col0,precol[x],-1);
					else 
						insert(col1,precol[x],-1);
				}
				precol[x]=i;
				if (y==0) insert(col0,i,1);else insert(col1,i,1);
			}
		}
	}
	return 0;
}
