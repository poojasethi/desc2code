#include <iostream>
#include <cstdio>
#include <algorithm>
#define foru(i,a,b) for(int i = (a), _b = (b); i <= _b; ++i)
#define ford(i,a,b) for(int i = (a), _b = (b); i >= _b; --i)
typedef long long ll;
using namespace std;
const int N = 5E3+10;
const ll INF = 1E18;

int n, k, a[N], c[N][N];
ll f[N][N];
int opt[N][N];

void read(int &x) {
    x = 0;
    #define gch getchar()
    char ch;
    for(ch = gch; ch < '0' || ch > '9'; ) ch = gch;
    x = ch - '0';
    for(ch = gch; '0' <= ch && ch <= '9'; ch = gch) x = x*10 + ch - '0';
}

void enter() {
    scanf("%d %d", &n, &k);
    foru(i,1,n) scanf("%d", a+i), c[i][i] = a[i];
    foru(i,1,n-1) foru(j,i+1,n) c[i][j] = c[i][j-1] | a[j];
}

void solve() {
    foru(i,1,n) f[0][i] = -INF;
    foru(i,1,k) {
        opt[i][n+1] = n-1;
        ford(j,n,1) {
            f[i][j] = 0;
            foru(cut,opt[i-1][j],opt[i][j+1])
            if (f[i][j] < f[i-1][cut] + c[cut+1][j]) {
                f[i][j] = f[i-1][cut] + c[cut+1][j];
                opt[i][j] = cut;
            }
        }
    }
    cout << f[k][n] << "\n";
}

int main() {
    ////freopen("test.inp", "r", stdin);
    ///freopen("test.out", "w", stdout);
    int test;
    scanf("%d", &test);
    for(; test; --test) {
        enter();
        solve();
    }
}
