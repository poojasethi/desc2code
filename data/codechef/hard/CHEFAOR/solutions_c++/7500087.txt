#include <bits/stdc++.h>
#define rf freopen("in.in", "r", stdin)
#define wf freopen("out.out", "w", stdout)
#define rep(i, s, n) for(int i=int(s); i<=int(n); ++i)
using namespace std;
const int mx = 1e5+10;
 
int n, t, k;
int a[mx];
long long calc[5111][5111];
 
int main()
{
	//rf;// wf;
 
	scanf("%d", &t);
	while(t--)
	{
		memset(calc, 0, sizeof calc);
 
		scanf("%d %d", &n, &k);
		rep(i, 1, n)
			scanf("%d", &a[i]);
 
		rep(i, 1, n)
		{
			int cur = 0, next = 0;
			for(int j = i; j; --j)
			{
				next = cur | a[j];
				if(cur == next)
					continue;
 
				rep(l, 1, min(k-1, j-1))
					calc[i][l+1] = max(calc[j-1][l]+next, calc[i][l+1]);
 
				cur = next;
			}
			calc[i][1] = cur;
		}
		printf("%lld\n", calc[n][k]);
	}
 
	return 0;
}