#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#include<cmath>
using namespace std;
int a[101000];
int b[101000];
double sum[302000];
int d[101000],num[101000];
double ans;
int n,m,len;
double query(int d){
	double ans = 0;
	while (d){
		ans += sum[d];
		d -= d & (-d);
	}
	return ans;
}
void ins(int x,int d){
	while (x <= 100000){
		sum[x]+= d;
		x += x&(-x);
	}
}
void calc1(){
	memset(sum,0,sizeof(sum));
	for (int i = 1;i <= n;i++){
		ans += query(100000)-query(a[i]);
		ins(a[i],1);
	}
}
void calc2(){
	for (int i = 1;i <= m;i++){
		int j = i;
		while (b[j+1] == b[i]) j++;
		ans += (double)(i-1)/2*(j-i+1);
		d[++len] = b[i];num[len] = j - i + 1;
		i = j;
	}
}
void calc3(){
	memset(sum,0,sizeof(sum));
	for (int i = 1;i <= n;i++)
		ins(a[i],i);
	for (int i = 1;i <= len;i++){
		double s = query(d[i]-1);
		ans += (double)s/(n+1)*num[i];
	}
	memset(sum,0,sizeof(sum));
	for (int i = n;i >= 1;i--)
		ins(a[i],n - i + 1);
	for (int i = 1;i <= len;i++){
		double s = query(100000)-query(d[i]);
		ans += (double)s/(n+1)*num[i];
	}
}
int main(){
	int T;scanf("%d",&T);
	while (T--){
		ans = 0;len = 0;
		scanf("%d%d",&n,&m);
		for (int i = 1;i <= n;i++) scanf("%d",&a[i]);
		for (int i = 1;i <= m;i++) scanf("%d",&b[i]);
		sort(b+1,b+m+1);
		calc1();
		calc2();
		calc3();
		printf("%.9lf\n",ans);
	}
	return 0;
}
