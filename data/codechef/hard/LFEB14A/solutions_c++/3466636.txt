#include <iostream>
#include <cstring>
#include <cstdio>
#include <cmath>
#include <algorithm>

using namespace std;

const int maxn = 200000;

int T,n,m,a[maxn],b[maxn],c[maxn],d[maxn];
double ans;


int getsum(int k) {
    if (k == 0) return 0;
    int x = 0;
    while (k) {
          x += c[k];
          k -= k&-k;
    }
    return x;
}

void insert(int k) {
     while (k <= maxn/2) {
           c[k]++;
           k += k&-k;
     }
}

int main() {
    #ifndef ONLINE_JUDGE
    freopen("1.in","r",stdin);
    freopen("1.out","w",stdout);
    #endif
    scanf("%d",&T);
    for (int kase = 1;kase <= T; kase++) {
        scanf("%d%d",&n,&m); memset(c,0,sizeof(c)); ans = 0;
        for (int i = 1;i <= n; i++) scanf("%d",&a[i]);
        for (int i = 1;i <= m; i++) scanf("%d",&b[i]);
        for (int i = 1;i <= n; i++) {
             ans += (getsum(maxn/2)-getsum(a[i]));
             insert(a[i]);    
        }
        sort(b+1,b+m+1); d[1] = 0;
        for (int i = 2;i <= m; i++) {
             if (b[i] == b[i-1]) d[i] = d[i-1];
             else d[i] = i-1;
             ans += d[i]/2.0;
        }
        memset(c,0,sizeof(c));
        for (int i = 1;i <= m; i++) insert(b[i]);
        for (int i = 1;i <= n; i++) {
            int w1 = getsum(a[i]-1),w2 = getsum(maxn/2)-getsum(a[i]);
            ans += i*1.0/(n+1)*w2+(n+1-i)*1.0/(n+1)*w1;
        }
        printf("%.9lf\n",ans);
    }
    return 0;
}
