#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<vector>
#include<algorithm>
#include<cstring>
#include<iterator>
#define maxn 111111
#define mem(a,b) memset(a,b,sizeof a)
#define pb push_back
#define mp make_pair
#define F first
#define S second
#define sz(a) (int(a.size()))
#define step(i) (i&-i)

using namespace std;
const int mod=1e9+7;

int a[maxn],b[maxn];
int n,m;
int f[maxn];

void add(int i,int x){
    for(;i<=100000;i+=step(i))
        f[i]+=x;
}

int get(int i){
    int r=0;
    for(;i>0;i-=step(i))
        r+=f[i];
    return r;
}
int getr(int i){
    return get(100000)-get(i);
}

void solve(){
    cin>>n>>m;
    mem(f,0);
    for(int i=1;i<=n;++i)cin>>a[i];
    for(int i=1;i<=m;++i)cin>>b[i];
    double ans=0;
    for(int i=1;i<=n;++i){
        ans+=getr(a[i]);
        add(a[i],1);
    }
    mem(f,0);
    for(int i=1;i<=m;++i)add(b[i],1);
    for(int i=1;i<=m;++i){
        ans+=get(b[i]-1)/2.;
    }
    for(int i=1;i<=n;++i){
        ans+=1.*get(a[i]-1)*(n-i+1)/(n+1);
        ans+=1.*getr(a[i])*i/(n+1);
    }
    printf("%0.9f\n",ans);//cout<<ans<<endl;
}

int main(){
    //freopen("in","r",stdin);
    int t;
    cin>>t;
    while(t--)solve();



    return 0;
}
