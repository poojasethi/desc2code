#include<stdio.h>
#include<iostream>
#include<string.h>
#include<queue>
#include<algorithm>
#include<string>
#include<map>
#include<set>
#include<sstream>
#include<cmath>
using namespace std;
#define ll long long
#define ull unsigned long long
#define inf 0x3f3f3f3f
#define mod 1000000007
//const ll inf = 1000000000005LL;
#define pii pair<int,int>
#define vi vector<int>
#define all(x) x.begin(),x.end()
//#define mp make_pair
#define pb push_back
#define x first
#define y second
#define N 100010
int f[N],a[N],b[N];
void update(int x)
{
	while(x>0)f[x]++,x-=x&-x;
}
int query(int x)
{
	int ans=0;
	while(x<N)ans+=f[x],x+=x&-x;
	return ans;
}
ll x[N],y[N];
int main()
{
	int T,n,m,i,j,k;
	scanf("%d",&T);
	while(T--)
	{
		scanf("%d%d",&n,&m);
		for(i=0;i<n;i++)scanf("%d",&a[i]);
		for(i=0;i<m;i++)scanf("%d",&b[i]);
		memset(f,0,sizeof(f));
		ll ans1=0,ans2=0,ans3=0;
		for(i=0;i<n;i++)
		{
			ans1+=query(a[i]+1);
			update(a[i]);
		}
		sort(b,b+m);
		for(i=0;i<m;i++)
		{
			j=i;
			while(j<m&&b[j]==b[i])j++;
			ans2+=(j-i)*(ll)i;
			i=j-1;
		}
		for(i=0;i<N;i++)x[i]=y[i]=0;
		for(i=0;i<n;i++)
		{
			x[a[i]]+=(i+1);
			y[a[i]]+=(n-i);
		}
		for(i=2;i<N;i++)x[i]+=x[i-1];
		for(i=N-2;i>=1;i--)y[i]+=y[i+1];
		for(i=0;i<m;i++)
		ans3+=x[b[i]-1]+y[b[i]+1];
		printf("%.9lf\n",ans1+ans2/2.+ans3/(n+1.));
	}
}