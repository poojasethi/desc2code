#include <iostream>
#include <set>
#include <vector>
#define MOD 1000000007

#define pii pair<int,int>
using namespace std;

int l[1000005], r[1000006], pos[1000006];

long long fastpow(long long n, long long p)
{
        if(p == 1) return n;
        if(p % 2 == 0) {
            long long temp = fastpow(n, p/2);
            return (temp*temp)%MOD;
        }
        return (n*fastpow(n, p-1))%MOD;
}

int main()
{
    int n, m;

    cin >> n >> m;
    set<pii> s;
    for(int i = 0; i < m; i++) {
        cin >> l[i] >> r[i];
        l[i]--;
        r[i]--;
        s.insert(pii(l[i],r[i]));
    }

    int ans = 0;

    while(s.size()) {
        pii f = *(s.begin());
        ans++;
        vector<pii> v;
        while(s.size() && s.begin()->first == f.first) {
            v.push_back(pii(*(s.begin())));
            s.erase(s.begin());
        }
        for(int i = 1; i < v.size(); i++) {
            s.insert(pii(v[i-1].second+1,v[i].second));
        }
    }

    cout << fastpow(2,ans) << endl;
}
