#include <bits/stdc++.h>
using namespace std;
#define vi vector<int>
#define pii pair<int,int>
#define pb push_back
#define mp make_pair
#define all(x) x.begin(),x.end()
#define inf 1000000007
#define mod 1000000007
#define x first
#define y second
#define pi acos(-1.0)
#define DBG(x) cerr<<(#x)<<"="<<x<<"\n";
#define FOREACH(it,x) for(__typeof(x.begin()) it=x.begin();it!=x.end();it++)
#define ull unsigned long long
#define ll long long
#define N 250005

template <class T> inline void Min(T &a,T b){if(a>b)a=b;}
template <class T> inline void Max(T &a,T b){if(a<b)a=b;}

set<pii>s[N];
int f[N];
void upd(int x,int v){
    while(x<N)f[x]+=v,x+=x&-x;
}
int query(int x){
    int ans=0;
    while(x>0)ans+=f[x],x-=x&-x;
    return ans;
}
void upd(int l,int r,int x){
    set<pii>::iterator it,it1;
    it=s[x].lower_bound(mp(l,0));
    if(it!=s[x].begin()){
        it1=it;
        it1--;
        l=max(l,it1->y+1);
    }
    if(l>r)return;
    while(it!=s[x].end()){
        if(it->y>=r){
            r=min(r,it->x-1);
            break;
        }
        upd(it->x,-1);
        upd(it->y+1,1);
        s[x].erase(it);
        it=s[x].lower_bound(mp(l,0));
    }
    if(l<=r){
        upd(l,1);upd(r+1,-1);
        s[x].insert(mp(l,r));
    }
}
int main(){
    int T,i,j,k,n,m;
    scanf("%d%d",&n,&m);
    int l,r,x;
    while(m--){
        scanf("%d",&k);
        if(k==0){
            scanf("%d%d%d",&l,&r,&x);
            upd(l,r,x);
        }
        else{
            scanf("%d",&x);
            printf("%d\n",query(x));
        }
    }
    return 0;
}