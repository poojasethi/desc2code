#include <iostream>
#include <stdio.h>
#include <set>

using namespace std;
int readInt(){
	int num=0;
	char c=getchar_unlocked();
	while(c<33) c=getchar_unlocked();
	while(c>33){
		num=(num<<1)+(num<<3)+c-'0';
		c=getchar_unlocked();
	}
	return num;
}

#define MAXN 250000+10

set<pair<int,int> > nums[MAXN];
int bit[MAXN];

int query(int x){
	int ret=0;
	while(x){
		ret+=bit[x];
		x-=(x & (-x));
	}
	return ret;
}
void update(int x,int val){
	for(;x<=MAXN;x+=(x &(-x))){
		bit[x]+=val;
	}
}

void modify(int l,int r,int x){
	set<pair<int,int> >::iterator it = nums[x].lower_bound(make_pair(l+1,0));
	if(it !=nums[x].begin()){
		it--;
		if(it->second>=l){
			l=it->first;
		}
	}
	while(1){
		it=nums[x].lower_bound(make_pair(l,0));
		if(it==nums[x].end())
			break;
		if(it->first<=r){
			r=max(r,it->second);
			nums[x].erase(it);
			update(it->first,-1);
			update(it->second+1,1);
		}
		else{
			break;
		}
	}
	nums[x].insert(make_pair(l,r));
	update(l,1);
	update(r+1,-1);


}

int main(){
	int n,m;
	n=readInt();
	m=readInt();
	for(int i=0;i<n;i++){
		nums[i].clear();
	}
	int a,x,y,val;
	for(int i=0;i<m;i++){
		a=readInt();
		if(a==0){
			x=readInt();
			y=readInt();
			val=readInt();
			modify(x,y,val);


		}else{
			x=readInt();
			//print(query(x));
			printf("%d\n",query(x) );
		}

	}


}