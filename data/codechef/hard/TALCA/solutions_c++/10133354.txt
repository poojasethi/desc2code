#include<bits/stdc++.h>
using namespace std;
#define ll long long int
vector<ll>v[200001];
ll par[200001][20];
ll depth[200001];
ll logmax=18;
void dfs(ll cur,ll pa,ll dep)
{
    par[cur][0]=pa;
    depth[cur]=dep;
    for(ll i=0;i<v[cur].size();i++)
    {
        if(v[cur][i]!=pa)
        {
            dfs(v[cur][i],cur,dep+1);
        }
    }
}
ll lca(ll x,ll y)
{
    if(depth[x]>depth[y])swap(x,y);
    for(ll i=18;i>=0;i--)
    {
        if(depth[y]-depth[x]>=(1<<i))
        {
            y=par[y][i];
        }
    }
    if(x==y)return x;
    for(ll i=18;i>=0;i--)
    {
        if(par[x][i]!=par[y][i])
        {
            x=par[x][i];
            y=par[y][i];
        }
    }
    return par[y][0];
}
int main()
{
    ll n;
    cin>>n;
    for(ll i=0;i<n-1;i++)
    {
        ll x,y;
        cin>>x>>y;
        v[x].push_back(y);
        v[y].push_back(x);
    }
    memset(par,-1,sizeof(par));
    dfs(1,0,0);
    for(ll i=1;i<=logmax;i++)
    {
        for(ll j=1;j<=n;j++)
        {
            if(par[j][i-1]!=-1)
            {
                par[j][i]=par[par[j][i-1]][i-1];
            }
        }
    }
    ll q;
    cin>>q;
    while(q--)
    {
        ll x,y;ll r;
        cin>>r>>x>>y;
        ll lc=lca(x,y);
        //cout<<lc<<endl;
        //cout<<lca(x,y)<<" "<<lca(r,x)<<" "<<lca(r,y)<<endl;
        if(lca(lc,r)!=lc)cout<<lc<<endl;
        else
        {   //cout<<"here\n";
            ll rx=lca(r,x);
            ll ry=lca(r,y);
            if(rx==x and ry==y)
            {
                if(depth[x]>depth[y])cout<<x<<endl;
                else
                cout<<y<<endl;
            }
           else if(rx==r or ry==r)
            cout<<r<<endl;
            else if(rx==lc)cout<<ry<<endl;
            else cout<<rx<<endl;
        }
    }
}
 