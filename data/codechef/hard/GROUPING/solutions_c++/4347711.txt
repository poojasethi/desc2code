#include <iostream>
#include <cstdio>
#include <climits>
#include <algorithm>
#include <queue>
#include <cstring>
#include<string>
#include <cmath>
#include <vector>
#include <stack>
#include <set>
#include <map>
#include <deque>
#define SET(p) memset(p,-1,sizeof(p))
#define CLR(p) memset(p,0,sizeof(p))
#define LL long long int
#define ULL unsigned long long int
#define S(n)                    scanf("%d",&n)
#define Sl(n)                     scanf("%lld",&n)
#define Sf(n)                     scanf("%lf",&n)
#define Ss(n)                     scanf("%s",n)
using namespace std;
/*template <class T>
inline void r_f(T &p)
{
         char c;
         while (((c=getchar_unlocked()) < 48)||(c > 57));
         p=c-48;
         while ((c=getchar_unlocked()) >= 48 && c <= 57) p=p*10+c-48;
}*/
bool comp(pair<int,int> a,pair<int,int> b)
{
	return a.second > b.second;
}

int main()
{
    int t,i,j,n,k,m,x;
    #ifndef ONLINE_JUDGE
    freopen("example.txt","r",stdin);
    #endif
    S(t);
    while(t--)
    {
    	vector< pair<int,int> >v;
		S(n);
		S(m);
		S(k);
		for(i=0;i<n;i++)
		{
			S(x);
			v.push_back(make_pair(i,x));
		}
		sort(v.begin(),v.end(),comp);
//		for(i=0;i<n;i++)
//		cout<<v[i].first<<" "<<v[i].second<<endl;
		int arr[n];
		//cout<<"hh"<<endl;
		for(i=0;i<n;i++)
		{
			arr[v[i].first]=i;
		}
		//cout<<"hhhh"<<endl;
		vector<vector<int> >vec(n);
		vector<int>::iterator it;
		vector<int>count(n,0);
		//cout<<"hhh"<<endl;
		for(i=0;i<m;i++)
		{
		//	cout<<"kkkk"<<endl;
			S(j);
			S(x);
			vec[j].push_back(x);
			vec[x].push_back(j);			
		}
		//cout<<"hhhhhh"<<endl;
		int flag=0,num=0,j=0;
		vector<int>ans;
		for(i=0;i<k;i++)
		{
			
			if(flag>0)
			{
				int s=ans.size();
				int e=ans[s-1];
					for(int p=0;p<vec[e].size();p++)
					{
						count[vec[e][p]]--;
					}
				num--;
				ans.pop_back();
				j=arr[e];
				j++;
			}
		//	cout<<"hhhhhh"<<endl;
			for(;j<n;j++)
			{
				if(count[v[j].first]==num)
				{
					ans.push_back(v[j].first);
					num++;
					for(int p=0;p<vec[v[j].first].size();p++)
					{
						count[vec[v[j].first][p]]++;
					}		
				}
				
			}
			vector<int>ans2=ans;
			sort(ans2.begin(),ans2.end());
			for(int z=0;z<ans2.size();z++)
			printf("%d ",ans2[z]);
			printf("\n");
			flag++;
		//	cout<<flag<<" ";
		}
		printf("\n");
	}

return 0;
}


