#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstdlib>
#include <cstring>
#include <string>
#include <vector>
#include <queue>
#include <stack>
#include <set>
#include <map>
#include <cmath>
#include <bitset>
#pragma comment(linker,"/STACK:16777216")
#define inf 1000000000
#define MP make_pair
using namespace std;
typedef long long L;
typedef unsigned long long UL;
int t,n,m,K,say,stop;
pair<int,int> A[10001];
bitset<10000> B[10001];
vector<int> res;


void create(int k,int idx){
    if(stop)return;
    if(k==-1){
        say++;
        set<int> ms;
        for(int i=0;i<idx;i++)ms.insert(res[i]);
        for(set<int>::iterator it=ms.begin();it!=ms.end();it++)
            printf("%d ",(*it));
        printf("\n");
        if(say==K)stop=1;
    }
    else{

        for(int p=k;p>=0;p--){
            int can=1;
            for(int i=0;i<idx&&can;i++)
                if(!B[res[i]][A[p].second])
                    can=0;

            if(can){
                res[idx]=A[p].second;
                create(p-1,idx+1);
            }
        }
        create(-1,idx);
    }
}

int main()
{

    int u,v;
    //cin>>t;
    scanf("%d",&t);

    while(t--){
        //cin>>n>>m>>K;
        scanf("%d%d%d",&n,&m,&K);

        for(int i=0;i<n;i++){
            //cin>>A[i].first;
            scanf("%d",&A[i].first);
            A[i].second=i;
        }
        sort(A,A+n);
        for(int i=0;i<n;i++)B[i].reset();

        for(int i=0;i<m;i++){
            //cin>>u>>v;
            scanf("%d%d",&u,&v);
            B[u][v]=1; B[v][u]=1;
        }


        stop=say=0;
        res.resize(n);

        create(n-1,0);
        //cout<<endl;
        printf("\n");
    }


    return 0;
}
