#include<cstdio>
#include<algorithm>
#define rep(i,n) for(int i=0;i<n;++i)
#define For(i,n) for(int i=1;i<=n;++i)
#define FOR(i,a,b) for(int i=a;i<=b;++i)
using namespace std;
const int N=100010,logN=18;
int n,m,ans,pre,l,r,mid,aa,bb,tot,sz,a[N],b[N],id[N],rt[N],L[N*logN],R[N*logN],s[N*logN];
bool cmp(int x,int y)
{
    return a[x]<a[y];
}
int Change(int x,int l,int r,int p,int d)
{
    int now=++sz,m=(l+r)>>1;
    s[now]=s[x]+d;L[now]=L[x];R[now]=R[x];
    if (l==r) return now;
    if (p<=m) L[now]=Change(L[x],l,m,p,d);
         else R[now]=Change(R[x],m+1,r,p,d);
    return now;
}
int Query(int x,int l,int r)
{
    if (aa<=l && r<=bb) return s[x];
    int m=(l+r)>>1;
    int c=0;
    if (aa<=m) c+=Query(L[x],l,m);
    if (m+1<=bb) c+=Query(R[x],m+1,r);
    return c;
}
int main()
{
    scanf("%d",&n);
    For(i,n)
    {
        scanf("%d",&a[i]);
        id[i]=i;
    }
    sort(id+1,id+n+1,cmp);
    For(i,n)
    {
        b[++tot]=a[id[i]];
        int j=i;
        rt[tot]=Change(rt[tot-1],1,n,id[j],a[id[j]]);
        while (a[id[j+1]]==a[id[i]])
        {
            j++;
            rt[tot]=Change(rt[tot],1,n,id[j],a[id[j]]);
        }
        i=j;
    }
    scanf("%d",&m);
    For(i,m)
    {
        scanf("%d%d",&aa,&bb);
        ans=pre=0;
        for(;;)
        {
            l=0;r=tot;
            while(l<r)
            {
                mid=(l+r+1)>>1;
                if (b[mid]<=ans+1) l=mid;
                              else r=mid-1;
            }
            if (l==pre) break;
            pre=l;
            ans=Query(rt[l],1,n);
        }
        printf("%d\n",ans+1);
    }
    return 0;
}
