#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
typedef long long int64;
#define LLD "%lld"

int64 mulmod(int64 a,int64 b,int64 mod) {
	//if(a<0||a>=mod)
	//    puts("A"),scanf("%*s");
	int64 ret=0;
	for(;b;b>>=1) {
		//printf("a=%I64d b=%I64d ret=%I64d\n",a,b,ret);
		if(b&1)
			if((ret+=a)>=mod)
				ret-=mod;
		if((a+=a)>=mod)
		    a-=mod;
	}
	//if(ret<0)
	//    puts("B"),scanf("%*s");
	return ret;
}

const int p10[]={1,10,100,1000,10000,100000,1000000};
int64 poly[1000];
pair<int64,int> l1[1000000],l2[1000000];
int main() {
	int n;
	int64 mul,mod,R;
	scanf("%d"LLD LLD LLD,&n,&mul,&mod,&R);
	//n=12,mul=101,mod=111,R=93;
	mul%=mod;
	
	for(int d0=0;d0<10;d0++)
	for(int d1=0;d1<10;d1++)
	for(int d2=0;d2<10;d2++) {
	    int64 ret=mulmod(mul,mulmod(mul,d2,mod)+d1,mod)+d0;
	    if(ret>=mod)
	        ret-=mod;
		poly[d0+d1*10+d2*100]=ret;
	}

	int n1=n/2,n2=n-n1;
	int64 mul3=1,mulp=1;
	for(int i=0;i<3;i++)
	    mul3=mulmod(mul3,mul,mod);
    for(int i=0;i<n2;i++)
	    mulp=mulmod(mulp,mul,mod);

	for(int i=0;i<p10[n1];i++) {
	    int64 ret=mulmod(mulp,mulmod(mul3,poly[i/1000],mod)+poly[i%1000],mod);
	    l1[i]=make_pair(ret,i);
	    //printf("Left %d : "LLD"\n",i,ret);
	}
    for(int i=0;i<p10[n2];i++) {
		int64 ret=R-(mulmod(mul3,poly[i/1000],mod)+poly[i%1000]);
		while(ret<0)
		    ret+=mod;
        l2[i]=make_pair(ret,i);
    	//printf("Right %d : "LLD"\n",i,ret);
	}
	sort(l1,l1+p10[n1]);
	sort(l2,l2+p10[n2]);

	int A=1000000,B=0;
	for(int i=0,j=0;i<p10[n1];i++) {
		while(j<p10[n2]&&l2[j].first<l1[i].first)
		    j++;
		if(j<p10[n2]&&l2[j].first==l1[i].first) {
			if(l1[i].second<A||(l1[i].second==A&&l2[j].second<B))
			    A=l1[i].second,B=l2[j].second;
			//printf(LLD"\n",int64(l1[i].second)*p10[n2]+l2[j].second);
			//printf("%d %d\n",l1[i].second,l2[j].second);
		}
	}
	int s[20],sn=0;
	for(int val=B,j=0;j<n2;j++,val/=10)
		s[++sn]=val%10;
    for(int val=A,j=0;j<n1;j++,val/=10)
		s[++sn]=val%10;
	for(int i=sn;i>=1;i--)
	    putchar('0'+s[i]);
	puts("");
	scanf("%*s");
}
