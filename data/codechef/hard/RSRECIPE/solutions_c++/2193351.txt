#include<cstdio>
#include<iostream>
#include<vector>
#include<cstring>
#include<algorithm>
#include<set>
#include<cmath>
#include<bitset>
#include<map>
#include<stack>
#define test(t) while(t--)
#define cin(n) scanf("%d",&n)
#define cout(n) printf("%d\n",n)
#define rep(i,a,n) for(i=a;i<n;i++)
#define vi vector<int>
#define vii vector< pair<int,int> >
#define mii map<int,int>
#define pb push_back
#define mp make_pair
#define imax 1000000007
#define ill long long
#define Nmax 65536
#define mod 500009
using namespace std;
int n,m,x,y,z,f=0;
vector<bool> vis;vector<ill> s;vector<vector<  pair<ill,ill> > > e;
void dfs(int i)
{
    int j;
    if(vis[i]) return;
    vis[i]=1;
    //cout<<i<<" "<<s[i]<<"\n";
    for(j=0;j<e[i].size();j++)
    {
        //cout<<i<<" "<<e[i][j].first<<" "<<vis[e[i][j].first]<<" "<<s[e[i][j].first]<<" "<<s[i]+e[i][j].second<<"\n";
        if(!vis[e[i][j].first]) s[e[i][j].first]=s[i]+e[i][j].second,dfs(e[i][j].first);
        if(vis[e[i][j].first] && s[e[i][j].first] !=s[i]+e[i][j].second) {f=1;return;}
    }
}
int main()
{
    int i;
    scanf("%d%d",&n,&m);
    vis.resize(n+1,false);
    s.resize(n+1);
    e.resize(n+1);
    for(i=0;i<m;i++)
    {
        scanf("%d%d%d",&x,&y,&z);
        e[x-1].pb(mp(y,z));
        e[y].pb(mp(x-1,-z));
    }
    for(i=0;i<=n;i++)
    {
        if(!vis[i])
        {
            s[i]=0;
            dfs(i);
            if(f){cout<<"-1";return 0;}
        }
    }
    for(i=1;i<=n;i++)
    {
        printf("%d ",s[i]-s[i-1]);
    }
    return 0;
}
