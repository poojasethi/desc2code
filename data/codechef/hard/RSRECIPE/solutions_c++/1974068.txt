#include <cstdio>
#include <cstring>
#include <algorithm>
#include <iostream>
#include <climits>
#include <numeric>
#include <vector>
#include <cmath>
using namespace std;
const int N = 65537;
#define ll long long
#define mp make_pair
#define pb push_back
#define rep(i,n) for(int i=0;i<n;i++)
#define all(a)  a.begin(),a.end()
#define ESP (1e-9)
#define clear(freq) memset(freq,0,sizeof(freq))
struct edge
{
 int v,c;
 edge(){}
 edge(int _v,int _c):v(_v),c(_c){}
};
vector<edge>a[N];int s[N],v[N];
int dfs(int i,ll c)
{
 if(v[i])return s[i]==c;
 v[i]=1;s[i]=c;
 for(int j=0;j<a[i].size();j++)
 if(!dfs(a[i][j].v,c+a[i][j].c))return 0;
 return 1;
}
int main()
{
	//freopen("in.txt","r",stdin);
	int T,i,j,m,d,n;
	while(~scanf("%d%d",&n,&m))
	{
	 for(i=0;i<m;i++)
	 {
	  int u,v,c;
	  scanf("%d%d%d",&u,&v,&c);
	  a[u-1].pb(edge(v,c));
	  a[v].pb(edge(u-1,-c));
	 }
	 memset(v,0,sizeof(v));
	 for(i=0;i<=n;i++)
	 if(!v[i])
	 if(!dfs(i,0)){printf("-1\n");return 0;}
	 for(i=0;i<n;i++)
	 printf("%d ",s[i+1]-s[i]);
	 puts("");
	}
	return 0;
}
