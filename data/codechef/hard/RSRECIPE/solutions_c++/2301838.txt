#include <list>
#include <iostream>
#include <fstream>
#include <stdio.h>
#include <algorithm>
#include <set>
#include <vector>
#include <map>
#include <queue>
#include <list>
#include <math.h>
#include <string>
#include <string.h>
#include <stdlib.h>
#include <time.h>
#include <deque>
#include <iomanip>

#define pb push_back
#define mp make_pair
#define stop exit(0)
#define F first
#define S second
#define inf 2123456789

using namespace std;

int n,m,x,y,z,w=0;
vector <int> a[70005],b[70005];
bool f[70005];
long long t[70005];

void solve(int v){
        f[v]=1;
        for(int i=0; i<a[v].size(); i++){
                if(!f[a[v][i]]){
                    t[a[v][i]]=t[v]+b[v][i];
                    solve(a[v][i]);
                    }
                else if(t[a[v][i]]!=t[v]+b[v][i]){printf("-1\n");stop;}
                }
        return;
        }

int main(){
           // freopen("input.txt","r",stdin);
           // freopen("output.txt","w",stdout);
            scanf("%d%d",&n,&m);
            for(int i=0; i<m; i++){
                    scanf("%d%d%d",&x,&y,&z);
                    a[x-1].pb(y);b[x-1].pb(z);
                    a[y].pb(x-1);b[y].pb(-z);
                    }
            for(int i=1; i<=n; i++)
                if(!f[i])solve(i);
            for(int i=1; i<=n; i++)
                    printf("%lld ",t[i]-t[i-1]);
            return 0;
}
