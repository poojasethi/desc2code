#include <bits/stdc++.h>
#define filein(t) freopen(t, "r", stdin)
#define fileout(t) freopen(t, "w", stdout)
#define ll long long
#define mp make_pair
#define f first
#define s second
#define N 200007
#define cs 1373
#define BIT(i, n) ( (n >> i) & 1 )
#define ln 1e9+1
#define oo 1000000007
#define Pa pair <int, int>

using namespace std;

int ok[N], n, m;
vector < pair <int, ll> > a[N];
ll S[N];

void DFS(int u)
{
    ok[u] = 1;
    for(int i=0; i<a[u].size(); i++)
    {
        int v = a[u][i].f;
        ll W = a[u][i].s;
        if(ok[v] == 0)
        {
            S[v] = S[u] + W;
            DFS(v);
        }
        else
        {
            if(S[v] != S[u] + W)
            {
                cout << -1;
                exit(0);
            }
        }
    }
}

int main()
{
    //filein("RSRECIPE.inp"); fileout("RSRECIPE.out");
    int x, y, V;
    cin >> n >> m;
    for(int i=1; i<=m; i++)
    {
        scanf("%d%d%d", &x, &y, &V); x--;
        a[x].push_back(mp(y, V));
        a[y].push_back(mp(x, -V));
    }
    for(int i=0; i<=n; i++)
        if(ok[i] == 0)
            DFS(i);
    for(int i=1; i<=n; i++)
        printf("%lld ", S[i] - S[i-1]);
}
