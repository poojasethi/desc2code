#include<bits/stdc++.h>
#define gc getchar_unlocked
using namespace std;
void scanint(int &x)
{
register int c = gc();
x = 0;
int neg = 0;
for(;((c<48 || c>57) && c != '-');c = gc());
if(c=='-') {neg=1;c=gc();}
for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
if(neg) x=-x;
} 

#define all(a) a.begin(),a.end()
 
bool vis[1001];
vector<int> adj[1001];
int match[1001];
 
bool bpm(int u){
if(vis[u]) return false;
vis[u] = 1;
int sz = adj[u].size(),i,v;
for(i = 0;i<sz;i++){
v = adj[u][i];
if(match[v]==-1){
match[v] = u;
return true;
}
}
for(i = 0;i<sz;i++){
v = adj[u][i];
if(bpm(match[v])){
match[v] = u;
return true;
}
}
return false;
}

int main(){
int n,t,i,x[1001],y[1001];
scanint(t);

while(t--)
{
vector<int> setx,sety;
 
scanint(n);

for(i = 0;i<n;i++){
scanint(x[i]);
scanint(y[i]);

setx.push_back(x[i]);
sety.push_back(y[i]);
}
sort(all(setx));
sort(all(sety));
int N = setx.size();

for(i = 0;i<N;i++)
adj[i].clear();
for(i = 0;i<n;i++){
x[i] = lower_bound(all(setx),x[i]) - setx.begin();
y[i] = lower_bound(all(sety),y[i]) - sety.begin();
adj[x[i]].push_back(y[i]);
}
int cnt = 0;
memset(match,-1,sizeof(match));

for(i = 0;i<N;i++){
memset(vis,0,sizeof(vis));
if(bpm(i))
cnt++;
}
printf("%d\n",cnt);
}
 
return 0;
}