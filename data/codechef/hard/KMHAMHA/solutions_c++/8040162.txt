#include <bits/stdc++.h>

using namespace std;

#define lld long long
#define mod 1000000007
#define INF (int)1e9
#define s(n) scanf("%d", &n)
#define sc(n) scanf("%c", &n)
#define sl(n) scanf("%lld", &n)
#define sf(n) scanf("%f", &n)
#define ss(n) scanf("%s", n);
#define all(a) a.begin(), a.end()
#define pii pair<int, int>
#define fi first
#define se second
#define pb push_back
#define mp make_pair
#define sq(x) ((x)*(x))
#define mset(x,v) memset(x,v,sizeof(x))
#define PI 3.1415926535897932384626

int a[1005][1005], matchl[1005], matchr[1005], vis[1005], n;
map<int, int> mx, my;

int bpm(int u)
{
    if (u < 0)
        return 0;
    for (int i = 0; i < n; i++) {
        if (a[u][i] == 1) {
            if (vis[i])
                continue;
            vis[i] = 1;
            if (matchr[i] < 0 || bpm(matchr[i])) {
                matchr[i] = u;
                matchl[u] = i;
                return 1;
            }
        }
    }

    return 0;
}

int main()
{
    int t;
    s(t);

    while (t--) {
        s(n);
        mset(a, 0);
        vector<pii> req;
        int i, x, y, cntx = 0, cnty = 0;
        mx.clear(), my.clear();

        for (i = 0; i < n; i++) {
            s(x), s(y);
            req.pb(mp(x, y));
            if (mx[x] == 0)
                mx[x] = cntx++;
            if (my[y] == 0)
                my[y] = cnty++;
        }

        for (i = 0; i < req.size(); i++) {
            x = mx[req[i].fi];
            y = my[req[i].se];
            a[x][y] = 1;
        }

        mset(matchl, -1);
        mset(matchr, -1);
        int cnt = 0;

        for (i = 0; i < n; i++) {
            mset(vis, 0);
            //cout << i << endl;
            if (bpm(i))
                cnt++;
        }

        cout << cnt << endl;
    }

    return 0;
}
