#include<cstdio>
#include<iostream>
#include<algorithm>
#include<vector>
#include<set>
#include<cstring>
#include<cmath>
#include<map>
#include<queue>

using namespace std;
#define mod 1000000007
typedef long long ll;

ll power1(ll x, ll y)
{
    ll temp;
    if( y == 0)
        return 1;
    temp = power1(x, y/2)%mod;
    if (y%2 == 0)
        return (temp%mod * temp%mod)%mod;
    else
        return ((x%mod)*(temp%mod * temp%mod)%mod)%mod;
}
int main()
{
	int tc;
	scanf("%d",&tc);
	while(tc--)
	{
		ll n,k;
		scanf("%lld %lld",&n,&k);
		if(k>=2)
		{
			ll v1 = (k-1+mod)%mod;
			ll v2 = (k-2+mod)%mod;
			ll v3 = (v2*v2)%mod;
			v3    = (v1 + v3)%mod;
			ll p1 = power1(v3,n-1);
			ll ans = (p1*v1)%mod;
			ans = (ans*k)%mod;			
			printf("%lld\n",ans);
		}
		else
		{
			ll v1 = (k-1+mod)%mod;
			ll p1 = power1(v1,n);
			ll ans = (k*p1)%mod;
			printf("%lld\n",ans);
		}
	}
	return 0;
}