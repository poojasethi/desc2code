from sys import stdin
 
MOD = 1000000007
 
for trial in xrange(int(stdin.readline())):
    N,K = map(int,stdin.readline().split())
    Kmod = K%MOD
    K1mod=(K-1)%MOD
    K2mod=(K-2)%MOD
    if K==1: print 0
    elif K==2: print 2
    else:
        inner = ((Kmod*K1mod*K1mod)%MOD + (Kmod*K1mod*K2mod*K2mod)%MOD)%MOD
        if N==1: print (K*(K-1))%MOD
        elif N==2: print inner
        else: print ((inner)*pow(K**2-3*K+3,N-2,MOD))%MOD 