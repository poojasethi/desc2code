#include <cstdio>
#include <cstdlib>
#include <iostream>

using namespace std;

int C[70], casos, base, son;
long long D[70][505][55], pasa=1000000000000000010LL, cual, va, en, suma;

void bin(int dnde, int quedan, int caben){
    if(dnde==0)
        D[dnde][quedan][caben]= quedan==0 ? 2 : 1;
    else {
        D[dnde][quedan][caben]=1;
        for(int i=0; i<=quedan and i<=caben; i++){
            if(D[dnde-1][quedan-i][caben]==0)
                bin(dnde-1, quedan-i, caben);
            D[dnde][quedan][caben]+=D[dnde-1][quedan-i][caben]-1;
            if(D[dnde-1][quedan-i][caben]==-1 or D[dnde][quedan][caben]>pasa){
                D[dnde][quedan][caben]=-1;
                break;
            }
        }
    }
}

long long bi(int n, int k, int esp){
    if(D[n][k][esp]==0){
        bin(n, k, esp);
    }
    if(D[n][k][esp]==-1)
        return pasa+1;
    else
        return D[n][k][esp]-1;
}

int main()
{
    scanf("%d",&casos);
    while(casos--){
        scanf("%d%d%lld",&base,&son,&cual);
        for(int i=64; i>0; i--){
            va=0;
            for(int e=0; e<base and e<=son; e++){
                va+=bi(i-1, son-e, base-1);
                if(cual<=va){
                    cual=cual-va+bi(i-1, son-e, base-1);
                    C[i]=e;
                    son-=e;
                    break;
                }

            }
        }
        en=1;
        suma=0;
        for(int i=1; i<=64; i++){
            suma+=en*C[i];
            en*=base;
        }
        printf("%lld\n",suma);
    }
    return 0;
}
