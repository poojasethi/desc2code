#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cmath>
using namespace std;
int others[1005],chef[1005],given[1005];
void quicksort(int l,int r)
{	
	int v,i,j,t;
	if(r>l)
	{
		v=chef[r];i=l-1;j=r;	
		for(;;)
		{
			while(chef[++i]<v);
			while(chef[--j]>v);
			if (i>=j) break;
			t=chef[i];chef[i]=chef[j];chef[j]=t;
			t=others[i];others[i]=others[j];others[j]=t;
		} 
		t=chef[i];chef[i]=chef[r];chef[r]=t;
		t=others[i];others[i]=others[r];others[r]=t;
		quicksort(l,i-1);
		quicksort(i+1,r);
	}
}	
int main()
{
	//freopen("example.txt","r",stdin);
	int n,t;
	long int i,j,k,Time,maxi,timemin,timei,timej;
	long int start,fini,temp;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%d",&n);
		for(i=0;i<n;i++)
			scanf("%d%d",&others[i],&chef[i]);
		quicksort(0,n-1);
		/*for(i=0;i<n;i++)
			printf("%d %d\n",others[i],chef[i]);*/
		timei=chef[0];
		maxi=0;
		for(i=1;i<n;i++)
		{	
			maxi=max((int)maxi,chef[i]);
			timei+=chef[i];
		}
		maxi=max(maxi,(long int)ceil((float)timei/2));
		start=0;fini=maxi;
		while(start<=fini)
		{
			Time=start+(fini-start)/2;
			//cout<<start<<"    "<<Time<<"   "<<fini<<endl;
			maxi=0;
			for(i=0;i<n;i++)
			{
				if(others[i]<=Time)
					given[i]=1;
				else
				{
					given[i]=0;
					maxi=max((int)maxi,chef[i]);
				}
			}
			temp=0;
			for(i=0;i<n;i++)
			{
				if(!given[i])
					temp+=chef[i];
			}
			temp=ceil((float)temp/2);
			if(temp<maxi)
				temp=maxi;
			//cout<<"maxi"<<maxi<<endl;
			if(temp<=Time)
			{
				timemin=Time;
				fini=Time-1;
			}
			else
				start=Time+1;
		}
		cout<<timemin<<endl;
	}
	return 0;
} 