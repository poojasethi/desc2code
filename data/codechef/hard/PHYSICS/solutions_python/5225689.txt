test=input()

while test>0:
    b=[]
    s={}
    test-=1
    n,f=map(int,raw_input().split())
    ar=map(int,raw_input().split())
    count=0
    
    for i in ar:
        h=i
        while h%f==0:
            h/=f
        b.append(h)
        s[h]=0
    for i in b:
        s[i]+=1
    for i in s:
        count+=(s[i]*(s[i]-1))/2
    print count
