for t in range(int(raw_input())):
    n,f=map(long,raw_input().split())
    a=map(long,raw_input().split())
    l=[]
    d={}
    for i in a:
        k=i
        while k%f==0:
            k/=f
        l.append(k)
        d[k]=0
    for i in l:
        d[i]+=1
    ans=0L
    for i in d:
        ans+=(d[i]*(d[i]-1))/2
    print ans
