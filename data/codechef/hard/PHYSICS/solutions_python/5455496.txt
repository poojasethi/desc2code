for _ in xrange(int(raw_input())):
    n,f=map(int,raw_input().split())
    s=map(int,raw_input().split())
    lst=[]
    dct={}
    for i in s:
        k=i
        while k%f==0:
            k/=f
        dct[k]=0
        lst.append(k)
    for i in lst:
        dct[i]+=1
    ans=0
    for i in dct:
        ans+=dct[i]*(dct[i]-1)/2
    print ans