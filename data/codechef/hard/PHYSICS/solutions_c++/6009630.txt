#include<iostream>
#include<algorithm>
using namespace std;
int main()
{
 int tc,n,f,i,a;
 cin>>tc;
 while(tc--)
 {
  cin>>n>>f;
  int arr[n];
  for(i=0;i<n;i++)
  {
   cin>>a;
   while(a%f==0)
        a=a/f;
   arr[i]=a;
  }
  sort(arr,arr+n);
  int ans=0,c=1;
  for(i=0;i<n;i++)
    {
      if(arr[i]==arr[i+1])
      {
      ans=ans+c;
      c++;
      }
      else
      c=1;
    }

   cout<<ans<<"\n";
 }
 return 0;
}
