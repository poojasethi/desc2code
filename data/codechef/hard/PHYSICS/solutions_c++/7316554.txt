#include<bits/stdc++.h>
using namespace std;

map<long long, long long> m;

int main() {
    int test;
    scanf("%d", &test);
    while(test--) {
        long long n, f;
        scanf("%lld %lld", &n, &f);
        for(int i=0;i<n;i++) {
            long long num;
            scanf("%lld", &num);
            while(num%f==0) {
                num/=f;
            }
            m[num]++;
        }
        map<long long, long long> :: iterator it;
        long long res=0;
        for(it=m.begin();it!=m.end();it++) {
            long long ans=it->second;
            res+=(ans*(ans-1))/2;
        }
        printf("%lld\n", res);
        m.clear();
    }
}
