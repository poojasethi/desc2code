#include <bits/stdc++.h>
#define maxn 10001


using namespace std;

int n;
double F, h[maxn];

void read_in() {
    cin >> n >> F;
    for(int i=1;i<=n;i++) cin >> h[i];
}

void solve() {
    sort(h+1,h+n+1);
    int ans=0;
    for(int i=1;i<=n;i++) {
        double x=h[i];
        while (x>=h[1]) {
            ans+=upper_bound(h+1,h+n+1,x/F)-lower_bound(h+1,h+n+1,x/F);
            x/=F;
        }
    }
    int d=0;
    for(int i=1;i<=n;i++) d+=upper_bound(h+1,h+n+1,h[i])-lower_bound(h+1,h+n+1,h[i])-1;
    ans+=d/2;
    cout << ans << endl;
}

int main() {
    #ifndef ONLINE_JUDGE
    freopen("inp.txt","r",stdin);
    freopen("out.txt","w",stdout);
    #endif // ONLINE_JUDGE
    ios::sync_with_stdio(false);
    int T; cin >> T;
    while (T--) {
        read_in();
        solve();
    }
}
