#include <iostream>
#include<cstdio>
#include<cmath>
#include<algorithm>
#include<vector>
#include<map>
#define mod 1000000007
#define ll long long int
using namespace std;
ll A[10010];
ll in(){
    ll r=0,c;for(c=getchar_unlocked();
c<=32;c=getchar_unlocked());
if(c=='-')
    return -in();
for(;c>32;r=(r<<1)+(r<<3)+c-'0',c=getchar_unlocked());return r;}
int main() {
    ll t,n,ans,count,f,i,a,j;
    t=in();
    while(t>0)
    {
        t--;
        n=in();
        f=in();
        for(i=0;i<n;i++)
        {
            a=in();
            while(a%f==0)
                a=a/f;
            A[i]=a;
        }
        sort(A,A+n);
        ans=0;
        for(i=0;i<n;)
        {
            count=1;
            for(j=i+1;j<n;j++)
            {
                if(A[j]!=A[i])
                    break;
                    count++;
            }
            ans+=((count)*(count-1))/2;
            i=j;
        }
        printf("%lld\n",ans);
    }
}
