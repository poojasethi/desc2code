#include <vector>
#include <map>
#include <cassert>
#include <string.h>
#include <iostream>
#include <stdio.h>
#include <algorithm>

int main()
{
	int T;
	scanf("%d",&T);
	while(T--)
	{
		int N,F, v;
		scanf("%d %d",&N, &F);
		std::map<int,int> res;
		for(int i=0;i<N;++i)
		{
			scanf("%d",&v);
			while(v%F==0)
				v/=F;
			++res[v];
		}
		int r=0;
		for(std::map<int,int>::iterator i=res.begin();i!=res.end();++i)
		{
			r+=i->second*(i->second-1)/2;
		//	printf(" %d\n", i->second);
		}
		printf("%d\n", r);
	}
	
	return 0;
}
