#include<cstring>
#include<cstdlib>
#include<algorithm>
#include<cstdio>
#include<iostream>
#define valid(x,y) 1<=x && x<=n && 1<=y && y<=n
using namespace std;

int n;
int f[1005][1005]={0};
int r[1005]={0},c[1005]={0},rpc[2005]={0},tmp2[3000]={0};
int *rmc=tmp2+1500;
void getn(int &x){
	char c;while((c=getchar())<'0'||c>'9');x=c-'0';
	while((c=getchar())>='0'&&c<='9')x=x*10+c-'0';
}
int dx[8]={2,2,1,1,-1,-1,-2,-2};
int dy[8]={1,-1,2,-2,2,-2,1,-1};

int main()
{
	int tes;
	scanf("%d",&tes);
	for (int i=1;i<=tes;i++){		
		int m;scanf("%d%d",&n,&m);
		int ans=0;
		while(m--){
			int x,y;getn(x);getn(y);
			f[x][y]=i;
			r[x]=c[y]=rpc[x+y]=rmc[x-y]=i;
		}
		for (int x=1;x<=n;x++)if(r[x]!=i)
			for (int y=1;y<=n;y++)if(c[y]!=i && rpc[x+y]!=i && rmc[x-y]!=i){
				int no=0;
				for (int k=0;k<8 && no<2;k++)
					if(valid(x+dx[k],y+dy[k]) && f[x+dx[k]][y+dy[k]]==i)no++;
				if(no>=2)ans++;
			}
		printf("%d\n",ans);
	}
	return 0;
}
