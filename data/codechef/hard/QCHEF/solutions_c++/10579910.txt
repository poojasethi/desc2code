#include <bits/stdc++.h>
#define For(i,a,b)	for(int i=(a),_b =(b);i<=_b;++i)
#define bug(x) cout<<"bug says:"<<x<<'\n'
#define line cout<<'\n'
#define loop(a,x)	for(int x=0;x<(int)a.size();++x)cout<<(a)[x]<<' ';
#define nenezsnp cout<<"I LOVE NENZSNP"<<'\n'
using namespace std;
int n,m,k , S;
const int M = 100001;
const int sq = sqrt(M);
int a[M] , LEFT[M] , ans[320][M];
vector<vector<int> > pos;
int f(int le,int r){
	int ans = 0;
	int num = le/S;
	for(int i=le;i<=min ((num+1)*S,n);++i){
		if (i > r) break;
		int value = upper_bound(pos[a[i]].begin() , pos[a[i]].end(), r) - pos[a[i]].begin();
		ans = max (ans , pos[a[i]][value-1] - i);
	}
	return ans;
}
int main(){
	ios_base::sync_with_stdio(false);
	scanf("%d %d %d",&n , &m,&k);pos.assign (m+1 , vector<int>() );
	For(i,1,n)	{scanf("%d",&a[i]) ; pos[a[i]].push_back(i); }
	 S = sqrt(n);
	for(int i=0;i*S+1<=n;++i){
		int L = i*S + 1;
		memset (LEFT ,0,sizeof(LEFT));
		for(int j=L ; j <=n ;++j){
			if (LEFT[a[j]] == 0)	LEFT[a[j]] = j;
			ans[i][j] = max (ans[i][j-1] , j - LEFT[a[j]]);		
		}
	}
	For(i,1,n) pos[a[i]].push_back(n+1);

	while (k--){
		int l,r;	scanf("%d %d",&l,&r);
		printf("%d\n", max (ans[l/S+1][r] , f(l,r)) );
	}
}