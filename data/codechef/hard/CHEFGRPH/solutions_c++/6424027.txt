#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
#include<string>
#include<vector>
#include<map>

#define f first
#define s second
#define pb push_back

using namespace std;

typedef pair<int,int> pr;
typedef long long ll;


const ll mod = 1000000007;
ll arr[100002];
map<ll,ll> h;
vector<int> adj[100002],adj1[100002];

ll pow1(ll a,ll b)
{
	ll y;

	if(b <= 0)
		return 1;
	if(b == 1)
		return a;
	y = pow1(a,b/2); 
	if(b%2 == 1)
	{
		return (((y*y)%mod)*a)%mod;				
	}
	else
		return (y*y)%mod;
	
}

int main()
{
	ll n,m,k,a,b,c,d,x,y,prev,ans,i,cnt,res,prev1,sz;

	scanf("%lld %lld %lld",&n,&m,&k);
	cnt = 1;
	for(i = 0;i < k;i++)
	{
		scanf("%lld %lld %lld %lld",&a,&b,&c,&d);
		x = (a*m+b);
		y = (c*m+d);
		if(!h[x])
		{
			h[x] = cnt++;
		}	
		if(!h[y])
		{
			h[y] = cnt++;
		}
		adj[h[x]].pb(h[y]);	
		adj1[h[y]].pb(h[x]);

	}	
		
	std::map<ll,ll>::iterator it,it1;
	
	
	prev = 0;
	ans = 1;
	res = 1;
	
	for(it = h.begin();it != h.end();++it)
	{
		a = it->first;
		b = it->second;
		x = a/m;
		if(adj1[b].size() != 0)
		{
			break;
		}
		y = pow1(m,x-1-prev);
		ans = (ans*y)%mod;
		//cout<<ans<<" "<<x<<endl;
		sz = adj[b].size();
		//cout<<sz<<endl;
		for(i  = 0;i < sz;i++)
		{
			arr[adj[b][i]] = (arr[adj[b][i]] + ans)%mod;
			//cout<<arr[adj[b][i]]<<endl;
		}
		prev = (x-1);
		if(prev < 0)
			prev = 0;	
		res = ans;				
	}

//	cout<<prev<<" "<<ans<<" "<<res<<endl;
	prev1 = prev;
	for(it1 = it;it1 != h.end();++it1)
	{
		a = it1->first;
		b = it1->second;
		
		x = a/m;
		if(x > prev1)
		{
			ans =  res;
			prev = prev1;
		}
	
		y = pow1(m,x-1-prev);

		ans = (ans*y)%mod;
	//	cout<<x<<" "<<ans<<endl;
		//cout<<ans<<" ";
		
		sz = adj[b].size();
		for(i  = 0;i < sz;i++)
		{
			// cout<<ans<<endl;
			arr[adj[b][i]] = (arr[adj[b][i]] + arr[b] + ans)%mod;
	
		}

		c = (x == (n+1))?1:m;
	
		if(prev1 != x)
		{
			res = (arr[b] + (ans*c)%mod)%mod;	
//			cout<<res<<" "<<arr[b]<<endl;
		}
		else
		{
			res = (res + arr[b])%mod;
		}
		
//		cout<<x<<" "<<res<<endl;
		prev1 = x;
		prev = (x - 1); 
		//cout<<res<<endl;			
	}
		
	if(prev1 < (n+1))
	{	
		//cout<<prev1<<" "<<n<<" "<<m<<endl;
		y = pow1(m,n-prev1)%mod;
		//cout<<y<<endl;	
		res = (res*y)%mod;				
	}	
	//cout<<endl;
	printf("%lld\n",res);
	
	return 0;
	
}
