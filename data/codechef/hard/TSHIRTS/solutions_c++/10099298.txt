#include <iostream>
#include <sstream>
#include <vector>
#include <string>
#include <cstring>
#define ll long long
using namespace std;

ll t,n;
string s,s1;
vector<ll> v[105];
ll mod = 1000000007;
ll dp[1024][105];
ll maxnum;

void clearV(){
	for(ll i=0;i<=100;i++)
		v[i].clear();
}

void getInput(){

	cin >> n;
	clearV();
	getline(cin,s);
	
	for(ll i=0;i<n;i++){
		getline(cin , s);
		stringstream ss(s);
		int x;
		
		while(ss>>s1){
			stringstream s2;
			s2 << s1;
			s2 >> x;
			
			v[x].push_back(i);
			
		}
		
	}

}

ll countways(ll mask,ll i){
	
	if(mask==maxnum)
		return 1;
	if(i>100)
		return 0;
	if(dp[mask][i]!=-1)
		return dp[mask][i];
	
	ll r = countways(mask,i+1)%mod;
	
	for(ll j=0;j<v[i].size();j++){

		if(mask & (1<<v[i][j]))
			continue;
		
		ll tmp = countways(mask | (1<<v[i][j]),i+1);
		r += tmp;
		r %= mod;
		
	}
	dp[mask][i] = r;
	return r;
	
}


int main() {
	// your code goes here
	
	cin >> t;
	
	while(t--){
		
		getInput();
		memset(dp, -1, sizeof dp);
		maxnum = (1<<n)-1;
		cout << countways(0,1)<<endl;
		
		
	}
	
	
	return 0;
}