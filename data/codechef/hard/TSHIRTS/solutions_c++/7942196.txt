#include<bits/stdc++.h>

#ifndef ONLINE_JUDGE
    #define gc getchar
    #define pc putchar
#else
    #define gc getchar_unlocked
    #define pc putchar_unlocked
#endif

inline void fr(int &x) {
    register int c = gc();
	x = 0;
    for(; (c<48 || c>57); c = gc());
    for(; c>47 && c<58 ; c = gc()) {
        x = x*10 + c - 48;
}}
inline void frs(int &x,char *p) {//from string
	x = 0;
    while(*p!='\0'){
        x=(x<<1)+(x<<3)+*p-'0';
        ++p;
}}
inline void fp(int n){
    if (n / 10 != 0)
        fp(n / 10);
    putchar((n % 10) + '0');
}

int ts[101][11],tym=0,n;//ts[i][j] = tym if elephant j has t-shirt i
int dp[105][5050],parallel[105][5050];

using namespace std;
#define MOD 1000000007
int ans(int tsno,int mask){
	if(parallel[tsno][mask]==tym)return dp[tsno][mask];
	parallel[tsno][mask]=tym;
	if(mask==1)return dp[tsno][mask]=1;
	if(tsno==101)return dp[tsno][mask]=0;
	int y=ans(tsno+1,mask);
	for(int i=1;i<=n;++i){
		if(((1<<i)&mask)!=0&&ts[tsno][i]==tym)y+=ans(tsno+1,(mask^(1<<i)));
		if(y>=MOD)y-=MOD;
	}
	return dp[tsno][mask]=y;
}

int main(){
    char s[20000],*p;
    int t,x;
    fr(t);
    while(t--){
        ++tym;
        fr(n);
        for(int i=1;i<=n;++i){
            fgets(s,20000,stdin);
            p=strtok(s," \n");
            while(p!=NULL){
                frs(x,p);
                ts[x][i]=tym;
                p=strtok(NULL," \n");
            }
        }
        fp(ans(1,(1<<(n+1))-1));
        pc('\n');
        /*for(int i=0;i<=100;++i){
            for(int j=0;j<=n;++j){
                if(ts[i][j]==tym){
                    cout<<"> elephant "<<j<<"has t-shirt "<<i<<endl;
                }
            }
        }*/
    }
    return 0;
}