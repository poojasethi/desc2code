#include <bits/stdc++.h>
#define tr(i,c) for(typeof((c).begin()) i=(c).begin();i!=(c).end();i++)
#define modulo 1000000007

using namespace std;

int n;
vector<int> g[105];
char s[10000];

void inp() {
    for(int i=1;i<=100;i++) g[i].clear();
    scanf("%d\n",&n);
    for(int i=1;i<=n;i++) {
        gets(s);
        char* p=strtok(s," ");
        if (p!=NULL) {
            int u;
            while (p!=NULL) {
                sscanf(p,"%d",&u);
                g[u].push_back(i);
                p=strtok(NULL," ");
            }
        }
    }
}

int dp[1030][105];

int calc(int x,int id) {
    if (x==((1<<n)-1)) return dp[x][id]=1;
    if (id==101) return 0;
    if (dp[x][id]!=-1) return dp[x][id];
    int ans=calc(x,id+1);
    tr(i, g[id]) {
        int p=*i;
        if (x & (1<<(p-1))) continue;
        int y=x | (1<<(p-1));
        ans=(ans+calc(y,id+1))%modulo;
    }
    return dp[x][id]=ans;
}

void solve() {
    for(int x=0;x<(1<<n);x++) for(int i=1;i<=100;i++) dp[x][i]=-1;
    printf("%d\n",calc(0,1));
}

int main() {
    #ifndef ONLINE_JUDGE
    freopen("inp.txt","r",stdin);
    freopen("out.txt","w",stdout);
    #endif // ONLINE_JUDGE
    ios::sync_with_stdio(false);
    int T; scanf("%d\n",&T);
    while (T--) {
        inp();
        solve();
    }
}
