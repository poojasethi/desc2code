#include <bits/stdc++.h>

#define MOD 1000000007

using namespace std;

long long dp[1025][109];
vector<int> tlist[101];

int allmask;

long long countWays(int mask, int i){
    //cout<<"mask = "<<mask<<"\t"<<dp[mask][i]<<"\n";
    //if(mask == allmask) return 1;

    if(i == 101){
        if(mask==(allmask))return dp[mask][i]=1;
        else return dp[mask][i]=0;
    }

    if(dp[mask][i] != -1)
        return dp[mask][i];

    long long ways = 0;
    ways += countWays(mask,i+1);

    for(int j=0;j<tlist[i].size();j++){
        if(mask&(1<<tlist[i][j])) continue;
        //cout<<i<<" "<<tlist[i][j]<<"\n";
        ways = ways + countWays(mask|(1<<tlist[i][j]),i+1);

        ways = ways % MOD;
    }
    dp[mask][i] = ways;
    return dp[mask][i];
}

int main()
{
    int t;
    cin>>t;
    while(t--){
        int n;
        cin>>n;
        for(int i=0;i<=100;i++)
            tlist[i].clear();
        string temp, str;
        int x;
        allmask = (1<<n) - 1;
        //cout<<"allmask "<<allmask<<"\n";
        //getline(cin, str);
        for (int i=0; i<n; i++)
        {
            int a;
            char c;
            for(int j=0;;j++)
            {
                scanf("%d%c",&a,&c);
                tlist[a].push_back(i);
                if(c=='\n')break;
            }
            /*getline(cin, str);
            stringstream ss(str);

            while (ss >> temp)
            {
                stringstream s;
                s << temp;
                s >> x;
                tlist[x].push_back(i);
            }*/
        }
        for(int i=0; i<=100; i++)
            sort(tlist[i].begin(),tlist[i].end());
        memset(dp,-1,sizeof(dp));
        cout<<countWays(0,1)<<"\n";
    }
    return 0;
}
