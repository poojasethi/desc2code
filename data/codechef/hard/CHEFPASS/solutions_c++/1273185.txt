
#include <vector>
#include <iostream>
#include <algorithm>
#include <cstdio>
#include <cstdlib>
#include <ctime>
#include <cmath>
#include <memory.h>
#include <string>
#include <set>
#include <map>
#include <complex>
#include <bitset>

using namespace std;

int m[53][53][2];

int ver(char c) {
	if (c>='a'&&c<='z') return c-'a';
	return c-'A'+26;
}

int main() {
//	freopen("input.txt","r",stdin);
//	freopen("output.txt","w",stdout);
	int T;
	scanf("%d",&T);
	while(T--) {
		int n,e;
		char a,b;
		cin >> n;
		bitset<3000> A[55];
		memset(m,0,sizeof(m));
		for(int i=0;i<n;++i) {
			cin >> a >> b;
			m[ver(a)][ver(b)][0]++;
			m[ver(b)][ver(a)][0]++;
		}
		cin >> e;
		for(int i=0;i<e;++i) {
			cin >> a >> b;
			m[ver(a)][ver(b)][1]++;
			m[ver(b)][ver(a)][1]++;
		}
		for(int i=0;i<52;++i)
			for(int j=0;j<52;++j) {
				m[i][j][0]%=2;
				m[i][j][1]=m[i][j][1]>0;
			}
		for(int i=0;i<52;++i) {
			int s=0;
			for(int j=0;j<52;++j) {
				s+=m[i][j][0];
				if (i!=j&&m[i][j][1]) A[i][min(i,j)*52+max(i,j)]=1;
			}
			A[i][2999]=s&1;
		}
		bool sol=true;
		int last=0;
		for(int i = 0; i < 52&&last<2999; ++i,++last) {
			int k = i; while(k < 52 && !A[k][last]) ++k;
			if (k == 52) { --i; continue; }
			swap(A[k], A[i]);
			for(int j = i + 1; j < 52; ++j)
				if (A[j][last]) A[j] ^= A[i];
		}
		for(int i=0;i<52;++i) {
			bool ze=true;
			for(int j=0;j<2999;++j)
				if (A[i][j]) ze=false;
			if (ze&&A[i][2999]) sol=0;
		}
		if (sol) puts("YES");
		else puts("NO");
	}
	return 0;
}
