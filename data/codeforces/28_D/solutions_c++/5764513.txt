#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<ctime>
#include<cmath>
#include<iostream>
#include<string>
#include<deque>
#include<list>
#include<queue>
#include<vector>
#include<algorithm>
#include<map>
#include<stack>
#include<set>
using namespace std;
#define ll long long
#define lowbit(x) (x&-x)
#define F first
#define S second
#define pr pair<int,int>
#define m_p(x,y) make_pair(x,y)
#define eps 1e-8
#define pi acos(-1.0)
#define square(x) ((x)*(x))
#define getvec(x,y) ((y)-(x))
#define xmul(x1,y1,x2,y2) ((x1)*(y2)-(x2)*(y1))
#define inf 0x3f3f3f3f
#define mod ((ll)1e9+7)
#define maxn 100020
#define pb push_back
int n,f[maxn],p[maxn],v,c,l,r,z,u,ans[maxn],num;
map<int,int> g[maxn];

int main()
{
#ifndef ONLINE_JUDGE
	freopen("G:\\ACM\\inandout\\in.txt","r",stdin);
//	freopen("G:\\ACM\\inandout\\out.txt","w",stdout);
#endif
    cin>>n; for(int i=1;i<=n;i++) {
        cin>>v>>c>>l>>r;
        if(r+c<100010&&(!l||g[l][r+c])) {
            u=g[l][r+c];
            f[i]=f[u]+v; p[i]=u;
            if(r==0&&f[i]>f[z]) z=i;
            if(f[i]>f[g[l+c][r]]) g[l+c][r]=i;
        }
    }
    for(;z;z=p[z]) ans[num++]=z;
    cout<<num<<endl;
    for(int i=num-1;i>=0;i--) cout<<ans[i]<<' '; cout<<endl;
	return 0;
}
