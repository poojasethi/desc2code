#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<cstdlib>
#include<algorithm>
#include<map>
using namespace std;
int i,j,k,l,n,m,s,an,sum;
const int pp=100000;
const int N=111000;
class arr
{
    public:
        int v,c,l,r;
}a[N];
map <long long,int>f;
int g[N],ans[N],pre[N];
int main()
{
    scanf("%d",&n);
    for (int i=1;i<=n;i++)
    scanf("%d%d%d%d",&a[i].v,&a[i].c,&a[i].l,&a[i].r);
    for (int i=1;i<=n;i++)
    {
        long long s=(a[i].l*pp+a[i].r+a[i].c);
        long long now=(a[i].l+a[i].c)*pp+a[i].r;
        if (a[i].l==0) g[i]=a[i].v;
        if (f.count(s) && f[s])
        {
        g[i]=max(g[i],g[f[s]]+a[i].v);
        pre[i]=f[s];
        }
        //if (f[now].count()) f[now]=i;
        //else
        if (g[i]>g[f[now]]) f[now]=i;
        if ((a[i].r==0)&&(g[i]>g[k])) k=i;
    }
    an=0;
    while (k!=0)
    {
        ans[++an]=k;
        long long s=(a[k].l*pp+a[k].r+a[k].c);
        k=pre[k];
    }
    printf("%d\n",an);
    for (int i=an;i>=1;i--)
    printf("%d ",ans[i]);
   // system("pause");
    return 0;
}
    //    if (a[i].l==0) f[now]=max(f[now],a[i].v);
        
