#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<map>
#define mp make_pair
using namespace std;
typedef pair<int,int> PII;
map<PII,int> set;
int ans,m,n,v,c,l,r,f[100010],pre[100010];
map<PII,int>::iterator it;
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    scanf("%d",&n);
    for(int i=1;i<=n;i++){
        scanf("%d%d%d%d",&v,&c,&l,&r);
        PII now=mp(l,l+r+c);
        if(!l)f[i]=v;
        else if((it=set.find(now))!=set.end())pre[i]=it->second;
        else continue;
        f[i]=f[pre[i]]+v;
        now=mp(l+c,l+r+c);
        if(f[set[now]]<f[i])set[now]=i;
        if(!r&&f[i]>f[m])m=i;
    }
    for(ans=0;m;m=pre[m])f[ans++]=m;
    cout<<ans<<endl;
    while(ans--)printf("%d ",f[ans]);
    return 0;
}
