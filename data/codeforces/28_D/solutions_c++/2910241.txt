#include<cstdio>
#include<map>
using namespace std;
int n,v,c,l,r,ans,pos,pre[101111],f[101111],s[101111];
map <int,int> g[202222];

int main()
{
    scanf("%d",&n);
    for (int i=1; i<=n; i++)
    {
        scanf("%d%d%d%d",&v,&c,&l,&r);
        if (l==0 || g[l][r+c]!=0)
        {
            int x=g[l][r+c];
            f[i]=f[x]+v;
            pre[i]=x;
            if (f[i]>f[g[l+c][r]])
                g[l+c][r]=i;
            if (r==0 && f[i]>f[pos])
                pos=i;
        }
    }
    for (int i=pos; i!=0; i=pre[i])
        s[ans++]=i;
    printf("%d\n",ans);
    for (int i=ans-1; i>=0; i--)
        printf("%d ",s[i]);
    return 0;
}