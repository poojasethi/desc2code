#include <cstdio>
#include <cstdlib>
#include <algorithm>
#include <map>
#include <cstring>
#include <utility>
using namespace std;
const int MAXN = 100005;
int v[MAXN],c[MAXN],l[MAXN],r[MAXN],n,ans,q[MAXN],mx,en,fa[MAXN];
map<pair<int,int>,int> f,g;

int main(){
	scanf("%d",&n);
	for(int i = 0;i < n;++ i)
		scanf("%d%d%d%d",&v[i],&c[i],&l[i],&r[i]);
	mx = 0; en = -1;
	for(int i = 0,tmp;i < n;++ i){
		if(l[i] != 0){
			pair<int,int> pre(l[i],r[i] + c[i]);
			if(f.count(pre) == 0) continue;
			tmp = f[pre] + v[i];
			pair<int,int> nxt(l[i] + c[i],r[i]);
			fa[i] = g[pre];
			if(f.count(nxt) == 0 || f[nxt] < tmp)
				f[nxt] = tmp,g[nxt] = i;
		}else{
			pair<int,int> nxt(c[i],r[i]);
			if(f.count(nxt) == 0 || f[nxt] < v[i]){
				f[nxt] = v[i]; g[nxt] = i;
			}
			tmp = v[i];
			fa[i] = -1;
		}
		if(r[i] == 0 && tmp > mx){
			mx = tmp; en = i;
		}
	}
	ans = 0;
	if(en != -1){
		for(int i = en;i != -1;i = fa[i])
			q[ans ++] = i;
	}
	printf("%d\n",ans);
	for(int i = ans - 1;i >= 0;-- i) printf("%d%c",q[i] + 1,i == 0 ? '\n' : ' ');
	return 0;
}
