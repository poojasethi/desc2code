#include<cstdio>
#include<cstring>
#include<iostream>
#include<vector>
#include<algorithm>

using namespace std;

const int MAXN=100000+9;

long long f[MAXN];
void up(int &a,int b) { if(f[a]<f[b] || (f[a]==f[b] && a>b)) a=b; }

int power[MAXN], num[MAXN], before[MAXN], after[MAXN];
vector<int> seq[MAXN*3];
int best[MAXN*3], next[MAXN];
int main()
{
#ifndef ONLINE_JUDGE
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
#endif
	int n,m=0;
	int i,j;
	scanf("%d",&n);
	for(i=1;i<=n;++i)
	{
		scanf("%d%d%d%d",power+i,num+i,before+i,after+i);
		int all=before[i]+num[i]+after[i];
		seq[all].push_back(i);
		if(m<all)
			m=all;
	}

	int l,u;
	long long ans=0;
	vector<int> anss;
	best[0]=n+1;
	for(i=1;i<=m;++i)
		if((l=seq[i].size()))
		{
			for(j=l-1;j>=0;--j)
			{
				u=seq[i][j];
				if((next[u]=best[after[u]]))
				{
					f[u]=power[u]+f[next[u]];
					up(best[i-before[u]],u);
				}
			}
			u=best[i];
			for(j=0;j<l;++j)
				best[i-before[seq[i][j]]]=0;
			if(!u)
				continue;
			vector<int> t;
			for(j=u;j!=n+1;j=next[j])
				t.push_back(j);
			if(ans<f[u])
			{
				ans=f[u];
				anss=t;
			}
			else if(ans==f[u] && anss>t)
				anss=t;
		}

	l=anss.size();
	cout << l << '\n';
	for(i=0;i<l;++i)
		printf("%d ",anss[i]);
	putchar(10);
	return 0;
}
