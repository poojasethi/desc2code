#include <iostream>
#include <map>
#include <utility>

using namespace std;

#define MP make_pair
#define FOR(i,a,b) for(int i=a;i<=b;++i)
#define FORR(i,a,b) for(int i=a;i>=b;--i)

const int maxn=100010;

map < pair<int,int>, int > opt;
int n,ans=0,head,v[maxn],c[maxn],l[maxn],r[maxn],
	f[maxn],next[maxn],cnt[maxn];

void update(int i)
{
	if (f[opt[MP(l[i],r[i]+c[i])]] < f[i]) 
		opt[MP(l[i],r[i]+c[i])]=i;
}

int main()
{
	cin>>n;
	FOR(i,1,n)  cin>>v[i]>>c[i]>>l[i]>>r[i];
	FORR(i,n,1) {
		if (!r[i]) {
			f[i]=v[i];  next[i]=0;
			update(i);
		} else if (opt.count(MP(l[i]+c[i],r[i]))) {
			next[i] = opt[MP(l[i]+c[i],r[i])];
			f[i]=v[i]+f[next[i]];
			update(i);
		}
		cnt[i]=cnt[next[i]]+1;
		if (!l[i] && ans<f[i]) {
			ans=f[i];
			head=i;
		}
	}
	for (cout<<cnt[head]<<endl; head; head=next[head])  cout<<head<<' ';
	return 0;
}
