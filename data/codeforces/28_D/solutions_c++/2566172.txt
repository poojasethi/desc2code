#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<map>
#define mp make_pair
using namespace std;
typedef pair<int,int> PII;
map<PII,int> set;
int ans,m,n,v,c,l,r,f[100010],pre[100010];
map<PII,int>::iterator it;
int main(){
    scanf("%d",&n);
    set.clear();
    for(int i=1;i<=n;i++){
        scanf("%d%d%d%d",&v,&c,&l,&r);
        PII now=mp(l,l+r+c);
        if(!l)f[i]=v;
        else if((it=set.find(now))!=set.end())pre[i]=it->second;
        else continue;
        f[i]=f[pre[i]]+v;
        now=mp(l+c,l+r+c);
        if((it=set.find(now))==set.end())set.insert(mp(now,i));
        else if(f[it->second]<f[i])it->second=i;
        if(!r&&(f[i]>f[m]||m==0))m=i;
    }
    for(ans=0;m;m=pre[m])f[ans++]=m;
    cout<<ans<<endl;
    if(ans){
        printf("%d",f[ans-1]);
        ans--;
        while(ans--)printf(" %d",f[ans]);
    }
    cout<<endl;
    return 0;
}
