#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<map>
#include<vector>
#include<algorithm>

using namespace std;

const int maxn=100010;
const int INF=0x3f3f3f3f;

int v[maxn],c[maxn],l[maxn],r[maxn],f[maxn],pre[maxn],n;

map< pair < int , int > , int > ma;

int main()
{
	scanf("%d",&n);
	for (int a=1;a<=n;a++)
		scanf("%d%d%d%d",&v[a],&c[a],&l[a],&r[a]);
	int ansp=0;
	for (int a=1;a<=n;a++)
	{
		if (l[a]==0) f[a]=v[a];
		else
		{
			if (ma[make_pair(l[a]+c[a]+r[a],l[a])])
			{
				pre[a]=ma[make_pair(l[a]+c[a]+r[a],l[a])];
				f[a]=f[pre[a]]+v[a];
			}
			else 
			{
				f[a]=-INF;
				continue;
			}
		}
		if (f[a]>f[ansp] && r[a]==0) ansp=a;
		int p=ma[make_pair(l[a]+r[a]+c[a],l[a]+c[a])];
		if (f[a]>f[p]) ma[make_pair(l[a]+r[a]+c[a],l[a]+c[a])]=a;
	}
	vector<int> z;
	while (ansp)
	{
		z.push_back(ansp);
		ansp=pre[ansp];
	}
	printf("%d\n",(int)z.size());
	reverse(z.begin(),z.end());
	for (vector<int>::iterator it=z.begin();it!=z.end();it++)
		printf("%d ",(*it));
	printf("\n");

	return 0;
}
