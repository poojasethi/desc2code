#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<map>
using namespace std;
const int u=100010;
map<pair<int,int>,int> h;
int v[u],c[u],l[u],r[u],f[u],d[u],n,i,j,ans;
map<pair<int,int>,int>::iterator it;

void print(int i,int j)
{
	if(!i) return;
	print(d[i],j);
	if(j) printf("%d ",i); else ans++;
}

int main()
{
	cin>>n;
	for(i=1;i<=n;i++) scanf("%d%d%d%d",&v[i],&c[i],&l[i],&r[i]);
	for(i=1;i<=n;i++)
	{
		if(!l[i]) f[i]=v[i],d[i]=0;
		else{
			it=h.find(make_pair(l[i],r[i]+c[i]));
			if(it!=h.end()) d[i]=it->second,f[i]=f[d[i]]+v[i];
		}
		it=h.find(make_pair(l[i]+c[i],r[i]));
		if(it==h.end()||f[it->second]<f[i]) h[make_pair(l[i]+c[i],r[i])]=i;
		if(!r[i]&&f[i]>ans) ans=f[i],j=i;
	}
	ans=0,print(j,0),cout<<ans<<endl;
	print(j,1),puts("");
	return 0;
}