#include <cstdio>
#include <algorithm>
#define maxn 200005

struct st
{
	int l,r,c,v,s,p;
	bool operator <(const st&B) const {return s<B.s||(s==B.s&&p<B.p);}
} a[maxn];
int N,q[maxn],f[maxn],g[maxn],h[maxn];

void doit()
{
	scanf("%d",&N),a[0].s=-1;
	for (int i=1; i<=N; i++) scanf("%d%d%d%d",&a[i].v,&a[i].c,&a[i].l,&a[i].r),a[i].s=a[i].l+a[i].r+a[i].c,a[i].p=i,h[a[i].l+a[i].c]=h[a[i].l]=N+1;
	std::sort(a+1,a+N+1),f[N+1]=-1e9;
	int P=0;
	for (int i=1,p=0; i<=N; i++)
	{
		if (a[i].s!=a[i-1].s)
		{
			for (int j=p; j<i; j++) h[a[j].l+a[j].c]=N+1;
			h[0]=0,p=i;
		}
		f[i]=f[h[a[i].l]]+a[i].v,g[i]=h[a[i].l];
		if (f[i]>f[h[a[i].l+a[i].c]]) h[a[i].l+a[i].c]=i;
		if (!a[i].r&&f[i]>f[P]) P=i;
	}
	for (;P; P=g[P]) q[++q[0]]=a[P].p;
	printf("%d\n",q[0]);
	for (int i=q[0]; i; i--) printf("%d%c",q[i],i==1?'\n':' ');
}

int main()
{
	doit();
	return 0;
}