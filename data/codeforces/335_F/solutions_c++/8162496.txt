#include <stdio.h>
#include <stdlib.h>
#include <algorithm>
using namespace std;

int n,i,j,k,sum,lim,cnt,aim,mate,now,pre;
int a[500005],b[500005],c[500005],tot;
int heap[1000005],len,tmp;
long long ans;

void heap_up(int k)
{
	while((k!=1)&&(heap[k]<heap[k>>1]))
	tmp=heap[k],heap[k]=heap[k>>1],heap[k>>1]=tmp,k=k>>1;
}
void heap_insert(int num)
{
	++len;heap[len]=num;
	heap_up(len);
}
void heap_down(int k)
{
	while((k<<1<=len)&&((heap[k<<1]<heap[k])||(heap[(k<<1)+1]<heap[k])))
	{
		k=k<<1;
		if((k+1<=len)&&(heap[k+1]<heap[k]))++k;
		tmp=heap[k];heap[k]=heap[k>>1];heap[k>>1]=tmp;
	}
}
void heap_delete()
{
	heap[1]=heap[len];--len;heap_down(1);
}

int main()
{
	scanf("%d",&n);
	for(i=1;i<=n;++i)scanf("%d",&a[i]),ans+=a[i];
	sort(a+1,a+n+1);a[0]=-1;
	for(i=n;i>=1;--i)
	{
		sum=n-i;pre=len;
		for(tot=1;a[i]==a[i-1];--i)++tot;
		if(sum<tot)tot=sum;
		lim=(sum-tot)/2;
		for(cnt=0;len>lim;)b[cnt++]=heap[1],heap_delete();
		for(--cnt,j=cnt/2;j>=0;--j)swap(b[j],b[cnt-j]);
		aim=lim+tot;mate=lim;now=0;
		while(mate+now<aim&&mate<pre&&b[mate-lim]>a[i])heap_insert(b[mate-lim]),++mate;
		while(mate+now<aim&&now<tot&&2*mate+now<sum)heap_insert(a[i]),++now;
		while(mate+now<aim)heap_insert(2*a[i]-b[mate-lim-1]),--mate,now+=2;
	}
	while(len)
	{
		if(heap[1]>0)ans-=heap[1];
		heap_delete();
	}
	printf("%I64d\n",ans);
}