#include<stdio.h>
#include<math.h>
#include<algorithm>
using namespace std;
const int maxn=100050,maxd=200050,maxs=350;
int n,m,A[maxn],q[maxn][3];
int s,cnt[maxs][maxd]={0},f[maxs][maxn]={0};
int A0[maxn],q0[maxn],ns=0,num[maxd];
int cnt0[maxd];
int &get(int x) { return x<n?A[x]:q[x-n][1]; }
bool cmp(const int &xx,const int &yy) { return get(xx)<get(yy); }
void init()
{
	int i,j,k;
	for(i=0,k=1;i<n;i+=s,k++)
	{
		for(j=0;j<maxd;j++)
			cnt[k][j]=cnt[k-1][j];
		for(j=0;j<=n;j++)
			f[k][j]=f[k-1][j];
		for(j=0;j<s&&i+j<n;j++)
		{
			int &a=cnt[k][A[i+j]];
			f[k][++a]++;
		}
	}
}
void change(int v,int p,int v0)
{
	int i;
	for(i=1;i*s<p;i++);
	for(;i*s-s<n;i++)
	{
		int &a=cnt[i][A[p-1]],&b=cnt[i][v];
		f[i][a--]--,f[i][++b]++;
	}
	A[p-1]=v,A0[p-1]=v0;
}
int query(int x,int y)
{
	int i,j,ans1,ans2;
	if(x==1) return A0[y-1];
	else
	{
		for(i=0,j=0;i+s<=y;i+=s,j++);
		ans1=cnt[j][A[y-1]];
		for(;i<y;i++)
			ans1+=A[i]==A[y-1];
		if(x==2) return ans1;
		ans2=f[j][ans1];
		for(i=j*s;i<y;i++)
			cnt0[A[i]]=cnt[j][A[i]];
		for(i=j*s;i<y;i++)
			cnt0[A[i]]++,ans2+=cnt0[A[i]]==ans1;
		return ans2;
	}
}
int main()
{
#ifndef ONLINE_JUDGE
	freopen("data.in","r",stdin);
#endif
	int i,j,k;
	scanf("%d",&n);
	s=sqrt(n-1)+1;
	for(i=0;i<n;i++)
		scanf("%d",&A[i]),A0[i]=A[i],num[ns++]=i;
	scanf("%d",&m);
	for(i=0;i<m;i++)
	{
		scanf("%d%d%d",&q[i][0],&q[i][1],&q[i][2]);
		q0[i]=q[i][1];
		if(q[i][0]==1)
			num[ns++]=n+i;
	}
	sort(num,num+ns,cmp);
	for(i=0,k=1;i<ns;k++)
	{
		for(j=i+1;j<ns&&get(num[j])==get(num[i]);j++);
		while(i<j)
			get(num[i++])=k;
	}
	init();
	for(i=0;i<m;i++)
	{
		if(q[i][0]==1)
			change(q[i][1],q[i][2],q0[i]);
		else 
			printf("%d\n",query((q[i][1]-2)%2+2,q[i][2]));
	}
	return 0;
}
