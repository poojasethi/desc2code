#include<cstdio>
#include<cstring>
#include<algorithm>
#include<set>
#include<vector>
#include<map>
#include<queue>
#include<string>
#include<bitset>
#include<iomanip>
#include<iostream>
#include<cmath>
using namespace std;
#define rep(i,x,y) for(i=x;i<=y;i++)
#define _rep(i,x,y) for(i=x;i>=y;i--)
#define REP(i,x,y) for(int i=(x);i<=(y);i++)
#define _REP(i,x,y) for(int i=(x);i>=(y);i--)
#define CL(S,x) memset(S,x,sizeof(S))
#define CP(S1,S2) memcpy(S1,S2,sizeof(S2))
#define ALL(x,S) for(__typeof((v).end()) x=S.begin();x!=S.end();x++)
#define pb push_back
#define IN insert
#define ER erase
#define BE begin()
#define ED end() 
#define LB lower_bound
#define UB upper_bound
#define mp make_pair
#define fi first
#define se second
#define upmin(x,y) x=min(x,y)
#define upmax(x,y) x=max(x,y)
#define COUT(S,x) cout<<fixed<<setprecision(x)<<S<<endl
template<class T> inline void read(T&x){bool fu=0;char c;for(c=getchar();c<=32;c=getchar());if(c=='-')fu=1,c=getchar();for(x=0;c>32;c=getchar())x=x*10+c-'0';if(fu)x=-x;};
template<class T> inline void read(T&x,T&y){read(x);read(y);}
template<class T> inline void read(T&x,T&y,T&z){read(x);read(y);read(z);}
inline char getc(){char c;for(c=getchar();c<=32;c=getchar());return c;}

typedef long long ll;
typedef long double ld;
typedef pair<int,int> pii;

const int N=200010;
const int G=500;
int n,m,i,j,k,l,p,z,t,x,y,res,ci;
int q0[N],q1[N],q2[N];
int a[N],o[N],d[N];int g,w[N],c1[N],c2[N];
vector<int> v[N],cc[N];int op[N],ct[N],li[N];
int cnt(int s,int x){return UB(v[s].begin(),v[s].end(),x)-v[s].begin();}
void reb()
{
    rep(i,1,g)a[w[i]]=c2[i];g=0;
    rep(i,1,o[0])v[i].clear();rep(i,1,n)cc[i].clear();
    rep(i,1,n){v[a[i]].pb(i);cc[v[a[i]].size()].pb(i);}
}
void st(int i)
{
    op[i]=z;ct[i]=cnt(i,x);li[++li[0]]=i;
    if(v[i].size()>=res&&v[i][res-1]<=x)ci--;
}
int main()
{
    //freopen("1.in","r",stdin);freopen("1.out","w",stdout);
    read(n);
    rep(i,1,n)read(a[i]),o[++o[0]]=a[i];   
    read(m);
    rep(i,1,m){read(q0[i],q1[i],q2[i]);if(q0[i]==1)o[++o[0]]=q1[i];}
    sort(o+1,o+1+o[0]);j=1;rep(i,2,o[0])if(o[i]!=o[i-1])o[++j]=o[i];o[0]=j;     
    
    rep(i,1,n)a[i]=LB(o+1,o+1+o[0],a[i])-o;
    rep(i,1,m)if(q0[i]==1)q1[i]=LB(o+1,o+1+o[0],q1[i])-o;
    reb();
    
    rep(z,1,m)
    {
        t=q0[z];x=q1[z];y=q2[z];
        if(t==1)
        {
            if(a[y]!=x)
            {
                ++g;w[g]=y;c1[g]=a[y];c2[g]=x;a[y]=x;
                if(g>=G)reb();
            }
        }
        else
        {
            swap(x,y);
            if(y>1)y=(y&1)?3:2;
            if(y==1)printf("%d\n",o[a[x]]);
            else 
            {
                res=cnt(a[x],x);
                rep(i,1,g)if(w[i]<=x)
                if(c1[i]==a[x])res--;else if(c2[i]==a[x])res++;
                if(y==2)printf("%d\n",res);
                else
                {
                    ci=UB(cc[res].begin(),cc[res].end(),x)-cc[res].begin();
                    
                    li[0]=0;
                    rep(i,1,g)
                    {
                        if(op[c1[i]]!=z)st(c1[i]);
                        if(op[c2[i]]!=z)st(c2[i]);
                        if(w[i]<=x)ct[c1[i]]--,ct[c2[i]]++;
                    }
                    rep(i,1,li[0])if(ct[li[i]]>=res)ci++;
                    
                    printf("%d\n",ci);
                }
            }
        }
    }
    	
    
    return 0;
}
