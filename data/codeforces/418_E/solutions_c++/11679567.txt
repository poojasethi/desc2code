#include <map>
#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;

#define S   1000
#define n   200005
#define For(i,a,b)  for(int i=a;i<b;i++)

int     N,M,C,D,A[n],val[n],F[105][n],G[105][n];
map<int,int>Gt;

inline  int Num(int a){
        if  (!Gt.count(a))  val[D]=a,Gt[a]=D++;
        return  Gt[a];
}

int     main(){
        scanf("%d",&N); C=1;
        For(i,0,N)  scanf("%d",&A[i]),A[i]=Num(A[i]);

        for (int i=0;i<N;i+=S){
            int lim=min(N,i+S),t=C++;
            For(j,0,D)  F[t][j]=F[t-1][j];
            For(j,0,i+1)G[t][j]=G[t-1][j];
            For(j,i,lim)G[t][++F[t][A[j]]]++;
        }

        scanf("%d",&M);
        for (int k,x,y,s,t;M--;){
            scanf("%d%d%d",&k,&x,&y);   s=(t=(--y)/S)*S;
            if  (k==1){
                For(i,t+1,C)    G[i][F[i][A[y]]--]--;   A[y]=Num(x);
                For(i,t+1,C)    G[i][++F[i][A[y]]]++;
            }   else{
                if  (x==1)  printf("%d\n",val[A[y]]);
                else    {
                    For(i,s,y+1)    G[t][++F[t][A[i]]]++;
                    if  (x&1^1) printf("%d\n",F[t][A[y]]);
                        else    printf("%d\n",G[t][F[t][A[y]]]);
                    For(i,s,y+1)    G[t][F[t][A[i]]--]--;
                }
            }
        }
}