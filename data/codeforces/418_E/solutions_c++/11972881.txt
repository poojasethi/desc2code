#include<cstdio>
#include<cstring>
#include<cmath>
#include<map>
using namespace std;
inline void readi(int &x);
const int maxn=100005;
int n,m,S,bn;
int a[maxn];
int f[80][maxn*2],g[80][maxn];
map<int,int> mem;
int num[maxn*2],vn;

int get(const int &x)
{
	if(mem.count(x))return mem[x];
	num[mem[x]=++vn]=x;
	return vn;
}

void init()
{
	readi(n);
	for(int i=1;i<=n;i++)
		readi(a[i]),a[i]=get(a[i]);
	bn=int(sqrt(n)/6+1);S=n/bn;
	int l,r=0;
	for(int i=1;i<=bn;i++)
	{
		l=r+1;
		r=(i==bn)?n:l+S-1;
		memcpy(f[i],f[i-1],vn+1<<2);
		memcpy(g[i],g[i-1],n+1<<2);
		for(int j=l;j<=r;j++)
			g[i][++f[i][a[j]]]++;
	}
}

void work()
{
	int opt,x,y,z,p,i,sum,ans;
	for(readi(m);m--;)
	{
		readi(opt),readi(x),readi(y);
  	p=min((y-1)/S+1,bn);
		if(opt==1)
		{
			z=a[y];a[y]=x=get(x);
			for(i=p;i<=bn;i++)
				g[i][f[i][z]--]--,g[i][++f[i][x]]++;
		}
		else
		{
			if(x>3)x=2+x%2;
			if(x==1)printf("%d\n",num[a[y]]);
			else
			{
				sum=f[p-1][a[y]];
				for(i=(p-1)*S+1;i<=y;i++)
					sum+=a[i]==a[y];
				if(x==2)printf("%d\n",sum);
				else
				{
					ans=g[p-1][sum];
					for(i=(p-1)*S+1;i<=y;i++)
						if(++f[p-1][a[i]]==sum)ans++;
					for(i=(p-1)*S+1;i<=y;i++)f[p-1][a[i]]--;
					printf("%d\n",ans);
				}
			}
		}
	}
}

int main()
{
	init();
	work();
	return 0;
}

inline void readi(int &x)
{char c;while(c=getchar(),c<'0'||c>'9');
x=c^'0';while(c=getchar(),c>='0'&&c<='9')x=x*10+(c^'0');}
