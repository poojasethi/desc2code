#include <cstdio>
#include <cstring>
#include <algorithm>
#include <map>
#define FOR(i,s,e) for (int i=(s); i<(e); i++)
#define FOE(i,s,e) for (int i=(s); i<=(e); i++)
#define N 100005
#define BSZ 1200
#define M 105
using namespace std;

int n, m, id, TBL;
int arr[N], Rev[N+N];
int BIT[M][N], tot[M];
int Freq[M][N+N], Fr[N+N];
map<int, int> Dis;

void BITupdate(int d, int x, int v){
	if (x){
		 for (int i=x; i<=n; i+=i&-i) BIT[d][i] += v;
		 tot[d] += v;
	}
}

void update(int p, int v, int d){
	int p1 = p / BSZ, t;
	FOR(i,p1,TBL){
		int t = Freq[i][v];
		BITupdate(i, t, -1);
		Freq[i][v] += d;
		BITupdate(i, t + d, 1);
	}
}

int solve1(int p, int v){
	int p1 = p / BSZ, p2 = p % BSZ, ret = 0;
	if (p1) ret += Freq[p1 - 1][v];
	FOE(i,0,p2) ret += (arr[p - i] == v);
	return ret;
}

int BITcount(int d, int x){
	int ret = tot[d];
	for (int i=x-1; i; i-=i&-i) ret -= BIT[d][i];
	return ret;
}

int solve2(int p, int v){
	int p1 = p / BSZ, p2 = p % BSZ, ret = 0;
	int fr = solve1(p, v);
	if (p1) ret = BITcount(p1 - 1, fr);

	FOE(i,1,p2){
		int t = arr[p - i];
		++Fr[t];
		if (Fr[t] + (p1 ? Freq[p1 - 1][t] : 0) == fr) ++ret;
	}
	FOE(i,1,p2) --Fr[arr[p - i]];
	return ret + 1;
}


int Mapto(int x){
	if (Dis[x] == 0){
		Dis[x] = ++id;
		Rev[id] = x;
	}
	return Dis[x];
}

int main(){
	scanf("%d", &n);
	FOR(i,0,n) scanf("%d", &arr[i]), arr[i] = Mapto(arr[i]);
	scanf("%d", &m);

	TBL = (n + BSZ - 1) / BSZ;
	FOR(i,0,n) update(i, arr[i], 1);

	while (m--){
		int op, x, y;
		scanf("%d%d%d", &op, &x, &y), --y;
		if (op == 1){
			x = Mapto(x);
			update(y, arr[y], -1);
			update(y, x, 1);
			arr[y] = x;
		}
		else{
			if (x == 1) printf("%d\n", Rev[arr[y]]);
			else if ((x & 1) == 0) printf("%d\n", solve1(y, arr[y]));
			else printf("%d\n", solve2(y, arr[y]));
		}
	}
	return 0;
}
