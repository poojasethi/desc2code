#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <cmath>
#include <map>
#define N 200010
#define M 200
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
struct ww {
	int a,b,c;
} c[N];
int i,j,k,n,m,t,p,q,F;
int a[N],b[N],ty[N],id[N],L[N],R[N],qian[M][N],s[N],S[N],***d,re[M][N];
map<int,int> ge[M];
inline int Do(int x) {
	return lower_bound(b+1,b+t+1,x)-b;
}
inline void pre() {
	int i,j;
	For(i,1,n) a[i]=Do(a[i]);
	For(i,1,m) if (c[i].a==1) c[i].b=Do(c[i].b);
	p=1010;
	d=new int **[M];
	for (i=1;i<=n;) {
		L[++q]=i;
		d[q]=new int *[N];
		For(j,1,t) qian[q][j]=s[j],S[j]=0;
		for (j=1;j<=p&&i<=n;j++,i++) id[i]=q,s[a[i]]++,S[a[i]]++;
		R[q]=i-1;
		For(j,1,m) if (c[j].a==1&&c[j].c>=L[q]&&c[j].c<=R[q]) S[c[j].b]++;
		For(j,1,t) re[q][qian[q][j]+1]++,re[q][s[j]+1]--;
		For(j,1,t) {
			if (S[j]) d[q][j]=new int [S[j]],S[j]=0;
			re[q][j]+=re[q][j-1];
		}
		For(j,L[q],R[q]) d[q][a[j]][S[a[j]]++]=j;
		For(j,1,t) if (S[j]) ge[q][j]=S[j];
	}
}
inline void work(int x,int y,int ty) {
	int i,B=id[x];
	if (ty>0) re[B][qian[B][y]+ge[B][y]+1]++;
	else re[B][qian[B][y]+ge[B][y]]--;
	For(i,B+1,q) {
		int A=qian[i][y];
		qian[i][y]+=ty;
		if (ge[i].count(y)) {
			int B=ge[i][y];
			int L=A+1,R=A+B;
			if (ty>0) re[i][L]--,re[i][R+1]++;
			else re[i][L-1]++,re[i][R]--;
		}
	}
}
inline void gou(int x,int y) {
	int i,B=id[x],s=0;
	if (ge[B].count(y)) ge[B].erase(y);
	For(i,L[B],R[B]) if (a[i]==y) d[B][y][s++]=i;
	if (s) ge[B][y]=s;
}
inline void gai(int x,int y) {
	int A=a[y];
	if (x==a[y]) return;
	work(y,a[y],-1);
	a[y]=x;
	work(y,x,1);
	gou(y,A);
	gou(y,x);
}
inline int fen(int q,int y,int x) {
	int r=ge[q][y];
	return lower_bound(d[q][y],d[q][y]+r,x)-d[q][y]+1;
}
inline int get(int y) {
	int A=id[y],B=a[y];
	return qian[A][B]+fen(A,B,y);
}
inline void cal(int x,int y) {
	if (x==1) printf("%d\n",b[a[y]]);
	else {
		x=(x-2)%2+1;
		if (x==1) printf("%d\n",get(y));
		else {
			int A=get(y),i,B=id[y],s=1;
			For(i,1,B-1) s+=re[i][A];
			For(i,L[B],y-1) s+=get(i)==A;
			printf("%d\n",s);
		}
	}
}
int main() {
	//freopen("418e.in","r",stdin);
	scanf("%d",&n);
	For(i,1,n) scanf("%d",&a[i]),b[i]=a[i];
	scanf("%d",&m); t=n;
	For(i,1,m) {
		scanf("%d%d%d",&c[i].a,&c[i].b,&c[i].c);
		if (c[i].a==1) b[++t]=c[i].b;
	}
	sort(b+1,b+t+1);
	pre();
	For(i,1,m) {
		if (c[i].a==1) gai(c[i].b,c[i].c);
			else cal(c[i].b,c[i].c);
	}
	//for(;;);
	return 0;
}
