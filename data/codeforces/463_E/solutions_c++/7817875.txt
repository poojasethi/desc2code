#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<cmath>
#include<vector>
#include<queue>
#include<map>
#include<set>
#include<time.h>
#include<string>
#define REP(i,n) for(int i=0;i<n;++i)
#define REP1(i,a,b) for(int i=a;i<=b;++i)
#define REP2(i,a,b) for(int i=a;i>=b;--i)
#define MP make_pair
#define P pair<int,int>
#define LL long long
#define ULL unsigned long long
#define X first
#define Y second
#define MAXN 100050
using namespace std;
int fa[MAXN];
vector<int>e[MAXN];
int a[MAXN];
int gcd(int a,int b)
{
	if(b==0)return a;
	else return gcd(b,a%b);
}
void dfs(int now)
{
	for(int i=0;i<e[now].size();++i){
		int u=e[now][i];
		if(u==fa[now])continue;
		fa[u]=now;
		dfs(u);
	}
}
int main()
{
	int n,q;
	scanf("%d%d",&n,&q);
	for(int i=1;i<=n;++i)scanf("%d",&a[i]);
	for(int i=1;i<n;++i)
	{
		int x,y;
		scanf("%d%d",&x,&y);
		e[x].push_back(y);
		e[y].push_back(x);
	}
	fa[1]=-1;
	dfs(1);
	while(q--){
		int x,y,z;
		scanf("%d",&z);
		if(z==1){
			scanf("%d",&x);
			int va=a[x];
			x=fa[x];
			int ans=-1;
			while(x!=-1){
				if(gcd(va,a[x])!=1)
				{
					ans=x;
					break;
				}
				x=fa[x];
			}
			printf("%d\n",ans);
		}else
		{
			scanf("%d%d",&x,&y);
			a[x]=y;
		}
	}
}
