#include<iostream>
#include<cstring>
#include<cstdio>
#include<cmath>
#include<cstdlib>
#include<algorithm>
#define N 100005
#define M 2000005
#define LL long long
#define oo (1<<30)
using namespace std;
int f[N],n,q,A[N],head[N],len=0;
struct way{ int num,next;}G[N*2+5];
int gcd(int x,int y){ return x ? gcd(y%x,x) : y;}
void link(int x,int y){ G[++len]=(way){y,head[x]},head[x]=len;}
void dfs(int t,int fa)
{
    int i; f[t]=fa;
    for(i=head[t];i;i=G[i].next)
        if(G[i].num!=fa)
            dfs(G[i].num,t);
}
int main()
{
    int i,x,y,num;
    scanf("%d %d",&n,&q);
    for(i=1;i<=n;i++)
        scanf("%d",&A[i]);
    for(i=1;i<n;i++){
        scanf("%d %d",&x,&y);
        link(x,y),link(y,x);
      }
    dfs(1,0);
    for(i=1;i<=q;i++){
        scanf("%d",&num);
        if(num==1){
            scanf("%d",&x),y=-1;
            for(int j=f[x];j;j=f[j])
                if(gcd(A[j],A[x])>1){
                    y=j; break;
                  }
            printf("%d\n",y);
          }
        else{
            scanf("%d %d",&x,&y);
            A[x]=y;
          }
      }
    return 0;
}