#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <climits>
#include <algorithm>
#include <queue>
#include <map>
#include <vector>
#define mem(x,val) memset (x, val, sizeof (x))
#define MAXN 100005
using namespace std;
typedef long long ll;
const double eps = 1e-8;
const int inf = 1e9;
vector<int>e[MAXN*2];
int pre[MAXN], a[MAXN];

void dfs(int x, int fa) {
    int y, i, size = e[x].size();
    pre[x] = fa;
    for (i = 0; i < size; i ++) {
        y = e[x][i];
        if (y == fa)  continue;
        dfs (y, x);
    }
}

int main () {
    int n, q, x, y, i, j, z;
    scanf ("%d %d", &n, &q);
    for (i = 1; i <= n; i ++)
        scanf ("%d", &a[i]);
    for (i = 1; i < n; i ++) {
        scanf ("%d %d", &x, &y);
        e[x].push_back (y);
        e[y].push_back (x);
    }
    dfs(1, 0);
    for (j = 1; j <= q; j ++) {
        scanf ("%d", &x);
        if (x == 2) {
            scanf ("%d %d", &y, &z);
            a[y] = z;
        }
        else {
            scanf ("%d", &y);
            for (i = pre[y]; i; i = pre[i])
                if (__gcd (a[i], a[y]) > 1)  break;
            if (!i)  printf("-1\n");
            else printf("%d\n", i);
        }
    }
    return 0;
}
