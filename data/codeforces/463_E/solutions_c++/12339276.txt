//In the Name of God

#include<iostream>
#include<vector>

using namespace std;

int n,q,d[100100],val[100100],value,s,t,v,w;
vector<int> g[100100];

int bmm(int a,int b)
{
  if(b==0)
    return a;
  return bmm(b,a%b);
}

void dfs(int a,int D)
{
  d[a]=D;
  for(int i=0;i<g[a].size();i++)
    if(g[a][i]!=D)
      dfs(g[a][i],a);
}

int main()
{
  cin>>n>>q;
  for(int i=1;i<=n;i++)
    cin>>val[i];
  for(int i=1;i<n;i++)
    {
      cin>>s>>t;
      g[s].push_back(t);
      g[t].push_back(s);
    }
  dfs(1,0);
  for(int i=0;i<q;i++)
    {
      cin>>t;
      if(t==1)
	{
	  cin>>v;
	  value=val[v];
	  while(v!=0)
	    {
	      v=d[v];
	      if(bmm(value,val[v])!=1 && v!=0)
		{
		  cout<<v<<endl;
		  break;
		}
	      if(v==0)
		{
		  cout<<-1<<endl;
		  break;
		}
	    }
	}
      else
	{
	  cin>>v>>w;
	  val[v]=w;
	}
    }
  return 0;
}
