#include<bits/stdc++.h>
using namespace std;
#define MAXN 2000001
#define pb push_back
#define rz(A,n) A.resize(n)
vector<int> V,A,L;
vector<vector<int> > G; 


void dfs(int u,int p=0){

    L[u]=p;
    V[u]=1; 
    for(vector<int > :: iterator it=G[u].begin();it!=G[u].end();++it){
        if(V[*it]==0)
            dfs(*it,u);
    }
}
int main(){


    int n,q;
    cin >> n >> q;
    rz(A,n+1);
    rz(V,n+1);
    rz(G,n+1);
    rz(L,n+1);
    for(int i=1;i<=n;i++)
        cin >> A[i];
    for(int i=1;i<n;i++){
        int x,y;
        cin >> x >> y;
        G[x].pb(y),G[y].pb(x);
    }
    fill(V.begin(),V.end(),0);
    dfs(1);
    while(q--){
        int c,u,v;
        cin >> c;
        if(c==1){
            cin >> u;
            int P=L[u];
            while(P!=0){
                
                if(__gcd(A[P],A[u])>1)
                    break;
                P=L[P];
            }
            if(P)
                cout << P << endl;
            else
                cout << "-1" << endl;
        }else{
            cin >> u >> v;
            A[u]=v;
        }
    }
    return 0;
}