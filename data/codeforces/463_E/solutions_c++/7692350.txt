#include <bits/stdc++.h>
#define fi freopen("Inp.txt", "r", stdin);
#define fo freopen("Out.txt", "w", stdout);
#define N 100010
#define MAXA 2000010
using namespace std;

int n, q, x, y;
int a[N], kq[N], f[N];
vector <int> b[N], nt;

void DFS(int u, int v)
{
    f[u] = v;
    for (int i = 0; i < (int)b[u].size(); i++)
        if (b[u][i] != f[u])
            DFS(b[u][i], u);
}

int Do(int v)
{
    for (int i = f[v]; i ; i = f[i])
        if (__gcd(a[i], a[v]) > 1) return i;
    return -1;
}

int main()
{
    //fi;fo;
    cin >> n >> q;
    for (int i = 1; i <= n; i++) scanf("%d", &a[i]);
    for (int i = 1; i < n; i++)
    {
        scanf("%d%d", &x, &y);
        b[x].push_back(y);
        b[y].push_back(x);
    }
    DFS(1, 0);
    for (int i = 1, l, v; i <= q; i++)
    {
        cin >> l >> v;
        if (l == 1) cout << Do(v) << endl;
        else cin >> a[v];
    }
}
