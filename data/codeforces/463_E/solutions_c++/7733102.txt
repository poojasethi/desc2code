#include<cstdio>
#include<cstdlib>
using namespace std;
const int maxn=1000000;
int n,q,x,y,fa[maxn],data[maxn],next[maxn],son[maxn],ed[maxn],num,now;
bool v[maxn];
void In(int x,int y){next[++num]=son[x];son[x]=num;ed[num]=y;}
int gcd(int a,int b){if(a%b==0)return b;else return gcd(b,a%b);}
void dfs(int x)
{
	v[x]=true; int tt=son[x];
	while(tt){if(!v[ed[tt]]){fa[ed[tt]]=x;dfs(ed[tt]);}tt=next[tt];}
}
int main()
{
	scanf("%d%d",&n,&q);
	for(int i=1;i<=n;i++)scanf("%d",&data[i]);
	for(int i=1;i<=n-1;i++)
	{
		scanf("%d%d",&x,&y);
		In(x,y); In(y,x);
	}
	dfs(1); 
	for(int i=1;i<=q;i++)
	{
		scanf("%d",&now);
		if(now==2){scanf("%d%d",&x,&y);data[x]=y;}
		else
		{
			bool t=true; scanf("%d",&x);
			for(int j=fa[x];j;j=fa[j])if(gcd(data[j],data[x])!=1){t=false,printf("%d\n",j);break;}
			if(t)printf("-1\n");
		}
	}
//	system("pause");
	return 0;
}
