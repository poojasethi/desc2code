#include <cstdio>
#define sz 202020
int gcd(int x, int y){return y == 0 ? x : gcd(y, x % y);}
int node[sz], next[sz], to[sz];
int a[sz], par[sz];
int e, n, q;
void ins(int x, int y){e++; next[e] = node[x]; node[x] = e; to[e] = y;}
void dfs(int x, int p){
  int i;
  for (i = node[x]; i; i = next[i])
    if (to[i] != p)
      par[to[i]] = x, dfs(to[i], x);
}

int main(){
  int x, y;
  scanf("%d %d", &n, &q);
  for (int i = 1; i <= n; i++) scanf("%d", &a[i]);
  for (int i = 1; i < n; i++){
    scanf("%d %d", &x, &y);
    ins(x, y); ins(y, x);
  }
  dfs(1, -1);
  while (q--){
    int o, p, Q;
    scanf("%d", &o);
    if (o == 1){
      scanf("%d", &p);
      Q = par[p];
      for (; Q; Q = par[Q])
    if (gcd(a[p], a[Q]) > 1) break;
      if (Q == 0) printf("-1\n");
      else printf("%d\n", Q);
    } else{
      scanf("%d %d", &p, &Q);
      a[p] = Q;
    }
  }
  return 0;
}
