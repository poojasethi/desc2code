#include <iostream>
#include <vector>
#include <queue>
using namespace std;
int n,q,data[100005],par[100005];
vector<int> adj[100005];
bool vis[100005];
queue<int> que;
int gcd(int a, int b){
	int c;
  	while(a!=0){
     	c=a;
     	a=b%a;
     	b=c;
  	}
  	return b;
}
int main()
{
    cin>>n>>q;
    for(int i=1;i<=n;i++)cin>>data[i];
    for(int i=1;i<n;i++){
    	int a,b;cin>>a>>b;
    	adj[a].push_back(b);
    	adj[b].push_back(a);
    }
    que.push(1);par[1]=-1;vis[1]=true;
    while(!que.empty()){
    	int temp=que.front();que.pop();
    	for(int i=0;i<adj[temp].size();i++){
    		if(vis[adj[temp][i]])continue;
    		vis[adj[temp][i]]=true;
    		par[adj[temp][i]]=temp;
    		que.push(adj[temp][i]);
    	}
    }
    //for(int i=1;i<=n;i++)cout<<i<<" "<<par[i]<<endl;
    for(int i=0;i<q;i++){
    	int a,b,c;cin>>a>>b;
    	if(a==1){
    		c=par[b];
    		while(c>0){
    			//if(c==2&&b==3)cout<<"gg";
    			if(gcd(data[c],data[b])>1)break;
    			c=par[c];
    		}
    		cout<<c<<endl;
    	}
    	else{
    		cin>>data[b];
    	}
    }
}