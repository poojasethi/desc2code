#include<cstdio>
#include<vector>
#define MAX 100001
using namespace std;


vector<int> adj[MAX];
int arr[MAX];
int parent[MAX];
int n,q;

int gcd(int a,int b){
	if(b==0) return a;
	return gcd(b,a%b);
}

void dfs(int now,int par){
	parent[now]=par;
	for(int i=0;i<adj[now].size();i++)
		if(adj[now][i]!=par)
			dfs(adj[now][i],now);
}
int query(int c,int v){
	if(c==-1) return c;
	if(gcd(arr[c],v)>1) return c+1;
	return query(parent[c],v);
}
int main(){
	scanf("%d%d",&n,&q);
	for(int i=0;i<n;i++) scanf("%d",arr+i);
	for(int i=0;i<n-1;i++){
		int x,y;
		scanf("%d%d",&x,&y);
		x--;
		y--;
		adj[x].push_back(y);
		adj[y].push_back(x);
	}
	dfs(0,-1);
	for(int i=0;i<q;i++){
		int type;
		scanf("%d",&type);
		if(type==1){
			int x;
			scanf("%d",&x);
			printf("%d\n",query(parent[x-1],arr[x-1]));
		}else{
			int x,y;
			scanf("%d%d",&x,&y);
			arr[x-1]=y;
		}
	}
	return 0;
}