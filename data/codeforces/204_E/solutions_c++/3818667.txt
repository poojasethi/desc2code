#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<cstring>
#define N 420000
using namespace std;
int w[N],rank[N],tk[N],tr[N],sa[N],n,m,len,i,h[N],q[N],g[N],
	f[N],l,r,c[N],be[N],k,cnt,num[N],j,Max[N],TW[N];
char ch[N];
long long ans[N];
void da(){
	int i,p,m=n+200,j;
	for(i=1;i<=len;++i)w[rank[i]=c[i]]++;
	for(i=1;i<=m;++i)w[i]+=w[i-1];
	for(i=1;i<=len;++i)sa[w[c[i]]--]=i;
	for(j=1;j<=len;j+=j,m=p){
		p=0;
		for(i=len-j+1;i<=len;++i)tr[++p]=i;
		for(i=1;i<=len;++i)if(sa[i]>j)tr[++p]=sa[i]-j;
		for(i=1;i<=m;++i)w[i]=0;
		for(i=1;i<=len;++i)w[rank[i]]++;
		for(i=1;i<=m;++i)w[i]+=w[i-1];
		for(i=len;i>=1;--i)sa[w[rank[tr[i]]]--]=tr[i];
		for(i=1;i<=len;++i)tk[i]=rank[i];
		p=0;
		for(i=1;i<=len;++i)
			if(tk[sa[i]]==tk[sa[i-1]] && tk[sa[i]+j]==tk[sa[i-1]+j])
			rank[sa[i]]=p;
			else rank[sa[i]]=++p;
	}
	p=0;
	for(i=1;i<=len;++i){
		for(p?p--:0 ;c[i+p]==c[sa[rank[i]-1]+p];++p);
		h[rank[i]]=p;
	}
}
int main(){
	scanf("%d%d",&n,&m);
	len=0;
	for(i=1;i<=n;++i){
		scanf("%s",ch+1);
		l=strlen(ch+1);
		for(j=1;j<=l;++j)c[++len]=ch[j]-96,be[len]=i,Max[len]=l-j+1;
		c[++len]=i+200;
	}
	da();
	k=1;
	l=1; r=0;
	for(i=1;i<=len;++i){
		while(k<=len && cnt<m){
			if(be[sa[k]])cnt+=(++num[be[sa[k]]])==1;
			while(l<=r && h[k]<h[q[r]])r--;
			q[++r]=k;
			if(i!=1)TW[k]=h[q[l]];
			k++;
		}
		if(cnt<m)break;
		while(l<=r && q[l]<=i)l++;
		f[i]=k-1;
		if(l>r)g[i]=Max[sa[i]];
		else g[i]=h[q[l]];
		if(be[sa[i]])cnt-=(--num[be[sa[i]]])==0;
	}
	l=1; r=0;
	for(i=1;i<=len;++i){
		if(f[i]){
			while(l<=r && g[i]>g[q[r]])r--;
			q[++r]=i;
		}
		while(l<=r && f[q[l]]<i)l++;
		int o=TW[i];
		if(l<=r) o=max(o,g[q[l]]);
		ans[be[sa[i]]]+=o;
	}
	for(i=1;i<=n;++i)printf("%I64d ",ans[i]);
}