#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 1000010
#define mo 1000000007
#define int64 long long
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
struct ww {
	int a,b;
} a[N];
int i,j,k,n,m,x,y,A,B,an,K,s;
int64 b[N];
inline void fail() {
	printf("0\n");
	//for(;;);
	exit(0);
}
inline void prepare() {
	int i;
	b[0]=1;
	For(i,1,n) b[i]=b[i-1]*2%mo;
}
int main() {
	scanf("%d%d%d",&n,&m,&K); K++;
	prepare();
	For(i,1,m) {
		scanf("%d%d",&x,&y);
		if (x+1!=y&&x+K!=y) fail();
		if (x+K==y) {
			if (!A) A=x;
			B=x; s++;
		}
	}
	if (A+K<=B) fail();
	if (!A) {
		an=1;
		For(i,1,n-K) an=(an+b[min(K-1,n-K-i)])%mo;
	} else {
		int L=B,R=A+K,LL=1+K,RR=n-K,r=min(RR,R-1),l=max(L+1,LL);
		if (R>=l) an=b[R-l];
		For(i,L+1,r) {
			int A=R-1-max(l,i+1)+1;
			an=(b[i-L-1]*b[A]+an)%mo;
		}
		int D=B-A+1-s;
		//if (n==286597) printf("%d %d %d %d %d %d %d %d %I64d %d\n",A,B,L,R,LL,RR,l,r,b[D],an);
		an=b[D]*an%mo;
	}
	printf("%d\n",an);
	//for(;;);
	return 0;
}
