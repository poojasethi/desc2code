#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<climits>
using namespace std;
const int N(1e6+200);
const int MOD(1e9+7);
typedef long long LL;
#define yaoshou {puts("0");return 0;}
int n,m,k,pow[N],s0[N],s1[N],mnx,mxx,ans,mark[N];
inline int check(int x){
    return x>=MOD?x%MOD:x;
}
int main(){
    //freopen("test.txt","r",stdin);
    scanf("%d%d%d",&n,&m,&k);pow[0]=1;mnx=n+1;
    for(int i(1);i<=n;i++)pow[i]=check(pow[i-1]*2);
    for(int i(0),u,v;i<m;i++){
        scanf("%d%d",&u,&v);
        if(v==u+1)continue;
        if(v!=u+k+1)yaoshou;
        mark[u]=1;mnx=min(mnx,u);mxx=max(mxx,u);
    }
    if(mnx+k+1<=mxx)yaoshou;
    for(int i(1);i<=n;i++)s0[i]=s0[i-1]+(mark[i]==0),s1[i]=s1[i-1]+(mark[i]==1);
    for(int i(max(mxx,1));i+k+1<=n;i++){
        if(i>k+1&&s1[i-k-1])continue;
        ans=(ans+pow[s0[i-1]-s0[max(0,i-k-1)]])%MOD;
    }
    if(!s1[n])ans=(ans+1)%MOD;
    printf("%d\n",ans);
    return 0;
}