#include<cstdio>
#include<algorithm>
#define LL long long
using namespace std;
const int mod=1000000007;
int s[1000005],S;
int ksm(int x,int y)
{
	if(!y)return 1;
	int t=ksm(x,y>>1);
	if(y&1)
		return (LL)t*t%mod*x%mod;
	return (LL)t*t%mod;
}
int main()
{
	int n,m,k,ans=0;
	scanf("%d%d%d",&n,&m,&k);
	k++;
	for(int i=1,x,y;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		if(x==y-1)continue;
		if(y-x!=k)
			return puts("0"),0;
		s[x]++;S++;
	}
	ans=!S;
	for(int i=1;i<=n;i++)
		s[i]+=s[i-1];
	for(int i=k;i<n;i++)
		if(s[i]-s[i-k]==S)
			ans=(ans+ksm(2,min(n-i,k)-S-(s[i-k+1]==s[i-k])))%mod;
	printf("%d\n",ans);
}