#include<cstdio>
#include<algorithm>
#define ll long long
using namespace std;
const int mod=1000000007;
int d[1000005],S;
int val(int x,int y)
{
	if(!y)return 1;
	int t=val(x,y>>1);
	if(y&1)
		return (ll)t*t%mod*x%mod;
	return (ll)t*t%mod;
}
int main()
{
	int n,m,k,ans=0;
	while(~scanf("%d%d%d",&n,&m,&k))
    {
        k++;
        for(int i=1,x,y;i<=m;i++)
        {
            scanf("%d%d",&x,&y);
            if(x==y-1)continue;
            if(y-x!=k)
                return puts("0"),0;
            d[x]++;S++;
        }
        ans=!S;
        for(int i=1;i<=n;i++)
            d[i]+=d[i-1];
        for(int i=k;i<n;i++)
            if(d[i]-d[i-k]==S)
                ans=(ans+val(2,min(n-i,k)-S-(d[i-k+1]==d[i-k])))%mod;
        printf("%d\n",ans);
	}
}
