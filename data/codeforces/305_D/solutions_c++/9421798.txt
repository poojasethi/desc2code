#include<iostream>
#include<algorithm>
#include<cmath>
#include<cstring>
#include<cstdio>
using namespace std;
#define N 1100000
#define pp 1000000007
int n,m,k,s[N],b[N],ans=0;
int get(int l,int r){
    if(l>r)return 0;
    return r-l+1-(s[r]-s[l-1]);
}
int main(){
    scanf("%d%d%d",&n,&m,&k);++k;
    while(m--){
      int x,y;
      scanf("%d%d",&x,&y);
      if(y-x!=1 && y-x!=k){
        printf("0\n");
        return 0;
      }
      if(y-x==k)s[x]=1;
    }
    for(int i=1;i<=n;i++)s[i]+=s[i-1];
    b[0]=1;
    for(int i=1;i<=n;i++)b[i]=b[i-1]*2%pp;
    for(int i=1;i<=n-k;i++)
      if(s[i-1]==0 && s[min(i+k-1,n)]==s[n])
        ans=(ans+b[get(i+1,min(i+k-1,n-k))])%pp;
    if(s[n]==0)ans=(ans+1)%pp;
    cout<<ans<<endl;
    return 0;
}
