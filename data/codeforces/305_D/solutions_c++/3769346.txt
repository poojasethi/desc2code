#include <cstdio>
#include <algorithm>
using namespace std;

const int MOD = (1e9)+7;
int pw2[(int)(1e6)+3];

int main()
{
	int n, m, k;
	scanf("%d%d%d", &n, &m, &k);
	int a = 0, b = 0, c = 0;
	while(m--) {
		int u, v;
		scanf("%d%d", &u, &v);
		if(u+k+1 == v) {
			if(a == 0) a = u;
			b = u;
			++c;
		}
		else if(u+1 != v) {
			puts("0");
			return 0;
		}
	}

	pw2[0] = 1;
	for(int i = 1; i <= n; ++i) {
		pw2[i] = pw2[i-1] * 2;
		if(pw2[i] >= MOD) 
			pw2[i] -= MOD;
	}
	
	int res = (c == 0);
	for(int u = 1; u < n-k; ++u) {
		if(c == 0 || (u <= a && b <= u+k)) {
			int me = min(k, n-k-1-u);
			if(u == a) res += pw2[me-c+1];
			else res += pw2[me-c];
			if(res >= MOD) res -= MOD;
		}
	}
	
	printf("%d\n", res);
	return 0;
}
