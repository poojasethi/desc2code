#include <bits/stdc++.h>
#define fi first
#define se second
#define pb push_back
#define m ((b+s)>>1)
#define lb lower_bound
#define ub upper_bound
#define umax(a,b) a=max(a,b)
#define umin(a,b) a=min(a,b)

using namespace std;

typedef long long lint;
typedef pair <int,int> ii;
typedef vector <int> vi;
typedef vector <ii> vii;

const int maxn=1e6+20,mod=1e9+7;

int N,M,K,is[maxn],pw[maxn],sum,ans,mx,mn=1e9;

int top(int a,int b){
	a+=b;
	if(a>mod) a-=mod;
	return a;
}

int main(){
	scanf("%d %d %d",&N,&M,&K);
	mn=N;
	
	pw[0]=1;
	for(int i=1;i<=N;i++)
		pw[i]=top(pw[i-1],pw[i-1]);
	
	for(int i=1;i<=M;i++){
		int a,b;
		scanf("%d %d",&a,&b);
		
		if(b-a==1) continue;
		
		if(b-a!=K+1){
			printf("0\n");
			return 0;
		}
		
		is[b]=1;
		sum++;
		umax(mx,b);
		umin(mn,b);
	}
	
	if(mx-mn>K){
		printf("0");
		return 0;
	}

	for(int i=max(K+2,mx-K);i<=mn;i++){
		int in=sum-is[i];
		ans=top(ans,pw[min(N-i , K)-in]);
	}
	
	printf("%d\n",top(ans,(!sum)));
	
	return 0;
}
