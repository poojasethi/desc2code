#include <stdio.h>
#include <stdlib.h>

#define if if (
#define then )
#define do )
#define for for (
#define while while (
#define begin {
#define end }

char ch;
inline void read(int &x)
begin
	x=0;ch=getchar();
	while ch<=32 do ch=getchar();
	while ch>32 do begin
		x=x*10+ch-48;ch=getchar();
	end;
end;

#define MAXN 1000005
#define mo 1000000007

int n,m,k;
int s[MAXN];
int s1[MAXN];
int e[MAXN];

inline void die()
begin
	puts("0");
	exit(0);
end;

inline int min(int a,int b){return a<b?a:b;}

int main()
begin
	read(n);read(m);read(k);
	int i;
	int first=0;
	for i=1;i<=m;i++ do begin
		int x,y;
		read(x);read(y);
		if y-x!=1 && y-x!=k+1 then die();
		if y-x==k+1 then begin
			s[x]=1;
			if !first then first=x;
			if x-first>k then die();
		end;
	end;
	e[0]=1;
	for i=1;i<=n;i++ do begin
		s1[i]=s1[i-1]+s[i];
		s[i]=s[i-1]+(s[i]^1);
		e[i]=e[i-1]*2%mo;
	end;
	int cnt=s1[n];
	int ans=cnt==0;
	for i=1;i+k+1<=n;i++ do begin
		if s1[i+k]-s1[i-1]!=cnt then continue;
		ans=(ans+e[s[min(i+k,n-k-1)]-s[i]])%mo;
	end;
	printf("%d\n",ans);
end