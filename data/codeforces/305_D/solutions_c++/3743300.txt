#include <stdio.h>
#define M 1000000007
#define N 1000001
#define Min(a,b) (a<b?a:b)
int a[N],vis[N];
int main() {
//    freopen("in1.txt","r",stdin);
    int n,m,k,i,j,jj,fg=0,ans,en,tot,re;
    a[0]=1;
    for(i=1;i<N;i++) a[i]=(a[i-1]*2)%M;
    for(i=0;i<N;i++) vis[i]=0;
    scanf("%d %d %d",&n,&m,&k);
    while(m--) {
        scanf("%d %d",&i,&j);
        if(i==j-1) continue;
        if(i!=j-k-1) {fg=1;continue;}
        vis[i]=1;
    }
    for(i=n;i>=1;i--) if(vis[i]) break;
    en=i;
    for(i=1;i<=n;i++) if(vis[i]) break;
    if(i<=n) {
        i+=k+1;
        if(i<=en) fg=1;
    }
    if(fg) puts("0");
    else {
        tot=0;
        for(i=1;i<=n;i++) if(vis[i]) tot++;
        if(!tot) ans=1; else ans=0;
        for(i=1;i<=n;i++) {
            if(vis[i-1]) break;
            j=i+k+1;
            if(j>n) break;
            if(j<=en) continue;
            if(j+k>n) re=j+k-n; else re=0;
            ans=(ans+a[k-tot+vis[i]-re])%M;
        }
        printf("%d\n",ans);
    }
    return 0;
}
