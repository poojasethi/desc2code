#include<cstdio>
#include<cstring>
#include<algorithm>
#define N 2000000
#include<iostream>
using namespace std;
int a[N],pow[N],n,m,k,ans;
const int MOD=7+(int)1e9;

int main(){
	scanf("%d%d%d",&n,&m,&k);pow[0]=1;
	for(int i=1;i<=n;i++)
		pow[i]=(pow[i-1]+pow[i-1])%MOD;
	for(int i=1;i<=m;i++){
		int u,v;
		scanf("%d%d",&u,&v);
		if(v!=u+1){
			if(v!=u+k+1)return puts("0"),0;
			else a[u]=1;
		}
	}
	for(int i=1;i<=n;i++)
		a[i]+=a[i-1];
	int L=1,R=n;
	for(int i=1;i<=n;i++)
		if(a[i]-a[i-1]>0){
			L=i;
			R=min(R,i+k+1);
		}
	if(L>=R)return puts("0"),0;
	if(L==1&&a[1]==0)ans++;
	for(int i=L;i<R;i++){
		if(i+k+1>n)break;
		int pos;
		if(i>k)pos=k;
		else pos=i-1;
		pos-=a[i-1]-a[max(i-k-1,0)];
		ans+=pow[pos];
		if(ans>MOD)ans-=MOD;
	}printf("%d\n",ans);
}
