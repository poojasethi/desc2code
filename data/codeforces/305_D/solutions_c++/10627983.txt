#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
#include<vector>
using namespace std;
typedef long long LL;
const int SIZEN=1000010;
const LL MOD=1000000007;
LL pow2[SIZEN]={1};
int N,M,K;
vector<int> start;
int main(){
	//freopen("t1.in","r",stdin);
	for(int i=1;i<SIZEN;i++) pow2[i]=(pow2[i-1]*2)%MOD;
	scanf("%d%d%d",&N,&M,&K);
	int a,b;
	for(int i=1;i<=M;i++){
		scanf("%d%d",&a,&b);
		if(a>b) swap(a,b);
		if(b-a==1) continue;
		if(b-a!=K+1){
			printf("0\n");
			return 0;
		}
		start.push_back(a);
	}
	sort(start.begin(),start.end());
	if(start.size()&&start.back()-start.front()>K){
		printf("0\n");
		return 0;
	}
	LL ans=0;
	if(start.size()==0) ans=1;//һ��������
	for(int i=1;i+K+1<=N;i++){
		if(start.size()&&i>start.front()) break;
		if(start.size()&&i+K<start.back()) continue;
		int free=min(K,N-K-1-i)-start.size();
		if(start.size()&&i==start.front()) free++;
		//cout<<i<<" "<<free<<endl;
		ans=(ans+pow2[free])%MOD;
	}
	printf("%d\n",(int)ans);
	return 0;
}

