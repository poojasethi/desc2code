#include<stdio.h>
#include<string.h>
#include<algorithm>
#define N 1100000
#define mod 1000000007
using namespace std;
typedef long long ll;
int sum[N],p[N];
int st[N],top;
int main()
{
	int n,m,i,k,x,y,l,r,ans;
	scanf("%d%d%d",&n,&m,&k);
	for(i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		if(y!=x+k+1&&y!=x+1)
		{
			puts("0");
			return 0;
		}
		if(y==x+k+1)
			sum[x]=1,st[++top]=x;
	}
	sort(st+1,st+top+1);
	if(st[1]+k+1<=st[top])
	{
		puts("0");
		return 0;
	}
	p[0]=1;
	for(i=1;i<=n;i++)
	{
		sum[i]+=sum[i-1];
		p[i]=p[i-1]+p[i-1];
		if(p[i]>=mod)
			p[i]-=mod;
	}
	ans=1;
	if(top)
		l=max(1,st[top]-k),r=st[1];
	else
		l=1,r=n-k-1;
	for(i=l;i<=r;i++)
	{
		x=min(k,n-k-i-1)-top;
		if(sum[i]>sum[i-1])
			x++;
		ans+=p[x];
		if(ans>=mod)
			ans-=mod;
		if(sum[i]>sum[i-1])
			ans--;
	}
	printf("%d\n",(ans+mod)%mod);
	return 0;
}
