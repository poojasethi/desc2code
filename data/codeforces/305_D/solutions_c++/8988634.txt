#include <cstdio>
#include <algorithm>
const int MOD = 1000000007,N = 1000000 + 9;
int bit[N],n,m,K,ans;
int main()
{
	#ifndef ONLINE_JUDGE
	freopen("305D.in","r",stdin);
	freopen("305D.out","w",stdout);
	#endif
	scanf("%d%d%d",&n,&m,&K);
	bit[0] = 1;
	for (int i = 1; i <= K; ++i) bit[i] = bit[i - 1] * 2 % MOD;
	int l = n - K,r = 1,cnt = 0;
	for (int i = 1,x,y; i <= m; ++i) {
		scanf("%d%d",&x,&y);
		if (y - x != 1 && y - x != K + 1) return puts("0");
		if (y - x == K + 1) l = std::min(l,x),r = std::max(r,x),++cnt;
	}
	if (r - l >= K + 1) return puts("0");
	for (int i = 1; i < l; ++i) {
		if (r - i >= K + 1) continue;
		ans = (ans + bit[std::min(K + 1,n - K - i) - cnt - 1]) % MOD;
		//printf("%d\n",ans);
	}
	if (l != n - K) ans = (ans + bit[std::min(K + 1,n - K - l) - cnt]) % MOD;
	else ++ans;
	printf("%d\n",ans);
}
