#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<algorithm>
#define LL long long
using namespace std;
const LL p=1000000007;
LL pow[1000050];
int b[1000050],sum[1000050];
int n,m,k;
void fail(int x)
{
	printf("%d\n",x);
	exit(0);
}
int main()
{
	LL ans;
	int i,x,y,L,R;
	scanf("%d%d%d",&n,&m,&k);
	L=n+1; R=0;
	memset(b,0,sizeof(b));
	for (i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		if ((y-x!=1)&&(y-x!=k+1)) fail(0);
		if (y-x==k+1)
		{
			b[x]=1; L=min(L,x); R=max(R,x);
		}
	}
	for (i=1;i<=n;i++) sum[i]=sum[i-1]+b[i];
	if (R-L>=k+1) fail(0);
	if (k>=n-1) fail(1);
	pow[0]=1;
	for (i=1;i<=n;i++) pow[i]=(pow[i-1]*2)%p;
	if (L>R)
	{
		ans=1;
		for (i=1;i<=n-k-1;i++) ans=(ans+pow[min(k,n-k-1-i)])%p;
	}
	else
	{
		ans=0;
		for (i=max(R-k,1);i<=L;i++)
		{
			x=min(k,n-k-1-i); ans=(ans+pow[x-sum[i+x]+sum[i]])%p;
		}
	}
	printf("%d\n",ans); return 0;
}