#include <stdio.h>
#include <iostream>
#include <string.h>
#define ll long long
#define clr(a,b) memset(a,b,sizeof(a))
using namespace std;

const int mod=1000000007;
int n,m,k,l,r,num;

ll pow(ll a,ll b){
	ll ret=1;
	while(b){
		if(b&1)ret=ret*a%mod;
		a=a*a%mod;b>>=1;
	}return ret;
}

int main(){
	scanf("%d%d%d",&n,&m,&k);
	l=n+1;r=0;
	int f=0;
	num=0;
	for(int i=0;i<m;i++){
		int a,b;scanf("%d%d",&a,&b);
		if(a==b-1)continue;
		if(b-a-k!=1)f=1;
		else{
			num++;
			l=min(l,a);
			r=max(r,a);
		}
	}
	if(r-l>k)f=1;
	ll ans=0;
	if(!f){
		if(r){
			for(int i=l;i>=1;i--){
				int p=min(i+k,n-k-1);
				if(p<r)break;
				int s=num;
				if(i!=l)s++;
				ans=(ans+pow(2,p-i+1-s))%mod;
				//cout<<ans<<" "<<i<<" "<<p<<endl;
			}
		}else{
			ans=1;
			for(int i=n-k-1;i>=1;i--){
				int p=min(i+k,n-k-1);
				ans=(ans+pow(2,p-i+1-1))%mod;
				//cout<<ans<<" "<<i<<" "<<p<<endl;
			}
		}
	}
	printf("%I64d\n",ans);
}