#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<algorithm>
using namespace std;
const int mo=1000000007;
int i,j,k,n,m,x,y,a[1200000],ans,P[1200000],L,R;
int main(){
	scanf("%d%d%d",&n,&m,&k);
	k++;
	for(i=1;i+k<=n;++i)a[i]=1;
	P[0]=1;
	for(i=1;i<=n;++i)P[i]=(P[i-1]+P[i-1])%mo;
	L=10000000; R=-1;
	for(i=1;i<=m;++i){
		scanf("%d%d",&x,&y);
		if(y==x+1)continue;
		if(y!=x+k){
			printf("0\n");
			return 0;
		}
		a[x]=0;
		L=min(L,x);
		R=max(R,x);
	}
	if(R>=L+k){
		printf("0\n");
		return 0;
	}
	for(i=1;i<=n;++i)a[i]+=a[i-1];
	if(R==-1){
		for(i=1;i+k<=n;++i)
			ans=(ans+P[a[i+k-1]-a[i]])%mo;
	}else{
		for(i=max(1,R-k+1);i<L+k;++i)if(a[i]-a[i-1]==1)
			ans=(ans+P[a[i-1]-a[max(0,max(i,R)-k)]])%mo;
	}
	ans=(ans+1)%mo;
	printf("%d\n",ans);
//	system("pause");
}
