#include <iostream>
#include <cstdio>
using namespace std;
long long int n,m,k,a,b,adj[1000010],pow[1000010],vis[1000010],Mod=1000000007,res,x,ne;
int main()
{
    //freopen("r.txt","r",stdin);
    scanf("%I64d %I64d %I64d",&n,&m,&k);
    for(int i=0;i<m;i++)
    {
        scanf("%I64d %I64d",&a,&b);
        if(a!=b-1 && b-a!=k+1 )
        {
            printf("0");
            return 0;
        }
        if(a!=b-1) ///second type
            vis[a]++;
    }
    pow[0]=1;
    for(int i=1;i<=n;i++) adj[i]=adj[i-1]+vis[i];
    for(int i=1;i<=n;i++) pow[i]=pow[i-1]*2%Mod;
    if(adj[n]==0) res++;
    for(int i=1;i+k+1<=n;i++)
    {
        if(adj[i-1]>0 || adj[i+k]<adj[n] )
            continue;
        x=min(i+k , n-k-1);
        ne = (x-i)-(adj[x]-adj[i]);  ///number of edges between both and not from second type
        res+=(pow[ne]) , res%=Mod;
    }
    printf("%I64d",res%Mod);

    return 0;
}