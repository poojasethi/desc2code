#include <cstdio>
#include <utility>
#include <algorithm>
#define LL long long
using namespace std;

const LL MO=1000000007;
pair<int,int> a[100010];
int n,m,k,x,y,top;
LL ans;

LL Pow(LL a,LL b) {
	if (b<0) return 0;
	LL ret=1;
	for (;b;b>>=1ll) {if (b&1ll) ret=ret*a%MO;a=a*a%MO;}
	return ret;
}

int main() {
	scanf("%d%d%d",&n,&m,&k);
	for (int i=1;i<=m;++i) {
		scanf("%d%d",&x,&y);
		if ((x+1!=y)&&(x+1+k!=y)) {
			puts("0");
			return 0;
		}
		if (x+1!=y) {
			a[++top].first=x;
			a[top].second=y;
		}
	}
	if (1+k+1>n) {puts("1");return 0;}
	sort(a+1,a+top+1);
	if (!top)
		for (int l=1;l<=n-k-1;++l) {
			int r=min(n-k-1,l+k);
			if (l<n-k-1)
				ans=(ans+Pow(2ll,(LL)(r-l)))%MO;
			else
				ans=(ans+Pow(2ll,(LL)(r-l+1)))%MO;
		}
	else
		for (int l=max(1,a[top].first-k);l<=a[1].first;++l) {
			int r=min(n-k-1,l+k);
			if (l<a[1].first)
				ans=(ans+Pow(2ll,(LL)(r-l-top)))%MO;
			else
				ans=(ans+Pow(2ll,(LL)(r-l+1-top)))%MO;
		}
	printf("%I64d\n",ans);
	return 0;
}
