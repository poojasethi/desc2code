#include<cstdio>
#include<iostream>
#include<cstring>
#include<algorithm>
using namespace std;
int m,k,s[100002],t[100002],t2[100002],tc,u,u2,v;
bool marked[100002];
int a[100002],b[100002];
int main(){
    scanf("%d",&tc);
    while(tc--){
        scanf("%d %d",&m,&k);
        for(int i=1;i<=k;i++) scanf("%d",&s[i]);
        
        for(int i=1;i<=k;i++) t[i]=t2[i]=marked[i]=0;
        u=u2=v=0;
        
        for(int i=1;i<m;i++){
            scanf("%d %d",&a[i],&b[i]);
            if(a[i]) t[a[i]]++;
            else u++;
        }
        for(int i=1;i<m;i++){
            if(b[i] && !v){
                v=1;
                int ans=100000,ap=-1;
                for(int j=1;j<=k;j++){
                    if(t[j]==t2[j] && s[j]-t[j]<ans) ans=s[j]-t[j],ap=j;
                    if(t[j]==t2[j] && s[j]-t[j]<=u2) marked[j]=1;
                }
                u-=ans;
                t2[ap]=s[ap];
                break;
            }
            if(a[i]) t2[a[i]]++;
            else u2++;
        }
        for(int i=1;i<=k;i++){
            if(marked[i] || u>=s[i]-t[i]) printf("Y");
            else printf("N");
        }
        printf("\n");
    }
    return 0;
}