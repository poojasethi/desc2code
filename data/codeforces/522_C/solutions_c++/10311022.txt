#include<cstdio>
#include<cstring>
#include<algorithm>
#define MAXN 100010
using namespace std;
int T,n,m;
int a[MAXN],t[MAXN];
bool r[MAXN],vis[MAXN],ans[MAXN];
int main()
{
    int i,j;
    scanf("%d",&T);
    while(T--)
    {
        memset(vis,0,sizeof(vis));
        memset(ans,0,sizeof(ans));
        scanf("%d%d",&n,&m);
        for(i=1;i<=m;i++)
            scanf("%d",a+i);
        for(i=1;i<n;i++)
            scanf("%d%d",t+i,r+i);
        int left=0;
        bool flag=0;
        for(i=1;i<n;i++)
        {
            if(r[i]&&!flag)
            {
                flag=1;
                for(int j=i;j<n;j++)
                    vis[t[j]]=1;
                for(int j=1;j<=m;j++)
                    if(!vis[j]&&a[j]<=left)
                        ans[j]=1;
                int minn=1e9;
                for(int j=1;j<=m;j++)
                    if(!vis[j])
                        minn=min(minn,a[j]);
                left-=minn;
            }
            if(t[i])
                a[t[i]]--;
            else
                left++;
        }
        for(i=1;i<=m;i++)
            if(ans[i]||a[i]<=left)
                putchar('Y');
            else
                putchar('N');
        puts("");
    }
    return 0;
}