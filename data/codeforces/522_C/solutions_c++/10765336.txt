//  此题可以拆成若干个小问题。

#include <bits/stdc++.h>
#define rep(i,l,r) for (int i=l;i<=r;i++)
using namespace std;
const int maxn=100001;

int m,k;
int A[maxn],B[maxn];
int T[maxn],R[maxn];

int fiupset;
int unk,unk0;
bool used1[maxn];

char ans[maxn];

void init() {
	fiupset=unk=unk0=0;
	rep (i,1,k) used1[i]=0;
	rep (i,1,k) ans[i]='N'; ans[k+1]=0;
}
int main() {
	int tt; scanf("%d",&tt);
	for (;tt--;) {
		scanf("%d%d",&m,&k);
		init();
		rep (i,1,k) scanf("%d",A+i),B[i]=A[i];
		rep (i,1,m-1) {
			scanf("%d%d",T+i,R+i);
			if (R[i]&&!fiupset) fiupset=i;
			if (T[i]) {
				A[T[i]]--;
				if (fiupset) used1[T[i]]=1;
			}
			else {
				++unk;
				if (!fiupset) ++unk0;
			}
		}
		
		//全部是Y？
		
		if (fiupset) {
			int mn=0x7fffffff;
			rep (i,1,fiupset-1) if (T[i]) B[T[i]]--;  //又是概念混淆
			rep (i,1,k) {
				//  if (!B[i]) mn=0;  此情况被下面的所包含
				if (!used1[i]&&B[i]<=unk0) {
					ans[i]='Y';
					//cout<<i<<" "<<B[i]<<endl;
					mn=min(mn,B[i]);
				}
			}
			unk-=mn;
		}
		
		//cout<<A[4]<<" "<<unk<<endl;
		rep (i,1,k)
			if (A[i]<=unk)
				ans[i]='Y';
			
		puts(ans+1);
	}
	return 0;
}