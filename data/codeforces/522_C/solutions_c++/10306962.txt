#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <cstring>

using namespace std;

typedef long long LL;
int n,m,T,a[100005],x[100005],y[100005];
bool flag[100005],vis[100005];
int minn;
int sum;
int main()
{
	scanf("%d",&T);
	while (T--)
	{
		scanf("%d%d",&n,&m);
		sum=0;
		for (int i=1;i<=m;++i) scanf("%d",&a[i]);
		for (int i=1;i<=n-1;++i) scanf("%d%d",&x[i],&y[i]);
		memset(flag,0,sizeof(flag));
		memset(vis,0,sizeof(vis));
		bool first=false;
		memset(flag,false,sizeof(flag));
		memset(vis,true,sizeof(vis));
		for (int z=1;z<=n-1;++z)
		{
			if (!first&&y[z]==1)
			{
				first=true;
				for (int i=z;i<=n-1;++i) vis[x[i]]=false;
				minn=199509200;
				for (int i=1;i<=m;++i)
					if (sum>=a[i]&&vis[i])
					{
						minn=min(minn,a[i]);
						flag[i]=true;
					}
				sum-=minn;
			}
			if (x[z]!=0) a[x[z]]--;else sum++;
		}
		for (int i=1;i<=m;++i) if (sum>=a[i]) flag[i]=true;
		for (int i=1;i<=m;++i) if (flag[i]) printf("Y");else printf("N");
		printf("\n");
	}
	return 0;
}