#include <cstdio>
#include <algorithm>
using namespace std;

#define n	100005
#define For(i,a,b)	for(int i=a;i<=b;i++)

int		T,N,M,A[n],B[n],t[n],r[n];
bool	V[n];

int		main(){
		for	(scanf("%d",&T);T--;){
			scanf("%d%d",&N,&M);	N--;
			For(i,1,M)	scanf("%d",&A[i]);
			int flag=0,end=0,tot=0,cnt=0,Min=1<<30;

			For(i,1,N)	{
				scanf("%d%d",&t[i],&r[i]);
				if	(r[i]&&!end)	end=i;
				if	(!t[i])	flag=1,cnt++,tot+=(!end);
			}
			if	(!flag)	{
				For(i,1,N)	A[t[i]]--;
				For(i,1,M)	putchar(A[i]?'N':'Y');
			}	else	{
				if	(!end)	{
					For(i,1,N)	if	(t[i])	A[t[i]]--;
					For(i,1,M)	putchar(A[i]>cnt?'N':'Y');
				}	else	{
					For(i,1,M)	B[i]=0,V[i]=0;
					For(i,1,end-1)	if	(t[i])	A[t[i]]--;
					For(i,end,N)	if	(t[i])	B[t[i]]++;
					For(i,1,M)	if	(!B[i]&&A[i]<=tot)	V[i]=1,Min=min(Min,A[i]);
					cnt-=Min;
					For(i,1,M)	if	(A[i]-B[i]<=cnt)	V[i]=1;
					For(i,1,M)	putchar(V[i]?'Y':'N');
				}
			}	puts("");
		}
}