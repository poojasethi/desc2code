#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <vector>
#include <ctime>
#define fi first
#define se second
#define PA pair<int,int>
#define VI vector<int>
#define VP vector<PA >
#define mk(x,y) make_pair(x,y)
#define N 100010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,ti,T;
int a[N],b[N],f[N],s[N],an[N];
int main() {
	scanf("%d",&T);
	for (;T;T--) {
		scanf("%d%d",&n,&m); n--;
		For(i,1,m) scanf("%d",&a[i]),b[i]=a[i],f[i]=an[i]=0;
		ti=0;
		For(i,1,n) {
			int x,y;
			scanf("%d%d",&x,&y);
			if (y==1&&!ti) ti=i;
			a[x]--;
			if (ti) f[x]=1;
			else b[x]--;
			s[i]=s[i-1]+(x==0);
		}
		if (!ti) For(i,1,m) an[i]=a[i]<=s[n];
		else {
			int ma=0;
			For(i,1,m) if (!f[i]&&b[i]<=s[ti-1]) {
				an[i]=1;
				ma=max(ma,s[n]-b[i]);
			}
			For(i,1,m) if (a[i]<=ma) an[i]=1;
		}
		For(i,1,m) printf("%c",an[i]?'Y':'N');
		printf("\n");
	}
	return 0;
}
