#include <stdio.h>
#include <iostream>
#include <set>
#include <algorithm>
#include <vector>
#include <string>

using namespace std;

int main() {
	int tests;
	cin >> tests;
	for (int t = 0; t < tests; t++) {
		int m, k;
		cin >> m >> k;
		
		int *a = new int[k];
		bool *after = new bool[k];
		char *status = new char[k + 1];
		for (int i = 0; i < k; i++) {
			cin >> a[i];
			status[i] = 'N';
			after[i] = false;
		}
		//cout << dishes.size() << endl;
		status[k] = '\0';

		bool first = false;
		int d, r, next = 0, unknown = 0, bef = 0;
		for (int i = 0; i < m - 1; i++) {
			cin >> d >> r;

			if (r && !first) {
				first = true;
				bef = unknown;
			}

			if (d) {
				a[d - 1]--;
				if (first)
					after[d - 1] = true;
			} else
				unknown++;
		//	cout << "check " << status << " " << unknown << endl;
		}

		int mn = m + 1;
		for (int i = 0; i < k; i++) 
			if (a[i] <= bef && !after[i]) {
				mn = min(mn, a[i]);
				status[i] = 'Y';
			}
		if (mn < m + 1)
			unknown -= mn;
		for (int i = 0; i < k; i++) 
			if (a[i] <= unknown) 
				status[i] = 'Y';

		cout << status << endl;
	}

	return 0;
}