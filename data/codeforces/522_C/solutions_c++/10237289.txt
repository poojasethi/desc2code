#include <bits/stdc++.h> 

#define FOR(i, a, b) for(int i = a; i < b; ++i) 
#define FORR(i, n) FOR(i, 0, n) 
#define sz(v) int((v).size()) 
#define pb push_back 
#define all(e) (e).begin(), (e).end()
#define LSOne(S) (S & (-S)) // bit menos significativo

using namespace std;

#define ii pair<int,int>
#define ll long long

const int MAXN = 200005;
const ll MOD = 1000000007LL;

int a[MAXN];
int t[MAXN], r[MAXN];

int ans[MAXN];

int main () {
	int tst;
	cin>>tst;
	FORR (c, tst) {
		int m, k;
		cin>>m>>k;
		FORR (i, k) cin>>a[i];
		FORR (i, m-1) cin>>t[i]>>r[i];
		FORR (i, k) ans[i] = 0;
		int cnt = 0, x = m-1;		
		FORR (i, m-1) {
			if (r[i]) {
				x = i;
				break;
			}
		}
		set<int> mset;
		FOR (i, x, m-1) {
			int v = t[i]-1;
			if (v>=0) mset.insert (v);
		}
		FORR (i, x) {
			int v = t[i]-1;
			if (v>=0) {
				a[v]--;
			} else {
				cnt++;
			}
		}
		if (x<m-1) {
			int menor = MAXN;
			FORR (i, k) {
				if (mset.find(i)!=mset.end()) continue;
				if (cnt<a[i]) continue;
				ans[i] = 1;
				menor = min (menor, a[i]);
			}
			cnt -= menor;
		}
		FOR (i, x, m-1) {
			int v = t[i]-1;
			if (v>=0) {
				a[v]--;
			} else {
				cnt++;
			}
		}
		FORR (i, k) {
			if (cnt<a[i]) continue;
			ans[i] = 1;
		}
		FORR (i, k) cout << (ans[i]?'Y':'N');
		cout << endl;
	}
}