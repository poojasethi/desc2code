#include <bits/stdc++.h>
using namespace std;

int main() {
string h,a;
cin>>h>>a;
map<pair<string ,int>,int> m;
int n;
cin>>n;
int t,mn;
string cd,cn;
for(int i=0;i<n;i++)
{
 cin>>t>>cn>>mn>>cd;
 if(cn=="a") cn=a;
 else cn=h;
 //cout<<m[make_pair(cn,mn)]<<endl;
 if(m[make_pair(cn,mn)]==-1) continue;

 m[make_pair(cn,mn)]++;
 if( m[make_pair(cn,mn)]==2||cd=="r") cout<<cn<<" "<<mn<<" "<<t<<endl,m[make_pair(cn,mn)]=-1;
}
return 0;
}