h = raw_input().strip()
a = raw_input().strip()
n = int(raw_input())
y = set()
o = set()
for _ in xrange(n):
    line = raw_input().split()
    m = (h if line[1] == 'h' else a, line[2])
    if m in o:
        continue
    if line[3] == 'r':
        o.add(m)
        print m[0], m[1], line[0]
    elif m in y:
        o.add(m)
        y.remove(m)
        print m[0], m[1], line[0]
    else:
        y.add(m)
