home_team = raw_input()
away_team = raw_input()
foul_count = int(raw_input())

history = set()
fouled = set()
for i in range(0,foul_count):
    t, team, m, card = raw_input().split()
    team = home_team if team == 'h' else away_team
    if (team+m in history or card == 'r') and team+m not in fouled:
        print "%s %s %s" % (team, m, t)
        fouled.add(team+m)
    history.add(team+m)

