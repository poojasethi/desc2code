name = {}
name['h'] = raw_input()
name['a'] = raw_input()
n = int(raw_input())
yellow = {}
red = {}
yellow['h'] = {}
yellow['a'] = {}
red['h'] = {}
red['a'] = {}
for i in xrange(n):
    s = raw_input().split()
    if not s[2] in red[s[1]]:
        if s[2] in yellow[s[1]] or s[3] == 'r':
            red[s[1]][s[2]] = 1
            print name[s[1]], s[2], s[0]
        yellow[s[1]][s[2]] = 1
    