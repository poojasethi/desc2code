#include <bits/stdc++.h>
#define mn 100100
#define mm 2010
using namespace std;
int x[mn],y[mn],deg[mn],color[mn];
int l[mm][mm],n1,n2,m,ans;
void fix(int k,int aim,int c)
{
    int a=x[k],b=y[k],t,c2;
    if (aim!=a)
    {
        a=y[k];
        b=x[k];
    }
    c2=color[k];
    l[b][c2]=0;
    color[k]=c; l[a][c]=k;
    t=l[b][c];
    l[b][c]=k;
    if (t!=0) fix(t,b,c2);
}
void paint(int k)
{
    int a=x[k],b=y[k],t,c1=0,c2=-1;
    for (int i=1; i <= ans; i++)
    {
        if (l[a][i]==0) c1=i;
        if (l[b][i]==0) c2=i;
        if (c1==c2) break;
    }
    color[k]=c1;
    t=l[b][c1];
    l[a][c1]=k;
    l[b][c1]=k;
    if (t != 0 && c1 != c2) fix(t,b,c2);
}
void input()
{
    //freopen("COLOR.INP","r",stdin);
    //freopen("COLOR.OUT","w",stdout);
    cin >> n1 >> n2 >> m;
    ans=0;
    memset(deg,0,sizeof(deg));
    for (int i=1;i <= m; i++)
    {
        cin >> x[i] >> y[i];
        y[i]+=n1;
        deg[x[i]]++;
        deg[y[i]]++;
        ans=max(ans,deg[x[i]]);
        ans=max(ans,deg[y[i]]);
        paint(i);
    }
    cout << ans << endl;
    for (int i=1; i <= m; i++) cout << color[i] << " ";
}
int main()
{
    ios_base::sync_with_stdio(0);
    input();
}
