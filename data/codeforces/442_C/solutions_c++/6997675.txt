#include <iostream>

using namespace std;

int main() {
	int n;
	int a[500005];
	cin >> n;
	int m = -1;
	long long ans = 0;
	for(int k = 0; k < n; ++k) {
		cin >> a[++m];
		while(m >= 2 && a[m - 1] <= min(a[m - 2], a[m])) {
			ans += min(a[m - 2], a[m]);
			a[m - 1] = a[m];
			--m;
		}
	}
	for(int k = 1; k < m; ++k) {
		ans += min(a[k - 1], a[k + 1]);
	}
	cout << ans << endl;
	return 0;
}
