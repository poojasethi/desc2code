#include<bits/stdc++.h>
int st[5000005],top = 0,x, n, i, j;
int main()
{   scanf("%d",&n);
    long long int sum = 0;
    for(i=1;i<=n;i++)
    {
        scanf("%d",&x);
        while(top>1 && st[top-1]>=st[top] && x>=st[top])
        {
            sum+=std::min(x,st[top-1]);
            top--;
        }
        st[++top] = x;
    }
    std::sort(&st[1],&st[1]+top);
    for(i=1;i<=top-2;i++) sum+=st[i];
    printf("%I64d\n",sum);
    return 0;
}