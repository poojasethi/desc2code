#include<iostream>
#include<cmath>
#include<cstring>
#include<cstdio>
#include<algorithm>
#include<iomanip>
using namespace std;
#define ll long long
ll q[500000+10];
int main()
{
    ll n,x;
    cin>>n;
    ll ans=0;
    ll top=-1;
    while(n--)
    {
        cin>>x;
        while(top>=1&&q[top]<=q[top-1]&&q[top]<=x)
        {
            ans+=min(q[top-1],x);
            top--;
        }
        q[++top]=x;
    }
    sort(q,q+top+1);
    for(int i=0;i<top-1;i++)
        ans+=q[i];
    cout<<ans<<endl;
return 0;
}

	 		    			 	 		  	  	   		   	