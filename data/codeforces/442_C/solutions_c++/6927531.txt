#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
typedef long long ll;
#define N 500005
int a[N];
int n,top;
ll ans;

int main(){
  int i;
  scanf("%d",&n);
  ans=0;
  for (i=1;i<=n;++i){
    scanf("%d",&a[++top]);
    while (top>1 && a[top]>=a[top-1] && a[top-2]>=a[top-1]){
      ans+=min(a[top],a[top-2]);
      a[top-1]=a[top];
      --top;
    }
  }
  sort(a+1,a+top+1);
  for (i=1;i<top-1;++i) ans+=a[i];
  printf("%I64d\n",ans);
  return 0;
}