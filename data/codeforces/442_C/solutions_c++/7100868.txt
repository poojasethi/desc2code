#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;

typedef long long LL;
inline int min(int a,int b){ return a<b?a:b;}
const int maxn=500005;
int n,f[maxn];

int main()
{
	int i,top,x;
	LL ans;
	while(~scanf("%d",&n))
	{
		ans=0;top=0;
		for(i=0;i<n;i++)
		{
			scanf("%d",&x);  
			while(top>1&&f[top-2]>=f[top-1]&&x>=f[top-1])  
			{  
				ans+=min(x,f[top-2]);  
				top--;  
			}  
			f[top++]=x;  
		}
		sort(f,f+top);
		for(i=0;i<top-2;i++) ans+=f[i];
		printf("%lld\n",ans);
	}
	return 0;
}
 			   		   	 			 	    	