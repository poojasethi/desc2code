#include <cstdio>
#include <cstring>
#include <stack>
#include <algorithm>
using namespace std;
typedef long long ll;
ll a[600000];
int main()
{
	int n;
	scanf("%d",&n);
	ll tmp;
	int pos=0;
	ll sum=0;
	for(int i=1;i<=n;i++)
	{
		scanf("%I64d",&tmp);
		while(pos>1&&a[pos]<=tmp&&a[pos]<=a[pos-1])
		{
			sum+=min(a[pos-1],tmp);
			pos--;
		}
		a[++pos]=tmp;
	}
	sort(a+1,a+1+pos);
	for(int i=1;i<=pos-2;i++)
		sum+=a[i];
	printf("%I64d",sum);
	return 0;
}