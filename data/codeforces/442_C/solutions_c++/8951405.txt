#include <iostream> 
#include <cstdio>
#include <algorithm>
#define lld long long
using namespace std;  
lld p[600000],n,x,ans;  
int main()  
{
	int top=-1;
    scanf("%d", &n);
    for(int i=1;i<=n;i++)
    {
        scanf("%I64d",&x);
        while(top>=1 && p[top]<=p[top-1] && p[top]<=x)
            ans += min(p[--top],x);
        p[++top]=x;
    }
    sort(p,p+top+1);
    for(int i=0;i<top-1;i++) ans+=p[i];
    cout<<ans<<endl;
    return 0;
}