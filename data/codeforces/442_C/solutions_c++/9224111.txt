#include<cstdio>
#include<iostream>
#include<algorithm>
#define MIN(x,y) ( (x) >= (y) ? (y) : (x) )
using namespace std;
int M[500000];
int S[500000], ptr;
int main(){
int n;
scanf("%d", &n);
long long int ans = 0;
for (int i = 0; i < n; i++)
scanf("%d", M + i);
ptr = 0;
for (int i = 0; i < n; i++){ // H L H
while (ptr >= 2 && S[ptr - 1] <= S[ptr - 2] && M[i] >= S[ptr - 1]){
ans += MIN(S[ptr - 2], M[i]);
ptr--;
}
S[ptr++] = M[i];
}
sort(S, S + ptr);
for (int i = 0; i < ptr - 2; i++)
ans += S[i];
cout<<ans<<endl;

return 0;
}
