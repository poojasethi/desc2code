#include <cstdio>
#include <cstdlib>
#include <algorithm>
#include <iostream>
using namespace std;

const int N = 555555;
int st[N];
long long sum;
int top,n;
int main(){
	scanf("%d",&n);
	for(int i = 0,x;i < n;i++){
		scanf("%d",&x);
		while(top > 1 && st[top-2] >= st[top-1] && st[top-1] <= x){
			sum += min(st[top-2], x);
			top--;
		}
		st[top++] = x;
	}
	sort(st,st+top);
	for(int i = 0;i + 2 < top;i++)
		sum += st[i];
	cout << sum << endl;
	return 0;
}