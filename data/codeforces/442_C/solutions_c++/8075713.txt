#include <cstdio>
#include <cstring>
#include <algorithm>
#define MAXN 1000005
using namespace std;

int n;
int que[MAXN];

int main()
{
	scanf("%d",&n);
	int l = 0, r = -1;
	long long res = 0LL;
	for (int i = 0; i < n; i++)
	{
		int x;
		scanf("%d",&x);
		while (l + 1 <= r && que[r-1] >= que[r] && x >= que[r])
		{
			res += min(x,que[r-1]);
			r--;
		}
		que[++r] = x;
	}
	sort(que+l,que+r+1);
	for (int i = l ; i <= r-2; ++i)
	{
		res += que[i];
	}
	printf("%I64d\n",res);
	return 0;
}

   