#include<iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

int p[500010];
int top,n;
int main()
{
    int x;
    long long sum;
    top = -1 ; sum = 0 ;
    cin>>n;
    while(n--)
    {
        cin>>x;
        while( top >= 1 && p[top] <= p[top-1] && p[top] <= x )
        {
             sum+= min( p[top-1],x );
            top-- ;
        }
        p[++top] = x ;
    }
    sort(p,p+(top+1));
    for(int i=0;i<top-1;i++)
       sum+=p[i];
    cout<<sum<<endl;
    return 0;
}

 	 	 	  		    	  	    		