# include <iostream>
# include <algorithm>
# define fi cin
# define fo cout
using namespace std;
# define nmax 1000000+5
long long S[nmax];
int main(void)
{
    int n,m=0;
    fi>>n;
    long long ans=0;
    while (n--)
    {
        fi>>S[++m];
        while (m>2 && S[m-1]<=min(S[m],S[m-2])) 
		    ans+=min(S[m],S[m-2]),S[--m]=S[m+1];
    }
    for (int i=2;i<m;++i) ans+=min(S[i-1],S[i+1]);
    fo<<ans<<'\n';
    return 0;
}
