#include<cstdio>
#include<algorithm>
using namespace std;
int x,n,i,stack[500005],top;
long long ans=0;
int main()
{
  scanf("%d",&n);
  for (i=1;i<=n;i++)
  {
    scanf("%d",&x);
    while (top>1&&stack[top-1]>=stack[top]&&stack[top]<=x) 
      ans+=(long long)min(stack[top-1],x),top--;
    stack[++top]=x;
  }
  sort(stack+1,stack+top+1);
  for (i=1;i<top-1;i++) ans+=(long long)stack[i];
  printf("%I64d",ans);
  return 0;
}
