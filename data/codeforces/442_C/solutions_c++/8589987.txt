#include <cstdio>
#include <iostream>
#include <cstring>
#include <cmath>
#include <algorithm>

using namespace std;

int n,x,a[500005],q[500005],q0=-1;
long long ans;
int main()
{
	scanf("%d",&n);
	for (int i=1;i<=n;++i)
	{
		scanf("%d",&x);
		while (q0>=1&&q[q0]<=q[q0-1]&&q[q0]<=x)
		{
			ans+=min(q[q0-1],x);
			q0--;
		}
		q[++q0]=x;
	}
	sort(q,q+q0+1);
	for (int i=0;i<=q0-2;++i) ans+=q[i];
	printf("%I64d\n",ans);
}
  	 	   	  	   	 				 		 			 	