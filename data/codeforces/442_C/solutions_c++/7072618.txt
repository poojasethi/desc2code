#include <iostream>
#include <algorithm>
#include <set>
using namespace std;

int main() {
	ios::sync_with_stdio(false); 
	int n, p = 0;
	cin >> n; 
	long long ans = 0; 
	static int a[500000], b[500000];
	for (int i = 0; i < n; ++ i) {
		cin >> a[i]; 
		while (p >= 2 && b[p - 2] >= b[p - 1] && b[p - 1] <= a[i]) 
			ans += min(b[p - 2], a[i]), -- p;
		b[p ++] = a[i]; 
	}
	sort(b, b + p);
	for (int i = 0; i < p - 2; ++ i)
		ans += b[i]; 
	cout << ans << endl; 
}