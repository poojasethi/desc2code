#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<vector>
#include<deque>
using namespace std;

#define rep(i,a,n) for(int i=(a); i<(n); ++i)
#define ll long long
const int N = 1000 + 5;
int n,m,a,b;
ll mat[N][N], sum[N][N], Min[N][N];
pair<ll, pair<int, int> > pii[N*N], p2[N*N];
bool vis[N][N];

ll get(int i, int j){
    return (i<0||j<0) ? 0: sum[i][j];
}

int main () {
    //freopen("D.in", "r", stdin);
    scanf("%d%d%d%d",&n,&m,&a,&b);
    rep(i,0,n) rep(j,0,m) scanf("%d", &mat[i][j]);
    rep(i,0,n) rep(j,0,m) {
        sum[i][j] = get(i,j-1)+get(i-1,j)-get(i-1,j-1)+mat[i][j];
    }
    rep(i,0,n) {
        deque<int> q;
        rep(j,0,m) {
            while(!q.empty() && q.front()+b<=j) q.pop_front();
            while(!q.empty() && mat[i][q.back()]>=mat[i][j]) q.pop_back();
            q.push_back(j);
            Min[i][j] = mat[i][q.front()];
        }
    }
    rep(i,0,n) rep(j,0,m) mat[i][j] = Min[i][j];
    rep(i,0,m) {
        deque<int> q;
        rep(j,0,n) {
            while(!q.empty() && q.front()+a<=j) q.pop_front();
            while(!q.empty() && mat[q.back()][i]>=mat[j][i]) q.pop_back();
            q.push_back(j);
            Min[j][i] = mat[q.front()][i];
        }
    }

    //rep(i,0,n) {rep(j,0,m) cout<<Min[i][j]<<" "; cout<<endl;}
    int cnt = 0;
    rep(i, a-1, n) {
        rep(j, b-1, m) {
            ll t = get(i,j) - get(i-a,j) - get(i,j-b) + get(i-a,j-b) - Min[i][j]*a*b;
            pii[cnt++] = make_pair(t, make_pair(i,j));
        }
    }
    sort(pii, pii+cnt);
    //cout<<pii[0].first<<" "<<pii[0].second.first<<" "<<pii[0].second.second<<endl;
    int c = 0;
    rep(i, 0, cnt) {
        pair<int,int> t = pii[i].second;
        int x = t.first, y = t.second;
        if(vis[x][y] || vis[x-a+1][y-b+1] || vis[x-a+1][y] || vis[x][y-b+1]) continue;
        p2[c++] = pii[i];
        for(int j=x-a+1;j<=x;++j) {
            for(int k=y-b+1;k<=y;++k) vis[j][k] = 1;
        }
    }

    //cout<<c<<endl;
    //for(int i=0;i<c;++i) cout<<p2[i].second.first-a+2<<" "<<p2[i].second.second-b+2<<" "<<p2[i].first<<endl;
    printf("%d\n",c);
    for(int i=0;i<c;++i) 
        printf("%d %d %lld\n", p2[i].second.first-a+2,p2[i].second.second-b+2,p2[i].first);
    return 0;
}

	    				 					 						 	 	 	