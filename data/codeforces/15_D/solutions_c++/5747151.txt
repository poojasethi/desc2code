#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<ctime>
#include<cmath>
#include<iostream>
#include<string>
#include<deque>
#include<list>
#include<queue>
#include<vector>
#include<algorithm>
#include<map>
#include<stack>
#include<set>
using namespace std;
#define ll long long
#define lowbit(x) (x&-x)
#define F first
#define S second
#define pr pair<int,int>
#define m_p(x,y) make_pair(x,y)
#define eps 1e-8
#define pi acos(-1.0)
#define square(x) ((x)*(x))
#define getvec(x,y) ((y)-(x))
#define xmul(x1,y1,x2,y2) ((x1)*(y2)-(x2)*(y1))
#define inf 0x3f3f3f3f
#define mod ((ll)1e9+7)
#define maxn 1010
int a[maxn][maxn],b[maxn][maxn],n,m,r,c;
ll s[maxn][maxn];
bool vis[maxn][maxn];
struct node {
    int x,y; ll v; bool operator < (const node &p) const {
        if(v!=p.v) return v<p.v;
        if(x!=p.x) return x<p.x; return y<p.y;
    }
}p[maxn*maxn];

int main()
{
#ifndef ONLINE_JUDGE
	freopen("G:\\ACM\\inandout\\in.txt","r",stdin);
//	freopen("G:\\ACM\\inandout\\out.txt","w",stdout);
#endif
    scanf("%d%d%d%d",&n,&m,&r,&c);
    for(int i=1;i<=n;i++) for(int j=1;j<=m;j++) scanf("%d",&a[i][j]),s[i][j]+=s[i][j-1]+a[i][j];
    for(int i=1;i<=m;i++) for(int j=1;j<=n;j++) s[j][i]+= s[j-1][i];
    for(int i=1;i<=n;i++) {
        multiset<int> st;
        for(int j=1;j<=m;j++) {
            if(j>c) st.erase(st.find(a[i][j-c]));
            st.insert(a[i][j]);
            b[i][j]=*st.begin();
        }
    }
    for(int i=1;i<=m;i++) {
        multiset<int> st;
        for(int j=1;j<=n;j++) {
            if(j>r) st.erase(st.find(b[j-r][i]));
            st.insert(b[j][i]);
            a[j][i]=*st.begin();
        }
    } int cnt=0;
    for(int i=r;i<=n;i++) for(int j=c;j<=m;j++) {
        ll tmp=s[i][j]-s[i-r][j]-s[i][j-c]+s[i-r][j-c];
        p[cnt++]=(node){i,j,tmp-(ll)a[i][j]*(ll)r*c};
    } sort(p,p+cnt); int num=0;
    for(int i=0;i<cnt;i++) if(!vis[p[i].x][p[i].y]) {
        for(int x=min(p[i].x+r-1,n);x>p[i].x-r;x--)
            for(int y=min(p[i].y+c-1,m);y>p[i].y-c;y--) vis[x][y]=1;
        p[num++]=p[i];
    } cout<<num<<endl;
    for(int i=0;i<num;i++) printf("%d %d %I64d\n",p[i].x-r+1,p[i].y-c+1,p[i].v);
	return 0;
}
