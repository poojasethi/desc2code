#include <cstdio>
#include <algorithm>
#include <vector>
#include <set>
using namespace std;
int n,m,a,b;
set< pair< long long,pair<int,int> > >c;
#define N 1005
long long g[N][N],h[N][N],r[N][N];
int s[N][N];
int p[N],v[N],d[N][N];
vector< pair< long long,pair<int,int> > >e;
#define pb push_back
int main(){
    scanf("%d%d%d%d",&n,&m,&a,&b);
    for (int i=1;i<=n;i++)
        for (int j=1;j<=m;j++)
            scanf("%d",&s[i][j]);
    for (int i=n;i>=1;i--)
        for (int j=m;j>=1;j--){
            r[i][j] = r[i][j+1] + s[i][j];
        }
    for (int i=n;i>=1;i--)
        for (int j=m;j>=1;j--){
            g[i][j] = g[i+1][j] - (r[i+a][j] - r[i+a][j+b]) + (r[i][j] - r[i][j+b]);
        }
    for (int i=n;i>=1;i--){
        int st = 0, en = 0;
        for (int j=m;j>=1;j--){
            while (st < en && v[en-1] > s[i][j]) en--;
            p[en] = j; v[en] = s[i][j]; en++;
            while (st < en && p[st] - j >= b) st++;
            h[i][j] = v[st];
        }
    }
    for (int j=m;j>=1;j--){
        int st = 0, en = 0;
        for (int i=n;i>=1;i--){
            while (st < en && v[en-1] > h[i][j]) en--;
            p[en] = i; v[en] = h[i][j]; en++;
            while (st < en && p[st] - i >= a) st++;
            h[i][j] = min(h[i][j],(long long)v[st]);
        }
    }
    #define mp make_pair
    for (int i=1;i<=n-a+1;i++)
        for (int j=1;j<=m-b+1;j++)
            c.insert(mp(g[i][j]-h[i][j]*a*b,mp(i,j)));
    while (!c.empty()){
        long long he = (*c.begin()).first;
        int x = (*c.begin()).second.first;
        int y = (*c.begin()).second.second;
        if (d[x][y] == 0){
            e.pb(mp(he,mp(x,y)));
            for (int i=x-a+1;i<x+a;i++)
                for (int j=y-b+1;j<y+b;j++)
                if (i > 0 && j > 0 && i <= n && j <= m)
                    d[i][j] = 1;
        }
        c.erase(c.begin());
    }
    printf("%d\n",e.size());
    for (int i=0;i<e.size();i++){
        printf("%d %d %I64d\n",e[i].second.first,e[i].second.second,e[i].first);
    }
    return 0;
}