#include <iostream>
#include <map>
using namespace std;
 
 struct point{int x;int y;};
 
int main()
{
 int x0,y0,x1,y1,n,r,a,b,i,j;
 
 
 map <int, map<int,int> > mmi;
     
 cin>>x0>>y0>>x1>>y1>>n;
 for(  i=0;i<n;i++)
  {
   cin>>r>>a>>b;      
   for(j=a;j<=b;j++)mmi[r][j]=-1;
  }
 mmi[x0][y0]=-2;
 
 
 point pts[200000];
 
 point strt;strt.x=x0;strt.y=y0;
 pts[0]=strt;
 int qbeg=0;int qend=1;
 while(qbeg<qend)
 {
  int wx=pts[qbeg].x;
  int wy=pts[qbeg].y;  
  int tw=mmi[wx][wy];if (tw==-2){tw=0;}
  for(i=-1;i<=1;i++)
   for(j=-1;j<=1;j++)
   if ( (i!=0)||(j!=0) )
    if ( mmi[wx+i][wy+j]==-1)
     {
       mmi[wx+i][wy+j]=tw+1;  
       point pt;pt.x=wx+i;pt.y=wy+j;    
       pts[qend]=pt;
       qend++;     
     }               
  qbeg++;               
 }
 cout<<mmi[x1][y1]; 
  
 
  
 return 0;   
}
