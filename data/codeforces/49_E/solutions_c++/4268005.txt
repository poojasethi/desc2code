#include<iostream>
#include<cstdio>
#include<cstring>
#include<string>
using namespace std;
bool fa[55][55][27];
bool fb[55][55][27];
int opt[55][55];
int n;
string A,B;
int chaa[55],chab[55],chac[55];
int main()
{
	cin>>A>>B;
	int na=A.length(),nb=B.length();
	cin>>n;
	for(int i=0;i<n;i++)
	{
		string sp;
		cin>>sp;
		char x=sp[0],y=sp[3],z=sp[4];
		chaa[i]=x-'a';chab[i]=y-'a';chac[i]=z-'a';
	}
	for(int i=0;i<na;i++)
	{
		fa[i][i][A[i]-'a']=1;
	}
	for(int p=1;p<na;p++)
		for(int l=0;l+p<na;l++)
		{
			int r=l+p;
			for(int x=0;x<26;x++)
				for(int i=0;i<n;i++)
					if (chaa[i]==x)
						for(int m=l;m<r;m++)
							fa[l][r][x]|=fa[l][m][chab[i]]&fa[m+1][r][chac[i]];
		}
	for(int i=0;i<nb;i++)
	{
		fb[i][i][B[i]-'a']=1;
	}
	for(int p=1;p<nb;p++)
		for(int l=0;l+p<nb;l++)
		{
			int r=l+p;
			for(int x=0;x<26;x++)
				for(int i=0;i<n;i++)
					if (chaa[i]==x)
						for(int m=l;m<r;m++)
							fb[l][r][x]|=fb[l][m][chab[i]]&fb[m+1][r][chac[i]];
		}
	memset(opt,0x7f,sizeof(opt));
	opt[0][0]=0;
	for(int i=1;i<=na;i++)
	{
		for(int j=1;j<=nb;j++)
		{
			for(int k=0;k<i;k++)
			{
				for(int l=0;l<j;l++)
				{
					bool f=0;
					for(int p=0;p<26 && !f;p++)
					{
						f|=fa[k][i-1][p]&fb[l][j-1][p];
					}
					if (f) opt[i][j]=min(opt[i][j],opt[k][l]);
				}
			}
			opt[i][j]++;
		}
	}
	if (opt[na][nb]==0x7f7f7f80) cout<<-1<<endl;
	else cout<<opt[na][nb]<<endl;
}

