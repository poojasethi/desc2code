#include<cstdio>
#include<cstring>

void Get(int &T)
{
	char C;bool F=0;
	for(;C=getchar(),C<'0'||C>'9';)if(C=='-')F=1;
	for(T=C-'0';C=getchar(),C>='0'&&C<='9';T=T*10+C-'0');
	F&&(T=-T);
}

void Get(char &C)
{
	for(;C=getchar(),C<'a'||C>'z';);
}


char S1[55];
char S2[55];

int N,M;
int K;

char A[255],B[255],C[255];

void Init()
{
	gets(S1+1);gets(S2+1);
	N=strlen(S1+1);
	M=strlen(S2+1);
	
	Get(K);
	for(int i=1;i<=K;i++)
	{
		Get(A[i]);Get(B[i]);Get(C[i]);
		A[i]-='a';A[i]++;
		B[i]-='a';B[i]++;
		C[i]-='a';C[i]++;
	}
}

int F1[55][55];
int F2[55][55];

void DP1(char *S,int N,int F[][55])
{
	for(int i=1;i<=N;i++)
		F[i][i]|=(1<<S[i]);
	
	for(int l=2;l<=N;l++)
		for(int i=1,j=l;j<=N;i++,j++)
		{
			for(int k=i;k<j;k++)
				for(int p=1;p<=K;p++)
					if(((F[i][k]>>B[p])&1)&&((F[k+1][j]>>C[p])&1))
						F[i][j]|=(1<<A[p]);
		}
}

int F[55][55];

void Work()
{
	for(int i=1;i<=N;i++)
	{
		S1[i]-='a';S1[i]++;
	}
	
	for(int i=1;i<=M;i++)
	{
		S2[i]-='a';S2[i]++;
	}
	
	DP1(S1,N,F1);
	DP1(S2,M,F2);
	
	memset(F,0x2f2f2f2f,sizeof F);
	F[0][0]=0;
	for(int i=1;i<=N;i++)
		for(int j=1;j<=M;j++)
		{
			for(int i0=0;i0<i;i0++)
				for(int j0=0;j0<j;j0++)
				{
					if((F1[i0+1][i]&F2[j0+1][j])&&F[i][j]>F[i0][j0]+1)
						F[i][j]=F[i0][j0]+1;
				}
		}
}

void Output()
{
	if(F[N][M]>=0x2f2f2f2f)
		puts("-1");
	else
		printf("%d\n",F[N][M]);
}

int main()
{
	Init();
	Work();
	Output();
	return 0;
}