#include<stdio.h>
#include<string.h>
char s1[60],s2[60];
long long g1[51][51],g2[51][51];
int n,l1,l2;
int min(int x,int y)
{
  if (x<y) return x;return y;
}
void input()
{
  int i,j,len,mid;
  long long sa[60],sb[60],sc[60];
  char s[10];
  scanf("%s",s1);scanf("%s",s2);
  l1=strlen(s1);l2=strlen(s2);
  scanf("%d",&n);
  for (i=0;i<n;i++)
    {
      scanf("%s",s);
      sa[i]=1LL<<(s[0]-'a');
      sb[i]=1LL<<(s[3]-'a');
      sc[i]=1LL<<(s[4]-'a');
    }
  for (i=0;i<l1;i++)
    g1[i][i]=1LL<<(s1[i]-'a');
  for (len=1;len<=l1-1;len++)
    for (i=0;i<l1-len;i++)
      for (mid=i;mid<i+len;mid++)
        for (j=0;j<n;j++)
          if (g1[i][mid]&sb[j])
            if (g1[mid+1][i+len]&sc[j])
              g1[i][i+len]|=sa[j];
  for (i=0;i<l2;i++)
    g2[i][i]=1LL<<(s2[i]-'a');
  for (len=1;len<=l2-1;len++)
    for (i=0;i<l2-len;i++)
      for (mid=i;mid<i+len;mid++)
        for (j=0;j<n;j++)
          if (g2[i][mid]&sb[j])
            if (g2[mid+1][i+len]&sc[j])
              g2[i][i+len]|=sa[j];
}
void work()
{
  int dp[51][51];
  int i,j,a,b;
  memset(dp,0xe,sizeof(dp));
  dp[0][0]=0;
  for (i=1;i<=l1;i++)
    for (j=1;j<=l2;j++)
      for (a=1;a<=i;a++)
        for (b=1;b<=j;b++)
          if (g1[a-1][i-1]&g2[b-1][j-1])
            dp[i][j]=min(dp[i][j],dp[a-1][b-1]+1);
  if (dp[l1][l2]<51) printf("%d\n",dp[l1][l2]);
  else printf("-1\n");
}
int main()
{
  input();
  work(); 
}
