	#include <cstring>
#include <cstdio>
using namespace std;

typedef int arr[60][60];

char s1[60], s2[60], str[60];
char a[60], b[60], c[60];
int f[60][60][60];
arr g1,g2,ans;
int n,m;

void work(int len, char s[], arr &g)
{
	memset(f,0,sizeof(f));
	for (int i=1; i<=len; i++) f[i][i+1][s[i]-'a']=1;
	for (int j=2; j<=len; j++)
	for (int i=1; i+j<=len+1; i++)
	for (int k=i+1; k<i+j; k++)
	for (int l=1; l<=m; l++)
		f[i][i+j][c[l]]|=f[i][k][a[l]]&f[k][i+j][b[l]];
	for (int i=1; i<=len; i++)
	for (int j=i+1; j<=len+1; j++)
	for (int k=0; k<26; k++)
		if (f[i][j][k]) g[i][j]|=1<<k;	
}

int main()
{
	scanf("%s%s",s1+1,s2+1);
	int n1=strlen(s1+1), n2=strlen(s2+1);
	scanf("%d",&m);
	for (int i=1; i<=m; i++)
	{
		scanf("%s",str+1);
		c[i]=str[1]-'a', a[i]=str[4]-'a', b[i]=str[5]-'a';
	}
	work(n1,s1,g1);
	work(n2,s2,g2);
	memset(ans,6,sizeof(ans)); ans[1][1]=0;
	for (int i=1; i<=n1; i++)
	for (int j=i+1; j<=n1+1; j++)
	for (int k=1; k<=n2; k++)
	for (int l=k+1; l<=n2+1; l++)
		if ((g1[i][j]&g2[k][l]) && ans[i][k]+1<ans[j][l]) ans[j][l]=ans[i][k]+1;
	if (ans[n1+1][n2+1]<1000) printf("%d\n", ans[n1+1][n2+1]);
	else printf("-1\n");
	//for (;;);
	return 0;
}
