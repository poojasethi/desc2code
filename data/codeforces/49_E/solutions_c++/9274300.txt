#include<cstdio>
#include<cstring>
int i,j,l1,l2,A[30],v1[60][60],v2[60][60],p[60],a[60],b[60],n,k,l,f[60][60];
char s1[60],s2[60],s[20];
using namespace std;
int main()
{
	for(i=1,A[0]=1;i<26;i++)A[i]=A[i-1]<<1;
	scanf("%s",s1+1);scanf("%s",s2+1);
	l1=strlen(s1+1);l2=strlen(s2+1);
	for(i=1;i<=l1;i++)s1[i]-='a',v1[i][i]=A[s1[i]];
	for(i=1;i<=l2;i++)s2[i]-='a',v2[i][i]=A[s2[i]];
	scanf("%d",&n);
	for(i=1;i<=n;i++)
	{
		scanf("%s",s+1);
		p[i]=s[1]-'a';a[i]=s[4]-'a';b[i]=s[5]-'a';
	}
	for(i=0;i<l1;i++)for(j=1;j<=l1-i;j++)
		for(k=j;k<i+j;k++)for(l=1;l<=n;l++)
			if((v1[j][k]&A[a[l]])&&(v1[k+1][i+j]&A[b[l]]))
				v1[j][i+j]|=A[p[l]];
	for(i=0;i<l2;i++)for(j=1;j<=l2-i;j++)
		for(k=j;k<i+j;k++)for(l=1;l<=n;l++)
			if((v2[j][k]&A[a[l]])&&(v2[k+1][i+j]&A[b[l]]))
				v2[j][i+j]|=A[p[l]];
	memset(f,63,sizeof(f));f[0][0]=0;
	for(i=1;i<=l1;i++)
		for(j=1;j<=l2;j++)
			for(k=0;k<i;k++)
				for(l=0;l<j;l++)
					if(v1[k+1][i]&v2[l+1][j]&&f[k][l]+1<f[i][j])f[i][j]=f[k][l]+1;
	if(f[l1][l2]<=l1)printf("%d\n",f[l1][l2]);else printf("-1\n");
}