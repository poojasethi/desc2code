#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstring>
#define f first
#define s second

using namespace std;

typedef pair<int,int> pii;
typedef pair< int , pii > piii;

piii D[55];
int N,n1,n2,d,dp2[55][55]; 
char dna1[55],dna2[55],S[55];
bool dp[2][55][55][27];


void bul(int wh)
{
	int n = strlen(S);
	int i,j,k,l;
	int x,y,z;

	for(i=0;i<n;i++) dp[wh][i][i][S[i]-'a'] = true;

	for(k=1;k<n;k++)
		for(l=0;l<k;l++)
			for(i=0;i+k<n;i++)
				for(j=1;j<=d;j++)
				{
					x = D[j].f; y = D[j].s.f; z = D[j].s.s;
					if(dp[wh][i][i+l][y] && dp[wh][i+l+1][i+k][z]) 
						dp[wh][i][i+k][x] = true;
				}
}

int solve(int x,int y)
{
	if(x == n1 && y == n2) return 0;
	if(dp2[x][y] != -1) return dp2[x][y]; 
	int i,j,k,ret = 99999;

	for(i=x;i<n1;i++)
		for(j=y;j<n2;j++)
			for(k=0;k<26;k++)
				if(dp[0][x][i][k] && dp[1][y][j][k])
					ret = min( ret , solve(i+1,j+1) + 1);

	return dp2[x][y] = ret;
}

int main()
{
	int i,j;
	char c1,c2,c3;

	scanf(" %s",dna1); n1 = strlen(dna1); 
	scanf(" %s",dna2); n2 = strlen(dna2); 

	scanf("%d",&d);
	for(i=1;i<=d;i++)
	{
		scanf(" %c->%c%c",&c1,&c2,&c3);
		D[i] = piii(c1-'a',pii(c2-'a',c3-'a'));
	}

	strcpy(S,dna1); bul(0);
	strcpy(S,dna2); bul(1);

	memset(dp2,-1,sizeof(dp2));
	int ans = solve(0,0);
	if(ans == 99999) puts("-1");
	else printf("%d\n",ans);

	return 0;
}
