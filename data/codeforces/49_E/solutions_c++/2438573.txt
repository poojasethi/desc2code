#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstdlib>
#include<cstring>

using std::min;

const int fin=0,maxn=51;
const int INF=1<<30;
int n0,n1,n;
char s0[maxn],s1[maxn],t0[maxn],t1[maxn],t2[maxn];
bool f0[maxn][maxn][26],f1[maxn][maxn][26];
int f[maxn][maxn];

  void deal(char *s,int n,bool f[maxn][maxn][26]){
    int i,k,p,l,j;
    for(i=0;i<n;++i)f[i][i][s[i]]=1;
    for(l=1;l<n;++l)
      for(i=0;j=i+l,j<n;++i)
        for(k=i;k<j;++k)
          for(p=0;p<(::n);++p)
            f[i][j][t0[p]]|=f[i][k][t1[p]]&&f[k+1][j][t2[p]];
  }

int main(){
  if(fin){
    freopen("t.in","r",stdin);
    freopen("t.out","w",stdout);
  }
  int i,j,k,l,p;
  gets(s0),gets(s1);
  n0=strlen(s0),n1=strlen(s1);
  for(i=0;i<n0;++i)s0[i]-=97;
  for(i=0;i<n1;++i)s1[i]-=97;
  scanf("%d\n",&n);
  for(i=0;i<n;++i){
    scanf("%c%*c%*c%c%c\n",t0+i,t1+i,t2+i);
    t0[i]-=97,t1[i]-=97,t2[i]-=97;
  }
  deal(s0,n0,f0),deal(s1,n1,f1);
  for(i=0;i<=n0;++i)
    for(j=0;j<=n1;++j)
      if(i||j)f[i][j]=INF;
  for(i=1;i<=n0;++i)
    for(j=1;j<=n1;++j)
      for(k=0;k<i;++k)
        for(l=0;l<j;++l)
          for(p=0;p<26;++p)
            if(f0[k][i-1][p]&&f1[l][j-1][p])
              f[i][j]=min(f[i][j],f[k][l]+1);
  printf("%d\n",f[n0][n1]==INF?-1:f[n0][n1]);
  return 0;
}
