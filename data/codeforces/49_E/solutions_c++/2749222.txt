#include<cstdio>
#include<cstring>
#define N 51
#define rep(i,n) for(int i=0;i<n;i++)
#define For(i,n) for(int i=1;i<=n;i++)
#define FOR(i,a,b) for(int i=a;i<=b;i++)
using namespace std;
char s1[N],s2[N],a[N],b[N],c[N];
bool f[26][N][N],g[26][N][N];
int n,m,l1,l2,F[N][N];
void Work(char s[N],bool f[26][N][N])
{
	m=strlen(s+1);
	For(i,m) f[s[i]-='a'][i][i]=1;
	For(j,m-1)
		For(i,m-j)
	        For(p,n)
	            FOR(k,i,i+j-1)
	                if (f[b[p]][i][k] && f[c[p]][k+1][i+j])
						f[a[p]][i][i+j]=1;
}
int main()
{
	gets(s1+1);l1=strlen(s1+1);
	gets(s2+1);l2=strlen(s2+1);
	scanf("%d",&n);
	For(i,n)
	{
		scanf(" %c->%c%c",&a[i],&b[i],&c[i]);
		a[i]-='a';
		b[i]-='a';
		c[i]-='a';
	}
	Work(s1,f);Work(s2,g);
	memset(F,0x7f,sizeof(F));
	F[0][0]=0;
	For(i,l1)
	    For(j,i)
	        rep(p,26)
	            if (f[p][j][i])
	                For(k,l2)
	                    For(x,k)
	                        if (g[p][x][k] && F[j-1][x-1]+1<F[i][k])
	                            F[i][k]=F[j-1][x-1]+1;
	printf("%d\n",F[l1][l2]<100?F[l1][l2]:-1);
	return 0;
}
