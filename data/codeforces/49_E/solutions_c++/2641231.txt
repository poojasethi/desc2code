#include<cstdio>
#include<cstring>
int i,j,k,l,len,l1,l2,N;
char S1[55],S2[55],x[55],y[55],z[55];
int g[30][30][30],f1[55][55],f2[55][55],h[55][55];
int main()
{
	scanf("%s%s",S1,S2);
	scanf("%d",&N);
	for(i=1;i<=N;++i)
	{
		for(x[i]=getchar();x[i]<'a'||x[i]>'z';x[i]=getchar());
		for(y[i]=getchar();y[i]<'a'||y[i]>'z';y[i]=getchar());
		for(z[i]=getchar();z[i]<'a'||z[i]>'z';z[i]=getchar());
	}
	l1=strlen(S1);
	for(i=0;i<l1;++i) f1[i][i]|=1<<S1[i]-'a';
	for(len=1;len<l1;++len)
		for(i=0;i+len<l1;++i)
		{
			j=i+len;
			for(k=i;k<j;++k)
				for(l=1;l<=N;++l)
					if(f1[i][k]&(1<<y[l]-'a')&&f1[k+1][j]&(1<<z[l]-'a'))
						f1[i][j]|=1<<x[l]-'a';
		}
	l2=strlen(S2);
	for(i=0;i<l2;++i) f2[i][i]|=1<<(S2[i]-'a');
	for(len=1;len<l2;++len)
		for(i=0;i+len<l2;++i)
		{
			j=i+len;
			for(k=i;k<j;++k)
				for(l=1;l<=N;++l)
					if(f2[i][k]&(1<<y[l]-'a')&&f2[k+1][j]&(1<<z[l]-'a'))
						f2[i][j]|=1<<x[l]-'a';
		}
	memset(h,33,sizeof(h));
	h[0][0]=0;
	for(i=1;i<=l1;++i)
		for(j=1;j<=l2;++j)
			for(k=0;k<i;++k)
				for(l=0;l<j;++l)
					if(f1[k][i-1]&f2[l][j-1])
						if(h[k][l]+1<h[i][j])
							h[i][j]=h[k][l]+1;
	if(h[l1][l2]<=50) printf("%d\n",h[l1][l2]);
	else printf("-1\n");
	return 0;
}
