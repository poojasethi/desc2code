#include <iostream>
#include <cstdio>
#include <string>
#include <cstring>
#include <algorithm>
using namespace std;
char s[2][51],t[6];
char a[51],b[51],c[51];
int v[2][51][51],f[51][51];
int n;
void predo(int id, int l, int r)
{
    if (v[id][l][r]!=-1) return;
    v[id][l][r]=0;
    if (l==r) {v[id][l][r]=1<<s[id][l]-'a'; return;}
    for (int m=l; m<r; m++)
    {
        predo(id,l,m);
        predo(id,m+1,r);
        for (int i=1; i<=n; i++)
        {
            if ((v[id][l][m]>>b[i]-'a'&1) && (v[id][m+1][r]>>c[i]-'a'&1))
            {
                v[id][l][r]|=1<<a[i]-'a';
            }
        }
    }
}
int main()
{
    scanf("%s%s%d",s[0],s[1],&n);
    for (int i=1; i<=n; i++)
    {
        scanf("%s",t);
        a[i]=t[0],b[i]=t[3],c[i]=t[4];
    }
    int l1=strlen(s[0])-1;
    int l2=strlen(s[1])-1;
    memset(v,-1,sizeof(v));
    predo(0,0,l1);
    predo(1,0,l2);
    memset(f,0x3f,sizeof(f));
    f[0][0]=0;
    for (int i=0; i<=l1; i++)
    {
        for (int j=0; j<=l2; j++)
        {
            for (int k=-1; k<i; k++)
            {
                for (int l=-1; l<j; l++)
                {
                    if (v[0][k+1][i]&v[1][l+1][j]) f[i+1][j+1]=min(f[i+1][j+1],f[k+1][l+1]+1);
                }
            }
        }
    }
    if (f[l1+1][l2+1]==0x3f3f3f3f) f[l1+1][l2+1]=-1;
    printf("%d\n",f[l1+1][l2+1]);
    return 0;
}