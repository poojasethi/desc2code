#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int mn=52,
    a=97;
char s1[mn],s2[mn],opt[mn];
int l1,l2,n,f[mn][mn];
int g1[mn][mn],g2[mn][mn],c[mn][mn];
void get(char *s,int g[mn][mn]){
    int n=strlen(s);
    for(int i=0;i<n;i++)
        for(int j=0;j<n;j++)
            g[i][j]=i==j?1<<s[i]-a:0;
    for(int j=1;j<n;j++)
        for(int i=0;i+j<n;i++)
            for(int m=i;m<i+j;m++)
                for(int p=g[i][m];p;p&=p-1)
                    for(int q=g[m+1][i+j];q;q&=q-1){
                        int x=__builtin_ctz(p),y=__builtin_ctz(q);
                        g[i][i+j]|=c[x][y];
                    }
}
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    cin>>s1>>s2;
    l1=strlen(s1),
    l2=strlen(s2);
    cin>>n;
    for(int i=0;i<n;i++){
        cin>>opt;
        c[opt[3]-a][opt[4]-a]|=1<<opt[0]-a;
    }
    get(s1,g1),
    get(s2,g2);
    memset(f,63,sizeof f);
    f[0][0]=0;
    for(int i=1;i<=l1;i++)
        for(int j=1;j<=l2;j++)
            for(int x=0;x<i;x++)
                for(int y=0;y<j;y++)
                    if(g1[x][i-1]&g2[y][j-1])f[i][j]=min(f[i][j],f[x][y]+1);
    if(f[l1][l2]>1e9)puts("-1");
    else cout<<f[l1][l2];
    return 0;
}
