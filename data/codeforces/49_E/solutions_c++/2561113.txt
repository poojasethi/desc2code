#include<cstdio>
#include<cstring>

int Len1,Len2,C1[60][60][30],C2[60][60][30],f[60][60],a[60],b[60],c[60],n;

char Str1[60],Str2[60];

int main()
{
	int i,j,k,l,_;
	scanf("%s%s",Str1,Str2);
	scanf("%d\n",&n);
	for(i=0;i<n;i++)
	{
		a[i]=getchar()-'a';
		b[i]=getchar();
		b[i]=getchar();
		b[i]=getchar()-'a';
		c[i]=getchar()-'a';
		scanf("\n");
	}
	Len1=strlen(Str1);
	Len2=strlen(Str2);
	for(i=0;i<Len1;i++)C1[i][i][Str1[i]-'a']=1;
	for(k=1;k<Len1;k++)
		for(i=0;i+k<Len1;i++)
			for(j=i;j<i+k;j++)
				for(l=0;l<n;l++)
					if(C1[i][j][b[l]]&&C1[j+1][i+k][c[l]])
						C1[i][i+k][a[l]]=1;
	
	for(i=0;i<Len2;i++)C2[i][i][Str2[i]-'a']=1;
	for(k=1;k<Len2;k++)
		for(i=0;i+k<Len2;i++)
			for(j=i;j<i+k;j++)
				for(l=0;l<n;l++)
					if(C2[i][j][b[l]]&&C2[j+1][i+k][c[l]])
						C2[i][i+k][a[l]]=1;
	memset(f,63,sizeof f);
	f[0][0]=0;
	for(i=1;i<=Len1;i++)
		for(k=1;k<=i;k++)
			for(_=0;_<26;_++)
				if(C1[k-1][i-1][_])
					for(j=1;j<=Len2;j++)
						for(l=1;l<=j;l++)
							if(C2[l-1][j-1][_]&&f[k-1][l-1]+1<f[i][j])
								f[i][j]=f[k-1][l-1]+1;
	if(f[Len1][Len2]==1061109567)printf("-1\n");
		else printf("%d\n",f[Len1][Len2]);
	return 0;
}
