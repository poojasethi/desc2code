#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>

using namespace std;

const int maxn=100;

int k,f[maxn][maxn],to1[maxn][maxn],to2[maxn][maxn],trans[maxn][maxn];

char s[maxn],s1[maxn],s2[maxn];

int main()
{
	scanf("%s%s",s1+1,s2+1);//
	int l1=strlen(s1+1);
	int l2=strlen(s2+1);
	scanf("%d",&k);
	for (int a=1;a<=k;a++)
	{
		scanf("%s",s);
		trans[s[3]-'a'][s[4]-'a']|=1<<(s[0]-'a');
	}
	for (int a=1;a<=l1;a++)
		to1[a][a]=1<<(s1[a]-'a');
	for (int a=l1;a>=1;a--)
		for (int b=a+1;b<=l1;b++)
			for (int c=a;c<b;c++)
				for (int d=0;d<=25;d++)
					if (to1[a][c]&(1<<d))
						for (int e=0;e<=25;e++)
							if (to1[c+1][b]&(1<<e)) to1[a][b]|=trans[d][e];
	for (int a=1;a<=l2;a++)
		to2[a][a]=1<<(s2[a]-'a');
	for (int a=l2;a>=1;a--)
		for (int b=a+1;b<=l2;b++)
			for (int c=a;c<b;c++)
				for (int d=0;d<=25;d++)
					if (to2[a][c]&(1<<d))
						for (int e=0;e<=25;e++)
							if (to2[c+1][b]&(1<<e)) to2[a][b]|=trans[d][e];
	memset(f,0x3f,sizeof(f));
	f[0][0]=0;
	for (int a=1;a<=l1;a++)
		for (int b=1;b<=l2;b++)
			for (int c=1;c<=a;c++)
				for (int d=1;d<=b;d++)
					if (to1[c][a]&to2[d][b]) f[a][b]=min(f[a][b],f[c-1][d-1]+1);
	if (f[l1][l2]==0x3f3f3f3f) printf("-1\n");
	else printf("%d\n",f[l1][l2]);

	return 0;
}
