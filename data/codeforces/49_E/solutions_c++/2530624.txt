#include <iostream>
#include <cstdio>
#include <vector>
#include <cstring>
using namespace std;
char s[2][100];
int l[2];
int f[100][100];
int can[2][100][100];
vector<pair<char,char> > tr[100];
int main(){
	scanf("%s%s",s[0],s[1]);
	l[0]=strlen(s[0]);
	l[1]=strlen(s[1]);
	int n;
	scanf("%d",&n);
	for(int i=1;i<=n;i++){
		char tmp[10];
		scanf("%s",tmp);
		tr[tmp[0]-'a'].push_back(make_pair(tmp[3]-'a',tmp[4]-'a'));
	}
	for(int id=0;id<2;id++){
		for(int i=0;i<l[id];i++)
			can[id][i][i+1]=1<<(s[id][i]-='a');
		for(int len=2;len<=l[id];len++)
			for(int i=0;i+len<=l[id];i++)
				for(int ch=0;ch<26;ch++){
					for(size_t j=0;j<tr[ch].size();j++)
						for(int k=i+1;k<i+len;k++)
							if((can[id][i][k]&1<<tr[ch][j].first) && (can[id][k][i+len]&1<<tr[ch][j].second)){
								can[id][i][i+len]|=1<<ch;
								goto NextChar;
							}
					NextChar:;
				}
	}
	memset(f,'?',sizeof(f));
	f[0][0]=0;
	for(int i=0;i<l[0];i++)
		for(int j=0;j<l[1];j++)
			for(int l1=0;l1<=i+1;l1++)
				for(int l2=0;l2<=j+1;l2++)
					if(can[0][i-l1+1][i+1] & can[1][j-l2+1][j+1])
						f[i+1][j+1]=min(f[i+1][j+1],f[i-l1+1][j-l2+1]+1);
	if(f[l[0]][l[1]]<0x3f3f3f3f)
		printf("%d\n",f[l[0]][l[1]]);
	else
		puts("-1");
	return 0;
}