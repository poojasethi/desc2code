/* Wed 06 Feb 2013 09:12:50 AM ICT */
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;

const int N = 50+5;
char s1[N], s2[N];
bool f1[N][N][26], f2[N][N][26];
int f[N][N], a[N], b[N], c[N], m;

void enter() {
    scanf("%s%s%d\n",s1,s2,&m);
    for(int i = 0; i < m; ++i) {
        char x, y, z;
        scanf("%c->%c%c\n", &x, &y, &z);
        a[i] = x - 0x61; b[i] = y - 0x61; c[i] = z - 0x61;
    }
}

void cal(const char * s, int &n, bool f[N][N][26]) {
    memset(f, 0, sizeof f); n = strlen(s);
    for(int i = 0; i < n; ++i) f[i][i][s[i] - 0x61] = 1;
    for(int L = 2; L <= n; ++L)
        for(int i = 0, j = L-1; j < n; ++i, ++j) 
            for(int p = 0; p < m; ++p)
                for(int k = i; k < j && f[i][j][a[p]] == 0; ++k) 
                    f[i][j][a[p]] |= f[i][k][b[p]] && f[k+1][j][c[p]];
}

void solve() {
    int n1, n2;
    cal(s1, n1, f1); cal(s2, n2, f2);
    memset(f, 0x3f, sizeof f); f[0][0] = 0;
    for(int i = 0; i < n1; ++i)
        for(int j = 0; j < n2; ++j)
            for(int ch = 0; ch < 26; ++ch)
                for(int x = i; x < n1; ++x)
                    for(int y = j; y < n2; ++y)
                        if(f1[i][x][ch] && f2[j][y][ch])
                            f[x+1][y+1] = min(f[x+1][y+1], f[i][j]+1);
    printf("%d\n", f[n1][n2] < 100 ? f[n1][n2] : -1);
}

int main() {
#ifndef ONLINE_JUDGE
    freopen("14.inp", "r", stdin);
    //freopen("14.out", "w", stdout);
#endif
    enter();
    solve();
    return 0;
}
