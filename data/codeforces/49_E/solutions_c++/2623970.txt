#include<iostream>
#include<cstdio>
#include<cstring>
using namespace std;
const int u=51;
char s1[u],s2[u],a[u],b[u],c[u],str[u];
int v[u][u],v1[u][u],v2[u][u],f[u][u],n,l1,l2,i,j,k,l;

void calc(char s[u],int l,int r)
{
	if(v[l][r]!=-1) return;
	v[l][r]=0;
	if(l==r) {v[l][r]=1<<s[l]-'a'; return;}
	for(int i=l;i<r;i++)
	{
		calc(s,l,i),calc(s,i+1,r);
		for(int j=1;j<=n;j++)
			if((v[l][i]>>b[j]-'a'&1)&&(v[i+1][r]>>c[j]-'a'&1))
				v[l][r]|=1<<a[j]-'a';
	}
}

int main()
{
	scanf("%s%s",s1+1,s2+1);
	cin>>n;
	for(i=1;i<=n;i++)
	{
		scanf("%s",str);
		a[i]=str[0],b[i]=str[3],c[i]=str[4];
	}
	l1=strlen(s1+1),l2=strlen(s2+1);
	memset(v,-1,sizeof(v));
	calc(s1,1,l1);
	memcpy(v1,v,sizeof(v));
	memset(v,-1,sizeof(v));
	calc(s2,1,l2);
	memcpy(v2,v,sizeof(v));
	memset(f,0x3f,sizeof(f));
	f[0][0]=0;
	for(i=1;i<=l1;i++)
		for(j=1;j<=l2;j++)
			for(k=0;k<i;k++)
				for(l=0;l<j;l++)
					if(v1[k+1][i]&v2[l+1][j]) f[i][j]=min(f[i][j],f[k][l]+1);
	if(f[l1][l2]==0x3f3f3f3f) f[l1][l2]=-1;
	cout<<f[l1][l2]<<endl;
	return 0;
}