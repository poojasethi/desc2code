#include <iostream>
#include <cstdlib>
#include <algorithm>
#include <queue>
#include <deque>
#include <set>
#include <vector>
#include <map>
#include <string>
#include <cstring>
#include <iomanip>
#include <cstdio>
#include <fstream>
#include <sstream>

#define For(i,a,n) for(int i =a ; i < n ; ++i )
#define all(x) (x).begin(),(x).end()
#define n(x) (int)(x).size()
#define pb(x) push_back(x)

using namespace std;
typedef pair<int,int> pii;
const int maxh = 2*100*1000+1000;
int h,m,n;
int mark[maxh];
int nu;
int cir[maxh];
int ja[maxh];
set <int> fre[maxh];
long long dummy;
int si[maxh];
map <int,pii> mp;

void add(int id,int hid)
{
	int ci = cir[hid];
	int in = ja[hid]; 
	set<int> :: iterator it;
	it = fre[ci].lower_bound(in);
	if(it == fre[ci].end())
		it = fre[ci].begin();
	dummy+=(si[ci]+*it-in)%si[ci];
	mp[id] = pii(ci,*it);
	fre[ci].erase(it);
}
void remove(int id)
{
	fre[mp[id].first].insert(mp[id].second);
}

int main()
{
	ios::sync_with_stdio(false);
	cin >> h >> m >> n;
	int id;
	int hid;
	For(i,0,h)
	{
		int now = 0;
		if(!mark[i])
		{
			int j = i;
			while(!mark[j])
			{
				mark[j] = true;
				cir[j] = nu;
				ja[j] = now++;
				si[nu]++;
				j = (j+m)%h;
			}
			nu++;

		}
	}
	For(i,0,h)
		fre[cir[i]].insert(ja[i]);
	For(i,0,n)
	{
		string ss;
		cin >> ss;
		cin >> id;
		if(ss == "+")
		{
			cin>> hid;
			add(id,hid);
		}
		else
		{
			remove(id);
		}
	}
	cout << dummy << endl;
	return 0;
}
