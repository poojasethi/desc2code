#include <bits/stdc++.h>
using namespace std;
const int maxn=1000001;
set<int> S[maxn];
int p[maxn],a[maxn],n,m;
int find(int x){return p[x]==x?x:p[x]=find(p[x]);}

int main(){
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++){
        scanf("%d",&a[i]);
        p[i]=i;
    }
    for(int i=1;i<=m;i++){
        int x,y,fx,fy;
        scanf("%d%d",&x,&y);
        fx=find(x);
        fy=find(y);
        if(fx!=fy) p[fx]=fy;
    }
    for(int i=1;i<=n;i++){
        S[find(i)].insert(a[i]);
    }
    for(int i=1;i<=n;i++){
        printf("%d ",*S[find(i)].rbegin());
        S[find(i)].erase(*(S[find(i)].rbegin()));
    }
    return 0;
}

  	   	  		   	       		 				