#include<algorithm>
#include<cstdio>
#include<cstring>
#include<vector>
#include<iostream>

using namespace std;

int fa[1000010];
int a[1000010],pt[1000010];
vector<int> v[1000010];
int i,j,k,n,m,p,q;

int Find(int x){

  if (fa[x]==x) return x;
  fa[x]=Find(fa[x]);
  return fa[x];

}

void Link(int x,int y){

  fa[Find(x)]=Find(y);

}



int main(){

  scanf("%d%d",&n,&m);
  for (i=1;i<=n;i++) fa[i]=i;
  for (i=1;i<=n;i++) scanf("%d",&a[i]);
  for (i=1;i<=m;i++){
    scanf("%d%d",&p,&q);
    Link(p,q);
  }

  for (i=n;i>=1;i--) v[Find(i)].push_back(a[i]);
  for(i=1; i<=n ;i++){
    sort(v[i].begin(),v[i].end());
    pt[i]=v[i].size()-1;
  }
  for(i=1; i<=n ;i++){
    cout << v[fa[i]][pt[fa[i]]] << ' ';
    pt[fa[i]]--;
  }

  return 0;



}

	    			  	 			  	 	  					 	