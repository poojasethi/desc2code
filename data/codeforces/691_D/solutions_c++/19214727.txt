#include<bits/stdc++.h>
#define ll long long
using namespace std;

ll s[1000001];
vector<ll> vp[1000001];

ll findSet(ll a)
{
    if(s[a]==a)
        return a;

    return s[a]=findSet(s[a]);
}

void assignSet(ll l,ll r)
{
    ll u=findSet(l);
    ll v=findSet(r);

    s[v]=u;
}

int main()
{
    //freopen("000.txt","r",stdin);
    ios::sync_with_stdio(false);

    ll n,m,i,l,r;

    cin>>n>>m;

    vector<ll> v(n+1),v2(n+1);

    for(i=1;i<=n;i++)
        cin>>v[i];

    for(i=0;i<1000001;i++)
        s[i]=i;

    for(i=0;i<m;i++)
    {
        cin>>l>>r;
        assignSet(l,r);
    }

    for(i=1;i<=n;i++)
    {
        vp[findSet(i)].push_back(v[i]);
    }


    for(i=1;i<=n;i++)
        sort(vp[i].begin(),vp[i].end());

    for(i=1;i<=n;i++)
    {
        cout<<vp[findSet(i)].back()<<" ";
        vp[findSet(i)].pop_back();
    }

    return 0;
}
