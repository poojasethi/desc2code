#include <cstdio>
#include <cstring>
#include <algorithm>
#include <iostream>
#include <vector>
using namespace std;
#define N 1000005
vector <int> num[N];
vector <int> pos[N];
int p[N], a[N], ans[N];
int fa[N];

int Find(int x)
{
	if (x == fa[x]) return x;
	return fa[x] = Find(fa[x]);
}

void Merge(int x, int y)
{
	x = Find(x), y = Find(y);
	if (x == y) return;
	fa[x] = y;
}

int main()
{
	int n, m;
	cin >> n >> m;
	for (int i = 1; i <= n; i++){
		fa[i] = i;
		scanf("%d", &a[i]);
		p[i] = i;
	}
	for (int i = 1; i <= m; i++){
		int a, b;
		scanf("%d%d", &a, &b);
		Merge(a, b);
	}
	for (int i = 1; i <= n; i++){
		int x = Find(i);
		pos[x].push_back(i);
		num[x].push_back(-a[i]);
	}
	for (int i = 1; i <= n; i++){
		sort(num[i].begin(), num[i].end());
		for (int j = 0; j<pos[i].size(); j++){
			ans[pos[i][j]] = -num[i][j];
		}
	}
	for (int i = 1; i <= n; i++){
		printf("%d ", ans[i]);
	}
	return 0;
}