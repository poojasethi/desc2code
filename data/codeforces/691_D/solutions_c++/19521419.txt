#include <bits/stdc++.h>
using namespace std;
const int MaxN = 1e6 + 5, MaX = 5 * 1e4;
typedef long long LL;
LL a[MaxN], m, n, father[MaxN], ans[MaxN], loc[MaxN];
LL num[MaxN], vis[MaxN], p[MaxN];
priority_queue <int> seq[MaxN];
LL Find(LL x)
{
	if(x == father[x]) return x;
	return father[x] = Find(father[x]);
}
void Init()
{
	scanf("%I64d %I64d", &n, &m);
	for(int i = 1; i <= n; i++) father[i] = i;
	for(int i = 1; i <= n; i++) scanf("%I64d", &a[i]);
	LL x, y;
	for(int i = 1; i <= m; i++)
	{
		scanf("%I64d %I64d", &x, &y);
		father[Find(x)] = Find(y);
	}
}
void pdo()
{
	for(int i = 1; i <= n; i++)
	{
		LL x = Find(i); p[i] = x;
		seq[x].push(a[i]);	
	}
	for(int i = 1; i <= n; i++)
	{
		LL t = seq[p[i]].top();
		seq[p[i]].pop();
		printf("%I64d ", t);
	}
	printf("\n");
}
int main()
{
	Init();
	pdo();
}
   			 	  		  	 	 		     	