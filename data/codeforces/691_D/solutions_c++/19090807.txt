#include<cstdio>
#include<iostream>
#include<cstring>
#include<ctime>
#include<vector>
#include<algorithm>
#define Maxn 1000010
using namespace std;

int fa[Maxn],a[Maxn],b[Maxn];
vector<int> h[Maxn],tmp;
int findset(int x){
    return fa[x]==x?x:(fa[x]=findset(fa[x]));
}
bool cmp(int i,int j){
    return a[i]>a[j];
}
int main()
{
    int n,m,u,v;
    cin>>n>>m;
    for(int i=1;i<=n;i++){
        scanf("%d",a+i);
        fa[i]=i;
    }
    for(int i=0;i<m;i++){
        scanf("%d%d",&u,&v);
        fa[findset(u)]=findset(v);
    }
    for(int i=1;i<=n;i++) findset(i);
    for(int i=1;i<=n;i++) h[fa[i]].push_back(i);
    for(int i=1;i<=n;i++){
        sort(h[i].begin(),h[i].end(),cmp);
        tmp=h[i];
        sort(h[i].begin(),h[i].end());
        for(int j=0;j<h[i].size();j++) b[h[i][j]]=a[tmp[j]];
    }
    for(int i=1;i<=n;i++)
        printf("%d ",b[i]);
	return 0;
}

