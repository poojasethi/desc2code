#include<bits/stdc++.h>
using namespace std;
vector<int> gr[1000002];
bool vis[1000002];
set<int> pos;
vector<int> temp;
void dfs(int n)
{
	vis[n]=true;
	pos.insert(n);
	for(int i=0;i<gr[n].size();i++)
	{
		if(!vis[gr[n][i]])
			dfs(gr[n][i]);
	}
}
int main()
{
	int i,j,n,m,a,b;
	scanf("%d%d",&n,&m);
	int arr[n];
	for(i=0;i<n;i++)
		scanf("%d",&arr[i]);
	for(i=0;i<m;i++)
	{
		scanf("%d%d",&a,&b);
		a--;b--;
		gr[a].push_back(b);
		gr[b].push_back(a);
	}
	for(i=0;i<n;i++)
	{
		if(!vis[i])
		{
			set<int>::iterator it;
			dfs(i);
			for(it=pos.begin();it!=pos.end();it++)
				temp.push_back(arr[*it]);
				
			sort(temp.begin(),temp.end(),greater<int>());

			for(it=pos.begin(),j=0;it!=pos.end();it++,j++)
				arr[*it]=temp[j];

			pos.clear();
			temp.clear();
		}
	}
	for(i=0;i<n;i++)
		cout<<arr[i]<<" ";
	return 0;
}
