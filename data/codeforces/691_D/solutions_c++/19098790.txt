#include <cstdio>
#include <cstring>
#include <cmath>
#include <cstdlib>
#include <cctype>
#include <vector>
#include <algorithm>
#define N 1000101
using namespace std;
int n, m;
int f[N], a[N];
vector<int>  v[N];
int find(int x){
	if (f[x] == x) return f[x];
	else return f[x] = find(f[x]);
}

void combine(int x, int y){
	x = find(x), y = find(y);
	if (x != y)  f[x] = y;
}

void Init(int n){
	for (int i = 1; i <= n; ++ i)
		f[i] = i;
}
int main(){
	int i;
	scanf("%d%d", &n, &m);
	for (i = 1; i <= n; ++ i){
		scanf("%d", &a[i]);
	}
	Init(n);
	for (i = 1; i <= m; ++ i){
		int x, y;
		scanf("%d%d", &x, &y);
		combine(x, y);
	}
	for (i = 1; i <= n; ++ i){
		v[find(i)].push_back(a[i]);
	}
	for (i = 1; i <= n; ++ i)
		sort(v[i].begin(), v[i].end());
	for (i = 1; i <= n; ++ i){
		printf("%d ", v[find(i)].back());
		v[find(i)].pop_back();
	}
	return 0;
}