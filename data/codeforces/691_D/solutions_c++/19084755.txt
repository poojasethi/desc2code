#include <bits/stdc++.h>
using namespace std;

int n, m;
int a[1000000 + 10];
int p[1000000 + 10];

priority_queue<int> q[1000000 + 10];

int f(int x) {
  return x == p[x] ? x : p[x] = f(p[x]);
}

int main() {
  scanf("%d%d", &n, &m);
  for (int i = 1; i <= n; ++i) {
    scanf("%d", &a[i]);
    p[i] = i;
  }

  for (int i = 0; i < m; ++i) {
    int u, v;
    scanf("%d%d", &u, &v);
    p[f(u)] = f(v);
  }

  for (int i = 1; i <= n; ++i) {
    q[f(i)].push(a[i]);
  }

  for (int i = 1; i <= n; ++i) {
    a[i] = q[f(i)].top();
    q[f(i)].pop();
  }

  for (int i = 1; i <= n; ++i)
    printf("%d%c", a[i], " \n"[i == n]);

  return 0;
}
