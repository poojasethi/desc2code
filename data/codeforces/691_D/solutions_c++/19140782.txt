#include<stdio.h>
#include<iostream>
#include<stdlib.h>
#include<string.h>
#include<queue>
using namespace std;
const int N=1000008;
int a[N],b[N];
priority_queue<int>d[N];
int findr(int x){if(b[x]<0)return x;return b[x]=findr(b[x]);}
int main(void)
{
	int i,j,k,n,m;
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++)scanf("%d",a+i);
	memset(b,-1,sizeof(b));
	while(m--){scanf("%d%d",&j,&k);j=findr(j);k=findr(k);if(j!=k)b[j]=k;}
	for(i=1;i<=n;i++)d[findr(i)].push(a[i]);
	printf("%d",d[findr(1)].top());d[findr(1)].pop();
	for(i=2;i<=n;i++){printf(" %d",d[findr(i)].top());d[findr(i)].pop();}
	return 0; 
}