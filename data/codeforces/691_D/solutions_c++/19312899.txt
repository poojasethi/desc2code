#include <bits/stdc++.h>
using namespace std;
int a[1000006],vis[1000006];
vector<int> nos[1000006],ite[1000006],ite1[1000006];
void dfs(int x,int y) {
	vis[x] = 1;
	nos[y].push_back(a[x]);
	ite1[y].push_back(x);
	for(int i=0;i<ite[x].size();i++)
		if(!vis[ite[x][i]])
			dfs(ite[x][i],y);
}
int main() {
	int i,j,k,l,n,m ;
	cin>>n>>m;
	for(i=0;i<n;i++)
		cin>>a[i];
	for(i=0;i<m;i++) {
		//		cin>>j>>k;
		scanf("%d%d",&j,&k);
		j--;
		k--;
		ite[k].push_back(j);
		ite[j].push_back(k);
	}
	for(i=0;i<n;i++)
		if(!vis[i])
			dfs(i,i);
	for(i=0;i<n;i++)
		if(nos[i].size()) {
			sort(nos[i].begin(),nos[i].end());
			sort(ite1[i].begin(),ite1[i].end());
			for(j=0;j<ite1[i].size();j++)
				a[ite1[i][j]] = nos[i][ite1[i].size()-j-1];
		}
	for(i=0;i<n;i++)
		//		cout<<a[i]<<" ";
		printf("%d ",a[i]);
	cout<<endl;
	return 0;
}
