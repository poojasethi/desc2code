#include<cmath>
#include<cstring>
#include<cstdio>
#include<algorithm>
#include<queue>
using namespace std;
const int qq=1e6+5;
int num[qq];
int pre[qq];
int n,m;
int find(int x)
{
	if(x==pre[x])	return x;
	return	pre[x]=find(pre[x]);	
}
priority_queue<int>heap[1010000];
int main()
{
	scanf("%d%d",&n,&m);
	for(int i=0; i<qq; ++i)	pre[i]=i;
	for(int i=1; i<=n; ++i)	scanf("%d",&num[i]);
	int a,b;
	for(int i=0; i<m; ++i){
		scanf("%d%d",&a,&b);
		int x=find(a);
		int y=find(b);
		if(x!=y)	pre[y]=x;
	}
	for(int i=1; i<=n; ++i)	pre[i]=find(i);
	for(int i=1; i<=n; ++i)	heap[pre[i]].push(num[i]);
	for(int i=1; i<=n; ++i)	num[i]=heap[pre[i]].top(),heap[pre[i]].pop();
	for(int i=1; i<=n; ++i)	printf(i==n?"%d\n":"%d ",num[i]);
	return 0;
}