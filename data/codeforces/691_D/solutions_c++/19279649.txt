#include <bits/stdc++.h>
#define tr(c, it) for(typeof((c).begin()) it = (c).begin(); it != (c).end(); ++it)
using namespace std;

int a[1000010];
vector<int> G[1000010], ind, val;
bool visit[1000010];

void DFS(int u){
    visit[u] = true;
    ind.push_back(u);
    val.push_back(a[u]);
    tr(G[u], v) if(!visit[*v]){
        DFS(*v);
    }
}

int main(){
    int n, m, u, v;
    scanf("%d %d", &n, &m);
    for(int i = 1; i <= n; ++i)
        scanf("%d", a + i);
    while(m--){
        scanf("%d %d", &u, &v);
        G[u].push_back(v);
        G[v].push_back(u);
    }
    for(int u = 1; u <= n; ++u) if(!visit[u]){
        DFS(u);
        sort(ind.begin(), ind.end());
        sort(val.rbegin(), val.rend());
        for(int i = 0; i < ind.size(); ++i)
            a[ind[i]] = val[i];
        ind.clear();
        val.clear();
    }
    for(int i = 1; i <= n; ++i)
        printf("%d ", a[i]);
    return 0;
}
