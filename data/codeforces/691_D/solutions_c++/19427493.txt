#include <bits/stdc++.h>
using namespace std;
#define MAX 1000006

int n, m, p[MAX], d[MAX];
vector<int> q[MAX];

int root(int a) { return d[a] == a ? a : d[a] = root(d[a]); }
void mix(int a, int b) { d[root(b)] = root(a); }

int main() {
  scanf("%d%d", &n, &m);
  for (int i = 0; i < n; i++) {
    scanf("%d", &p[i]);
    d[i] = i;
  }
  for (int i = 0, j, k; i < m; i++) {
    scanf("%d%d", &j, &k);
    mix(j-1, k-1);
  }
  for (int i = 0; i < n; i++) {
    q[root(i)].push_back(p[i]);
  }
  for (int i = 0; i < n; i++) {
    sort(q[i].begin(), q[i].end());
  }
  for (int i = 0; i < n; i++) {
    p[i] = q[root(i)].back();
    q[root(i)].pop_back();
  }
  for (int i = 0; i < n; i++) {
    printf("%d%c", p[i], i+1 < n ? ' ' : '\n');
  }
  return 0;
}

