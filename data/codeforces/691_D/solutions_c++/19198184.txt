#include <cstdio>
#include <cstring>
#include <queue>
#include <algorithm>

using namespace std;

const int MAXN=1000003;

int n,m,s,e;
int a[MAXN],par[MAXN],color[MAXN];
priority_queue<int> q[MAXN];

int getPar(int x) {
    if(par[x]!=x) {
        par[x]=getPar(par[x]);
    }
    return par[x];
}

void merg(int x,int y) {
    x=getPar(x);
    y=getPar(y);
    if(x!=y) {
        par[x]=par[y];
    }
}

int main() {
    while(2==scanf("%d%d",&n,&m)) {
        for(int i=1;i<=n;++i) {
            scanf("%d",a+i);
            par[i]=i;
        }
        while(m-->0) {
            scanf("%d%d",&s,&e);
            merg(s,e);
        }
        for(int i=1;i<=n;++i) {
            q[getPar(i)].push(a[i]);
        }
        for(int i=1;i<=n;++i) {
            printf("%d%c",q[par[i]].top(),i==n?'\n':' ');
            q[par[i]].pop();
        }
    }
    return 0;
}
