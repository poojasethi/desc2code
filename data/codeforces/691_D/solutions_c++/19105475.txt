#include <cstdio>
#include <queue>
#include <cstring>
using namespace std;

const int maxn = 1e6+10;

int n,m,c[maxn],fa[maxn],x,y;

int getfather(int x){
    if(x==fa[x]) return x;
    return fa[x] = getfather(fa[x]);
}

priority_queue<int> q[maxn];

int main(){
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++){
        scanf("%d",c+i);
        fa[i] = i;
    }
    while(m--){
        scanf("%d%d",&x,&y);
        int fx = getfather(x);
        int fy = getfather(y);
        if(fx!=fy) fa[fx] = fy;
    }
    for(int i=1;i<=n;i++) getfather(i);
    for(int i=1;i<=n;i++){
        q[fa[i]].push(c[i]);
    }
    for(int i=1;i<=n;i++){
        printf("%d ",q[fa[i]].top());
        q[fa[i]].pop();
    }
    puts("");
    return 0;
}
