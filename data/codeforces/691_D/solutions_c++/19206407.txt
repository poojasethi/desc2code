//
//  main.cpp
//  D
//
//  Created by Ming on 7/18/16.
//  Copyright Â© 2016 Ming. All rights reserved.
//

#include <iostream>
#include <cstdio>
#include <vector>
#include <algorithm>
using namespace std;
const int mx = 1e6+5;

int n,m;
int fa[mx];
int a[mx],siz[mx];
vector<int> fat[mx];

inline int f(int x) {return fa[x]==x?x:fa[x]=f(fa[x]);}

int main() {
    scanf("%d%d",&n,&m);
    for(int i=0;i<n;i++) {
        scanf("%d",&a[i]);
        fa[i]=i;
    }
    for(int i=0;i<m;i++) {
        int x,y;
        scanf("%d%d",&x,&y);
        fa[f(x-1)]=f(y-1);
    }
    for(int i=0;i<n;i++) fat[f(i)].push_back(a[i]);
    for(int i=0;i<n;i++){
        if(f(i)==i)
        sort(fat[i].begin(),fat[i].end());
        siz[i]=fat[i].size()-1;
    }
    for(int i=0;i<n;i++){
        printf("%d ",fat[f(i)][siz[f(i)]]);
        siz[f(i)]--;
    }
    return 0;
}


