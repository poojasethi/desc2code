#include<iostream>
#include<cstdio>
#include<queue>
using namespace std;

int n,m,u,v;
int a[1000001],p[1000001];
priority_queue<int> q[1000001];

void inti(){
	for(int i=0;i<n;i++)
		p[i]=i;
}

int find(int x){
	if(p[x]==x) return x;
	return p[x]=find(p[x]);
}

int main(){
	scanf("%d%d",&n,&m);
	inti();
	for(int i=0;i<n;i++)
		scanf("%d",&a[i]);
	while(m--){
		scanf("%d%d",&u,&v);
		p[find(u-1)]=find(v-1);
	}
	
	for(int i=0;i<n;i++)
		q[find(i)].push(a[i]);
	
	for(int i=0;i<n;i++){
		int t=find(i);
		printf("%d ",q[t].top());
		q[t].pop();
	}
}
