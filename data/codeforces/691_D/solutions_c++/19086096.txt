#include <cstdio>
#include <iostream>
#include <algorithm>
#include <vector>
#define N 1000001
using namespace std;
vector <int> q[N];
int n,m,p[N],a,b,f[N],t[N];
int find(int x){
	if(f[x]==x)return x;
	return f[x]=find(f[x]);
}
bool cmp(int x,int y){
	return p[x]>p[y];
}
int main(){
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;++i)scanf("%d",&p[i]),f[i]=i;
	for(int i=1;i<=m;++i)scanf("%d%d",&a,&b),f[find(a)]=find(b);
	for(int i=1;i<=n;++i)q[find(i)].push_back(i);
	for(int i=1;i<=n;++i)
	    if(f[i]==i)sort(q[i].begin(),q[i].end(),cmp);
	for(int i=1;i<=n;++i)printf("%d ",p[q[f[i]][t[f[i]]++]]);
}