#include <iostream>
#include <cstdio>
#include <vector>
#include <cstring>
#include <algorithm>
using namespace std;
const int N = 1e6 + 7;
vector<int>v[N];
int a[N],fa[N],n,m,in[N];
bool cmp(int a,int b){
    return a > b;
}
int f(int x){
    return x== fa[x]?x:fa[x] = f(fa[x]);
}
int main(){
    while(~scanf("%d%d",&n,&m)){
        for(int i = 0; i <= n; i++){
            fa[i] = i;
            v[i].clear();
            in[i] = 0;
        }
        for(int i = 1; i <= n; i++)scanf("%d",&a[i]);
        while(m--){
            int x,y;
            scanf("%d%d",&x,&y);
            fa[f(x)] = f(y);
        }
        for(int i = 1; i <= n; i++)v[f(fa[i])].push_back(a[i]);
        for(int i = 1; i <= n; i++)if(v[i].size())sort(v[i].begin(),v[i].end(),cmp);
        for(int i = 1; i <= n; i++)printf(i==n?"%d\n":"%d ",v[f(fa[i])][in[f(fa[i])]++]);
    }
    return 0;
}

	    		  					 		 			 			 			