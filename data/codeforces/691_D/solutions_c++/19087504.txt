#include<bits/stdc++.h>
using namespace std;
int visited[1000400],ara[1000400];
vector<int>vc[1000400],val,pos;
int dfs(int v)
{
    visited[v]=1;
    pos.push_back(v);
    val.push_back(ara[v]);
    for(int i=0;i<vc[v].size();i++){
    int w=vc[v][i];
    if(visited[w]==0){
        dfs(w);
    }

    }

}


int main()
{
    int i,j,k,l,m,n,s,t;
    cin>>n>>m;
    for(i=1;i<=n;i++){
        scanf("%d",&ara[i]);
    }
    for(i=1;i<=m;i++){
        scanf("%d%d",&k,&l);
        vc[k].push_back(l);
        vc[l].push_back(k);
    }
    for(i=1;i<=n;i++){
        if(visited[i]==0){
                pos.clear();
        val.clear();
            dfs(i);
            sort(val.begin(),val.end());
            sort(pos.begin(),pos.end());
            for(j=0,k=val.size()-1;j<pos.size();j++,k--){
                ara[pos[j]]=val[k];

            }
        }
    }
    for(i=1;i<=n;i++){
        printf("%d ",ara[i]);
    }
}
