#include<bits/stdc++.h>
using namespace std;

const int N = (int)1e6+11;
int a[N];
vector<int> nums[N];
int curindx[N];
int cmpos[N];
int ver[N];
int ranks[N];

int fin(int v){
	while(ver[v]){
		v=ver[v];
	}
	return v;
}

void uni(int u,int v){
	if(ranks[u]>ranks[v]){
		ver[v]=u;
		ranks[u]+=ranks[v];
	}
	else{
		ver[u]=v;
		ranks[v]+=ranks[u];
	
	}
}

int main()
{
	int n,k;
	cin>>n>>k;
	for(int i=1;i<=n;i++){
		scanf("%d",&a[i]);
		ranks[i]++;
	}
	while(k--){
		int v,u;
		scanf("%d%d",&u,&v);
		if(u==v)
			continue;
		int a = fin(u);
		int b = fin(v);
		if(a!=b)
			uni(a,b);
	}
	for(int i=1;i<=n;i++){
		cmpos[i] = fin(i);
		nums[cmpos[i]].push_back(a[i]);
		curindx[cmpos[i]]++;
	}

	for(int i=1;i<=n;i++){
		sort(nums[i].begin(),nums[i].end());
	}
	for(int i=1;i<=n;i++){
		printf("%d " ,nums[cmpos[i]][curindx[cmpos[i]]-1]);
		curindx[cmpos[i]]--;
	}
	cout<<endl;
	return 0;
}
