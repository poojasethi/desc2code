#include <cmath>
#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
using namespace std;
int fa[1100000],n,m,a[1100000],ans[1100000],p[1100000],temp1,temp2,last[1100000],now[1100000];
inline bool cmp(int x,int y){return a[x]>a[y];}
int get(int x){return (x==fa[x]?x:fa[x]=get(fa[x]));}
void un(int x,int y)
{
	int X=get(x); int Y=get(y);
	if(X!=Y) fa[X]=Y;
}
int main()
{
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;++i) scanf("%d",&a[i]);
	for(int i=1;i<=n;++i)
	{
		fa[i]=i;
		p[i]=i;
	}
	for(int i=1;i<=m;++i)
	{
		scanf("%d%d",&temp1,&temp2);
		un(temp1,temp2);
	}
	for(int i=1;i<=n;++i) get(i);
	sort(p+1,p+n+1,cmp);
	for(int i=n;i;--i)
	{
		int temp=get(i);
		last[i]=now[temp]; now[temp]=i;
	}
	for(int i=1;i<=n;++i)
	{
		int nownum=a[p[i]];
		ans[now[get(p[i])]]=nownum;
		now[get(p[i])]=last[now[get(p[i])]];
	}
	for(int i=1;i<=n;++i)printf("%d ",ans[i]);
	return 0;
}
 