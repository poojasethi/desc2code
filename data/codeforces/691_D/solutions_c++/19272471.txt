#include<bits/stdc++.h>
using namespace std;
const int maxn=1e6+5;
int n,m;
int a[maxn];
int fa[maxn];
int find(int x){return x==fa[x]?x:fa[x]=find(fa[x]);}
set<int>S[maxn];
int main(){
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;i++)scanf("%d",&a[i]);
	for(int i=1;i<=n;i++)fa[i]=i;
	while(m--){
		int x,y;scanf("%d%d",&x,&y);
		fa[find(x)]=find(y);
	}
	for(int i=1;i<=n;i++)
		S[find(i)].insert(a[i]);
	for(int i=1;i<=n;i++){
		int t=find(i);
		printf("%d%c",*--S[t].end()," \n"[i==n]);
		S[t].erase(--S[t].end());
	}
	return 0;
}