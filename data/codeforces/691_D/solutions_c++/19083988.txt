#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<cstring>
#include<vector>
#include<queue>
#include<cmath>
#define ll long long
#define ld long double
using namespace std;
const int maxn= 5e6;
vector<int> V[maxn];
int a[maxn],ans[maxn],X[maxn];
int f[maxn];
int n,m,i,j,x,y;
int find(int o){
	if (o==f[o]) return o;
	return f[o]= find(f[o]);
}
int main()
{
#ifndef ONLINE_JUDGE
	freopen("2.in","r",stdin);
	freopen("1.out","w",stdout);
#endif
	scanf("%d%d",&n, &m);
	for (i= 1;i<=n;i++){
		scanf("%d",&a[i]);
		X[a[i]]= i;
		f[i]= i;
	}
	for (i= 1;i<=m;i++){
		scanf("%d%d",&x, &y);
		find(x);find(y);
		f[f[x]]= f[y];
	}
	for (i= 1;i<=n;i++){
		find(i);
		V[f[i]].push_back(i);
	}
	for (i= 1;i<=n;i++)
		sort(V[i].begin(),V[i].end());
	for (i= 1;i<=n;i++){
		j= V[f[X[i]]].size()-1;
		ans[V[f[X[i]]][j]]= i;
		V[f[X[i]]].pop_back();
	}
	for (i= 1;i<=n;i++)
		printf("%d%c",ans[i],i<n?' ':'\n');
	return 0;
}
