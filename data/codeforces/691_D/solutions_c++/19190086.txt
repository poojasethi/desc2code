#include <bits/stdc++.h>
//#include <iostream>
//#include <set>

using namespace std;

int const N=1e6+10;
int n,k,m,ans;
int p[N];
vector <int> v[N];
set <int> s[N];
int f(int i)
{
  if (i==p[i]) return i;
  else return p[i]=f(p[i]);

}

int main()
{
 int n,m;
 scanf("%d%d",&n,&m);
 vector <int> a(n+1);
 for (int i=1;i<=n;i++) {
     scanf("%d",&a[i]);
     p[i]=i;
 }
 for (int i=1;i<=m;i++)
 {
   int x,y;
   scanf("%d%d",&x,&y);
   p[f(x)]=f(y);
 }
 for (int i=1;i<=n;i++)
      s[f(i)].insert(a[i]);

 for (int i=1;i<=n;i++)
  {
    int nom=*s[f(i)].rbegin();
    printf("%d ", nom);
    s[f(i)].erase(s[f(i)].find(nom));

  }

}

