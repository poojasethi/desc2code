#include<bits/stdc++.h>

using namespace std;

#define pii pair<int,int>
#define ll long long
#define N (int)(5e5+10)
#define mod 1000000007
#define mp make_pair
#define pb push_back
#define nd second
#define st first
#define inf mod
#define endl '\n'
#define sag (sol|1)
#define sol (root<<1)
#define ort ((bas+son)>>1)
#define bit(x,y) ((x>>y)&1)

int i,j,k,n,m,x,y,z;
int ans[N],S[N][19];
int wh[N],St[4*N];
int L[N],G[N],end[N];
char str[N];
vector< pair< pii , int > > v;
vector< int > v2[N];
int lp(int x,int y){
	int p=0;

	for(int i=18 ; i>=0 ; i--)
		if(S[x][i] == S[y][i] and p+(1<<i)){
			x += 1<<i;
			y += 1<<i;
			p += 1<<i;
		}
	return p;
}

int main(){
	cin >> n;

	scanf("%s",str+1);

	stack<int> stk;

	for(i=n ; i>=1 ; i--){
		if(str[i] == '('){
			if(stk.size()){
				ans[i] = ans[stk.top()+1] + 1;
				end[i] = stk.top();
				if(ans[stk.top()+1])
					G[i] = G[stk.top()+1];
				else
					G[i] = i;
				v2[G[i]].pb(i);
				stk.pop();
			}
		}
		else
			stk.push(i);
		S[i][0] = str[i];
	}

	for(i=1 ; i<=n ; i++)
		reverse(v2[i].begin(),v2[i].end());

	for(i=1 ; i<=18 ; i++){
		v.clear();

		for(j=1 ; j<=n ; j++)
			v.pb(mp(mp(S[j][i-1],S[min(n+1,j+(1<<i-1))][i-1]),j));

		sort(v.begin(),v.end());

		S[v[0].nd][i] = 1;

		for(j=1 ; j<n ; j++)
			if(v[j].st == v[j-1].st)
				S[v[j].nd][i] = S[v[j-1].nd][i];
			else
				S[v[j].nd][i] = S[v[j-1].nd][i]+1;
	}

	for(i=1 ; i<=n ; i++)
		wh[S[i][18]] = i;

	ll sum=0;

	for(i=1 ; i<=n ; i++){
		if(!ans[wh[i]])
			continue;

		int x = wh[i];
		int t = lp(wh[i],wh[i-1]);
		int b = upper_bound(v2[G[x]].begin(),v2[G[x]].end(),x+t)-1-v2[G[x]].begin();
		int a = v2[G[x]][b];

		if(end[a] < x+t)
			continue;
		
		sum += ans[a];
	}

	cout << sum << endl;
}
