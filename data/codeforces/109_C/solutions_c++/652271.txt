#include<stdio.h>
typedef long long ll;
ll ans;
long n,i,j,k,l;
inline bool check(){
	while(l) if(l%10!=4&&l%10!=7) return 1;else l/=10;
	return 0;
}
bool in[100001];
struct EDGE{
	long t;EDGE *next;
	inline void init(const long _s,const long _t);
}E[200000],*V[100001],*PE=E;
long bfs[100001],H,T;
inline void EDGE::init(const long _s,const long _t){
	t=_t,next=V[_s],V[_s]=this;
}
int main(){
	for(scanf("%ld",&n),i=1;i<n;++i)
		if(scanf("%ld%ld%ld",&j,&k,&l),check())
			PE++->init(j,k),PE++->init(k,j);
	for(i=1;i<=n;++i)
		if(!in[i]){
			in[i]=1,H=0,T=1,bfs[1]=i;
			while(H++!=T){
				j=bfs[H],PE=V[j];
				while(PE) {if(!in[PE->t]) in[PE->t]=1,bfs[++T]=PE->t;PE=PE->next;}
				}
			ans+=(ll)T*(n-T)*(n-T-1);
			}
	printf("%I64d\n",ans);
	scanf("%ld",&n);
	return 0;
}
