#include<bits/stdc++.h>

using namespace std;

#define pb push_back
#define int long long

int n,x,y,z,h[100005],i,s;
int ans;
vector<int> arr[100005],v[100005];

bool lucky(int x){
	while(x){
		if(x%10 != 4 and x%10 != 7)
			return 0;
		x /= 10;
	}
	return 1;
}

int dfs(int x,int s){
	v[s].pb(x);

	h[x] = 1;

	for(int i=0 ; i<arr[x].size() ; i++){
		if(!h[arr[x][i]]){
			dfs(arr[x][i] , s);
		}
	}
}

main(){
	cin >> n;

	for(i=1 ; i<n ; i++){
		cin >> x >> y >> z;
	
		if(!lucky(z)){
			arr[x].pb(y);
			arr[y].pb(x);
		}

	}

	for(i=1 ; i<=n ; i++){
		if(!h[i]){
			dfs(i,++s);
		}
	}

	for(i=1 ; i<=s ; i++){
		int a = v[i].size();
		ans += a * (n-a)*(n-a-1);
	}

	cout << ans << endl;
}
