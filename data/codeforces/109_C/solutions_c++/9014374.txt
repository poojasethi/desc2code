#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <vector>
#define N 100010
#define int64 long long
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m;
int f[N];
int64 sum,s;
vector<int> a[N];
inline bool ju(int x) {
	for (;x;x/=10) {
		int A=x%10;
		if (A!=4&&A!=7) return 1;
	}
	return 0;
}
void dfs(int x) {
	int i;
	f[x]=1; s++;
	for (i=0;i<a[x].size();i++) {
		int A=a[x][i];
		if (f[A]) continue;
		dfs(A);
	}
}
int main() {
	scanf("%d",&n);
	sum=1ll*n*(n-1)*(n-2);
	For(i,1,n-1) {
		int x,y,z;
		scanf("%d%d%d",&x,&y,&z);
		if (ju(z)) {
			a[x].push_back(y);
			a[y].push_back(x);
		}
	}
	For(i,1,n) if (!f[i]) {
		s=0;
		dfs(i);
		sum=sum-s*(s-1)*(n-2)*2+s*(s-1)*(s-2);
	}
	printf("%I64d\n",sum);
	return 0;
}
