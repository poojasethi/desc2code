//program task_c

#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>

using namespace std;

int p[100000];
long long size[100000];

int root(int x)
{
  if(p[x]==x)return x;else return p[x]=root(p[x]);
}

bool Check(int x)
{
  while(x){if(x%10!=4&&x%10!=7)return false;x/=10;}
  return true;
}

int main()
{
  long long n,i;
  scanf("%I64d",&n);
  for(i=0;i<n;i++)p[i]=i;
  for(i=1;i<n;i++)
    {
	  int x,y,z;
	  scanf("%d%d%d",&x,&y,&z);x--;y--;
	  if(!Check(z))p[root(x)]=root(y);
	}
  memset(size,0,sizeof(size));
  for(i=0;i<n;i++)size[root(i)]++;
  long long Ans=0;
  for(i=0;i<n;i++)Ans+=size[i]*(n-size[i])*(n-size[i]-1);
  printf("%I64d\n",Ans);
  return 0;
}
