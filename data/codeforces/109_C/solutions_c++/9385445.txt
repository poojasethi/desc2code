#include<bits/stdc++.h>

using namespace std;

#define pb push_back
#define int long long

vector<int> V[100005];

int Q[100005];

int t;

bool H[100005];

int dfs(int x){
	
	int i;

	t++;

	H[x]=1;

	for(i=0 ; i<V[x].size() ; i++)
		if(!H[V[x][i]])
			dfs(V[x][i]);
}

main(){

	int n,u,v,w,bek,top=0,s=0,i;
	
	cin>>n;

	for(i=1 ; i<=n-1 ; i++){
		
		cin>>u>>v>>w;

		bek=0;

		while(w){
			
			if((w%10)!=4 and (w%10)!=7){
				bek=1;
				break;
			}

			w/=10;
		}

		if(bek){
			V[u].pb(v);
			V[v].pb(u);
		}

	}

	for(i=1 ; i<=n ; i++){
	
		if(!H[i]){
			
			t=0;

			dfs(i);
		
			top+=t*((n-t)*(n-t-1));
		}
	}


	cout<<top;

}
