#include <iostream>
#include <string>
#define rep(i,n) for(int i=0;i<n;i++)
using namespace std;

string str;
int l,r = -1,res,cnt[100010],s[100010],p,tl,nr,ll;

int main(){

  cin>>str;

  rep(i,str.size()){
    cnt[i] = (i==0?str[0]=='[':(cnt[i-1]+(str[i]=='[')));
    if(str[i]=='(' || str[i] == '[')s[p++]=i;
    else if(p==0 || (str[i]==')' && str[s[p-1]]!='(') ||( str[i] == ']' && str[s[p-1]] !='[')){
      p=0;
      ll = i+1;
    }
    else {
      p--;
      tl = (p==0?ll:s[p-1]+1);
      nr = cnt[i]-(tl==0?0:cnt[tl-1]);
      if(res < nr){res = nr;l=tl;r = i;}
    }
  }

  cout<<res<<endl;
  cout<<str.substr(l,r-l+1)<<endl;

}
