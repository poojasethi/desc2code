#include<stdio.h>
#include<string.h>

char s[100005];
int st[100005],cnt[100005];

int main()
{
	int top,i,j,beg,end,ans=0;
	scanf("%s",s+1);
	for(i=1;s[i];i++) cnt[i]=cnt[i-1]+(s[i]=='[');
	top=0;
	for(i=1;s[i];i++)
	{
		if(s[i]=='(') st[++top]=i;
		if(s[i]=='[') st[++top]=i;
		if(s[i]==')')
		{
			if(s[st[top--]]=='(') 
			{
				j=st[top];
				if(cnt[i]-cnt[j]>ans)
				{
					ans=cnt[i]-cnt[j];
					beg=j+1,end=i;
				}
			}
			else st[++top]=i;
		}
		if(s[i]==']')
		{
			if(s[st[top--]]=='[')
			{
				j=st[top];
				if(cnt[i]-cnt[j]>ans)
				{
					ans=cnt[i]-cnt[j];
					beg=j+1,end=i;
				}
			}
			else st[++top]=i;
		}
	}
	printf("%d\n",ans);
	if(ans) for(i=beg;i<=end;i++) printf("%c",s[i]);
	puts("");
	return 0;
}

	
	  									   		      	