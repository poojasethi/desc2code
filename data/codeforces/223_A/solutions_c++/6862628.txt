#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 100010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an,l,r;
int f[N],h[N];
char p[N];
int main() {
	scanf("%s",p+1);
	n=strlen(p+1);
	for (i=n-1;i;i--) if (p[i]=='('||p[i]=='[') {
		int A=i+1,s=0;
		if (h[A]) s=f[A],A=h[A]+1;
		if (p[i]=='('&&p[A]!=')'||p[i]=='['&&p[A]!=']') continue;
		s+=p[i]=='[';
		if (h[A+1]) s+=f[A+1],A=h[A+1];
		if (s>an) an=s,l=i,r=A;
		f[i]=s,h[i]=A;
	}
	printf("%d\n",an);
	if (an) {
		For(i,l,r) printf("%c",p[i]);
		printf("\n");
	}
	//for(;;);
	return 0;
}
