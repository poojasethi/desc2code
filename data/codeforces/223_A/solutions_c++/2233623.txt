#include<cstdio>
#include<cstring>
using namespace std;
const int N = 111111;
char buf[N];
int top;
int stk[N];
int cnt[N];
bool ok(char ch)
{
	if(ch==')'&&buf[stk[top-1]]!='(') return true;
	if(ch==']'&&buf[stk[top-1]]!='[') return true;
	return false;
}
int main()
{
	char ch;
	int i,j,k,len,ans,l,r;
	int s,t;
	while(~scanf("%s",buf+1))
	{
		ans=top=0;
		l=r=0;
		cnt[0]=s=t=0;
		for(i=1;buf[i];i++)
		{
			ch=buf[i];
			cnt[i]=cnt[i-1]+(ch=='[');
			if(ch=='('||ch=='[') stk[top++]=i;
			else if(ok(ch)) top=0,stk[top++]=i;
			else
			{
				top--;
				l=stk[top-1];
				r=i;
				if(cnt[r]-cnt[l]>ans)
				ans=cnt[r]-cnt[l],s=l,t=r;
			}
		}
	//	printf("%d %d\n",s,t);
		printf("%d\n",ans);
		for(i=s+1;i<=t;i++) putchar(buf[i]);
		puts("");
	}
	return 0;
}
