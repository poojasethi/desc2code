#include<cstdio>
#include<cstdlib> 
#include<cstring>
//ÓÃl[i]¼ÇÂ¼iÎ»ÖÃÏòÓÒµÄ×î³¤¿ÉÐÐ½â¡£
//iÓÃl[i+1]¸üÐÂ¡£ ÕýÈ·ÐÔ:·ÖÀàÌÖÂÛ 
bool Judge(char a,char b){
	return (a=='('&&b==')')||(a=='['&&b==']');
}
char s[100005];
int n,l[100005],ans,ans1,f[100005];
int main(){
	scanf("%s",s+1);
	n=strlen(s+1);
	for (int i=n-1;i>=1;i--){
		if(s[i]==')'||s[i]==']') continue;
		int index=i+l[i+1]+1;
		if(Judge(s[i],s[index])) l[i]=index-i+1+l[index+1];
	}
	for (int i=1;i<=n;i++) f[i]=f[i-1]+(s[i]=='[');
	l[0]=0;
	for (int i=1;i<=n;i++){
		if(f[i+l[i]-1]-f[i-1]>ans){
			ans=f[i+l[i]-1]-f[i-1];
			ans1=i;
		}
	}
	printf("%d\n",ans);
	for (int i=ans1;i<ans1+l[ans1];i++) printf("%c",s[i]);
}