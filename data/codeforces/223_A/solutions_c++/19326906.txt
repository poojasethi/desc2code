#include<cstdio>
#include<cstring>
const int N=100005;
char s[N];
int stack[N],dp[N],sum[N];
int main()
{
	int i,k,n,x,y,l,r,t,ans;
	ans=k=t=0;
	scanf("%s",s);
	n=strlen(s);
	memset(dp,-1,sizeof(dp));

	for(i=0;i<n;i++)
	{
		sum[i+1]=sum[i];
		if(s[i]=='('||s[i]=='[')stack[t++]=i;
		else
		{
		//	printf("%c %c\n",s[stack[t-1]],s[i]);
			if(!t||(s[i]==')'&&s[stack[t-1]]=='[')||(s[i]==']'&&s[stack[t-1]]=='('))
				t=0;
			else
			{
				t--;
				sum[i+1]+=(s[i]==']');
				y=stack[t];
				if(y&&dp[y-1]!=-1)dp[i]=dp[y-1];
				else dp[i]=y;
				x=dp[i];
				if(sum[i+1]-sum[x]>ans)
					ans=sum[i+1]-sum[x],l=x,r=i;
			}
		}
	}
	printf("%d\n",ans);
	if(ans)
	{
		for(i=l;i<=r;i++)
			printf("%c",s[i]);
	}
	return 0;
}
//(()[))()[]

  	  	 	 		   			  			 			 		