#include <iostream>

using namespace std;

int dp[100005], start[100005];

int main()
{
	string s;
	cin >> s;
	dp[0] = 0;
	start[0] = 1;
	for (int i = 0; i < s.length(); i++)
	{
		dp[i] = 0;
		start[i] = i + 1;
		if (s[i] == ')' && 0 <= start[i - 1] - 1 && s[start[i - 1] - 1] == '(')
		{
			dp[i] = dp[i - 1];
			start[i] = start[i - 1] - 1;
		}
		if (s[i] == ']' && 0 <= start[i - 1] - 1 && s[start[i - 1] - 1] == '[')
		{
			dp[i] = dp[i - 1] + 1;
			start[i] = start[i - 1] - 1;
		}
		if (0 <= start[i] - 1)
		{
			dp[i] += dp[start[i] - 1];
			start[i] = start[start[i] - 1];
		}
	}
	int Max = 0;
	string ans = "";
	for (int i = 0; i < s.length(); i++)
	{
		if (dp[i] > Max)
		{
			Max = dp[i];
			ans = s.substr(start[i], i - start[i] + 1);
		}
	}
	cout << Max << endl;
	cout << ans << endl;
}
