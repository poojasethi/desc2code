#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

const int N = 100050;

char buff[N];
int len[N], n, res[N];

int main ()
{
#ifdef LOCAL
	freopen("in", "r", stdin);
#endif
	scanf("%s", buff);
	n = strlen(buff);
	len[n - 1] = 0;
	int rest(0), brt(0);
	for (int i = n - 2; i >= 0; --i)
	{
		int z = len[i + 1] + i + 1;
		if (buff[i] == '(' && buff[z] == ')' || buff[i] == '[' && buff[z] == ']')
		{
			len[i] = len[i + 1] + 2 + len[i + len[i + 1] + 2];
			res[i] = res[i + 1] + (buff[i] == '[') + res[i + len[i + 1] + 2];
		}
		else len[i] = 0;
		if (res[i] > rest)
			rest = res[i], brt = i;
	}
	printf("%d\n", rest);
	if (rest)
	{
		for (int i = 0; i < len[brt]; ++i)
			putchar(buff[brt + i]);
		putchar('\n');
	}
}

