#include<cstdio>
#include<algorithm>
#include<cstring>

using namespace std;
char buf[100100];
bool Coin(char c, char c2) {
	return c == '[' && c2 == ']' || c == '(' && c2 == ')';
}
int S[100100], top, sum[100100];
int main() {
	scanf("%s", buf);
	int n = strlen(buf), ans = 0;
	int ansx, ansy;
	top = 0;
	S[0] = -1;
	S[++ top] = 0;
	for(int i = 1; i < n; i ++) {
		sum[i] = sum[i - 1];
		if(top && Coin(buf[S[top]], buf[i])) {
			if(sum[i] - sum[S[top - 1]] + (buf[i] == ']') > ans) {
				ans = sum[i] - sum[S[top - 1]] + (buf[i] == ']');
				ansx = S[top - 1], ansy = i;
			}
			if(buf[i] == ']')
				sum[i] ++;
			-- top;
		} else {
			S[++ top] = i;
		}
	}
	printf("%d\n", ans);
	if(ans > 0) {
		for(int i = ansx + 1; i <= ansy; i ++)
			printf("%c", buf[i]);
		puts("");
	}
	return 0;
}
