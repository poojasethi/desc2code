#include<stdio.h>
#include<string.h>
#include<algorithm>
using namespace std;
char S[100010];
int n;
int ans[100010];
int ansr[100010];
int main()
{
	scanf("%s",S+1);
	memset(ans,-1,sizeof(ans));
	int L,R;
	int Ans=-1,l=1,r=0;
	n=strlen(S+1);
	for(L=n-1;L;L--)if(S[L]=='('||S[L]=='[')
	{
		int tans=0;
		int R=L+1;
		if(S[R]=='('||S[R]=='[')
			if(ansr[R])tans+=ans[R],R=ansr[R]+1;
			else continue;
		if((S[L]=='('&&S[R]!=')')||(S[L]=='['&&S[R]!=']'))continue;
		tans+=S[L]=='[';
		if(ansr[R+1])tans+=ans[R+1],R=ansr[R+1];
		ans[L]=tans,ansr[L]=R;
		if(tans>Ans)Ans=tans,l=L,r=R;
	}
	printf("%d\n",max(Ans,0));
	for(int i=l;i<=r;i++)putchar(S[i]);
	return 0;
}
