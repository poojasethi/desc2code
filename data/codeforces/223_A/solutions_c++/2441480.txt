#include <cstring>
#include <cstdio>
#include <iostream>

#define MAXN 111111

using namespace std;

char str[MAXN];
int ans[MAXN]={0}, f[MAXN]={0}, res=0, resl, resr, len;

int main()
{
	scanf("%s", str); len=strlen(str);
	for(int i=0; i<=len; i++)
	{
		if(i==0 || i-f[i-1]-1<0) continue;
		if(str[i]==')' && str[i-f[i-1]-1]=='(') 
		{
			f[i]=f[i-1]+2+f[i-f[i-1]-2];
			ans[i]=ans[i-1]+ans[i-f[i-1]-2];
		}
		if(str[i]==']' && str[i-f[i-1]-1]=='[')
		{
			f[i]=f[i-1]+2+f[i-f[i-1]-2];
			ans[i]=ans[i-1]+ans[i-f[i-1]-2]+1;
		}
		if(ans[i]>res) res=ans[i], resr=i, resl=i-f[i]+1;
	}
	printf("%d\n", res);
	if(res==0) return 0;
	for(int i=resl; i<=resr; i++) printf("%c", str[i]); printf("\n");
	return 0;
}

	  		  		  				  			    		