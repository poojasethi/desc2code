#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
#include <vector>
#include <set>
#include <map>
#include <cmath>
#include <sstream>
#include <iomanip>
using namespace std;
char str[200000],op[300];
int f[200000],g[200000];
int main(){
	int N,i;
	while(scanf("%s",str+1)!=EOF){
		str[0] = ' ';
		op[')'] = '(';
		op[']'] = '[';
		N = strlen(str);
		f[0] = g[0] = 0;
		int ansg=-1,ansi,ansf;
		for (i=1;i<N;i++){
			f[i] = g[i] = 0;
			if (str[i]==')'||str[i]==']'){
				if (str[i-f[i-1]-1]==op[str[i]]){
					f[i] = f[i-1]+2;
					g[i] = g[i-1]+(str[i]==']');
				}
			}
			g[i]+=g[i-f[i]];
			f[i]+=f[i-f[i]];
			if (f[i]>0&&(ansg==-1||g[i]>ansg)){
				ansg = g[i];
				ansi = i,ansf = f[i];
			}
		}
		if (ansg==-1) printf("0\n");
		else {
			printf("%d\n",ansg);
			for (i=ansi-ansf+1;i<=ansi;i++)
				printf("%c",str[i]);
			printf("\n");
		}
	}
}







