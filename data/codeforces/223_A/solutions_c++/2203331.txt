#include<iostream>
#include<cstdio>
#include<stack>
#include<algorithm>
#include<cstring>
using namespace std;
const int nMax = 100010;
int tot[nMax];
stack<int>	st;
char s[nMax];
int main()
{
	int i,j,L,R,ans,sz;
	while(scanf("%s",s+1)!=EOF){
		while(!st.empty())	st.pop();
		tot[0]=0;
		ans=-1;	st.push(0);
		for(i=1,sz=strlen(s+1);i<=sz;i++){
		//	printf("\n%d:",i);
			tot[i]=tot[i-1]+(s[i]=='[');
			if( s[i]=='(' || s[i]=='[' )	st.push(i);
			else if( (s[i]==')' && s[st.top()]!='(') || (s[i]==']' && s[st.top()]!='[' ) ){		while(!st.empty())	st.pop();	st.push(i);	}
			else{	
				st.pop();	
				if(tot[i]-tot[st.top()]>ans){	L=st.top()+1;	R=i;	ans=tot[R]-tot[L-1];	}
			//	printf("ans=%d\n",ans);			
			}
		}
		if(ans==-1)	printf("0\n");
		else{
			printf("%d\n",ans);
			for(i=L;i<=R;i++)	putchar(s[i]);	puts("");
		}
	}
	return 0;
}
