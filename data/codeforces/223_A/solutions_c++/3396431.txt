#include <cstdio>
#include <cstring>

char stack[1000010];
int at[1000010];
int top,sum[1000010];
char s[1000010];
int ans=0,ansl=-1,ansr=-2;
void judge(int l,int r){
	int v=sum[r]-((l==0)?0:sum[l-1]);
	if (v>ans)
		ans=v,ansl=l,ansr=r;
}
int main()
{
	scanf("%s",s);
	int len=strlen(s);
	sum[0]=(s[0]=='[');
	for (int i=1;i<len;i++)
		sum[i]=sum[i-1]+(s[i]=='[');
	for (int i=0;i<len;i++){
		//printf("i %d ans %d\n",i,ans);
		int k=i;
		top=0;
		while (k<len){
			if (s[k]=='('||s[k]=='['){
				stack[top]=((s[k]=='(')?')':']');
				at[top++]=k;
			}
			else{
				if (top==0||stack[top-1]!=s[k])
					break;
				else{
					top--;
					if (top==0)
						judge(i,k);
					else
						judge(at[top-1]+1,k);
				}
			}
			k++;
		}
		i=k;
	}
	printf("%d\n",ans);
	for (int i=ansl;i<=ansr;i++)
		putchar(s[i]);
	puts("");
}

