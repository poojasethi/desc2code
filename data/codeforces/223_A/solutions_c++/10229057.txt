#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstring>
#include <vector>
#include <map>
using namespace std;
//#define vector vv

int const N=2e6+5;
int const md=1e9+7;
int n,m,i,j;
int ans,x,y,z,k,d[N],a[N],t,tp;
char st[N];

void prov(int i,int j)
{
// cout<<i<<' '<<j<<endl;
 if (a[i]-a[j]>ans) ans=a[i]-a[j],x=j,y=i;
}

int main()
{
scanf("%s",st+1);
for (i=1;st[i];i++)
 a[i]=a[i-1]+(st[i]=='[');
d[0]=0;
for (i=1;st[i];i++)
 if (st[i]=='(' || st[i]=='[') d[++t]=i; else
  if (t==0 || (st[i]==')' && st[d[t]]!='(') || (st[i]==']' && st[d[t]]!='[') ) { t=0;d[t]=i;} else
    {
      t--;
      prov(i,d[t]);
    }

printf("%d\n",ans);
if (ans) {
         for (i=x+1;i<=y;i++) printf("%c",st[i]);
            }

}
