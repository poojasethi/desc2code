#include<stdio.h>
#include<string.h>
#include<algorithm>
#include<stdlib.h>
#include<stack>
using namespace std;
char s[100005];
int ans,jl,jr,len,sum[100005];
int st[100005],top;
void out(int jl,int jr){
	for(int i=jl;i<=jr;i++)
		printf("%c",s[i]);
}
void solve(){    
    int ans=0;
	jl=0;
    jr=-1;	
	top=0;
	st[top]=0;
    for(int i=1;i<=len;i++){
        if(s[i]=='('||s[i]=='[')st[++top]=i;       
        else if(s[i]==')'&&s[st[top]]!='('||s[i]==']'&&s[st[top]]!='['){
			top=0;
			st[top]=i;			
        }
        else {
			top--;
			if(sum[i]-sum[st[top]]>ans){
				ans=sum[i]-sum[st[top]];
				jr=i,jl=st[top]+1;
			}
		}
    }
    printf("%d\n",ans);
	if(ans)
		out(jl,jr);
	printf("\n");
}
int main(){
	while(~scanf("%s",s+1)){
		len=strlen(s+1);
		for(int i=1;i<=len;i++)
			sum[i]=sum[i-1]+(s[i]=='[');
        solve();
	}
	return 0;
}

	 	 			 	 	   				  				      	