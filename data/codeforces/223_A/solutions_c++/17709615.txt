#include <bits/stdc++.h>
using namespace std;

int open[1 << 17];

int main() {
  ios::sync_with_stdio(0);
  cin.tie(0);
  
  string s; cin >> s;
  open[0] = s[0] == '[';
  for (int i = 1; i < s.length(); ++i)
    open[i] = open[i - 1] + (s[i] == '[');
  stack<int> st;
  int l = 0, r = 0;
  int o = 0;
  for (int i = 0; i < s.length(); ++i) {
    if (s[i] == '(' || s[i] == '[') st.push(i);
    else {
      if (s[i] == ')' && !st.empty() && s[st.top()] == '(') st.pop();
      else if (s[i] == ']' && !st.empty() && s[st.top()] == '[') st.pop();
      else st.push(i);
    }
    int opens = open[i] - (st.empty() ? 0 : open[st.top()]);
    if (opens > o) {
      o = opens;
      l = st.empty() ? 0 : st.top() + 1;
      r = i;
    }
  }
  cout << o << endl;
  if (o) cout << s.substr(l, r - l + 1) << endl;

  return 0;
}