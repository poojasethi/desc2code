#include<string>
#include<iostream>
#include<algorithm>
#include<cstdio>
using namespace std;
const int size=100000+10;
int num[size],L,R,ans=0,temp[size],tp;
char s[size];
int main(){
    temp[tp++]=0;
    scanf("%s",s+1);
    for(int i=1;s[i];i++){
        num[i]=num[i-1]+(s[i]=='[');
        if(s[i]=='('||s[i]=='[')temp[tp++]=i;
        else if(s[i]==']'&&s[temp[tp-1]]!='['||
                s[i]==')'&&s[temp[tp-1]]!='(')
                tp=0,temp[tp++]=i;
        else{
            tp--;
            if(ans<num[i]-num[temp[tp-1]]){
                ans=num[i]-num[temp[tp-1]];
                L=temp[tp-1],R=i;
            }}}
    printf("%d\n",ans);
    if(ans)for(int i=L+1;i<=R;i++)printf("%c",s[i]);
    return 0;
}
