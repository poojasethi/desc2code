#include <cstdio>
#include <cstring>
#include <vector>
using namespace std;

char s[100005];
int n;
vector<int> v;
bool f[100005];
int dp[100005];

bool match(char a, char b) {
	return a == '(' && b == ')'
		|| a == '[' && b == ']';
}

int main() {
	scanf("%s", s);
	n = strlen(s);
	for (int i = 0; i < n; ++i) {
		if (!v.empty() && match(s[v.back()], s[i])) {
			f[v.back()] = f[i] = true;
			v.pop_back();
		} else {
			v.push_back(i);
		}
	}
	int ans = 0, idx = -1;
	for (int j, i = 0; i < n; ++i) {
		if (!f[i]) continue;
		int cnt = 0;
		for (j = i; j < n && f[j]; ++j) {
			cnt += (s[j] == '[');
		}
		if (cnt >= ans) {
			ans = cnt;
			idx = i;
		}
		i = j;
	}
	printf("%d\n", ans);
	if (idx >= 0) {
		for (int i = idx; i < n && f[i]; ++i) {
			printf("%c", s[i]);
		}
	}
	puts("");
}
