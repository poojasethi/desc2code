#include<cstdio>
#include<cstring>
#define N 100005
using namespace std;
char s[N];int num[N],P[N],ans,i,x,y,L,next;
int main()
{
  scanf("%s",s+1);L=strlen(s+1);
  for (i=1;i<=L;i++)
    num[i]+=num[i-1]+(s[i]=='[');
  P[L]=0;x=1;y=0;
  for (i=L-1;i;i--)
  {
    if (s[i]==')'||s[i]==']') continue;
    next=i+1+P[i+1];
    if (s[i]=='('&&s[next]==')'||s[i]=='['&&s[next]==']')
      P[i]=next-i+1+P[next+1];
  }
  for (i=1;i<=L;i++)
    if (num[i+P[i]-1]-num[i-1]>ans)
      ans=num[i+P[i]-1]-num[i-1],x=i,y=i+P[i]-1;
  printf("%d\n",ans);
  for (i=x;i<=y;i++) printf("%c",s[i]);
  return 0;
}
