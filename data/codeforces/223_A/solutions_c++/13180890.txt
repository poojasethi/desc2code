#include<bits/stdc++.h>
using namespace std;
int const lim = 100003;
int res[lim]={0},to[lim]={0},ans=0,l,r;
int main ()
{
    string s;cin >> s;
    for(int i=2;i<=s.size();i++)
    {
        if(s[i-1]!=')'&&s[i-1]!=']')continue;
        int t = i-1,ss=0;
        if(to[t])t=to[t]-1,ss+=res[i-1];
        if(s[i-1]==']'&&s[t-1]=='['||s[i-1]==')'&&s[t-1]=='(')
        {
            ss += s[i-1]==']';
            if(to[t-1]){to[i]= to[t-1];res[i] = ss+res[t-1];}
            else res[i] = ss,to[i] = t;
            if(res[i]>ans)ans=res[i],l=to[i],r=i;
        }
    }
    cout << ans << endl;
    for(int i=l;i<=r;i++)
        cout << s[i-1];
}
