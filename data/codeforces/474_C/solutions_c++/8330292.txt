#include <bits/stdc++.h>
using namespace std;

long long N, A[4], B[4], X[4], Y[4], res, D[6];

void rot(int p){//�߶�90����ת
  int dx = X[p] - A[p], dy = Y[p] - B[p];
  X[p] = A[p] - dy, Y[p] = B[p] + dx;
}

//�жϴ��ĵ�ɲ������������
bool square(){
  int k = 0;
  for(int i = 0; i < 4; i++){
    for(int j = i + 1; j < 4; j++){
      D[k++] = (X[i] - X[j]) * (X[i] - X[j]) + (Y[i] - Y[j]) * (Y[i] - Y[j]);
    }
  }
  sort(D, D + 6);
//D���鴢�����еıߣ�����
  for(int i = 0; i < 4; i++){
    if(D[i] != D[0]) return 0;
  }
  for(int i = 4; i < 6; i++){
    if(D[i] != 2 * D[0]) return 0;
  }
  return D[0] > 0;
}

void gen(int d, long long k){//�ݹ�
  if(d == 4){
    if(square()) res = min(res, k);
    return;
  }
  for(int i = 0; i < 4; i++){
    gen(d + 1, k + i);
    rot(d);
  }
}

void check(){
  res = 1000;
  for(int i = 0; i < 4; i++){
    cin >> X[i] >> Y[i] >> A[i] >> B[i];
  }
  gen(0, 0);
  cout << (res == 1000 ? -1 : res) << '\n';
}

int main(){
  cin >> N;
  while(N--) check();
}
