#include<bits/stdc++.h>
using namespace std;
typedef long long ll;

const int N = 4;
int x[N], y[N], a[N], b[N], d1[N], d2[N], n, ans = 1e6;

inline ll dis(int a, int b, int c, int d) {
	return (ll)(a-c)*(a-c) + (ll)(b-d)*(b-d);
}

inline bool ok() {
	vector<ll> v;
	for(int i=0 ; i<4 ; ++i)
		for(int j=i+1 ; j<4 ; ++j)
			v.push_back(dis(x[i], y[i], x[j], y[j]));
	sort(v.begin(), v.end());
	if(!v[0] || v[3] != v[0] || v[4] != 2*v[3] || v[4] != v[5]) return false;
	return true;
}

inline void CC90(int i) {
	swap(d1[i], d2[i]);
	d1[i] *= -1;
	x[i] = a[i] + d1[i];
	y[i] = b[i] + d2[i];
}

int main(int argc, char **argv) {
	scanf("%d", &n);
	for(int t=0 ; t<n ; ++t){
		for(int j=0 ; j<4 ; ++j) {
			scanf("%d%d%d%d", x+j, y+j, a+j, b+j);
			d1[j] = x[j] - a[j];
			d2[j] = y[j] - b[j];
		}
		ans = 1e6;
		for(int i=0 ; i<4 ; ++i, CC90(0))
			for(int j=0 ; j<4 ; ++j, CC90(1))
				for(int k=0 ; k<4 ; ++k, CC90(2))
					for(int d=0 ; d<4 ; ++d, CC90(3))
						if(ok()) ans = min(ans, i+j+k+d);
		if(ans == 1e6) ans = -1;
		printf("%d\n", ans);
	}
	return 0;
}
