#include <cstdio>
#include <utility>
#include <map>
#include <algorithm>
#define X first
#define Y second
#define LL long long
#define REP(i,n) for (int i=1;i<=n;++i)
#define FOR(i,n) for (__typeof(n.begin())i=n.begin();i!=n.end();++i)
using namespace std;

pair<int,int> aa[11],a[11],b[11];
map<LL,int> mp;
int top,ans;
LL st[11];

pair<int,int> F(pair<int,int> a,pair<int,int> b,int k) {
	if (k==1) return a;
	int dx=a.X-b.X;
	int dy=a.Y-b.Y;
	a.X=b.X-dy;
	a.Y=b.Y+dx;
	return F(a,b,k-1);
}

LL Dist(pair<int,int> a,pair<int,int> b) {
	return (LL)(a.X-b.X)*(LL)(a.X-b.X)+(LL)(a.Y-b.Y)*(LL)(a.Y-b.Y);
}

bool Check() {
	mp.clear();
	REP(i,4) REP(j,i-1)
		++mp[Dist(aa[i],aa[j])];
	if (mp.size()!=2) return false;
	top=0;
	FOR(p,mp) {
		st[++top]=p->X;
		if (top==1 && p->Y!=4) return false;
		if (top==2 && p->Y!=2) return false;
	}
	if (st[1]*2!=st[2]) return false;
	return true;
}

int main() {
	int T;
	scanf("%d",&T);
	REP(T_T,T) {
		REP(i,4) scanf("%d%d%d%d",&a[i].X,&a[i].Y,&b[i].X,&b[i].Y);
		ans=999;
		REP(i,4) REP(j,4) REP(x,4) REP(y,4) {
			aa[1]=F(a[1],b[1],i);
			aa[2]=F(a[2],b[2],j);
			aa[3]=F(a[3],b[3],x);
			aa[4]=F(a[4],b[4],y);
			if (Check()) ans=min(ans,i+j+x+y-4);
		}
		if (ans==999) puts("-1");
		else printf("%d\n",ans);
	}
	return 0;
}