#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <stdio.h>
using namespace std;
long long t,a[4],s[4],d[4],f[4],g[4],h[6];
void l(int w){
  int e,r,v;
  long long c;
  if(w==4){
   v=0;
   for(e=0;e<3;e++)
    for(r=e+1;r<4;r++){
     h[v]=(a[e]-a[r])*(a[e]-a[r])+(s[e]-s[r])*(s[e]-s[r]);
     v++;}
   for(e=0;e<5;e++){
    v=e;
    for(c=e+1;c<6;c++)
     if(h[c]<h[v])
      v=c;
    if(v>e){
     c=h[e];h[e]=h[v];h[v]=c;}}
   if(((h[0]==h[3])&&(h[5]>0))&&((h[4]==h[5])&&((h[0]<<1)==h[5])))
    t=min(t,g[0]+g[1]+g[2]+g[3]);
   return;}
  for(e=0;e<4;e++){
   g[w]=e;
   l(w+1);
   c=a[w]-d[w];
   v=s[w]-f[w];
   a[w]=d[w]-v;
   s[w]=f[w]+c;}
}
int main(){
  //freopen("input.txt","r",stdin);
  //freopen("output.txt","w",stdout);
  int q,w,e,r;
  for(cin>>q;q;q--){
   for(w=0;w<4;w++)
    cin>>a[w]>>s[w]>>d[w]>>f[w];
   t=10000;
   l(0);
   if(t==10000)
    cout<<"-1\n";
   else
    cout<<t<<"\n";}
  return 0;}