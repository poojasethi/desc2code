#include <bits/stdc++.h>
using namespace std;
typedef long long LL;
struct Point{
	int x,y;
	void input(){scanf("%d%d",&x,&y);}
};
struct Mole{
	Point a,b;
	void input(){a.input(),b.input();}
	inline void Rotate(Point &res)
	{
		res.x-=b.x;
		res.y-=b.y;
		swap(res.x,res.y);
		res.x*=-1;
		res.x+=b.x;
		res.y+=b.y;
	}
	inline Point rotate(int t)
	{
		Point Ret=a;
		while(t--)
			Rotate(Ret);
		return Ret;
	}
}a,b,c,d;
inline LL dist(Point &a,Point &b){return 1ll*(a.x-b.x)*(a.x-b.x)+1ll*(a.y-b.y)*(a.y-b.y);}
bool sqr(Point &ta,Point &tb,Point &tc,Point &td)
{
	LL d[6]={dist(ta,tb),dist(ta,tc),dist(ta,td),dist(tb,tc),dist(tb,td),dist(tc,td)};
	sort(d,d+6);
	return (d[0]==d[1]&&d[1]==d[2]&&d[2]==d[3]&&d[4]==d[5]&&d[0]&&d[0]*2==d[4]);
}
int chk()
{
	int ans=20;
	for(int i=0;i<4;i++)
		for(int j=0;j<4;j++)
			for(int k=0;k<4;k++)
				for(int l=0;l<4;l++)
				{
					Point ta=a.rotate(i),tb=b.rotate(j),tc=c.rotate(k),td=d.rotate(l);
					if(sqr(ta,tb,tc,td))
						ans=min(ans,i+j+k+l);
				}
	if(ans==20)
		ans=-1;
	return ans;
}
int main()
{
	int T;
	scanf("%d",&T);
	while(T--)
	{
		a.input();
		b.input();
		c.input();
		d.input();
		printf("%d\n",chk());
	}
	return 0;
}