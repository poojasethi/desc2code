#include<bits/stdc++.h>
#include<functional>
#include<string>
using namespace std;
#define ll long long int
#define mod 1000000007
#define mp make_pair
#define s second
#define f first
#define pi pair<ll,ll>
#define pb push_back
pi rot(pi xi,pi ai){
ll x=xi.f;
ll y=xi.s;
ll a=ai.f;
ll b=ai.s;
return mp(b-y+a,x-a+b);
}
ll dist(pi a,pi b){
return (a.f-b.f)*(a.f-b.f)+(a.s-b.s)*(a.s-b.s);
}
pi c[4];
pi a[4];
bool issq(){
vector<ll>v;
ll mi=INT_MAX;
for(int i=0;i<4;i++){
for(int j=i+1;j<4;j++){
	if(c[i]==c[j]) return 0;
v.pb(dist(c[i],c[j]));
mi=min(mi,dist(c[i],c[j]));
}
}
sort(v.begin(),v.end());
for(int i=0;i<4;i++){
if(v[i]!=mi) return 0;
}
for(int i=4;i<6;i++){
if(v[i]!=2*mi) return 0;
}
return 1;
}
int main(){
ll n;
cin>>n;
for(int i=0;i<n;i++){
for(int j=0;j<4;j++){
cin>>c[j].f>>c[j].s>>a[j].f>>a[j].s;
}
int ans=1000;
for(int i1=0;i1<4;i1++){
for(int i2=0;i2<4;i2++){
for(int i3=0;i3<4;i3++){
for(int i4=0;i4<4;i4++){
if(issq()){
ans=min(ans,i1+i2+i3+i4);
}
c[3]=rot(c[3],a[3]);
}
c[2]=rot(c[2],a[2]);
}
c[1]=rot(c[1],a[1]);
}
c[0]=rot(c[0],a[0]);
}
if(ans==1000) cout<<-1<<"\n";
else cout<<ans<<"\n";
}
}
