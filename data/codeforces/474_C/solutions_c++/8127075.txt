#include <bits/stdc++.h>
using namespace std;

typedef pair < int , int > pii;
#define fr first
#define se second

pii a[4], b[4];

pii r( int x , int c )
{
	pii d( a[x].fr - b[x].fr, a[x].se - b[x].se );
	while( c -- )
	{
		swap( d.fr , d.se );
		d.fr *= -1;
	}
	return pii( b[x].fr + d.fr , b[x].se + d.se );
}
long long dis( pii a , pii b )
{
	return ( a.fr - b.fr ) *1ll* ( a.fr - b.fr ) + ( a.se - b.se ) *1ll* ( a.se - b.se );
}
int ok( pii a, pii b, pii c, pii dd )
{
	long long d[6];
	d[0] = dis( a, b );
	d[1] = dis( a, c );
	d[2] = dis( a, dd );
	d[3] = dis( b, c );
	d[4] = dis( b, dd );
	d[5] = dis( c, dd );
	sort( d , d+6 );
	if( d[0] && d[0] == d[3] && d[4] == d[5] && d[4] == 2*d[0] )
		return 1;
	return 0;
}

int main()
{
	int n;
	cin >> n;
	for( int i = 0 ; i < n ; i ++ )
	{
		int ans = 1000000;
		for( int j = 0 ; j < 4 ; j ++ )
			cin >> a[j].fr >> a[j].se >> b[j].fr >> b[j].se;
		for( int i1 = 0 ; i1 < 4 ; i1 ++ )
			for( int i2 = 0 ; i2 < 4 ; i2 ++ )
				for( int i3 = 0 ; i3 < 4 ; i3 ++ )
					for( int i4 = 0 ; i4 < 4 ; i4 ++ )
						if( ok( r( 0, i1 ), r( 1, i2 ), r( 2, i3 ), r( 3, i4 ) ) )
							ans = min( ans , i1+i2+i3+i4 );
		if( ans == 1000000 )
			cout << -1 << endl;
		else
			cout << ans << endl;
	}
	return 0;
}

