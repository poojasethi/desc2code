#include <bits/stdc++.h>

using namespace std;

struct Mole
{
    int x, y, a, b;

    void Rotate()
    {
        x -= a, y -= b;
        swap(x, y);
        x = -x;
        x += a, y += b;
    }
};

int res;
double d[16];
Mole a[4];

inline __int64 sqr(int x)
{
    return (1ll*x*x);
}

inline double dist(int x1, int y1, int x2, int y2)
{
    return sqrt(sqr(x1-x2)+sqr(y1-y2));
}

void check(int ct)
{
    int c = 0;
    for (int i = 0; i < 4; i++)
        for (int j = i+1; j < 4; j++) d[++c] = dist(a[i].x, a[i].y, a[j].x, a[j].y);
    sort(d+1, d+7);
    for (int i = 1; i <= 6; i++)
        if (d[i] == 0) return;
    if ((d[1] == d[2] && d[3] == d[4] && d[4] == d[5] && d[5] == d[6])
        || (d[1] == d[2] && d[2] == d[3] && d[3] == d[4] && d[5] == d[6])) res = min(res, ct);
}

void BF(int p, int c)
{
    if (p > 3) check(c);
    else for (int i = 1; i <= 4; i++)
    {
        a[p].Rotate();
        BF(p+1, c+i%4);
    }
}

int main()
{
    int t;
    cin >> t;
    while (t--)
    {
        res = 1234567890;
        for (int i = 0; i < 4; i++) cin >> a[i].x >> a[i].y >> a[i].a >> a[i].b;
        BF(0, 0);
        if (res == 1234567890) res = -1;
        cout << res << '\n';
    }
}
