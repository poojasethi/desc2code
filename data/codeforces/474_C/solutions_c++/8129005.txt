#include<bits/stdc++.h>
using namespace std;
typedef long long LL;
int n;
int a[4],b[4],x[4],y[4];
int ans;
LL d[6];

LL dist(int i,int j)
{
    return (LL)(x[i]-x[j])*(x[i]-x[j])+(LL)(y[i]-y[j])*(y[i]-y[j]);
}

bool check()
{
    int tot=0;
    for (int i=0;i<4;i++)
    for (int j=i+1;j<4;j++) {
        d[tot++]=dist(i,j);
    }
    sort(d,d+tot);
    if (d[0]==0) return 0;
    for (int i=1;i<4;i++) {
        if (d[i]!=d[0]) return 0;
    }
    if (d[4]!=d[5]) return 0;
    if (d[0]*2!=d[4]) return 0;
    return 1;
}

void dfs(int u,int cnt)
{
    if (u==4) {
        if (check()) {
            ans=min(ans,cnt);
        }
        return;
    }
    for (int i=0;i<4;i++) {
        dfs(u+1,cnt+i);
        int xx=x[u]-a[u],yy=y[u]-b[u];
        x[u]=-yy+a[u]; y[u]=xx+b[u];
    }
}

int main()
{
    scanf("%d",&n);
    while (n--) {
        for (int i=0;i<4;i++) {
            scanf("%d%d%d%d",&x[i],&y[i],&a[i],&b[i]);
        }
        ans=1000;
        dfs(0,0);
        if (ans==1000) ans=-1;
        printf("%d\n",ans);
    }
    return 0;
}