#include <bits/stdc++.h>

#define pb push_back
#define mp make_pair
#define ll long long
#define ull unsigned long long

using namespace std;

int x[6],y[6],a[6],b[6];
int kq;
ll kc[10],dem;

void check() {
    if (kq!=-1 && dem>=kq) return;
    int i,j,d=0;
    for(i=1;i<4;++i) {
        for(j=i+1;j<=4;++j) kc[++d]=(ll)(x[i]-x[j])*(ll)(x[i]-x[j])+(ll)(y[i]-y[j])*(ll)(y[i]-y[j]);
    }
    sort(kc+1,kc+7);
    if (!kc[i]) return;
    for(i=2;i<=4;++i) if (kc[i]!=kc[1]) return;
    for(i=5;i<=6;++i) if (kc[i]!=2ll*kc[1]) return;
    kq=dem;
}

void xoay(int &x,int &y,int &a,int &b) {
    int x2=b-y+a,y2=x-a+b;
    x=x2;y=y2;
}

void thu(int i) {
    int j;
    for(j=0;j<4;++j) {
        dem+=j;
        if (i==4) check();
        else {
            if (kq==-1 || kq<dem) thu(i+1);
        }
        xoay(x[i],y[i],a[i],b[i]);dem-=j;
    }
}

int main()
{
    //freopen("vd.inp","r",stdin);
    //freopen("vd.out","w",stdout);
    int t,i;
    scanf("%d",&t);
    while (t--) {
        for(i=1;i<=4;++i) scanf("%d%d%d%d",&x[i],&y[i],&a[i],&b[i]);
        kq=-1;dem=0;
        thu(1);
        printf("%d\n",kq);
    }
}
