#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<string>
#include<algorithm>
#include<cmath>
using namespace std;

int t,i,ans,xx,a[5],b[5],x[5],y[5];
long long d[7];

inline long long sqr(long long x) {return x*x;}

int work(int k)
{
    if (k==5)
    {
        int i,j,t=0;
        for (i=1;i<4;i++)
            for (j=i+1;j<=4;j++)
            {
                d[++t]=sqr(x[i]-x[j])+sqr(y[i]-y[j]);
                if (d[t]==0) return 1000000;
            }
        for (i=1;i<6;i++)
            for (j=i+1;j<=6;j++)
                if (d[i]>d[j]) swap(d[i],d[j]);
        if (d[1]==d[2] && d[2]==d[3] && d[3]==d[4] && d[5]==d[6] && d[1]<<1==d[5]) return 0;
        return 1000000;
    }
    
    int i=0,kk=1000000;
    do
    {
        kk=min(kk,work(k+1)+i);
        xx=x[k];
        x[k]=a[k]-y[k]+b[k];
        y[k]=b[k]+xx-a[k];
        i++;
    }
    while (i<=3);
    return kk;
}

int main()
{
    scanf("%d",&t);
    while (t--)
    {
        for (i=1;i<=4;i++) scanf("%d%d%d%d",&x[i],&y[i],&a[i],&b[i]);
        ans=work(1);
        if (ans>12) printf("-1\n");
                else printf("%d\n",ans);
    }
    return 0;
}