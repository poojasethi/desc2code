
#include <iostream>
#include <math.h>
#include <map>
#define lli long long int
using namespace std;

struct A
{
	int a,b,x,y;
	int xx[4],yy[4];
	int sx,sy;
}a[4];

int ans;
int iii[4];

bool Check()
{
	map<double,int> m;

	for (int i=0 ; i<4 ; i++)
		for (int j=i+1 ; j<4 ; j++)
			if (a[i].sx==a[j].sx && a[i].sy==a[j].sy)
				return false;
			else 
				m[sqrt((double)(a[i].sx-a[j].sx)*(a[i].sx-a[j].sx) + (a[i].sy-a[j].sy)*(a[i].sy-a[j].sy))]++;
	
	return m.size()==2;
}

void Rotate(int k , int j)
{
	a[k].xx[0] = a[k].x;
	a[k].yy[0] = a[k].y;
	for (int i=0 ; i<j ; i++)
	{
		int nx = (a[k].xx[i]-a[k].a);
		int ny = (a[k].yy[i]-a[k].b);
		a[k].xx[i+1] = -ny+a[k].a;
		a[k].yy[i+1] = nx+a[k].b;
	}
}

void Do(int k)
{
	for (int i=0 ; i<4; i++)
	{
		iii[k]=i;
		a[k].sx = a[k].xx[i];
		a[k].sy = a[k].yy[i];
		if (k==3)
		{
			if (Check())
			{
				int si = iii[0]+iii[1]+iii[2]+iii[3];
				ans = (ans==-1 ? si : min(ans,si));
			}
		}
		else
		{
			Do(k+1);
		}
	}
}

int main()
{
	ios_base::sync_with_stdio(0);
	int n;
	cin>>n;
	for (int i=0 ; i<n ; i++)
	{
		for (int j = 0 ; j<4 ; j++)
		{
			cin>>a[j].x>>a[j].y>>a[j].a>>a[j].b;
			Rotate(j,3);
		}
		ans = -1;
		Do(0);
		cout<<ans<<"\n";
	}
	
	return 0;
}

