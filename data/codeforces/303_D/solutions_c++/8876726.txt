#include<cstdio>
#include<cstring>
using namespace std;

typedef long long ll;

const int N = 5000005;

#define fo(i , st , en) for (int i = st; i <= en; i++)
#define fd(i , st , en) for (int i = st; i >= en; i--)
#define Me(x , y) memset(x , y , sizeof(x))

int n , x;

bool check(int x , int y , int mod){
	int cur = 1;
	fd (i , 29 , 0){
		cur = (ll)cur * cur % mod;
		if (y & 1 << i) cur = (ll)cur * x % mod;
	}
	return cur == 1;
}

int main(){
	scanf("%d%d" , &n , &x);
	for (int i = 2; i * i <= n + 1; i++)
		if ((n + 1) % i == 0) return puts("-1") , 0;
	fd (i , x - 1 , 2){
		bool flag = 0;
		for (int j = 2; j * j <= n; j++)
			if (n % j == 0 && check(i , n / j , n + 1)){
				flag = 1; break;
			}
		if (!flag) return printf("%d\n" , i) , 0;
	}
	puts("-1");
	return 0;
}
