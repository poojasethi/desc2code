#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 610
#define M 110
#define db double
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,K,t,nn;
int a[N],id[N],du[N];
db c[N][N],b[M][M],d[M];
inline void gaosi() {
	For(i,1,n) {
		For(j,i,n) if (c[j][i]) {
			For(k,i,t) swap(c[i][k],c[j][k]);
			break;
		}
		for (j=t;j>=i;j--) c[i][j]/=c[i][i];
		For(j,i+1,n) if (c[j][i])
			for (k=t;k>=i;k--) c[j][k]-=c[j][i]*c[i][k];
	}
	for (i=n;i;i--) For(j,1,i-1)
		For(k,n+1,t) c[j][k]-=c[j][i]*c[i][k];
	For(i,1,nn) d[i]=c[1][n+i];
	For(i,1,n) if (a[i]) For(j,1,nn) b[id[i]-n][j]=c[i][j+n];
}
inline void mul() {
	int i,j;
	db a[M]={};
	For(i,1,nn)For(j,1,nn) a[j]+=d[i]*b[i][j];
	For(i,1,nn) d[i]=a[i];
}
inline void multi() {
	int i,j,k;
	db a[M][M]={};
	For(i,1,nn)For(j,1,nn)For(k,1,nn) a[i][k]+=b[i][j]*b[j][k];
	For(i,1,nn)For(j,1,nn) b[i][j]=a[i][j];
}
inline void work() {
	K-=2;
	for (;K;K/=2) {
		if (K&1) mul();
		multi();
	}
	printf("%.12lf\n",d[nn]);
}
int main() {
    scanf("%d%d%d",&n,&m,&K);
    t=n;
    For(i,1,n) {
		scanf("%d",&a[i]);
    	if (a[i]) id[i]=++t;
	}
	nn=t-n;
	For(i,1,m) {
		int x,y;
		scanf("%d%d",&x,&y);
		du[x]++,du[y]++;
		if (a[y]) c[x][id[y]]--;
		else c[x][y]++;
		
		if (a[x]) c[y][id[x]]--;
		else c[y][x]++;
	}
	For(i,1,n) c[i][i]-=du[i];
	
	gaosi();
	work();
	return 0;
}
