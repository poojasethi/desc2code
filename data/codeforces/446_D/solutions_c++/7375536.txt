#include <iostream>
#include <cstring>
#include <cstdio>
#include <string>
#include <sstream>
#include <vector>
#include <deque>
#include <queue>
#include <stack>
#include <set>
#include <map>
#include <algorithm>
#include <cmath>
#include <ctime>

using namespace std;

#define vd vector<double>
#define vvd vector<vd>

vvd mul(const vvd &a, const vvd &b) {
    int n = a.size();
    vvd ret(n, vd(n,0));
    for(int k=0;k<n;++k)
    for(int i=0;i<n;++i)
    for(int j=0;j<n;++j)
        ret[i][j] += a[i][k] * b[k][j];
    return ret;
}

int trap[505];
int n,m,k;
int g[505][505],deg[505];
double a[505][505 * 2];
vector<int> traps;

int main() {
#ifdef LOCAL
    freopen("input.txt","r",stdin);
#endif
    scanf("%d%d%d",&n,&m,&k);
    for(int i=0;i<n;++i) {
        scanf("%d",trap+i);
        if(trap[i]) traps.push_back(i);
    }
    while(m--) {
        int u,v; scanf("%d%d",&u,&v),u--,v--;
        deg[u]++,deg[v]++;
        g[u][v]++,g[v][u]++;
    } m = traps.size();

    for(int i=0;i<n;++i) {
        a[i][i] = a[i][i+n] = 1;
        if(!trap[i]) for(int j=0;j<n;++j) if(j != i) {
            a[i][j] = -double(g[i][j]) / deg[i];
        }
    }

    int cur = 0;
    for(int i=0;i<n;++i) {
        double mx = 0; int idx = -1;
        for(int j=cur;j<n;++j) if(abs(a[j][i]) > mx) {
            mx = abs(a[j][i]), idx = j;
        }
        if(idx == -1)
            continue;
        double h = a[idx][i];
        for(int j=i;j<2*n;++j) swap(a[idx][j], a[cur][j]), a[cur][j] /= h;
        for(int j=0;j<n;++j) if(j != cur) {
            double t = a[j][i];
            for(int k=i;k<2*n;++k) a[j][k] -= t * a[cur][k];
        }
        cur++;
    }

    vvd A(m, vd(m,0)), ret(m, vd(m,0));
    for(int i=0;i<m;++i) {
        int u = traps[i];
        for(int j=0;j<m;++j) {
            int v = traps[j];
            for(int w=0;w<n;++w)
                A[i][j] += a[w][v+n] * g[u][w] / deg[u];
        }
        ret[i][i] = a[0][u+n];
    }

    k -= 2;
    while(k) {
        if(k & 1) ret = mul(ret, A);
        A = mul(A, A), k >>= 1;
    }
    double ans = 0;
    for(int i=0;i<m;++i) ans += ret[i][m-1];
    printf("%.10lf\n",ans);
}