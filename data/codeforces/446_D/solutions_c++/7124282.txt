#include<cstdio>
#include<algorithm>
#include<cstring>
#include<vector>

using namespace std;

const int MAXN = 1005,MAXM = 105;

vector<int> T;
double a[MAXN][MAXN],p[MAXM][MAXM],A[MAXN][MAXN],Tmp[MAXM][MAXM],F[MAXM][MAXM];
double Bak[MAXM][MAXM];
int Rd[MAXN],bz[MAXN],c[MAXN],Zh[MAXN],N,M,K,cn;

int main()
{
	//freopen("games.in","r",stdin),freopen("games.out","w",stdout);
	scanf("%d %d %d", &N, &M, &K);
	cn = 0;
	for(int i = 1;i <= N;i ++) 
	{
		scanf("%d", &bz[i]);
		if (bz[i]) T.push_back(i),Zh[++ cn] = i;
	}
	for(int i = 1;i <= M;i ++)
	{
		int x,y;scanf("%d %d", &x, &y);
		Rd[x] ++,Rd[y] ++,A[x][y] ++,A[y][x] ++;
	}
	for(int i = 1;i <= N;i ++)
		for(int j = 1;j <= N;j ++) A[i][j] /= Rd[i];
	for(int i = 1;i <= N;i ++)
	{
		a[i][i] = a[i][i + N] = 1;
		for(int j = 1;j <= N;j ++)
		if ((i != j) && (!bz[j])) a[i][j] = -A[j][i];
	}
	for(int i = 1;i <= N;i ++)
	{
		double pz = a[i][i];
		for(int j = 1;j <= 2 * N;j ++) a[i][j] /= pz;
		for(int k = 1;k <= N;k ++)
		if (k != i)
		{
			pz = a[k][i];
			if (!a[k][i]) continue;
			for(int pt = 1;pt <= 2 * N;pt ++) a[k][pt] -= a[i][pt] * pz;
		}
	}
	for(int i = 1;i <= cn;i ++)
			for(int j = 1;j <= cn;j ++)
				for(int u = 1;u <= N;u ++)
					p[i][j] += a[T[j - 1]][u + N] * A[T[i - 1]][u];
	for(int i = 1;i <= cn;i ++) F[1][i] = a[T[i - 1]][1 + N];
	K -= 2;
	for(;K;K /= 2)
	{
		if (K & 1)
		{
			for(int i = 1;i <= cn;i ++)
				for(int j = 1;j <= cn;j ++)
				{
					Bak[i][j] = 0;
					for(int k = 1;k <= cn;k ++)
						Bak[i][j] += F[i][k] * p[k][j];
				}
			memcpy(F,Bak,sizeof F);
		}
		for(int i = 1;i <= cn;i ++)
				for(int j = 1;j <= cn;j ++)
				{
					Bak[i][j] = 0;
					for(int k = 1;k <= cn;k ++)
						Bak[i][j] += p[i][k] * p[k][j];
				}
			memcpy(p,Bak,sizeof p);
	}
	printf("%.7f\n",F[1][cn]);
}
