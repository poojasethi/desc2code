#include<bits/stdc++.h>
using namespace std;
const int N=1010,mod=1000000007;
int n,d[8][N][N]={};
double p[4][N][N]={},l[4]={0,0,log(2),log(3)};
char ch[N][N]={};
int main()
{
	scanf("%d",&n);
	for(int i=1;i<=n;++i)
		scanf("\n%s",ch[i]+1);
	for(int i=1;i<=n;++i)
		for(int j=1;j<=n;++j)
		{
			int v=max(ch[i][j]-'0',1);
			p[0][i][j]=p[0][i-1][j]+l[v];
			p[1][i][j]=p[1][i][j-1]+l[v];
			p[2][i][j]=p[2][i-1][j-1]+l[v];
			p[3][i][j]=p[3][i-1][j+1]+l[v];
		}
	for(int i=1;i<=n;++i)
		for(int j=1;j<=n;++j)
			if(ch[i][j]=='0')
				d[0][i][j]=d[4][i][j]=0;
			else
				d[0][i][j]=d[0][i-1][j]+1, d[4][i][j]=d[4][i-1][j-1]+1;
	for(int i=1;i<=n;++i)
		for(int j=n;j>=1;--j)
			if(ch[i][j]=='0')
				d[1][i][j]=d[5][i][j]=0;
			else
				d[1][i][j]=d[1][i][j+1]+1, d[5][i][j]=d[5][i-1][j+1]+1;
	for(int i=n;i>=1;--i)
		for(int j=n;j>=1;--j)
			if(ch[i][j]=='0')
				d[2][i][j]=d[6][i][j]=0;
			else
				d[2][i][j]=d[2][i+1][j]+1, d[6][i][j]=d[6][i+1][j+1]+1;
	for(int i=n;i>=1;--i)
		for(int j=1;j<=n;++j)
			if(ch[i][j]=='0')
				d[3][i][j]=d[7][i][j]=0;
			else
				d[3][i][j]=d[3][i][j-1]+1, d[7][i][j]=d[7][i+1][j-1]+1;
	int x=0,y=0,k=0,t=0;
	long long ans=1;
	double maxv=-1;
	for(int i=1;i<=n;++i)
		for(int j=1;j<=n;++j)
		{
			if(ch[i][j]=='0')
				continue;
			int v=ch[i][j]-'0';
			int d1=min(min(d[0][i][j],d[1][i][j]),min(d[2][i][j],d[3][i][j]))-1;
			int d2=min(min(d[4][i][j],d[5][i][j]),min(d[6][i][j],d[7][i][j]))-1;
			double sum1=p[0][i+d1][j]-p[0][i-d1-1][j]+
						p[1][i][j+d1]-p[1][i][j-d1-1]-l[v];
			double sum2=p[2][i+d2][j+d2]-p[2][i-d2-1][j-d2-1]+
						p[3][i+d2][j-d2]-p[3][i-d2-1][j+d2+1]-l[v];
			if(sum1>maxv)
				maxv=sum1,x=i,y=j,k=d1,t=0;
			if(sum2>maxv)
				maxv=sum2,x=i,y=j,k=d2,t=1;
		}
	if(t==0)
	{
		for(int i=1;i<=n;++i)
			for(int j=1;j<=n;++j)
				if((abs(i-x)<=k && j==y) || (abs(j-y)<=k && i==x))
					ans=ans*(ch[i][j]-'0')%mod;
	}
	else
	{
		for(int i=1;i<=n;++i)
			for(int j=1;j<=n;++j)
				if(abs(i-x)==abs(j-y) && abs(i-x)<=k)
					ans=ans*(ch[i][j]-'0')%mod;
	}
	//cerr<<"x="<<x<<" y="<<y<<" k="<<k<<" t="<<t<<endl;
	if(x && y)
		cout<<ans<<endl;
	else
		puts("0");
}