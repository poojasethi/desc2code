#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<cstring>
#include<vector>
#include<cmath>
#define ll long long
#define ld long double
using namespace std;
const int maxn= 1050,oo= 1e9,mo= 1e9+7;
char S[maxn];
double s1[maxn][maxn];
double s2[maxn][maxn];
double s3[maxn][maxn];
double s4[maxn][maxn];
double s5[maxn][maxn];
double s6[maxn][maxn];
double s7[maxn][maxn];
double s8[maxn][maxn];
int p1[maxn][maxn];
int p2[maxn][maxn];
int p3[maxn][maxn];
int p4[maxn][maxn];
int p5[maxn][maxn];
int p6[maxn][maxn];
int p7[maxn][maxn];
int p8[maxn][maxn];
double V[maxn][maxn][2];
int a[maxn][maxn];
ll ans;
double now;
int n,i,j,x,y,d;
void get1357(){
	double x;
	int i,j;
	for (i= 1;i<=n;i++)
		for (j= 1;j<=n;j++){
			if (a[i][j]==0){
				x= 0;
			}
			else {
				x= log(a[i][j]);
				p1[i][j]= p1[i-1][j]+1;
				p3[i][j]= p3[i][j-1]+1;
				p5[i][j]= p5[i-1][j-1]+1;
				p7[i][j]= p7[i-1][j+1]+1;				
			}
			s1[i][j]= s1[i-1][j]+x;
			s3[i][j]= s3[i][j-1]+x;
			s5[i][j]= s5[i-1][j-1]+x;
			s7[i][j]= s7[i-1][j+1]+x;
		}
}
void get2468(){
	double x;
	int i,j;
	for (i= n;i>0;i--)
		for (j= n;j>0;j--){
			if (a[i][j]==0){
				x= 0;
			}else {
				x= log(a[i][j]);
				p2[i][j]= p2[i+1][j]+1;
				p4[i][j]= p4[i][j+1]+1;
				p6[i][j]= p6[i+1][j+1]+1;
				p8[i][j]= p8[i+1][j-1]+1;				
			}
			s2[i][j]= s2[i+1][j]+x;
			s4[i][j]= s4[i][j+1]+x;
			s6[i][j]= s6[i+1][j+1]+x;
			s8[i][j]= s8[i+1][j-1]+x;
		}
}
bool IN(int x,int y){
	if (x<1||y<1||x>n||y>n) return 0;
	return 1;
}
int min(int a,int b,int c,int d){
	return min(min(a,b),min(c,d));
}
ll getAns(int x,int y,int d){
	ll re= a[x][y];
	int i,L;
	if (!d){
		L= min(p1[x][y],p2[x][y],p3[x][y],p4[x][y]);
		for (i= 1;i<L;i++){
			re= re*a[x-i][y]%mo;
			re= re*a[x+i][y]%mo;
			re= re*a[x][y-i]%mo;
			re= re*a[x][y+i]%mo;
		}
	}else {
		L= min(p5[x][y],p6[x][y],p7[x][y],p8[x][y]);
		for (i= 1;i<L;i++){
			re= re*a[x-i][y-i]%mo;
			re= re*a[x-i][y+i]%mo;
			re= re*a[x+i][y-i]%mo;
			re= re*a[x+i][y+i]%mo;
		}
	}return re;
}
int main()
{
#ifndef ONLINE_JUDGE	
	freopen("1.in","r",stdin);
	freopen("1.out","w",stdout);
#endif
	scanf("%d",&n);
	for (i= 1;i<=n;i++){
		scanf("%s",S+1);
		for (j= 1;j<=n;j++)
			a[i][j]= S[j]-'0';
	}
	get1357();
	get2468();
	for (i= 1;i<=n;i++)
		for (j= 1;j<=n;j++){
			if (a[i][j]==0) continue;
			x= min(p1[i][j],p2[i][j],p3[i][j],p4[i][j]);
			V[i][j][0]= s1[i][j]+s2[i][j]+s3[i][j]+s4[i][j]-3*log(a[i][j]);
			V[i][j][0]-= s1[i-x][j]+s2[i+x][j]+s3[i][j-x]+s4[i][j+x];
			x= min(p5[i][j],p6[i][j],p7[i][j],p8[i][j]);			
			V[i][j][1]= s5[i][j]+s6[i][j]+s7[i][j]+s8[i][j]-3*log(a[i][j]);
			V[i][j][1]-= s5[i-x][j-x]+s6[i+x][j+x]+s7[i-x][j+x]+s8[i+x][j-x];
		}
	now= -oo;
	x= 0;y= 0;d= 0;
	for (i= 1;i<=n;i++)
		for (j= 1;j<=n;j++){
			if (a[i][j]==0) continue;
			for (int k= 0;k<2;k++)
				if (now<V[i][j][k]){
					now= V[i][j][k];
					x= i;
					y= j;
					d= k;
				}
		}
	if (now==-oo)
		printf("0");
	else {
		ans= getAns(x,y,d);
		printf("%I64d",ans);
	}return 0;
}
