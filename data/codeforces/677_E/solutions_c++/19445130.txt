#include<stdio.h>
#include<iostream>
#include<stdlib.h>
#include<string.h>
#include<math.h>
using namespace std;
#define ll long long
const int N=1008;
const int M=1000000007ll;
char a[N][N];
double lg[N][N],sum[8][N][N];
int n,b[8][N][N];
int e[][2]={{1,1},{1,-1},{-1,1},{-1,-1},{1,0},{-1,0},{0,1},{0,-1}};
int pan(int x){return (x>=1)&&(x<=n);}
int minx(int x,int y){if(x<y)y=x;return y;}
int main(void)
{
	int i,j,k,x,y,p,tmp,kk,ktmp;double s,ans;
	scanf("%d",&n);
	for(i=1;i<=n;i++)scanf("%s",&a[i][1]);
	for(i=1;i<=n;i++)for(j=1;j<=n;j++)if(a[i][j]=='2')lg[i][j]=log(2.0);else if(a[i][j]=='3')lg[i][j]=log(3.0);
	for(k=0;k<=7;k++)
	for(i=1;i<=n;i++)for(j=1;j<=n;j++)if(!(pan(i-e[k][0])&&pan(j-e[k][1])))
	{
		s=p=0;
		for(x=i,y=j;pan(x)&&pan(y);x+=e[k][0],y+=e[k][1])
		{
			if(a[x][y]=='0'){s=0;p=0;}
			else{s+=lg[x][y];p++;}
			sum[k][x][y]=s;b[k][x][y]=p;
		}
	}
	ans=0;x=y=ktmp=1;kk=0;
	for(i=1;i<=n;i++)
	for(j=1;j<=n;j++)if(a[i][j]!='0')
	for(k=0;k<=4;k+=4)
	{
		tmp=minx(minx(b[k][i][j],b[k+1][i][j]),minx(b[k+2][i][j],b[k+3][i][j]));
		s=lg[i][j];
		for(p=0;p<=3;p++)s+=sum[k+p][i+e[k+p][0]*(tmp-1)][j+e[k+p][1]*(tmp-1)]-sum[k+p][i][j];
		if(s>ans){ans=s;x=i;y=j;kk=k;ktmp=tmp;}
	}
	ll ss=a[x][y]-'0';
	for(k=kk;k<=kk+3;k++)
	for(i=1;i<ktmp;i++)ss=ss*(a[x+e[k][0]*i][y+e[k][1]*i]-'0')%M;
	cout<<ss;
	return 0;
}
