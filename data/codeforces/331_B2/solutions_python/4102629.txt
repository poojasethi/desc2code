#include<iostream>
#include<vector>
#include<algorithm>
using namespace std;
int tr[300001],a[300001],b[300001],n,q;
int read(int idx)
{
	int sum=0;
	while(idx>0)
	{
		sum=sum+tr[idx];
		idx=idx-(idx&-idx);
	}
	return sum;
}
int update(int idx,int val)
{
	val=val-read(idx)+read(idx-1);
	while(idx<=300000)
	{
		tr[idx]=tr[idx]+val;
		idx=idx+(idx&-idx);
	}
}
int main()
{
	int i,u,x,y;
	cin>>n;
	for(i=1;i<=n;i++)
	{
		cin>>a[i];
		b[a[i]]=i;
	}
	for(i=1;i<=n;i++)
	{
		update(a[i],b[a[i]]<b[a[i]-1]);
	}
	cin>>q;
	while(q--)
	{
		cin>>u>>x>>y;
		if(u==1)
		{
			cout<<read(y)-read(x)+1<<endl;
		}
		if(u==2)
		{
			swap(a[x],a[y]);
			b[a[y]]=y;
			b[a[x]]=x;
			update(a[x],b[a[x]]<b[a[x]-1]);
			if(a[x]!=n) update(a[x]+1,b[a[x]+1]<b[a[x]]);
			update(a[y],b[a[y]]<b[a[y]-1]);
			if(a[y]!=n) update(a[y]+1,b[a[y]+1]<b[a[y]]);
		}			
	}
}
