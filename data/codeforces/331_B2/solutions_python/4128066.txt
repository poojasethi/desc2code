#include <algorithm>
#include <iostream>
#include <utility>
#include <cstdlib>
#include <cstdio>
#include <vector>
#include <queue>
#include <cmath>
#include <map>
#include <set>
using namespace std;
#define pb push_back
#define mp make_pair
#define fs first
#define sc second
#define abs(a) ((a)<0?-(a):(a))
#define sqr(a) ((a)*(a))
int x[1048576]={0},z[300300]={0},y[300300]={0};
int sum(int l,int r)
{int o=1;
 while(l<r)
 {if(l%2==1){o+=x[l];l++;}
  if(r%2==0){o+=x[r];r--;}
  l/=2;r/=2;
 }
 if(l==r){o+=x[l];}
 return(o);
}
void upd(int p){p/=2;while(p>0){x[p]=x[p*2]+x[p*2+1];p/=2;}}
int main()
{
// freopen("*.in","r",stdin);
// freopen("*.out","w",stdout);
 int n,m,i,f,k=524287;
 scanf("%d",&n);
 for(i=1;i<=n;i++)
 {scanf("%d",&y[i]);
  z[y[i]]=i;
 }
 for(i=2;i<=n;i++){if(z[i]<z[i-1]){x[k+i-1]=1;}else{x[k+i-1]=0;}}
 for(i=k;i>0;i--){x[i]=x[i*2]+x[i*2+1];}
 scanf("%d",&m);
 for(;m>0;m--)
 {int c;scanf("%d",&c);
  if(c==1)
  {int l,r;scanf("%d%d",&l,&r);
   printf("%d\n",sum(k+l,k+r-1));
  }else
  {int l,r,ll,rr;scanf("%d%d",&ll,&rr);
   l=y[ll];r=y[rr];swap(y[ll],y[rr]);swap(z[l],z[r]);
   if(l-1>0&&z[l]>z[l-1]){x[k+l-1]=0;}else{x[k+l-1]=1;}upd(k+l-1);
   if(l+1<=n&&z[l]<z[l+1]){x[k+l]=0;}else{x[k+l]=1;}upd(k+l);
   if(r-1>0&&z[r]>z[r-1]){x[k+r-1]=0;}else{x[k+r-1]=1;}upd(k+r-1);
   if(r+1<=n&&z[r]<z[r+1]){x[k+r]=0;}else{x[k+r]=1;}upd(k+r);
  }
 }
}