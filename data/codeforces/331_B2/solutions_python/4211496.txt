#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
#define rep(i,a,n) for (int i=a;i<n;i++)
const int N=301000;
int c[N],a[N],pos[N],v[N],od,x,y,n,m;
void modify(int x,int s) {for (;x<n;x+=x&(-x)) c[x]+=s;}
int query(int x) { int s=0;for (;x;x-=x&(-x)) s+=c[x];return s;} 
void mod(int x,int s) {
	if (x==0) return;
	modify(x,s-v[x]);
	v[x]=s;
}
int main() {
	scanf("%d",&n);
	rep(i,1,n+1) {
		scanf("%d",a+i);
		pos[a[i]]=i;
	}
	rep(i,1,n) v[i]=pos[i]>pos[i+1],modify(i,v[i]);
	scanf("%d",&m);
	rep(i,0,m) {
		scanf("%d%d%d",&od,&x,&y);
		if (od==1) printf("%d\n",query(y-1)-query(x-1)+1);
		else {
			swap(a[x],a[y]);
			pos[a[x]]=x;pos[a[y]]=y;
			mod(a[x]-1,pos[a[x]-1]>pos[a[x]]);
			mod(a[x],pos[a[x]]>pos[a[x]+1]);
			mod(a[y]-1,pos[a[y]-1]>pos[a[y]]);
			mod(a[y],pos[a[y]]>pos[a[y]+1]);
		}
	}
}