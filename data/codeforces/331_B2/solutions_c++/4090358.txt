#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <algorithm>
#include <string>
#include <vector>
#include <map>
#include <set>
#include <math.h>
#include <queue>

using namespace std;

#define MP make_pair
#define PB push_back

int c[400000];
int pos[400000];
int nd[400000];
int u[400000];
int n;

inline int ask(int x){
    int s=0;
    while(x){
        s+=nd[x];
        x-=x&(-x);
    }
    return s;
}

inline void add(int x,int v){
    while(x<=n+5){
        nd[x]+=v;
        x+=x&(-x);
    }
}

inline void update(int x){
    if(pos[x]<pos[x-1]){
        if(!u[x]){
            u[x]=1;
            add(x,1);
        }
    }else{
        if(u[x]){
            u[x]=0;
            add(x,-1);
        }
    }
}

int main(){
    int i,j,m,x,y,t,tx,ty;
    scanf("%d",&n);
    for( i=1; i<=n; i++ ){
        scanf("%d",&c[i]);
        pos[c[i]]=i;
    }
    c[n+1]=n+1;
    pos[n+1]=n+1;
    for( i=1; i<=n; i++ ){
        update(i);
    }
    scanf("%d",&m);
    for( i=0; i<m; i++ ){
        scanf("%d %d %d",&t,&x,&y);
        if(t==1){
            printf("%d\n",ask(y)-ask(x)+1);
        }else{
            tx=c[x];
            ty=c[y];
            swap(c[x],c[y]);
            swap(pos[tx],pos[ty]);
            update(tx);
            update(ty);
            update(tx+1);
            update(ty+1);
        }
    }
    return 0;
}
