#include<iostream>

using namespace std;

int arr[300010],pos[300010],f[300010] = {0},bit[300010] = {0},n;

void upd(int x,int v) {
    while(x < 300010) {
        bit[x] += v;
        x += (x & -x);
    }
}

int add(int x) {
    int ret = 0;
    while(x > 0) {
        ret += bit[x];
        x -= (x & -x);
    }
    return ret;
}

void cal(int x) {
    if(x == 1 || x > n)
        return;

    if(pos[x] < pos[x-1] && f[x] == 0) {
        upd(x,1);
        f[x] = 1;
    } else if(pos[x-1] < pos[x] && f[x] == 1) {
        upd(x,-1);
        f[x] = 0;
    }
}

int main()
{
    int q,a,x,y;
    cin >> n;
    for(int i=0;i<n;i++) {
        cin >> arr[i];
        pos[arr[i]] = i;
    }

    for(int i=2;i<=n;i++) {
        if(pos[i] < pos[i-1]) {
            upd(i,1);
            f[i] = 1;
        }
    }
    cin >> q;
    while(q--) {
        cin >> a >> x >> y;
        if(a == 1) {
            cout << add(y) - add(x) + 1 << endl;
        } else {
            x--,y--;
            swap(arr[x],arr[y]);
            swap(pos[arr[x]],pos[arr[y]]);
            cal(arr[x]);
            cal(arr[x] + 1);
            cal(arr[y]);
            cal(arr[y] + 1);
        }
    }
}
