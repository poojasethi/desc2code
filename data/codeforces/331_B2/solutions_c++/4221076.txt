#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 300010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,a[N],b[N],c[N],tr[N*4],x,y,an,type;
void build(int q,int x,int y) {
    if (x==y) {
        tr[q]=c[x]; return;
    }
    int mid=(x+y)/2;
    build(q*2,x,mid);
    build(q*2+1,mid+1,y);
    tr[q]=tr[q*2]+tr[q*2+1];
}
void calc(int q,int x,int y,int l,int r) {
    if (x>=l&&y<=r) {
        an+=tr[q]; return;
    }
    int mid=(x+y)/2;
    if (l<=mid) calc(q*2,x,mid,l,r);
    if (mid<r) calc(q*2+1,mid+1,y,l,r);
}
void change(int q,int x,int y,int k) {
    if (x==y) {
        tr[q]=c[x]; return;
    }
    int mid=(x+y)/2;
    if (k<=mid) change(q*2,x,mid,k);
    else change(q*2+1,mid+1,y,k);
    tr[q]=tr[q*2]+tr[q*2+1];
}
inline void Do(int x) {
    c[x]=b[x-1]>b[x]; change(1,1,n,x);
}
int main() {
    scanf("%d",&n);
    For(i,1,n) {
        scanf("%d",&k); k++,a[i]=k; b[k]=i;
    } n+=2; b[1]=N;
    For(i,2,n-1) c[i]=b[i-1]>b[i];
    build(1,1,n);
    scanf("%d",&m);
    For(i,1,m) {
        scanf("%d%d%d",&type,&x,&y);
        if (type==1) an=1,calc(1,1,n,x+2,y+1),printf("%d\n",an);
        else {
            int A=a[x],B=a[y];
            swap(a[x],a[y]);
            swap(b[A],b[B]);
            Do(A),Do(A+1),Do(B),Do(B+1);
        }
    } return 0;
}