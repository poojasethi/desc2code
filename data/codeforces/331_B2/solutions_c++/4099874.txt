#include <iostream>
#include <cstdio>
#define MAXN 300005

using namespace std;

int n, m, a[MAXN], p[MAXN], c[MAXN];

int update(int i, int t)
{
  if (!t) return 0;
  while (i <= n)
  {
    c[i] += t;
    i += i & (-i);
  }
}

int count(int i)
{
  int t = 0;
  while (i)
  {
    t += c[i];
    i -= i & (-i);
  }
  return t;
}

main()
{
  scanf("%d", &n);
  for (int i = 1; i <= n; i++)
  {
    scanf("%d", a + i);
    p[a[i]] = i;
  }
  
  p[n + 1] = n + 1;
  for (int i = 1; i < n; i++) update(i, p[i] > p[i + 1]);
  
  scanf("%d", &m);
  while (m--)
  {
    int t, x, y;
    scanf("%d%d%d", &t, &x, &y);
    if (t == 1)
      printf("%d\n", count(y - 1) - count(x - 1) + 1);
    else
    {
      update(a[x] - 1, -(p[a[x] - 1] > p[a[x]]));
      update(a[x], -(p[a[x]] > p[a[x] + 1]));
      if (a[x] != a[y] - 1) update(a[y] - 1, -(p[a[y] - 1] > p[a[y]]));
      if (a[x] != a[y] + 1) update(a[y], -(p[a[y]] > p[a[y] + 1]));
      
      swap(a[x], a[y]);
      swap(p[a[x]], p[a[y]]);
      
      update(a[x] - 1, p[a[x] - 1] > p[a[x]]);
      update(a[x], p[a[x]] > p[a[x] + 1]);
      if (a[x] != a[y] - 1) update(a[y] - 1, p[a[y] - 1] > p[a[y]]);
      if (a[x] != a[y] + 1) update(a[y], p[a[y]] > p[a[y] + 1]);
    }
  }
  //system("pause");
}
