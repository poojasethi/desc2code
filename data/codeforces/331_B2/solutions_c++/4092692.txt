#include <vector>
#include <string>
#include <iostream>
#include <algorithm>
#include <cmath>
#include <cstdio>
#include <cstdlib>
#include <fstream>
#include <map>
#include <set>
using namespace std;

const int MAXN=1000000;

int a[MAXN];
int n,i,j,p,q,x,y;
int t[MAXN],tt[MAXN],pos[MAXN];


void assignT(int r, int x){
    if (tt[r]==x) return;
    int val=x-tt[r];
    tt[r]=x;
    for (;r<=n;r=(r|(r+1)))
        t[r]+=val;
}

int getT(int r){
    int res=0;
    for (;r>=0;r=(r&(r+1))-1)
        res+=t[r];
    return res;
}

void foo(int x){
    if (x==0 && x>n) return;
    if (pos[x-1]<pos[x]){
        assignT(x,0);
    }
    else assignT(x,1);
}

int main(){
    cin >> n;
    pos[0]=n+n;
    for (i=1;i<=n;i++){
        cin >> a[i];
        pos[a[i]]=i;
    }

    for (i=1;i<=n;i++){
        foo(a[i]);
    }

    cin >> q;
    while (q--){
        cin >> p >> x >> y;
        if (p==2){
            swap(a[x],a[y]);
            pos[a[x]]=x;
            pos[a[y]]=y;
            foo(a[x]);
            foo(a[x]+1);
            foo(a[y]);
            foo(a[y]+1);
        }
        else {
            int res=getT(y)-getT(x-1);
            if (tt[x]==0) res++;
            cout << res << endl;
        }
    }

    return 0;
}
