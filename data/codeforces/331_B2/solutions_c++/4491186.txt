#include <iostream>
#include<stdio.h>
#include<algorithm>
#include<string.h>
#include<vector>
using namespace std;
#define pb push_back
#define mp make_pair
#define x first
#define y second
#define ll long long
#define mod 1000000007
#define N 300010
int a[N],c[N],t[N],v[N],n;
void add(int x,int d)
{
    while(x<=n)
    {
        t[x]+=d;x+=x&-x;
    }
}
int get(int x)
{
    int res=0;
    while(x>0)
    {
        res+=t[x];x-=x&-x;
    }
    return res;
}
void check(int x)
{
    if(x<=1||x>n)return;
    if(c[x]<c[x-1]&&!v[x])add(x,1),v[x]=1;
    else if(c[x]>c[x-1]&&v[x])add(x,-1),v[x]=0;
}
int main()
{
    //freopen("in.txt","r",stdin);
    int i,j,k,m;
    while(~scanf("%d",&n))
    {
        memset(t,0,sizeof(t));
        memset(v,0,sizeof(v));
        for(i=0;i<n;i++)
        {
            scanf("%d",&j);c[j]=i;a[i]=j;
        }
        for(i=2;i<=n;i++)
        if(c[i]<c[i-1])add(i,1),v[i]=1;
        scanf("%d",&m);
        while(m--)
        {
            scanf("%d%d%d",&k,&i,&j);
            if(k==1)
            {
               printf("%d\n",get(j)-get(i)+1);
            }
            else
            {
                i--,j--;
                int x=a[i],y=a[j];
                c[x]=j;c[y]=i;a[i]=y,a[j]=x;
                check(x),check(x+1);
                check(y),check(y+1);
            }
        }
    }
    return 0;
}
