//B
#include<cstdio>
#include<iostream>
#include<algorithm>
#include<map>
#include<vector>
#define rep(i,l,r) for(int i=l;i<=r;i++)
#define re(i,n) for(int i=0;i<n;i++)
#define db(x) cout<<#x<<"="<<(x)<<" "
#define el cout<<endl
#define PII pair<int,int>
#define c0 first
#define c1 second
using namespace std;
typedef long long ll;
const int MXN=300005;

int N,Q;
int a[MXN],P[MXN];
int scan[MXN][3];

void init(){
	scanf("%d",&N);
	rep(i,1,N) scanf("%d",a+i),P[a[i]]=i;
	scanf("%d",&Q);
	rep(i,1,Q)
	re(j,3) scanf("%d",&scan[i][j]);
}

int c[MXN];
void ins(int x,int val){
	for(;x<=N;x+=x&-x)c[x]+=val;
}
int sel(int x){
	int S=0;for(;x;x-=x&-x)S+=c[x];return S;
}

int check[MXN],chuo;
void cge(int x,int val){
	if (x>1&&P[x-1]>P[x]&&check[x]!=chuo) ins(x,val),check[x]=chuo;
	if (x<N&&P[x]>P[x+1]&&check[x+1]!=chuo) ins(x+1,val),check[x+1]=chuo;
}

void solve(){
	rep(i,2,N){
		if (P[i-1]>P[i]) ins(i,1);
	}
	
	rep(i,1,Q){
		static int x,y;
		x=scan[i][1],y=scan[i][2];
		if (scan[i][0]==1){
			static int ans;
			ans=1+sel(y)-sel(x);
			printf("%d\n",ans);
		}else{
			chuo++;
			cge(a[x],-1);
			cge(a[y],-1);
			swap(P[a[x]],P[a[y]]);
			swap(a[x],a[y]);
			chuo++;
			cge(a[x],+1);
			cge(a[y],+1);
		}
	}
}

int main(){
	init();
	solve();
	return 0;
}
