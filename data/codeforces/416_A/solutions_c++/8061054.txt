#include<cstdio>
#include<algorithm>
using namespace std;
char s[3];
int main()
{
    int n,a=-1000000001,b=1000000001,x;char c;
    scanf("%d",&n);
    while(n--)
    {
        scanf("%s%d %c",s,&x,&c);
        if(c=='N')s[0]=122-s[0],s[1]=61-s[1];
        if(s[0]=='>')
        {
            if(!s[1])++x;
            a=max(a,x);
            continue;
        }
        if(!s[1])--x;
        b=min(b,x);
    }
    if(a>b)
    {puts("Impossible");return 0;}
    printf("%d\n",a);
}