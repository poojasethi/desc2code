#include <stdio.h>
#include <memory.h>
#include <math.h>
using namespace std;
#define M 1000010
#define Min(a,b) (a<b?a:b)

int res[M][21];
char s[M];

int main() {
//	freopen("in.txt","r",stdin);
	int n,m,i,j,k,l,r;
	scanf("%s",s);
	n=strlen(s);
	res[0][0]=0;
	for(i=0;i<n;i++) {
		if(s[i]=='(') k=1; else k=-1;
		res[i+1][0]=res[i][0]+k;
	}
	for(k=1;k<20;k++) {
		for(i=0;i<=n;i++) {
			if(i+(1<<k)-1>n) break;
			res[i][k]=Min(res[i][k-1],res[i+(1<<(k-1))][k-1]);
		}
	}
	scanf("%d",&m);
	while(m--) {
		scanf("%d %d",&l,&r);
		l--;
		k=log2(r-l+1);
		k=Min(res[l][k],res[r-(1<<k)+1][k]);
		printf("%d\n",(r-l)-(res[l][0]+res[r][0]-k*2));
	}
	return 0;
}
