#include <cstring>
#include <cstdio>
#include <iostream>
#include <vector>
#include <algorithm>
#include <cmath>
using namespace std;
const int MAXN = 1111111, MAXSTATUS = 22;
int f[MAXSTATUS][MAXN];
char a[MAXN];
int main()
{
    scanf("%s", a);
    int n = strlen(a);
    f[0][0] = 0;
    for (int i = 0; i < n; i++)
    {
        f[0][i + 1] = f[0][i];
        if (a[i] == '(')
            f[0][i + 1]++;
        else
            f[0][i + 1]--;
    }
    for (int i = 1; (1 << i) - 1 <= n; i++)
        for (int j = 0; j + (1 << i) - 1 <= n; j++)
            f[i][j] = min(f[i - 1][j], f[i - 1][j + (1 << (i - 1))]);

    int fuck;
    scanf("%d", &fuck);
    while (fuck--)
    {
        int l, r;
        scanf("%d%d", &l, &r);
        l--;
        int k = log2(r - l + 1), ans = min(f[k][l], f[k][r - (1 << k) + 1]);
        printf("%d\n", r - l - f[0][l] - f[0][r] + (ans << 1));
    }
    return 0;
}

				 	  	     	 	     	  	