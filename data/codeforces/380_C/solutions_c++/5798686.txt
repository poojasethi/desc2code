#include <cstdio>
#include <algorithm>
using namespace std;
char b[1001001];
int d[1001001];
int k[1 << 21];
int s;
int query(int l, int r, int q = 1, int L = 0, int R = 1 << 20) {
	if (r <= L || R <= l) return 1 << 29;
	if (l <= L && R <= r) return k[q];
	return min(query(l, r, q*2, L, (L+R)/2), query(l, r, q*2+1, (L+R)/2, R));
}
int main() {
	int n, x;
	scanf("%s", b);
	for (s = 0; b[s]; s++) ;
	for (int i = 0; i < s; i++) {
		if (b[i] == '(') {
			d[i+1] = d[i] + 1;
		} else {
			d[i+1] = d[i] - 1;
		}
		k[i+1+(1<<20)] = d[i+1];
	}
	for (int i = (1 << 20) - 1; i > 0; i--) {
		k[i] = min(k[i*2], k[i*2+1]);
	}
	scanf("%d", &n);
	for (int i = 0; i < n; i++) {
		int l, r;
		scanf("%d%d", &l, &r);
		--l;
		x = query(l, r+1);
		printf("%d\n", r - l - d[r] + x - d[l] + x);
	}
	return 0;
}
