#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
#include<vector>
using namespace std;

int a[110][2][2];
vector<int> ans;
int n,m;

int update(int u,int v,int l)
{
    if(!a[u][l][0]||v<a[u][l][0])
        a[u][l][0]=v;
    if(!a[u][l][1]||v>a[u][l][1])
        a[u][l][1]=v;
}

bool check(int u,int ed,int &red)
{
    if(!a[u][0][0])
    {
        ans.push_back(u);
        if(u==ed&&!a[u][1][0])
        {
            red=ed;
            return true;
        }
        return check(u+1,max(ed,a[u][1][1]),red);
    }
    int tmp;
    if(!check(u+1,a[u][0][1],tmp))
        return false;
    ans.push_back(u);
    if(tmp>=ed&&!a[u][1][0])
    {
        red=tmp;
        return true;
    }
    if(a[u][1][0]&&tmp>=a[u][1][0])
        return false;
    return check(tmp+1,max(tmp+1,max(ed,a[u][1][1])),red);
}

int main()
{
    int i,j,k;
    bool flag=false;
    char s[10];
    cin>>n>>m;
    while(m--)
    {
        int u,v;
        scanf("%d%d%s",&u,&v,s);
        if(u>=v)
            flag=true;
        if(s[0]=='L')
            update(u,v,0);
        else
            update(u,v,1);
    }
    if(flag)
        printf("IMPOSSIBLE\n");
    else if(!check(1,n,i)||i>n)
        printf("IMPOSSIBLE\n");
    else{
        printf("%d",ans[0]);
        for(i=1;i<ans.size();i++)
            printf(" %d",ans[i]);
        cout<<endl;
    }
    return 0;
}

	 		  				 		    	    	 	  		 	