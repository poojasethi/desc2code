#include <iostream>
#include <fstream>

#define imp "IMPOSSIBLE"
#define LE 666

using namespace std;

//ifstream f("wow.in");
#define f cin
bool okz=false;

int result[LE],n,nrm,N1[LE],N2[LE];
int nr_nodes;
string Typ[LE];

void solve(int st,int dr)
{
    int i,maxv=st,minv=dr;

    if (st==dr)
        result[++nr_nodes]=st;

    if (st>=dr) return;

    for(i=1; i<=nrm; ++i)
    {
        if (N1[i]==st)
        {
            if (Typ[i][0]=='R') minv=min(minv,N2[i]-1);
            else maxv=max(maxv,N2[i]);
        }
    }

    if (maxv>minv)
    {
        okz=true;
        return;
    }

    if (maxv==st)
    {
        result[++nr_nodes]=st;
        solve(st+1,dr);
        return;
    }

    for(i=maxv; i<=minv; ++i)
    {

        bool BAD=false;

        for(int j=1; j<=nrm; ++j)
        {
            if (N1[j]>st&&N1[j]<=i&&N2[j]>i&&N2[j]<=dr)
                BAD=true;
        }

        if (BAD==false)
        {
            solve(st+1,i);
            result[++nr_nodes]=st;
            solve(i+1,dr);
            return;
        }
    }



    okz=true;
}

int main()
{
    int i;

    f>>n>>nrm;
    for(i=1; i<=nrm; ++i)
    {
        f>>N1[i]>>N2[i]>>Typ[i];
        if (N1[i]>=N2[i])
        {
            cout<<imp;
            return 0;
        }
    }

    solve(1,n);

    if (okz)
    {
        cout<<imp;
        return 0;
    }

    for(i=1; i<=n; ++i)
        cout<<result[i]<<" ";


    return 0;
}
