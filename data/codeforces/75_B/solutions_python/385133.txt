#!/usr/bin/python
import re, sys

def check (f, s, c):
	global d, name
	t = f.match (s)
	if t:
		s1, s2 = t.groups ()
		d.setdefault (s1, 0)
		d.setdefault (s2, 0)
		if s1 == name:
			d[s2] += c
		elif s2 == name:
			d[s1] += c

d = {}
name = sys.stdin.readline ().strip ()
n = int (sys.stdin.readline ())
f1 = re.compile ('(\w+) posted on (\w+)\'s wall')
f2 = re.compile ('(\w+) commented on (\w+)\'s post')
f3 = re.compile ('(\w+) likes (\w+)\'s post')
for i in range (n):
	s = sys.stdin.readline ().strip ()
	check (f1, s, -15)
	check (f2, s, -10)
	check (f3, s,  -5)
d.setdefault (name, 0)
del d[name]
a = [(y, x) for x, y in d.iteritems ()]
a.sort ()
for y, x in a:
	print x
