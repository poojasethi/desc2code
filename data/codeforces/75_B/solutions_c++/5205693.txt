#include<string>
#include<cstdio>
#include<iostream>
#include<algorithm>
#include<utility>
#include<cmath>
#include<cstring>
using namespace std;
pair<int,string> ans[105];
int p;
int main()
{
	string my,x;
	int n,m;
	cin>>my>>n;
	p=1;
	ans[0].first=0;
	ans[0].second=my;
	while(n--)
	{
		int f=0;
		string a,b,t;
		cin>>a>>b;
		if(b=="likes") m=5;
		if(b!="likes") 
		{
			if(b=="posted") m=15;
			else m=10;
			cin>>b;
		}
		cin>>t>>x;
		b="";
		for(int j=0;j<t.length()-2;j++) b+=t[j];
		for(int i=0;i<p;i++)
		{
			if(ans[i].second==a)
			{
				if(a==my || b==my) ans[i].first+=m;
				f=1;
			}
			if(f==1) break;
		}
		if(f==0) 
		{
			ans[p++].second=a;
			if(a==my || b==my) ans[p-1].first=m;
		}
		f=0;
		for(int i=0;i<p;i++)
		{
			if(ans[i].second==b)
			{
				if(a==my || b==my) ans[i].first+=m;
				f=1;
			}
			if(f==1) break;
		}
		if(f==0) 
		{
			ans[p++].second=b;
			if(a==my || b==my) ans[p-1].first=m;
		}
	}
	for(int i=0;i<p;i++) ans[i].first*=(-1);
	sort(ans,ans+p);
	for(int i=0;i<p;i++)
	{
		if(ans[i].second!=my) cout<<ans[i].second<<endl; 
	}  
	return 0;
} 
