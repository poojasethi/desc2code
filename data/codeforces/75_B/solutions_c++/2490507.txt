#include<iostream>
#include<algorithm>
#include<string>
#include<vector>
#include<map>
using namespace std;
int n;
map<string,int> m;
vector< pair<int,string> > v;
string x,y,verb,rub,myn;
int main()
{
    cin>>myn;
    cin>>n;
    for(int i=0;i<n;i++)
    {
            cin>>x>>verb;
            if (verb[0]!='l') cin>>rub;
            cin>>y;
            y.resize(y.length()-2);
            cin>>rub;
            if (x==myn || y==myn)
            {
                       m[x]-=(verb[0]=='p'?15:verb[0]=='c'?10:5);
                       m[y]-=(verb[0]=='p'?15:verb[0]=='c'?10:5);
            }
            else
            {
                m[x]+=0;
                m[y]+=0;
            }
    }
    for(map<string,int>::iterator ii=m.begin();ii!=m.end();ii++)
    {
                                  if (ii->first==myn) continue;
                                  v.push_back(make_pair(ii->second,ii->first));
    }
    sort(v.begin(),v.end());
    for(int i=0;i<v.size();i++) cout<<v[i].second<<"\n";
    return 0;
}
