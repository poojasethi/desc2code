#include <iostream>
#include <cstdio>
#include <cstring>
#include <map>
#include <vector>
#include <algorithm>
using namespace std;
vector <pair <int,string> > v;
int cnt,d[1000],n;
map <string,int> m;
string n1,s,n2,x,t;
int main()
{
	cin>>s>>n;
	m[s]=cnt++;
	for(int i=0;i<n;i++)
	{
		cin>>n1>>t;
		if (m.find(n1)==m.end()) m[n1]=cnt++;
		if (t=="posted" || t=="commented")
		{
			cin>>x>>n2>>x;
			n2.erase(n2.size()-2,2);
			if (m.find(n2)==m.end()) m[n2]=cnt++;
			int uk1=m[n1],uk2=m[n2];
			if (t=="posted" && (n1==s || n2==s))
			{
				d[uk1]+=15;
				d[uk2]+=15;
			} else if (n1==s || n2==s)
			{
				d[uk1]+=10;
				d[uk2]+=10;
			}
		} else
		{
			cin>>n2>>x;
			n2.erase(n2.size()-2,2);
			if (m.find(n2)==m.end()) m[n2]=cnt++;
			int uk1=m[n1],uk2=m[n2];
			if (n1==s || n2==s)
			{
		  	d[uk1]+=5;
			  d[uk2]+=5;
			}
		}
	}
	map<string,int>::iterator it;
	for(it=m.begin();it!=m.end();it++)
		if ((*it).first!=s) v.push_back(make_pair(-d[(*it).second],(*it).first));
	sort(v.begin(),v.end());
	for(size_t i=0;i<v.size();i++)
		cout<<v[i].second<<endl;
	return 0;
}
