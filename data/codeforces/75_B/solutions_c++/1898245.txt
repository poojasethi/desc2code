
#include<cstdio>
#include<iostream>
#include<string>
#include<vector>
#include<queue>
#include<stack>
#include<map>
#include<set>
#include<algorithm>
#include<cmath>
using namespace std;
bool myfunc(pair<int,string> a,pair<int,string> b){
	if(a.first>b.first)
		return true;
	if(a.first==b.first)
		if(a.second<b.second)
			return true;
	return false;
}
int main(){
	string u;
	cin>>u;
	int n,i;
	cin>>n;
	map<char,int> m;
	m['p']=15;
	m['c']=10;
	m['l']=5;
	map<string,int> g;
	vector<pair<int,string> > v;
	while(n--){
		string s,r;
		cin>>s>>r;
		string a,b,c;
		if(r[0]!='l')
			cin>>a;
		cin>>b>>c;
		string d="";
		for(i=0;i<b.size()-2;i++){
			d+=b[i];
		}
//		cout<<s<<" "<<d<<endl;
		if(s==u && d==u)
			continue;
		else if(s==u)
			g[d]+=m[r[0]];
		else if(d==u)
			g[s]+=m[r[0]];
		else{
			g[s]=g[s];
			g[d]=g[d];
		}
	}
	map<string,int>::iterator it;
	for(it=g.begin();it!=g.end();it++){
//		cout<<it->first<<" "<<it->second<<endl;
		v.push_back(make_pair(it->second,it->first));
	}
	sort(v.begin(),v.end(),myfunc);
	for(i=0;i<v.size();i++)
		cout<<v[i].second<<endl;
	return 0;
}
