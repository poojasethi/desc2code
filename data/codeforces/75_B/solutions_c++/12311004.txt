#include <bits/stdc++.h>

using namespace std;

typedef pair<int, string> pis;

string a, b, c, u, q, p;

int f[202], d[202], n, m;
string nn[202];

priority_queue<pis, vector<pis>, greater<pis> > que;

int main() {
  for (int i = 1; i < 202; i++) f[i] = i;
  cin >> u >> n;
  nn[++m] = u;
  while (n --) {
    cin >> a >> c;
    if (c[0] != 'l') cin >> q;
    cin >> p >> q;
    int l = p.length();
    b = p.substr(0, l - 2);
    int x = 0, y = 0;
    for (int i = 1; i <= m; i++) {
      if (nn[i] == a) x = i;
      if (nn[i] == b) y = i;
    }
    if (!x) nn[x = ++m] = a;
    if (!y) nn[y = ++m] = b;
    int v = c[0] == 'p' ? 15 : c[0] == 'c' ? 10 : 5;
    if (x == 1) d[y] += v;
    if (y == 1) d[x] += v;
  }
  for (int i = 2; i <= m; i++) {
    int v = -abs(d[i] - d[1]);
    que.push(pis(v, nn[i]));
  }
  while (que.size()) {
    cout << que.top().second << endl;
    que.pop();
  }
}

	    			 			 		    	 		 					