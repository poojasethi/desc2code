#include <iostream>
#include <algorithm>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <map>
using namespace std;
map<string,int>M;
char s[1001];
typedef struct A{string name;int p;
	bool operator<(const A &a)const
	{
		if(a.p==p)
		return name<a.name;
		return p>a.p;
	}

}A;
A t[10001];
int top=2;
int main()
{
	int x,y,n,i,m,j,sc;
	string me,tmp;
	cin>>me;
	M[me]=1;
	scanf("%d ",&n);
	for(i=0;i<n;i++)
	{
		tmp="";
		gets(s);
		m=strlen(s);
		j=0;
		while(s[j]==' ')j++;
		while(s[j]!=' ')
		tmp+=s[j],j++;
		x=M[tmp];
		if(x==0)t[top].name=tmp,x=top,M[tmp]=top++;
		j++;
		if(s[j]=='p')
		sc=15,j+=10;
		else if(s[j]=='c')sc=10,j+=13;
		else sc=5,j+=6;
		tmp="";
		while(s[j]!='\'')
		tmp+=s[j],j++;
		y=M[tmp];
		if(y==0)t[top].name=tmp,y=top,M[tmp]=top++;
		if(x==1||y==1)
		t[x].p+=sc,t[y].p+=sc;
	}
	sort(t+2,t+top);
	for(i=2;i<top;i++)
	cout<<t[i].name<<endl;
	//scanf("%d",&n);
}
