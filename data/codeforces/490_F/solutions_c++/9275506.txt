#include<bits/stdc++.h>

#define pb push_back
#define mp make_pair
#define st first
#define nd second

using namespace std;

int n,m,j,k,i,l;
int A[6005];
vector<int> V[6005];
int dp[6005];
int mx = INT_MIN/2;

void dfs(int node,int root){

	int i;
	
	int ind = lower_bound(dp,dp+n,A[node]) - dp ;
	
	int temp = dp[ind];

	dp[ind] = A[node];

	for(i=0 ; i<V[node].size() ; i++)
		if(V[node][i] != root)
			dfs(V[node][i],node);

	mx = max(ind+1,mx);

	dp[ind] = temp;

	return ;
}

int main(){

	int x,y;

	memset(dp,11,sizeof dp);
	
	scanf("%d",&n);

	for(i=1 ; i<=n ; i++)
		scanf("%d",A+i);
	
	for(i=1 ; i<n ; i++)
	{
		scanf("%d %d",&x,&y);
		V[x].pb(y);
		V[y].pb(x);
	}

	for(i=1 ; i<=n ; i++)
		dfs(i,0);
	
	printf("%d",mx);

	return 0;
}
