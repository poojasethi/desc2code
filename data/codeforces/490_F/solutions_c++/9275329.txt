#include<bits/stdc++.h>
using namespace std;

#define pb push_back
#define mp make_pair

int G[6005];

int DP[6005];

int n,mx;

vector<int> V[6005];

void dfs(int x,int root){

	int ind = lower_bound(DP,DP+n,G[x])-DP;

	int temp=DP[ind],i;

	DP[ind]=G[x];

	mx=max(mx,ind+1);

	for(i=0 ; i<V[x].size() ; i++)
		if(V[x][i]!=root)
			dfs(V[x][i],x);

	DP[ind]=temp;
}

int main(){

	memset(DP,10,sizeof DP);

	int i,a,b;
		
	scanf("%d",&n);

	for(i=1 ; i<=n ; i++)
		scanf("%d",G+i);
	
	for(i=1 ; i<=n-1 ; i++){

		scanf("%d %d",&a,&b);

		V[a].pb(b);
		V[b].pb(a);

	}


	for(i=1 ; i<=n ; i++)
		dfs(i,0);

	cout<<mx;
		
	return 0;
}
