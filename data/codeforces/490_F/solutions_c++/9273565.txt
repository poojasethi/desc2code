#include<bits/stdc++.h>

using namespace std;

#define dbg(x) cerr << (#x) << " --> " << (x) << endl
#define lli long long int
#define pii pair<int,int>
#define MOD 1000000007
#define N (int)1e5+10
#define mp make_pair
#define pb push_back
#define nd second
#define st first
#define endl '\n'

int dp[6006],mx;
int val[6005];
int n,m,k,i,j,x,y,z;

vector<int> arr[6006];

void f(int root,int x){
	
	int ind = lower_bound(dp,dp+n,val[x]) - dp;

	int temp = dp[ind];

	dp[ind] = val[x];

	mx = max(ind+1 , mx);

	for(int i=0 ; i<arr[x].size() ; i++){
		if(root != arr[x][i])
			f(x,arr[x][i]);
	}

	dp[ind] = temp;

	return ;
}

int main(){

	memset(dp,10,sizeof dp);

	cin >> n;

	for(i=1 ; i<=n ; i++)
		cin >> val[i];

	for(i=1 ; i<n ; i++){
		cin >> x >> y;
		arr[x].pb(y);
		arr[y].pb(x);
	}

	for(i=1 ; i<=n ; i++)
		f(0,i);
	
	cout << mx << endl;
}
