#include <bits/stdc++.h>

using namespace std;
#define maxx 10000010
int a[100010],b[100010],prm[maxx],aprm[maxx],bprm[maxx];
void wrk(int n,int *x,int *ansprm)
{
    int i,j;
    for(i=0;i<n;i++)
    {
        for(j=x[i];j>1;j/=prm[j])
            ansprm[prm[j]]++;
    }
}

void prnt(int n,int *x,int *ansprm)
{
    int i,j;
    for(i=0;i<n;i++)
    {
        int ans=1;
        for(j=x[i];j>1;j/=prm[j])
            ansprm[prm[j]] ? ansprm[prm[j]]-- : ans*=prm[j];
        cout<<ans<<" ";
    }
    cout<<endl;
}
void sieve()
{
    int i,j;
    for(i=2;i<maxx;i+=2)
        prm[i]=2;

    for(i=3;i<maxx;i+=2)
    {
        if(!prm[i])
        {
            for(j=i;j<maxx;j+=i)
                prm[j]=i;
        }
    }
}
int main()
{
    int m,n,i;

    sieve();
    //freopen("input.txt","r",stdin);
    cin>>n>>m;

    for(i=0;i<n;i++)
        cin>>a[i];

    for(i=0;i<m;i++)
        cin>>b[i];



    wrk(n,a,aprm);
    wrk(m,b,bprm);

    cout<<n<<" "<<m<<endl;
    prnt(n,a,bprm);
    prnt(m,b,aprm);

}
