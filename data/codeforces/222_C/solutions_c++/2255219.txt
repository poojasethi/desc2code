#include <stdio.h>
#include <algorithm>
#include <set>
#include <map>
#include <vector>
#include <string>
#include <queue>
#include <math.h>
#define N 10000100
#define K 100100
using namespace std;
int p[N], u[N], a[K], b[K];
void upd(int v, int d)
{
    for(; v>1; u[p[v]]+=d, v/=p[v]);
}
int out(int v, int d)
{
    int t;
    for(t=1; v>1; v/=p[v])
        if(u[p[v]]*d>0) { u[p[v]]-=d; t*=p[v]; }
    return t;
}
int main()
{
    int i, j, n, k;
    for(i=2; i*i<N; i++)
        if(!p[i])
            for(j=i*i; j<N; p[j]=i, j+=i);
    for(i=2; i<N; i++)
        if(!p[i]) p[i]=i;
    for(scanf("%d%d", &n, &k), printf("%d %d\n", n, k), i=0; i<n; scanf("%d", &j), upd(j, 1), a[i]=j, i++);
    for(i=0; i<k; scanf("%d", &j), upd(j, -1), b[i]=j, i++);
    for(i=0; i<n; printf("%d ", out(a[i], 1)), i++);
    printf("\n");
    for(i=0; i<k; printf("%d ", out(b[i], -1)), i++);
    printf("\n");
    return 0;
}