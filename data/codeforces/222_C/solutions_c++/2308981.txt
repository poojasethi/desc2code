#include <iostream>
using namespace std;
const int M=10000001;
int c1prime[M],c2prime[M],prime[M],a[100000],b[100000],c[100000];
void chek(int n,int *a,int *c)
{int i,t;
 for(i=0;i<n;i++)
   {    t=a[i];
    while(t>1)
     {c[prime[t]]++;
        t/=prime[t];}}      
 }
void reduction(int n,int *a ,int *c)
{ int i,t,x;
  for(i=0;i<n;i++)
   {    t=a[i];x=1;
         while(t>1)     
           {  if(c[prime[t]]>0)
               c[prime[t]]--;
               else
               x=x*prime[t];
               t/=prime[t];
           }
      cout<<x<<((i==n-1)?"\n":" ");      
   }
}
int main()
{int i=0,j=0,n,m,c;
  cin>>n>>m;
 
while(j<m)
   if(i<n)
  cin>>a[i++];
  else
  cin>>b[j++];
  for(i=2;i<M;i++) 
            if(!prime[i])
            {   int  t=i;c=i;
             while(c<M) 
             {  if(!prime[c])
                  prime[c]=t; 
                 c+=t;}} 
cout<<n<<" "<<m<<endl;
chek(n,a,c1prime);
chek(m,b,c2prime);
reduction(n,a,c2prime);
reduction(m,b,c1prime);

return 0;}
