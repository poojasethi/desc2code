#include <bits/stdc++.h>
using namespace std ;
#define M 100005
#define N 10000005
int prime[N]={0},c1[N],c2[N];
int n,m,a[M],b[M];
void Prime()
{
	for(int i=2;i<N;i++)
	{
		if(prime[i]) 
			continue;
		for(int j=2;j*i<N;j++)
			prime[i*j]=1;
	}
}
void split(int num,int c[])
{
	for(int i=2;i*i<=num&&prime[num];i++)
	{
		while(num%i==0)
		{
			c[i]++;
			num/=i;
		}
	}
	if(num>1) 
		c[num]++;
}
void print(int num,int c[])
{
	int tmp=1;
	for(int i=2;i*i<=num&&prime[num];i++)
	{
		while(num%i==0)
		{
			if(c[i])
			{
				c[i]--;
				tmp*=i;
			}
			num/=i;
		}
	}
	if(num>1&&c[num])
	{
		c[num]--;
		tmp*=num;
	}
	printf("%d ",tmp);
}
int main()
{
	Prime();
	while(cin >> n >> m) 
	{
	for(int i=0;i<n;i++)
	{
		cin >> a[i] ;
		split(a[i],c1);
	}
	for(int i=0;i<m;i++)
	{
		cin >> b[i] ;
		split(b[i],c2);
	}
	for(int i=2;i<N;i++)
	{
		int mm=min(c1[i],c2[i]);
		c1[i]-=mm;
		c2[i]-=mm;
	}
	printf("%d %d\n",n,m);
	for(int i=0;i<n;i++) 
		print(a[i],c1);
	printf("\n");
	for(int i=0;i<m;i++) 
		print(b[i],c2);
	printf("\n");
}
	return 0;
}