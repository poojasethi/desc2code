#include<bits/stdc++.h>
using namespace std;
#define ll  int
#define maxi 10000001
ll p[maxi]={0};
ll fa[maxi]={0};
ll fb[maxi]={0};
ll a[100001];
ll b[100001];
void gen(){
for(int i=2;i<maxi;i++){
  if(!p[i]){
  for(int j=i;j<maxi;j+=i){
    p[j]=i;
  }
}
}
}
void process(ll a[],ll n,ll f[]){
for(int i=0;i<n;i++){
for(int y=a[i];y>1;y/=p[y])
while((f[p[y]]>0)&&(a[i]%p[y]==0)){
  f[p[y]]--;
  a[i]/=p[y]; 
}
cout<<a[i]<<" ";
}
}
int main(){
ll n,m;
gen();
cin>>n>>m;
for(int i=0;i<n;i++) {cin>>a[i];
for(int y=a[i];y>1;y/=p[y]){
  fa[p[y]]++;
}
}
for(int i=0;i<m;i++){
    cin>>b[i];
    for(int y=b[i];y>1;y/=p[y]){
        fb[p[y]]++;
    }
}
for(int i=0;i<maxi;i++){
  fb[i]=min(fa[i],fb[i]);
fa[i]=fb[i];
}
cout<<n<<" "<<m<<"\n";
process(a,n,fa);
cout<<"\n";
process(b,m,fb);
}
