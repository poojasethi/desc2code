#include<stdio.h>
#include<iostream>
#define XX 10000050
#define X 100050
int zi[X],mu[X];
int yzi[XX],ymu[XX];
int s[XX];
void fenjie(int a[],int b[],int n){
	int i,j;
	for(i=0;i<n;i++)
		for(j=a[i];j>1;j/=s[j])
		    b[s[j]]++;
}
void prt(int a[],int b[],int n){
	int i,j,x;
	for(i=0;i<n;i++){
		x=1;
		for(j=a[i];j>1;j/=s[j])
		    if(b[s[j]]) b[s[j]]--;
		    else    	x*=s[j];
        printf("%d%c",x,(i==n-1)?'\n':' ');
	}
}
int main(){
	int i,j,n,m;
	for(i=2;i<=XX;i++) if(!s[i]) for(j=i;j<=XX;j+=i) s[j]=i;
	scanf("%d%d",&n,&m);
	for(i=0;i<n;i++)
	    scanf("%d",&zi[i]);
	for(i=0;i<m;i++)
	    scanf("%d",&mu[i]);
	printf("%d %d\n",n,m);
	fenjie(zi,yzi,n);
	fenjie(mu,ymu,m);
	prt(zi,ymu,n);
	prt(mu,yzi,m);
	return 0;
}
