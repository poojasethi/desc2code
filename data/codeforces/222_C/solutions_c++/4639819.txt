#include <bits/stdc++.h>
#define MAXA 10000010

using namespace std;

int n,m;
int asal[MAXA];
int A[MAXA],B[MAXA];
int C[MAXA],D[MAXA];

int main()
{
	int i,j,ans=1;
	cin >> n >> m ;
	for(i=2 ; i<MAXA; i++)
		if(!asal[i])
			for(j=i ; j<MAXA ; j+=i)
				asal[j]=i;
	for(i=1 ; i<=n ; i++)
	{
		scanf("%d",C+i);
		for(j=C[i] ; j>1 ; j/=asal[j])
			A[asal[j]]++;
	}			
	for(i=1 ; i<=m ; i++)
	{
		scanf("%d",D+i);
		for(j=D[i] ; j>1 ; j/=asal[j])
			B[asal[j]]++;
	}
	printf("%d %d\n",n,m);
	for(i=1 ; i<=n ; i++)
	{
		ans=1;
		for(j=C[i] ; j>1 ; j/=asal[j])
		{
			if(B[asal[j]]) B[asal[j]]--;
			else ans*=asal[j];
		}
		printf("%d ",ans);
		if(i==n) puts("");
	}
	for(i=1 ; i<=m ; i++)
	{
		ans=1;
		for(j=D[i] ; j>1 ; j/=asal[j])
		{
			if(A[asal[j]]) A[asal[j]]--;
			else ans*=asal[j];
		}
		printf("%d ",ans);
		if(i==m) puts("");
	}
	return 0;
}
