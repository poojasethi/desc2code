#include <cstdio>

using namespace std;

int a[100001],b[100001],sa[10000001],sb[10000001],p[10000001];

int main(void)
{
  for(int i=1;i<10000001;++i)
    p[i]=i;
  for(int i=2;i<10000001;++i)
  {
    if(p[i]<i)
      continue;
    for(long long j=1ll*i*i;j<10000001;j+=i)
      p[j]=i;
  }
  int n,m;
  scanf("%d %d",&n,&m);
  for(int i=1;i<=n;++i)
  {
    scanf("%d",&a[i]);
    for(int j=a[i];j>1;j/=p[j])
      ++sa[p[j]];
  }
  for(int i=1;i<=m;++i)
  {
    scanf("%d",&b[i]);
    for(int j=b[i];j>1;j/=p[j])
      ++sb[p[j]];
  }
  printf("%d %d\n",n,m);
  for(int i=1;i<=n;++i)
  {
    int ans=1;
    for(int j=a[i];j>1;j/=p[j])
    {
      if(sb[p[j]]>0)
        --sb[p[j]];
      else
        ans*=p[j];
    }
    printf("%d ",ans);
  }
  printf("\n");
  for(int i=1;i<=m;++i)
  {
    int ans=1;
    for(int j=b[i];j>1;j/=p[j])
    {
      if(sa[p[j]]>0)
        --sa[p[j]];
      else
        ans*=p[j];
    }
    printf("%d ",ans);
  }
  printf("\n");
  return 0;
}