//By momo
#include<iostream>
#include<algorithm>
#define N 100100
#define AB 10000010
using namespace std;

int n, m;

int num[AB], pri[AB], pn;
void init(){
	for(int i = 2; i < AB; i++){
		if(num[i] == 0) pri[pn++] = i, num[i] = i;
		for(int j = 0; j < pn; j++){
			if(i*pri[j] >= AB) break;
			num[i*pri[j]] = pri[j];
			if(i % pri[j] == 0) break;
		}
	}
}

void Hinp(int *x, int *cx, int len){
	for(int i = 0; i < len; i++){
		cin >> x[i];
		for(int j = x[i]; j > 1; j /= num[j]) cx[num[j]]++;
	}
}

void Hout(int *x, int *cx, int len){
	for(int i = 0; i < len; i++){
		int ans = 1;
		for(int j = x[i]; j > 1; j /= num[j]){
			if(cx[num[j]] == 0) ans *= num[j];
			else cx[num[j]]--;
		}
		cout << ans;
		if(i == len-1) cout << endl;
		else cout << ' ';
	}
}

int a[N], b[N], ca[AB], cb[AB];
int main(){
	
	cin >> n >> m;
	cout << n << ' ' << m << endl;
	
	init();

	Hinp(a, ca, n);
	Hinp(b, cb, m);
	
	Hout(a, cb, n);
	Hout(b, ca, m);

}
