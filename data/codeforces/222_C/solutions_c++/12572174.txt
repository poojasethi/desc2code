#include<iostream>
#include<cstdio>
using namespace std;

const int maxn=10000004;
int n,m;
int prime[maxn]={0};
int a[maxn],b[maxn];
int fa[maxn]={0},fb[maxn]={0};

void table()
{
	int i,j;
	for(i=2;i<maxn;i++)
		if(!prime[i])
		{
			for(j=i;j<maxn;j+=i)
			{
				prime[j]=i;
			}
		}
}

int main()
{
	int i,j,k;
	table();
	cin>>m>>n;
	for(i=0;i<m;i++)
	{
		scanf("%d",&a[i]);
		for(j=a[i];j>1;j/=prime[j])
		{
			fa[prime[j]]++;
		}
	}
	for(i=0;i<n;i++)
	{
		scanf("%d",&b[i]);
		for(j=b[i];j>1;j/=prime[j])
		{
			fb[prime[j]]++;
		}
	}
 int res;
	cout<<m<<' '<<n<<endl;
	for(i=0;i<m;i++)
	{
		res=1;
		for(j=a[i];j>1;j/=prime[j])
		{

			if(fb[prime[j]])
				fb[prime[j]]--;
			else
				res*=prime[j];
		}
		printf("%d ",res);
	}
	cout<<endl;
	for(i=0;i<n;i++)
	{
		res=1;
		for(j=b[i];j>1;j/=prime[j])
		{

			if(fa[prime[j]])
				fa[prime[j]]--;
			else
				res*=prime[j];
		}
		printf("%d ",res);
	}
	cout<<endl;
	return 0;
}
   		 	 	  	 	       				  	 	