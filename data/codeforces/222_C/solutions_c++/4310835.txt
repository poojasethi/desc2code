#include <cstdio>
const int MaxN= 100010, MaxAB= 10000010;
int N, M, a[MaxN], b[MaxN], A[MaxAB], B[MaxAB], prm[MaxAB];
void work(int N, int*a, int*A){
    for(int i= 1;i<= N;++ i){
        scanf("%d", a+i);
        for(int j= a[i];j> 1;j/= prm[j])//add degree,,finally would be itself
            ++ A[prm[j]];
    }
}
void prt(int N, int*a, int*B){
    for(int i= 1;i<= N;++ i){
        int ans= 1;
        for(int j= a[i];j> 1;j/= prm[j])
            B[prm[j]] ? -- B[prm[j]] : ans*= prm[j];
        printf(i==N ? "%d\n" : "%d ", ans);
    }
}
int main(){
    scanf("%d%d", &N, &M); printf("%d %d\n", N, M);
    for(int i= 2;i< MaxAB;++ i) if(!prm[i])
        for(int j= i;j< MaxAB;j+= i)
            prm[j]= i;//sieve ,,最小質因數
    work(N, a, A);
    work(M, b, B);
    prt(N, a, B);//分子用分母約
    prt(M, b, A);//分母用分子約
    return 0;
}
