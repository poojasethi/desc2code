#include <cstdio>
#define MAX 10000000
int prime[MAX+1],count[MAX+1];
int main()
{
	int tmp,flag,n[2],a[2][100000];
	for(int i=2;i<=MAX;i++)
		prime[i]=i;
	for(int i=2;i*i<=MAX;i++)
		if(prime[i]==i)
			for(int j=i*i;j<=MAX;j+=i)
				prime[j]=i;
	scanf("%d %d",&n[0],&n[1]);
	for(int i=0;i<2;i++)
	{
		if(i==0)
			flag=1;
		else
			flag=-1;
		for(int j=0;j<n[i];j++)
		{
			scanf("%d",&a[i][j]);
			tmp=a[i][j];
			while(tmp!=1)
			{
				count[prime[tmp]]+=flag;
				tmp/=prime[tmp];
			}
		}
	}
	for(int i=0;i<2;i++)
	{
		if(i==0)
			flag=1;
		else
			flag=-1;
		for(int j=0;j<n[i];j++)
		{
			tmp=a[i][j];
			a[i][j]=1;
			while(tmp!=1)
			{
				if(count[prime[tmp]]*flag>0)
				{
					count[prime[tmp]]-=flag;
					a[i][j]*=prime[tmp];
				}
				tmp/=prime[tmp];
			}
		}
	}
	printf("%d %d\n",n[0],n[1]);
	for(int i=0;i<2;i++)
	{
		printf("%d",a[i][0]);
		for(int j=1;j<n[i];j++)
			printf(" %d",a[i][j]);
		printf("\n");
	}
	return 0;
}
