#include <iostream>
using namespace std;

const int g_N = 10000000;
int n,m, primes[g_N+1],ac[g_N+1],bc[g_N+1];
int a[100000],b[100000];

//This method counts primes of an array
void countPrimes(int n,int* a,int* c)
{
	for(int i=0;i<n;i++)
	{
		int num = a[i];
		while(num>1)
		{
			c[primes[num]]++;
			num /= primes[num];
		}
	}
}

//This method prints numbers after reduce fraction
void solve(int n,int* a, int* c)
{
	for(int i=0;i<n;i++)
	{
		int num = a[i], result = 1;
		while(num>1)
		{
			if(c[primes[num]]>0)
				c[primes[num]]--;
			else
				result *= primes[num];
			num /= primes[num];
		}
		cout<<result<<((i==n-1)?"\n":" ");		
	}
}
int main()
{
	//init primes so that each position is the largest prime factor
	for(int i=2;i<=10000000;i++)
	{
		if(!primes[i])
		{
			int cur = i;
			while(cur<=g_N)
			{
				primes[cur] = i;
				cur+=i;
			}
		}
	}

	cin>>n>>m;
	for(int i=0;i<n;i++)
		cin>>a[i];
	for(int i=0;i<m;i++)
		cin>>b[i];

	cout<<n<<" "<<m<<endl;
	countPrimes(n,a,ac);
	countPrimes(m,b,bc);
	solve(n,a,bc);
	solve(m,b,ac);

}
