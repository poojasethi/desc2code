#include <iostream>
#include <vector>
#include <algorithm>
#include <string>
#include <cstring>
#include <iomanip>
#include <set>
#include <map>
#include <cstdio>
using namespace std;
const int maxa=1000*100*100+100,maxn=1000*100+100;
int a[maxn],b[maxn],A[maxa],B[maxa],n,m,pre[maxa];
void done(int n,int *a,int *A)
{
    for(int i=1;i<=n;i++)
        for(int j=a[i];j>1;j/=pre[j])
            A[pre[j]]++;
}
void print(int n,int *a,int *B)
{
    for(int i=1;i<=n;i++)
    {
        int ans=1;
        for(int j=a[i];j>1;j/=pre[j])
            (B[pre[j]]) ? --B[pre[j]] : ans*=pre[j];
        printf(i==n ? "%d\n" : "%d ",ans);
    }
}
int main()
{
    ios_base::sync_with_stdio (false);
    scanf("%d%d",&n,&m);    printf("%d %d\n",n,m);
    for(int i=1;i<=n;i++)
        scanf("%d",&a[i]);
    for(int i=1;i<=m;i++)
        scanf("%d",&b[i]);
    for(int i=2;i<=1000*1000*10;i++)
        if(!pre[i])
            for(int j=i;j<=1000*1000*10;j+=i)
                pre[j]=i;
    done(n,a,A);
    done(m,b,B);
    print(n,a,B);
    print(m,b,A);

    return 0;
}
