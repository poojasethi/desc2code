#include <iostream>
using namespace std;
const int maxn=10000000,kol=100000;
int n,m,a[maxn+10],b[maxn+10],c[maxn+10],i,j,da[kol],db[kol];
int main()
{
	cin>>n>>m;
	c[1]=1;
	for(i=2;i<=maxn;i++)
	{
		if (c[i]==0)
		{
			c[i]=i;
			if (1LL*i*i>1LL*maxn)
				continue;
			j=i*i;
			while (j<=maxn)
			{
				if (!c[j]) c[j]=i;
				j+=i;
			}
		}
	}
	for(i=0;i<n;i++)
	{
		int x;
		cin>>x; da[i]=x;
		while (x>1)
		{
			a[c[x]]++;
			x/=c[x];
		}
	}
	for(i=0;i<m;i++)
	{
		int x;
		cin>>x; db[i]=x;
		while (x>1)
		{
			b[c[x]]++;
			x/=c[x];
		}
	}
	for(i=1;i<maxn;i++)
		if (a[i]<b[i])
		{
			b[i]-=a[i];
			a[i]=0;
		}
		else
		{
			a[i]-=b[i];
			b[i]=0;
		}
	cout<<n<<" "<<m<<endl;
	for(i=0;i<n;i++)
	{
		int ans=1,x=da[i];
		while (x>1)
		{
			if (a[c[x]])
			{
				ans*=c[x];
				a[c[x]]--;
			}
			x/=c[x];
		}
		cout<<ans<<" ";
	}
	cout<<endl;
	for(i=0;i<m;i++)
	{
		int ans=1,x=db[i];
		while (x>1)
		{
			if (b[c[x]])
			{
				ans*=c[x];
				b[c[x]]--;
			}
			x/=c[x];
		}
		cout<<ans<<" ";
	}
	return 0;
}