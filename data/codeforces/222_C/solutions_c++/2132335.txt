#include<cstdio>
#include<cstring>

const int N=100010;
const int M=10000010;
int n,m,a[N],b[N];
int p[M],x[M],y[M];

void init()
{
    for(int i=2;i*i<M;i++) if(!p[i]) for(int j=i*i;j<M;j+=i) p[j]=i;
    for(int i=2;i<M;i++) if(!p[i]) p[i]=i;
}

void calFac(int n,int *a,int *b)
{
    for(int i=0;i<n;i++) for(int j=a[i];j>1;j/=p[j]) b[p[j]]++;
}
void calAns(int n,int *a,int *b)
{
    for(int i=0;i<n;i++)
    {
        int x=1;
        for(int j=a[i];j>1;j/=p[j])
        {
            if(b[p[j]]) b[p[j]]--;
            else x*=p[j];
        }
        printf("%d%c",x,i==n-1?'\n':' ');
    }
}
int main()
{
    init();
    scanf("%d%d",&n,&m);
    for(int i=0;i<n;i++) scanf("%d",a+i);
    for(int i=0;i<m;i++) scanf("%d",b+i);
    printf("%d %d\n",n,m);
    calFac(n,a,x);
    calFac(m,b,y);
    calAns(n,a,y);
    calAns(m,b,x);
}
