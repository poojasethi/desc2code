#include <iostream>
#include <cstdio>
using namespace std;
#define MAXN 100010
#define MAXX 10000010

void eval();
void calc(int,int [],int []);
void calc2(int,int [],int []);

int N,M;
int num[MAXN];
int dem[MAXN];
int prim[MAXX],x[MAXX],y[MAXX];

int main(){
    eval();
    cin >> N >> M;
    for(int i=1;i<=N;i++)
        cin >> num[i];
    for(int i=1;i<=M;i++)
        cin >> dem[i];
    calc(N,num,x); calc(M,dem,y);
    cout << N << " " << M << endl;
    calc2(N,num,y); calc2(M,dem,x);
    return 0;
}

void eval(){
    for(int i=2; i*i<MAXX; i++)
        if(!prim[i])
            for(int j=i*i;j<MAXX;j+=i)
                prim[j]=i;

    for(int i=2;i<MAXX;i++)
        if(!prim[i]) prim[i]=i;
}

void calc(int a,int b[],int c[]){
    for(int i=1;i<=a;i++)
        for(int j=b[i];j>1;j/=prim[j]) c[prim[j]]++;
}


void calc2(int a,int b[],int c[]){
    for(int i=1;i<=a;i++){
        int res=1;
        for(int j=b[i];j>1;j/=prim[j])
            if(c[prim[j]]) c[prim[j]]--;
            else res*=prim[j];
        printf("%d%c",res,i==a?'\n':' ');
    }
}
