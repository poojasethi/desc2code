#include <iostream>
#include <cstdlib>
#include <cstring>
#include <string>
#include <vector>
#include <utility>
#include <algorithm>
#include <cmath>
#define MAXN 2010

using namespace std;

int dr[] = {-1,1,0,0};
int dc[] = {0,0,-1,1};
char ra[] = {'v','^','>','<'};

int n,m,a;
char b[MAXN][MAXN];
bool vis[MAXN][MAXN];
int maxd=0;
bool maxd2;

int dfs(int r, int c, char ch) {
	if (r < 0 || r >= n || c < 0 || c >= m || ch != b[r][c]) return 0;
	if (vis[r][c]) {
		cout << -1;
		exit(0);
	}
	a--;
	vis[r][c] = true;
	int d = 0;
	for (int i = 0; i < 4; i++)
		d = max(d,dfs(r+dr[i],c+dc[i],ra[i]));
	return d + 1;
}

int main() {
	cin >> n >> m;
	for (int i = 0; i < n; i++) {
		cin >> b[i];
		for (int j = 0; j < m; j++)
			if (b[i][j] != '#') a++;
	}
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < m; j++) {
			if (b[i][j] != '#') continue;
			for (int k = 0; k < 4; k++) {
				int depth = dfs(i+dr[k],j+dc[k],ra[k]);
				if (depth == maxd) maxd2 = true;
				if (depth > maxd) {
					maxd = depth;
					maxd2 = false;
				}
			}
		}
	}
	if (a != 0) cout << -1;
	else cout << maxd*2 - (maxd2 ? 0 : 1);
}//literally the dumbest typo ever