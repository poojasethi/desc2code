#include<iostream>
#include<cmath>
#include<algorithm>
#include<cstdio>
#include<cstring>
#include<vector>
#include<string>
#include<utility>
using namespace std;
const int maxn = 2010;
char tod[maxn][maxn];
int memo[maxn][maxn];
int cmp[maxn][maxn];
int n,m;
int c;
int maxi[maxn*maxn];
bool si;
int dp(int i, int j){
	int &ref = memo[i][j];
	if(ref!=-1 && ref!=-2) return ref;
	if(memo[i][j]==-2) {si = true;return 0x3f3f3f3f;}
	ref =-2;
	if(tod[i][j]=='#') {return ref=0;}
	int ni,nj;
	ni=i;nj=j;

	if(tod[i][j]=='<') nj--;
	if(tod[i][j]=='>') nj++;
	if(tod[i][j]=='^') ni--;
	if(tod[i][j]=='v') ni++;

	dp(ni,nj);

	ref=dp(ni,nj);
	ref++;
	if(tod[ni][nj]=='#') cmp[ni][nj]=++c;
	cmp[i][j]=cmp[ni][nj];

	return ref;
}



int main(){
	memset(memo,-1,sizeof memo);
	memset(cmp,0, sizeof cmp);
	memset(maxi,0,sizeof maxi);
	si = false;
	c=0;
	scanf("%d%d",&n,&m);
	for(int i=0;i<n;i++) scanf("%s",tod[i]);

	for(int i=0;i<n;i++)
		for(int j=0;j<m;j++)
			dp(i,j);
	int res=0;
	if(si) {cout << "-1" << endl; return 0;}
	for(int i=0;i<n;i++)	
		for(int j=0;j<m;j++){
			if(tod[i][j]!='#'){
					int cm = cmp[i][j];
					maxi[cm] = max(maxi[cm],memo[i][j]);
			}
		}
	sort(maxi+1,maxi+1+c);
	reverse(maxi+1,maxi+1+c);
	//cout << c << endl;
	if(!c) cout << "0"<<endl;
	else{
		res = maxi[1]*2-1;
		res = max(res,maxi[1]+maxi[2]);
		cout << res << endl;
	}

	return 0;
}
