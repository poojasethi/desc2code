#include<bits/stdc++.h>
using namespace std;
#define st first
#define nd second
#define mp make_pair
#define mp3(x,y,z) mp(x,mp(y,z))
#define endl '\n'
#define endll puts("")
#define mod 1000000007
#define pb push_back
#define pii pair< int , int > 
typedef long long ll;
const int N = 2e3+3;
pii max1,max2,A;
int n,m,i,j,k,t,s,x,y,z,h[N][N],d,l,ii,jj,u;
char a[N][N];
void f(int x,int y,int k)
{
	if(k!=-1)
	{
		if(k>max1.st){max2=max1;max1=mp(k,s);}
		else if(k==max1.st and s==max1.nd){if(max2.st<=k-1)max2=mp(k-1,s);}
		else if(k==max1.st){max2=mp(k,s);}
		else if(k>max2.st){max2=mp(k,s);}
	}
	if(x>0 and x<=n and y>0 and y<=m)t++;
	if(x>1 and a[x-1][y]=='v'){if(a[x][y]=='#')s++;f(x-1,y,k+1);}
	if(y>1 and a[x][y-1]=='>'){if(a[x][y]=='#')s++;f(x,y-1,k+1);}
	if(x<n and a[x+1][y]=='^'){if(a[x][y]=='#')s++;f(x+1,y,k+1);}
	if(y<m and a[x][y+1]=='<'){if(a[x][y]=='#')s++;f(x,y+1,k+1);}
}
int main()
{
	cin>>n>>m;
	for(i=1;i<=n;i++)for(j=1;j<=m;j++)scanf(" %c",&a[i][j]);
	
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			if(a[i][j]=='#')
			{
				f(i,j,0);
			}
	for(i=0;i<=n+1;i++)
		for(j=0;j<=m+1;j++)
		{
			if((!i or i==n+1) xor (!j or j==m+1))
			{
				f(i,j,-1);
			}
		}
	if(t<n*m)cout<<-1<<endl;
	else cout<<max1.st+max2.st<<endl;
}
