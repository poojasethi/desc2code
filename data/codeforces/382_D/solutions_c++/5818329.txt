#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 2010
#define M N*N
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
const int a1[4]={1,-1,0,0},a2[4]={0,0,1,-1};
int i,j,k,n,m,t,an,ma1,ma;
int f[200],ff[M],a[M],next[M],head[M],in[M],dfn[M],low[M],g[M],dep[M];
char p[N][N];
inline void add(int x,int y) {
	a[++t]=y,next[t]=head[x],head[x]=t; in[y]++;
}
inline int C(int x,int y) {
	return m*(x-1)+y;
}
inline void fail() {
	printf("-1\n"); exit(0);
}
void tarjan(int x) {
	int v;
	dfn[x]=low[x]=++t; g[++*g]=x;
	for (v=head[x];v;v=next[v])
	if (!dfn[a[v]]) tarjan(a[v]),low[x]=min(low[x],low[a[v]]);
	else if (!ff[a[v]]) low[x]=min(low[x],dfn[a[v]]);
	if (low[x]==dfn[x]) {
		ff[x]=1; if (g[*g]!=x) fail(); (*g)--;
	}
}
void bfs(int x) {
	int l,r,v;
	g[l=r=1]=x;
	for (;l<=r;l++)
	for (ma1=max(ma1,dep[g[l]]),v=head[g[l]];v;v=next[v])
		g[++r]=a[v],dep[a[v]]=dep[g[l]]+1;
}
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,n) scanf("%s",p[i]+1);
	f['<']=3,f['>']=2,f['v']=0,f['^']=1;
	For(i,1,n)For(j,1,m) if (p[i][j]!='#') {
		k=f[p[i][j]]; dep[C(i,j)]=1;
		int x=i+a1[k],y=j+a2[k];
		if (p[x][y]!='#') add(C(x,y),C(i,j));
	}
	t=0; For(i,1,n*m) if (!dfn[i]) tarjan(i);
	For(i,1,n*m) if (!in[i]) {
		ma1=0,bfs(i);
		an=max(an,max(ma+ma1,ma1+ma1-1));
		ma=max(ma,ma1);
	}
	printf("%d\n",an);
	return 0;
}
