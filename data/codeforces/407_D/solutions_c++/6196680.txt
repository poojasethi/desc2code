#include <cstdio>
#include <cstdlib>
#include <algorithm>
using namespace std;

typedef int arr32[410][410];
typedef int arrct[410 *410];

int n, m, ans, Y;
arr32 a, F, G;
arrct p, t;
int (*f)[410] = F, (*g)[410] = G;

int main()  {
	//freopen("D.in", "r", stdin);
	//freopen("D.out", "w", stdout);

	scanf("%d %d", &n, &m);
	for (int i = 1; i <= n; ++i)  {
		for (int j = 1; j <= m; ++j)
			scanf("%d", a[i] + j);
	}
	for (int j = 1; j <= n; ++j)  {
		for (int k = j; k <= n; ++k)  {
			++Y;
			for (int i = 1; i <= m; ++i)  {
				int &x = f[i][k], u = a[k][i], v = a[k - j + 1][i];
				x = max(1, max(f[i - 1][k], max(g[i][k], g[i][k - 1])));
				if (t[u] == Y)             x = max(x, p[u] + 1);  else  t[u] = Y;  p[u] = i;
				if (j > 1  &&  t[v] == Y)  x = max(x, p[v] + 1);  else  t[v] = Y;  p[v] = i;
				ans = max(ans, j * (i - x + 1));
			}
		}
		swap(f, g);
		}
	printf("%d\n", ans);
}
