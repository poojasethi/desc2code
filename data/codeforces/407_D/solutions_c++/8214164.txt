#include <cstdio>
#include <cstdlib>
using namespace std;

int n,m,ans;
int map[401][401],f[401][401],up[401][160001];

void update(int &a,int b)
{
    if (a<b) a=b;
}

int main()
{
    scanf("%d%d",&n,&m);
    for (int i=1;i<=n;i++)
        for (int j=1;j<=m;j++) scanf("%d",&map[i][j]);
    for (int i=1;i<=n;i++)
    {
        for (int j=1;j<=m;j++)
            for (int k=1;k+j-1<=m;k++)
            {
                if (j==1) update(f[k][k],up[k][map[i][k]]);
                else {
                    update(f[k][k+j-1],f[k][k+j-2]);
                    update(f[k][k+j-1],f[k+1][k+j-1]);
                    update(f[k][k+j-1],up[k][map[i][k+j-1]]);
                    update(f[k][k+j-1],up[k+j-1][map[i][k]]);
                    if (map[i][k]==map[i][k+j-1]) f[k][k+j-1]=i;
                }
                update(ans,(i-f[k][k+j-1])*j);
            }
        for (int j=1;j<=m;j++) up[j][map[i][j]]=i;
    }
    printf("%d\n",ans);
}
