#include<bits/stdc++.h>
#define FOR(a,b,c) for(int a=b;a<=c;a++)
#define max3(a,b,c) max(a,max(b,c))
using namespace std;
int A[405][405],f[405][405];
short int last[160002][403];
int main(){
	
	int m,n,r,ans(0);
	scanf("%d %d",&n,&m);
	FOR(i,1,n)
		FOR(j,1,m)
			scanf("%d",&A[i][j]);

	FOR(i,1,n){
		
		FOR(j,1,m){
			f[j][j] = max(f[j][j] , last[A[i][j]][j]+1);
			last[A[i][j]][j] = i;
			ans = max(ans , i-f[j][j]+1);
		}

		FOR(len,1,m)
			FOR(l,1,m-len)
			{
				r = l+len;
				f[l][r] = max3(f[l][r], f[l+1][r] , f[l][r-1]);
				f[l][r] = max3(f[l][r], last[A[i][r]][l]+1,last[A[i][l]][r]+1);
				ans = max(ans , (i-f[l][r]+1)*(len+1));	
			}
	}

	cout << ans << endl;
	return 0;
}
