#include <iostream>
#include <cstdio>
#include <cstring>
using namespace std;
int n,m;
int data[405][405];
int h[405][160005];
int f[405][405];
int main()
{
    scanf("%d%d",&n,&m);
    for (int i=1;i<=n;i++)
        for (int j=1;j<=m;j++)
            scanf("%d",&data[i][j]);
    int ans=0;
    for (int i=1;i<=n;i++)
    {
        for (int j=1;j<=m;j++)
        {
            f[1][j]=min(f[1][j]+1,i-h[j][data[i][j]]);
            ans=max(ans,f[1][j]);
            h[j][data[i][j]]=i;
        }
        for (int l=2;l<=m;l++)
        {
            for (int j=1;j+l-1<=m;j++)
            {
                f[l][j]=min(f[l][j]+1,min(f[l-1][j],f[l-1][j+1]));
                int t=min(i-h[j][data[i][j+l-1]],i-h[j+l-1][data[i][j]]);
                f[l][j]=min(f[l][j],t);
                ans=max(ans,l*f[l][j]);
            }
        }
    }
    cout<<ans;
    return 0;
}