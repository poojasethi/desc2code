#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
#include <map>
using namespace std;

#define rep(i, n) for (int i = 0; i < n; i ++)

const int N = 400;

int a[N][N], f[N][N];
short hash[N][160001];

int main()
{
	int n, m;
	cin >> n >> m;
	rep(i, n) rep(j, m) cin >> a[i][j];
	
	int ans = 0;
	memset(hash, -1, sizeof(hash));
	
	rep(i, n) 
	{
		rep(len, m) rep(l, m - len)
		{
			int r = l + len;
			if (len) f[l][r] = max(f[l][r], max(f[l][r - 1], f[l + 1][r]));
			f[l][r] = max(f[l][r], max(hash[l][ a[i][r] ], hash[r][ a[i][l] ]) + 1);
			if (len && a[i][l] == a[i][r]) f[l][r] = i + 1;
			ans = max(ans, (r - l + 1) * (i - f[l][r] + 1));
		}
		rep(j, m) hash[j][ a[i][j] ] = i;
	}
	
	cout << ans << endl;
	
	return 0;
}



