#include<cstdio>
#include<iostream>
using namespace std;
typedef int w;
typedef long long l;
const w N=402;
short gan[N][N*N];
w a[N][N],n,m,d[N][N],f[N][N],res=0;
w nen[1000001];
w cnt=0;
w has[1000001];

int main(){
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;++i) for(int j=1;j<=m;++j){ scanf("%d",&a[i][j]); if(has[a[i][j]]) a[i][j]=has[a[i][j]]; else{ has[a[i][j]]=++cnt; a[i][j]=has[a[i][j]];}}
    for(int i=1;i<=m;++i){
        for(int le=n;le>=1;--le){
            for(int ri=le;ri<=n;++ri){
                f[le][ri]=max((w)max(gan[le][a[ri][i]],gan[ri][a[le][i]]),max(f[le][ri-1],f[le+1][ri]));
                if(le!=ri and a[le][i]==a[ri][i]) f[le][ri]=i;
                d[le][ri]=max(d[le][ri],f[le][ri]);
                res=max(res,(i-d[le][ri])*(ri-le+1));
            }
        }
        for(int j=1;j<=n;++j) gan[j][a[j][i]]=i;
    }
    printf("%d",res);
}
