#include <iostream>
#include <cstdlib>
#include <cstring>
#include <string>
#include <vector>
#include <utility>
#include <algorithm>
#include <cmath>
#define MAXN 405
#define MAXA 160005

using namespace std;

int n,m,a[MAXN][MAXN],ans;
short up[MAXN][MAXN],prev[MAXN][MAXA];

int main() {
	cin >> n >> m;
	for (int i = 1; i <= n; i++)
		for (int j = 1; j <= m; j++) cin >> a[i][j];
	for (int i = 1; i <= n; i++) {
		for (int j = 1; j <= m; j++) {
			up[j][j] = max(up[j][j],prev[j][a[i][j]]);
			ans = max(ans, i-up[j][j]);
		}
		for (int j = 1; j <= m; j++) prev[j][a[i][j]] = i;
		for (int r = 1; r <= m; r++) {
			for (int l = r-1; l > 0; l--) {
				up[l][r] = max(up[l][r],
						   max(up[l+1][r],
						   max(up[l][r-1],
						   max(prev[r][a[i][l]], prev[l][a[i][r]]))));  
				ans = max(ans, (i - up[l][r]) * (r - l + 1));
			}
		}
	}
	cout << ans << '\n';
}