#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <vector>
#include <ctime>
#define fi first
#define se second
#define PA pair<int,int>
#define VI vector<int>
#define VP vector<PA >
#define mk(x,y) make_pair(x,y)
#define N 401
#define M N*N
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an;
int a[N][N];
short f[N][N][N],b[N][M];
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,n)For(j,1,m) scanf("%d",&a[i][j]);
	For(i,1,n) {
		For(j,1,m) f[i][j][j]=max(f[i][j][j],b[j][a[i][j]]);
		For(j,1,m) b[j][a[i][j]]=i;
		For(j,1,m)For(k,j+1,m)
			f[i][j][k]=max(f[i][j][k],max(b[k][a[i][j]],b[j][a[i][k]]));
		For(j,1,m)For(k,1,m-j)
			f[i][k][j+k]=max(f[i][k][j+k],max(f[i][k][j+k-1],f[i][k+1][j+k]));
	}
	For(j,1,m)For(k,j,m) {
		short qian=0;
		For(i,1,n) {
			qian=max(qian,f[i][j][k]);
			an=max(an,(k-j+1)*(i-qian));
		}
	}
	printf("%d\n",an);
	return 0;
}
