#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cmath>
#include<cstring>
using namespace std;
#define N 410
#define M N*N
int a[N][N],f[N][N],ans,n,m;
unsigned short g[N][M];
int main(){
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++)
      for(int j=1;j<=m;j++)scanf("%d",&a[i][j]);
    for(int i=1;i<=n;i++){
      for(int l=m;l;l--)
        for(int r=l;r<=m;r++){
          if(l==r)f[l][r]=max(f[l][r],(int)g[l][a[i][l]]);
          else{
               f[l][r]=max(f[l][r],max(f[l][r-1],f[l+1][r]));
               f[l][r]=max(f[l][r],(int)max(g[l][a[i][r]],g[r][a[i][l]]));
               if(a[i][l]==a[i][r])f[l][r]=i;
               }
          ans=max(ans,(i-f[l][r])*(r-l+1));
          }
      for(int j=1;j<=m;j++)g[j][a[i][j]]=i;
    }
    cout<<ans<<endl;
    return 0;
} 
