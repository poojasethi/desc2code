#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

int n, m;
int a[410][410];

unsigned short h[410][410];
unsigned short f[410][410];
unsigned short g[410][160010];

int ans;

int main()
{
//    freopen("D.in", "r", stdin);
//    freopen("D.out", "w", stdout);

    scanf("%d%d", &n, &m);
    for (int i = 1; i <= n; ++i)
	for (int j = 1; j <= m; ++j)
	    scanf("%d", &a[i][j]);

    for (int i = 1; i <= n; ++i) 
    {
	for (int l = m; l; --l)
	    for (int r = l; r <= m; ++r)
	    {
		if (l == r) f[l][r] = g[l][a[i][l]];
		else 
		{
		    f[l][r] = max(f[l + 1][r], f[l][r - 1]);
		    f[l][r] = max(f[l][r], g[r][a[i][l]]);
		    f[l][r] = max(f[l][r], g[l][a[i][r]]);
		    if (a[i][l] == a[i][r]) f[l][r] = i;
		}
		h[l][r] = max(h[l][r], f[l][r]);
		ans = max(ans, (r - l + 1) * (i - h[l][r]));
	    }
	for (int j = 1; j <= m; ++j) g[j][a[i][j]] = i;
    }
    printf("%d\n", ans);
    return 0;
}
