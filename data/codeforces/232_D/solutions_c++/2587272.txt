#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>

using namespace std;
const int nn=400000;
struct stst{
int x,y,z;
bool operator<(const stst&s)const{return x<s.x;}
}od[nn],q[nn];

int tax[nn],rank[nn],tmp[nn],sa[nn],tr[nn],dd[nn],ans[nn],h[nn],st[nn][19],oo[nn],ww[nn],fir[nn],ne[nn];
int tot,hh,ll,rr,x,y,l,n,m,i,j,k,o,b,num;
void sor(int u)
{
	int i;
	for(i=1;i<=l;i++) tax[i]=0;
	for(i=1;i<=l;i++) tax[rank[sa[i]+u]]++;
	for(i=1;i<=l;i++) tax[i]+=tax[i-1];
	for(i=l;i>=1;i--)
	tmp[tax[rank[sa[i]+u]]]=sa[i],tax[rank[sa[i]+u]]--;
	for(i=1;i<=l;i++)
	sa[i]=tmp[i];
}
void jia(int x){for(;x<=n;x+=x&-x) tr[x]++;}
int ge(int x){int tt=0; for(;x>0;x-=x&-x) tt+=tr[x]; return(tt);}
int main()
{
//	freopen("1.in","r",stdin);
//	freopen("1.out","w",stdout);
	scanf("%d",&n);
	for(i=1;i<=n;i++)
	scanf("%d",&dd[i]);
	od[n].x=-829; od[n+n].x=-1995;
	for(i=1;i<=n-1;i++) od[i].x=dd[i]-dd[i+1],od[n+i].x=-od[i].x;
	for(i=1;i<=2*n;i++) od[i].y=i,oo[i]=od[i].x;
	l=n+n;
	sort(od+1,od+l+1);
	rank[od[1].y]=1;
	num=1;
	for (i=2;i<=l;i++)
	if (od[i].x==od[i-1].x)
		rank[od[i].y]=num;
	else
		num++,rank[od[i].y]=num;
		
	for(i=1;i<=l;i++)sa[i]=i;
	i=0;
	for(int orzcp=1;orzcp;)
	{
		o=1 << i;
		sor(o);
		sor(0);
		tmp[sa[1]]=1;
		for(j=2;j<=l;j++)
		{
			tmp[sa[j]]=tmp[sa[j-1]];
			if (rank[sa[j]]!=rank[sa[j-1]]||rank[sa[j]+o]!=rank[sa[j-1]+o])tmp[sa[j]]++;
		}
		for(int ii=1;ii<=l;ii++)
		rank[ii]=tmp[ii];
		if (rank[sa[l]]==l)
		break; 
		i++;	
	} 
	for(i=1;i<=l;i++)
	if (rank[i]!=l)
	{
		o=rank[i];
		b=sa[o+1];
		for(;oo[i+h[o]]==oo[b+h[o]];h[o]++)
		h[rank[i+1]]=max(h[o]-1,0);
	}
	//for(i=1;i<=l-1;i++)
//	cout<<h[i]<<endl;
	for(i=1;i<l;i++) st[i][0]=h[i];
	for(i=1;i<=17;i++)
		for(j=1;j<=l-(1 << i);j++)
		st[j][i]=min(st[j][i-1],st[j+(1 << (i-1))][i-1]);
	//for(i=1;i<=n+n;i++)
	//cout<<rank[i]<<endl;
	scanf("%d",&m);
	for(i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		if (x==y)
		ans[i]=n-1;
		else 
		{
			hh=y-x; ll=rr=rank[n+x];
			for(j=18;j>=0;j--)
			{
				if(ll+1>=(1<<j)&&st[ll-(1<<j)][j]>=hh) ll-=(1<<j);
				if (st[rr][j]>=hh)   rr+=(1<<j);
			}
			//cout<<ll<<' '<<rr<<endl;
			q[++tot].x=x-hh;q[tot].y=y;q[tot].z=i;
			ww[tot]=-1; ne[tot]=fir[ll-1]; fir[ll-1]=tot;
			q[++tot].x=x-hh;q[tot].y=y;q[tot].z=i;
			ww[tot]=1; ne[tot]=fir[rr]; fir[rr]=tot;
		}
	}
	for(i=1;i<=l;i++)
	{
	//	cout<<sa[i]<<endl;
		jia(sa[i]);
		for(int tt=fir[i];tt;tt=ne[tt])
		ans[q[tt].z]+=(ge(q[tt].x-1)-ge(q[tt].y)+ge(n))*ww[tt];
	//	cout<<"    "<<q[tt].x<<' '<<q[tt].y<<endl;
		//	cout<<endl;
	}
	for(i=1;i<=m;i++)
	printf("%d\n",ans[i]);
}