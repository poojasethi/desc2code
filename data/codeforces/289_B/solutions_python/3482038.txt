##import bisect
n, m, d = map(int, raw_input().split())
a = []
for _ in xrange(n):
    a += map(int, raw_input().split())
a.sort()

target = a[len(a)/2]

steps = 0
for i in a:
    if (i - target) % d == 0:
        steps += abs(i - target)/d
    else:
        print -1
        break
else:
    print steps

