n,m,d=map(int,raw_input().split())
l=[]
ans=0
for i in xrange(n):
    l.extend(map(int, raw_input().split()))
l.sort()
chk=l[len(l)/2]
ans=0
for i in l:
    e=abs(i-chk)
    if e%d:
        print -1
        exit()
    ans+=abs(i-chk)/d
print ans