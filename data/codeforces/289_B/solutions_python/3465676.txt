import sys
from itertools import chain
n,m,d=map(int,raw_input().split())
nums=list(chain(*(map(int,raw_input().split()) for _ in xrange(n))))
nums.sort()
mi=nums[len(nums)/2]
ans=0
for x in nums:
    if abs(x-mi)%d==0:
        ans+=(abs(x-mi))/d
    else:
        print -1
        sys.exit(0)
print ans
