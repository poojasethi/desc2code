a, b, d = map(int, raw_input().split())

elements = []

for i in range(a):
    row = map(int, raw_input().split())
    elements += row

elements.sort()

number = len(elements)

middle = elements[number//2]

result = 0

for i in range(number):
    if abs(middle - elements[i])%d != 0:
        print -1
        exit()
    else:
        result += abs(middle - elements[i])//d

print result
