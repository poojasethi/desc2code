import numpy as np
[n, m, d] = map(int, raw_input().split())
values = []
for i in xrange(n):
	map(values.append, map(int, raw_input().split()))
l = len(values)

cur = values[0] % d
nums = [values[0] / d]
for i in xrange(1, l):
	if values[i] % d != cur:
		print -1
		exit(0)
	nums.append(values[i]/d)

nums.sort()

print sum([abs(nums[i] - nums[l/2]) for i in xrange(l)])
