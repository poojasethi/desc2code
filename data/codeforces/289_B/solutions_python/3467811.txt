cin = lambda: map(int, raw_input().split())
n,m,d = cin()
a = []
for i in range(n):
    a += cin()
a.sort()
mina = a[0]
for i in range(len(a)):
    a[i] -= mina
    if a[i]%d != 0:
        print -1
        exit()
    a[i] /= d
print sum(abs(i-a[len(a)/2]) for i in a)
