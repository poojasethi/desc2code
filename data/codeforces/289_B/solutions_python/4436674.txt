n,m,d = map(int, raw_input().split())

elem = []
for i in range(n):
  elem += map(int, raw_input().split())

remainders = [e%d for e in elem]
if remainders != [remainders[0]] * n * m:
  print -1
else:
  elem.sort()
  median = ((elem[n*m/2] + elem[(n*m-1)/2])/2 if n*m%2 == 1 else elem[(n*m-1)/2])
  print sum([abs(e - median)/d for e in elem])
