n,m,d = tuple(map(int,raw_input().split(" ")))
data = []
for i in range(0,n):
    data += list(map(int,raw_input().split(" ")))


tmp = data[0]%d
flag = True
for i, item in enumerate(data):
    if tmp != item%d:
        flag = False
if flag:
    data.sort()
    mid = data[int(len(data)/2)]
    ans = 0
    for i, item in enumerate(data):
        ans += max((item-mid)/d, (-1)*(item-mid)/d)
    print ans
else:
    print '-1'