
r = lambda:map(int, raw_input().split());
n, m, d = r();
a = [];
for i in range(n): 
    a += r();
x = a[0] % d;
ans = [];
for i in a:
    if i % d != x:
        print -1;
        exit()
    ans += [(i-x) / d];
ans.sort();
print sum(abs(i-ans[len(ans)/2]) for i in ans)
