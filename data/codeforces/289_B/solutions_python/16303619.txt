R = lambda : map(int, raw_input().split())
n,m,d = R()
A = []
for i in range(n):
    A.extend(R())
A.sort()
median = A[((n*m)/2)]
count = 0
for e in A:
    if e % d != A[0] % d:
        print -1
        exit()
    count += abs((e - median))/d

print count