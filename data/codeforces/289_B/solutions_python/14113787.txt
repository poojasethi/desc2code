n,m,d=raw_input().split()
n=int(n)
m=int(m)
d=int(d)
L=[]
for x in xrange(n):
    for y in raw_input().split():
        L.append(int(y))
    
L.sort()    
least=min(L)
for j in xrange(len(L)):
    L[j]=L[j]-least

if not all([k%d==0 for k in L]):
    print -1
else:
    pivot=len(L)/2
    value=L[pivot]
    count=0
    for item in L:
        count+=abs((item-value)/d)
    print count
