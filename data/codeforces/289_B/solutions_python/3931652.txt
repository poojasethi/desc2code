n, m, d = map(int, raw_input().split() )
num = []
for i in xrange(n):
        num += map(int, raw_input().split() )
x = num[0]%d
v = []
for i in num:
        if i%d != x:
                print -1; exit()
        v += [ (i-x)/d ]
v.sort(); Len = n*m/2
print sum( abs(_-v[Len ]  ) for _ in v )
