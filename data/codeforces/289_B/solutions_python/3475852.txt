n, m, d = map(int, raw_input().split())

matrix = []
for i in range(0, n):
     
    matrix += map(int, raw_input().split())

s = min(matrix)
matrix1 = [i for i in range(s, max(matrix)+1, d)]
ok = 1

for i in matrix:
    if i not in matrix1:
        ok = 0
        break

if ok == 0:
    print -1
else:
    matrix.sort()
    mid = matrix[len(matrix)/2]
    result = 0
    for i in matrix:
        result += abs(mid-i) / d

    print result
