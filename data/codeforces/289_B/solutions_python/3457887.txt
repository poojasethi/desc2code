import sys
import math

a = []
b = []
n,m,d = map(int,raw_input().split())
for i in range(n):
	a.append(map(int,raw_input().split()))
if d != 1:
	mod = a[0][0]%d
	for i in range(n):
		for j in range(m):
			if a[i][j]%d != mod:
				print "-1"
				sys.exit()
			else:
				b.append((a[i][j]- mod)/d)
else:
	for i in range(n):
		for j in range(m):
			b.append(a[i][j])	
b.sort()
med = b[int(len(b)/2)]
res = 0
#print med
for i in range(len(b)):
	res += abs(b[i]-med)
print res
	
