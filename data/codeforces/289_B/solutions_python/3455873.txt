n,m,d=map(int,raw_input().split())
matrix=[]
for i in xrange(n):
	matrix.append(map(int,raw_input().split()))

f=matrix[0][0]
lst=[]
for line in matrix:
	for num in line:
		if (num-f)%d!=0:
			print -1
			exit(0)
		else:
			lst.append(num)
lst.sort()
mid=lst[len(lst)/2]

s=0
for line in matrix:
	for num in line:
		s+=abs(num-mid)/d

print s

