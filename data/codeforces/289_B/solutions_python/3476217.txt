import sys
br = sys.stdin
n, m, d = map(int, br.readline().split()) 
a = []
for i in range(n):
  a += map(int, br.readline().split())
if any((x - a[0]) % d for x in a):
  print -1
else:
  k = sorted(a)[len(a) / 2]
  print sum(abs(x - k) / d for x in a)
