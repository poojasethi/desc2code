n,m,d = map(int,raw_input().split())
arr = [map(int,raw_input().split()) for _ in xrange(n)]
f = sorted([elem for row in arr for elem in row])
if len(set([x%d for x in f])) > 1:
    print -1
    exit(0)
m = f[n*m/2]
print sum([abs(x-m)/d for x in f])