n, m, d = map(int, raw_input().split())
a = []
for _ in range(n):
	a.extend(map(int, raw_input().split()))
if any((x - a[0]) % d for x in a):
	print -1
else:
	b = sorted(a)[n * m / 2]
	print sum(abs(x - b) / d for x in a)