para = raw_input().split()
n = int(para[0])
m = int(para[1])
d = int(para[2])

array = []

for i in range(n):
    row = raw_input().split()
    for j in range(m):
        array.append(int(row[j]))

array.sort()
middle = array[len(array) / 2]
move = 0
flag = True
for i in range(len(array)):
    gap = max(array[i], middle) - min(array[i], middle)
    if not (gap % d == 0):
        flag = False
        break
    move += gap / d

if flag:
    print move
else:
    print -1
    
