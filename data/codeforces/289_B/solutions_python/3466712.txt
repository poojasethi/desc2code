'''
Created on 02.04.2013

@author: Temon
'''
import sys
n, m, d = raw_input().split()

n=int(n)
m=int(m)
d=float(d)

numb=0
matr=[]
summ=0

for i in range(n):
    stroka = map(float, raw_input().split())
    matr += stroka

matr.sort()

sr = matr[len(matr)//2]

for item in matr:
    kol = (sr-item)/d
    if kol != int(kol):
        print -1
        sys.exit(0)
    numb +=abs(kol)

print int(numb)