n, m, d = map(int, raw_input().split())
g = []
for _ in range(n):
    g += map(int, raw_input().split())

if any((abs(x - g[0]) % d != 0) for x in g):
    print -1
else:
    b = sorted(g)[n * m / 2]
    print sum(abs(b - x) / d for x in g)