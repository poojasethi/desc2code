import sys
N,M,D = map(int,raw_input().split())
Lst=[]
for i in range(N):
    X = []
    tmp=raw_input().split()
    X=[int(x) for x in tmp]
    Lst.append(X)
#print Lst
Ls = [x for LL in Lst for x in LL]
Ls.sort()
init = Ls[0]%D

for i in Ls:
    if i%D != init:
        print -1
        sys.exit()
        
med = Ls[len(Ls)/2]
op = 0
for i in Ls:
    op += int(abs(i-med)/D)
print op

        

