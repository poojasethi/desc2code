import sys

n, m, d = map(int, raw_input().split())
list = []
for i in xrange(n):
    for integer in map(int, raw_input().split()):
        list.append(integer)

# find median of list
list = sorted(list)
len_list = len(list)
median = list[int(len_list)/2]

# check if solution is possible
for integer in list:
    if (integer - list[0]) % d != 0:
        print -1
        sys.exit(0)
        
# solution is possible
solution = 0
for integer in list:
    solution += abs((integer - median) / d)

print solution