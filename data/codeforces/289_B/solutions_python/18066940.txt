def main():
	n, m, d = map(int, raw_input().split())
	a = []
	for i in xrange(n):
		row = map(int, raw_input().split())
		for x in row: a.append(x)
	minEle = min(a)
	for i, x in enumerate(a):
		if (x - minEle) % d != 0:
			print -1
			return
		a[i] = (a[i] - minEle) / d
	a.sort()
	dp = [a[0]]
	for i in xrange(1, n * m): dp.append(dp[-1] + a[i])
	ans = min(dp[n * m - 1] - 2 * dp[i] - (n * m - 2 * i - 2) * a[i] for i in xrange(n * m))
	print ans
 
if __name__ == "__main__": main()