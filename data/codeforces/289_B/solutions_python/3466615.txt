R=lambda x:map(int,raw_input().split())
n,m,d=R(0)
a=sorted(reduce(lambda x,y:x+y,map(R,range(n))))
k,x=n*m,a[0]
for i in range(n*m):
  a[i]-=x
  if a[i]%d:
    print -1
    exit()
  else:
    a[i]/=d
F=lambda v:sum(abs(x-v) for x in a)
f=F(a[k/2])
if (k+1)%2:f=min(f,F(a[k/2-1]))
print f
