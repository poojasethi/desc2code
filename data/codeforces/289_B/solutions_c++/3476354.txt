#include <iostream>
#include <algorithm>
#include <cmath>
using namespace std;
int a[10010];
int main(){
int n, m, i, d, sum=0;
cin>>n>>m>>d;
n*=m;
for (i=0; i<n; ++i)
cin>>a[i];
for (i=1; i<n; ++i)
a[i]-=a[0];
for (i=1; i<n; ++i)
{
    if (a[i]%d) {cout<<-1; return 0;}
    else a[i]/=d;
}
a[0]=0;
sort(a, a+n);
for (i=0; i<n; ++i)
sum+=abs(a[n/2]-a[i]);
cout<<sum;
return 0;
}