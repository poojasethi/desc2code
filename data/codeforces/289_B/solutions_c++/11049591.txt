#include<bits/stdc++.h>
using namespace std;
int arr[10009];
int main()
{
    int n,m,d,x,c=0,c1=0,dev,x1;cin>>n>>m>>d;for(int i=0;i<n*m;i++){cin>>arr[i];if(!i)dev=arr[0]%d;if(i)if(arr[i]%d!=dev){cout<<-1;return 0;}}sort(arr,arr+(n*m));x=arr[(n*m/2)-1];x1=arr[(n*m)/2];
    for(int i=n*m-1;i>=0;i--){if(arr[i]!=x)c+=abs(arr[i]-x)/d;if(arr[i]!=x1)c1+=abs(arr[i]-x1)/d;}cout<<min(c,c1);
}
