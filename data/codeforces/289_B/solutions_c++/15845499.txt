#include <bits/stdc++.h>
int a[100000];
using namespace std;
int main(){
    int k=0,i,j,n,m,d,c,p,r,mi;
    long long s1=0,s2=0;
    cin>>n>>m>>d;
    cin>>a[1];
    for (i=2; i<=n*m; i++){
        cin>>a[i]; if (a[i]%d!=a[i-1]%d) {cout<<-1; return 0;}}
    sort(a,a+n*m+1); 
    p=a[(m*n/2)+1];
    for (i=1; i<=n*m; i++) s2+=abs(p-a[i])/d;
    cout<<s2;
return 0;
}