#include<bits/stdc++.h>
using namespace std;

int n,m,cnt,x,d,a[10005];

int main(int argc, char **argv) {
#ifndef ONLINE_JUDGE
	freopen("input.in","r",stdin);
#endif
	scanf("%d%d%d",&n,&m,&d);
	x = n*m;
	for(int i = 0; i<x; ++i)
		scanf("%d",a+i);
	sort(a,a+x);
	for(int i = 0; i<x; ++i)
		if(abs(a[i]-a[x/2])%d)
			return puts("-1"),0;
		else cnt += abs(a[i]-a[x/2])/d;
	printf("%d",cnt);
	return 0;
}
