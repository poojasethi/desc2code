#include <cstdio>
#include <iostream>
#include <cstdlib>
#include <algorithm>
using namespace std;
int main (){
	int n,m,d,a[10005],i,r,ans=0;
	scanf ("%d %d %d",&n,&m,&d);
	n=n*m;
	for (i=1;i<=n;i++){
		scanf ("%d",&a[i]);
		if (i==1) r=a[i]%d;
		else if (a[i]%d!=r){printf ("-1\n");return 0;}
	}
	sort(a+1,a+n+1);
	r=a[n/2+1];
	for (i=1;i<=n;i++) ans=ans+abs(a[i]-r)/d;
	printf ("%d\n",ans);
	return 0;
}