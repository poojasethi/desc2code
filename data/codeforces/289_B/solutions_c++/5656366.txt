#include <iostream>
#include <algorithm>
using namespace std;
int a[100000];
int main ()
{
	long long n,m,d,ans=0;
	cin>>n>>m>>d;
	n*=m;
	cin>>a[0];
	for (int i=1;i<n;i++)
	{
		cin>>a[i];
		if (a[i]%d!=a[0]%d)
		{
			cout<<-1;
			return 0;
		}
	}
	sort(a,a+n);
	long long t=a[n/2];
	for (int i=0;i<n;i++)
	{
		ans+=abs(a[i]-t);
	}
	cout<<ans/d;
	return 0;
}