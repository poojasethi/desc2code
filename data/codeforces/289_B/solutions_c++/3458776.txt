#include<cstdio>
#include<algorithm>
using namespace std;
int ar[10001];
int main() {
    int n,m,d,i,j,N,ans=0,x;
    scanf("%d%d%d",&n,&m,&d);
    N=n*m;
    for(i=0;i<N;i++) scanf("%d",&ar[i]);
    sort(ar,ar+N);
    j=N/2;
    for(i=0;i<N;i++) {
        x=i<j?ar[j]-ar[i]:ar[i]-ar[j];
        if(x%d) {
            ans=-1;
            break;
        }
        ans+=x/d;
    }
    printf("%d",ans);
}