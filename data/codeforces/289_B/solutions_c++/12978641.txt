#include "iostream"
#include <algorithm>
using namespace std;
int main(){
int a[10001],n,m,d,i,c=0;cin >>n>>m>>d;n*=m;for(i=0;i<n;i++)cin>>a[i];m=n/2;sort(a,a+n);
	for (i = 0; i <n; i++){
		while (a[i] < a[m]){ a[i] += d; c++; }
		while (a[i] > a[m]){ a[i] -= d; c++; }
		if (a[i] != a[m]){ cout << "-1"; return 0; }
	}
	cout << c;
}