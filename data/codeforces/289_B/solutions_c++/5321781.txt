#include <iostream>
#include <algorithm>
using namespace std;
int main()
{int n,m,d; cin>>n>>m>>d;
n*=m;
int a[10005];
cin>>a[0];
int r=a[0]%d;
for (int i=1;i<n;i++)
 {cin>>a[i]; if (a[i]%d!=r) {cout<<-1; return 0;}}
sort(a,a+n);
long long ans=0;
for (int i=0;i<n;i++) ans+=abs(a[i]-a[n/2])/d;
cout<<ans<<endl;
return 0;
}