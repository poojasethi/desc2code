#include<stdio.h>
#include<algorithm>
#include<cmath>
using namespace std;
int main()
{
int fl=0,a[10004],key,n,m,d,i,j,k,mid,l,r;
scanf("%d%d%d",&n,&m,&d);
n=n*m;
for(i=0;i<n;i++)
scanf("%d",&a[i]);
sort(a,a+n);
mid=n/2;
key=a[mid];
int cn=0;
for(i=0;i<n;i++)
{
if(i==mid)
continue;
k=abs(key-a[i]);
if(k%d!=0)
{
fl=1;
break;
}
else
cn+=k/d;
}
if(fl==1)
printf("-1\n");
else printf("%d\n",cn);
return(0);
}
