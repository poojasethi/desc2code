#include<iostream>
#include<algorithm>
using namespace std;
int a[10100], n, m, k, t, res,mid, r;
int main()
{
	cin >> n >> m >> k;
	t= n * m;
	cin >> a[0];
	r = a[0] % k;
	for(int i = 1; i < t; i++)
	{
		cin >> a[i];
		if(a[i] % k != r)
		{
			cout<<-1;
			return 0;
		}
	}
	sort(a,a + t);
	mid = a[t/2];
	for(int i=0; i<t; i++)
		res += (max(a[i] - mid, mid - a[i]) / k);
	cout << res;
	return 0;
}
