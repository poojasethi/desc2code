#include<iostream>
#include<string>
#include<algorithm>
using namespace std;

long long s,h,k,mid,i,j,n,m,i1,j1,d,a,b[10000];

int main(){
	cin>>n>>m>>d;
	for(i=0;i<n;i++)for(j=0;j<m;j++){
		cin>>a;
		b[k]=a;
		if(k==0)h=a%d;else if((a%d)!=h){
			cout<<"-1";
			return 0;	
		}
		k++;		
	}
	sort(b,b+k);
	mid=k/2;
	for(i=0;i<k;i++)if(k!=mid)s+=abs(b[i]-b[mid])/d;
	cout<<s<<"\n";
}