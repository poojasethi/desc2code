#include<stdio.h>
#define MAX 100001
int a[MAX],h[MAX][450],hash[MAX],b[450],_b[450],bc=0;
int main()
{
    int i,j,l,r,n,m;
    scanf("%d%d",&n,&m);
    for(i=1;i<=n;i++)
    {
        scanf("%d",a+i);
        if(a[i]<=n) hash[a[i]]++;
    }
    for(i=1;i<=n;i++) if(hash[i]>=i) _b[i]=bc,b[bc++]=i;
    for(i=1;i<=n;i++)
    {
        for(j=0;j<bc;j++) h[i][j]=h[i-1][j];
        if(a[i]<=n&&hash[a[i]]>=a[i]) h[i][_b[a[i]]]++;
    }
    while(m--)
    {
        scanf("%d%d",&l,&r);
        j=0;
        for(i=0;i<bc;i++) if(h[r][i]-h[l-1][i]==b[i]) j++;
        printf("%d\n",j);
    }
 }
