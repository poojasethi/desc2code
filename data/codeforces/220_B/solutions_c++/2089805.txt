//By momo
#include<cstdio>
#define N 100010
int x[N], c[N]; bool pss[N];
int d[600][N], inv[600];
int main(){
	int n, m;
	scanf("%d%d", &n, &m);
	for(int i = 1; i <= n; i++){
		scanf("%d", &x[i]);
		if(x[i] <= n && ++c[x[i]] == x[i]) pss[x[i]] = 1;
	}
	int cnt = 0;
	for(int i = 1; i <= n; i++){
		if(!pss[i]) continue;
		for(int j = 1; j <= n; j++) d[cnt][j] = d[cnt][j-1]+(x[j] == i);
		inv[cnt++] = i;
	}
	while(m--){
		int l, r, ans = 0;
		scanf("%d%d", &l, &r);
		for(int i = 0; i < cnt; i++) if(d[i][r]-d[i][l-1] == inv[i]) ans++;
		printf("%d\n", ans);
	}
}
