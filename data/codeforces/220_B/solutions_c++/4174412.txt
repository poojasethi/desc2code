#include<stdio.h>
long a[100001],i,j,k,n,q,d[450][100001],l[450],c,h[100001],x,y;
int main()
{
 scanf("%ld %ld",&n,&q);
 for(i=1;i<=n;i++)
    scanf("%ld",&a[i]);
 for(i=1;i<=n;i++)
    if(a[i]<=n)
        h[a[i]]++;
 for(i=1;i<=n;i++)
    if(h[i]>=i)
    {
     l[c]=i;
     c++;
    }
 for(i=0;i<c;i++)
 {
  k=l[i];
  for(j=1;j<=n;j++)
  {
    d[i][j]=d[i][j-1];
    if(a[j]==k)
      d[i][j]++;
  }
  }
 for(i=0;i<q;i++)
 {
  scanf("%ld %ld",&x,&y);
  k=0;
  for(j=0;j<c;j++)
    if(d[j][y]-d[j][x-1]==l[j])
        k++;
  printf("%ld\n",k);
 }
}
