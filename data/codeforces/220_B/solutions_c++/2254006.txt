#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>

using namespace std;

const int maxn = 100100;

int a[maxn];
int CNT[maxn], NUM[555], C_NUM;
int SUM[maxn][555];
int main()
{
	int n, m;
	cin>>n>>m;
	for(int i=1;i<=n;++i)	
	{
		cin >> a[i];
		if(a[i] <= n){
			CNT[a[i]]++;
		}
	}
	for(int i=1;i<=n;++i)if(CNT[i]>=i)
	{
		NUM[++C_NUM] = i;
	}
	for(int i=1;i<=n;++i)for(int j=1;j<=C_NUM;++j){
		SUM[i][j] = SUM[i-1][j];
		if(NUM[j] == a[i])	SUM[i][j] ++;
	}
	while(m --){
		int l, r;
		cin>>l>>r;
		int ans = 0;
		for(int i=1;i<=C_NUM;++i)if(NUM[i]==SUM[r][i]-SUM[l-1][i])
			ans++;
		cout<<ans<<endl;
	}
	return 0;
}
