#include <cstdio>
#include <algorithm> 
using namespace std;

int n , m , cnt[100001] , x[100001] , y[100001] , f[640][100001] , l , r , ans , top;

int main()
{
   scanf("%d%d",&n,&m) ; 
   for(int i=1 ; i<=n  && scanf("%d",&x[i]) ; i++) if(x[i]<=n) cnt[x[i]]++ ;   
   for(int i=1 ; i<=n ; i++) if((1ll*i*i)<=(1ll*n) || cnt[i]>=i )  
   {
      y[++top]=i ;
      for(int j=1 ; j<=n ; j++) f[top][j]=f[top][j-1]+(x[j]==i) ;   
   }
 
   for(int i=1 ; i<=m  && scanf("%d%d",&l,&r) ; ans=0,i++) 
   {
      for(int j=1 ; j<=top ; j++) if(f[j][r]-f[j][l-1]==y[j]) ans++ ;
      printf("%d ",ans) ;
   } 
   
 return 0;
}