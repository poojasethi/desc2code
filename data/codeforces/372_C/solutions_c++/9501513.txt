#include<cstdio>
#include<cstring>
#include<iostream>
#include<algorithm>
#define N 200100
using namespace std;
typedef long long LL;
LL f[2][N], ans = -999999999999999;
int q[N], i, cur, n, m, d, la;
int main()
{
	scanf("%d%d%d", &n, &m, &d);
	while (m--)
	{
		cur ^= 1;
		int l = 1, r = 0, a, b, t, dis;
		scanf("%d%d%d", &a, &b, &t);
		dis = min(1LL * d * (t - la), 1LL * n);
		for (i = 1; i <= dis; i++)
		{	
			while (r >= l && f[cur ^ 1][q[r]] <= f[cur ^ 1][i]) --r;
			q[++r] = i;
		}
		for (i = 1; i <= n; i++)
		{
			int k = dis + i;
			if (k <= n)
			{
				while (r >= l && f[cur ^ 1][q[r]] <= f[cur ^ 1][k]) --r;
				q[++r] = k;
			}
			while (r >= l && abs(i - q[l]) > dis) l++;
			f[cur][i] = f[cur ^ 1][q[l]] + 1LL * (b - abs(a - i));
		}
		la = t;
	}
	for (i = 1; i <= n; i++)
		ans = max(ans, f[cur][i]);
	printf("%I64d\n", ans);
    return 0;
}