#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
#define rep(i,n) for (int i=1;i<=n;++i)
typedef long long ll;
int n,m,d,a,b,h,t,last,now,q[150005]; ll F[150005],G[150005],*f=F,*g=G,D,ans;
int main()
{
    scanf("%d%d%d",&n,&m,&d);
    rep(i,m){
        scanf("%d%d%d",&a,&b,&now),D=1LL*d*(now-last),last=now;
        h=1,t=0;
        rep(i,n){
            while (t>=h && f[i]>f[q[t]]) --t; q[++t]=i;
            while (t>=h && i-q[h]>D) ++h; g[i]=f[q[h]];
        }
        h=1,t=0;
        for (int i=n;i;--i){
            while (t>=h && f[i]>f[q[t]]) --t; q[++t]=i;
            while (t>=h && q[h]-i>D) ++h; g[i]=max(f[q[h]],g[i]);
        }
        swap(f,g);
        rep(i,n) f[i]+=b-abs(a-i);
    }
    ans=f[1]; rep(i,n) ans=max(ans,f[i]); printf("%I64d\n",ans); return 0;
}