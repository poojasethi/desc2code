//In the name of God
#include <algorithm>
#include <iostream>
#include <deque>
using namespace std;
typedef pair<int, int> pii;
const int N = 15e4 + 5;

int n, m, tim[N], dp[2][N];
long long ans, d;

int main() {
	ios_base::sync_with_stdio(false);
	cin >> n >> m >> d;
	for (int i = 1; i <= m; i++) {
		int a, b;
		cin >> a >> b >> tim[i]; a--;
		ans += b;
		int x = min(1ll * n + 1, d * (tim[i] - tim[i - 1]));
		deque<pii> q;
		for (int j = 0, pt = 0; j < n; j++) {
			while (pt < n && pt <= j + x) {
				while (!q.empty() && q.back().first >= dp[i + 1 & 1][pt])
					q.pop_back();
				q.push_back(pii(dp[i + 1 & 1][pt], pt));
				pt++;
			}
			while (q.front().second < j - x)
				q.pop_front();
			dp[i & 1][j] = q.front().first + abs(a - j);
		}
	}
	cout << ans - *min_element(dp[m & 1], dp[m & 1] + n) << '\n';
	return 0;
}
