#include <iostream>
#include <cstdlib>
#include <deque>
using namespace std;
typedef long long ll;
ll dp[2][150000],INF=100000000000000;
deque<ll> dq;
int main(){
	ll n,m,d;
	cin >> n >> m >> d;
	ll t_pre=0;
	for(ll i=0;i<m;i++){
		for(int j=0;j<n;j++) dp[1-i%2][j]=-INF;
		ll a,b,t;
		cin >> a >> b >> t;
		ll dis=d*(t-t_pre);
		a--;
		dq.clear();
		for(ll j=0;j<=min(n-1,dis);j++){
			while(!dq.empty() && dp[i%2][dq.back()]<=dp[i%2][j]) dq.pop_back();
			dq.push_back(j);
		}
		for(ll j=0;j<n;j++){
			dp[1-i%2][j]=dp[i%2][dq.front()]+b-abs(a-j);
			if(j+dis+1<n){
				while(!dq.empty() && dp[i%2][dq.back()]<=dp[i%2][j+dis+1]) dq.pop_back();
				dq.push_back(j+dis+1);
			}
			if(dq.front()==j-dis) dq.pop_front();
		}
		t_pre=t;
	}
	ll ans=-INF;
	for(int i=0;i<n;i++) ans=max(ans,dp[m%2][i]);
	cout << ans << endl;
	return 0;
}