#include<cstdio>
#include<algorithm>
#include<cstring>
#include<algorithm>
#define N 150010
using namespace std;
int n,m,d,t,A[N],B[N],T[N],h[N];
long long f[N][2];
int main()
{
 //freopen("c.in","r",stdin);
 //freopen("c.out","w",stdout);
 scanf("%d%d%d",&n,&m,&d);
 for (int i=1;i<=m;i++)
  scanf("%d%d%d",&A[i],&B[i],&T[i]);
 t=0;
 for (int j=1;j<=m;j++)
 {
  t^=1;
  long long Len=(long long)(T[j]-T[j-1])*d;
  Len=min(Len,(long long)n-1);
  int p2=0,p1=1,stop=1+Len;
  for (int i=1;i<=stop;i++)
   {
	while (p1<=p2&&f[i][t^1]>=f[h[p2]][t^1])p2--;
	h[++p2]=i;
   }
  for (int i=1;i<=n;i++)
  {
   while (p1<=p2&&abs(h[p1]-i)>Len) p1++;
   f[i][t]=f[h[p1]][t^1]+B[j]-abs(A[j]-i);
   if (stop+1<=n)
	{
	 stop++;
	 while (p1<=p2&&f[stop][t^1]>=f[h[p2]][t^1])p2--;
	 h[++p2]=stop;
	}
  }
 }
 long long Max=-0x7fffffff*0x7fffffffLL;
 for (int i=1;i<=n;i++)
  Max=max(Max,f[i][t]);
 printf("%I64d\n",Max);
 return 0;
}