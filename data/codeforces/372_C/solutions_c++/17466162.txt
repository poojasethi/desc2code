#include<bits/stdc++.h>

using namespace std;

#define N 150005

deque < pair < long long , int > > Q;

long long M[N],A[N],B[N],T[N],K[N],n,m,d,i,j,k,asd = -N*N*N;

void f(bool h){
	while(Q.size() && Q.back().first <= M[j])
		Q.pop_back();

	Q.push_back( make_pair(M[j] , j) );

	while(!h && Q.front().second < j - d * (T[i] - T[i-1])  ||  h && Q.front().second > j + d * (T[i] - T[i-1]))
		Q.pop_front();

	K[j] = max( K[j] , Q.front().first );
}

int main(){

	cin >> n >> m >> d;

	for(i=1;i<=m;i++)
		cin >> A[i] >> B[i] >> T[i];

	for(i=1;i<=m;i++){

		memset(K , -128 , sizeof K);

		Q.clear();	for(j=1;j<=n;j++) f(0);
		Q.clear();	for(j=n; j ;j--)  f(1);

		for(j=1;j<=n;j++){

			M[j] = B[i] - abs(A[i] - j) + K[j];

			if(i == m)
				asd = max(asd , M[j]);
		}
	}

	cout << asd;
	return 0;
}
