//rns
#include <stdio.h>
typedef __int64 ll;
#define M 150150
#define MIN(a, b) (a<b?a:b)

int ABS(int u) {
  return u < 0 ? -u : u;
}

int n, m, d;
ll tot;
ll f[2][M];

int main() {
  scanf("%d %d %d", &n, &m, &d);
  int pret = 1, t, b;
  int a, id = 1;
  int r = 0, rr;
  while(m--) {
    scanf("%d %d %d", &a, &b, &t);
    tot += 1ll * b;
    b = pret, pret = t, t = t - b;
    if(t >= 1 + n / d)t = n;
    else t = t * d;
    if(t >= n)t = n;
    rr = 1 - r;
    ll mn = 1ll << 60;
    int tmp, lef, rig;
    for(int k = 1; k <= n; k++) {
      lef = k - t;
      rig = k + t;
      if(lef < 1)lef = 1;
      if(rig > n)rig = n;
      if(lef > id)f[rr][k] = f[r][lef] + ABS(a - k);
      else if(rig < id)f[rr][k] = f[r][rig] + ABS(a - k);
      else f[rr][k] = f[r][id] + ABS(a - k);
      if(f[rr][k] < mn)mn = f[rr][k], tmp = k;
    }
    id = tmp;
    r = rr;
  }
  ll mn = 1ll << 60;
  for(int k = 1; k <= n; k++)mn = MIN(mn, f[r][k]);
  printf("%I64d\n", tot - mn);
}
