#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#define N 151000
using namespace std;
long long f[N],g[N],o,ans;
int t,a,b,i,d,n,m,j,q[N],last,l,r;
int main(){
	scanf("%d%d%d",&n,&m,&d);
	for(i=1;i<=n;++i)f[i]=0;
	last=1;
	for(i=1;i<=m;++i){
		scanf("%d%d%d",&a,&b,&t);
		o=1ll*(t-last)*d;
		last=t;
		l=1; r=0;
		for(j=1;j<=n;++j){
			while(l<=r && f[j]>f[q[r]])r--;
			q[++r]=j;
			while(j-q[l]>o)l++;
			g[j]=f[q[l]];
		}
		l=1; r=0;
		for(j=n;j>=1;--j){
			while(l<=r && f[j]>f[q[r]])r--;
			q[++r]=j;
			while(q[l]-j>o)l++;
			g[j]=max(g[j],f[q[l]]);
		}
		for(j=1;j<=n;++j)f[j]=g[j]+b-abs(a-j);
	}
	ans=-1ll<<50;
	for(i=1;i<=n;++i)ans=max(ans,f[i]);
	printf("%I64d\n",ans);
}