#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;

#define long long long

const int N = 1.5e5 +7;
const int M = 307;

int n, m;
long d;
long dp[2][N];
long a[M], b[M], t[M];
int q[N], bm;

int main() {
  scanf("%d %d %I64d", &n, &m, &d);
  for (int i = 1; i <= m; i++) scanf("%I64d %I64d %I64d", a+i, b+i, t+i);
  int i = 0;
  while (i < m) {
    int j = i + 1;
    long step = min((t[j] - t[i]) * d, (long)n);
    int f = 0, l = -1;
    for (int x = 1; x <= step + n; x++) {
      while (f <= l && q[f] < x - step*2) f++;
      if (x <= n) {
	while (f <= l && dp[bm][q[l]] < dp[bm][x]) l--;
	q[++l] = x;
      }
      if (x > step) dp[bm^1][x - step] = dp[bm][q[f]];
    }
    while (j <= m && t[j] == t[i+1]) {
      for (int x = 1; x <= n; x++) dp[bm^1][x] += b[j] - abs(a[j] - x);
      j++;
    }
    bm ^= 1;
    i = j - 1;
  }
  printf("%I64d\n", *max_element(&dp[bm][1], &dp[bm][n+1]));
}
