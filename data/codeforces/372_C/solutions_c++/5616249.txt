#include <cstdio>
#include <algorithm>
using namespace std;
typedef long long ll;
ll f[2][150010];
int q[150010];
ll a[150010],b[150010],T[150010];
int main()
{
    int n,m,D;
    scanf("%d%d%d",&n,&m,&D);
    
    for(int i = 1;i<=m;++i)
            scanf("%I64d%I64d%I64d",a+i,b+i,T+i);
            int u=0,v=1;
    for (int i=1;i<=m;i++)
    {
        //,prev=1;
      //  int a,b,T;
        //scanf("%d%d%d",&a,&b,&T);
        int l=0,r=0,t=1;
     //   ll limit=ll(D)*(T-prev);
        for (int j=1;j<=n;j++)
        {
            
            for(;t<=min((ll)n,(ll)j+(T[i]-T[i-1])*(ll)D);++t)
            {
                while (l<r && f[u][t]>=f[u][q[r-1]])
                    r--;
                q[r++]=t;
            }
            while (l<r && q[l]<(ll)j-(T[i]-T[i-1])*(ll)D)
                l++;
            f[v][j]=f[u][q[l]]+b[i]-abs(a[i]-j);
        }
        swap(u,v);
        //prev=T;
    }
    printf("%I64d\n",*max_element(f[u]+1,f[u]+n+1));
    return(0);
}
