#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;

typedef long long i64 ;

int n,m,q[160000],a[330],b[330],t[330];
i64 d,res[2][160000];

int main()
{
	cin>>n>>m>>d;
	for(int i=1;i<=m;++i)	scanf("%d %d %d",&a[i],&b[i],&t[i]);
	for(int i=1;i<=n;++i)
		res[m&1][i]=b[m]-abs(a[m]-i);
	for(int i=m-1;i>0;--i)
	{
		int hh=1,tt=0,ii=(i&1),jj=(ii^1);
		i64 dd=d*(t[i+1]-t[i]);
		for(int j=1,k=1;j<=n;++j)
		{
			while(hh<=tt&&j-q[hh]>dd)	hh++;
			while(k<=n&&k-j<=dd)
			{
				while(hh<=tt&&res[jj][k]>=res[jj][q[tt]])	tt--;
				q[++tt]=k++;
			}
			res[ii][j]=res[jj][q[hh]]+b[i]-abs(a[i]-j);
		}
	}
	i64 ans=res[1][n];
	for(int i=1;i<n;++i)	ans=max(ans,res[1][i]);
	cout<<ans<<endl;
	return 0;
}
