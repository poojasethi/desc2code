#include<cstdio>
#include<iostream>
#include<cstring>
#include<list>
#include<algorithm>
#define LL long long
#define NINF (LL)(-1E12)
using namespace std;
LL dp[150005],dp2[150005];
LL q[333333];
int n,m,d;
int a,b,t,pt,range;
int main(){
    scanf("%d %d %d",&n,&m,&d);
    pt=1;
    memset(dp,0,sizeof(dp));
    for(int i=1;i<=m;i++){
        scanf("%d %d %d",&a,&b,&t);
        int L=0,R=0;
        range=min(1LL*(n-1),1LL*(t-pt)*d);
        int l=1,r=1;
        for(int j=1;j<=n;j++){
            while(r<=n && r-j<=range){
                while(L<R && dp[q[R-1]]<=dp[r]){
                    R--;
                }
                q[R++]=r++;
            }
            while(j-q[L]>range) L++;
            dp2[j]=dp[q[L]]+b-abs(a-j);
        }
        for(int j=1;j<=n;j++) dp[j]=dp2[j];
        
        pt=t;
    }
    LL ans=NINF;
    for(int j=1;j<=n;j++) ans=max(ans,dp[j]);
    printf("%I64d\n",ans);
    return 0;
}