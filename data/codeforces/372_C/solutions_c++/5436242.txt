#include <algorithm>
#include <cstdio>
#include <deque>
#define abs(x) ((x)>0?(x):-(x))
using namespace std;
typedef long long LL;
const int N=151000,M=310;
LL n,m,d,i,j,x,ans,a[M],t[M],f[N],g[N];
deque<LL> q;
int main() {
	scanf("%I64d%I64d%I64d",&n,&m,&d);
	for (i=0;i<m;i++) {
		scanf("%I64d%I64d%I64d",a+i,&x,t+i);
		ans+=x;
	}
	for (i=m-2;i>=0;i--) t[i+1]-=t[i];
	for (i=1;i<=n;i++) g[i]=abs(i-a[0]);
	for (i=1;i<m;i++) {
		q.clear();
		for (j=1;j<=min(t[i]*d,n);j++) {
			while ((!q.empty())&&(g[q.back()]>=g[j])) q.pop_back();
			q.push_back(j);
		}
		for (j=1;j<=n;j++) {
			if (j+d*t[i]<=n) {
				while ((!q.empty())&&(g[q.back()]>=g[j+t[i]*d]))
					q.pop_back();
				q.push_back(j+d*t[i]);
			}
			if (q.front()<j-d*t[i]) q.pop_front();
			f[j]=g[q.front()]+abs(j-a[i]);
		}
		copy(f,f+n+1,g);
	}
	ans-=*min_element(f+1,f+n+1);
	printf("%I64d\n",ans);
	return 0;
}
