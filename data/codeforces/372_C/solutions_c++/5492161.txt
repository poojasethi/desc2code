#include<cstdio>
#include<cstring>
#include<iostream>
#include<algorithm>
typedef long long ll;
int n,m,d,a[444],l,r,now,pre,tttt,ttt;
ll i,j,k,f[2][200001],t[444],b[444],ans,tmp,q[200001];
ll abs(ll a){
	return a>=0?a:-a;
}
int main(){
	scanf("%d%d%d",&n,&m,&d);
	for (i=1;i<=m;i++) scanf("%d%d%d",&a[i],&tttt,&ttt),t[i]=ttt,b[i]=tttt;
	now=0;pre=1;
	for (i=1;i<=n;i++) f[now][i]=abs((ll)a[1]-i);
	for (i=2;i<=m;i++){
		now^=1;pre^=1;l=1;r=0;tmp=(ll)d*(t[i]-t[i-1]);
		for (j=1;j<=std::min(tmp,(ll)n);j++){
			for (;l<=r&&f[pre][q[r]]>f[pre][j];r--);
			q[++r]=j;
		}
		for (j=1;j<=n;j++){
			for (;l<=r&&j-q[l]>tmp;l++);
			if (j+tmp<=n){
				for (;l<=r&&f[pre][q[r]]>f[pre][j+tmp];r--);
				q[++r]=j+tmp;
			}
			f[now][j]=abs((ll)a[i]-j)+f[pre][q[l]];
		}
	}
	for (ans=(ll)1<<60,i=1;i<=n;i++) ans=std::min(ans,f[now][i]);
	for (ans=-ans,i=1;i<=m;i++) ans=ans+b[i];
	std::cout<<ans<<std::endl;
	return 0;
}