#include<bits/stdc++.h>

using namespace std;

#define mp make_pair
#define X first
#define Y second
#define int long long

const int maxn = 300 + 10, maxm = 150 * 1000 + 10;

int dp[2][maxm], p[maxn], r[maxn];
int n, m, d;

main()
{
    cin>>n>>m>>d;
	int sum = 0;
	for(int i=0;i<m;i++)
    {
		int q;
		cin>>p[i+1]>>q>>r[i+1];
		p[i+1]--;
		sum += q;
	}
	for(int i = 1; i <= m; i++)
    {
		int a=i % 2;
		int m = min(n,(r[i]-r[i-1])*d);
		deque<int> deq;
		for(int j=0;j<n+m;j++)
        {
			if(j<n)
            {
				while(deq.size() && dp[!a][deq.back()] >= dp[!a][j])
                    deq.pop_back();
				deq.push_back(j);
			}
			if(j >= m)
				dp[a][j-m]=dp[!a][deq.front()] + abs(p[i] - (j - m));

			if(j>=2*m)
				if(deq.front() == j - 2*m)
                    deq.pop_front();

		}
	}
	int v = 9999999999999999LL;
	for(int i=0; i<n ;i++)
        v = min(v, dp[m%2][i]);
	cout<<sum - v;
}

		  	  					 		   	   			   	