#include<cstdio>
#include<algorithm>
using namespace std;
#define rep(i,l,r) for (int i=l;i<r;++i)
const int N=405;
int f[N][N][2],g[N],v[N],a[N],n; bool b[N][N][2];
int work(int l,int r,int t)
{
	int &res=f[l][r][t],len; if (b[l][r][t]) return res; b[l][r][t]=1;
	if (l>=r) return res=0; res=-1<<25;
	if (t){
		if (l+1==r) return res=0; if (a[l]==a[r-1]) return res; int sign=a[l]<a[r-1]?1:-1;
		rep(i,l+1,r) if (a[i]==a[l]+sign) res=max(res,work(l+1,i,0)+work(i,r,1)); return res;
	}
	rep(i,l,r) if (a[i]>=a[l] && a[i]>=a[r-1] && (len=a[i]*2-a[l]-a[r-1])<n)
		res=max(res,work(l,i+1,1)+work(i,r,1)+v[len]);
	rep(i,l+1,r) res=max(res,work(l,i,0)+work(i,r,0)); return res;
}
int main()
{
	scanf("%d",&n); rep(i,0,n) scanf("%d",v+i); rep(i,0,n) scanf("%d",a+i);
	rep(i,0,n){
		g[i+1]=max(g[i+1],g[i]);
		rep(j,i+1,n+1) g[j]=max(g[j],g[i]+work(i,j,0));
	}
	printf("%d\n",g[n]); return 0;
}
