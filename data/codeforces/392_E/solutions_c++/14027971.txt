#include<cstdio>
using namespace std;
const int maxn=405;
int n,v[maxn],w[maxn];
int f[maxn][maxn],g[maxn][maxn][2];
int ans[maxn];
inline bool rel(int &x,const int &y){return x<y?(x=y,1):0;}
int main()
{
	int i,j,k,p;
	scanf("%d",&n);
	for(i=1;i<=n;i++)
		scanf("%d",v+i);
	for(i=1;i<=n;i++)
		scanf("%d",w+i);
	for(i=n;i;i--)
	{
		f[i][i]=v[1];
		for(j=i+1;j<=n;j++)
		{
			f[i][j]=g[i][j][0]=g[i][j][1]=-(1<<28);
			for(k=i;k<j;k++)
				if(w[k]+1==w[j])rel(g[i][j][0],g[i][k][0]+f[k+1][j-1]);
			for(k=j;k>i;k--)
				if(w[k]+1==w[i])rel(g[i][j][1],g[k][j][1]+f[i+1][k-1]);
			for(k=i;k<=j;k++)
			{
				p=w[k]+w[k]-w[i]-w[j]+1;
				if(p>=1&&p<=n)rel(f[i][j],g[i][k][0]+g[k][j][1]+v[p]);
			}
			for(k=i;k<j;k++)
				rel(f[i][j],f[i][k]+f[k+1][j]);
		}
	}
	for(i=1;i<=n;i++)
	{
		ans[i]=ans[i-1];
		for(j=i;j;j--)
			rel(ans[i],ans[j-1]+f[j][i]);
	}
	printf("%d\n",ans[n]);
	return 0;
}
