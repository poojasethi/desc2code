#include<cstdio>
#include<cstring>
#include<vector>
#include<algorithm>
using namespace std;
const int maxn=100002;
vector<int> bb[maxn];
int a[maxn],b[maxn],f[302];
int n,m,s,e,ans;

int main(){
  int i,j;
  scanf("%d%d%d%d",&n,&m,&s,&e);
  for (i=0;i<n;++i) scanf("%d",&a[i]);
  for (i=0;i<m;++i){
    scanf("%d",&b[i]);
    bb[b[i]].push_back(i);
  }
  for (i=0;i<maxn;++i)
    bb[i].push_back(1<<30);
  memset(f,1,sizeof(f));
  f[0]=-1;
  for (i=0;i<n;++i){
    if (bb[a[i]].size())
      for (j=ans+1;j;--j){
        f[j]=min(f[j],*upper_bound(bb[a[i]].begin(),bb[a[i]].end(),f[j-1]));
        if (j>ans && j*e+i+f[j]+2<=s) ans=j;
      }
    if (ans>s/e) break;
  }
  printf("%d\n",ans);
  return 0;
}