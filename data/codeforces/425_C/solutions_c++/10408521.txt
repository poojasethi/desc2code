#include <bits/stdc++.h>
typedef long long LL;
#define rep(i,n) for(int i = 0;i < n;i ++)

const int N = 100001;
std::vector<int> position[N];
int dp[333];
int main() {
	int n, m, s, e, x;
	scanf("%d%d%d%d", &n, &m, &s, &e);
	for(int i = 1; i <= n; i ++) {
		scanf("%d", &x);
		position[x].push_back(i);
	}
	memset(dp, 127, sizeof dp);
	dp[0] = 0;
	int answer = 0;
	for(int i = 1; i <= m; i ++) {
		scanf("%d", &x);
		for(int j = 300; j >= 0; j --) {
			std::vector<int>::iterator it = upper_bound(position[x].begin(), position[x].end(), dp[j]);
			if(it == position[x].end())	continue;
			dp[j + 1] = std::min(dp[j + 1], *it);
			if(*it + (j+1)*e + i <= s)
				answer = std::max(answer, j+1);
		}
	}
	printf("%d\n", answer);
	return 0;
}

