#include<stdio.h>
#include<vector>
int a[100006];
std::vector<int>b[100006];
int dp[306][100006];
#define max(x,y) (x>y?x:y)
#define min(x,y) (x<y?x:y)
int main(){
    int n,m,s,e,i,j,tmp;
    scanf("%d%d%d%d",&n,&m,&s,&e);
    for(i=1;i<=n;i++)scanf("%d",&a[i]);
    for(i=1;i<=m;i++){
        scanf("%d",&tmp);
        b[tmp].push_back(i);
    }
    for(i=1;i<=300;i++)dp[i][0]=1e9;
    int t=s/e,ans=0,l,r,mid;
    t=t<m?t:m;t=t<n?t:n;
    for(i=1;i<=t;i++)
    for(j=1;j<=n;j++){
        dp[i][j]=dp[i][j-1];
        l=0;r=b[a[j]].size()-1;
        while(r-l>1){
            mid=(l+r)>>1;
            if(b[a[j]][mid]>dp[i-1][j-1])r=mid;
            else l=mid;
        }
        if(r>=l&&b[a[j]][l]>dp[i-1][j-1])dp[i][j]=min(dp[i][j],b[a[j]][l]);
        if(r>=l&&b[a[j]][r]>dp[i-1][j-1])dp[i][j]=min(dp[i][j],b[a[j]][r]);
        if((j+dp[i][j]+i*e)<=s)ans=ans>i?ans:i;
    }
    printf("%d",ans);
}