#include<cstdio>
#include<vector>
#include<algorithm>
using namespace std;
#define rep(i,n) for (int i=0;i<n;++i)
typedef long long LL;
const int N=100005;
int f[305],a[N],b[N],n,m,s,e,C,ans;
vector<int> p[N];
int main()
{
	scanf("%d%d%d%d",&n,&m,&s,&e),C=s/e;
	rep(i,n) scanf("%d",a+i);
	rep(i,m) scanf("%d",b+i),p[b[i]].push_back(i);
	rep(j,C+1) f[j]=m; f[0]=-1;
	rep(i,n+1) for (int j=C;j>=0;--j) if (f[j]<m){
		if (i+f[j]+1+j*e<=s) ans=max(ans,j);
		vector<int> :: iterator it=upper_bound(p[a[i]].begin(),p[a[i]].end(),f[j]);
		if (it!=p[a[i]].end()) f[j+1]=min(f[j+1],*it);
	}
	printf("%d\n",ans);
	return 0;
}

