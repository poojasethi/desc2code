#include <cstdio>
#include <algorithm>
#include <set>
using namespace std;

const int MAXN = 1e5+10;
const int MAXDP = 500;
const int INF = 1e9;

int N,M,S,E;
int A[MAXN],B[MAXN];
set <int> IDX[MAXN];

int dp[MAXDP];
int answer;

int main(){
    // freopen("input.txt","r",stdin);

    scanf("%d %d %d %d",&N,&M,&S,&E);
    for(int i=1;i<=N;i++) scanf("%d",&A[i]);
    for(int i=1;i<=M;i++){
        scanf("%d",&B[i]);
        IDX[B[i]].insert(i);
    }
    answer = 0;

    dp[0] = -1;
    for(int i=1;i<MAXDP;i++) dp[i] = INF;

    for(int i=1;i<=N;i++){
        for(int d=MAXDP-2;d>=0;d--){
            set<int>::iterator it = IDX[A[i]].upper_bound(dp[d]);
            if(it != IDX[A[i]].end() && (*it) < dp[d+1]){
                dp[d+1] = *it;
                if((d+1)*E + (i+(*it)) <= S) answer = max(answer,d+1);
            }
        }
    }
    printf("%d\n",answer);
    return 0;
}