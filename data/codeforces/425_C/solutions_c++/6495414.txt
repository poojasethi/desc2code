#include <iostream>
#include <vector>
#include <set>
#include <cmath>

using namespace std;

int n1,n2,s,e;
int v1[1000000],v2[1000000];

int ri[500];
int nextri[500];

set<int> posiciones[1000000];

int main()
{
  cin>>n1>>n2>>s>>e;
  for (int i=1;i<=n1;i++)
    cin>>v1[i];
  for (int i=1;i<=n2;i++) {
    cin>>v2[i];
    posiciones[v2[i]].insert(i);
  }
  int sol=0;
  for (int i=1;i<500;i++)
    ri[i]=1000000000;
  for (int i=1;i<=n1;i++) {
    for (int p=1;p<=i and p*e<=s;p++) {
      set<int>::iterator it=posiciones[v1[i]].upper_bound(ri[p-1]);
      if (it!=posiciones[v1[i]].end()) {
	nextri[p]=min(*it,ri[p]);
      } else {
	nextri[p]=ri[p];
      }
    }
    for (int p=1;p<=i and p*e<=s;p++) {
      ri[p]=nextri[p];
      if (p*e+i+ri[p]<=s)
	sol=max(sol,p);
    }
  }
  cout<<sol<<endl;
}
