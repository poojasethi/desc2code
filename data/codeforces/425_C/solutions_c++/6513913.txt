#include <cstring>
#include <algorithm>
#include <iostream>
#include <vector>

#define show(x) cerr << #x << '=' << x << endl
#define pb push_back
using namespace std;

const int MAXN = 1000 * 100 + 100, MAXL = 300 + 10, INF = (1<<30);
int n, m, s, e, b[MAXN], dp[MAXL], ans;
vector<int> pos_a[MAXN];
void input() {
	cin >> n >> m >> s >> e;
	for (int i = 0; i < n; ++i) {
		int a;
		cin >> a;
		pos_a[a].pb(i);
	}
	for (int i = 0; i < m; ++i)
		cin >> b[i];
}
int main() {
	ios_base::sync_with_stdio(false);
	input();
	for (int i = 0; i < MAXN; ++i)
		pos_a[i].pb(INF);
	memset(dp, 1, sizeof(dp));
	dp[0] = -1;
	for (int i = 0; i < m && ans <= s/e; ++i)
		for (int j = ans + 1; j; --j) {
			dp[j] = min(dp[j], *upper_bound(pos_a[b[i]].begin(), pos_a[b[i]].end(), dp[j-1]));
			if (j > ans && j * e + i + dp[j] + 2 <= s)
				ans++;
		}

	cout << ans << endl;
	return 0;
}
