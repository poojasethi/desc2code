#include<cstdio>
#include<algorithm>
#include<cstring>
#include<iostream>
#include<vector>
using namespace std;
#define maxn 100010
vector<int> hash[maxn];
#define pb push_back
int a[maxn],dp[maxn][450];
int main(){
	int n,m,s,e;
	scanf("%d%d%d%d",&n,&m,&s,&e);
	for (int i=1;i<=n;i++) scanf("%d",a+i);
	for (int i=1;i<=m;i++) {
		int x;
		scanf("%d",&x);
		hash[x].pb(i);
	}
	for (int i=1;i<=100000;i++) hash[i].pb(m+1);
	memset(dp,0x3f,sizeof(dp));
	int ans=0;
	dp[0][0]=0;
	for (int i=1;i<=n;i++) 
		for (int j=0;j<=400;j++) {
			if (dp[i-1][j]+i-1+j*e>s) break;
			ans=max(ans,j);
			dp[i][j]=min(dp[i][j],dp[i-1][j]);
			int x=hash[a[i]][upper_bound(hash[a[i]].begin(),hash[a[i]].end(),dp[i-1][j])-hash[a[i]].begin()];
			if (x<=m) dp[i][j+1]=min(dp[i][j+1],x);
		}
	for (int j=0;j<=400;j++) {
		if (dp[n][j]+n+j*e>s) break;
		ans=max(ans,j);
			}
	printf("%d\n",ans);
}
