#include<cstdio>
#include<vector>
#include<cstring>
#include<algorithm>
#include<iostream>
using namespace std;
const int N=100000,maxk=305,inf=(1<<30)-1;
int n,m,s,e,ans;
int a[N+5],b[N+5];
int f[maxk];
vector<int> V[N+5];

template<class T>
inline bool rel(T &x,const T &y)
{return x<y?(x=y,1):0;}

void init()
{
	scanf("%d%d%d%d",&n,&m,&s,&e);
	for(int i=1;i<=n;i++)
		scanf("%d",a+i);
	for(int i=1;i<=m;i++)
		scanf("%d",b+i),V[b[i]].push_back(i);
	for(int i=1;i<=N;i++)V[i].push_back(inf);
	memset(f,31,sizeof(f));
}

void work()
{
	f[0]=0;
	for(int i=1;i<=n;i++)
		for(int j=s/e;j>0;j--)
		{
			f[j]=min(f[j],*upper_bound(V[a[i]].begin(),V[a[i]].end(),f[j-1]));
			if(s-j*e>=i+f[j])rel(ans,j);
		}
	printf("%d\n",ans);
}

int main()
{
	init();
	work();
	return 0;
}
