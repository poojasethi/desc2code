#include <cstdio>
#include <iostream>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <vector>
using namespace std;
int n,m,s,e,a[100010],b[100010],dq,ans;
int dp[500][100010];
vector<int> f[100010];
int main()
{
	scanf("%d%d%d%d",&n,&m,&s,&e);
	for (int i=1;i<=n;++i) scanf("%d",&a[i]);
	for (int i=1;i<=m;++i)
	{
		scanf("%d",&b[i]);
		f[b[i]].push_back(i);
	}
	for (int i=0;i<100010;++i) f[i].push_back(19950920);
	memset(dp,-1,sizeof(dp));
	memset(dp[0],0,sizeof(dp[0]));
	for (int i=1;i<=s/e;++i)
	{
		for (int j=1;j<=n;++j)
		{
			if (dp[i-1][j-1]!=-1)
			{
				dp[i][j]=dp[i][j-1];
				dq=lower_bound(f[a[j]].begin(),f[a[j]].end(),dp[i-1][j-1]+1)-f[a[j]].begin();
				dq=f[a[j]][dq];
				if (dq==19950920) continue;
				if (dp[i][j]==-1||dp[i][j]>dq) dp[i][j]=dq;
				if (dp[i][j]+j+i*e<=s) ans=max(ans,i);
			}
		}
	}
	printf("%d\n",ans);
	return 0;
}
	  	  				 	  	   	      	 	 	