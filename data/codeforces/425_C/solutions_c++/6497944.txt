#include <cstdio>
#include <climits>
#include <set>
#include <algorithm>
using namespace std;

const int SIZE = 100009;
int N, M, S, E;
int A[SIZE], B[SIZE];
int table[SIZE];
set<int> pos[SIZE];
const int INF = SIZE;

int main()
{
    scanf("%d%d%d%d", &N, &M, &S, &E);
    for(int i = 0; i < N; i++)
        scanf("%d", A + i);
    for(int i = 0; i < M; i++)
    {
        scanf("%d", B + i);
        pos[B[i]].insert(i);
    }
    int ans = 0;
    for(int m = 1; m <= 300; m++)
    {
        for(int i = 0, l = m == 1? -1: INF; i < N; i++)
        {
            set<int>::iterator it = pos[A[i]].upper_bound(l);
            l = min(l, table[i]);
            if(it == pos[A[i]].end())
                table[i] = INF;
            else
            {
                table[i] = *it;
                if(m * E + (i + 1) + (*it + 1) <= S)
                    ans = max(ans, m);
            }
        }
    }
    printf("%d\n", ans);

    return 0;
}
