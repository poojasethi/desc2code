#include<cstdio>
#include<cstring>
#include<algorithm>
#include<set>

using namespace std;

const int MAXN = 100005;

set<int> Tr[MAXN];
int N,M,S,E;
int A[MAXN],B[MAXN],F[305][MAXN];

int main()
{
	scanf("%d%d%d%d", &N, &M, &S, &E);
	for(int i = 1;i <= N;i ++) scanf("%d", &A[i]);
	for(int i = 1;i <= M;i ++) scanf("%d", &B[i]),Tr[B[i]].insert(i);
	int Ans = 0;
	for(int i = 1;i <= S / E;i ++)
	{
		int lst = (i == 1) ? 0 : (1 << 30);
		for(int j = 1;j <= N;j ++)
		{
			if (j - 1 && F[i - 1][j - 1]) lst = min(lst,F[i - 1][j - 1]);
			if (Tr[A[j]].upper_bound(lst) != Tr[A[j]].end()) F[i][j] = *(Tr[A[j]].upper_bound(lst));
			if (F[i][j]) 
				if (j + F[i][j] + E * i <= S) Ans = i;
		}
	}
	printf("%d\n", Ans);
}

 					   	 	  	 	 	 		  		 				