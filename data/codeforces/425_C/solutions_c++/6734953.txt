/*happywu
 * 2014.5.29
 */
#include<cstdio>
#include<iostream>
#include<vector>
#include<algorithm>
#include<cstring>
using namespace std;
vector<int> q[100010];
const int Inf=100000000;
int f[100010][350],n,m,s,e,a[100010],b[100010];
int main()
{
	scanf("%d%d%d%d",&n,&m,&s,&e);
	for(int i=1;i<=n;i++)
		scanf("%d",&a[i]);
	for(int i=1;i<=m;i++)
	{
		scanf("%d",&b[i]);
		q[b[i]].push_back(i);
	}
	for(int i=0;i<=n;i++)
		for(int j=0;j<=310;j++)
			f[i][j]=Inf;
	for(int i=0;i<=n;i++)f[i][0]=0;
	int fans=0;
	for(int j=1;j<=s/e;j++)
	for(int i=j;i<=n;i++)
		{
			f[i][j]=f[i-1][j];
			if(f[i-1][j-1]!=Inf && q[a[i]].size()!=0)
			{
				vector<int>::iterator ps;
				ps=upper_bound(q[a[i]].begin(),q[a[i]].end(),f[i-1][j-1]);
				if(ps!=q[a[i]].end())
					f[i][j]=min(f[i][j],*ps);
			}
			if(i + f[i][j] +e*j<=s)
				if(fans<j)fans=j;
		}
	printf("%d\n",fans);
	return 0;
}
