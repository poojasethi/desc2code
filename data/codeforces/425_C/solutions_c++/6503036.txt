#include <iostream>
#include <cstdio>
#include <cmath>
#include <algorithm>
#include <vector>
#include <cstring>
#define eps (1e-8)
#define mm 100005
using namespace std;
const int INF = 100000000;
vector<int> by[mm];
int F[mm],a[mm],b[mm];
int main()
{
    //freopen("BUAA.in","r",stdin);
    int n,m,s,e;
    scanf("%d%d%d%d",&n,&m,&s,&e);
    for(int i = 1;i<=n;i++)
    scanf("%d",a+i);
    for(int i = 1;i<=m;i++){
        scanf("%d",b+i);
        by[b[i]].push_back(i);
    }
    fill(F,F+n+1,INF);
    F[0] = 0;
    int ans = 0;
   vector<int>::iterator it;
    for(int i = 1;i<=n;i++)
    for(int j = min(i,s/e);j>0;j--){
       it = upper_bound(by[a[i]].begin(),by[a[i]].end(),F[j-1]);
       if(it != by[a[i]].end())
        F[j] = min(F[j],*it);
        if(j*e+i+F[j]<=s) ans = max(ans,j);
   }
   printf("%d\n",ans);
    return 0;
}
