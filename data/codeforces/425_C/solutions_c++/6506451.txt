#include<stdio.h>
#include<vector>
#include<algorithm>
using namespace std;
const int maxn=100050,INF=0x7fffffff;
int m,n,s,e,A[maxn],B[maxn],ans=0;
vector<int> p[maxn];
int f[maxn];
int main()
{
#ifndef ONLINE_JUDGE
	freopen("data.in","r",stdin);
	freopen("data.out","w",stdout);
#endif
	int i,j;
	scanf("%d%d%d%d",&m,&n,&s,&e);
	for(i=0;i<m;i++)
		scanf("%d",&A[i]);
	for(i=0;i<n;i++)
		scanf("%d",&B[i]),p[B[i]].push_back(i);
	for(i=0;i<maxn;i++)
		f[i]=s,p[i].push_back(INF);
	f[0]=-1;
	for(i=0;i<m;i++)
		for(j=s/e;j;j--)
		{
			f[j]=min(f[j],*upper_bound(p[A[i]].begin(),p[A[i]].end(),f[j-1]));
			//printf("%d %d\n",j,f[j]);
			if(i+f[j]+2+j*e<=s) ans=max(ans,j);
		}
	printf("%d\n",ans);
	return 0;
}
