#include<cstdio>
#include<set>
#include<cstring>
#include<algorithm>
using namespace std;

bool upmin(int &v,int x){if(x<v){v=x;return true;}return false;}
bool upmax(int &v,int x){if(x>v){v=x;return true;}return false;}

const int N=100050;
int n,m,s,e;
int a[N],b[N];
int f[N][305];
set<int>A[N],B[N];
set<int>::iterator it;
int main(){
  scanf("%d%d%d%d",&n,&m,&s,&e);
  for(int i=1;i<=n;i++){
    scanf("%d",&a[i]);
    A[a[i]].insert(i);
  }
  for(int i=1;i<=m;i++){
    scanf("%d",&b[i]);
    B[b[i]].insert(i);
  }
  memset(f,63,sizeof(f));
  f[0][0]=0;
  int ans=0;
  for(int i=1;i<=n;i++){
    f[i][0]=0;      
    for(int j=1;e*j<=s;j++){
      upmin(f[i][j],f[i-1][j]);
      it=B[a[i]].upper_bound(f[i-1][j-1]);
      if(it!=B[a[i]].end())
        upmin(f[i][j],*it);
      if(j*e+i+f[i][j]<=s) upmax(ans,j);  
    }
  }
  printf("%d\n",ans);
}
