#include<cstdio>
#include<cstdlib>
#include<set>
#include<vector>
#include<algorithm>
#include<cmath>
#define rep(i,n) for(int i=1;i<=n;i++)
#define N 200005
#define pb push_back
using namespace std;
vector <int> b[N];
int a[N],n,m,s,e,size,f[305][N],ans;
int main(){
    scanf("%d%d%d%d",&n,&m,&s,&e);
    size=s/e;
    rep(i,n) scanf("%d",&a[i]);
    rep(i,m){
        int x;
        scanf("%d",&x),b[x].pb(i);
    }
    for(int i=1;i<=size;i++)
        for(int j=0;j<=n;j++) f[i][j]=0x7f7f7f7f;
    f[0][0]=0;
    rep(i,size) rep(j,n){
        f[i][j]=f[i][j-1];
        int x=a[j];
        int k=upper_bound(b[x].begin(),b[x].end(),f[i-1][j-1])-b[x].begin();
        if(k==b[x].size()) continue;
        f[i][j]=min(f[i][j],b[x][k]);
    //  printf("i j %d %d f %d\n",i,j,f[i][j]);
    }
    ans=0;
    rep(i,size) rep(j,n)
    if(i*e+j+f[i][j]<=s) ans=i;
    printf("%d\n",ans);
}