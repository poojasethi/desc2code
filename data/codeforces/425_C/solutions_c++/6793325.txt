#include <cstdio>
#include <algorithm>
#include <vector>
using namespace std;
int a[111111], dp[2][310];
vector<int> b[111111];
vector<int> :: iterator it;
int main() {
	int n, m, s, e, i, j, x, J, ans=0;
	scanf("%d%d%d%d", &n, &m, &s, &e);
	for(i=0;i<n;scanf("%d", a+i), i++);
	for(i=0;i<m;scanf("%d", &x), b[x].push_back(i+1), i++);
	for(J=s/e+1,i=0;i<J;dp[0][i]=i*(m+1),i++);
	for(i=1;i<=n;i++) for(j=1;j<J;dp[i&1][j]=min(dp[(i-1)&1][j], dp[i&1][j]),j++) {
		dp[i&1][j]=((it = upper_bound(b[a[i-1]].begin(),b[a[i-1]].end(), j==1?0:dp[(i-1)&1][j-1]))!=b[a[i-1]].end())?*it:m+1;
		if(dp[i&1][j] != m+1 && s-e*j>=i+dp[i&1][j] && ans<j) ans=j;
	}
	printf("%d\n",ans);
}