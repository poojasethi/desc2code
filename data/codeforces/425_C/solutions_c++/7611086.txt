#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <cstdio>
#include <cstring>
#include <cmath>
#include <vector>
#include <algorithm>
#include <map>

using namespace std;

int dp[100001], a[100001], ans;
vector<int> v1[100001];

int main(){
	int n,m,s,e,t;
	memset(dp,0x3f,sizeof(dp)),dp[0]=0;
	scanf("%d %d %d %d", &n, &m, &s, &e);
	for(int i=1;i<=n;i++)
		scanf("%d", &a[i]);
	for(int i=1;i<=m;i++)
		scanf("%d", &t), v1[t].push_back(i);
	for(int i=1;i<=n;i++){
		if(s-i-ans*(e+1)<0) break;
		for(int j=min(i,s/e);j>=1;j--){
			vector<int>::iterator it=upper_bound(v1[a[i]].begin(), v1[a[i]].end(), dp[j-1]);
			if(it!=v1[a[i]].end()) dp[j]=min(dp[j],*it);
			if(dp[j]+i+e*j<=s) ans=max(ans,j);
		}
	}
	printf("%d\n", ans);
	//system("pause");
	return 0;
}