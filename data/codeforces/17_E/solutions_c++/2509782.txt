
#include<cstdio>
#include<algorithm>
using namespace std;
#define For(i,n) for(int i=1;i<=n;i++)
typedef long long ll;
const int N=2000010,mo=51123987;
int n,m,R,p[N],f[N],g[N];
ll ans,tot,x,d;
char s[N]={'?'};
int main()
{
	scanf("%d",&n);
	For(i,n) scanf(" %c",&s[i]);
	For(i,n)
	{
		p[i]=(i<R)?min(R-i,p[m*2-i]):0;
		while(s[i-p[i]-1]==s[i+p[i]+1]) p[i]++;
		if (i+p[i]>R) R=i+p[m=i];
		
		f[i]++;f[i+p[i]+1]--;
		g[i-p[i]]++;g[i+1]--;
		tot+=p[i]+1;
	}
	m=R=0;
	For(i,n-1)
	{
		p[i]=(i<R)?min(R-i,p[m*2-i]):0;
		while(s[i-p[i]]==s[i+p[i]+1])p[i]++;
		if(i+p[i]>R) R=i+p[m=i];
		
		f[i+1]++;f[i+p[i]+1]--;
		g[i-p[i]+1]++;g[i+1]--;
		tot+=p[i];
	}
	For(i,n)
	{
		f[i]=(f[i]+f[i-1])%mo;
		g[i]=(g[i]+g[i-1])%mo;
	}
	For(i,n-1)
	{
		f[i]=(f[i]+f[i-1])%mo;
		ans=(ans+(ll)f[i]*g[i+1])%mo;
	}
	tot%=mo;
	printf("%I64d\n",((tot*(tot-1)/2-ans)%mo+mo)%mo);
	return 0;
	
}
