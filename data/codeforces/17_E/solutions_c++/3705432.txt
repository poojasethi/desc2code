#include<cstdio>
#include<cstring>
#include<algorithm>
#define lim 51123987
using namespace std;
char st[4500005];
char t[4500005];
int r[4500005];
int a[4500005];
int b[4500005];
int n;
void init()
{	int i;
	st[1]='#';
	for (i=1;i<=n;++i)
	{	st[i*2+1]='#';
		st[i*2]=t[i];
	}
	n=n*2+1;
	st[0]='%',st[n+1]='$';
}
void manacher()
{	int i,p;
	r[1]=0,p=1;
	for (i=2;i<=n;++i)
	{	if (i<=p+r[p])
			r[i]=min(r[2*p-i],p+r[p]-i);
		else r[i]=1;
		while (st[i-r[i]]==st[i+r[i]])
			++r[i];
		--r[i];
		if (i+r[i]>p+r[p])
			p=i;
	}
}
long long work()
{	long long s=0,ans,t,c,lp,rp;
	int i;
	for (i=1;i<=n;++i)
	{	if ((i&1)&&!r[i])
			continue;
		lp=(i-r[i]+1)/2,rp=(i+r[i])/2;
		c=(rp-lp+1+1)/2;
		s+=c;
		++a[lp],--a[lp+c];
		++b[rp-c+1],--b[rp+1];
	}
	n=(n-1)/2;
	s%=lim;
	s=s*(s-1)/2%lim;
	for (i=1;i<=n;++i)
	{	a[i]=(a[i]+a[i-1])%lim;
		b[i]=(b[i-1]+b[i])%lim;
	}
	ans=0,t=0;
	for (i=1;i<=n;++i)
	{	ans=(ans+t*a[i])%lim;
		t=(t+b[i])%lim;
	}
	ans=((s-ans)%lim+lim)%lim;
	return ans;
}
int main()
{	int i;
	scanf("%d\n",&n);
	scanf("%s",t+1);
	init();
	manacher();
	printf("%lld\n",work());
	return 0;
}

					     	 		 	 		 				 	