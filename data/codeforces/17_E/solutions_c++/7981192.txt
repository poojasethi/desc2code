#include<stdio.h>
#include<algorithm>
using namespace std;
long long s[4000010],e[4000010];
long long dap,sum,m;
int a[4000010],n;
char st[2000010],b[4000010];
void manacher()
{
    int i,r=0,p=0;
    for(i=1;i<=n*2;i++){
        if(r<i) a[i]=0;
        else a[i]=min(a[2*p-i],r-i);
        while(i-a[i]>=2 && i+a[i]<=n*2-1 && b[i+a[i]+1]==b[i-a[i]-1]) a[i]++;
        if(r<a[i]+i) r=a[i]+i, p=i;
    }
}
int main()
{
    int i;
    scanf("%d",&n);
    scanf("%s",st);
    for(i=1;i<=n*2;i++){
        if(i%2==1) b[i]=st[i/2];
        else b[i]='#';
    }
    manacher();
    for(i=1;i<=n*2;i++) s[i-a[i]]+=1, s[i+1]-=1;
    for(i=1;i<=n*2;i++) e[i]+=1, e[i+a[i]+1]-=1;
    for(i=1;i<=n*2;i++) s[i]+=s[i-1], e[i]+=e[i-1];
    for(i=1;i<=n*2;i++)
    {
        if(b[i]!='#') sum+=s[i];
    }
    sum%=51123987;
    dap=sum*(sum-1)/(long long)2;
    for(i=1;i<=n*2;i++)
    {
        if(b[i]!='#'){
            sum-=s[i];
            m=e[i];
            dap-=(m*sum)%51123987;
            if(dap<0) dap+=51123987;
            dap%=51123987;
        }
    }
    printf("%I64d",dap);
    return 0;
}
