#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
#define maxn 4000010
#define mod 51123987
using namespace std;
typedef long long LL;
char a[maxn];
int len,p[maxn],bs[maxn],be[maxn];
LL tots[maxn],tote[maxn],sum;
void read()
{
    a[0]='$';
    int n;
    scanf("%d\n",&n);
    for(int i=1;i<=n;i++)
        a[++len]='*',a[++len]=getchar();
    a[++len]='*',a[len+1]='#';
}
void Manacher()
{
    int R=0,id;
    for(int i=1;i<=len;i++)
    {
        p[i]=R>i?min(p[id*2-i],R-i):0;
        for(;a[i-p[i]]==a[i+p[i]];p[i]++);
        p[i]--;
        if(R<i+p[i])
            R=i+p[i],id=i;
        bs[i-p[i]]++,bs[i+1]--;
        be[i]++,be[i+p[i]+1]--;
    }
}
void work()
{
    for(int i=1;i<=len;i++)
    {
        tots[i]=tots[i-1]+bs[i];
        tote[i]=tote[i-1]+be[i];
    }
    for(int i=1;i<=len;i++)
        if(a[i]!='*')
            sum+=tots[i];
    sum%=mod;
    sum=sum%2?(sum-1)/2*sum:sum/2*(sum-1);
    LL total=0;
    for(int i=1;i<=len;i++)
        if(a[i]!='*')
        {
            sum=(sum-total*tots[i]%mod+mod)%mod;
            total=(total+tote[i])%mod;
        }
}
int main()
{
    read();
    Manacher();
    work();
    cout<<sum<<endl;
    return 0;
}