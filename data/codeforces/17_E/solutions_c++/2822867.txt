#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <vector>
#include <set>
#include <map>
#include <cstring>

using namespace std;

typedef long long LL;

#define rep(i,l,r) for (int i=(l); i<=(r); i++)
#define repd(i,r,l) for (int i=(r); i>=(l); i--)

#ifndef ONLINE_JUDGE
#define debug(x) { cerr<<#x<<" = "<<(x)<<endl; }
#else
#define debug(x) {}
#endif

#define maxn 2000010
#define MD 51123987

int n,r[2*maxn],a[maxn],b[maxn];

char s[maxn];

LL manacher(char *s, int *rs, int n)
{
	LL res=0;
	for (int i=0, j=0, k=0; i<=(n-1)<<1; i++)
	{
		int t; if (i<k) t=min(r[2*j-i],(k-i)/2); else t=0;
		int x,y; 
		for (x=i/2-t, y=(i+1)/2+t; x>=0 && y<n && s[x]==s[y]; x--, y++) t++;
		rs[i]=t;
		if (k<2*y) k=2*y, j=i;
		res=(res+rs[i])%MD;
	}
	return res;
}

void lemon()
{
	scanf("%d%s",&n,s);
	LL ans=manacher(s,r,n);
	rep(i,1,n)
	{
		a[i-r[2*i-2]+1]++; a[i+1]--; b[i+r[2*i-2]]--; b[i]++;
		a[i-r[2*i-1]+1]++; a[i+1]--; b[i+r[2*i-1]+1]--; b[i+1]++;
	}
	rep(i,1,n) a[i]=(a[i]+a[i-1])%MD, b[i]=(b[i]+b[i-1])%MD;
	rep(i,1,n) b[i]=(b[i]+b[i-1])%MD;
	ans=((ans-1)*ans/2)%MD;
	rep(i,1,n) ans=(ans-LL(a[i])*b[i-1]%MD+MD)%MD;
	cout<<ans<<endl;
}
	
int main()
{
	lemon();
	return 0;
}