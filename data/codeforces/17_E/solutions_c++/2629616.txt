#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
using namespace std;
long long a[2010000],b[2010000],c[2010000],l[4010000];
char ss[2010000],s[4010000];
int n,i,j,k,num,ll;
long long an;
const int mo=51123987;
int main()
{
	//freopen("1.in","r",stdin);
	//freopen("1.out","w",stdout);
	scanf("%d",&n);
	scanf("%s",ss+1);
	for(i=1;i<=n;i++)
	{
		s[++num]='#';
		s[++num]=ss[i];
	}
	s[++num]='#';
	for(i=1;i<=num;i++)
	{
		ll=0;
		if(i<=j)
		ll=min((long long)(j-i),l[2*k-i]);
        while(i-ll-1>0&&i+ll+1<=num&&s[i-ll-1]==s[i+ll+1])
		++ll;
        l[i]=ll;
        if(i+ll>j)k=i,j=i+ll;
	}
	for(i=1;i<=n;i++)
	{
		a[i-((l[i*2]+1)>>1)]++;
		a[i]--;
		b[i-1]++;
		b[i+((l[i*2]+1)>>1)-1]--;
		
		a[i-((l[i*2+1])>>1)]++;
		a[i]--;
		b[i]++;
		b[i+((l[i*2+1])>>1)]--;
	}
	for(i=1;i<=n;i++)
	{
		a[i]=(a[i]+a[i-1])%mo;
		b[i]=(b[i]+b[i-1])%mo;
		c[i]=(c[i-1]+b[i-1])%mo;
	}
	an=c[n]*(c[n]-1)/2%mo;
	for(i=1;i<=n;i++)
	an=(an-c[i]*a[i])%mo;
	an=(an+mo)%mo;
	cout<<an;
}
