#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#define N 2000009
#define mod 51123987
using namespace std;
int n,r[2*N],a[N],b[N];
char s[N];
int manacher(char *s,int *r,int n){
    int ret=0,t,x,y;
    for(int i=0,j=0,k=0;i<=(n-1)<<1;i++){
        t=i<k?min(r[2*j-i],(k-i)/2):0;
        for(x=i/2-t,y=(i+1)/2+t;x>=0&&y<n&&s[x]==s[y];x--,y++,t++);
        r[i]=t;
        if(k<2*y) k=2*y,j=i;
        ret=(ret+r[i])%mod;
    }
    return ret;
}
int main(){
        scanf("%d%s",&n,s);
        long long ans=manacher(s,r,n);
        for(int i=1;i<=n;i++){
            a[i-r[2*(i-1)]+1]++,a[i+1]--,b[i+r[2*(i-1)]]--,b[i]++;
            a[i-r[2*i-1]+1]++,a[i+1]--,b[i+r[2*i-1]+1]--,b[i+1]++;
        }
        for(int i=1;i<=n;i++){
            a[i]=(a[i]+a[i-1])%mod;
            b[i]=(b[i]+b[i-1])%mod;
        }        
        ans=((ans-1)*ans/2)%mod;
        for(int i=1,s=0;i<=n;i++) ans=(ans-1ll*a[i]*s)%mod,s=(s+b[i])%mod;
        cout<<(ans+mod)%mod<<endl;
     
}
