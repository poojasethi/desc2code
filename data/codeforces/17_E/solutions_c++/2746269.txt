#include <cstdio>
#include <cstring>
#include <algorithm>
#include <iostream>
#include <ctime>
#include <cmath>
#define ll long long
#define maxn 2000020 
#define rep(i,n) for(int i=1;i<=n;++i)
using namespace std;
int f[maxn*2];
int pre[maxn],last[maxn];
char s[maxn];
char a[maxn*2];
int n;
ll ans,aug;
const ll MOD=51123987;
int main()
{
    scanf("%d\n",&n);
    rep(i,n)a[2*i]=getchar();
    a[0]='X';a[n*2+2]='Y';
    int k=0,v=0;
    rep(i,2*n+1)
    {
        if(i<v)f[i]=min(f[2*k-i],v-i);else f[i]=1;
        while(a[i-f[i]]==a[i+f[i]])++f[i];
        ++last[(i-f[i]+2)/2];
        --last[i/2+1];
        ++pre[(i+1)/2];
        --pre[(i+f[i])/2];
        aug+=f[i]/2;
        aug%=MOD;
        if(f[i]+i>v)
        {
            k=i;
            v=f[i]+i;
        }
    }
    rep(i,n)
    {
        pre[i]+=pre[i-1];
        pre[i]%=MOD;
        last[i]+=last[i-1];
        last[i]%=MOD;
    }
    rep(i,n)
    {
        pre[i]+=pre[i-1];
        pre[i]%=MOD;
        ans+=(ll)pre[i-1]*last[i]%MOD;
        ans%=MOD;
    }
    ans=aug*(aug-1)/2-ans;
    ans%=MOD;
    ans=(ans+MOD)%MOD;
    cout<<ans<<endl;
    return 0;
}
