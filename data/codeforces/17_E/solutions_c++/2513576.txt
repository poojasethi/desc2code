//Codeforces 17E Palisection
#include<fstream>
#include<iostream>
#include<cstdlib>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int MAXN=2000005,mod=51123987;
int n,m=0;
char a[MAXN*2],b[MAXN];
int r[MAXN*2];
int ans=0;

void prepare()
{
	int ma=0,l,last;
	for(int i=1;i<=m;i++)
	{
		if(i<=ma) l=min(ma-i,r[2*last-i]);
		else l=0;
		while(i-l-1>=1&&i+l+1<=m&&a[i-l-1]==a[i+l+1]) l++;
		r[i]=l;
		if(i+l>ma) ma=i+l,last=i;
	}
}

int st[MAXN],ed[MAXN],eds[MAXN];

void work()
{
	for(int i=1;i<=n;i++)
	{
		st[i-r[2*i]/2]++;
		st[i+1]--;
		ed[i]++;
		ed[i+r[2*i]/2+1]--;
	}
	for(int i=1;i<=n;i++)
	{
		st[i-r[2*i+1]/2+1]++;
		st[i+1]--;
		ed[i+1]++;
		ed[i+r[2*i+1]/2+1]--;
	}
	for(int i=1;i<=n;i++) st[i]+=st[i-1],ed[i]+=ed[i-1];
	for(int i=1;i<=n;i++) eds[i]=(eds[i-1]+ed[i])%mod;
	ans=(long long)eds[n]*(eds[n]-1)/2%mod;
	for(int i=1;i<=n;i++) ans=(ans-(long long)st[i]*eds[i-1])%mod;
	ans=(ans+mod)%mod;
}

int main()
{
	scanf("%d",&n);
	scanf("%s",b+1);
	for(int i=1;i<=n;i++)
	{
		a[++m]='$';
		a[++m]=b[i];
	}
	a[++m]='$';
	prepare();
	work();
	printf("%d\n",ans);
	
	return 0;
}
/*
Sample Input1:
4
babb
Sample Output1:
6

Sample Input2:
2
aa
Sample Output2:
2
*/
