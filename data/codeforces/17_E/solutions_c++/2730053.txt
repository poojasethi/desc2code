#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <algorithm>
#include <cmath>
#include <ctime>
using namespace std;
const long long cc=51123987;
long long N,num,ans,v,k;
char s[5000000];
long long a[5000000],b[5000000],f[5000000];
int main()
{
	scanf("%I64d\n",&N);
	for (long long i=1;i<=N;i++)scanf("%c",&s[i*2]);
	s[0]='A';s[2*N+2]='B';
	v=0;k=0;
	for (long long i=1;i<=2*N+1;i++)
	{
		if (i<v)f[i]=min(f[2*k-i],v-i);
		else	f[i]=1;
		while (s[i+f[i]]==s[i-f[i]])f[i]++;
		a[(i-f[i]+2)/2]++;a[i/2+1]--;
		b[(i+1)/2]++;b[(i+f[i])/2]--;
		num+=f[i]/2;
		if (i+f[i]>v)v=i+f[i],k=i;
	}
	for (long long i=1;i<=N;i++)a[i]=(a[i]+a[i-1])%cc,b[i]=(b[i]+b[i-1])%cc;
	for (long long i=1;i<=N;i++)b[i]=(b[i]+b[i-1])%cc;
	num=num%cc;num=num*(num-1)/2%cc;
	ans=0;
	for (long long i=1;i<=N;i++)
	ans=(ans+a[i]*b[i-1]%cc)%cc;
	printf("%I64d",(num-ans+cc)%cc);
}