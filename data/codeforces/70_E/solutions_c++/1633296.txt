#include<cstdio>
#include<cstring>

int f[200][200],_f[200][200],d[200][200],g[200],_g[200],F[200],
	fa[200],x[400],y[400],b[200],s[200],w[200],T(1),n,K,Ans[200];

void GetAns(int a,int b)
{	Ans[a]=b;
	for(int k=fa[a];k;k=x[k])
		if(F[y[k]]==a)
			GetAns(y[k],_f[y[k]][b]);
}

void IN(int a,int b){x[T]=fa[a];y[T]=b;fa[a]=T++;}

void GetDis(int X)
{	int i,j,k;
	for(b[s[i=0]=X]=j=1;i<j;i++)
		for(k=fa[s[i]];k;k=x[k])
			if(!b[y[k]])
				b[s[j++]=y[k]]=b[s[i]]+1;
	for(i=1;i<=n;i++)d[X][i]=b[i]-1;
	memset(b,0,sizeof b);
}

int main()
{	int i,j,k;
	scanf("%d%d",&n,&K);
	for(i=1;i<n;i++)scanf("%d",w+i);
	for(i=1;i<n;i++)
	{	scanf("%d%d",&j,&k);
		IN(j,k);
		IN(k,j);
	}
	for(i=1;i<=n;i++)GetDis(i);
	for(b[s[i=0]=j=1]=1;i<j;i++)
		for(k=fa[s[i]];k;k=x[k])
			if(!b[y[k]])
			{	b[s[j++]=y[k]]=1;
				F[y[k]]=s[i];
			}
	for(i=n-1;i>=0;i--)
	{	g[s[i]]=1000000000;
		f[s[i]][s[i]]+=K;
		for(j=1;j<=n;j++)
		{	f[s[i]][j]+=w[d[s[i]][j]];
			if(d[1][s[i]]+d[s[i]][j]==d[1][j]&&g[s[i]]>f[s[i]][j])
			{	g[s[i]]=f[s[i]][j];
				_g[s[i]]=j;
			}
		}
		for(j=1;j<=n;j++)
			if(d[1][s[i]]+d[s[i]][j]!=d[1][j]&&f[s[i]][j]>g[s[i]])
			{	f[F[s[i]]][j]+=g[s[i]];
				_f[s[i]][j]=_g[s[i]];
			}
			else
			{	f[F[s[i]]][j]+=f[s[i]][j];
				_f[s[i]][j]=j;
			}
	}
	printf("%d\n",g[1]);
	GetAns(1,_g[1]);
	for(i=1;i<=n;i++)printf("%d ",Ans[i]);printf("\n");
	return 0;
}
