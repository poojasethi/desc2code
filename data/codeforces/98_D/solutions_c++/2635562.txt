#include<cstdio>
int n,m,a[25],d[25],e[25],f[25],g[25];
void move(int x,int y,int z,int t,bool flag)
{
	if (t>n) return; int r=d[t]; if (f[t]==g[t]) flag=0;
	if (flag){
		move(x,z,y,r,1);
		for (int i=t;i<r;i++) printf("%d %d\n",x,z);	
		move(y,x,z,r,1);
		}
	else if (e[t]){
		move(x,y,z,r,1);
		for (int i=t;i<r;i++) printf("%d %d\n",x,y);
		move(z,y,x,r,1);
		for (int i=t;i<r;i++) printf("%d %d\n",y,z);
		move(x,y,z,r,0);
		}
	else move(x,z,y,t+1,1),printf("%d %d\n",x,z),move(y,x,z,t+1,1);
}
int main()
{
	scanf("%d",&n); for (int i=1;i<=n;i++) scanf("%d",&a[i]);
	for (int i=n;i;i--){
		int r=a[i]==a[i+1]?d[i+1]:i+1,type=1,tmp; d[i]=r;
		f[i]=g[i+1]*2+1; g[i]=g[r]*2+r-i;
		if (f[r]+g[r]*2+(r-i)*2<f[i]) f[i]=f[r]+g[r]*2+(r-i)*2,e[i]=1;
		if (f[i]<g[i]) g[i]=f[i];
		}
	printf("%d\n",f[1]); move(1,2,3,1,0); return 0;
}
