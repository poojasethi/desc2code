#include<cstdio>
const int N=21;
int n,cnt,d[N],res[1<<N][2];
void save(int s,int t,int num){
  for (int i=1;i<=num;i++,cnt++) res[cnt][0]=s,res[cnt][1]=t;
}
void search(int rem,int s,int t,int order){
  if (!rem) return;
  int num=1;
  while (rem-num&&d[rem-num]==d[rem]) num++;
  if (num==rem&&order){
    save(s,s^t,num-1);
    save(s,t,1);
    save(s^t,t,num-1);
  }else{
    if (num==1||!order){
      search(rem-num,s,s^t,0);
      save(s,t,num);
      search(rem-num,s^t,t,0);
    }else{
      search(rem-num,s,t,0);
      save(s,s^t,num);
      search(rem-num,t,s,0);
      save(s^t,t,num);
      search(rem-num,s,t,1);
    }
  }
}
int main(){
  scanf("%d",&n);
  for (int i=n;i;i--) scanf("%d",&d[i]);
  search(n,1,3,1);
  printf("%d\n",cnt);
  for (int i=0;i<cnt;i++) printf("%d %d\n",res[i][0],res[i][1]);
}
