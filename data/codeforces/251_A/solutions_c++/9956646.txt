#include <stdio.h>

int main(){
	int n,m,a[100005],l,r;
	long long ans;
	while(~scanf("%d%d",&n,&m)){
		for(int i=1;i<=n;i++)scanf("%d",&a[i]);
		l=1;r=3;
		ans=0;
		while(r<=n){
			while(a[r]-a[l]>m)l++;
			if(l<r){ans+=(r-l-1)*1LL*(r-l)/2;}
			r++;
		}
		printf("%I64d\n",ans);
	}
	return 0;
}
 	  	  		 		    		 				  	 		