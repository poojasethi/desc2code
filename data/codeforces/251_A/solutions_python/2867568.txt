import math 
n,d = map(int,raw_input().split())
nums = map(int,raw_input().split())
res = 0
i = 0
k = 2
while i < n-2:
    while k < n and abs(nums[k]-nums[i])<= d:
        k = k + 1
    if k-i >=3 :
        dif = abs(k-i-1)
        res = res + (dif*(dif-1))/2
    i = i + 1
print res