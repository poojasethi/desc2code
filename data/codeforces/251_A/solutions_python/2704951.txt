from sys import stdin
def m():
    n, d = map(int, stdin.readline().split())
    a = map(int, stdin.readline().split())
    r = 0
    ans = 0
    for i, x in enumerate(a):
        while r < n and a[r] - x <= d:
            r += 1
        q = r - i - 1
        ans += max(q * (q - 1) / 2, 0)
    print ans
m()
