from bisect import *
n, d = map(int, raw_input().split())
a = map(int, raw_input().split())
r = 0
for i in range(n):
	j = bisect_right(a, a[i] + d)
	r += (j - i - 1) * (j - i - 2) / 2
print r