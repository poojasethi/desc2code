import sys

def main() :
    n, d = [ int( x ) for x in sys.stdin.readline().strip().split() ]
    vs = [ int( x ) for x in sys.stdin.readline().strip().split() ]
    up = 0
    res = 0
    for down in xrange( n - 2 ) :
        while up < n and vs[ up ] <= vs[ down ] + d :
            up += 1
        up -= 1
        dif = up - down
        res += dif * ( dif - 1 ) / 2

    print res
        
        


if __name__ == '__main__' :
    main()
