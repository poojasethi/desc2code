def c(k):
    return k*(k-1)/2
    
I=lambda:map(int, raw_input().split())
n,d=I()
a=I()
i,j=0,0
cnt=0
while j<n:
    while i < j and a[j]-a[i]>d:i+=1
    if j-i>1:cnt+=c(j-i)
    j+=1
print cnt