#!/usr/bin/env python
# -*- coding:GBK
# author: sunhaowen@baidu.com
# date: 2012/12/07 00:21

def here():
    print("PrimeMusic")

a = []

if __name__ == "__main__":
    n, d = map(int, raw_input().split())
    a = map(int, raw_input().split())

    x = 0
    num = 0
    for i in xrange(0, n - 2) :
        for j in xrange(x, n) :
            if a[j] - a[i] > d :
                x = j - 1
                break
            else :
                x = j
        y = x - i
        if y <= 1 : continue
        else : num += y * (y - 1) / 2

    print(num)