from collections import deque

nd = [int(i) for i in raw_input().split()]
n = nd[0]
d = nd[1]
x = deque([int(i) for i in raw_input().split()])
result = 0
if len(x) < 3:
 print result
else:
 dd = deque([x[0],x[1]])
 for i in range(2,n):
  dd.append(x[i])
  while dd[-1] - dd[0] > d:
   dd.popleft()
  result += (len(dd) - 1)*(len(dd) - 2)//2
 print result