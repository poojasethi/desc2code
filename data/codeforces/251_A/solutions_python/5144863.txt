import sys
n, d = map(int, sys.stdin.readline().strip().split())
t = map(int, sys.stdin.readline().strip().split()) + [1000000001 + d]
d, n = d + 1, n - 2
s, i, j = 0, 0, 2
while i < n:
    if t[j] - t[i] < d: j += 1
    else:
        s += (j - i) * (j - i - 3)
        i += 1
print 0 if n < 1 else s / 2 + n