R=lambda:map(int,raw_input().split())
n,d=R()
a=R()
w,b,e=0,0,2
while e<=n:
  while b+2<e and a[e-1]-a[b]>d:b+=1
  w+=(e-b-1)*(e-b-2)/2
  e+=1
print w