from bisect import bisect
n, d = map(int, raw_input().split())
arr = map(int, raw_input().split())

ans = 0;
for i in xrange(0, n):
  pos = bisect(arr, arr[i]+d, i)
  ans += (pos-i-1)*(pos-i-2)/2

print ans