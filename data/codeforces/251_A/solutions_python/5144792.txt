n, d = map(int, raw_input().split())
d += 1
t = map(int, raw_input().split()) + [1000000001 + d]
s, j = 0, 2
for i in range(n - 2):
    q = d + t[i]
    while t[j] < q: j += 1
    k = j - i
    if k > 2: s += (k - 1) * (k - 2)
print s / 2