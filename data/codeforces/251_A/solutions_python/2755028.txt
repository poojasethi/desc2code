import sys

n, d = [int(x) for x in raw_input().split()]
data = [int(x) for x in raw_input().split()]

n -= 1
ans = 0
while len(data) > 1:
  while n >= 0 and data[-1] - data[n] <= d:
    n -= 1
  ans += (len(data) - n - 2) * (len(data) - n - 3) / 2
  data.pop()

print ans
