n, d = map(int, raw_input().split())
d += 1
t = map(int, raw_input().split()) + [1000000001 + d]
s, j = 0, 2
for i in range(n - 2):
    while t[j] - t[i] < d: j += 1
    s += (j - i) * (j - i - 3)
print 0 if n < 3 else s / 2 + n - 2