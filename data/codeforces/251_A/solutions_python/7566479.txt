n,d=map(int,raw_input().split())
a=map(int,raw_input().split())
ans,j=0,0
for i in xrange(n):
    while(j<n and a[j]-a[i]<=d):
        j+=1
    ans+=max(0,(j-i-1)*(j-i-2)/2)
print ans
