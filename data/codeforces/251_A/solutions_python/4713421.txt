read = lambda : map(int, raw_input().split())
n , d = read()
x = read()
count = 0
j = 0
for i in range(n-2):
    while j < n and x[j] - x[i] <= d:
        j += 1
    m = j - i
    if m >= 3:
        count += ((m - 2) * (m - 1)) / 2
print count
