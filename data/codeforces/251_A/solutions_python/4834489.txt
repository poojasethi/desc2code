r=lambda:map(int,raw_input().split())
n,d=r()
a=r()
r=0
s=0
for l in xrange(n):
    while r != n-1 and a[r+1] - a[l] <= d:r+=1 
    #for i in range(r,n):
    #    if i != n-1 and a[i+1] - a[l] > d: break 
    #r=i
    k=r-l
    s+=(k-1)*k/2
print s