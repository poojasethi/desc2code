import bisect

def main():
    n,d = map(int, raw_input().split())
    x = map(int, raw_input().split())

    res = 0
    for i in range(n-2):
        dPos = bisect.bisect(x,x[i]+d)-i-1
        res += int(dPos*(dPos-1)/2)
    print(res)
main()