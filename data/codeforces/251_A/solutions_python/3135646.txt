import bisect

def c(k):
    return k*(k-1)/2
    
I=lambda:map(int, raw_input().split())
n,d=I()
a=I()
cnt=0
for i in xrange(n):
    p=bisect.bisect_left(a,a[i]-d,0,i)
    cnt+=c(i-p)
print cnt
