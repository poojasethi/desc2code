#include <stdio.h>
#include <string.h>
char s[255][255];
int k[255];
int a[7];
int k1;
char s1[255];
int n,m;
int rez=0;
void work(){
    char ts[255];
    strcpy(ts,s1);
    for (int j=1;j<=k1;j++)
        ts[a[j]]='1'- ts[a[j]]+'0';
            for (int j=0;j<m-1;j++){
        int p=0;
        for (int i=0;i<n;i++)
            if (ts[i]==s[j][i])
                p++;
        if (p!=k[j])
            return;
    }
    rez++;
}
void rec(int i,int j){
    a[k1-j]=i;
    if (j==0){
        work();
        return;
    }
    for (int i1=i+1;i1<n;i1++)
        rec(i1,j-1);
    
}
int main(){
  
   
    scanf("%d%d",&n,&m);
    scanf("%s%d",s1,&k1);
    for (int i=0;i<n;i++)
        if (s1[i]=='0')
            s1[i]='1';
        else
            s1[i]='0';
    for (int i=0;i<m-1;i++)
       scanf("%s%d",s[i],&k[i]);
    
    rec(-1,k1);
    printf("%d",rez);
}