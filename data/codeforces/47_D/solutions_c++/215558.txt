#include <iostream>
#include <string>
using namespace std;

#define forF(i,n)  for(int (i)=0;(i)<(n);(i)++)
#define forFF(i,m,n)  for(int (i)=(m);(i)<(n);(i)++)

#define MAXN 35

string s[10];
char tryS[MAXN] = { 0 };
int c[10] = { 0 },n,m,ans=0;
bool isPick[MAXN] = { false };


void Comb(int nth, int need, int pos) {
	
	if(nth == need) {

		forF(i,n) {
			if(!isPick[i])
				tryS[i] = (s[0][i] == '0' ? '1' : '0');
			else tryS[i] = s[0][i];
		}

		forFF(i,1,m){
			int cnt=0;
			forF(j,n){
				if(tryS[j] == s[i][j]) cnt++;
			}

			if(cnt != c[i])
				return;
		}
		ans++;
		return;
	}

	forFF(i,pos,n) {
		isPick[i] = true;
		Comb(nth+1,need,i+1);
		isPick[i] = false;
	}
}


int main() {
	cin>>n>>m;
	forF(i,m)
		cin>>s[i]>>c[i];

	Comb(0,c[0],0);
	cout<<ans<<endl;
}
