#include <cstdio>
char s[40];
typedef long long ll;
int n,m,b[11],ans;
ll a[11];
int d(ll a,ll b){
	a ^= b;
	int ans = 0;
	while (a){
		ans += a & 1;
		a >>= 1;
	}
	return n - ans;
}
ll h(char * s){
	ll ans = 0;
	for (int i = 0;i < n;i++) ans = ans * 2 + (s[i] == '1');
	return ans;
}
void work(int k,int x){
	if (x == b[m]){
		ll x = h(s);
		for (int i = 1;i < m;i++) if (d(x,a[i]) != b[i]) return;
		ans++;
		return;
	}
	for (int i = k + 1;i < n;i++){
		s[i] = '1' + '0' - s[i];
		work(i,x + 1);
		s[i] = '1' + '0' - s[i];
	}
}
int main(){
	scanf("%d%d",&n,&m);
	for (int i = 1;i <= m;i++){
		scanf("%s%d",s,&b[i]);
		a[i] = h(s);
	}
	for (int i = 0;i < n;i++) s[i] = '0' + '1' - s[i];
	ans = 0;
	work(-1,0);
	printf("%d",ans);
}
 	 		 	 			    		 		 		 		