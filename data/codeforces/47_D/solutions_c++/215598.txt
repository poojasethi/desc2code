#include <iostream>
#include <string>
#include <algorithm>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)
#define rep(i,b) REP(i,0,b)

int n, m, correct[15], C[40];
string in[15];

char rev(char c){ return (c == '0' ? '1' : '0'); }
int ok(string s){
	int i, j;
	rep(i,m){
		int cnt = 0;
		rep(j,n)cnt += (in[i][j] == s[j]);
		if(cnt != correct[i])return 0;
	}
	return 1;
}

int main(){
	int i;

	cin >> n >> m;
	rep(i,m)cin >> in[i] >> correct[i];
	
	rep(i,n)C[i] = 0;
	rep(i,correct[0])C[n-i-1] = 1;
	
	int ret = 0;
	do {
		string s = "";
		rep(i,n)if(C[i])s += in[0][i]; else s += rev(in[0][i]);
		ret += ok(s);
	} while(next_permutation(C,C+n));

	cout << ret;
	return 0;
}