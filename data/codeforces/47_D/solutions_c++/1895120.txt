#include<iostream>
using namespace std;
int n,m,ans=0;
int a[20][40],c[10],b[10];
void dfs(int k)
{
	int i,j;
	for (i=1;i<=m;i++)
	if (c[i]>b[i] || c[i]+n-k+1<b[i]) return;
	if(k>n) { ans++; //cout<<c[1]<<" "; cout<<c[2]<<endl;
	return; }
	for (i=0;i<2;i++)
	{
		for (j=1;j<=m;j++)
			if (i==a[j][k]) c[j]++;
			dfs(k+1);
			for (j=1;j<=m;j++)
			if(i==a[j][k]) c[j]--;
	}
}
int main()
{
	int i,j;
	char ch;
//	freopen("in.txt","r",stdin);
	cin>>n>>m;
	for (i=1;i<=m;i++)
	{
		for (j=1;j<=n;j++)
		{
			cin>>ch;
			a[i][j]=ch-'0';
		}
		cin>>b[i];
	}
	dfs(1);
	cout<<ans<<endl;
	return(0);
}

     	  	   		 				   	  	