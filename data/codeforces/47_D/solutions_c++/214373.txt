#include <iostream>
#include <cstdio>
using namespace std;

char buf[10][36];
int a[10];
char good[36];
char f[36];
int n, m;
int ans=0;

bool rec1(){
  for (int i=0; i<m; ++i){
    if (f[i]==1)
      good[i]=buf[0][i];
    else
      good[i]='0'+'1'-buf[0][i];
  }
  for (int i=1; i<n; ++i){
    int lans=0;
    for (int j=0; j<m; ++j)
      if (good[j]==buf[i][j])
        lans++;
    if (lans!=a[i]) return false;
  }
  return true;
}

void rec(int n1, int k1){
  if (k1==0){
    if (rec1()) ans++;
    return;
  }
  if (n1==m)
    return;
  if (n1+k1-2>m) return;
  f[n1]=0;
  rec(n1+1, k1);
  f[n1]=1;
  rec(n1+1, k1-1);
  f[n1]=0;
}

int main(){
  cin>>m>>n;
  for (int i=0; i<n; ++i){
    cin>>buf[i]>>a[i];
  }
  rec(0, a[0]);
  cout<<ans;
}
