#include<cstdio>  
#include<cstring>  
#include<cstdlib>  
#include<iostream>  
#include<algorithm>  
using namespace std;
#define fo(i,a,b) for(i=a;i<=b;++i)
typedef long long LL;
const int mn=35;
int n,m,i,p[mn];
string s[35];
LL ans=0;
void go(int i,int j,string st)
{
    if(i>n)
    {
        int l,i,k;
        fo(k,0,m)
        {
            l=0;
            fo(i,0,n)
                l+=(s[k][i]==st[i]);
            if(p[k]!=l)return;
        }
        ++ans;
        return;
    }
    if(n-i>=p[0]-j)go(i+1,j,st+char('0'+'1'-s[0][i]));
    if(j<p[0])go(i+1,j+1,st+s[0][i]);
}
int main()
{
    cin>>n>>m;
    --n,--m;
    fo(i,0,m)cin>>s[i]>>p[i];
    go(0,0,"");
    cout << ans << endl;
    return 0;
}
