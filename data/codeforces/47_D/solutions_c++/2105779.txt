#include <cstdio>

using namespace std;

const int maxn = 37, maxm = 11;
int n, m, ans, now[maxn], code[maxm][maxn], c[maxm];

void dfs(int k, int p)
{
	if (k == n)
	{
		if (p == c[0])
		{
			bool flag = true;
			for (int i = 1; i < m; i++)
			{
				int sum = 0;
				for (int j = 0; j < n; j++)
				        if (now[j] == code[i][j])
				                sum++;
				if (sum != c[i])
				        flag = false;
			}
			if (flag) ans++;
                }
        }
        else
        {
		if (p < c[0])
		{
			now[k] = code[0][k];
			dfs(k + 1, p + 1);
		}
		now[k] = code[0][k] ^ 1;
		dfs(k + 1, p);
	}
}

int main()
{
	scanf("%d%d", &n, &m);
	for (int i = 0; i < m; i++)
	{
		char str[n + 10];
		scanf("%s%d", str, &c[i]);
		for (int j = 0; j < n; j++)
		        code[i][j] = *(str + j) - '0';
	}
	ans = 0;
	dfs(0, 0);
	printf("%d\n", ans);
	
	return 0;
}
