#include<cstdio>
#include<algorithm>
using namespace std;
char a[20][40];
int n,m;
long long dfs(int pos,int cao[])
{
    for(int i=1;i<=m;i++)
    if(cao[i]<0)return 0;
    if(pos==-1)
    {
        for(int i=1;i<=m;i++)
        if(cao[i]>0)
        return 0;
        return 1;
    }
    int cao1[20];
    for(int i=1;i<=m;i++)
    if(a[i][pos]=='1')
    cao1[i]=cao[i]-1;
    else
    cao1[i]=cao[i];
    long long ans=dfs(pos-1,cao1);
    for(int i=1;i<=m;i++)
    if(a[i][pos]=='0')
    cao1[i]=cao[i]-1;
    else
    cao1[i]=cao[i];
    ans+=dfs(pos-1,cao1);
    return ans;
}
int main()
{
    int oo[20];
    scanf("%d%d",&n,&m);
    for(int i=1;i<=m;i++)
    scanf("%s%d",a[i],&oo[i]);
    long long ans=dfs(n-1,oo);
    printf("%lld",ans);
}
