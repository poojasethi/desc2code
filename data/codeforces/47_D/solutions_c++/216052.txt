#include <iostream>
#include <map>
#include <vector>
using namespace std;
typedef long long ll;
typedef vector<int> vi;

int n, m, d[40];
char s[40][40];
map< vi, ll > dp;

ll go(vi v) {
	if(dp.count(v)) return dp[v];
	ll& res = dp[v];
	if(v[0] < 0) {
		int s = 0; for(int i = 1; i <= m; i++) s += v[i];
		res = (s == 0);
	}
	else {
		int pos = v[0]--;
		for(char c = '0'; c <= '1'; c++) {
			vi nv = v; int ok = 1;
			for(int i = 1; i <= m; i++) {
				if(s[i][pos] == c && --nv[i] < 0) {
					ok = 0; break;
				}
			}
			if(ok) res += go(nv);
		}
	}
	return res;
}

int main() {
	cin >> n >> m;
	for(int i = 1; i <= m; i++) cin >> s[i] >> d[i];
	vi v; v.push_back(n-1);
	for(int i = 1; i <= m; i++) v.push_back(d[i]);
	cout << go(v) << endl;
	return 0;
}
