#include <iostream>
#include <cstdio>
#include <string>
#include <cstring>
using namespace std;

int ans,n,m,p[15];
string s[15];

void dfs(int x,int y,string ss)
{
    if (x>=n)
    {
        if (y<p[0]) return;
        for (int i=0;i<m;i++)
        {
            int cnt=0;
            for (int j=0;j<n;j++) cnt+=(s[i][j]==ss[j]);
            if (cnt!=p[i]) return;
        }
        ans++;return;
    }
    if (y<p[0]) dfs(x+1,y+1,ss+s[0][x]);
    dfs(x+1,y,ss+char('0'+'1'-s[0][x]));
}

int main()
{
 //   freopen("47D.txt","r",stdin);
    cin.sync_with_stdio(false);
    cin>>n>>m;
    for (int i=0;i<m;i++)
    {
        cin>>s[i]>>p[i];
        if (p[i]>p[0]) { swap(p[i],p[0]);swap(s[i],s[0]); }
    }
    dfs(0,0,"");
    cout<<ans<<endl;

    return 0;
}
