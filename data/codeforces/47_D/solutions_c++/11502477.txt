#include<iostream>
#include<math.h>
#include<algorithm>
#include<stdio.h>
#include<map>
#include<vector>
#include<set>
#include<iomanip>
#define F first
#define S second
#define P system("PAUSE");
#define H return 0;
#define pb push_back
using namespace std;
const long long A=100000000000000LL,N=228;

string a[N];
long long b[N],i,j,n,m;

long long rec(long long p,long long k,string c){
	if(p==n){
		for(int i=0;i<m;i++){
			long long d=0;
			for(int j=0;j<n;j++)if(a[i][j]==c[j])d++;
			if(d!=b[i])return 0;
		}
		return 1;
	}
	return rec(p+1,k,c+(char)('1'+'0'-a[0][p]))+(k<b[0]? rec(p+1,k+1,c+a[0][p]):0);
}

int main(){
	cin>>n>>m;
	for(i=0;i<m;i++)cin>>a[i]>>b[i];
	cout<<rec(0,0,"");		
}
