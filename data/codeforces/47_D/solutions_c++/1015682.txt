#include <iostream>
#include <algorithm>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)

string s[10];
int ans,n,m,i,a[10];

int check(string t){
        int i,j,k;
        REP(i,1,m){
                k=0;
                REP(j,0,n) if (t[j]!=s[i][j]) k++;
                if (k!=a[i]) return 0;
        }
        return 1;
}

void dfs(int x,int y,string t){
        if (x==n){
                if (y==a[0])ans+=check(t);
                return;
        }
        dfs(x+1,y,t+s[0][x]);
        if (y<a[0]) dfs(x+1,y+1,t+char('0'+(s[0][x]-'0')^1));
}

int main(){
        cin>>n>>m;
        REP(i,0,m){
                cin>>s[i]>>a[i];
        }
        REP(i,1,m)if (a[i]<a[0]) swap(a[i],a[0]),swap(s[i],s[0]);
        ans=0;
        dfs(0,0,"");
        cout<<ans<<endl;
}
