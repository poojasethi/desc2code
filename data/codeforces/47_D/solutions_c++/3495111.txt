#include<stdio.h>
#include<string.h>
int a[100][100],num[100];
int cnt,p,n,m;
int now[1000];
bool judge()
{
     int i,j;
	 for(i=0;i<m;i++)
	 {
		 int sum=0;
		 for(j=0;j<n;j++)
		 {
             if(now[j]==a[i][j]) 
				 sum++;
		 }
		 if(sum!=num[i]) return false;
	 }
	 return true;
}
void dfs(int d,int s)
{
	if(d==n)
	{
		if(s==num[p]&&judge())
			cnt++;
		return ;
	}
	if(s!=num[p])
	{
		now[d]=a[p][d];
		dfs(d+1,s+1);
	}
	now[d]=a[p][d]^1;
	dfs(d+1,s);
}
int main()
{
	int i,j;
	char s[1000];
	while(scanf("%d%d",&n,&m)!=-1)
	{
	    p=0;
		for(i=0;i<m;i++)
		{
			scanf("%s%d",s,&num[i]);
            for(j=0;j<n;j++)
				a[i][j]=s[j]-'0';
			if(num[p]>num[i]) p=i;
		}
	//	printf("%d\n",p);
		cnt=0;
		dfs(0,0);
		printf("%d\n",cnt);
	}
	return 0;
}
 					 			 			 		 			 		 	