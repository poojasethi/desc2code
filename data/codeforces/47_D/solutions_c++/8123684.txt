#include <cstdio>
#include <cstring>

char s[100][100];
int c[100], n, len;

int gao(int dep) {
    if (dep == len) {
        for (int i = 0; i < n; i++)
            if (c[i]) return 0;
        return 1;   
    }
    int res = 0;
    for (char ch = '0'; ch <= '1'; ch++) {
        bool yes = true;
        for (int i = 0; i < n; i++)
            if (ch == s[i][dep]) {
                c[i]--;
                if (c[i] < 0) yes = false;
            }
        if (yes) res += gao(dep + 1);
        for (int i = 0; i < n; i++)
            if (ch == s[i][dep]) 
                c[i]++;  
    }
    return res;
}

int main () {
    scanf("%d %d", &len, &n);
    for (int i = 0; i < n; i++) scanf("%s %d", s[i], &c[i]);
    printf("%d\n", gao(0));
    return 0;    
}
