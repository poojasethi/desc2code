#include <iostream>
#include <cstdio>
#include <cstring>
#include <vector>
#include <map>
#include <set>
#include <algorithm>
#define fo(i,a,b) for (i=a;i<=b;i++)
using namespace std;
int i,j,n,m,k,t,w;
int ans;
string s[50];
int p[50];
void dfs(int x,int y,string ss){
	if (x==n){
		if (y<p[1]) return;
		fo(i,1,m){
			int cnt=0;
			fo(j,0,n-1) cnt+=(ss[j]==s[i][j]);
			if (cnt!=p[i]) return;
		}
		ans++;
		return;
	}
	if (y<p[1]) dfs(x+1,y+1,ss+s[1][x]);
	dfs(x+1,y,ss+char('0'+'1'-s[1][x]));
}
int main(){
//	freopen("a.in","r",stdin);
//	freopen("a.out","w",stdout);
	cin>>n>>m;
	fo(i,1,m){
	  cin>>s[i]>>p[i];  
	}
	dfs(0,0,"");
	cout<<ans;
}