from itertools import combinations

def gen_all(s, c):
	res = []
	a = int(s, 2)
	for comb in combinations(range(len(s)), c):
		b = a
		for p in comb:
			b ^= 1 << p
		yield b

def filter_all(s, c, r):
	a = int(s, 2)
	return (x for x in r if bin(a ^ x).count('1') == c)

(n, k) = map(int, raw_input().split())
res = []
for i in range(k):
	(s, c) = raw_input().split()
	if not res:
		res = gen_all(s, int(c))
	else:
		res = filter_all(s, int(c), res)

print len(list(res))
