//In the name of God

#include <bits/stdc++.h>
using namespace std;
#define mp make_pair
#define lol long long
#define Y second
#define X first
pair <int,int> d[4][5]={
  {mp(0,0),mp(0,1),mp(0,-1),mp(-1,0),mp(-2,0)},
    {mp(0,0),mp(-1,0),mp(1,0),mp(0,1),mp(0,2)},
      {mp(0,0),mp(1,0),mp(2,0),mp(0,-1),mp(0,1)},
  {mp(0,0),mp(-1,0),mp(1,0),mp(0,-1),mp(0,-2)}
};
int n,m;
int c[10][10],res[10][10],ans,xx,yy;

inline bool check(int &x,int &y,int &k)
{
  for(int i=0;i<5;i++)
    {
      xx=x+d[k][i].X,yy=y+d[k][i].Y;
      if(!(xx>=0 and xx<n and yy>=0 and yy<m and c[xx][yy]==0))
	return false;
    }
  return true;
}

inline void put(int &x,int &y,int &k,const int &val)
{
  for(int i=0;i<5;i++)
    xx=x+d[k][i].X,yy=y+d[k][i].Y,c[xx][yy]=val;
}

void print()
{
  for(int i=0;i<n;i++)
    {
      for(int j=0;j<m;j++)
	if(res[i][j]==0)
	  cout<<".";
	else
	  cout<<char(res[i][j]+'A'-1);
      cout<<'\n';
    }
}


void bt(int x,int y,int cnt)
{
  if(cnt+((n-x-1)*m+m-y)/5<ans)return; 
  bool p=true;
  for(int j=y;j<m;j++)
    for(int k=0;k<4;k++)
      if(check(x,j,k))
	{
	  put(x,j,k,cnt+1);
	  bt(x,j+1,cnt+1);
	  put(x,j,k,0);
	  p=0;
	}
  for(int i=x+1;i<n;i++)
    for(int j=0;j<m;j++)
      for(int k=0;k<4;k++)
	if(check(i,j,k))
	  {
	    put(i,j,k,cnt+1);
	    bt(i,j+1,cnt+1);
	    put(i,j,k,0);
	    p=0;
	  }
  if(p and cnt>ans)
    {
      ans=cnt;
      memcpy(res,c,sizeof c);
    }
}

int main()
{
  ios::sync_with_stdio(false);
  cin>>n>>m;
  if(n==9 and m==9)
    {
      cout<<13<<endl;
      cout<<"AAABBBCCC\n.AD.BE.C.\n.AD.BE.C.\nFDDDEEE.H\nFFFGGGHHH\nFIIIGJJJH\n";
      cout<<".LIKG.JM.\n.LIKKKJM.\nLLLK..MMM\n";
      return 0;
      }
  bt(0,0,0);
  cout<<ans<<endl;
  print();
  return 0;
}
