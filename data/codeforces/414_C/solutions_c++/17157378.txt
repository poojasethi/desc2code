#include <cstdio>
#include <cstring>
#include <algorithm>
#define ll long long 
const ll M = 1<<21;
using namespace std;
ll sum[30][2],a[M],b[M],x,ans,Q,n,N;
ll read(){
	ll x = 0,f = 1,c = getchar();
	while (c<'0' || c>'9') {if (c=='-') f = -1;c = getchar();}
	while (c>='0' && c<='9') x = x*10+c-'0',c = getchar();
	return x*f;
}
void work(ll l,ll r,ll deep) {
	if (deep==0) {sum[deep][0] = sum[deep][1] = 0;return;}
	ll mid = (l+r)>>1;
	work(l,mid,deep-1);
	work(mid+1,r,deep-1);
	for (int i=l;i<=mid;i++)
		sum[deep][0]+=lower_bound(a+mid+1,a+r+1,a[i])-(a+mid+1);
	for (int i=mid+1;i<=r;i++)
		sum[deep][1]+=lower_bound(a+l,a+mid+1,a[i])-(a+l);
	sort(a+l,a+r+1);
}
int main(){
	n = read();N = 1<<n;
	for (ll i=1;i<=N;i++) a[i] = read();
	work(1,N,n);
	Q = read();
	for (ll I=1;I<=Q;I++) {
		x = read();ans = 0;
		for (ll i=x;i>=0;i--) swap(sum[i][0],sum[i][1]);
		for (ll i=0;i<=n;i++) ans+=sum[i][0];
		printf("%I64d\n",ans);
	}
}