#include<cstdio>
#include<cstring>
typedef long long LL;
inline void readi(int &x);
void writell(const LL &x);
const int maxn=1050000;
int n,K,Q;
int a[maxn],ta[maxn],s[25];
LL b[25][2],ans;

void calc(int l,int r,int k)
{
	if(!k)return;
	int m=l+r>>1;
	calc(l,m,k-1);
	calc(m,r,k-1);
	int i,j,p=l;
	for(i=l,j=m;i<m;i++)
	{
		for(;j<r&&a[j]<a[i];j++);
		b[k][0]+=j-m;
	}
	for(i=m,j=l;i<r;i++)
	{
		for(;j<m&&a[j]<a[i];j++)ta[p++]=a[j];
		b[k][1]+=j-l;
		ta[p++]=a[i];
	}
	for(;j<m;j++)ta[p++]=a[j];
	memcpy(a+l,ta+l,1<<k+2);
}

int main()
{
	readi(K),n=1<<K;
	for(int i=0;i<n;i++)readi(a[i]);
	readi(Q);
	calc(0,n,K);
	for(int i=1;i<=K;i++)ans+=b[i][0];
	for(int q,i;Q--;)
	{
		readi(q);
		for(i=q;i;i--)
			ans-=b[i][s[i]],ans+=b[i][s[i]^=1];
		writell(ans);putchar('\n');
	}
	return 0;
}

inline void readi(int &x)
{char c;while(c=getchar(),c<'0'||c>'9');
x=c^'0';while(c=getchar(),c>='0'&&c<='9')x=x*10+(c^'0');}
void writell(const LL &x)
{if(x<10)putchar('0'+x);
else writell(x/10),putchar('0'+x%10);}
