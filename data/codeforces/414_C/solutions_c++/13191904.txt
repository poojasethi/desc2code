#include<cstdio>
#include<algorithm>
#define ll long long
using namespace std;
ll arr[(ll)1e7],cur[30],ans[30][2],inv,n,m;
void merge(ll l,ll r,ll d)
{
	ll mid=(l+r)/2;
    ll p=mid+1,res=0;
	for(ll i=l;i<=mid;i++)
	{
		while(p!=r+1 && arr[i]>arr[p])
            p++;
		res+=p-mid-1;
	}
	ans[d][0]+=res;
	inv+=res;
	p=l;
	res=0;
	for(ll i=mid+1;i<=r;i++)
	{
		while(p!=mid+1 && arr[i]>arr[p])
            p++;
		res+=p-l;
	}
	ans[d][1]+=res;
}
void msort(ll l,ll r,ll d=n)
{
	ll mid=(l+r)/2;
	if(r==l)
        return;
	msort(l,mid,d-1);
	msort(mid+1,r,d-1);
	merge(l,r,d);
	inplace_merge(arr+l,arr+mid+1,arr+r+1);
}
int main()
{
	scanf("%d",&n);
	for(ll i=0;i<(1<<n);i++)
        scanf("%d",&arr[i]);
	msort(0,(1<<n)-1);
	scanf("%d",&m);
	for(ll i=0;i<m;i++)
    {
		ll q;
		scanf("%d",&q);
		inv=0;
		for(ll j=0;j<=q;j++)
            cur[j]^=1;
		for(ll j=0;j<=n;j++)
            inv+=ans[j][cur[j]];
		printf("%I64d\n",inv);
	}
	return 0;
}
