//shjj-414c

#include <iostream>
#include <cstring>
#include <cstdio>
#include <cstdlib>

using namespace std;

const int N=1<<20;
int a[N+3],b[N+3],c[N+3],T[30],n,m,Qn,Now;
long long f[2][30],ans;

void Work(int l,int r,int d)
{
if (l==r) return;
int mid=(l+r)>>1;
Work(l,mid,d-1);Work(mid+1,r,d-1);
int tl=l,tr=mid+1,ll=l;
for (;tl<=mid||tr<=r;)
  if ((tl<=mid&&b[tl]<=b[tr])||(tr>r)) f[Now][d]+=ll-tl,c[ll++]=b[tl++];
	else c[ll++]=b[tr++];
for (int i=l;i<=r;i++) b[i]=c[i];
}

int main()
{
scanf("%d",&n);m=1<<n;
for (int i=1;i<=m;i++) {scanf("%d",&a[i]);b[i]=a[i];}
Work(1,m,n);
for (int i=1;i<=m;i++) b[i]=a[m-i+1];
Now=1;Work(1,m,n);Now=0;
for (int i=1;i<=n;i++) ans+=f[0][i];
scanf("%d",&Qn);
for (int i=1;i<=Qn;i++)
  {
  int x;scanf("%d",&x);
  for (int j=1;j<=x;j++)
    {
	ans-=f[T[j]][j];
	T[j]^=1;
	ans+=f[T[j]][j];
	}
  printf("%I64d\n",ans);
  }
}
