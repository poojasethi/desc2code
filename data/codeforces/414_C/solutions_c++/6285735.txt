#include <algorithm>
#include <cstdio>
#include <cstdlib>
using namespace std;

typedef long long ll;

int n, nn;
int a[1123456];
ll all[22];
ll s[22];
ll akt;
int m;

int main()
{
	scanf("%d", &n);
	nn=(1<<n);

	if(nn==1) {
		scanf("%d", &a[0]);
		scanf("%d", &m);
		for(int i=0; i<m; i++) printf("0\n");
		exit(EXIT_SUCCESS);
	}

	for(int i=0; i<nn; i++) scanf("%d", &a[i]);

	for(int k=0; k<n; k++) {
		all[k]=0;
		s[k]=0;
		for(int b=0; b<nn; b+=(1<<(k+1))) {
			int j=b+(1<<(k+1))-1;
			for(int i=b+(1<<k)-1; i>=b; i--) {
				while(j>=b+(1<<k) && a[j]>=a[i]) j--;
				s[k]+=((ll)(j-(b+(1<<k)-1)));
				all[k]+=((ll)(j-(b+(1<<k)-1)));
			}
			j=b+(1<<k)-1;
			for(int i=b+(1<<(k+1))-1; i>=b+(1<<k); i--) {
				while(j>=b && a[j]>=a[i]) j--;
				all[k]+=((ll)(j-(b-1)));
			}
			sort(a+b, a+b+(1<<(k+1)));
		}
	}

	scanf("%d", &m);

	for(int i=0; i<m; i++) {
		int q;
		scanf("%d", &q);
		for(int k=q-1; k>=0; k--) {
			s[k]=all[k]-s[k];
		}
		akt=0;
		for(int k=0; k<n; k++) akt+=s[k];
		printf("%I64d\n", akt);
	}

	return 0;
}
