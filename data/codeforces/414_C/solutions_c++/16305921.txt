#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <algorithm>

#define MAXN 1100000

using namespace std;

typedef long long int LL;

int n,m;
int a[MAXN];
LL f[22][2];

void Merge(int L,int R,int dep)
{
    if(L>=R) return;
    int M=(L+R)>>1;
    Merge(L,M,dep-1);
    Merge(M+1,R,dep-1);
    for(int i=L;i<=M;i++)
    {
        f[dep][0]+=lower_bound(a+M+1,a+R+1,a[i])-a-M-1;
        f[dep][1]+=(R-M)-(upper_bound(a+M+1,a+R+1,a[i])-a-M-1);
    }
    sort(a+L,a+R+1);
}

int main()
{
    scanf("%d",&n);
    for(int i=1;i<=(1<<n);i++) scanf("%d",&a[i]);
    Merge(1,1<<n,n);
    scanf("%d",&m);
    for(int i=1;i<=m;i++)
    {
        LL ans=0;
        int q;
        scanf("%d",&q);
        for(int j=q;j>=0;j--)
            swap(f[j][0],f[j][1]);
        for(int j=0;j<=n;j++)
            ans+=f[j][0];
        printf("%I64d\n",ans);
    }
    return 0;
}