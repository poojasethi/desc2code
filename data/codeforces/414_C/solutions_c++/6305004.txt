#include <cstdio>
#include <cstring>

using namespace std;

const int MaxN = 1<<20;

typedef long long LL;

int n,m,N;
int a[MaxN+10],b[MaxN+10];
LL sum[25][2];
int state[25];

void calc(int l,int r,int tier){
	if(tier){
		int mid=l+r >> 1;calc(l,mid,tier-1);calc(mid+1,r,tier-1);
		for(int L=l,R=mid+1;L<=mid && R<=r;) if(a[L]<a[R]) sum[tier][1]+=r-R+1,L++; else R++;
		for(int L=l,R=mid+1;L<=mid && R<=r;) if(a[L]>a[R]) sum[tier][0]+=mid-L+1,R++; else L++;
		int L=l,R=mid+1,cnt=0;
		while(L<=mid && R<=r){
			if(a[L]<a[R]) b[++cnt]=a[L++];
			else b[++cnt]=a[R++];
		}
		while(L<=mid) b[++cnt]=a[L++];
		while(R<=r) b[++cnt]=a[R++];
		for(int i=1;i<=cnt;i++) a[i-1+l]=b[i];
	}
}
int main()
{
	scanf("%d",&n);
	N=1<<n;for(int i=1;i<=N;i++) scanf("%d",&a[i]);
	calc(1,N,n);scanf("%d",&m);
	for(int i=1;i<=m;i++){
		int q;LL res=0;scanf("%d",&q);
		for(int i=0;i<=q;i++) state[i]^=1;
		for(int i=0;i<=n;i++) res+=sum[i][state[i]];
		printf("%I64d\n",res);
	}
	return 0;
}
