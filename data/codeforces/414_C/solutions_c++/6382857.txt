//AYIT省赛组队训练（二）E/CodeForces 414C
//http://blog.csdn.net/ck_boss/article/details/23136751
#include<iostream>
#include<algorithm>
using namespace std;

typedef long long int LL;

int m,a[1<<21];
LL dp[21][2];

void merge_sort(int l,int r,int dep)
{
    if(l>=r)
    {
        dp[dep][0]=dp[dep][1]==0;
        return;
    }
    int m=(l+r)/2;
    merge_sort(l,m,dep-1);
    merge_sort(m+1,r,dep-1);
    for(int i=l;i<=m;i++)
        dp[dep][0]+=lower_bound(a+m+1,a+r+1,a[i])-(a+m+1),
        dp[dep][1]+=r-m-(upper_bound(a+m+1,a+r+1,a[i])-(a+m+1));
    sort(a+l,a+r+1);
}

int main()
{
    int n,x,i;
    cin>>n;
    x=1<<n;
    for(i=1;i<=x;i++)
        cin>>a[i];
    merge_sort(1,x,n);
    cin>>m;
    while(m--)
    {
        int q;
        cin>>q;
        for(i=1;i<=q;i++)
            swap(dp[i][0],dp[i][1]);
        LL ans=0;
        for(i=1;i<=n;i++)
            ans+=dp[i][0];
        cout<<ans<<endl;
    }
}

	 		  	 		    	  		 					