#include <cstdio>
#include <algorithm>
using namespace std;
typedef long long LL;

LL a[1 << 20], r[30], s[30];
int n, m, l;

int main() {
	scanf("%d", &n);
	l = 1 << n;
	for (int i = 0; i < (1 << n); i ++) scanf("%I64d", &a[i]);
	int step = 1;
	for (int i = 1; i <= n; i ++) {
		for (int j = step; j < l; j += 2 * step){
			sort(a + j - step, a + j);
			for (int k = j; k < step + j; k ++){
				r[i] += (a + j) - upper_bound(a + j - step, a + j, a[k]);
				s[i] += lower_bound(a + j - step, a + j, a[k]) - (a + j - step);
			}
		}
		step = step << 1;
	}
	LL res = 0;
	scanf("%d", &m);
	for (int i = 1; i <= n; i ++) res += r[i], r[i] = s[i] - r[i];
	int q;
	for (int i = 0; i < m; i ++){
		scanf("%d", &q);
		for (int j = q; j >= 1; j --) res += r[j], r[j] = -r[j];
		printf("%I64d\n", res);
	}
	return 0;
}
