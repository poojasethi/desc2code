#include<cstdio>
#include<iostream>
#include<map>
#include<algorithm>
using namespace std;
typedef long long LL;
LL k,b,n,a[100005],s[100005],ans=0,mo;
map<LL,LL>S;
int main()
{
	cin>>k>>b>>n;
	mo=k-1;
	for (int i=1;i<=n;i++)
		cin>>a[i],s[i]=(s[i-1]+a[i])%mo;
	S[0]++;
	for (int i=1;i<=n;i++)
		{
			LL tmp=S[s[i]-b]+S[s[i]+k-1-b];
			if (tmp>=i) tmp=i;
			ans+=tmp;
			S[s[i]]++;
		}
		LL pos=0,i=1,tmp=0;
		while (i<=n)
		{
			while (a[i]!=0&&i<=n)i++;
			if (i<=n)
			{
				pos=i+1;
				while (a[pos]==0&&pos<=n)pos++;
				tmp+=(pos-i+1)*(pos-i)/2;
				i=pos;
			}
		}
	if (b==0)ans=tmp; else if (b==mo)ans-=tmp;
	cout<<ans<<endl;
	return 0;
}
