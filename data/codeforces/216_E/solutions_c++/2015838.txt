#include<cstdio>
#include<map>
#include<iostream>
using namespace std;

typedef long long LL;
const int MAX=100000+10;
const int NUM=30;

LL a[MAX],sum[MAX],k,b,n;
map<LL,int> hash;

int main()
{
//	freopen("E.in","r",stdin);freopen("E.out","w",stdout);
	int i;
	LL zero=0,now=0,ans=0,d;
	cin>>k>>b>>n;
	for(i=1;i<=n;++i)
	{
		cin>>a[i];
		sum[i]=(sum[i-1]+a[i])%(k-1);
	}
	for(i=1;i<=n;)
	{
		if(a[i]!=0)++i;
		else 
		{
			now=0;
			while(i<=n && a[i]==0)
			{
				++now;
				++i;
			}
			zero+=now*(now+1)/2;
		}
	}
	hash[0]++;
	for(i=1;i<=n;++i)
	{
		d=sum[i]-b;
		if(d<0)d+=k-1;
		ans+=hash[d];
		hash[sum[i]]++;
	}
	if(b==0)
		cout<<zero<<endl;
	else if(b==k-1)cout<<ans-zero<<endl;
	else cout<<ans<<endl;
}
