#include <vector>
#include <map>
#include <iostream>
using namespace std;

int main(){
  long long k,b,n,v,res;
  cin >> k >> b >> n;
  vector<long long> a(n),c(n+1,0),zero(n+1,0);
  for(int i = 0; i < n; i++){
    cin>>a[i];
    c[i+1]=c[i]+a[i];
    if(a[i]==0){
      zero[i+1]=zero[i]+1;
    }
  }
  res=0;
  map<long long,int> num;
  for(int j = 0; j < n; j++){
    num[c[j]%(k-1)]+=1;
    if(b%(k-1)!=0){
      v = (c[j+1]-b+k-1)%(k-1);
      if(num.find(v)!=num.end()){
        res += num[v];
      }
    }
    else{
      if(b==0){
        res += zero[j+1];
      }
      else{
        v = c[j+1]%(k-1);
        if(num.find(v)!=num.end()){
          res += num[v]-zero[j+1];
        }
      }
    }
  }
  cout<<res<<endl;
  return 0;
}
