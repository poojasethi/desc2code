#include <iostream>
#include <cstdio>
#include <cstring>
#include <map>
#define FOR(i, n) for (int i = 0; i < (n); ++i)
using namespace std;

int main() {
	int k, b, n, d, sum = 0, diff;
	long long total = 0, total0 = 0, z = 0;
	map<int, int> digits;

	scanf("%d%d%d", &k, &b, &n);
	digits[0] = 1;
	FOR (i, n) {
		scanf("%d", &d);
		if (!d) ++z; else z = 0;
		total0 += z;
		sum = (sum + d) % (k - 1);
		diff = (sum - b + k - 1) % (k - 1);
		total += (digits.find(diff) == digits.end()) ? 0 : digits[diff];
		++digits[sum];
	}

	printf("%I64d\n", (b == 0) ? total0 : ((b == k - 1) ? (total - total0) : total));
	return 0;
}
