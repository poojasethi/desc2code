#include <cstdio>
#include <map>
#include <iostream>
#define MAXN 100010
using namespace std;
typedef long long i64;
typedef unsigned long long u64;
int A[MAXN];
int K,b,n;
map<int,i64> hm;

int main()
{
    scanf("%d%d%d",&K,&b,&n);

    int cur,pi=0;
    i64 ans=0,az=0;

    for(int i=1;i<=n;i++){
        scanf("%d",A+i);
        if(A[i]){if(pi)az+=(i64)(i-pi)*(i-pi+1)/2;pi=0;}
        else if(!pi)pi=i;
    }
    if(pi)az+=(i64)(n+1-pi)*(n+1-pi+1)/2;

    if(!b){printf("%I64d\n",az);return 0;}

    cur=0; hm[0]=1;
    for(int i=1;i<=n;i++){
        cur=(cur+A[i])%(K-1);
        ans+=hm[(cur-b+K-1)%(K-1)];
        hm[cur]++;
    }
    if(b==K-1)ans-=az;

    printf("%I64d\n",ans);
    return 0;
}
