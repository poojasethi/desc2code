#include <stdio.h>
#include <map>

using namespace std;

#define ll long long

map<ll,ll> m;
ll n,k,b,s,rst,a,d,mo,z;
int main(){
	scanf("%I64d%I64d%I64d",&k,&b,&n);
	ll i,j,cnt=0;;
	m[0]++;
	if(b==0){
		for(i=1;i<=n;i++){
			scanf("%I64d",&a);
			if(!a)cnt++;
			else{
				rst+=(cnt)*(cnt+1)/2;
				cnt=0;
			}
		}
		rst+=cnt*(cnt+1)/2;
		printf("%I64d",rst);
		return 0;
	}
	for(i=1;i<=n;i++){
		scanf("%I64d",&a);
		s+=a;
		mo=s%(k-1);

		if(a==0)z++;
		else z=0;

		d=(mo-b+(k-1))%(k-1);

		if(b==(k-1))rst+=(m[d]-z);
		else rst+=m[d];

		m[mo]++;
	}printf("%I64d",rst);
}