//By momo
#include<map>
#include<cstdio>
#include<algorithm>
#define N 100010
using namespace std;
typedef long long LL;
map<LL, LL> mp;
LL a[N], s[N];
LL k, b, n, t, c, ans;
int main(){
	scanf("%I64d%I64d%I64d", &k, &b, &n);
	for(LL i = 1; i <= n; i++) scanf("%I64d", &a[i]);
	mp[0] = 1;
	for(LL i = 1; i <= n; i++){
	   	s[i] = a[i]+s[i-1];
		LL md = s[i]%(k-1);
		LL nd = (md+(k-1)-b)%(k-1);
		if(mp.count(nd)) ans += mp[nd];
		mp[md]++;
		if(a[i] == 0) c += (++t);
		else t = 0;
	}
	if(b == 0) ans = c;
	else if(b == k-1) ans -= c;
	printf("%I64d\n", ans);
}
