#include <iostream>
#include <map>
using namespace std;
map<int,int> m;
long long ans,sum;
int k,b,n,x,cnt,tmp;
int main(){
    cin>>k>>b>>n;
    if(!b){
        for(int i=0;i<n;i++){
            cin>>x;
            cnt=x?0:(cnt+1);
            ans+=cnt;
        }
    }else{
        k--,m[0]=1;
        for(int i=0;i<n;i++){
            cin>>x;
            sum+=x;
            cnt=x?0:(cnt+1);
            tmp=(sum-b+k)%k;
            ans+=m[tmp];
            m[sum%=k]++;
            if(b==k) ans-=cnt;
        }
    }
    cout<<ans<<endl;
}