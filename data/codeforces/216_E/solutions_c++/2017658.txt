#include <cstdio>
#include <map>

using namespace std;

map<int,long long> f;

int main(void)
{
  int n,m,p;
  scanf("%d %d %d",&p,&m,&n);
  int s=0,t=0;
  long long ans=0,c=0;
  f[0]=1;
  for(int i=1;i<=n;++i)
  {
    int k;
    scanf("%d",&k);
    s=(s+k)%(p-1);
    ans+=f[(s-m+p-1)%(p-1)];
    ++f[s];
    if(k==0)
      c+=++t;
    else
      t=0;
  }
  if(m==0)
    ans=c;
  else if(m==p-1)
    ans-=c;
  printf("%I64d\n",ans);
  return 0;
}