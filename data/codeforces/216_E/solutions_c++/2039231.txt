#include<iostream>
#include<stdio.h>
#include<stdlib.h>
#include<algorithm>
#include<memory>
#include<cstring>
#include<map>
using namespace std;
typedef __int64 LL;
map<LL,LL> dp;
int k,b,n;

int main(){
    int x;
    while(cin>>k>>b>>n){
        dp.clear();
        dp[0] = 1;
        LL ans = 0,val = 0,zero = 0;
        int tp = 0;
        for(int i=0;i<n;++i){
            cin>>x;
            val = (val + x)%(k-1);
            ans += dp[ (val-b +k-1)%(k-1) ];
            dp[val]++;
            
            if(!x) ++tp;
            else tp = 0;
            zero += tp;
        }
        if(b == 0) ans = zero;
        else if(b == k-1) ans -= zero;
        printf("%I64d\n",ans);
    }
    return 0;
}
