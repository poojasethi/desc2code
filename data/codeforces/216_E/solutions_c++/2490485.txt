/********************************************
Author: Yinthewind
Fri Nov 2 15:36:46 CST 2012
********************************************/
#include<cstdio>
#include<iostream>
#include<map>
#include<cstring>
using namespace std;
#define MAXN 100010
#define ll long long

ll K,B,N,ans,ansz,z,tmp,val;
map<ll,int> m;

int main()
{
    cin>>K>>B>>N;
    m[0]=1;
    for(int i=1;i<=N;i++)
    {
        cin>>tmp;
        val=(val+tmp)%(K-1);
        ans+=m[(val+K-1-B)%(K-1)];
        if(tmp==0) ansz+=++z;
        else z=0;
        m[val]++;
    }
    if(B==0) ans=ansz;
    else if(B==K-1) ans-=ansz;
    cout<<ans<<endl;
    return 0;
}
