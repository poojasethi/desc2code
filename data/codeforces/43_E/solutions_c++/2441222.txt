//program 43-E

#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>

using namespace std;

int Get()
{
  char c;while(c=getchar(),c<'0'||c>'9');
  int X=c-48;while(c=getchar(),c>='0'&&c<='9')X=X*10+c-48;
  return X;
}

int main()
{
  int N=Get(),S=Get();
  static int Len[100],Speed[100][100],Time[100][100];
  for(int i=0;i<N;i++)
    {
      Len[i]=Get();
      for(int j=0;j<Len[i];j++)
        {
          Speed[i][j]=Get();
          Time[i][j]=Get();
        }
    }
  int Ans=0;
  for(int i=0;i<N;i++)
    for(int j=i+1;j<N;j++)
      {
        int P=0,Q=0,L0=0,L1=0;
        static int A[100],B[100];
        for(int k=0;k<Len[i];k++)A[k]=Time[i][k];
        for(int k=0;k<Len[j];k++)B[k]=Time[j][k];
        int Last=0;
        while(P<Len[i]&&Q<Len[j])
          {
            int T=min(A[P],B[Q]);A[P]-=T;B[Q]-=T;
            L0+=T*Speed[i][P];L1+=T*Speed[j][Q];
            int X=(L0>L1)-(L1>L0);
            if(!(X+Last))Ans++;if(X)Last=X;
            if(!A[P])P++;if(!B[Q])Q++;
          }
      }
  printf("%d\n",Ans);
  return 0;
}
