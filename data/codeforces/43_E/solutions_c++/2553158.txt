#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstdlib>
#include<cstring>

using std::min;
typedef long long ll;

const int maxn=102;
int n,S;
int k[maxn],v[maxn][maxn],t[maxn][maxn];

  int sol(int x,int y){
    int *t0=t[x],*t1=t[y],*v0=v[x],*v1=v[y];
    int z0=1,z1=1,lt=0,s0=0,s1=0,nt,ts0,ts1,ans=0,tv0,tv1;
    while(z0<=k[x]&&z1<=k[y]){
      nt=min(t0[z0],t1[z1]);
      ts0=(nt-lt)*v0[z0]+s0,ts1=(nt-lt)*v1[z1]+s1;
      if(ts0==ts1&&ts0!=S){
        tv0=nt==t0[z0]?v0[z0+1]:v0[z0],tv1=nt==t1[z1]?v1[z1+1]:v1[z1];
        if((ll)(v0[z0]-v1[z1])*(tv0-tv1)>0)++ans;
      }else if((ll)(s0-s1)*(ts0-ts1)<0)++ans;
      if(t0[z0]==nt)++z0;
      if(t1[z1]==nt)++z1;
      lt=nt,s0=ts0,s1=ts1;
    }
    return ans;
  }

int main(){
  int i,j;
  ll ans=0;
  scanf("%d%d",&n,&S);
  for(i=0;i<n;++i){
    scanf("%d",k+i);
    for(j=1;j<=k[i];++j)
      scanf("%d%d",&v[i][j],&t[i][j]),t[i][j]+=t[i][j-1];
  }
  for(i=0;i<n;++i)
    for(j=i+1;j<n;++j)
      ans+=sol(i,j);
  printf("%I64d",ans);
  return 0;
}
