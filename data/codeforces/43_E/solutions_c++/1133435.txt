#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<algorithm>
using namespace std;
int n,S;
int v[105][105],t[105][105];
int t1[105],t2[105],num[105];
int main()
{

   
    scanf("%d%d",&n,&S);
    for(int i=1;i<=n;i++)
    {
         scanf("%d",&num[i]);
         for(int k=1;k<=num[i];k++)
         scanf("%d%d",&v[i][k],&t[i][k]);
    }
    int ans=0;
    for(int i=1;i<=n;i++)
     for(int j=i+1;j<=n;j++)
     {
          int p1=1,p2=1;
          int s1=0,s2=0,ns1,ns2;
          for(int k=1;k<=num[i];k++)t1[k]=t[i][k];
          for(int k=1;k<=num[j];k++)t2[k]=t[j][k];
          while(p1<=num[i]&&p2<=num[j])
          {
                int c=min(t1[p1],t2[p2]);
                ns1=s1+c*v[i][p1];
                ns2=s2+c*v[j][p2];
                t1[p1]-=c;
                t2[p2]-=c;
                if(t1[p1]==0)p1++;
                if(t2[p2]==0)p2++;
                if((long long )(s1-s2)*(ns1-ns2)<0)ans++;
                if(ns1==ns2&&ns1!=S&&(long long )(s1-s2)*(v[i][p1]-v[j][p2])<0)ans++;
                s1=ns1; s2=ns2;
          } 
     }
     cout<<ans;
    
    
    
    
    
    
    return 0;
}
