#include<cstdio>
#define min(a,b) (a<b?a:b)
using namespace std;
int n,s,i,k[110],v[110][110],t[110][110],j,t1,t2,x1,x2,ti,ttt,tti,ans;
int main()
{
    scanf("%d%d",&n,&s);
    for(i=1;i<=n;i++)
    {
        scanf("%d",&k[i]);
        for(j=1;j<=k[i];j++)scanf("%d%d",&v[i][j],&t[i][j]),t[i][j]+=t[i][j-1];t[i][k[i]+1]=1e9;
    }for(i=1;i<n;i++)
        for(j=i+1;j<=n;j++)
        {
            t1=1;t2=1;x1=0;x2=0;ti=0;ttt=-1;
            for(;t1<=k[i]||t2<=k[j];)
            {
                tti=min(t[i][t1],t[j][t2]);
                x1+=(tti-ti)*v[i][t1];x2+=(tti-ti)*v[j][t2];
                if(t[i][t1]<t[j][t2])t1++;else t2++;
                if(x1>x2&&ttt==0)ans++;if(x1<x2&&ttt==1)ans++;
                if(x1>x2)ttt=1;if(x1<x2)ttt=0;ti=tti;
                //printf("%d %d %d %d %d\n",x1,x2,ttt,t1,t2);
            }
        }printf("%d\n",ans);
}