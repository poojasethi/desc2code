#include<cstdio>
#include<cstring>
#define N 105
int n,S,ans,L[N],v[N][N],t[N][N];
int main()
{
	scanf("%d%d",&n,&S);
	for (int i=1;i<=n;i++){
		scanf("%d",&L[i]);
		for (int j=1;j<=L[i];j++)
			scanf("%d%d",&v[i][j],&t[i][j]),t[i][j]+=t[i][j-1];
		}
	for (int x=1;x<n;x++) for (int y=x+1;y<=n;y++){
		int i=1,j=1,sx=0,sy=0,last=0,T;
		while (i<=L[x] || j<=L[y]){
			int nx=v[x][i],ny=v[y][j];
			if (j>L[y] || (i<=L[x] && t[x][i]<=t[y][j]))
				T=t[x][i]-last,last=t[x][i],j+=t[x][i]==t[y][j],i++;
			else T=t[y][j]-last,last=t[y][j],j++;
			nx*=T,ny*=T;
			ans+=(sx<sy && sx+nx>sy+ny) || (sx>sy && sx+nx<sy+ny);
			sx+=nx,sy+=ny; if (sx==sy) ans+=1LL*(nx-ny)*(v[x][i]-v[y][j])>0;
			}
		}
	printf("%d\n",ans); return 0;
}
