#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <algorithm>
using namespace std;

const int maxn = 105;
int k[maxn], d[maxn][maxn];
int v[maxn][maxn], t[maxn][maxn];
int n, x, ans;

int main() {
    int i, j, a, b, l, sa, sb;
    scanf("%d%*d", &n);
    for (i = 1; i <= n; ++i) {
        scanf("%d", k + i);
        for (j = 1; j <= k[i]; ++j) {
            scanf("%d%d", v[i] + j, t[i] + j);
            d[i][j] = d[i][j - 1] + v[i][j] * t[i][j];
            t[i][j] += t[i][j - 1];
        }
    }
    for (i = 1; i <= n; ++i)
        for (j = 1; j < i; ++j)
            for (a = 0, b = 0, x = 0; a < k[i] && b < k[j];) {
                if (t[i][a + 1] < t[j][b + 1]) ++a; else ++b;
                l = max(t[i][a], t[j][b]);
                sa = d[i][a] + (l - t[i][a]) * v[i][a + 1];
                sb = d[j][b] + (l - t[j][b]) * v[j][b + 1];
                if (sa < sb) {
                    if (x == 1) ++ans; x = -1;
                }
                if (sa > sb) {
                    if (x == -1) ++ans; x = 1;
                }
            }
    printf("%d\n", ans);
    return 0;
}
