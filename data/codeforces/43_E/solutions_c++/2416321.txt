#include<iostream>
#include<cstdio>

using namespace std;

const int maxn = 110 , maxm = 100010;

int V[maxn][maxm];
int n , s , S[2][maxn] , tot , H[maxn];

void input() {
	scanf( "%d%d" , &n , &s );
	for ( int i = 1 ; i <= n ; i++ ) {
		int m , cnt = 0; scanf( "%d" , &m );
		while ( m-- ) {
			int v , t; scanf( "%d%d" , &v , &t );
			while ( t-- ) V[i][cnt++] = v;
		}
	}
}

void solve() {
	int ans = 0;
	for ( int i = 0 ; i < 100010 ; i++ ) {
		tot = 0;
		for ( int j = 1 ; j <= n ; j++ ) {
			if ( S[i & 1][j] < s ) H[tot++] = j;
			S[i & 1 ^ 1][j] = S[i & 1][j] + V[j][i];
		}
		if ( tot == 0 ) break;
		for ( int a = 0 ; a < tot ; a++ ) {
			for ( int b = 0 ; b < tot ; b++ )
				if ( a != b ) {
					int j = H[a] , k = H[b];
					if ( S[i & 1][j] != 0 && S[i & 1][j] <= S[i & 1][k] && S[i & 1 ^ 1][j] > S[i & 1 ^ 1][k] ) {
						if ( S[i & 1][j] < S[i & 1][k] || V[j][i - 1] > V[k][i - 1] )
							ans++;
					}
				}
		}
	}
	printf( "%d\n" , ans );
}

int main() {
	input();
	solve();
	
	return 0;
}
