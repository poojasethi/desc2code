#include<cstdio>
#include<cstring>
#include<iostream>
#include<algorithm>
using namespace std;
int dt,ans,n,s,k[200],t[200][200],v[200][200];
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    scanf("%d%d",&n,&s);
    for(int i=1;i<=n;i++){
        scanf("%d",&k[i]);
        for(int j=1;j<=k[i];j++){
            scanf("%d%d",&v[i][j-1],&dt);
            t[i][j]=t[i][j-1]+dt;
        }
    }
    for(int i=1;i<=n;i++)
        for(int j=i+1;j<=n;j++){
            int lt=0,h0=0,h1=0,s0=0,s1=0,kuai=0;
            while(h0<=k[i]&&h1<=k[j]){
                int nt=min(t[i][h0+1],t[j][h1+1]);
                dt=nt-lt;
                int ts0=s0+dt*v[i][h0],ts1=s1+dt*v[j][h1];
                if(ts0>ts1)ans+=kuai==j,kuai=i;
                if(ts1>ts0)ans+=kuai==i,kuai=j;
                if(nt==t[i][h0+1])h0++;
                if(nt==t[j][h1+1])h1++;
                s0=ts0;s1=ts1;
                lt=nt;
            }
        }
    cout<<ans;
    return 0;
}
