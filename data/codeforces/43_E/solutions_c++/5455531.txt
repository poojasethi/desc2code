#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<cstdlib>
#include<algorithm>
using namespace std;

int n, S;
int m[111], t[111][111], v[111][111];

int calc(int x, int y){
    int beat = 0, ret = 0;
    for (int i = 1, j = 1, sx = 0, sy = 0, T = 0; i <= m[x] && j <= m[y] && sx < S && sy < S;){
        int nT = min(t[x][i], t[y][j]);
        sx += (nT - T) * v[x][i];
        sy += (nT - T) * v[y][j];
        if (sx != sy){
            int nbeat = (sx > sy) ? 1 : (-1);
            if (nbeat != beat && beat) ret++;
            beat = nbeat;
        }
        T = nT;
        if (nT == t[x][i]) i++;
        if (nT == t[y][j]) j++;
    }
    return ret;
}

int main(){
    scanf("%d%d", &n, &S);
    for (int i = 1; i <= n; ++i){
        scanf("%d", &m[i]);
        for (int j = 1; j <= m[i]; ++j){
            scanf("%d%d", &v[i][j], &t[i][j]);
            if (t[i][j] == 0) {--j; m[i]--; continue;}
            t[i][j] += t[i][j - 1];
        }
    }
    int ans = 0;
    for (int i = 1; i <= n; ++i)
        for (int j = 1; j < i; ++j){
            ans += calc(i, j);
        }
    cout << ans << endl;
}
 
