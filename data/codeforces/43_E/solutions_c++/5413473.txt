#include <cstdio>
int ans=0,N,S,k[105],v[105][105],p[105][105];
int main()
{
	scanf("%d%d",&N,&S);
	for (int i=1; i<=N; i++)
	{
		scanf("%d",&k[i]);
		for (int j=1; j<=k[i]; j++) scanf("%d %d",&v[i][j],&p[i][j]),p[i][j]+=p[i][j-1];
	}
	for (int i=1; i<=N; i++)
		for (int j=i+1; j<=N; j++)
			for (int l=1,r=1,t=0,x=0,y=0,q=-1; l<=k[i]&&r<=k[j];)
			{
				if (p[i][l]<=p[j][r]) x+=(p[i][l]-t)*v[i][l],y+=(p[i][l]-t)*v[j][r],t=p[i][l];
				else x+=(p[j][r]-t)*v[i][l],y+=(p[j][r]-t)*v[j][r],t=p[j][r];
				if (p[i][l]==t) l++;
				if (p[j][r]==t) r++;
				if (x>y) ans+=q==1,q=0;
				if (y>x) ans+=!q,q=1;
			}
	printf("%d\n",ans);
}