#include <iostream>
#include <vector>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)

typedef pair< int , int > PII;
vector< PII > v[110];
int n,s,i,j,k,ans=0;

int count(const vector< PII > &a,const vector< PII > &b){
        int last=0,now,sa=0,sb=0,llead=0,nlead,ret=0,i=0,j=0,nsa,nsb;
        while (i<a.size()&&j<b.size()){
                now=min(a[i].second,b[j].second);
                nsa=sa+a[i].first*(now-last);
                nsb=sb+b[j].first*(now-last);
                if (nsa>nsb) nlead=1;else
                if (nsa<nsb) nlead=-1;else
                if (sa==sb) nlead=0;else nlead=llead;
                if (now==a[i].second) i++;
                if (now==b[j].second) j++;
                if (llead*nlead==-1) ret++;
                last=now;llead=nlead;sa=nsa;sb=nsb;
        }
        return ret;
}

int main(){
        cin>>n>>s;
        REP(i,0,n){
                cin>>k;
                v[i].resize(k);
                REP(j,0,k) {
                        cin>>v[i][j].first>>v[i][j].second;
                        if (j) v[i][j].second+=v[i][j-1].second;
                }
                REP(j,0,i) ans+=count(v[i],v[j]);
        }
        cout<<ans<<endl;
}
