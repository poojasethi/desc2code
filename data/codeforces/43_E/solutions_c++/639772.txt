#include<iostream>
#include<cstdio>
using namespace std;
#define FOR(a,b) for(a=0;a<b;a++)

int n, k[110], v[110][110], t[110][110], res,s,i,j;

int ktra(long long &s1, long long &s2, long long f1, long long f2, int &p){
    int res =((s1-s2)*(f1-f2)<0)||((s1==s2)&&(p*(f1-f2)<0));
    if (f1 > f2) p = 1;
    if (f1 < f2) p = -1;
    //cout<<s1<<" "<<s2<<" -> "<<f1<< " "<<f2<<": "<<res<<endl;
    s1 = f1; s2 = f2;    
    return res;
}

int tinh(int i, int j){
  long long s1=0, s2=0;
  int i1=0, i2=0, t1 = t[i][0], t2 = t[j][0], d = 0, tt, p = 0;
  while (s1<s&&s2<s){
    tt = min(t1, t2);
    d+=ktra(s1,s2,s1+tt*v[i][i1],s2+tt*v[j][i2], p);
    t1-=tt; t2-=tt;
    if(t1==0&&i1<k[i]-1)t1=t[i][++i1];
    if(t2==0&&i2<k[j]-1)t2=t[j][++i2];
  }
  return d;
}

int main(){
    cin>>n>>s;
    FOR(i,n){
      cin>>k[i];
      FOR(j,k[i]) cin>>v[i][j]>>t[i][j];
    }
    res=0;
    FOR(i,n-1)
     for(j=i+1;j<n;j++) res+=tinh(i,j);
    cout<<res;
    //system("pause");
}
