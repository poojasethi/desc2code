#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int a[110],b[110][110],v[110][110],t[110][110],n,s,l,r,now,x,y,k,ans,i,j;
int main()
{
	cin>>n>>s;
	for(i=1;i<=n;i++)
	{
		cin>>a[i];
		for(j=1;j<=a[i];j++)
		{
			scanf("%d%d",&v[i][j],&t[i][j]);
			b[i][j]=b[i][j-1]+t[i][j];
		}
	}
	for(i=1;i<n;i++)
		for(j=i+1;j<=n;j++)
		{
			l=r=1,k=now=x=y=0;
			while(l<=a[i]&&r<=a[j])
			{
				if(b[i][l]<b[j][r]) x+=(b[i][l]-now)*v[i][l],y+=(b[i][l]-now)*v[j][r],now=b[i][l++];
				else if(b[i][l]>b[j][r]) x+=(b[j][r]-now)*v[i][l],y+=(b[j][r]-now)*v[j][r],now=b[j][r++];
				else x+=(b[i][l]-now)*v[i][l],y+=(b[j][r]-now)*v[j][r],now=b[i][l++],r++;
				if(x>y) ans+=k==j,k=i;
				if(x<y) ans+=k==i,k=j;
			}
		}
	cout<<ans<<endl;
	return 0;
}