#include<cstdio>

int n,Len[110],Speed[110][110],Time[110][110],s,Si,Sj,Next,_Si,_Sj,_Next,Ans;

int main()
{
	int i,j,k,l;
	scanf("%d%d",&n,&s);
	for(i=0;i<n;i++)
	{
		scanf("%d",Len+i);
		for(j=1;j<=Len[i];j++)
		{
			scanf("%d%d",Speed[i]+j-1,Time[i]+j);
			Time[i][j]+=Time[i][j-1];
		}
	}
	for(i=0;i<n;i++)
		for(j=i+1;j<n;j++)
		{
			Next=Si=Sj=0;
			for(k=l=0;;)
			{
				_Next=Time[i][k+1]<Time[j][l+1]?Time[i][k+1]:Time[j][l+1];
				_Si=Si+(_Next-Next)*Speed[i][k];
				_Sj=Sj+(_Next-Next)*Speed[j][l];
				for(;Time[i][k+1]<=_Next;k++);
				for(;Time[j][l+1]<=_Next;l++);
				if(_Si==_Sj)
				{
					if(_Si==s)break;
					if(Si<Sj&&Speed[i][k]>Speed[j][l])Ans++;
					if(Si>Sj&&Speed[i][k]<Speed[j][l])Ans++;
				}
				else
				{
					if(Si<Sj&&_Si>_Sj)Ans++;
					if(Si>Sj&&_Si<_Sj)Ans++;
				}
				Next=_Next;
				Si=_Si;
				Sj=_Sj;
				if(Si==s||Sj==s)break;
			}
		}
	printf("%d\n",Ans);
	return 0;
}
