#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

const int maxn = 110;

int n,m,ans;
int num[maxn];
int T[maxn][maxn],V[maxn][maxn],ST[maxn][maxn],D[maxn][maxn];

int main()
{
	int i,j,k,l,first,time,si,sj;

	scanf("%d%d",&n,&m);
	for (i = 1; i <= n; ++i)
	{
		scanf("%d",&num[i]);
		for (j = 1; j <= num[i]; ++j)
		{
			scanf("%d%d",&V[i][j],&T[i][j]);
			D[i][j] = D[i][j-1]+V[i][j]*T[i][j];
			ST[i][j] = ST[i][j-1]+T[i][j];
		}
	}
	for (i = 1; i <= n; ++i)
		for (j = 1; j < i; ++j)
			for(k = 0,l = 0,first = 2; k < num[i] && l < num[j]; )
			{
				if (ST[i][k+1] < ST[j][l+1]) time = ST[i][++k];
				else time = ST[j][++l];
				si = (time-ST[i][k])*V[i][k+1]+D[i][k];
				sj = (time-ST[j][l])*V[j][l+1]+D[j][l];
				if (si < sj) ans += (first == 1),first = 0;
				else if (si > sj) ans += (first == 0),first = 1;
			}
	printf("%d",ans);
	return 0;
}
