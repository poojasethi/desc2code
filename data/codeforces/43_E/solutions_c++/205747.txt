#include <iostream>
using namespace std;
int i , j , n , s , v[101][1001] , t[101][1001] , k[101] , l1 , l2 , d1 , d2 , v1 , v2 , e , o , l[101] , lider;
int main()
{
	cin >> n >> s;
	for(i = 1; i <= n; i++)
	{
		cin >> k[i];
		for(j = 1; j <= k[i]; j++)
		{
			cin >> v[i][j] >> t[i][j];
			l[i] += t[i][j];
			if(j > 1)
			{
				t[i][j] = t[i][j - 1] + t[i][j];
			}
		}
	}
	for(i = 1; i < n; i++)
	{
		for(j = i + 1; j <= n; j++)
		{
			l1 = l2 = 1;
			d1 = v1 = v[i][l1];
			d2 = v2 = v[j][l2];
			e = 1;
			if(d1 > d2)
			{
				lider = 1;
			}
			if(d2 > d1)
			{
				lider = 2;
			}
			while(e < l[i] && e < l[j])
			{
				e++;
				if(e > l[i] || e > l[j])
				{
					break;
				}
				if(e > t[i][l1])
				{
					l1++;
					v1 = v[i][l1];
				}
				if(e > t[j][l2])
				{
					l2++;
					v2 = v[j][l2];
				}
				if(d1 <= d2)
				{
					if(d1 + v1 > d2 + v2 && lider == 2)
					{
						o++;
					}
				}
				if(d1 >= d2)
				{
					if(d1 + v1 < d2 + v2 && lider == 1)
					{
						o++;
					}
				}
				d1 = d1 + v1;
				d2 = d2 + v2;
				if(d1 > d2)
				{
					lider = 1;
				}
				if(d1 < d2)
				{
					lider = 2;
				}
			}
		}
	}
	cout << o;
}
