//Codeforces 43E Race
#include<fstream>
#include<iostream>
#include<cstdlib>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;

const int MAXN=105;
int n,len;
int b[MAXN],v[MAXN][MAXN],t[MAXN][MAXN];
int ans=0;

void work(int p,int q)
{
	int s1=0,s2=0;
	int x1=1,x2=1,r1=t[p][1],r2=t[q][1];
	while(s1<len&&s2<len)
	{
		bool f=(s1<s2);
		int r=min(r1,r2);
		s1+=v[p][x1]*r,s2+=v[q][x2]*r;
		r1-=r,r2-=r;
		if(r1==0) x1++,r1=t[p][x1];
		if(r2==0) x2++,r2=t[q][x2];
		if(f&&(s1>s2||s1==s2&&x1<=b[p]&&x2<=b[q]&&v[p][x1]>v[q][x2])) ans++;
	}
}

int main()
{
	scanf("%d%d",&n,&len);
	for(int i=1;i<=n;i++)
	{
		scanf("%d",&b[i]);
		for(int j=1;j<=b[i];j++)
		scanf("%d%d",&v[i][j],&t[i][j]);
	}
	
	for(int i=1;i<=n;i++)
	for(int j=1;j<=n;j++)
	if(i!=j) work(i,j);
	
	printf("%d\n",ans);
	
	return 0;
}
/*
Sample Input1:
2 33
2 5 1 2 14
1 3 11
Sample Output1:
1

Sample Input2:
2 33
2 1 3 10 3
1 11 3
Sample Output2:
0

Sample Input3:
5 33
2 1 3 3 10
1 11 3
2 5 3 3 6
2 3 1 10 3
2 6 3 3 5
Sample Output3:
2
*/
