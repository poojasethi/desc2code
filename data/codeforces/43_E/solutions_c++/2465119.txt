#include<cstdio>
#include<vector>
#include<algorithm>
#define pb push_back
#define fo(i,a,b) for(i=a;i<=b;++i)
using namespace std;
const int mn=110;
int n,s,m,ans;
vector<int>t[mn],d[mn],v[mn];
int main()
{
    int i,j;
    scanf("%d%d",&n,&s);
    fo(i,1,n)
    {
        t[i].pb(0),d[i].pb(0),v[i].pb(0);
        int li,vi,ti;
        scanf("%d",&li);
        fo(j,0,li-1)
        {
            scanf("%d%d",&vi,&ti);
            v[i].pb(vi);
            d[i].pb(d[i][j]+vi*ti);
            t[i].pb(t[i][j]+ti);
        }
    }
    int x,y,dt,di,dj;
    fo(i,1,n)
    fo(j,1,i-1)
        for(x=0,y=0,s=0;x<v[i].size()-1&&y<v[j].size()-1;)
        {
            dt=t[i][x+1]<t[j][y+1]?t[i][++x]:t[j][++y];
            di=d[i][x]+(dt-t[i][x])*v[i][x+1];
            dj=d[j][y]+(dt-t[j][y])*v[j][y+1];
            if(di<dj)
            {
                if(s==1)++ans;
                s=2;
            }
            if(di>dj)
            {
                if(s==2)++ans;
                s=1;
            }
        }
    printf("%d\n",ans);
    return 0;
}