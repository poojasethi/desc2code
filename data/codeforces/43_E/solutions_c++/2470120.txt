#include<stdio.h>
#include<vector>
#include<algorithm>
using namespace std;
int getint()
{
	int ret=0;bool ok=false;
	for(;;)
	{
		int c=getchar();
		if(c>='0'&&c<='9')ret=(ret<<3)+ret+ret+c-'0',ok=true;
		else if(ok)return ret;
	}
}
int n,s;
vector<int> V[110],T[110];
int ans;
void calc(int u,int v)
{
	int ret=0;
	if(V[u][0]>V[v][0])swap(u,v);
	int su=0,sv=0;
	int iu=0,iv=0;
	int vu=V[u][0],vv=V[v][0];
	int nowt=0,nexttu=T[u][0],nexttv=T[v][0];
	for(;;)
	{
		int nextt=min(nexttu,nexttv);
		su+=(nextt-nowt)*vu;
		sv+=(nextt-nowt)*vv;
		if(su>sv)
		{
			ret++;
			swap(u,v);
			swap(su,sv);
			swap(iu,iv);
			swap(vu,vv);
			swap(nexttu,nexttv);
		}
		if(su==s||sv==s){ans+=ret;return;}
		nowt=nextt;
		if(nexttu==nowt)nexttu+=T[u][++iu],vu=V[u][iu];
		if(nexttv==nowt)nexttv+=T[v][++iv],vv=V[v][iv];
	}
}
int main()
{
	n=getint(),s=getint();
	for(int i=1;i<=n;i++)
	{
		int x=getint();
		for(int j=1;j<=x;j++)
		{
			int v=getint(),t=getint();
			V[i].push_back(v);
			T[i].push_back(t);
		}
	}
	for(int i=1;i<n;i++)
		for(int j=i+1;j<=n;j++)calc(i,j);
	printf("%d\n",ans);
	return 0;
}
