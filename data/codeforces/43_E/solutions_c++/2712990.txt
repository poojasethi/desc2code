#include<stdio.h>
#include<string.h>
int a[50009][101];
int flg[101];
int main()
{
   int n,m,v,t,s,l,time,i,j,k;
   while(scanf("%d%d",&n,&m)!=-1)
   {
	   memset(a,0,sizeof(a));
	   memset(flg,0,sizeof(flg));
	   time=0;
	   for(i=0;i<n;i++)
	   {
		   scanf("%d",&m);
		   l=1;
		   for(j=0;j<m;j++)
		   {
			   scanf("%d%d",&v,&t);
		       for(k=0;k<t;l++,k++)
			       a[l][i]=v;

		   }
		   if(l-1>time) time=l;
	   }  
	   int cnt=0;
	   for(i=1;i<time;i++)
	   {
           for(j=0;j<n;j++)
			   a[i][j]+=a[i-1][j];
	   }
	/*   for(i=1;i<time;i++)
	   {
		   for(j=0;j<n;j++)
			   printf("%4d",a[i][j]);
		   printf("\n");
	   }*/
       for(i=2;i<time-1;i++)
	   {
		   for(j=0;j<n;j++)
		   {
			   for(l=j+1;l<n;l++)
			   {
				   if(a[i-1][j]>a[i-1][l]&&a[i][j]<a[i][l]||a[i-1][j]<a[i-1][l]&&a[i][j]>a[i][l])
					   cnt++;
				   else if(i!=1&&(a[i-1][j]==a[i-1][l]&&a[i-2][j]<a[i-2][l]&&a[i][j]>a[i][l]||a[i-1][j]==a[i-1][l]&&a[i-2][j]>a[i-2][l]&&a[i][j]<a[i][l]))
					   cnt++;
			   }
		   }
	   }
	   printf("%d\n",cnt);
   }
	return 0;
}

	  						 		 		 			    			