#include<cstdio>
int N,S,i,j,x,Ans,Last,P,Q,p,q,New,LA,LB;
int V[105][105],T[105][105],K[105];
int main()
{
	scanf("%d%d",&N,&S);
	for(i=1;i<=N;++i)
	{
		scanf("%d",&K[i]);
		for(j=1;j<=K[i];++j)
		{
			scanf("%d%d",&V[i][j],&T[i][j]);
			T[i][j]+=T[i][j-1];
		}
	}
	for(i=1;i<=N;++i)
		for(j=i+1;j<=N;++j)
		{
        	Last=0;
        	P=Q=1,LA=LB=0;
        	for(;P<=K[i]&&Q<=K[j];)
        	{
				if(T[i][P]<T[j][Q]) New=T[i][P];
				else New=T[j][Q];
				if(New!=Last&&LA==LB)
				{
					if(T[i][P-1]==Last) p=1;
					else p=0;
					if(T[j][Q-1]==Last) q=1;
					else q=0;
					if((V[i][P]-V[j][Q])*(V[i][P-p]-V[j][Q-q])>0) ++Ans;
				}
				if(LA<LB&&LA+V[i][P]*(New-Last)>LB+V[j][Q]*(New-Last)) ++Ans;
				if(LA>LB&&LA+V[i][P]*(New-Last)<LB+V[j][Q]*(New-Last)) ++Ans;
				LA+=V[i][P]*(New-Last),LB+=V[j][Q]*(New-Last);
				Last=New;
				if(T[i][P]<T[j][Q]) ++P;
				else ++Q;
			}
		}
	printf("%d\n",Ans);
	return 0;
}
