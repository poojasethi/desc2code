//43E
#include <iostream>
#include <cstdio>
#include <vector>
#include <algorithm>
using namespace std;
const int MAXN=100;
int cnt[MAXN+10];
int t[MAXN+10][MAXN+10];
int v[MAXN+10][MAXN+10];

int fun(int car1, int car2){
	int res=0;
	for(int tim,state=0,ind1=0,ind2=0,d1=0,d2=0,s1=v[car1][1],s2=v[car2][1],last=0;ind1<=cnt[car1] && ind2<=cnt[car2];last=tim){
		tim=min(t[car1][ind1],t[car2][ind2]);

		d1+=s1*(last-tim);
		d2+=s2*(last-tim);

		if(t[car1][ind1]==tim){
			++ind1;
			if(ind1<=cnt[car1])
				s1=v[car1][ind1];
		}
		if(t[car2][ind2]==tim){
			++ind2;
			if(ind2<=cnt[car2])
				s2=v[car2][ind2];
		}
		
		if(d1>d2){
			if(state==1)
				++res;
			state=-1;
		}else if(d1<d2){
			if(state==-1)
				++res;
			state=1;
		}
	}
	return res;
}

int main(){
	int n,s;
	scanf("%d%d",&n,&s);
	for(int i=1;i<=n;i++){
		scanf("%d",&cnt[i]);
		int acc=0;
		for(int j=1;j<=cnt[i];j++){
			scanf("%d%d",&v[i][j],&t[i][j]);
			t[i][j]=acc+=t[i][j];
		}
	}
	
	int ans=0;
	
	for(int i=1;i<=n;i++)
		for(int j=i+1;j<=n;j++)
			ans+=fun(i,j);
	cout<<ans<<endl;
	return 0;
}