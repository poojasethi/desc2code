#include<stdio.h>
#include<algorithm>
using namespace std;

int a[2000005],pos[1000100]={0};
bool in_subseq(int x,int l,int r)
{
    if(l<=r) return (l<=x && x<=r);
    return (l<=x || x<=r);
}

int main()
{
    int m,n,i,j,ans=0;
    scanf("%d%d",&m,&n);
    for(i=1;i<=m;++i)
    {
        scanf("%d",&a[i]);
        a[i+m]=a[i];
    }
    for(i=1;i<=n;++i)
    {
        scanf("%d",&j);
        pos[j]=i;
    }
    for(i=1,j=2;i<=m;++i) if(pos[a[i]])
    {
        j=max(j,i+1);
        while(j<i+m && pos[a[j]] && !in_subseq(pos[a[j]],pos[a[i]],pos[a[j-1]])) ++j;
        ans=max(ans,j-i);
    }
    printf("%d",ans);
}
