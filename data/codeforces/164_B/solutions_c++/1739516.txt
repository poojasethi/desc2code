#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

int n, m;
int x[2000100], y[1000100], p[1000100];

void init()
{
    scanf("%d%d", &n, &m);
    for (int i = 1; i <= n; ++i)
    {
        scanf("%d", &x[i]);
        x[i+n] = x[i];
    }
    memset(p, 0, sizeof(p));
    for (int i = 1; i <= m; ++i)
    {
        scanf("%d", &y[i]);
        p[y[i]] = i;
    }
}

int ans = 0;

void work()
{
    int j = 0;
    for (int i = 1; i <= n; ++i)
    {
        if (!p[x[i]]) continue;
        if (n > 1 && p[x[i+1]]) j = max(j, i + 2);
        else j = i + 1;
        while (j - i < n && p[x[j]] && ((p[x[i]] < p[x[j-1]] && !(p[x[j]] < p[x[j-1]] && p[x[j]] > p[x[i]])) || (p[x[j]] > p[x[j-1]] && p[x[i]] > p[x[j]])))
            ++j;
        ans = max(ans, j - i);
    }
    printf("%d\n", ans);
}

int main()
{
    init();
    work();
    return 0;
}
