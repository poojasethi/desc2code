#include<iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>
using namespace std;
int a[2200000],b[2200000],cb[2200000];
int n,m;
bool in(int d,int l,int r)
{
     if(d==0)return false;
     if(l==r)return true;
     if(l<r)return (d>r ||d<l);
     return (l>d && d>r);
}
int main()
{
    //freopen("check.in","r",stdin);
    //freopen("check.out","w",stdout);
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++)scanf("%d",a+i);
    memset(cb,0,sizeof(cb));
    for(int i=1;i<=m;i++)scanf("%d",b+i),cb[b[i]]=i;
    for(int i=1;i<=n;i++)a[n+i]=a[i];
    int len=0,last=0;int ans=0;
    int zhi=0;
    for(int qi=1;qi<=n;qi++)
    {
            if(zhi<qi)
            {
                      zhi++;
                      if(cb[a[qi]]);
                      else continue;
            }
            while(in(cb[a[zhi+1]],cb[a[qi]],cb[a[zhi]]) )zhi++;
            ans=max(ans,zhi-qi+1);
    }
    cout<<min(ans,n)<<endl;
    return 0;
    
}
