#include <cstdio>
#include <algorithm>
using namespace std;

#define MAXL 1000004

int lA, lB;
int A[2 * MAXL];
int B[MAXL];
int rB[MAXL];

int main() {
	scanf("%d%d", &lA, &lB);
	for (int i = 0; i < lA; ++i)
		scanf("%d", &A[i]);
	for (int i = 0; i < lA; ++i)
		A[i + lA] = A[i];
	for (int i = 0; i < lB; ++i)
		scanf("%d", &B[i]);
	fill(rB, rB + MAXL, -1);
	for (int i = 0; i < lB; ++i)
		rB[B[i]] = i;
	int s = 0, t = 0;
	int best = 0;
	while (s < lA) {
		if (s == t) {
			++t;
			if (rB[A[s]] < 0)
				++s;
			continue;
		}
		int sb = rB[A[s]];
		int eb = rB[A[t - 1]];
		int tb = rB[A[t]];
		if (t < s + lA && tb >= 0 &&
				((sb <= eb && (tb > eb || tb < sb)) ||
				(sb > eb && tb > eb && tb < sb))) {
			++t;
		} else {
			best = max(best, t - s);
			++s;
		}
	}
	printf("%d\n", best);
	return 0;
}
