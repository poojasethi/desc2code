#include <vector>
#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <iostream>
#include <algorithm>

#define pb push_back
#define mp make_pair
#define x first
#define y second

using namespace std ;

typedef long long LL ;

const int N = 1000010 ;

int n, m ;
int d[N * 2], pos[N] ;

int main ()
{
    scanf ("%d%d", &n, &m) ;
    for (int i = 1; i <= n; i ++ ) scanf ("%d", &d[i]), d[i + n] = d[i] ;
    for (int i = 1, t; i <= m; i ++ ) scanf ("%d", &t), pos[t] = i ;
    for (int i = 1; i <= n * 2; i ++ ) d[i] = pos[d[i]] ;
    int res = 0 ;
    for (int i = 1, a = 0, b = 0; i <= n * 2; i ++ )
    {
        if (!d[i]) a = b = 0 ;
        else if (!a && !b) a = b = i, res = max (res, 1) ;
        else if (d[i] > d[i - 1])
        {
            while (b < a && d[b] < d[i]) b ++ ;
            res = max (res, i - b + 1) ;
        }
        else
        {
            while (a < i && d[a] < d[i]) a ++ ;
            b = a, a = i ;
            res = max (res, i - b + 1) ;
        }
    } 
    res = min (res, n) ;
    printf ("%d\n", res) ;
    return 0 ;
}
