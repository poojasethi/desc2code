#include <cstdio>
#include <iostream>

using namespace std;

long a[2000005]={0};
long b[2000005]={0};

long pos[2000005]={0};
long trans[2000005]={0};

long check(long x,long y,long z)
{
 if(x<=y)
  return z>y||z<x;
 else
  return z>y&&z<x;
}

int main()
{
 long n,m,i,j;
 long st=0,en=0;
 long ans=0;
 
 scanf("%ld%ld",&n,&m);
 for(i=1;i<=n;i++)
   scanf("%ld",&a[i]);
 for(i=1;i<=m;i++)
   {
    scanf("%ld",&b[i]);
    pos[b[i]]=i;
   }
 for(i=1;i<=n;i++)
   {
    a[i+n]=a[i];
    trans[i+n]=trans[i]=pos[a[i]];
   }
 
 for(i=1,j=1;i<=n;i++)
   {
    if(!trans[i])
     continue;
    if(j<i)
     j=i;
    for(;trans[j+1]&&check(trans[i],trans[j],trans[j+1])&&j<2*n-1;j++);
    if(j-i+1>=ans)
     ans=j-i+1;
   }
 printf("%ld\n",ans);
 
 return 0;
}
