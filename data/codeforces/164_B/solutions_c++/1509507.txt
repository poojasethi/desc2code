#include<cstdio>
#include<cstring>
#include<algorithm>

#define FOR(i,a,b) for(int i=a;i<=b;i++)

using namespace std;

const int N=2000010;
int a[N],p[N],n,m,dl[N],x;

bool in(int x,int l,int r){
  if (l<=r)return l<=x&&x<=r;
  else return x<=r||l<=x;
}

int main(){
  scanf("%d%d",&n,&m);
  FOR(i,1,n)scanf("%d",&a[i]),a[n+i]=a[i];
  FOR(i,1,m)scanf("%d",&x),p[x]=i;
  int he=2,ta=1,ans=0;
  FOR(i,1,n+n){
    if(p[a[i]]==0){he=2,ta=1;continue;}
    while((he<=ta)&&in(p[a[i]],dl[he],dl[ta]))he=(he+1)%2000010;
    dl[(ta=(ta+1)%2000010)]=p[a[i]];
    if((ta-he+1)>ans)ans=ta-he+1;
  }
  printf("%d",ans);
//  system("pause");
}


