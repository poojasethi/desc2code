#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;
#define REP(i,n) for(int(i)=0;(i)<(int)(n);(i)++)
typedef long long ll;
const int MAX=(int)1e6+5;
int n,m,a[MAX],b[MAX],last[MAX],f[MAX],ans;
bool gao(int i, int j)
{
	int k=(j+1)%n;
	if (f[k]<0||k==i) return false;
	else if (f[i]<=f[j]&&(f[j]<f[k]||f[k]<f[i])) return true;
	else if (f[i]>=f[j]&&f[j]<f[k]&&f[k]<f[i]) return true;
	return false;
}
int main()
{
	scanf("%d%d",&n,&m);
	REP(i,n) scanf("%d",a+i);
	memset(last,-1,sizeof last);
	REP(i,m) {
		scanf("%d",b+i);
		last[b[i]]=i;
	}
	REP(i,n) f[i]=last[a[i]];
	for (int i=0,j=0; i<n; i++) {
		if (f[i]<0) continue;
		j<i?j=i:j;
		while (gao(i,j%n)) j++;
		ans=max(ans,j-i+1);
	}
	printf("%d\n",ans);
	return 0;
}
