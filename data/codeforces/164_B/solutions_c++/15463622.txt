#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
using namespace std;
int n,m,a[2000100],b[2000100],c[2000100],ans;
int check(int x,int l,int r){
    if (l<=r) return (l<=x && x<=r);
    return (l<=x || x<=r);
}
int main(){
    cin>>n>>m;
    for (int i=1;i<=n;i++) {
        scanf("%d",&a[i]);
        a[i+n]=a[i];
    }
    for (int i=1;i<=m;i++){
        scanf("%d",&b[i]);
        b[i+m]=b[i];
        c[b[i]]=i;
    }
    for (int i=1,j=2;i<=n;i++) if (c[a[i]]){
        j=max(j,i+1);
        while (j<i+n && c[a[j]] && !check(c[a[j]], c[a[i]], c[a[j-1]]) ) ++j;
        ans=max(ans,j-i);
    }
    cout<<ans<<endl;
}

 	  	 	 	  		 				 							 			