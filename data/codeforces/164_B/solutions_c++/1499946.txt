#include <cstdio>
#include <cstring>
#include <vector>
#include <algorithm>
using namespace std;

int a[2000005], b[2000005];
int pa[2000005];
int d[2000005], e[2000005], stone[2000005];
int main(void) {
	int n, m;
	scanf("%d%d", &n, &m);
	memset(pa, -1, sizeof(pa));
	memset(d, -1, sizeof(d));
	for(int i=1;i<=n;i++) {
		scanf("%d", &a[i]);
		pa[a[i]] = i;
	}
	for(int i=1;i<=m;i++) {
		scanf("%d", &b[i]);
		if(pa[b[i]]>=0) d[pa[b[i]]] = i;
	}
	for(int i=1;i<=n;i++) {
		d[n+i] = d[i];
		a[n+i] = a[i];
	}
	for(int i=1;i<=n+n;i++) stone[i] = (d[i]==-1);
	for(int i=1;i<=n+n;i++) e[i]=(d[i]<d[i-1]);
	for(int i=1;i<=n+n;i++) e[i]+=e[i-1];
	int ans=0;
	for(int i=1,j=1;i<=n;i++) {
		j=max(i,j);
		while(j<i+n && stone[j]==0 && (e[j]-e[i]==0 || (e[j]-e[i]==1 && d[j]<d[i]))) ++j;
		if(!stone[i]) ans = max(ans, j-i);
	}
	printf("%d\n", ans);
	return 0;
}
