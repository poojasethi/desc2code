#include <iostream>
#include <algorithm>
#include <fstream>
#include <iomanip>
#include <set>
#include <map>
#include <vector>
#include <bitset>
#include <string>
#include <sstream>
#include <complex>
#include <cstring>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <conio.h>
using namespace std;

const int MAX_N = 1000000 + 2;

int a[2*MAX_N];
int pos[MAX_N];
int n, m;

int ok(int x, int y, int z)
{
	if ( x==y ) return 1;
	if ( y > x ) {
		if ( z>x && z<y ) return 0;
		return 1;
	}
	else {
		if ( z>y && z<x ) return 1;
		return 0;
	}
}

int main()
{
	ios_base::sync_with_stdio(false);
	memset(pos, -1, sizeof pos);
	cin >> n >> m;
	for (int i=0; i<n; ++i) {
		cin >> a[i];
		a[i+n] = a[i];
	}
	for (int i=0; i<m; ++i) {
		int x;
		cin >> x;
		pos[x] = i;
	}
	int ans = 0;
	for (int i=0, j=0; i<n; ++i) {
		for (j=max(i,j); j<i+n && pos[a[j]]!=-1; ++j) {
			if ( j==i ) continue;
			if ( !ok(pos[a[i]], pos[a[j-1]], pos[a[j]]) ) break;
		}
		if ( j-i > ans ) ans = j-i;
	}
	cout << ans << endl;
	return 0;
}



