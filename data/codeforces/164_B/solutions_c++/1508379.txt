#include <iostream>
#include <cstdio>
#include <cstring>
#include <queue>


using namespace std;

#define k6 1000006

int la, lb;

int cod[k6];
int pos[k6];

int main()
{
	memset(cod, 0xff, sizeof(cod));
	scanf("%d %d", &la, &lb);
	for(int i=0;i<la; i++)
	{
		int t;
		scanf("%d",&t);
		cod[t] = i;
	}	
	
	memset(pos, 0xff, sizeof(pos));
	int lb2 = 0;
	for(int i=0;i<lb; i++)
	{
		int t;
		scanf("%d",&t);
		if(cod[t]!=-1){
			lb2++;
			pos[cod[t]] = lb2-1;
		}
	}	
	
	int ans = 0;

	queue<long long> Q;

	long long pz=0;
	int prpos = -1;

	for(int j=0;j<2;j++){
		for(int i=0; i<la;i++)
		{
			if(pos[i]==-1){
				while(!Q.empty())Q.pop();
				pz = 0;
				prpos=-1;
			}else{
				long long cpos = pos[i] + pz;
				if(pos[i]<=prpos){
					pz+=lb2;
					cpos+=lb2;
				}
				while(!Q.empty() && cpos-Q.front()>=lb2 ){
					Q.pop();
				}
				Q.push(cpos);
				prpos = pos[i];
			}
			ans = max(ans, (int)Q.size());
		}
	}
	
	printf("%d\n",ans);
	
	return 0;
}	
