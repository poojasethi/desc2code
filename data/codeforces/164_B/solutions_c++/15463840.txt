#include <cstdio>
#include <cstring>
#include <algorithm>
#include <queue>
using namespace std;

const int maxn = 2000000+100;
int n, m;
int a[maxn], res, b[maxn], pb[maxn];

bool chk(int L,int R,int x) {
	if(L <= R) return x > R || x < L;
	else return R < x && x < L;
}

int main() {
	scanf("%d%d",&n,&m);
	for(int i = 1; i <= n; i++) scanf("%d",&a[i]);
	for(int i = 1; i <= m; i++) scanf("%d",&b[i]), pb[b[i]] = i;
	for(int i = 1; i <= n; i++) a[i+n] = a[i];
	int l = 1;
	for(int i = 1; i <= 2*n; i++) {
		if(!pb[a[i]]) {
			l = i+1;
		} else {
			while(l < i && (!chk(pb[a[l]], pb[a[i-1]], pb[a[i]]))) l++;
			res = max(res, i-l+1);
			//printf("%d~%d\n",l,i);
		}
		
	}
	printf("%d\n",res);
	return 0;
}
   		  	 					 	  	 		  	    		