#include <cstdio>
#include <cstring>
#include <algorithm>
#define FOR(i,s,e) for (int i=(s); i<(e); i++)
#define FOE(i,s,e) for (int i=(s); i<=(e); i++)
#define CLR(a,x) memset(a, x, sizeof(a))
#define EXP(i,l) for (int i=(l); i; i=qn[i])
#define N 2000005
using namespace std;

int n, m, st, ed, x, ret;
int a[N], b[N], p[N], q[N];

int bad(int a, int b, int c){
	b = (b + m - a) % m;
	c = (c + m - a) % m;
	return b >= c;
}

int main(){
	scanf("%d%d", &n, &m);
	FOR(i,0,n) scanf("%d", &a[i]), a[n+i] = a[i];
	CLR(p, -1);
	FOR(i,0,m) scanf("%d", &b[i]), p[b[i]] = i;
	
	ret = 0;
	st = 0, ed = -1;
	FOR(i,0,n<<1){
		if (p[a[i]] == -1){
			st = 0, ed = -1;
			continue;
		}
		
		x = p[a[i]];
		while (ed >= st && bad(q[st], q[ed], x)) st++;
		q[++ed] = x;
		ret = max(ret, ed - st + 1);
	}
	
	printf("%d\n", ret);
	return 0;
}
