#include<cstdio>
#include<cstring>
#include<algorithm>
#define MAXN 1100000

int a[2*MAXN],b[2*MAXN],n,m,Ans,f[MAXN];

long long Q[2*MAXN];

char Chr;

void read(int&x)
{	for(;(Chr=getchar())<'0';);
	for(x=Chr-'0';(Chr=getchar())>='0';x=x*10+Chr-'0');
}

int main()
{	int i,k,l;
long long j;
	//freopen("b.in","rb",stdin);
	//freopen("b.out","wb",stdout);
	read(n);
	read(m);
	for(i=0;i<n;i++)read(a[i]);
	for(i=0;i<n;i++)a[i+n]=a[i];
	for(i=0;i<m;i++)read(b[i]);
	memset(f,-1,sizeof f);
	for(i=0;i<m;i++)f[b[i]]=i;
	for(i=k=0;i<n;i++)if(f[a[i]]!=-1)
	{	if(k<=i){k=i+1;Q[i]=f[a[i]];}
		for(;k<i+n&&f[a[k]]!=-1;k++)
		{	j=(Q[k-1]/m)*m+f[a[k]];
			if(j<=Q[k-1])j+=m;
			Q[k]=j;
			if(Q[k]>=Q[i]+m)break;
		}
		if(k-i>Ans)Ans=k-i;
	}
	printf("%d\n",Ans);
	return 0;
}
