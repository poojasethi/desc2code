#include <cstdio>
#include <cstdlib>
#include <sstream>
#include <iostream>
#include <algorithm>
#include <cstring>
#include <string>
#include <cmath>
#include <vector>
#include <queue>
#include <stack>
#include <ctime>
#include <set>
#include <map>
using namespace std;
int n,m,a[2000006],b[1000005]={0},bj=0;
queue<int>q;
queue<int>p;
int main()
{
    int i,j=0,k,ans=0;
    scanf("%d%d",&n,&m);
    for(i=0;i<n;i++) scanf("%d",&a[i]),a[i+n]=a[i];
    for(i=0;i<m;i++)
    {
        scanf("%d",&k);
        b[k]=i+1;
    }
    if(b[a[0]]>0) j=ans=1,q.push(b[a[0]]),p.push(1);
    for(i=k=1,n*=2;i<n;i++)
    {
        if(b[a[i]]==0) while(j>0) q.pop(),p.pop(),j--;
        else if(j==0||b[a[i]]>b[a[i-1]]) q.push(b[a[i]]),p.push(k),j++;
        else q.push(b[a[i]]),p.push(++k),j++;
        while(j>0&&(p.front()+1)*(long long)m+q.front()<=k*(long long)m+b[a[i]]) q.pop(),p.pop(),j--;
        ans=max(ans,j);
    }
    printf("%d\n",ans);
    return 0;
}


  	 				 	 	   			   			      	