#include <bits/stdc++.h>

using namespace std;

int arr[105], n;

int play(int l, int h) {
	
	if (l > 0 && h <= n) {
		if (arr[l] != arr[h]) return 0;
		
		else if (arr[l-1] == arr[l] && arr[h] == arr[h+1])
		    return play(l-2, h+2) + 4;
		    
		else if (arr[l-1] == arr[l])
		     return play(l-2, h+1) + 3;
		     
		else if (arr[h] == arr[h+1]) return play(l-1, h+2) + 3;
		else return 0;
	}
	return 0;
}
		         
int main () {
	
	int k, x;
	cin >> n >> k >> x;
	
	for (int i=1; i<=n; ++i) cin >> arr[i];
	
	int ans = 0;
	for (int i=1; i<n; ++i) {
		if (arr[i] == x && arr[i+1] == x) {
			ans = max(ans, 2 + play(i-1, i+2));
		}	
	}
	
	cout << ans;		
return 0;
}	
