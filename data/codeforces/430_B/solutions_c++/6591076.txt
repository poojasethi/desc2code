#include <cstdio>
using namespace std;
int N,K,x,i,v[105],S[105],val[105],j,a,b,l,max,lung;
int main()
{
    scanf("%d %d %d",&N,&K,&x);
    for (i=1;i<=N;i++)
    {
        scanf("%d",&v[i]);
        if (v[i]==v[i-1]) ++S[l];
        else S[++l]=1,val[l]=v[i];
    }
    for (i=1;i<=l;i++)
    {
        if (val[i]==x && S[i]==2)
        {
            a=b=i; lung=2;
            while (val[--a]==val[++b] && a>0 && b<=N)
            {
                if (S[a]+S[b]>=3) lung+=S[a]+S[b];
                else break;
            }
            if (max<lung) max=lung;
        }
    }
    printf("%d",max);
    return 0;
}
