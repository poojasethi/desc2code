//gskhirtladze

#include <stdio.h>
#include <iostream>
#include <algorithm>
#define fi first
#define se second

using namespace std;

int n,m,i,j,k,x;
int ans,a[500000];

int go(int l,int r)
 {
  if (r > n || l < 1) return 0;
  if (a[l] != a[r]) return 0;
  if (a[l] == a[l-1] && a[r] == a[r+1]) return go(l-2,r+2)+4;
  if (a[l] == a[l-1]) return go(l-2,r+1)+3;
  if (a[r] == a[r+1]) return go(l-1,r+2)+3;
  return 0;
 }

main()
 {
  cin>>n>>k>>x;
  for (i=1;i<=n;i++)
   cin>>a[i];
  for (i=1;i<n;i++)
   if (a[i] == x && a[i+1] == x)
    ans=max(ans,2+go(i-1,i+2));
  cout<<ans<<endl;
 }
