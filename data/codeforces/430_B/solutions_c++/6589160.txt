# include<stdio.h>

int S[105];

int main()
{
	int n,k,x; scanf("%d%d%d",&n,&k,&x);
	int i,j;
	for (i=1;i<=n;i++)
	    scanf("%d",&S[i]);
    S[0]=S[n+1]=-1;
    int ans=0;
    for (i=1;i<n;i++)
		if (S[i]==x && S[i+1]==x)
		{
			int l=i,r=i+1;
			while (1)
			{
				while (S[l-1]==S[l]) l--;
				while (S[r+1]==S[r]) r++;
				if (S[l-1]!=S[r+1]) break;
				int p=l-1,q=r+1;
				if (S[p]==-1 || S[q]==-1) break;
				while (S[p-1]==S[p]) p--;
				while (S[q+1]==S[q]) q++;
				if (q-r+l-p>=3){
					r++; l--;
				}
				else break;
			}
			if (ans<r-l+1) ans=r-l+1;
		}
	printf("%d\n",ans);
}
