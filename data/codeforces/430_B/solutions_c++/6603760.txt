#include<iostream>
#include<cstdio>
#include<cstring>
using namespace std;
int ans,cnt=1,a[110],c[110],belong[110],maxl,l,r,s[110],n,m,k;
int main()
{
    scanf("%d%d%d",&n,&m,&k);
    int x,ll;
	for(int i=1;i<=n;i++)
	{
	   scanf("%d",&a[i]);
	   if(a[i]!=a[i-1])c[++cnt]=a[i];
	   s[cnt]++;
    }
    for(int i=1;i<=cnt;i++)
	 if(s[i]>1&&c[i]==k)
	{
	   	int sum=s[i];
	   	int l=i-1,r=i+1;
	   	while(s[l]+s[r]>=3&&c[l]==c[r]&&l>0&&r<=cnt)
	   	{
			sum+=(s[l]+s[r]);
            l--;r++;
		}
		ans=max(ans,sum);	
	}
	printf("%d",ans);
	return 0;   
}
       
