#include <iostream>
using namespace std;
int main()
{
	int n,k,x;
	cin>>n>>k>>x;
	int c[n];
	for(int i=0; i<n; i++)
	{
		cin>>c[i];
	}	

	int Max = 0;
	for (int i=0; i<n-1; i++)
	{	
		if (c[i]==c[i+1] && c[i]==x)
		{
			bool flag=true;
			int l=i-1, r=i+2, ans=2, cnt=0;
			while (l>=0 && r<n && c[l]==c[r] && flag)
			{
				int col = c[l], cnt = 0;
				while (l>=0 && c[l]==col)
				{
					l--;
					cnt++;
				}
				while (r<n && c[r]==col)
				{
					r++;
					cnt++;
				}
				if (cnt >= 3)
				{
					ans += cnt;
				}
				else
				{
					flag = false;
				}
			}
			Max = max (Max, ans);
		}
	}	
	cout << Max << endl;
	return 0;
}