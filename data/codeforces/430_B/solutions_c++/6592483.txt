#include<iostream>
#include<algorithm>
using namespace std;
int n,k,x;
int a[101];
int b[100];
int main(){
cin>>n>>k>>x;
int l=0;
for(int i=0;i<n;i++){
cin>>a[i];
if(a[i]==a[i-1]&&a[i]==x){
	b[l]=i;
	l++;
}
}
int maxn=0;
for(int i=0;i<l;i++){
	int k=b[i];
	int j=b[i]-1;
	int ans=2;
	while(a[k+1]==a[j-1]&&k<=n-2&&j>=1){
	if(a[k+1]==a[k+2]){
		if(a[j-2]!=a[k+1]){
		ans+=3;
		k+=2;
		j-=1;
		}
		else{
		ans+=4;
		k+=2;
		j-=2;
		}
	}
		else if(a[k+1]==a[j-2]){
	ans+=3;
	k+=1;
	j-=2;
	}
		else{
		break;
		}
}
maxn=max(maxn,ans);
}
cout<<maxn<<endl;
return 0;
}