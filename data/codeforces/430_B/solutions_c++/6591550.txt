#include <bits/stdc++.h>
#define FO(i,a,b) for(int i=(a);i<=(b);i++)
#define FOR(i,a,b) for(int i=(a);i<(b);i++)
using namespace std;
typedef pair<int,int> ii;
int main(){
	//freopen("input.inp","r",stdin);
	int n,k,X,ans=0;
	scanf("%d%d%d",&n,&k,&X);
	vector<int> c(n);
	FOR(i,0,n) scanf("%d",&c[i]);
	FOR(i,0,n){
		int l=i-1,r=i,x=X,t=-1;

		while(1){
			int tl=l,tr=r;
			for(;l>=0;l--) if(c[l]!=x) break;
			for(;r<n;r++) if(c[r]!=x) break;
			//printf("%d %d\n",l,r);
			if(r-l-1-t<3){
				l=tl;r=tr;
				break;
			}

			t=r-l-1;
			if(l==-1||r==n) break;
			if(c[l]!=c[r]) break;
			x=c[l];
			
		}
		if(r-l-1>ans) ans=r-l-1;
	}
	printf("%d",ans);
}
