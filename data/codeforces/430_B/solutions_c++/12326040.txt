#include<stdio.h>

int a[101],b[101];
int n,k,x,l,ll,r,rr,sum,ans,i,j,p;

int main(){
	scanf("%d %d %d",&n,&k,&x);
	p = 0;ans = 0;
	for(i = 0 ; i < n ; i++){
		scanf("%d",&a[i]);
		if(a[i] == x && a[i-1] == x){
			b[p] = i;p++;
		}
	}
	for(i = 0 ; i < p ; i++){
		sum = 2;rr=ll=0;
		r = b[i] ; l = b[i] -1;
		while(a[r+1] == a[l-1] && l>0 && r<n-1){
				rr++;
				ll++;
			if(a[r+2] == a[r+1])
				rr++;
			if(a[l-2] == a[r+1])
				ll++;
			if(ll+rr < 3)
				break;
			else{
				sum += rr+ll;
				r += rr;
				l -= ll;
				rr = ll = 0;
			}
		}
		if(sum > ans)
			ans = sum;
	}
	printf("%d\n",ans);
	return 0;
}
	 	   	 		 			  		 	       	  	