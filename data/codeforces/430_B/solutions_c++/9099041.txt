#include<iostream>
using namespace std;
int find_b(int *a,int i,int n){
	int count=0;
	int x=a[i];
	
	for(int j=i,k=i-1;j<n,k>=0;){
		int t=count;
		if(j==(i) && k==(i-1)) t-=1;
		while(a[j]==x && j<n){
			j++;
			count++;
		}
		while(a[k]==x && k>=0){
			k--;
			count++;
		}
		if((count-t)<=2){
			count=t;break;
		}
		x=a[j];
	}
	return count;
}

int main(){
	int n,k,x;
	cin>>n>>k>>x;
	int a[n];
	for(int i=0;i<n;i++){
		cin>>a[i];
	}
	int max=0;
	for(int i=0;i<n;i++){
		if(a[i]==x){
			int t=find_b(a,i,n);
			if(max<t){
				max=t;
			}
		}
	}
	cout<<max;
}
