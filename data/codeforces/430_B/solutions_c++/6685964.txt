#include <iostream>
using namespace std;
int main()
{
	int n, k, x, i, s, t, y, m=0;
	cin>>n>>k>>x;
	int a[n+1];
	for (i=1; i<=n; i++) cin>>a[i];
	for (i=1; i<n; i++) if (a[i]==x && a[i+1]==x) {
		y=x; s=i; t=i+1;
		do {
			while (s>=1 && a[s]==y) s--;
			while (t<=n && a[t]==y) t++;
			y=a[s];
		} while(s>=1 && t<=n && y==a[t] && (s>1 && y==a[s-1] || t<n && y==a[t+1]));
		if (t-s-1>m) m=t-s-1;
	}
	cout<<m<<endl;
	return 0;
}
