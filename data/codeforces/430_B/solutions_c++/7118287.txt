#include<iostream>
using namespace std;
int main()
{
int n,m,x,max=0,count,count1,i,j,k;
cin>>n>>m>>x;
int *c= new int [n];
for(i=0; i<n; i++)
cin>>c[i];
for(i=0; i<n; i++)
if(c[i]==x && c[i+1]==x)
{
count=2;
j=i-1;
k=i+2;
while(c[j]==c[k] && j>=0 && k<n)
{
count1=2;
for(--j; j>=0 && c[j]==c[j+1]; j--,count1++);
for(k++; k<n && c[k]==c[k-1]; k++,count1++);
if(count1>2)
count+=count1;
else
break;
}
//cout<<i<<" "<<count<<"\n";
if(max<count)
max=count;
}
cout<<max;
delete c;
return 0;
}

