#include<bits/stdc++.h>
using namespace std;

vector<int> a,b,ans;

int main()
{
	int n,y,x,ans=0;
	cin>>n>>y>>x;
	a.resize(n);
	for(int i=0; i<n; i++)
	{
		cin>>a[i];
	}
	int t,j,k,l,r;
	for(int i=0; i<n; i++)
	{
		if(a[i]!=x)continue;
		l=i; r=i;
		while(i<n && a[i]==x)
			i++;
		r = i-1; i--;
		if(r-l+1 >= 2)
		{
			t = r-l+1;
			while(1)
			{
				j=r+1; k=l-1;
				while(j<n && a[j]==a[k])
					j++;
				j--;
				while(k>=0 && a[k]==a[j])
					k--;
				k++;
				if(j-k-r+l < 3)
					break;
				t = j-k+1;
				r = j; l= k;
			}
			ans = max(ans,t);
		}
	}
	cout<<ans<<endl;

	return 0;
}
