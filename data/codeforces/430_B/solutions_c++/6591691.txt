#include <iostream>


int main(){
  int bl[100];
  int n, k, x;
  std::cin >> n >> k >> x;
  for (int i=0; i<n; i++)std::cin >> bl[i];
  int max=0;
  for (int i=0; i<n; i++){
    if (bl[i]==x){
      int c=0, cla=2;
      int a=i, b=i;
      while (bl[a] == bl[b]){
	while (a>0 and bl[a-1]==bl[a]){ --a; ++cla;}
	if (b<n-1 and bl[b+1]==bl[b]){ ++b; ++cla; }
	--a; ++b;
	if (cla<3) break;
	c+=cla;cla=2;
	if (a<0 or b>=n) break;
      }
      max=std::max(c-1, max);
    }
  }
  std::cout << max;
}