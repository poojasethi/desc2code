#include <iostream>
using namespace std;
int a[150],n,k,ans;
int rec(int l, int r)
{
	int i,x;
        if (a[l]!=a[r]) return 0;
	if (l+1==r) x=3;
	else x=2;
	while ((l>0) && (a[l-1]==a[r])) 
	{
		l--;
		x++;
	}
	while ((r<n-1) && (a[r+1]==a[l]))
	{
		r++;
		x++;
	}
	if (x<=2) return 0;
	return x+rec(l-1,r+1);
}
int main()
{
	int i,j;
	cin>>n>>k>>k;
	for (i=0; i<n; i++)
	    cin>>a[i];
	for (i=1; i<n; i++)
	    if ((a[i-1]==k) && (a[i]==k))
	        ans=max(ans,rec(i-1,i));
	if (ans>0) cout<<ans-1<<endl;
	else cout<<ans<<endl;
	return 0;
}