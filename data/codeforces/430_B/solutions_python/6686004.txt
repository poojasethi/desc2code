def getans(a, f, i, j):
    if i < 1 or j >= len(a): 
	return 0
    if a[i] == a[j] and f[i] + f[j] > 2:
	ans = f[i] + f[j]
	return ans + getans(a, f, i - 1, j + 1)
    else: return 0

n, k, x = map(int, raw_input().split())
c = map(int, raw_input().split())
f = [0]
a = [0]
ans = 0

for i in c:
    if a[-1] == i:
	f[-1] += 1
    else:
	a.append(i)
	f.append(1)

for i in xrange(1, len(a)):
    if a[i] == x and f[i] > 1:
	t = getans(a, f, i-1, i+1) + f[i]
	ans = max(t, ans)

print ans
