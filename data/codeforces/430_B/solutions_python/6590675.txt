from copy import deepcopy
from itertools import groupby


def destroy(array):
    ret = []
    for k, v in groupby(array):
        L = list(v)
        if len(L) >= 3:
            pass
        else:
            ret.extend(L)
    if len(array) == len(ret):
        return len(ret)
    else:
        return destroy(ret)


if __name__ == '__main__':
    n, k, x = map(int, raw_input().split())
    balls = map(int, raw_input().split())
    mx = 0
    for i in xrange(n):
        tmp = deepcopy(balls)
        tmp.insert(i, x)
        mx = max(mx, n - destroy(tmp))
    print mx