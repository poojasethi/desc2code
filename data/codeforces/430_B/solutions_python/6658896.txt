R = lambda: map(int, raw_input().split())
n, k, x = R()
a = R()
ans = 0
for i in range(n):
    b = [-2] + a[:i] + [x] + a[i:] + [-1]
    l = r = i
    d = 0
    while 1:
        c = b[l]
        while b[l] == c: l -= 1
        while b[r] == c: r += 1
        if r - l - 1 - d > 2: d = r - l - 1
        else: break
    ans = max(ans, d - 1)
print ans
