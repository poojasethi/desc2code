R=lambda:map(int,raw_input().split())
n,k,x=R()
a=R()
v=0
for i in range(n):
  b=[-1]+a[:i]+[x]+a[i:]+[-2]
  l=r=i+1
  s=0
  while 1:
    z=0-(l==r)
    m=l
    while b[l]==b[m]:
      l-=1
      z+=1
    while b[r]==b[m]:
      r+=1
      z+=1
    if z<3:
      break
    else:
      s+=z
  v=max(v,s-1)
print v
