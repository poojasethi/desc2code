n,k,x=map(int,raw_input().split())
a=map(int,raw_input().split())
ans=0
for k in range(n+1):
	b=[0]+a[0:k]+[x]+a[k:]+[0]
	while 1:
		fg=0
		for i in range(1,len(b)-1):
			if (i==0 or b[i]!=b[i-1]):
				j=i
				while b[j]==b[i]: j+=1
				if j-i>=3:
					fg,b=1,b[:i]+b[j:]
					break
		if not fg: break
	ans=max(ans,n+2-len(b))
print ans