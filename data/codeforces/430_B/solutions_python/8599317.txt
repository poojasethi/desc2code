#!/usr/bin/env python

n, k, x = map(int, raw_input().split())
row = [int(c) for c in raw_input().split()]
ans = 0

def cutting(cpy):
    while len(cpy) > 2:
        check = len(cpy)
        for j in range(2, len(cpy)):
            if cpy[j-2] == cpy[j-1] == cpy[j]:
                k = j + 1
                while k < len(cpy):
                    if not cpy[k] == cpy[j]: break
                    k += 1
                return cutting(cpy[:j-2] + cpy[k:])
        if check == len(cpy): return cpy
    return cpy
            
for i in range(n):
    cpy = [int(a) for a in row]
    cpy.insert(i, x)
    ans = max(ans, n - len(cutting(cpy)))

print ans