a,b,c = map(int, raw_input().split())
arr = map(int, raw_input().split())
soma = 0

for i in range(a):
    aux = arr[::]
    aux.insert(i,c)
    while len(aux) > 2:
        l = len(aux)
    	for i in range(2,len(aux)):
    		if aux[i] == aux[i-1] == aux[i-2]:
    			p = i+1
    			while p < len(aux):
    				if aux[i] != aux[p]:
    					break
    				p+=1
    			aux = aux[:i-2] + aux[p:]
    			break
    	if len(aux) == l:
    		break
	soma = max(soma, a-len(aux))
print soma	
	