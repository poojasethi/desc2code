n,k,x = [int(m) for m in raw_input().split()]
balls = [int(m) for m in raw_input().split()]

def destroy(array):
  checker = True
  max_contiguous = 0
  ball_color = 0
  while checker:
    checker = False
    max_contiguous = 0
    for i in range(len(array)):
      if max_contiguous == 0:
        ball_color = array[i]
        max_contiguous = 1
      elif ball_color ==  array[i]:
        max_contiguous += 1
      elif ball_color !=  array[i]:
        if max_contiguous > 2:
          array = array[ : i - max_contiguous] + array[i: ]
          checker = True
          break
        else: 
          max_contiguous = 1
          ball_color = array[i]
    if max_contiguous == len(array) and max_contiguous > 2: return n
    elif max_contiguous > 2 and not checker: array = array[ : - max_contiguous]
  return n - len(array)

max = 0
temp = 0

for i in range(n):
  if i == 0:
    temp = destroy([x] + balls)
  elif i == n-1:
    temp = destroy(balls + [x])
  else:
    temp = destroy(balls[:i] + [x] + balls[i:])
  if temp > max:
    max = temp

print max
    