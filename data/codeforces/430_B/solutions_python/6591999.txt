import sys

[n,k,x] = map(int, sys.stdin.readline().split())
c =  map(int, sys.stdin.readline().split())

def check(i):
    # ball is placed at i
    left = i - 1
    right = i
    color = x
    count = 1
    destroyed = 0
    while (1):
        while(left >=0 and c[left] == color):
            left = left - 1
            count = count + 1
        while(right <= n-1 and c[right] == color):
            right = right + 1
            count = count + 1
            
        if (count < 3):
            # done
            return destroyed
        else:
            destroyed = destroyed + count
            if (left >= 0 and right <= n-1 and c[left] == c[right]):
#                 print 'here'
#                 print left,right,count
                count = 0
                color = c[left]
            else:
#                 print left,right
                return destroyed


ret = 0
for i in range(0,n+1):
    destroy = check(i) - 1
    ret = max(ret, destroy)
    
print ret