def getallpossibleindex(arr, x):
    anterior = -1
    i_p = []
    for i in xrange(len(arr)):
        v = arr[i]
        if anterior == x and v == x:
            i_p.append(i-1)
        anterior = v
    return i_p

def searchb(arr, by, x):
    achados = 0
    for i in xrange(by, len(arr)):
        if arr[i] == x:
            achados+=1
        else:
            break
    return achados
def calc(arr, index):
    tam_a = len(arr)
    if tam_a < 3 or index < 0 or index >= tam_a:
        return 0
    ele = arr[index]
    n_procurados = searchb(arr, index, ele)
    n_procuradosb = searchb(list(reversed(arr)), tam_a - index, ele)
    n_procurados_t = n_procurados + n_procuradosb
    if n_procurados_t >= 3:
        return n_procurados_t + calc(arr[:index - n_procuradosb] + arr[index+n_procurados:], index - n_procuradosb)
    return 0
        
n, k, x = map(int, raw_input().split())
balls = map(int, raw_input().split())

indexes = getallpossibleindex(balls, x)

maior = 0
if (len(indexes) == 0):
    print 0
else:
    for i in indexes:
        calcb = calc(balls[:i+1] + [x] + balls[i+1:], i)
        maior = max(maior, calcb)
    print(maior-1)
        
        
    

