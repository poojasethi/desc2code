#include <iostream>
#include <stdio.h>
#include <algorithm>
#include <string.h>
#include <vector>
#include <ctime>
using namespace std;
#define vi vector<int>
#define pii pair<int,int>
#define pb push_back
#define mp make_pair
#define all(x) x.begin(),x.end()
#define inf 1000000007
#define mod 1000000007
#define x first
#define y second
#define pi acos(-1.0)
#define DBG(x) cerr<<(#x)<<"="<<x<<"\n";
#define FOREACH(it,x) for(__typeof(x.begin()) it=x.begin();it!=x.end();it++)
#define ull unsigned long long
#define ll long long
#define N 5005

template <class T> inline void Min(T &a,T b){if(a>b)a=b;}
template <class T> inline void Max(T &a,T b){if(a<b)a=b;}

int h[N][N],f[2][N<<1][N];
void upd(int (&f)[N][N],int x,int y,int v){
    for(;x<N;x+=x&-x){
        for(int i=y;i<N;i+=i&-i)f[x][i]+=v;
    }
}
void upd(int (&f)[N<<1][N],int x,int y,int v){
    for(;x<N<<1;x+=x&-x){
        for(int i=y;i<N;i+=i&-i)f[x][i]+=v;
    }
}
int get(int (&f)[N][N],int x,int y){
    int ans=0;
    for(;x>0;x-=x&-x){
        int i=y;
        for(;i>0;i-=i&-i)ans+=f[x][i];
    }
    return ans;
}
int get(int (&f)[N<<1][N],int x,int y){
    int ans=0;
    for(;x>0;x-=x&-x){
        for(int i=y;i>0;i-=i&-i)ans+=f[x][i];
    }
    return ans;
}
int main()
{
    //clock_t start=clock();
    int T,i,j,k,m,n;
    scanf("%d%d",&n,&m);
    int d,x,y,len;
    while(m--){
        scanf("%d",&k);
        if(k==1){
            scanf("%d%d%d%d",&d,&x,&y,&len);
            if(d==1){
                upd(h,x,y,1);
                upd(h,x,y+len+1,-1);
                upd(f[0],x+y+len+1,y,-1);
                upd(f[0],x+y+len+1,y+len+1,1);
            }
            else if(d==2){
                upd(h,x,y-len,1);
                upd(h,x,y+1,-1);
                upd(f[1],n+2+x-y+len,y-len,-1);
                upd(f[1],n+2+x-y+len,y+1,1);
            }
            else if(d==3){
                upd(h,x+1,y,-1);
                upd(h,x+1,y+len+1,1);
                upd(f[1],n+1+x-y-len,y,1);
                upd(f[1],n+1+x-y-len,y+len+1,-1);
            }
            else{
                upd(h,x+1,y-len,-1);
                upd(h,x+1,y+1,1);
                upd(f[0],x+y-len,y-len,1);
                upd(f[0],x+y-len,y+1,-1);
            }
        }
        else{
            scanf("%d%d",&x,&y);
            int ans=get(h,x,y)+get(f[0],x+y,y)+get(f[1],x-y+1+n,y);
            printf("%d\n",ans);
        }
    }
    //cerr<<"total time:"<<(clock()-start)<<"\n";
    return 0;
}