#include <cstdio>
#include <algorithm>
using namespace std;

int n,m,i,b[305],x[100005],y[100005],a[305][305],k,j,F[100005];
long long t,c[305],D[305];

int main (int argc, char * const argv[]) {
//	freopen("in.txt","r",stdin);
	scanf("%d%d%I64d",&n,&m,&t);
	for(i=1;i<=n;i++)scanf("%d",&b[i]);
	for(i=1;i<=m;i++){
		scanf("%d%d",&x[i],&y[i]);
		a[y[i]][x[i]]=1;
	}
	for(i=1;i<=n;i++)a[i][i]=1;
	for(k=1;k<=n;k++)for(i=1;i<=n;i++)for(j=1;j<=n;j++)a[i][j]|=a[i][k]&a[k][j];
	for(i=1;i<=n;i++)D[i]=0;
	for(i=1;i<=n;i++)for(j=1;j<=m;j++)D[x[j]]=max(D[x[j]],D[y[j]]+1);
	for(j=1;j<=m;j++)if(D[x[j]]<D[y[j]]+1){
		puts("0");
		return 0;
	}
	for(i=1;i<=n;i++)for(j=1;j<=n;j++)c[i]+=a[i][j]*b[j];
	for(i=1;i<=n;i++)t-=D[i]*b[i];
	if(t<0){
		puts("0");
		return 0;
	}
	F[0]=1;
	for(i=1;i<=n;i++)
		for(j=0;j<=t-c[i];j++)F[j+c[i]]=(F[j+c[i]]+F[j])%1000000007;
	printf("%d\n",F[t]);
    return 0;
}
