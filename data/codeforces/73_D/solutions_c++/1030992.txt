#include <cstdio>
#include <iostream>
using namespace std;
const int Maxn=1000001;
bool u[Maxn];
int s,g[Maxn],next[Maxn*2],x[Maxn*2];

void dfs(int v)
{
	++s, u[v]=true;
	for (int p=g[v]; p; p=next[p])
		if (!u[x[p]]) dfs(x[p]);
}

int main()
{
	int n,m,k,i,a,b;
	scanf("%d%d%d",&n,&m,&k);
	for (i=1; i<=m; ++i)
	{
		scanf("%d%d",&a,&b);
		x[i]=b; next[i]=g[a]; g[a]=i;
		x[i+m]=a; next[i+m]=g[b]; g[b]=i+m;
	}
	int sum=0,tot=0;
	for (i=1; i<=n; ++i)
		if (!u[i])
		{
			++tot, s=0;
			dfs(i);
			sum+=min(k,s);
		}
	if (k==1) printf("%d\n",max(0,tot-2));
	else printf("%d\n",max(0,tot-1-sum/2));
	return 0;
}
