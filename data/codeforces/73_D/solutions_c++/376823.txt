#include <iostream>
#include <cstring>
using namespace std;
#define M 1000010

int n,k,m;
int c[M];

inline int root(int x) { return c[x]<0?x:c[x]=root(c[x]); }

int main() {
    ios_base::sync_with_stdio(0);
    int i,j;
    cin >> n >> m >> k;
    memset(c,-1,sizeof c);
    for (i=0;i<m;i++) {
        int f,t;
        cin >> f >> t;
        f = root(f-1);
        t = root(t-1);
        if (f==t) continue;
        if (c[f]<c[t]) swap(f,t);
        c[t]+=c[f];
        c[f]=t;
    }
    int l=0, s=2, q=0;
    for (i=0;i<n;i++) {
        if (c[i]>=0) continue;
        j=(c[i]<-k?k:-c[i]);
        if (j==1) l++;
        else s+=j-2;
        q++;
    }
    if (l==1) cout << 0;
    else if (k==1) cout << q-2;
    else if (l<=s) cout << 0;
    else cout << (l-s+1)/2;
    return 0;
}