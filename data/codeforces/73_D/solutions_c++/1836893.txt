#include <cstdio>
#include <algorithm>
#include <vector>

using namespace std;

vector<int> f[1000001];
bool v[1000001];

int dfs(int x)
{
  v[x]=true;
  int c=1;
  for(int z=0;z<(int)f[x].size();++z)
  {
    int y=f[x][z];
    if(!v[y])
      c+=dfs(y);
  }
  return c;
}

int main(void)
{
  int n,m,lim;
  scanf("%d %d %d",&n,&m,&lim);
  for(int i=1;i<=m;++i)
  {
    int j,k;
    scanf("%d %d",&j,&k);
    f[j].push_back(k);
    f[k].push_back(j);
  }
  int s=0,t=0;
  for(int i=1;i<=n;++i)
  {
    if(!v[i])
    {
      ++t;
      s+=min(dfs(i),lim);
    }
  }
  if(lim==1)
    printf("%d\n",max(t-2,0));
  else
    printf("%d\n",max(t-1-s/2,0));
  return 0;
}