#include <iostream>
#include <cstdio>
#include <vector>

using namespace std;

const int maxN= 1000*1000 + 5;

bool mark[maxN];
int n,e,k;
vector <int> adj[maxN];

inline int dfs (int v){
    mark[v]= true;
    int ret= 0;
    for (int i=0;i<(int)adj[v].size();i++){
        int tmp= adj[v][i];
        if (!mark[tmp])
            ret+= dfs (tmp);
    }

    return ret+1;
}

int main(){
    scanf ("%d%d%d", &n, &e, &k);

    for (int i=1;i<=e;i++){
        int x,y;
        scanf ("%d%d", &x, &y);
        adj[x].push_back (y);
        adj[y].push_back (x);
    }

    int sum=0, comp=0;
    for (int i=1;i<=n;i++) if (!mark[i]){
        sum+= min (dfs(i),k);
        comp++;
    }
    
    if (k==1){
       printf ("%d\n", max(0,comp-2));
       return 0;
    }

    if (sum>=2*comp-2)
        printf ("0\n");

    else
        printf ("%d\n", (2*comp-2-sum+1)/2);

    return 0;
}
