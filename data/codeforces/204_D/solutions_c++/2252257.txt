#include<cstdio>
#define fo(i,a,b) for(i=a;i<=b;++i)
#define fd(i,a,b) for(i=a;i>=b;--i)
typedef long long LL;
const int mn=1010000,mo=1000000007;
int x[mn],X[mn],y[mn],Y[mn];
int n,l,i,j,L,ans;
char s[mn];
int main()
{
    scanf("%d%d",&n,&l);
    scanf("%s",s+1);
    x[0]=1,y[0]=L=0;
    fo(i,1,n)
    {
        if(s[i]=='W')L=0;else ++L;
        if(s[i]=='X')x[i]=x[i-1]*2%mo;
        else x[i]=x[i-1];
        if(L<l)continue;
        if(i==l)x[i]=(x[i]-1)%mo,X[i]=1;
        else if(s[i-l]!='B')x[i]=(x[i]-x[i-l-1]+mo)%mo,X[i]=x[i-l-1];
    }
    y[n+1]=1,Y[n+1]=L=0;
    fd(i,n,1)
    {
        if(s[i]=='B')L=0;else ++L;
        if(s[i]=='X')y[i]=y[i+1]*2%mo,Y[i]=Y[i+1]*2%mo;
        else y[i]=y[i+1],Y[i]=Y[i+1];
        if(L<l)continue;
        if(i==n-l+1)y[i]=(y[i]-1)%mo,Y[i]=1;
        else if(s[i+l]!='W')y[i]=(y[i]-y[i+l+1]+mo)%mo,Y[i]=(Y[i]+y[i+l+1])%mo;
    }
    fo(i,1,n)ans=(ans+(long long)X[i]*Y[i+1])%mo;
    printf("%d\n",ans);
    return 0;
}