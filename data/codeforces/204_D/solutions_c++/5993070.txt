#include<bits/stdc++.h>
#define pb push_back
#define sz(x) (int)x.size()
#define scf scanf
#define ptf printf
#define fst first
#define scd second
#define forp(i,j,k) for(int i=j;i<k;i++)
#define form(i,j,k) for(int i=j;i>k;i--)
using namespace std;
typedef long long LL;

const int N=1e6+10;
const LL mo=1e9+7;

LL f[N],g[N],a[N][2],b[N],gg[N];
char s[N];
int n,k;

void cc(LL*f,char*s,char ch)
{
    int st=ch=='W'?1:0,t0=0;
    char hh=ch=='W'?'B':'W';
    memset(a,0,sizeof(a));
    memset(f,0,sizeof(f));
    forp(i,0,n)if(s[i]!=hh)b[i]=++t0;else b[i]=t0=0;
    LL cnt=1;
    forp(i,0,n)
    {
        if(i<=k-1)
        {
            if(s[i]!=ch)a[i][1-st]=cnt;
            if(s[i]!=hh)a[i][st]=cnt;
            if(b[i]==k)a[i][st]=(a[i][st]+mo-1)%mo;
            if(s[i]=='X')cnt=cnt*2%mo;
            if(b[i]==k)f[i]=1;
            continue;
        }
        if(s[i]=='X')cnt=cnt*2%mo;
        if(i>k-1)
        {
            if(s[i]!=hh)
            {
                a[i][st]=(a[i-1][0]+a[i-1][1])%mo;
                if(b[i]>=k)a[i][st]=(a[i][st]+mo-a[i-k][1-st])%mo;
            }
            if(s[i]!=ch)
                a[i][1-st]=(a[i-1][0]+a[i-1][1])%mo;
        }
        if(b[i]>=k)f[i]=a[i-k][1-st];
    }
}

int main()
{
	scf("%d%d%s",&n,&k,s);
	cc(f,s,'B');
	reverse(s,s+n);
	cc(gg,s,'W');
	memset(g,0,sizeof(g));
	g[k-1]=gg[k-1];
	forp(i,k,n){g[i]=g[i-1]*(s[i]=='X'?2:1)+gg[i];g[i]%=mo;}
	reverse(g,g+n);
	LL ans=0;
    forp(i,0,n)ans=(ans+f[i]*g[i+1])%mo;
	ptf("%I64d\n",ans);
    return 0;
}

			 	  		 		 	   	 			 		