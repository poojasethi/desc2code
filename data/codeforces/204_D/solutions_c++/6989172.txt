#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define mo 1000000007
#define N 1000010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an;
int f[N],g[N],a[N];
char p[N];
inline void work(int ty) {
	int last=0,s=1;
	g[0]=1;
	For(i,1,n) {
		g[i]=0;
		for (;last+m<i;last++) s=(s-g[last])%mo;
		if (p[i]=='W') {
			g[i]=s;
			s=g[i];
			last=i;
		} else if (p[i]=='X') {
			g[i]=s;
			s=(s+g[i])%mo;
		}
	}
	last=0;
	For(i,1,n) {
		f[i]=0;
		if (p[i]=='W') last=i;
		else if (last+m<=i) f[i]=g[i-m];
	}
	if (!ty) {
		For(i,1,n) {
			f[i]=(f[i]+f[i-1])%mo;
			if (p[i]=='X') f[i]=(f[i]+f[i-1])%mo;
		}
		For(i,0,n) a[i]=f[i];
	} else For(i,1,n) an=(1ll*f[i]*a[n-i]+an)%mo;
}
int main() {
	scanf("%d%d",&n,&m);
	scanf("%s",p+1);
	work(0);
	For(i,1,n/2) swap(p[i],p[n-i+1]);
	For(i,1,n) if (p[i]=='W') p[i]='B';
		else if (p[i]=='B') p[i]='W';
	work(1);
	if (an<0) an+=mo;
	printf("%d\n",an);
	//for(;;);
	return 0;
}
