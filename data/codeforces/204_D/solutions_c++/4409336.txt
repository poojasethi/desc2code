#include <iostream>
using namespace std;
int n,k;
long long fb[1000005],fw[1000005],fx[1000005];
long long dl[2000005];
long long s[1000005];
char st[1000005];
const long long  mod=1000000007;
int work(long long success[],long long f[],char st[],long long s[],char ch){
    int l=n,r=n;
    f[l]=s[0];
    long long sum=f[l];
    for(int i=1;i<=n;i++){
        if(st[i]==ch){l--;f[l]=0;}
        if(st[i]=='X'){l--;f[l]=sum;sum=(sum*2)%mod;}
        if(st[i]=='B'+'W'-ch){r=l;f[l]=sum;}
        if(r-l==k){success[i]=f[r--];sum-=success[i];sum+=mod;sum%=mod;}
        f[l]+=s[i];sum+=s[i];f[l]%=mod;sum%=mod;
    }
}
int main(){
    cin >> n >> k;
    cin >> st+1;
    s[0]=1;
    work(fb,dl,st,s,'B');
    work(fw,dl,st,fb,'W');
    long long ans=0,t=1;
    for(int i=1;i<=n;i++){fw[i]+=fw[i-1];if(st[i]=='X')fw[i]+=fw[i-1];fw[i]%=mod;}
    cout << fw[n];
}
