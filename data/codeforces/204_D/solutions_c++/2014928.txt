#include<stdio.h>
#include<string.h>
typedef __int64 lld;
const int MAXN=1000005;
const int MOD=1000000007;
char str[MAXN];
lld l[MAXN];
lld r[MAXN];
int suml[MAXN];
int sumr[MAXN];
int main()
{
    int n,k,i,j;
    scanf("%d%d%s",&n,&k,str+1);
    l[0]=1;
    for(i=1;i<=n;i++)
    {
        l[i]=l[i-1];
        if(str[i]=='X')
            l[i]+=l[i-1];
        if(str[i]!='W')
            suml[i]=suml[i-1]+1;
        if(suml[i]>=k&&str[i-k]!='B')
        {
            if(i-k==0)
                l[i]--;
            else
                l[i]-=l[i-k-1];
        }
        l[i]=(l[i]%MOD+MOD)%MOD;
    }
    r[n+1]=1;r[n+2]=1;
    for(i=n;i>=1;i--)
    {
        r[i]=r[i+1];
        if(str[i]=='X')
            r[i]+=r[i+1];
        if(str[i]!='B')
            sumr[i]=sumr[i+1]+1;
        if(sumr[i]>=k&&str[i+k]!='W')
            r[i]-=r[i+k+1];
        r[i]=(r[i]%MOD+MOD)%MOD;
    }
    lld ans=0,sum=0;
    for(i=n;i>=1;i--)
    {
        if(str[i+1]=='X')
            sum<<=1;
        if(sumr[i+1]>=k&&str[i+k+1]!='W')
            sum+=r[i+k+2];
        sum%=MOD;
        if(suml[i]>=k&&str[i-k]!='B')
        {
            if(i-k==0)
                ans+=sum;
            else
                ans+=l[i-k-1]*sum;
        }
        ans%=MOD;
    }
    printf("%I64d\n",ans);
    return 0;
}