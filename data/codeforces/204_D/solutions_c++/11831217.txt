#include <cstdio>
#include <cstring>
#include <iostream>
using namespace std;

const int MOD = 1000000007;

int n,k,dp[1000000+10][3],g[1000000+10],two,last_W,last_B,f0,f1,f2;

char s[1000000+10];

int main() {
	scanf("%d%d",&n,&k);
	two = 1;
	scanf("%s",s+1);
	dp[0][0] = 1;
	for(int i = 1; i <= n; i++) {
		if(s[i] == 'B') {
			dp[i][1] = dp[i-1][1];
			if(last_W == i-k)
   	   			dp[i][1] += dp[i-k][0];
			else if(last_W < i-k && s[i-k] == 'X')
				dp[i][1] += dp[i-k-1][0];
			dp[i][1] %= MOD;
			dp[i][2] = dp[i-1][2];
			dp[i][0] = (((two-dp[i][1])%MOD-dp[i][2])%MOD+MOD)%MOD;
			last_B = i;
			g[i] = dp[i][1];
		}
		else if(s[i] == 'W') {
			dp[i][2] = dp[i-1][2];
			if(last_B <= i-k && s[i-k] != 'W')
				dp[i][2] += g[i-k];
			dp[i][2] %= MOD;
			dp[i][0] = dp[i-1][0];
			dp[i][1] = (((two-dp[i][0])%MOD-dp[i][2])%MOD+MOD)%MOD;
			last_W = i;
		}
		else if(s[i] == 'X') {
			f1 = dp[i-1][1];
			if(last_W == i-k)
   	   			f1 += dp[i-k][0];
			else if(last_W < i-k && s[i-k] == 'X')
				f1 += dp[i-k-1][0];
			f1 %= MOD;
			f2 = dp[i-1][2];
			f0 = (((two-f1)%MOD-f2)%MOD+MOD)%MOD;
			g[i] = f1;
			dp[i][2] = dp[i-1][2];
			if(last_B <= i-k && s[i-k] != 'W')
				dp[i][2] += g[i-k];
			dp[i][2] %= MOD;
			dp[i][0] = dp[i-1][0];
			dp[i][1] = (((two-dp[i][0])%MOD-dp[i][2])%MOD+MOD)%MOD;
			dp[i][0] = (dp[i][0] + f0) % MOD;
			dp[i][1] = (dp[i][1] + f1) % MOD;
			dp[i][2] = (dp[i][2] + f2) % MOD;
			two = (two << 1) % MOD;
		}
	}
	printf("%d\n",dp[n][2]);
	return 0;
}
 		   			    	  		  	 		 			