#include<cstdio>
#include<cstring>
#define MAXN 1000010

const int mo=1000000007;

int n,k,f[MAXN][2],g[MAXN][2],G[MAXN],lb[MAXN],rw[MAXN],lx[MAXN],rx[MAXN],ans;

char s[MAXN];

int main()
{
//	freopen("d.in","r",stdin);
	scanf("%d%d%s",&n,&k,s+1); 
	for (int i=1;i<=n;i++)
		if (s[i]=='X') lx[i]=rx[i]=lb[i]=rw[i]=1;
		else if (s[i]=='B') lb[i]=1;
		else rw[i]=1;
	for (int i=1;i<=n;i++)
	{
		lx[i]+=lx[i-1];
		if (lb[i]) lb[i]+=lb[i-1];
	}
	for (int i=n-1;i;i--)
	{
		rx[i]+=rx[i+1];
		if (rw[i]) rw[i]+=rw[i+1];
	}
	f[0][1]=1;
	for (int i=1;i<=n;i++)
	{
		if (s[i]!='B') f[i][1]=(f[i-1][0]+f[i-1][1])%mo;
		if (s[i]!='W')
		{
			f[i][0]=f[i-1][0]+f[i-1][1];
			if (i-k>=0 && lb[i]>=k) f[i][0]-=f[i-k][1];
			f[i][0]=(f[i][0]%mo+mo)%mo;
		}
	}
	g[n+1][1]=1;
	for (int i=n;i;i--)
	{
		if (s[i]!='W') g[i][1]=(g[i+1][0]+g[i+1][1])%mo;
		if (s[i]!='B')
		{
			g[i][0]=g[i+1][0]+g[i+1][1];
			if (i+k<=n+1 && rw[i]>=k) g[i][0]-=g[i+k][1];
			g[i][0]=(g[i][0]%mo+mo)%mo;
		}
	}
	for (int i=n-k+1;i>=k;i--)
	{
		if (rw[i]>=k) 
			G[i]=g[i+k][1];
		int mm=(s[i]=='X')?2:1;
		G[i]=(G[i]+G[i+1]*mm%mo)%mo;
	}
	for (int i=k;i<=n-k;i++)
	if (lb[i]>=k)
	{
		ans=(ans+(long long)f[i-k][1]*G[i+1]%mo)%mo;
	}
	printf("%d\n",ans);
	return 0;
}
