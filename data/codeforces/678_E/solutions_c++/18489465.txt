#include <bits/stdc++.h>
using namespace std;

const int maxn = 18;
int n, x, y, ub;
double tmp, ans, p[maxn][maxn], d[1<<maxn][maxn];

int main() {
	scanf("%d", &n);
	for(int i = 0; i < n; i++) {
		for(int j = 0; j < n; j++) {
			scanf("%lf", &p[i][j]);
		}
	}
	ub = 1 << n;
	d[1][0] = 1.0;
	for(int i = 2; i < ub; i++) {
		for(int j = 0; j < n; j++) {
			x = 1 << j;
			if(i & x == 0) {
				continue;
			}
			for(int k = 0; k < n; k++) {
				y = 1 << k;
				if(i & y == 0) {
					continue;
				}
				tmp = p[j][k] * d[i^y][j] + p[k][j] * d[i^x][k];
				d[i][j] = max(d[i][j], tmp);
			}
		}
	}
	for(int j = 0; j < n; j++) {
		ans = max(ans, d[ub-1][j]);
	}
	printf("%.10f\n", ans);
	return 0;
}
