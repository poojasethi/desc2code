#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

int n, m;
double a[20][20], ans, f[1 << 20][20];

int main() {
	scanf("%d", &n);
	m = (1 << n) - 1;
	for (int i = 0; i < n; i ++)
		for (int j = 0; j < n; j ++) scanf("%lf", &a[i][j]);
	f[1][0] = 1;
	for (int s = 3; s <= m; s ++)
		for (int j = 0; j < n; j ++) if (s & (1 << j))
			for (int k = 0; k < n; k ++) if (k != j && (s & (1 << k))) {
				f[s][j] = max(f[s][j], f[s ^ (1 << j)][k] * a[k][j] + f[s ^ (1 << k)][j] * a[j][k]);
			}
	for (int i = 0; i < n; i ++) ans = max(ans, f[m][i]);
	printf("%.8lf", ans);
	return 0;
}