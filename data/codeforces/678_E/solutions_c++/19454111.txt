#include<bits/stdc++.h>
using namespace std;
const int maxn = 20;
double M[maxn][maxn],dp[(1<<18)+20][maxn];
int main(void)
{
//	freopen("5.txt","r",stdin);
	int n;
	cin>>n;
	for(int i = 0; i < n; i ++)
	{
		for(int j = 0;j < n; j ++)
		{
			scanf("%lf",&M[i][j]);
		}
	}
	dp[1][0] = 1;
	for(int i = 3; i < (1<<n) ; i += 2)
	{
		for(int j = 0; j < n; j ++)
		{
			if(i & (1<<j))
			for(int k = 0 ; k < n; k++)
			{
				
				if(j != k && i & (1<<k))
				{
					dp[i][j] = max(dp[i][j] , dp[i^(1<<j)][k] * M[k][j] + dp[i^(1<<k)][j] * M[j][k]);
				}
			}
		}
	}
	printf("%.8lf",*max_element(dp[(1<<n) - 1],dp[(1<<n) - 1] + n));
} 
				   								    	  					  		