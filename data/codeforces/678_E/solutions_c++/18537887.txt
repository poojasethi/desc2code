#include<cstdio>
using namespace std;
int n,i,j,s;
double p[20][20],f[270000][20],ans;
double max(double a,double b){return a>b?a:b;}
int main()
{
	scanf("%d",&n);
	for (i=0;i<n;i++)
	  for (j=0;j<n;j++)
	    scanf("%lf",&p[i][j]);
	//f[s][i],s: alive set,i:current winner
	//f[s][i]=max(f[s\i][j]*p[j][i]+f[s\j][i]*p[i][j])
	//back to the first candidate
	f[1][0]=1.0;
	for (s=3;s<(1<<n);s+=2)//odd number:0 alive
	{
		for (i=0;i<n;i++)
		  if (s&(1<<i))
		  for (j=0;j<n;j++)
		  if (s&(1<<j))
		  {
		  	if (j==i) continue;
		  	f[s][i]=max(f[s][i],f[s-(1<<i)][j]*p[j][i]+f[s-(1<<j)][i]*p[i][j]);
		  }
	}
	ans=f[(1<<n)-1][0];
	for (i=1;i<n;i++) ans=max(ans,f[(1<<n)-1][i]);
    printf("%.12lf\n",ans);
    return 0;
}
