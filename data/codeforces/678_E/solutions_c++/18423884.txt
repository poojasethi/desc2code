#include <bits/stdc++.h>
using namespace std;
int n;
double p[20][20];

double mem[1 << 18][18];
bool vis[1 << 18][18];

double solve(int msk, int cur, int cnt) {
	if (msk & (1 << 0))
		return 0;
	if (cnt == 1)
		return 1.0;
	if (vis[msk][cur])
		return mem[msk][cur];
	vis[msk][cur] = 1;
	double ans = 0;
	for (int i = 0; i < n; i++)
		if (!((msk & (1 << i)) || cur == i)) {
			double tmp = solve(msk | (1 << i), cur, cnt - 1) * p[cur][i];
			tmp += solve(msk | (1 << cur), i, cnt - 1) * p[i][cur];
			ans = max(ans, tmp);
		}
	return mem[msk][cur] = ans;

}

int main() {
	ios::sync_with_stdio(false);
	scanf("%d", &n);
	for (int i = 0; i < n; i++)
		for (int j = 0; j < n; j++)
			scanf("%lf", &p[i][j]);
	double ans = 0;
	for (int x = 0; x < n; x++)
		ans = max(ans, solve(0, x, n));
	printf("%.13lf\n", ans);



	return 0;
}

