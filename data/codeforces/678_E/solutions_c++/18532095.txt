#include<bits/stdc++.h>

using namespace std;

long double d[18][18],res=0,e,dp[1<<18][18];
int n,ok[1<<18][18]={0};

long double calc(int i,int j)
{
    if(i==((1<<n)-1))
        return j==0;

    if(ok[i][j]) return dp[i][j];

    ok[i][j]=1;
    for(int k=0;k<n;k++)
        if(!((1<<k) & i))
            dp[i][j]=max(dp[i][j],calc(i|(1<<k),j)*d[j][k]+calc(i|(1<<k),k)*d[k][j]);

    return dp[i][j];
}

int main()
{
    //freopen("000.txt","r",stdin);
    ios::sync_with_stdio(false);

    int i,j;

    cin>>n;
    for(i=0;i<n;i++)
        for(j=0;j<n;j++)
            cin>>d[i][j];

    cout<<fixed<<setprecision(12);
    if(n==1)
    {
        cout<<1;
        return 0;
    }
    if(n==2)
    {
        cout<<d[0][1];
        return 0;
    }

    for(i=0;i<n;i++)
        res=max(res,calc((1<<i),i));

    cout<<res;
    return 0;
}
