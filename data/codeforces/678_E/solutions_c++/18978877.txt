#include<cstdio>
#include<iostream>
#include<cmath>
#define DB double
using namespace std;
DB dp[(1<<18)+3][20];
DB a[20][20];
int n;
/*�������Ҫ������*/
int main(){
	scanf("%d",&n);
	for(int i=1;i<=n;i++)
		for(int j=1;j<=n;j++)
			scanf("%lf",&a[i][j]);
	dp[1][1]=1; 
	for(int k=2;k<(1<<n);k++){//1��ʾ���ŵ��� 
		for(int i=1;i<=n;i++){//��i���� ��ԭ�������� 
			if((k&(1<<(i-1)))==0) continue;
			DB z=0;
			for(int j=1;j<=n;j++){//j����Ϊ���� 
				if((k&(1<<(j-1)))==0) continue;
				z=max(z,dp[k^(1<<(i-1))][j]*a[j][i]+dp[k^(1<<(j-1))][i]*a[i][j]);
			}
			dp[k][i]=z;
		}
	}
	DB ans=0;
	for(int i=1;i<=n;i++) ans=max(ans,dp[(1<<n)-1][i]);
	printf("%.10lf",ans);
	return 0;
}
