#include<bits/stdc++.h>
using namespace std;
double res,p[20][20],dp[20][1<<20];
int n,vis[20][1<<19];
double rec(int index,int mask){
    if(mask==(1<<n)-1){
        if(index==0)return 1;
        return 0;
    }
    if(vis[index][mask])return dp[index][mask];
    vis[index][mask]=1;
    double temp=0;
    for(int i=0;i<n;i++){
        if(!((mask>>i)&1)){
            int temp_mask=(1<<i)|mask;
            temp=max(temp,p[i][index]*rec(i,temp_mask)+p[index][i]*rec(index,temp_mask));
        }
    }
    return dp[index][mask]=temp;
}
int main(){
    cin>>n;
    for(int i=0;i<n;i++){
        for(int j=0;j<n;j++){
            cin>>p[i][j];
        }
    }
    for(int i=0;i<n;i++){
        res=max(res,rec(i,(1<<i)));
    }
    cout<<fixed<<setprecision(15)<<res<<endl;
}
