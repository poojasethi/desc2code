#include <cstdio>

#include <cstring>

#include <iostream>

using namespace std;



int n;

double dp[1<<20][20], p[20][20];



int main() {

	scanf("%d", &n);

	for (int i = 0; i < n; i++) {

		for (int j = 0; j < n; j++) {

			scanf("%lf", &p[i][j]);

		}

	}

	dp[1][0] = 1.0;

	int p2n = 1 << n;

	for (int mask = 0; mask < p2n; mask++) {

		for (int i = 0; i < n; i++) {

			if ((mask >> i) & 1) {

				for (int j = 0; j < n; j++) {

					if (j != i && ((mask >> j) & 1)) {

						dp[mask][i] = max(dp[mask][i], dp[mask^1<<j][i] * p[i][j] + dp[mask^1<<i][j] * p[j][i]);

					}

				}

			}

		}

	}

	double ans = 0;

	for (int i = 0; i < n; i++) {

		ans = max(ans, dp[p2n-1][i]);

	}

	printf("%.9f\n", ans);

	return 0;

}
 		 	    	 	   		 				 		 	   	