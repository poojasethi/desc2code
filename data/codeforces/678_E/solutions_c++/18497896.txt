#include<bits/stdc++.h>
using namespace std;
typedef long long LL;
const int maxn = 20;

int n;
double p[maxn][maxn];
double dp[1<<maxn][maxn];
int main() {
	
	ios_base::sync_with_stdio(0),cin.tie(0),cout.tie(0);
	#ifndef ONLINE_JUDGE
    freopen("in", "r", stdin);
	#endif

    cin >> n;

    for(int i = 0; i < n; i++) 
        for(int j = 0; j < n; j++) 
            cin >> p[i][j];

    memset(dp,0.0,sizeof dp);
    dp[1][0] = 1.0;
    for(int i = 0; i < (1<<n); i++) {
        for(int j = 0; j < n; j++) {
            if((i>>j)&1) {
                for(int k = 0; k < n; k++) {
                    if(k!=j) dp[i][j] = max(dp[i][j],dp[i^(1<<j)][k]*p[k][j]+dp[i^(1<<k)][j]*p[j][k]);
                }
            }
        }
    }

    double ret = 0;
    for(int i = 0; i < n; i++) {
        ret = max(ret,dp[(1<<n)-1][i]);
    }
    printf("%.12lf\n",ret);

}