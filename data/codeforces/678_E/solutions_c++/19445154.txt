#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<cmath>
#include<cstring>

using namespace std;

double a[19][19],f[1<<18][19],ans;
int i,j,n,k;

int main()
{
	scanf("%d",&n);
	for(i=1;i<=n;i++)
		for(j=1;j<=n;j++)scanf("%lf",&a[i][j]);
	f[1][1]=1;
	for(i=3;i<(1<<n);i++){
		for(j=1;j<=n;j++)if((i&(1<<(j-1)))){
			f[i][j]=0;
			for(k=1;k<=n;k++)if(j!=k&&(i&(1<<(k-1))))f[i][j]=max(f[i][j],f[i^(1<<(j-1))][k]*a[k][j]+f[i^(1<<(k-1))][j]*a[j][k]);
		}
	}
	for(i=1;i<=n;i++)ans=max(ans,f[(1<<n)-1][i]);
	printf("%.7lf\n",ans);
}
