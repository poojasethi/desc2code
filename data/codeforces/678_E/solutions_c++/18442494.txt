#include<bits/stdc++.h>
using namespace std;
double p[19][19];
int n;
double f[1<<18];
int cnt[1<<18];
double dfs(int S){
	if(f[S]>-1e-7)return f[S];
	if(S==1)return f[S]=1;
	if(cnt[S]==1) return f[S]=0;
	double ans=0;
	for(int i=0;i<n;i++)if(S&(1<<i))
	for(int j=i+1;j<n;j++)if(S&(1<<j)){
		ans=max(ans,dfs(S^(1<<i))*p[j][i]+dfs(S^(1<<j))*p[i][j]);		
	}return f[S]=ans;
}
int C(int x){
	int ans=0;
	while(x)ans++,x-=x&-x;
	return ans;
}
int main(){
	cin>>n;
	for(int i=0;i<n;i++)
	for(int j=0;j<n;j++)
	cin>>p[i][j];
	for(int S=0;S<(1<<n);S++)f[S]=-1;
	for(int S=0;S<(1<<n);S++)
	cnt[S]=C(S);
	double ans=dfs((1<<n)-1);
	printf("%.8lf\n",ans);
	return 0;
}