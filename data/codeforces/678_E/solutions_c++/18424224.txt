#include <iostream>
#include <cmath>

using namespace std;

int n;
double p[20][20];

double memcalcula[1<<18][18];
int calculado[1<<18][18];

double calcula(int c,int u)
{
  if ((1<<n)-2==(c|(1<<u)))
    return p[0][u];
  double &mem=memcalcula[c][u];
  if (calculado[c][u]) return mem;
  calculado[c][u]=1;
  mem=0;
  for (int i=1;i<n;i++)
    if (i!=u and ((c&(1<<i))==0))
      mem=max(mem,
	      p[u][i]*calcula(c|(1<<i),u)+
	      p[i][u]*calcula(c|(1<<u),i));
  return mem;
}

int main()
{
  cout.setf(ios::fixed);
  cout.precision(10);
  cin>>n;
  for (int i=0;i<n;i++)
    for (int j=0;j<n;j++)
      cin>>p[i][j];
  if (n==1) {
    cout<<1.0<<endl;
  } else {
    double sol=0;
    for (int i=1;i<n;i++)
      sol=max(sol,calcula(0,i));
    cout<<sol<<endl;
  }
}
