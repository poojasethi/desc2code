#include<bits/stdc++.h>
using namespace std;

double res,p[18][18], f[1<<18][18];
int n;
int main() {
    //freopen("input.txt","r",stdin);
    cin>>n;
    for(int i = 0; i < n; ++i)
        for(int j = 0; j < n; ++j) scanf("%lf",&p[i][j]);
    f[1][0] = 1;
    for(int mask = 1; mask < (1<<n); ++mask)
        for(int i = 0; i < n; ++i) {
            if((mask>>i)&1)
                for(int j = 0; j < n; ++j)
                    if(j != i && ((mask>>j)&1))
                        f[mask][i] = max(f[mask][i],p[i][j]*f[mask^(1<<j)][i] + p[j][i]*f[mask^(1<<i)][j]);
            if(mask == (1<<n)-1) res = max(res,f[mask][i]);
        }
    printf("%.6lf\n",res);
}
