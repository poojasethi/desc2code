#include<cstdio>
#include<algorithm>
#define fo(i,a,b) for(int i=a;i<=b;i++)
using namespace std;
typedef double db;
const int N=19;
int n,_2[N];
db a[N][N],f[1<<N][N];
int main()
{
	scanf("%d",&n);
	_2[0]=1;
	fo(i,1,n) _2[i]=_2[i-1]*2;
	fo(i,0,n-1)
		fo(j,0,n-1) scanf("%lf",&a[i][j]);
	f[1][0]=1;
	for(int s=3;s<_2[n];s+=2)
		fo(i,0,n-1)
			if(s&_2[i])
				fo(j,0,n-1)
					if(i!=j && s&_2[j]) f[s][i]=max(f[s][i],f[s^_2[j]][i]*a[i][j]+f[s^_2[i]][j]*a[j][i]);
	db ans=0;
	fo(i,0,n-1) ans=max(ans,f[_2[n]-1][i]);
	printf("%.7lf",ans);
	return 0;
}
