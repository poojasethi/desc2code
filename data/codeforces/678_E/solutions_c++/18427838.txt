#include <bits/stdc++.h>
using namespace std;
const int N = (1 << 18) + 100;
double dp[N];
double val[20][20];
int main() {
	int n;
	cin >> n;
	for(int i = 0; i < n; i++) for(int j = 0; j < n; j++) scanf("%lf", &val[i][j]);
	dp[1] = 1;
	for(int i = 2; i < (1 << n); i++) {
		vector<int> ones;
		ones.clear();
		for(int j = 0; j < n; j++) if((i >> j) & 1) ones.push_back(j);
		int siz = ones.size();
		for(int j = 0; j < siz; j++) {
			for(int k = j + 1; k < siz; k++) {
				double val1 = dp[i & (~(1 << ones[k]))] * val[ones[j]][ones[k]];
				double val2 = dp[i & (~(1 << ones[j]))] * val[ones[k]][ones[j]];
				if(ones[j] > 0) val1 += val2;
				dp[i] = max(dp[i], val1);
			}
		}
	}
	printf("%.10lf\n", dp[(1 << n) - 1]);
}