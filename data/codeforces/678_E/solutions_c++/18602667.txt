#include <cstdio>
#include <algorithm>
using namespace std;
const double EPS=1e-8;
int n;
double A[18][18], dp[(1<<18)+5][18];
bool vis[(1<<18)+5][18];
double solve(int mask, int cur) {
    if (vis[mask][cur])
        return dp[mask][cur];
    for (int i=0; i<n; i++) {
        if ((mask&(1<<i)))
            dp[mask][cur]=max(dp[mask][cur],
                            solve(mask^(1<<i), cur)*A[cur][i]
                            +solve(mask^(1<<i), i)*A[i][cur]);
    }
    vis[mask][cur]=true;
    return dp[mask][cur];
}
int main()
{
    //freopen("in.txt", "r", stdin);
    scanf("%d", &n);
    for (int i=0; i<n; i++)
        for (int j=0; j<n; j++)
            scanf("%lf", &A[i][j]);
    double res=0;
    dp[0][0]=1; 
    for (int i=0; i<n; i++)
        res=max(res, solve(((1<<n)-1)^(1<<i), i));
    printf("%lf\n", res);
    return 0;
}