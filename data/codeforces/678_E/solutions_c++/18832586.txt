#include<cstdio>
#include<algorithm>
using namespace std;
const int N=18,M=1<<18;
int n,m;
double p[N][N];
double f[N][M];
bool vis[N][M];
double DP(int u,int v){
	if(vis[u][v]) return f[u][v];
	vis[u][v]=1;
	double &ans=f[u][v]=0;
	for(int i=0,k=1;i<n;i++,k<<=1){
		if((v&k)==k) continue;
		ans=max(ans,DP(u,v|k)*p[u][i]+DP(i,v|k)*p[i][u]);
	}
	return f[u][v];
}
void Init(){
	scanf("%d",&n);
	m=(1<<n)-1;
	for(int i=0,k=1;i<n;i++,k<<=1){
		for(int j=0;j<n;j++){
			scanf("%lf",p[i]+j);
		}
	}
	f[0][m]=1;
	vis[0][m]=1;
}
int main(){
	Init();
	double ans=0;
	for(int i=0,k=1;i<n;i++,k<<=1) ans=max(ans,DP(i,k));
	printf("%.15f\n",ans);
	return 0;
}
