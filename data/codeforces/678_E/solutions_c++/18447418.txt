#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<iostream>
#include<algorithm>

using namespace std;

double f[20][1<<18],p[20][20];
int n;

int main()
{
	scanf("%d",&n);
	for (int i=1;i<=n;i++)
	  for (int j=1;j<=n;j++)
	    scanf("%lf",&p[i][j]);
	f[1][1]=1;
	for (int S=0;S<(1<<n);S++)
	  for (int i=1;i<=n;i++)
	    if (S&(1<<(i-1)))
	    {
	    	for (int j=1;j<=n;j++)
	    	  if (j!=i && S&(1<<(j-1))) f[i][S]=max(f[i][S],f[i][S^(1<<(j-1))]*p[i][j]+f[j][S^(1<<(i-1))]*p[j][i]);
	    }
	 double ans=0.0;
	 for (int i=1;i<=n;i++) ans=max(ans,f[i][(1<<n)-1]);
	 printf("%.10lf\n",ans);
	return 0;
}
