#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
double f[270000][18],p[18][18];
int main()
{
    //freopen("input.txt","r",stdin);freopen("output.txt","w",stdout);
    int S,i,j,n;double ans=0.0;
    scanf("%d",&n);
    for (i=0;i<n;i++)
     for (j=0;j<n;j++)
      scanf("%lf",&p[i][j]);
    f[1][0]=1;
    for (S=1;S<=(1<<n)-1;S++)
     if (S&1)
     {
            for (i=0;i<n;i++)
             if (S&(1<<i))
              for (j=0;j<n;j++)
               if ((S&(1<<j)) && (i!=j))
                f[S][i]=max(f[S][i],f[S^(1<<i)][j]*p[j][i]+f[S^(1<<j)][i]*p[i][j]);
     }
    for (i=0;i<n;i++) ans=max(ans,f[(1<<n)-1][i]);
    printf("%.10lf\n",ans);
    return 0;
}
