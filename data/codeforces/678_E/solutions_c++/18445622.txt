#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
#define LL long long
#define oo (1<<30)
using namespace std;
int n,S; double ans,P[18][18],F[18][1<<18];
double dp(int t,int S)
{
	int i;
	if(S%2==0&&t!=0) return F[t][S]=0;
	if(F[t][S] !=-1) return F[t][S];
	F[t][S]=0;
	for(i=0;i<n;i++)
		if((S>>i)&1)
			F[t][S]=max(F[t][S],P[t][i]*dp(t,S^(1<<i))+P[i][t]*dp(i,S^(1<<i)));
	return F[t][S];
}
int main()
{
	int i,j;
	scanf("%d",&n);
	for(i=0;i<n;i++)
		for(j=0;j<n;j++)
			scanf("%lf",&P[i][j]);
  for(i=0;i<18;i++)
		for(j=0;j<(1<<18);j++)
			F[i][j]=-1;
	F[0][0]=1;
	S=(1<<n)-1;
	for(i=0;i<n;i++)
		ans=max(ans,dp(i,S^(1<<i)));
	printf("%.9lf",ans);
	return 0;
}
