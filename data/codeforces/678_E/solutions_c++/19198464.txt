#include<iostream>
#include<cstdio>
#include<cstdlib>
#define fo(i,j,k) for(int i=j;i<=k;i++)
#define fd(i,j,k) for(int i=j;i>=k;i--)
#define N 19
#define M 270000
using namespace std;
double a[N][N];
bool bz[N];
int b[N];
double f[M][N];
int n;
int _2[N];
int main()
{
	cin>>n;
	_2[0]=1;
	fo(i,1,n) _2[i]=_2[i-1]*2;
	fo(i,1,n)
	fo(j,1,n) scanf("%lf",&a[i][j]);
	f[1][1]=1;
	for(int s=3;s<_2[n];s+=2)
	fo(i,1,n)
	if(s&_2[i-1])
	fo(j,1,n)
	if(s&_2[j-1] && i!=j)
	f[s][i]=max(f[s][i],f[s-_2[j-1]][i]*a[i][j]+f[s-_2[i-1]][j]*a[j][i]);
	double ans=0;
	fo(i,1,n) ans=max(ans,f[_2[n]-1][i]);
	printf("%.7lf",ans);
}


