#include<stdio.h>
#include<iostream>
#include<stdlib.h>
#include<string.h>
using namespace std;
const int N=19;
double a[N][N],f[N][1<<N];
int n,b[1<<N];
double maxx(double x,double y){if(x>y)y=x;return y;}
int main(void)
{
	//freopen("sduoj.in","r",stdin);
	int i,j,k;
	scanf("%d",&n);
	for(i=1;i<=n;i++)for(j=1;j<=n;j++)scanf("%lf",&a[i][j]);
	for(i=1;i<(1<<n);i++)b[i]=b[i&(i-1)]+1;
	f[1][1]=1;
	for(i=2;i<(1<<n);i++)if(b[i]>=2)
	for(j=1;j<=n;j++)if(i&(1<<(j-1)))
	for(k=1;k<=n;k++)if(k!=j&&(i&(1<<(k-1))))
	f[j][i]=maxx(f[j][i],a[j][k]*f[j][i^(1<<(k-1))]+a[k][j]*f[k][i^(1<<(j-1))]);
	double ans=0;
	for(i=1;i<=n;i++)ans=maxx(ans,f[i][(1<<n)-1]);
	printf("%.8f",ans);
	return 0;
}
