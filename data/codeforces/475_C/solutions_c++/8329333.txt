#include <iostream>
#include <fstream>
#include <cstring>
#include <string>
#include <cstdlib>
#include <cstdio>
#include <algorithm>
#include <cmath>
#include <bitset>
#include <ctime>
#include <map>
#include <queue>
#include <set>
using namespace std;

int n,m,x,y;
char s[1005][1005];
int sum[1005][1005];
int ans;
int tj(int a,int b,int c,int d)
{
    return sum[a][b]-sum[a][d]-sum[c][b]+sum[c][d];
}
int calc(int x,int y,int a,int b)
{
    if (tj(x,y,x+a,y+b)!=a*b) return 0;
    if (y+b<m && s[x][y+b]=='X') 
    {
       if (tj(x+a,y,n,y+1)>0) return 0;
       return a+calc(x,y+1,a,b);
    }
    if (x+a<n && s[x+a][y]=='X') 
    {
       if (tj(x,y+b,x+1,m)>0) return 0;
       return b+calc(x+1,y,a,b);
    }
    return a*b;
}
int main()
{
    scanf("%d%d",&n,&m);
    x=-1;
    for (int i=0;i<n;i++)
    {
        scanf("%s",s[i]);
        for (int j=0;j<m;j++)
         if (s[i][j]=='X' && x==-1)
         {
            x=i;
            y=j;
         }
    }
    for (int i=n-1;i>=0;i--)
     for (int j=m-1;j>=0;j--)
      sum[i][j]=sum[i][j+1]+sum[i+1][j]-sum[i+1][j+1]+(s[i][j]=='X');
    ans=n*m+1;
    for (int i=1;x+i-1<n;i++)
     for (int j=1;y+j-1<m;j++)
      if (i*j<ans && calc(x,y,i,j)==sum[0][0])
          ans=min(ans,i*j);
    if (ans==n*m+1) printf("-1\n");
     else printf("%d\n",ans);
    return 0;
}