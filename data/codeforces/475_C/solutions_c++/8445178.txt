#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#include<ctime>
#include<iostream>
#include<cmath>
#include<vector>
#define int64 long long
#define mk make_pair
#define pb push_back
#define sqr(x) (x)*(x)
#define rep(i,x,y) for(int i=x;i<=y;++i)
#define VI vector<int>
#define VS vector<string>
#define PII pair<int,int>
#define PDD pair<double,double>
#define VPII vector< PII >
#define N 1100
using namespace std;
const double pi=acos(-1);
int ans,b[N][N],n,m;
char c[N][N];
void check(int i,int j,int dx,int dy){
	memset(b,0,sizeof(b));
	rep(x,i,i+dx-1)
		rep(y,j,j+dy-1)b[x][y]=1;
	for(;;){
		if(i+dx<=n && c[i+dx][j]=='X'){
			rep(y,j,j+dy-1)b[i+dx][y]=1;
			i++;
		}else
		if(j+dy<=m && c[i][j+dy]=='X'){
			rep(x,i,i+dx-1)b[x][j+dy]=1;
			j++;
		}else break;
	}
	rep(i,1,n)
		rep(j,1,m)if(b[i][j]^(c[i][j]=='X'))return;
	ans=min(ans,dx*dy);
}
void work(){
	int dx,dy;
	rep(i,1,n)
		rep(j,1,m)if(c[i][j]=='X'){
			int x=i,y=j;
			while(x+1<=n && c[x+1][j]=='X')x++;
			while(y+1<=m && c[i][y+1]=='X')y++;
			int p=i;
			while(p+1<=n && (y+1>m || c[p+1][y+1]=='.'))p++;
			dx=x-p; dy=y-j+1;
			if(dx<=0)dx=1;
			check(i,j,dx,dy);
			return;
		}
}
int main(){
	scanf("%d%d",&n,&m);
	rep(i,1,n)scanf("%s",c[i]+1);
	ans=1<<30;
	work();
	int minnm=min(n,m);
	rep(i,1,n)
		rep(j,1,m){
			if(i<=minnm && j<=minnm && i<=j)continue;
			swap(c[i][j],c[j][i]);
		}
	swap(n,m);
	work();
	if(ans==1<<30)printf("-1\n");
	else printf("%d\n",ans);
}