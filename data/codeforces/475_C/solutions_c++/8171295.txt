#include <cstdio>
#include <cstdlib>
#include <cstring>
using namespace std;

int n,m,ansx,ansy,ans,stx,sty;
int s[1001][1001];
char map[1001][1001];

int get(int x1,int y1,int x2,int y2)
{
	return s[x2][y2]-s[x1-1][y2]-s[x2][y1-1]+s[x1-1][y1-1];
}

bool check(int x,int y)
{
	if (x>n||y>m) return 0;
	if (get(stx,sty,x,y)!=ansx*ansy) return 0;
	int sum=ansx*ansy;
	while (sum<s[n][m])
	{
		if (map[x][y+1]=='X'&&get(x-ansx+1,y-ansy+2,x,y+1)==ansx*ansy) y++,sum+=ansx;
		else if (map[x+1][y]=='X'&&get(x-ansx+2,y-ansy+1,x+1,y)==ansx*ansy) x++,sum+=ansy;
		else return 0;
	}
	return 1;
}

int main()
{
	scanf("%d%d",&n,&m);
	for (int i=1;i<=n;i++) 
	{
		scanf("%s",map[i]+1);
		for (int j=1;j<=m;j++) s[i][j]=s[i][j-1]+(map[i][j]=='X');
	}
	for (int i=2;i<=n;i++)
		for (int j=1;j<=m;j++) s[i][j]+=s[i-1][j];
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++)
			if (map[i][j]=='X')
			{
				stx=i; sty=j; goto pyc;
			}
	pyc:;
	ans=n*m+1;
	for (int j=sty;map[stx][j]=='X';j++,ansy++);
	for (ansx=1;ansx<=n;ansx++)
	{
		if (check(stx+ansx-1,sty+ansy-1))
			if (ansx*ansy<ans) ans=ansx*ansy;
	}
	ansx=ansy=0;
	for (int j=stx;map[j][sty]=='X';j++,ansx++);
	for (ansy=1;ansy<=m;ansy++)
	{
		if (check(stx+ansx-1,sty+ansy-1))
			if (ansx*ansy<ans) ans=ansx*ansy;
	}
	if (ans!=n*m+1) printf("%d\n",ans);
	else printf("-1\n");
}

