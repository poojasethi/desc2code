#include<cstdio>
#include<algorithm>
#include<string>
#include<iostream>
#include<map>
#define N 2000
using namespace std;
int w[N][N],sum,n,m,i,j,xx,yy,ans,l,r,tmp,mm;
char ch;
int check(int a,int b,int x,int y)
{
	int p;
	p=w[x][y]-w[a-1][y]-w[x][b-1]+w[a-1][b-1];
	if (p==(x-a+1)*(y-b+1)) return 1;else return 0;
}
int dfs(int x,int y,int a,int b,int s)
{
	int fa,fb;
	if (s==sum) return 1;
	if ((a+1<=n)&&(check(x+1,y,a+1,b))) fa=1;else fa=0;
	if ((b+1<=m)&&(check(x,y+1,a,b+1))) fb=1;else fb=0;
	if ((fa^fb)==0)
	return 0;
	else
	if (fa)
	return dfs(x+1,y,a+1,b,s+b-y+1);
	else
	if (fb)
	return dfs(x,y+1,a,b+1,s+a-x+1);
}
int min(int a,int b)
{
	if (a<b) return a;return b;
}
int main()
{
	scanf("%d%d",&n,&m);
	for (i=1;i<=n;i++)
	{
	getchar();
	for (j=1;j<=m;j++)
	{
	scanf("%c",&ch);
	if (ch=='X')
	{
	  w[i][j]=1;
	  sum++;
	  if (xx==0)
	  {
	  	xx=i;yy=j;
	  }
	}
	w[i][j]=w[i][j]+w[i-1][j]+w[i][j-1]-w[i-1][j-1];
	}
	}

	ans=0x37373737;
	for (i=1;i<=n-xx+1;i++)
	{
		l=1;r=m-yy+1;
		while (l<=r)
		{
			mm=(l+r)>>1;
			if (check(xx,yy,xx+i-1,yy+mm-1))
			l=mm+1;
			else
			r=mm-1;
		}
		l=1;tmp=r;
		for (mm=1;mm<=tmp;mm++)
		{
			if (i*mm>=ans) break;
			if (dfs(xx,yy,xx+i-1,yy+mm-1,i*mm))
			{
				ans=min(ans,i*mm);
				break;
			}
		}
	}
	if (ans!=0x37373737)
	printf("%d",ans);
	else
	printf("-1");
} 