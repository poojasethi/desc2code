#include <cstdio>
#include <algorithm>
using namespace std;

#define	n	1005
#define For(i,a,b)	for(int i=a;i<=b;i++)

int		N,M,S[n][n];
char	A[n][n];

int		Cal(int x1,int y1,int x2,int y2){
		return	S[x2][y2]+S[x1-1][y1-1]-S[x1-1][y2]-S[x2][y1-1];
}
int		Work(int i,int j,int x,int y){
		int now=0;
		if	(i+x-1<=N&&j+y-1<=M&&Cal(i,j,i+x-1,j+y-1)==x*y)	now=x*y;
		for	(;i+x-1<=N&&j+y-1<=M&&Cal(i,j,i+x-1,j+y-1)==x*y;)
		if	(i+x<=N&&Cal(i+1,j,i+x,j+y-1)==x*y)	now+=y,i++;	else
		if	(j+y<=M&&Cal(i,j+1,i+x-1,j+y)==x*y)	now+=x,j++;
			else	j++;
		return	now==S[N][M]?x*y:1<<30;
}

int		main(){
		scanf("%d%d",&N,&M);
		For(i,1,N)	{
			scanf("%s",A[i]+1);
			For(j,1,M)	S[i][j]=S[i-1][j]+S[i][j-1]-S[i-1][j-1]+(A[i][j]=='X');
		}
		For(i,1,N)	For(j,1,M)
		if	(A[i][j]=='X'){
			int x=N-i+1,y=M-j+1,Ans=1<<30;
			For(k,j,M)	if	(A[i][k]=='.')	{y=k-j;break;}
			For(k,i,N)	if	(A[k][j]=='.')	{x=k-i;break;}
			For(k,1,x)	Ans=min(Ans,Work(i,j,k,y));
			For(k,1,y)	Ans=min(Ans,Work(i,j,x,k));
			(Ans==1<<30)?puts("-1"):printf("%d\n",Ans);	return	0;
		}	puts("0");
}