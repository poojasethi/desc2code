//thanks, asi1024
#include <bits/stdc++.h>

#define REP(i,n) for(int i=0;i<(int)(n);i++)
#define ALL(x) (x).begin(),(x).end()

using namespace std;

int n,m,yy, xx, dy, dx;

bool solve(vector<string> str, int y, int x) {
	REP(i,yy) REP(j,xx) {
		if (str[y+i][x+j] != 'X') return false;
		str[y+i][x+j] = '@';
	}
	while (true) {
		bool by = true;
		bool bx = true;
		REP(i,yy) if (str[y+i][x+xx] != 'X') bx = false;
		REP(i,xx) if (str[y+yy][x+i] != 'X') by = false;
		if (!bx && !by) break;
		if (bx && by) {
			yy += dy;
			xx += dx;
		}
		else if (bx) {
			REP(i,yy) str[y+i][x+xx] = '@';
			x++;
		}
		else {
			REP(i,xx) str[y+yy][x+i] = '@';
			y++;
		}
	}
	REP(i,n) REP(j,m)
		if (str[i][j] == 'X') return false;
	return true;
}
const int maxn=1024;

typedef pair<int,int> pii;
pii getfirst(vector<string> s)	{
	REP(i,n)	REP(j,m)	if(s[i][j]=='X')	return make_pair(i,j);
}

int main() {
	cin >> n >> m;
	vector<string> str(n);
	REP(i,n) cin >> str[i],str[i]+=".";
	str.push_back(str[0]);
	REP(i,m+1) str[n][i] = '.';

	pii f=getfirst(str);
	int y = f.first, x = f.second;
	int res = 1e8;

	yy = 1; xx = 1; dy = 1, dx = 0;
	while (str[y][x+xx] == 'X') xx++;
	solve(str, y, x);
	bool flag = solve(str, y, x);
	if (flag) res = min(res, yy * xx);

	yy = 1; xx = 1; dy = 0, dx = 1;
	while (str[y+yy][x] == 'X') yy++;
	solve(str, y, x);
	flag = solve(str, y, x);
	if (flag) res = min(res, yy * xx);

	if (res == 1e8) res = -1;
	cout << res << endl;
	return 0;
}
