#include<stdio.h>
#include<algorithm>
using namespace std;
const int maxn=1050,INF=0x7fffffff;
int n,m,ans;
bool mat[maxn][maxn];
int l[maxn],r[maxn];
bool judg(int x,int &y)
{
	int i,dx,dy;
	bool z=0;
	y=1;
	for(dy=0;dy+y<=m;dy++)
	{
		dx=l[dy];
		if(dx<n) break;
	}
	if(r[dy]<dx+x) return 0;
	while(dy+y<=m)
	{
		if(r[dy]>dx+x)
		{
			if(mat[dx][dy+y]&&z) return 0;
			while(dy+y<m&&mat[dx][dy+y])
			{
				z=1;
				if(l[dy+y]<dx||r[dy+y]<r[dy+y-1]) return 0;
				y++;
			}
			dx=r[dy]-x;
		}
		else if(dy+y<m&&mat[dx][dy+y])
		{
			if(l[dy+y]<dx||r[dy+y]<r[dy+y-1]) return 0;
			dy++;
		}
		else break;
	}
	if(r[dy]>dx+x)
		dx=r[dy]-x;
	for(i=dy+1;i<dy+y;i++)
		if(r[i]>dx+x)
			return 0;
	for(i=dy+y;i<m;i++)
		if(r[i]>l[i])
			return 0;
	return 1;
}
int main()
{
#ifndef ONLINE_JUDGE
	freopen("data.in","r",stdin);
#endif
	int i,j;
	scanf("%d %d\n",&n,&m);
	for(i=0;i<n;i++)
	{
		for(j=0;j<m;j++)
			mat[i][j]=(getchar()=='X');
		scanf("\n");
	}
	//for(i=0;i<n;i++) { for(j=0;j<m;j++) printf("%d",mat[i][j]); printf("\n"); }
	for(i=0;i<m;i++)
	{
		for(l[i]=0;l[i]<n&&!mat[l[i]][i];l[i]++);
		for(r[i]=l[i];r[i]<n&&mat[r[i]][i];r[i]++);
		for(j=r[i]+1;j<n;j++)
			if(mat[j][i])
				ans=INF;
	}
	if(ans!=INF)
	{
		ans=INF;
		for(i=1;i<=n;i++)
			if(judg(i,j=1))
				ans=min(ans,j*i);
	}
	printf("%d\n",ans==INF?-1:ans);
	return 0;
}
