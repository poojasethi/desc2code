#include <map>
#include <set>
#include <cmath>
#include <stack>
#include <queue>
#include <string>
#include <vector>
#include <fstream>
#include <sstream>
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <algorithm>
using namespace std;
#define li		long long
#define rep(i,to)	for(li i=0;i<((li)to);i++)
#define pb		push_back
#define sz(v)		((li)v.size())

#define MAX 1005
int main(){
	int n,m,k,U[MAX][MAX],L[MAX][MAX],D[MAX][MAX],R[MAX][MAX];
	cin>>n>>m;
	vector<string> mp(n);
	rep(i,n) cin>>mp[i];
	rep(i,m){
		li up,down;
		rep(j,n){
			if(mp[j][i]=='#') up=j;
			U[j][i]=up;
		}
		for(li j=n-1;0<=j;j--){
			if(mp[j][i]=='#') down=j;
			D[j][i]=down;
		}
	}
	rep(i,n){
		li left,right;
		rep(j,m){
			if(mp[i][j]=='#') left=j;
			L[i][j]=left;
		}
		for(li j=m-1;0<=j;j--){
			if(mp[i][j]=='#') right=j;
			R[i][j]=right;
		}
	}
	li x[26],y[26],used[26];
	rep(i,26) used[i]=false;
	rep(i,n)rep(j,m)if('A'<=mp[i][j] && mp[i][j]<='Z'){
		used[mp[i][j]-'A']=true;
		x[mp[i][j]-'A']=i;
		y[mp[i][j]-'A']=j;
	}
	cin>>k;
	rep(stage,k){
		string str;
		li len;
		cin>>str>>len;
		rep(i,26)if(used[i]){
			if(str=="N"){
				x[i]-=len;
				if(x[i]<0 || n<=x[i]) used[i]=false;
				else if(D[x[i]][y[i]]<=len+x[i]) used[i]=false;
			}else if(str=="S"){
				x[i]+=len;
				if(x[i]<0 || n<=x[i]) used[i]=false;
				else if(x[i]-len<=U[x[i]][y[i]]) used[i]=false;
			}else if(str=="E"){
				y[i]+=len;
				if(y[i]<0 || m<=y[i]) used[i]=false;
				else if(y[i]-len<=L[x[i]][y[i]]) used[i]=false;
			}else if(str=="W"){
				y[i]-=len;
				if(y[i]<0 || m<=y[i]) used[i]=false;
				else if(R[x[i]][y[i]]<=y[i]+len) used[i]=false;
			}else{
				cout<<"error 0"<<endl;
			}
		}
	}
	string res="";
	rep(i,26)if(used[i]) res+=string(1,i+'A');
	if(sz(res)==0) cout<<"no solution"<<endl;
	else cout<<res<<endl;
}
