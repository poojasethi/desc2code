#include<cstdio>
#include<set>
#include<algorithm>
using namespace std;
int m,n;
char tab[1010][1010];
int sr[1010][1010], sc[1010][1010];
int yy[] = {0,0,1,-1};
int xx[] = {-1,1,0,0};
int k;
int d[100010];
int l[100010];

int simula(int x, int y, int p){
	if(p==k)
		return 1;
	if( x+xx[d[p]]*l[p] >= 1 && x+xx[d[p]]*l[p] <= m && 
		y+yy[d[p]]*l[p] >= 1 && y+yy[d[p]]*l[p] <= n &&
		sc[ min(x+xx[d[p]]*l[p],x)-1][y]==sc[max(x+xx[d[p]]*l[p],x)][y] &&
		 sr[x][ min(y,y+yy[d[p]]*l[p])-1]==sr[x][max(y,y+yy[d[p]]*l[p])] &&
		simula(x+xx[d[p]]*l[p], y+yy[d[p]]*l[p],p+1))
			return 1;
	return 0;
}


int main(){
	scanf("%d %d",&m,&n);
	for(int i=1;i<=m;i++)
		for(int j=1;j<=n;j++)
			scanf(" %c",&tab[i][j]);
	scanf("%d",&k);
	for(int i=0;i<k;i++){
		char c;
		scanf(" %c %d",&c,&l[i]);
		if(c=='N') d[i]=0;
		else if(c=='S') d[i]=1;
		else if(c=='E') d[i]=2;
		else d[i]=3;
	}
	for(int i=1;i<=m;i++){
		sr[i][0]=0;
		for(int j=1;j<=n;j++){
			sr[i][j]=sr[i][j-1];
			if(tab[i][j]=='#')
				sr[i][j]++;
		}
	}
	for(int j=1;j<=n;j++){
		sc[0][j]=0;
		for(int i=1;i<=m;i++){
			sc[i][j]=sc[i-1][j];
			if(tab[i][j]=='#')
				sc[i][j]++;
		}
	}
	int tem=0;
	set<char> S;
	for(int i=1;i<=m;i++)
		for(int j=1;j<=n;j++){
			if(tab[i][j]>='A' && tab[i][j]<='Z' && simula(i,j,0)){
				S.insert(tab[i][j]);
				tem=1;
			}
		}
	if(!tem) printf("no solution");
	for(set<char> :: iterator it = S.begin();it!=S.end();it++)
		printf("%c",*it);
	printf("\n");
	return 0;
}
