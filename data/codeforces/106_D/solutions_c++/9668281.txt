#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <stdio.h>
using namespace std;
int q,w,a[1001][1001];
bool l(int e,int r,int c,int v){
  int y;
  if(e>c){
   y=e;e=c;c=y;}
  if(r>v){
   y=r;r=v;v=y;}
  if((e<1)||((r<1)||((c>q)||(v>w))))
   return 1;
  if(a[c][v]-a[c][r-1]-a[e-1][v]+a[e-1][r-1]>0)
   return 1;
  return 0;
}
int main(){
  //freopen("input.txt","r",stdin);
  //freopen("output.txt","w",stdout);
  int e,r,t,c,v,v1,g[100000],g1[100000];
  char h[1001][1002],h1[2];
  bool f[100];
  for(e=0;e<100;e++)
   f[e]=0;
  scanf("%d%d",&q,&w);
  for(r=0;r<=w;r++)
   a[0][r]=0;
  for(e=1;e<=q;e++){
   scanf("%s",h[e]);
   a[e][0]=0;
   for(r=w;r>0;r--)
    h[e][r]=h[e][r-1];
   t=0;
   for(r=1;r<=w;r++){
    if(h[e][r]=='#')
     t++;
    a[e][r]=t+a[e-1][r];}}
  cin>>t;
  for(e=0;e<t;e++){
   scanf("%s%d",h1,&r);
   g[e]=g1[e]=0;
   if(h1[0]=='N')
    g[e]=-r;
   if(h1[0]=='S')
    g[e]=r;
   if(h1[0]=='W')
    g1[e]=-r;
   if(h1[0]=='E')
    g1[e]=r;}
  for(e=1;e<=q;e++)
   for(r=1;r<=w;r++)
    if((64<h[e][r])&&(h[e][r]<91)){
     f[h[e][r]]=1;
     v=e;v1=r;
     for(c=0;c<t;c++){
      if(l(v,v1,v+g[c],v1+g1[c])){
       f[h[e][r]]=0;
       break;}
      v+=g[c];
      v1+=g1[c];}}
  t=0;
  for(w=65;w<91;w++)
   if(f[w]){
    cout<<(char)(w);
    t=1;}
  if(!t)
   printf("no solution");
  return 0;}
