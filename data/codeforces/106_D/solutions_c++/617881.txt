#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<ctime>
#include<iostream>
#include<algorithm>
#include<vector>
#include<list>
#include<stack>
#include<queue>
#include<deque>
#include<set>
#include<map>
#include<string>
#include<bitset>

using namespace std;

struct arr
{
	int x,y;
	void make(int xx,int yy)
	{
		x=xx; y=yy;
	}
};

struct classcomp
{
	bool operator () (arr a,arr b)
	{
		return a.x<b.x;
	}
};

bool comp(arr a,arr b)
{
	return a.x<b.x||(a.x==b.x&&a.y<b.y);
}

int n,m,len,c[1010][1010],d[1010][1010],b[100010],p;

char a[1010][1010],s[100010][3],ans[30];

bool in(int x,int y)
{
	return x>0&&x<=n&&y>0&&y<=m;
}

bool ok(int x,int y)
{
	for(int i=1;i<=p;i++)
	{
		if (s[i][0]=='S')
		{
			if ((!in(x+b[i],y))||c[x+b[i]][y]<=b[i]) return false;
			x+=b[i];
		} else if (s[i][0]=='N')
		{
			if (c[x][y]<=b[i]) return false;
			x-=b[i];
		} else if (s[i][0]=='W')
		{
			if (d[x][y]<=b[i]) return false;
			y-=b[i];
		} else if (s[i][0]=='E')
		{
			if ((!in(x,y+b[i]))||d[x][y+b[i]]<=b[i]) return false;
			y+=b[i];
		}
	}
	return true;
}

int main()
{
	//freopen("d.in","r",stdin);
	
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;i++) scanf("%s",a[i]+1);
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			if (a[i][j]!='#') c[i][j]=c[i-1][j]+1,d[i][j]=d[i][j-1]+1;
	scanf("%d",&p);
	for(int i=1;i<=p;i++)
		scanf("%s%d",s[i],&b[i]);
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++) if (a[i][j]!='#'&&a[i][j]!='.')
			if (ok(i,j))
				ans[++len]=a[i][j];
	if (!len)
		puts("no solution");
	else
	{
		sort(ans+1,ans+len+1);
		puts(ans+1);
	}
	
	return 0;
}

