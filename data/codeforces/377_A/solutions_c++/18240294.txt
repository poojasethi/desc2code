#include <iostream>
using namespace std;

char ma[500][500];
int vi[500][500];
int k,n,m,v,b;

void busca(int i, int j){
	if(vi[i][j]==1||i<0||j<0||i>=n||j>=m||ma[i][j]=='#'){
		return;
	}	
	vi[i][j]=1;
	busca(i-1,j);
	busca(i+1,j);
	busca(i,j+1);
	busca(i,j-1);
	if(k>0){ma[i][j]='X';k--;}
}


int main(){
	cin >> n >> m >> k;
	for(int i=0;i<n;i++)
		for(int j=0;j<m;j++){
			cin >> ma[i][j];
			if(ma[i][j]=='.'){
				v=i;b=j;
			}
		}

	busca(v,b);
	
	for(int i=0;i<n;i++){
		for(int j=0;j<m;j++)
			cout << ma[i][j];	
		cout << endl;
	}
}