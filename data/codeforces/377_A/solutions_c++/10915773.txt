#include <stdio.h>
const int N=512;
int n,m,k,a[N*N],b[N*N],p,dr[]={-1,0,1,0},dc[]={0,1,0,-1};
char g[N][N],v[N][N];
void go(int r,int c){
  if('.'==g[r][c]&&!v[r][c]){
    v[a[p]=r][b[p]=c]=1,++p;
    for(int d=0;d<4;++d)go(r+dr[d],c+dc[d]);
  }
}
int main(){
  scanf("%d%d%d",&n,&m,&k);
  for(int i=1;i<=n;++i)scanf("%s",g[i]+1);
  for(int i=1;i<=n;++i)for(int j=1;j<=m;++j)if('.'==g[i][j])go(i,j);
  for(int i=p-k;i<p;++i)g[a[i]][b[i]]='X';
  for(int i=1;i<=n;++i)puts(g[i]+1);
}