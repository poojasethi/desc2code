#include<iostream>
#include<cmath>
using namespace std;
int n,m,k;
char a[501][501];
int vis[501][501];
void dfs(int x,int y)
{
	if(x>n||y>m||x<1||y<1||a[x][y]!='.'||vis[x][y])
		return;
	vis[x][y]=1;
	dfs(x+1,y);
	dfs(x-1,y);
	dfs(x,y+1);
	dfs(x,y-1);
	if(k)
		a[x][y]='X',k--;
}
int main()
{
	cin>>n>>m>>k;
	int i,j;
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			cin>>a[i][j];
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			if(a[i][j]=='.'&&k)
				dfs(i,j);
	for(i=1;i<=n;i++)
		cout<<a[i]+1<<endl;
	return 0;
}

	 	 	 			  	  		 		 	 		  	 	 	