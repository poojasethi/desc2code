//shjj-377a

#include <iostream>
#include <cstring>
#include <cstdio>
#include <cstdlib>
#include <algorithm>

using namespace std;

int n,m,K;
char a[500+3][500+3];
bool vis[500+3][500+3];

void dfs(int x,int y)
{
if (vis[x][y]||x<1||x>n||y<1||y>m||a[x][y]!='.') return;
vis[x][y]=1;
dfs(x-1,y);
dfs(x+1,y);
dfs(x,y-1);
dfs(x,y+1);
if (K) a[x][y]='X',K--;
}
int main()
{
scanf("%d %d %d",&n,&m,&K);
for (int i=1;i<=n;i++) scanf("%s",a[i]+1);
for (int i=1;i<=n;i++)
  for (int j=1;j<=m;j++) if (a[i][j]=='.')
    {
    dfs(i,j);
    for (int k=1;k<=n;k++) puts(a[k]+1);
    return 0;
    }
}