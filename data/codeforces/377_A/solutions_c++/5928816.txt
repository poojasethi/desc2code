#include <stdio.h>
#include <iostream>
#include <cstring>
using namespace std;
char w[600][600];
bool f[600][600];
int n,m,k,t;
void dfs(int x,int y)
{
	if (x<0 || x>=n || y<0 || y>=m || w[x][y]!='.' || f[x][y])
		return ;
	f[x][y]=true;
	dfs(x+1,y);
	dfs(x-1,y);
	dfs(x,y+1);
	dfs(x,y-1);
	if (k){
		w[x][y]='X';
		k--;
	}
}
int main( ){
	int i,j;
	cin>>n>>m>>k;
	for (i=0;i<n;i++)
		cin>>w[i];
	for (i=0;i<n;i++)
    {
		for (j=0;j<m;j++)
			if (w[i][j]=='.')
				break;
		if (j<m) break;
	}
	dfs(i,j);
	for (i=0;i<n;i++)
		cout<<w[i]<<endl;
	return 0;
}
			 	  		   	   	 		   	