#include <iostream>
#include <cstdio>
#include <cstring>

using namespace std;

char mp[512][512];
bool vis[512][512];

int n,m,k;

void dfs(int x,int y)
{
    if(x<0||x>=n||y<0||y>=m) return ;
    if(mp[x][y]!='.') return ;
    if(vis[x][y]) return ;
    vis[x][y]=true;
    dfs(x+1,y); dfs(x-1,y);
    dfs(x,y+1); dfs(x,y-1);
    if(k) mp[x][y]='X',k--;
}

int main()
{
    scanf("%d%d%d",&n,&m,&k);
    for(int i=0;i<n;i++) scanf("%s",mp[i]);
    for(int i=0;i<n&&k;i++)
    {
        for(int j=0;j<m&&k;j++)
        {
            dfs(i,j);
        }
    }
    for(int i=0;i<n;i++) puts(mp[i]);
    return 0;
}