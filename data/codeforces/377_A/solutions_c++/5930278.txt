#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
typedef long long ll;
#define rep(i,n) for (int i=0;i<n;++i)
const int N=505,u[]={1,0,-1,0},v[]={0,1,0,-1};
char s[N][N]; bool b[N][N]; int n,m,k;
void dfs(int x,int y)
{
	if (b[x][y] || s[x][y]!='.') return; b[x][y]=1;
	rep(d,4){
		int i=x+u[d],j=y+v[d];
		dfs(i,j);
	}
	if (k) s[x][y]='X',--k;
}
int main()
{
	scanf("%d%d%d",&n,&m,&k);
	rep(i,n) scanf("%s",s[i]);
	rep(i,n) rep(j,m) if (s[i][j]=='.'){
		dfs(i,j);
		rep(i,n) puts(s[i]);
		return 0;
	}
}
