#include<bits/stdc++.h>
using namespace std;
char a[1000][1000];
bool v[1000][1000];
int n,m,k;

void go(int x,int y)
{
if(x<0||x>=n||y<0||y>=m||a[x][y]!='.'||v[x][y])return;
v[x][y]=true;
go(x+1,y);
go(x-1,y);
go(x,y+1);
go(x,y-1);
if(k)
{
a[x][y]='X';
k--;
}
}

int main()
{
int i,j;
scanf("%d%d%d",&n,&m,&k);
for(i=0;i<n;i++)scanf("%s",a[i]);
for(i=0;i<n;i++){for(j=0;j<m;j++)if(a[i][j]=='.')break;if(j<m)break;}
go(i,j);
for(i=0;i<n;i++)puts(a[i]);
}