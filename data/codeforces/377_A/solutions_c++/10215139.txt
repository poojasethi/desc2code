#include <iostream>
#include <cstdio>
#include <cstring>
int n,m,k,i,j;
using namespace std;
char a[510][510];
bool o[510][510];
void f(int x,int y)
{
    if(x<0||x>=n||y<0||y>=m) return ;
    if(a[x][y]!='.') return ;
    if(o[x][y]) return ;
    o[x][y]=true;
    f(x+1,y); f(x-1,y);
    f(x,y+1); f(x,y-1);
    if(k) a[x][y]='X',k--;
}
main()
{
    cin>>n>>m>>k;
    for(i=0;i<n;i++) scanf("%s",a[i]);
    for(i=0;i<n&&k;i++)
        for(j=0;j<m&&k;j++)
            f(i,j);
    for(i=0;i<n;i++) puts(a[i]);
}

		 		 		 	    		 			   	 	 	