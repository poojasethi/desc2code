#include<cstdio>
#include<cmath>
using namespace std;
int n,m,k;
char s[500][501];
bool b1[500][500];
int dfs(int a,int b)
{
	if(s[a][b]=='#'||b1[a][b])return 0;
	b1[a][b]=1;
	int res=1;
	if(a)res+=dfs(a-1,b);
	if(a+1<n)res+=dfs(a+1,b);
	if(b)res+=dfs(a,b-1);
	if(b+1<m)res+=dfs(a,b+1);
	if(k&&res==1)s[a][b]='X',--res,--k;
	return res;
}
int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(int i=0;i<n;++i)
		scanf("%s",s[i]);
	for(int i=0;i<n;++i)
	for(int j=0;j<m;++j)
	if(s[i][j]=='.')
	{
		dfs(i,j);
		for(int ii=0;ii<n;++ii)
			puts(s[ii]);
		return 0;
	}
}