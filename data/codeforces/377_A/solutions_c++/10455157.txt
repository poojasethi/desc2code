

#include<stdio.h>
char a[510][510];
int b[510][510];
int n,m,k,i,j;
void dfs(int x,int y)
{
	if(x<0||x>n||y<0||y>m) return ;
	if(a[x][y]!='.') return ;
	if(b[x][y]) return ;
	b[x][y]=1;
	dfs(x+1,y);dfs(x-1,y);dfs(x,y+1);dfs(x,y-1);
	if(k) {a[x][y]='X';k--;}
}
int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(i=0;i<n;i++)
     {
     	scanf("%s",a[i]);
     }	
    for(i=0;i<n&&k;i++)
      for(j=0;j<m&&k;j++)
      {
      	dfs(i,j);
      }
    for(i=0;i<n;i++)
    {
    	printf("%s\n",a[i]);
    }
	return 0;
} 

 			 					 		 		     	 		 	 	 	