#include<bits/stdc++.h>
using namespace std;
int n,m,k;
vector<string> v(502);
int vis[502][502];
void dfs(int x,int y)
{
    if(x>=n||y>=m||x<0||y<0||vis[x][y])return;
    if(v[x][y]=='#')return;
    vis[x][y]=1;
    dfs(x+1,y),dfs(x-1,y),dfs(x,y+1),dfs(x,y-1);
    if(k)k--,v[x][y]='X';
}
int main()
{
    scanf("%d%d%d",&n,&m,&k);
    for(int i=0;i<n;i++){
        cin>>v[i];
    }
    for(int i=0;i<n;i++){
        for(int j=0;j<m;j++){
            if(!vis[i][j])
                dfs(i,j);
        }
    }
    for(int i=0;i<n;i++){
        cout<<v[i]<<endl;

    }
}
