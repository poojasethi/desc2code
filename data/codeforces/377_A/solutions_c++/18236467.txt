#include<bits/stdc++.h>
using namespace std;
#define mp make_pair
int i,j,n,m,k;bool visited[505][505];char G[505][505];
void DFS(int x,int y){
	if(x<0||y<0||x>=n||y>=m||G[x][y] != '.' || visited[x][y])return;
	visited[x][y] = 1;
	DFS(x + 1,y );
	DFS(x - 1,y );
	DFS(x ,y + 1);
	DFS(x ,y -1);
	if(k){
		G[x][y] = 'X';k--;
	}
}
int main(){
	cin>>n>>m>>k;
	memset(visited,0,sizeof(visited));
	for(i=0;i<n;i++){
		cin>>G[i];
	}
	for(i=0;i<n;i++){
		for(j=0;j<m;j++){
			if(G[i][j]=='.'){
				break;
			}
		}
		if(j<m){
			break;
		}
	}
	DFS(i,j);
	for(i=0;i<n;i++){
		cout<<G[i]<<endl;
	}
	return 0;
}