#include<stdio.h>
#include<string.h>
int n,m,k;
char s[510][510];
int visit[510][510];
int main()
{
	void dfs(int x,int y);
	int i,j;
	while(scanf("%d%d%d",&n,&m,&k)!=EOF)
	{
		memset(visit,0,sizeof(visit));
		for(i=0;i<n;i++)
		scanf("%s",s[i]);
		for(i=0;i<n;i++)
		for(j=0;j<m;j++)
		dfs(i,j);
		for(i=0;i<n;i++)
		printf("%s\n",s[i]);
	}
	return 0;
}
void dfs(int x,int y)
{
	if(visit[x][y])
	return;
	else if(x<0||x>n-1||y<0||y>m-1)
	return;
	else if(s[x][y]=='#')
	return;
	else
	{
		visit[x][y]=1;
		dfs(x,y+1);
		dfs(x,y-1);
		dfs(x+1,y);
		dfs(x-1,y);
	}
	if(k)
	{
		s[x][y]='X';
		k--;
	}
}
	 	   		  	 	   		 	 				 	 	