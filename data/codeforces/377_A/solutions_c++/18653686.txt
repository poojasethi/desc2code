#include<bits/stdc++.h>
using namespace std;
int v[505][505];
char ch[505][505];

int n,m,d;
void f(int i,int j)
{
if(i<0 || j<0 || i>=n || j>=m || ch[i][j]!='.' || v[i][j]) return;
v[i][j]=1;
f(i+1,j);
f(i-1,j);
f(i,j+1);
f(i,j-1);
if(d)
{
d--;
ch[i][j]='X';
}
}
int main()
{
    //freopen("in","r",stdin);
    int i,j;
    cin>>n>>m>>d;
    for(i=0;i<n;i++)
    {
    scanf("%s",ch[i]);
    }
    for(i=0;i<n;i++)
    for(j=0;j<m;j++)
    if(ch[i][j]=='.')
    {
    f(i,j);
    for(i=0;i<n;i++)
    //for(j=0;j<m;j++)
    printf("%s\n",ch[i]);

    return 0;

    }

}
