#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
using namespace std;
int n,m,k,a[120][120],bo[120],ans=1<<30,i,j;
void check(){
	int res=0,i,j,tmp;
	for(j=1;j<=m;++j){
		tmp=0;
		for(i=1;i<=n;++i)tmp+=abs(a[i][j]-bo[i]);
		res+=min(tmp,n-tmp);
	}
	ans=min(ans,res);
}
void dfs(int dep){
	if(dep==n+1){
		check();
		return;
	}
	bo[dep]=0;
	dfs(dep+1);
	bo[dep]=1;
	dfs(dep+1);
}
int main(){
	scanf("%d%d%d",&n,&m,&k);
	for(i=1;i<=n;++i)
		for(j=1;j<=m;++j)
			scanf("%d",&a[i][j]);
	if(n>m){
		for(i=1;i<=n;++i)
			for(j=1;j<=m;++j)if(i>j)swap(a[i][j],a[j][i]);
		swap(n,m);
	}
	if(n<=10){
		dfs(1);
	}else{
		for(j=1;j<=m;++j){
			for(i=1;i<=n;++i)bo[i]=a[i][j];
			check();
		}
	}
	if(ans>k)ans=-1;
	printf("%d\n",ans);
}
