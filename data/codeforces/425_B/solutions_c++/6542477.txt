#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 110
#define inf 1000000000
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,res,K;
int b[N][N],a[N][N],an[N];
inline void work() {
	int i,j,sum=0;
	For(i,1,n) {
		int s=0,ans;
		For(j,1,m) s+=a[i][j]!=an[j];
		ans=s;
		s=0;
		For(j,1,m) s+=a[i][j]==an[j];
		sum+=min(ans,s);
	}
	res=min(res,sum);
}
void dfs(int x) {
	if (x>n) {
		work();
		return;
	}
	an[x]=0;
	dfs(x+1);
	an[x]=1;
	dfs(x+1);
}
int main() {
	scanf("%d%d%d",&n,&m,&K);
	res=inf;
	For(i,1,n)For(j,1,m) scanf("%d",&b[i][j]),a[i][j]=b[i][j];
	if (n<m) {
		For(i,1,n)For(j,1,m) a[j][i]=b[i][j];
		swap(n,m);
	}
	if (n<=K) dfs(1);
	else {
		For(i,1,n) {
			For(j,1,m) an[j]=a[i][j];
			work();
			For(j,1,m) an[j]=a[i][j]^1;
			work();
		}
	}
	printf("%d\n",res>K?-1:res);
	//for(;;);
	return 0;
}
