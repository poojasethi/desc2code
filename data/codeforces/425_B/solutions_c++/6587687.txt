#include<iostream>
using namespace std;

#define maxn 110
int a[maxn][maxn],m,n,k;

int main()
{
	cin>>m>>n>>k;
	for(int i=0;i<m;i++)
		for(int j=0;j<n;j++)
			cin>>a[i][j];
	int ans=m*n;
	if (k<m)
	{
		for(int p=0;p<=k;p++)
		{
			int spend=0;
			for(int i=0;i<m;i++)
			{
				int row=0;
				for(int j=0;j<n;j++)
					row+=a[p][j]^a[i][j];
				spend+=min(row,n-row);
			}
			ans=min(spend,ans);
		}
	}
	else
	{
		for(int p=0;p<(1<<m);p++)
		{
			int spend=0;
			for(int j=0;j<n;j++)
			{
				int col=0;
				for(int i=0;i<m;i++)
					col+=((p>>i & 1) ^ a[i][j]);
				spend+=min(col,m-col);
			}
			ans=min(spend,ans);
		}
	}
	cout<<(ans<=k ? ans : -1);
	//system("pause");
	return 0;
}
