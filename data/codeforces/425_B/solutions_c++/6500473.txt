#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int maxn=102;
int a[maxn][maxn];
int n,m,k,ans;

int solve(int k){
  int i,j,s,sum=0;
  for (i=0;i<n;++i)
    if (i!=k){
      for (s=j=0;j<m;++j)
        s+=(a[i][j]==a[k][j]);
      sum+=min(s,m-s);
    }
  return sum;
}

int main(){
  int i,j,s;
  scanf("%d%d%d",&n,&m,&k);
  for (i=0;i<n;++i)
    for (j=0;j<m;++j)
      scanf("%d",&a[i][j]);
  ans=1<<30;
  if (k<n){
    for (i=0;i<n;++i)
      ans=min(ans,solve(i));
  }
  else {
    int state=1<<n;
    for (int ss=0;ss<state;++ss){
      int sum=0;
      for (j=0;j<m;++j){
        for (s=i=0;i<n;++i)
          s+=(a[i][j]==((ss>>i)&1));
        sum+=min(s,n-s);
      }
      ans=min(ans,sum);
    }
  }
  printf("%d\n",ans>k?-1:ans);
  return 0;
}