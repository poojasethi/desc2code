#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;

const int inf=1E9;

int v[110][110];
int n,m,k;

int solve1(int idx)
{
	int i,j;
	int ans=0,tmp;
	for(j=0;j<m;j++)
	{
		tmp=0;
		for(i=0;i<n;i++)
		{
			if(v[i][j]==v[i][idx]) tmp++;
		}
		ans+=min(tmp,n-tmp);
	}
	return ans;
}

int solve2(int idx)
{
	int i,j;
	int ans=0,tmp;
	for(i=0;i<n;i++)
	{
		tmp=0;
		for(j=0;j<m;j++)
		{
			if(idx&(1<<j))
			{
				if(v[i][j]==1) tmp++;
			}
			else
			{
				if(v[i][j]==0) tmp++;
			}
		}
		ans+=min(tmp,m-tmp);
	}
	return ans;
}

int main()
{
	int i,j;
	scanf("%d%d%d",&n,&m,&k);
	for(i=0;i<n;i++)
	{
		for(j=0;j<m;j++)
		{
			scanf("%d",&v[i][j]);
		}
	}
	int ans=inf;
	if(m>k)
	{
		for(i=0;i<m;i++)
		{
			ans=min(ans,solve1(i));
		}
	}
	else
	{
		for(i=0;i<(1<<m);i++)
		{
			ans=min(ans,solve2(i));
		}
	}
	if(ans>k)
	{
		printf("-1\n");
	}
	else
	{
		printf("%d\n",ans);
	}
	return 0;
}
		 		  	 	 	  	 					     	