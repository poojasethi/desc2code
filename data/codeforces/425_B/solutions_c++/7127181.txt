#include<stdio.h>
#include<algorithm>
#include<iostream>
using namespace std;
int a[1010][1010];
int n,m,k;

int main()
{
	int i,j,l;
	scanf("%d%d%d",&n,&m,&k);
	for(i=1;i<=n;i++)
	{
		for(j=1;j<=m;j++)
		scanf("%d",&a[i][j]);;
	}
	int ans=1000005;
	if(n>k)
	{
		for(l=1;l<=n;l++)
		{
			int sum=0;
					for(i=1;i<=n;i++)
			{
				int temp=0;
				for(j=1;j<=m;j++)
				temp+=a[l][j]^a[i][j];
				
				temp=min(temp,m-temp);
				sum+=temp;
			}
			ans=min(ans,sum);
		}
		
	}
	else 
	{
		for(l=1;l<(1<<n);l++)
		{
		   int sum=0;
			for(i=1;i<=m;i++)
			{
				int temp=0;
				for(j=1;j<=n;j++)
				{
					temp+=a[j][i]^((l>>j)&1);
				}
				sum+=min(temp,n-temp);
			}
			ans=min(ans,sum);
		}
	}
	if(ans>k) printf("-1\n");
	else printf("%d\n",ans);
} 
	   					 			 				  		    	