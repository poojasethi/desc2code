#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
#define rep(i,n) for (int i=0;i<n;++i)
typedef long long LL;
const int N=105;
int n,m,k,ans,a[N][N],p[N];
int main()
{
    scanf("%d%d%d",&n,&m,&k),ans=k+1;
    rep(i,n) rep(j,m) scanf("%d",a[i]+j);
    if (n<=k){
        rep(i,1<<n){
            int res=0;
            rep(j,m){
                int c=0; rep(k,n) if ((i>>k&1)^a[k][j]) ++c;
                res+=min(c,n-c);
            }
            ans=min(ans,res);
        }
    }else{
        rep(i,n){
            rep(j,m) p[j]=a[i][j]; int res=0;
            rep(k,n){
                int c=0; rep(j,m) if (a[k][j]^p[j]) ++c;
                res+=min(c,m-c); 
            }
            ans=min(ans,res);
        }
    }
    if (ans>k) ans=-1; printf("%d\n",ans);
    return 0;
}