#include <cstdio>
#include <cstring>
#include <algorithm>

using namespace std;

const int MaxN = 110;

int n,m,k;
int a[MaxN][MaxN];
int x[MaxN],y[MaxN];

int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			scanf("%d",&a[i][j]);
	int ans=k+1;
	if(n>k){
		for(int i=1;i<=n;i++){
			int sum=0;
			for(int j=1;j<=m;j++) y[j]=a[i][j];
			for(int j=1;j<=n;j++){
				int cnt=0;
				for(int p=1;p<=m;p++) cnt+=a[j][p]^y[p];
				sum+=min(cnt,m-cnt);
			}
			ans=min(ans,sum);
		}
	}
	else{
		for(int i=0;i<(1<<n);i++){
			int sum=0;
			for(int j=1;j<=n;j++) x[j]=a[j][1]^((i>>(j-1))&1),sum+=(i>>(j-1))&1;
			for(int j=2;j<=m;j++){
				int cnt=0;
				for(int p=1;p<=n;p++) cnt+=a[p][j]^x[p];
				sum+=min(cnt,n-cnt);
			}
			ans=min(ans,sum);
			//printf("%d:%d\n",i,sum);
		}
	}
	if(ans>k) puts("-1");
	else printf("%d\n",ans);
	return 0;
}
