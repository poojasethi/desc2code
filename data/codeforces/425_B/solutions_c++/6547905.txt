#include<iostream>
#include<cstring>
#include<cstdio>
#include<cstdlib>
#include<algorithm>
using namespace std;
const int N=105;
int n,m,b[N],a[N][N],ans=1<<30,p;
void check()
{
	int res,bes=0;
	for(int j=1;j<=m;j++){
		res=0;
		for(int i=1;i<=n;i++){
			res+=a[i][j]^b[i];
		}//cout<<res<<endl;
		bes+=min(res,n-res);
	}
	ans=min(ans,bes);
}
void dfs(int x)
{
	if(x==n+1){
		check();
		return ;
	}
	b[x]=1;
	dfs(x+1);
	b[x]=0;
	dfs(x+1);
}
int main()
{
	cin>>n>>m>>p;
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++){
			scanf("%d",&a[i][j]);
		}
	if(n>m){
		for(int i=1;i<=n;i++)
			for(int j=1;j<=i;j++){
				swap(a[i][j],a[j][i]);
			}
		swap(n,m);
	}
	if(n<=10)dfs(1);
	else {
		for(int j=1;j<=m;j++){
			for(int i=1;i<=n;i++)b[i]=a[i][j];
			check();
		}
	}
	if(ans>p)cout<<-1<<endl;
	else cout<<ans<<endl;

   // system("pause");
	return 0;
}
