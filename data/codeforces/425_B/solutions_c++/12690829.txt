#include <iostream>
#include <algorithm>
#include <cstdio>
using namespace std;
const int maxn = 1e2 + 5;
int n, m, k;
int a[maxn][maxn];
int ans;
int main()
{
	//freopen("test.in", "r", stdin);
	cin >> n >> m >> k;
	for (int i = 0; i < n; i++)
		for (int j = 0; j < m; j++)
			cin >> a[i][j];
	ans = 1e3;
	if (n > k)
		for (int i = 0; i < n; i++)
		{
			int sum = 0;
			for (int j = 0; j < n; j++)
			{
				int temp = 0;
				for (int l = 0; l < m; l++)
					temp += a[i][l] ^ a[j][l];
				sum += min(temp, m - temp);
			}
			ans = min(ans, sum);
		}
	else
		for (int i = 0; i < (1 << n); i++)
		{
			int sum = 0;
			for (int l = 0; l < m; l++)
			{
				int temp = 0;
				for (int j = 0; j < n; j++)
					temp += a[j][l] ^ ((i >> j) & 1);
				sum += min(temp, n - temp);
			}
			ans = min(ans, sum);
		}
	if (ans > k)
		cout << -1 << endl;
	else
		cout << ans << endl;
	return 0;
}

 	  	   	  	   	   	 					 		