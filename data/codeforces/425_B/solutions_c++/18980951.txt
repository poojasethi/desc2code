#include<bits/stdc++.h>
using namespace std;

int a[110][110];

int main()
{
	int n,m,k,i,j,t,ans,now,tmp;
	while(cin>>n>>m>>k)
	{
		memset(a,0,sizeof(a));
		if(n<m)
		{
			swap(n,m);
			for(i=1;i<=m;i++)
				for(j=1;j<=n;j++)
					scanf("%d",&a[j][i]);
		}
		else
		{
			for(i=1;i<=n;i++)
				for(j=1;j<=m;j++)
					scanf("%d",&a[i][j]);
		}
		if(n>k)
		{
			ans=1<<29;
			for(i=1;i<=n;i++)
			{
				now=0;
				for(j=1;j<=n;j++)
				{
					tmp=0;
					for(t=1;t<=m;t++)
						tmp+=a[i][t]^a[j][t];
					now+=min(tmp,m-tmp);
				}
				ans=min(ans,now);
			} 
		}
		else
		{
			ans=1<<29;
			for(i=0;i<(1<<m);i++)
			{
				now=0;
				for(j=1;j<=n;j++)
				{
					tmp=0;
					for(t=1;t<=m;t++)
						tmp+=a[j][t]^((i>>(t-1))&1);
					now+=min(tmp,m-tmp);
				}
				ans=min(ans,now);
			}
		}
		if(ans<=k)
			cout<<ans<<endl;
		else
			cout<<-1<<endl;
	}
}

			  		   					 	 		  	 		   	