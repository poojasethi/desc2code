#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<algorithm>
using namespace std;

int n,m,k;
int mp[110][110];
int Min = 100;

void row()
{
	for(int i=0;i<=n+1;i++)
	{
		int tmp = 0;
		for(int x=1;x<=n;x++)
		{
			int pos = 0, nav = 0;			
			for(int y=1;y<=m;y++)
			{
				if(mp[x][y] == mp[i][y])	nav++;
				else	pos++;	
			}
			tmp += min(pos,nav);
		}
		Min = min(Min,tmp);
	}
}

void column()
{
	for(int j=0;j<=m+1;j++)
	{
		int tmp = 0;
		for(int y=1;y<=m;y++)
		{
			int pos = 0, nav = 0;
			for(int x=1;x<=n;x++)
			{
				if(mp[x][y] == mp[x][j])	nav++;
				else	pos++;
			}
			tmp += min(pos,nav);
		}
		Min = min(Min,tmp);
	}
}

int main()
{
	scanf("%d %d %d",&n,&m,&k);
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=m;j++)
			scanf("%d",&mp[i][j]);
		mp[i][m+1] = 1;
	}
	for(int j=1;j<=m;j++)
		mp[n+1][j] = 1;
	row();
	column();
	if(Min > k)
		Min = -1;
	printf("%d\n",Min);
}
		   		    	 	 			 	  		 				 	