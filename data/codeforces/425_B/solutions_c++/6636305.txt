#include <stdio.h>
#include <iostream>
using namespace std;
int s[111][111];
int min(int a,int b)
{if(a < b) return a;return b;}

int main()
{
  int n,m,k,i,j,p;cin>>n>>m>>k;
  for(i = 0; i < n; i++)
  for(j = 0; j < m; j++)
  cin>>s[i][j];
  
  int ans = 111*111;
  
  
  for(p = 0; p <= n; p++)
  {
    int sum = 0;
    for(i = 0; i < n; i++)
    {
      int row = 0;
      for(j = 0; j < m; j++)
      row += s[i][j]^s[p][j];
      sum += min(row,m - row);
    }
    ans = min(ans, sum);
  }
  
  
  
 // cout<<ans<<endl;
  for(p = 0; p <= m; p++)
  {
      int sum = 0;
      for(j = 0; j < m; j++)
      {
          int col = 0;
          for(i = 0; i < n; i++)
          col += s[i][j] ^ s[i][p];
          sum += min(col,n - col);
      }
      ans = min(ans,sum);
  }
// cout<<ans<<endl;
    cout<<(ans<=k ? ans : -1)<<endl;
    
  return 0;
}