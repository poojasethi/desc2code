#include <bits/stdc++.h>
#define mem(a,b) memset(a,b,sizeof(a))
#define rep(i,a,b) for(int i=a;i<b;i++)
#define debug(a) printf("a =: %d\n",a);
const int INF=0x3f3f3f3f;
const int maxn=1e2+50;
const int Mod=1e9+7;

typedef long long ll;
using namespace std;
int n,m,k;
int s[maxn][maxn];

void solve(){
	int ans=k*2;
	if (n>k){
		rep(i,0,n){
			int dis=0;
			rep(j,0,n){
				int tmp=0;
				rep(k,0,m){
					tmp+=s[i][k]^s[j][k];
				}
				dis+=min(tmp,m-tmp);
			}
			ans=min(ans,dis);
		}
	}else{
		rep(i,0,(1<<n)){
			int dis=0;
			rep(j,0,m){
				int tmp=0;
				rep(k,0,n){
					tmp+=s[k][j]^((i>>k)&1);
				}
				dis+=min(tmp,n-tmp);
			}
			ans=min(ans,dis);
		}
	}

	if (ans>k) puts("-1");
	else printf("%d\n", ans);
}
int main()
{
	#ifndef ONLINE_JUDGE
		freopen("in.txt","r",stdin);
	#endif
	while(scanf("%d %d %d",&n,&m,&k)!=EOF){
		rep(i,0,n) rep(j,0,m) scanf("%d",&s[i][j]);
		solve();
	}

	return 0;
}

  	  	  	     	   						  		