#include<cstdio>
#include<iostream>
#include<cmath>
#include<cstring>
#define maxn 105
using namespace std;
char ch;
int n,m,k,tmp,tt,t,ans,g[maxn][maxn],list[maxn];
void read(int &x){
	for (ch=getchar();!isdigit(ch);ch=getchar());
	for (x=0;isdigit(ch);x=x*10+ch-'0',ch=getchar());
}
void dfs(int k){
	if (k==m+1){
		tmp=0;
		for (int i=1;i<=n;i++){
			t=0;
			for (int j=1;j<=m;j++)
				t+=(g[i][j]!=list[j]);
			tmp+=(min(t,m-t));
			//cout<<tmp<<endl;
		}
		ans=min(ans,tmp);	
		return;	
	}
	for (int i=0;i<=1;i++) list[k]=i,dfs(k+1);
}
int main(){
	read(n),read(m),read(k);
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++)
			read(g[i][j]);
	ans=2147483647;
	if (m>k){
		for (t=1;t<=m;t++){
			tmp=0;	
			for (int j=1;j<=m;j++){
				tt=0;
				for (int i=1;i<=n;i++)
					tt+=(g[i][j]!=g[i][t]);
				tmp+=(min(tt,n-tt));	
			}
			ans=min(ans,tmp);
		}
	}
	else dfs(1);
	if (ans>k) ans=-1;
	printf("%d\n",ans);
	return 0;	
}
