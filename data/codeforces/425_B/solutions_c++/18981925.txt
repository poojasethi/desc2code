#include <cstdio>
#include <climits>
#include <algorithm>
#define rep(i,n) for(int i=1;i<=n;i++)
using namespace std;
int m,n,k,a[105][105];
int main(){
    scanf("%d%d%d",&n,&m,&k);
    rep(i,n)rep(j,m)scanf("%d",&a[i][j]);
    int ans=INT_MAX;
    if(k<n){
    	rep(u,n){
    		int tmp=0;
    		rep(i,n){
    		    int cut=0;
    		    rep(j,m)if(a[u][j]!=a[i][j])cut++;
    		    tmp+=min(cut,m-cut);
    		}ans=min(ans,tmp);
	    }
    }
    else{
        rep(u,(1<<n)-1){
            int tmp=0;
            rep(j,m){
                int cut=0;
                rep(i,n)cut+=((u>>i)&1)==a[i][j];
                tmp+=min(cut,n-cut);
            }ans=min(ans,tmp);
        }
    }if(ans>k)ans=-1;
	printf("%d\n",ans);
    return 0;
}
	 	 			    	       						  	