#include<iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>
using namespace std;
const int N =1010;
const int INF=10000009;
int f[N][N];
int n,m,k;
int operater(int c){
	int temp=0,i,j;
	for(j=1;j<=m;j++){
		int ans=0;
		for(i=1;i<=n;i++)
			ans+=f[i][j]==f[i][c];
		temp+=min(ans,n-ans);
	}
	return temp;
}
int operatec(int c){
	int temp=0,i,j;
	for(i=1;i<=n;i++){
		int ans=0;
		for(j=1;j<=m;j++)
			if(c&1<<j) ans+=f[i][j]==0;
			else ans+=f[i][j]==1;
		temp+=min(ans,m-ans);
	}
	return temp;	
}
int main(){
	int i,j;
	while(scanf("%d%d%d",&n,&m,&k)!=EOF){
		memset(f,0,sizeof(f));
		for(i=1;i<=n;i++)
			for(j=1;j<=m;j++) 
				scanf("%d",&f[i][j]);
		int ans=INF;
		if(m>k){
			for(j=1;j<=m;j++) 
				ans=min(ans,operater(j));
		}else {
			for(i=1;i<=1<<m;i++) 
				ans=min(ans,operatec(i));
		}		
		printf("%d\n",ans>k?-1:ans);
	} 
}
/*
9 2 5
0 1
0 1
1 1
0 1
0 1
1 0
1 1
1 0
1 1



*/
 		       	 		 		  		  	  	