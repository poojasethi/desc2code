#include<cstdio>
#include<algorithm>
const int N=105;
int n,m,k,map[N][N];
int main(){
	scanf("%d%d%d",&n,&m,&k);
	if (n>=m)
		for (int i=0;i<n;i++)
			for (int j=0;j<m;j++) scanf("%d",&map[i][j]);
	else{
		for (int i=0;i<n;i++)
			for (int j=0;j<m;j++) scanf("%d",&map[j][i]);
		std::swap(n,m);
	}
	int best=k+1;
	if (m<=k)
		for (int l=0;l<(1<<m);l++){
			int res=0;
			for (int i=0;i<n&&res<best;i++){
				int tmp=0;
				for (int j=0;j<m&&res<best;j++) tmp+=((l>>j)&1)^map[i][j];
				res+=std::min(tmp,m-tmp);
			}
			if (res<best) best=res;
		}
	else
		for (int l=0;l<n;l++){
			int res=0;
			for (int i=0;i<n&&res<best;i++){
				int tmp=0;
				for (int j=0;j<m&&res<best;j++) tmp+=map[l][j]^map[i][j];
				res+=std::min(tmp,m-tmp);
			}
			if (res<best) best=res;
		}
	if (best>k) printf("-1\n");
	else printf("%d\n",best);
}
