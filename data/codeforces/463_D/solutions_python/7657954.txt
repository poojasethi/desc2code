R=lambda:map(int,raw_input().split())
n,k=R()
p,f,a,ans=[[0]*(n+1) for i in range(k)],[1]*n,[0]*n,1
for i in range(k):
	a=R()
	for j, v in enumerate(a):
		p[i][v] = j
for i in range(n):
	for j in range(i):
		for m in range(k):
			if p[m][a[i]] < p[m][a[j]]: break
		else: f[i] = max(f[i],f[j]+1)
	ans=max(ans,f[i])
print ans