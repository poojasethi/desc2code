#include <bits/stdc++.h>
using namespace std;
#define rep(i,a,n) for (int i=a;i<n;i++)
int n,m,ans;
int a[1010][10],pos[1010][10],dp[1010];
int main() {
	scanf("%d%d",&n,&m);
	rep(j,0,m) rep(i,0,n) scanf("%d",&a[i][j]),pos[a[i][j]][j]=i;
	rep(i,0,n) {
		rep(j,0,i) {
			int x=a[i][0],y=a[j][0];
			bool fg=1;
			rep(k,0,m) fg&=pos[x][k]>pos[y][k];
			if (fg) dp[i]=max(dp[j],dp[i]);
		}
		dp[i]+=1;
		ans=max(ans,dp[i]);
	}
	printf("%d\n",ans);
}
