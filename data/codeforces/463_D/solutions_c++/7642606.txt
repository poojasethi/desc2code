#include<iostream>
#define ll long long int
using namespace std;
int main(){
	ll n,k;
	cin>>n>>k;
	ll a[n][k];
	ll dp[n+1][k];
	for(int j=0;j<k;j++){
		for(int i=0;i<n;i++){
			cin>>a[i][j];
			dp[a[i][j]][j]=i;
		}
	}
	ll dp1[n+1];
	ll last=0;
	ll ans=0;
	ll cur=1;
	ll b=0;
	for(int i=0;i<n;i++){
		last=a[i][0];
		dp1[i]=1;
		for(int j=i-1;j>=0;j--){
			b=0;
			ll now=a[j][0];
			for(int l=1;l<k;l++){
				if(dp[last][l]<dp[now][l]){
				b=1;
				break;	
				}
			}
			if(b==0){
			dp1[i]=max(dp1[i],dp1[j]+1);
			}
		}
		ans=max(ans,dp1[i]);
	}
	cout<<ans;
}