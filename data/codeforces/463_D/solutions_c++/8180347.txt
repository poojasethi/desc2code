#include <cstdio>
#include <vector>
#include <algorithm>
#include <iostream>
#include <cstring>

using namespace std;
#define MaxN 1005
int N,K,A[5][MaxN],Pos[5][MaxN],ans=0;
vector<int> dp(MaxN,0);

int main()
{
	cin>>N>>K;
	for(int j=0;j<K;++j){
		for(int i=0;i<N;++i){
			cin>>A[j][i];
			Pos[j][A[j][i]] = i;
		}
	}

	for(int i=0;i<N;i++){

		int maxx = 0;

		for(int j=0;j<i;++j) {

			int k;
			for(k=0;k<K;++k){
				if(Pos[k][A[0][i]] <= Pos[k][A[0][j]] )
					break;
			}

			if(k==K)
				maxx = max(maxx,dp[j]);
		}

		dp[i] = maxx+1;
		ans = max(ans,dp[i]);

	}

	cout<<ans<<endl;

}