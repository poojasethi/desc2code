#include <stdio.h>
const int N=1024;
int n,k,t,a[8][N],b[8][N],h[N];
int main(){
  scanf("%d %d",&n,&k);
  for(int i=0;i<k;++i)for(int j=0;j<n&&1==scanf("%d",&a[i][j]);++j)b[i][a[i][j]]=j;
  for(int i=0;i<n;++i){
    int x=a[0][i];
    h[x]=1;
    for(int j=0;j<i;++j){
      int y=a[0][j],z=1;
      for(int u=1;u<k;++u)if(b[u][y]>b[u][x])z=0;
      if(z&&h[x]<h[y]+1)h[x]=h[y]+1;
    }
    if(h[x]>t)t=h[x];
  }
  printf("%d\n",t);
}
