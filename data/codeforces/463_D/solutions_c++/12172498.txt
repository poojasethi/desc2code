#include<bits/stdc++.h>
using namespace std;
int g[2005][2005],a[2002],ans[2003],n,k;
int dfs(int x)
{
    if(ans[x]!=-1)return ans[x];
    int m=0;
    for(int i=1;i<=n;i++)
    if(g[x][i]==k)m=max(m,dfs(i));
    ans[x]=m+1;
    return ans[x];
}
int main()
{
    cin>>n>>k;
    for(int i=0;i<=n;i++)
    ans[i]=-1;
    for(int x=0;x<k;x++)
    {
        for(int j=0;j<n;j++)
        cin>>a[j];
        for(int i=0;i<n;i++)
        for(int j=i+1;j<n;j++)
        g[a[i]][a[j]]++;
    }
    int res=0;
    for(int i=1;i<=n;i++)
    res=max(res,dfs(i));
    cout<<res<<"\n";
}