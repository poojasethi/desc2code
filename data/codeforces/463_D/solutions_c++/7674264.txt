#include <cstdio>
#include <cstdlib>
using namespace std;

int n,k,x,ans;
int a[1001][6],f[1001];
int b[1001];

int main()
{
	scanf("%d%d",&n,&k);
	for (int i=1;i<=k;i++)
		for (int j=1;j<=n;j++) scanf("%d",&b[j]),a[b[j]][i]=j;
	for (int i=1;i<=n;i++)
	{
		f[i]=1;
		for (int j=i-1;j;j--)
		{
			bool flag=1;
			for (int l=1;l<=k;l++) if (a[b[j]][l]>a[b[i]][l]) { flag=0; break; }
			if (flag) if (f[j]+1>f[i]) f[i]=f[j]+1;
		}
	}
	for (int i=1;i<=n;i++) if (f[i]>ans) ans=f[i];
	printf("%d\n",ans);
}

