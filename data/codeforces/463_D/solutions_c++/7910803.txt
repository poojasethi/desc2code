#include<stdio.h>
#include<string.h>
int main()
{
	int n,k,i,j,t,res,num[10][1005],flag[10][1005],dp[1005];
	while(scanf("%d%d",&n,&k) != EOF)
	{
		for(i=1;i<=k;i++)
			for(j=1;j<=n;j++)
			{
				scanf("%d",&num[i][j]);
				flag[i][num[i][j]]=j;
			}
		for(i=1;i<=n;i++)
			dp[i]=1;
		for(i=1;i<=n;i++)
			for(j=i+1;j<=n;j++)
			{
				for(t=2;t<=k;t++)
					if(flag[t][num[1][i]]>flag[t][num[1][j]])
						break;
				if(t>k)
					dp[j]=(dp[i]+1)>dp[j]?(dp[i]+1):dp[j];
			}
		for(i=1,res=0;i<=n;i++)
			res=res>dp[i]?res:dp[i];
		printf("%d\n",res);
	}
	return 0;
}
 		          	    	 			    	