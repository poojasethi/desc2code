#include<cstdio>
#define N 1010
int n,m,i,j,a[N],p[N],sum[N][N],k,f[N];
int ans;
int max(int a,int b)
{
	if (a>b) return a;return b;
}
int main()
{
	scanf("%d%d",&n,&m);
	for (i=1;i<=m;i++)
	{
		for (j=1;j<=n;j++)
		{
		scanf("%d",&a[j]);
		p[a[j]]=j;
		}
		for (j=1;j<=n;j++)
		for (k=1;k<=n;k++)
		if (p[j]<p[k])
		sum[j][k]++;
	}
	for (i=1;i<=n;i++)
	{
		for (j=1;j<=n;j++)
		if (sum[a[i]][j]==m)
		f[j]=max(f[j],f[a[i]]+1);
	}
	for (i=1;i<=n;i++)
	ans=max(ans,f[i]);
	printf("%d",ans+1);
}