#include<iostream>
#include<algorithm>
#include<cstring>
#include<conio.h>
using namespace std;

int n,k,i,j,x,a[10][1005],rs,dp[1005],p[10][1005];

int main()
{
  cin>>n>>k;
  for(i=1;i<=k;++i)
    for(j=1;j<=n;++j)
    cin>>a[i][j],p[i][a[i][j]]=j;
  
  for(i=1;i<=n;++i)
    for(dp[i]=1,j=1;j<i;++j)
    {
      bool u=1;
      for(x=2;x<=k;++x)     
      if(p[x][a[1][j]]>p[x][a[1][i]]) u=0;
      
      if(u) dp[i]=max(dp[i],dp[j]+1);
    }

  for(rs=1,i=1;i<=n;++i) rs=max(rs,dp[i]);

  cout<<rs<<'\n';

 return 0;
}
