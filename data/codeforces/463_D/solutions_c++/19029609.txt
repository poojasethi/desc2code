#include <cstdio>
#include <algorithm>
#include <iostream>
#include <cmath>
#include <cstring>
#include <queue>
 using namespace std;
 int n,k,i,j,l,h,ans,a[10][1005],t[10][1005],f[1005];
 int main(){
		scanf("%d%d\n",&n,&k);
		for (i=1;i<=k;i++) 
		    for (j=1;j<=n;j++) {
				 scanf("%d",&a[i][j]);
				 t[i][a[i][j]]=j;
		    }
		ans=0;
		for (i=1;i<=n;i++) {
            h=0;
			for (j=1;j<=i;j++) {
				for (l=2;(l<=k+1) && (t[l][a[1][j]]<t[l][a[1][i]]);l++);
				if ((l==k+1) && (f[j]>h)) h=f[j];
			}
			f[i]=h+1;
			ans=max(ans,f[i]);
		}
		printf("%d",ans);
		return(0);
 }

