#include <bits/stdc++.h>
#define rep(i,a,b) for(int i=a;i<=b;i++)

using namespace std;

const int maxn=1001;

int n,k,a[6][maxn],pos[6][maxn],l[maxn];

bool check(int i, int j)
{
    int x=a[1][i],y=a[1][j];
    rep(u,1,k)
    if (pos[u][x]<pos[u][y]) return 0;
    return 1;
}

int main()
{
    cin >> n >> k;
    rep(j,1,k)
    rep(i,1,n)
    {
        cin >> a[j][i];
        pos[j][a[j][i]]=i;
    }
    int res=0;
    rep(i,1,n) {
    rep(j,1,i-1)
    if (check(i,j)) l[i]=max(l[i],l[j]+1);
    res=max(res,l[i]); }
    cout << res+1;
}
