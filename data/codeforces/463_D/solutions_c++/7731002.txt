#include <bits/stdc++.h>
using namespace std;

int n, k, t, alt, x, r;
int a[5][1001];
int p[5][1001];
int d[1001];
int main(void) {
    scanf("%d%d", &n, &k);
    for (int i=0; i<k; i++)
        for (int j=0; j<n; j++) {
            scanf("%d", &t);
            a[i][j]=t;
            p[i][t]=j;
        }
    for (int j=0; j<n; j++) {
        alt=0;
        for (int l=0; l<j; l++) {
            x=1;
            for ( ; x<k && p[x][a[0][l]]<p[x][a[0][j]]; x++);
            if (x==k && d[l]>alt)
                alt=d[l];
        }
        d[j]=alt+1;
        r=max(r, d[j]);
    }
    printf("%d\n", r);
}
