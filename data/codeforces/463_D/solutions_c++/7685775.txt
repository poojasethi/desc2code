#include<iostream>
#include<algorithm>

#define WAIT cout<<flush, system("PAUSE")
using namespace std;
typedef long long ll;
#define MAX 1100

int N, C, sol;
int A[MAX][10], P[MAX][10], dp[MAX];

int main(){
	cin >> N >> C;
	for(int c=1; c<=C; c++)
		for(int I=1; I<=N; I++){
			cin >> A[I][c];
			P[A[I][c]][c]=I;
		}
	for(int I=1; I<=N; I++){
		dp[I]=1;
		for(int K=1; K<I; K++){
			bool ok = true;
			for(int c=1; c<=C; c++){
				ok &= P[A[K][1]][c]<P[A[I][1]][c];
			}
			if (ok)
				dp[I] = max(dp[I], dp[K]+1);
		}
		sol = max(sol, dp[I]);
	}
	cout << sol << endl;
	//WAIT;
}