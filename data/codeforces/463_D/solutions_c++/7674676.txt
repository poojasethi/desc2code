#include <cstdio>
#include <algorithm>

using namespace std;

const int maxn = 1005;

int a[10][maxn], b[10][maxn], f[maxn];

int main() {
	int n, m, ans = 1;
	scanf("%d%d", &n, &m);
	for (int i = 0; i < m; ++i)
		for (int j = 0; j < n; ++j) {
			scanf("%d", &a[i][j]);
			b[i][a[i][j]] = j;
		}
	bool flag;
	for (int i = 0; i < n; ++i) {
		f[i] = 1;
		for (int j = 0; j < i; ++j) {
			flag = 0;
			for (int k = 1; k < m; ++k) {
				if (b[k][a[0][i]] < b[k][a[0][j]]) flag = 1;
			}
			if (!flag)
				f[i] = max(f[j] + 1, f[i]);
		}
		ans = max(ans, f[i]);
	}
	printf("%d\n", ans);
	return 0;
}

