#include <iostream>
#include <cstdio>
using namespace std;
int a[8][1005],pos[8][1005],dp[1005];
int main()
{
    int n,k;
    cin>>n>>k;
    for(int i=1;i<=k;i++)
        for(int j=1;j<=n;j++)
            scanf("%d",&a[i][j]),pos[i][a[i][j]] = j;
    int ans = 0;
    for(int i=1;i<=n;i++){
        int maxn = 0;
        for(int j=1;j<i;j++){
            int p;
            for(p = 2;p<=k && pos[p][a[1][j]]<pos[p][a[1][i]];p++);
            if(p == k+1)maxn = max(maxn,dp[j]);
        }
        dp[i] = maxn+1;
        ans = max(ans,dp[i]);
    }
    printf("%d\n",ans);
    return 0;
}
