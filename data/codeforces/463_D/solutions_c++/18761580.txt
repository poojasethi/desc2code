#include <algorithm>
#include <cstdio>
int a[10][1010],b[1010],f[1010],i,j,k,n,m,x,bo,ans;
int main()
{
//	freopen("ex.in","r",stdin);
	scanf("%d%d\n",&n,&m);
	for (i=0;i<m;++i,scanf("\n"))
		for (j=1;j<=n;++j)
		{
			scanf("%d",&x);
			a[i][x]=j;
			if (!i) b[j]=x;
		}
	for (i=1;i<=n;++i)
		for (j=0;j<i;++j)
		{
			bo=1;
			for (k=1;k<m;++k)
				if (a[k][b[j]]>a[k][b[i]]) bo=0;
			if (bo) f[i]=std::max(f[i],f[j]+1);
		}
	for (i=1;i<=n;++i) ans=std::max(ans,f[i]);
	printf("%d\n",ans);
}
