#include<iostream>

using namespace std ;

const int maxn=1001 , maxk=6 ;
int n , k , ans=0 ;
int dp[maxn] , a[maxk][maxn] , pos[maxk][maxn] ;

int main()
{
	cin >> n >> k ;
	for(int i=0 ; i<k ; i++)
		for(int j=0 ; j<n ; j++)
		{
			cin >> a[i][j] ;
			pos[i][a[i][j]]=j ;
		}
	for(int i=0 ; i<n ; i++)
	{
		int m=0 ;
		for(int j=0 ; j<i ; j++)
			for(int l=1 ; l<k && pos[l][a[0][j]]<pos[l][a[0][i]] ; l++)
				if(l==k-1)
					m=max(m,dp[j]) ;
		dp[i]=m+1 ;
		ans=max(ans,dp[i]) ;
	}
	cout << ans <<endl ;
}
