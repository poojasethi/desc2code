#include<iostream>

using namespace std ;

const int maxn=1001 , maxk=6 ;
int dp[maxn] , a[maxk][maxn] , d[maxk][maxn] ;
int n , k , ans=0 , M ;

int main()
{
	cin >> n >> k ;
	for(int i=0 ; i<k ; i++)
		for(int j=0 ; j<n ; j++)
		{
			cin >> a[i][j] ;
			d[i][a[i][j]]=j ;
		}
	for(int i=0 ; i<n ; i++)
	{
	    M=0 ;
		for(int j=0 ; j<i ; j++)
		{
			for(int l=1 ; l<k && d[l][a[0][j]] < d[l][a[0][i]] ; l++)
				if(l==k-1)
					M=max(M,dp[j]) ;
		}
		dp[i]=M+1 ;
		ans=max(ans,dp[i]) ;
	}
	cout << ans << endl ;
	return 0 ;
}
