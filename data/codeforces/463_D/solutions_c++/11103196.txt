#include <bits/stdc++.h>
using namespace std;
int board[10][1005];
int a[10][1005];
int dp[1005];
int main()
{
  int n,m; cin >> n >> m;
  for(int x=1;x<=m;++x)
  for(int y=1;y<=n;++y)
  {
   cin >> a[x][y];
   board[x][a[x][y]]=y;
  }
  dp[1]=1;
  int ans=1;
  for( int x=2;x<=n;++x )
  {
  int kk=0;
    for(int y=1;y<x;++y)
    {
    int k;
      for(k=2;k<=m;++k) if(board[k][a[1][y]]>board[k][a[1][x]]) break;
      if(k==m+1&&kk<dp[y]) kk=dp[y];
    }
    dp[x]=kk+1;
    ans=max(ans,dp[x]);
  }
  cout << ans << endl;
}
