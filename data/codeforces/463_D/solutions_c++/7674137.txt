#include<cstdio>
#include<cstring>
#include<algorithm>
#define f(x,y,z) for (int x=(y);x<=(z);x++)
#define g(x,y,z) for (int x=(y);x>=(z);x--)
using std::sort;
bool after[1005][1005];
int a[10][1005],dp[1005];
inline int max(int a,int b){if (a>b)return a;return b;}

int main(){
	int n,k;scanf("%d%d",&n,&k);
	f(i,1,k)f(j,1,n)scanf("%d",&a[i][j]);
	f(i,1,k)f(j,1,n)f(l,1,j)after[a[i][j]][a[i][l]]=1;
	int ans=-1;
	f(i,1,n){
		dp[i]=1;
		int tmp=a[1][i];  
		f(j,1,i-1)if(!after[a[1][j]][tmp]) dp[i]=max(dp[i],dp[j]+1); 
		ans=max(ans,dp[i]);		
	}
	printf("%d",ans);
	return 0;
}