#include <cstdio>
#include <algorithm>
using namespace std;

long long f[55][55][105],g1[55][55][105],g2[55][55][105];
struct ar{long long x,y,z,p;};ar a[55];
bool cmp(ar a,ar b) {return a.z<b.z;}

void go(int i,int j,int k)
{
  if (j==0) return;
  go(g1[i][j][k],j-1,g2[i][j][k]);
  printf("%I64d %I64d\n",a[i].p,a[i].x+k);
}

int main()
{
//  freopen("input.txt","r",stdin);
//  freopen("output.txt","w",stdout);
  long long n,m,q,ans=-1,a1,a2;
  scanf("%I64d%I64d%I64d",&n,&m,&q);
  for (int i=1;i<=m;i++) scanf("%I64d%I64d%I64d",&a[i].x,&a[i].y,&a[i].z),a[i].p=i;
  sort(a+1,a+m+1,cmp);
  for (int i=1;i<=m;i++)
    for (int k=0;k<=a[i].y-a[i].x;k++)
    {
      f[i][1][k]=a[i].x+k;
      for (int j=2;j<=n;j++)
      {
        f[i][j][k]=-(1ll<<62);
        for (int ii=1;a[ii].z<a[i].z;ii++)
        {
          long long kk=a[i].x+k-q;
          if (kk>=a[ii].x && kk<=a[ii].y)
            if (f[ii][j-1][kk-a[ii].x]+a[i].x+k>f[i][j][k])
            {
              f[i][j][k]=f[ii][j-1][kk-a[ii].x]+a[i].x+k;
              g1[i][j][k]=ii;
              g2[i][j][k]=kk-a[ii].x;
            }
          kk=a[i].x+k;
          if (kk%q!=0) continue;
          kk/=q;
          if (kk>=a[ii].x && kk<=a[ii].y)
            if (f[ii][j-1][kk-a[ii].x]+a[i].x+k>f[i][j][k])
            {
              f[i][j][k]=f[ii][j-1][kk-a[ii].x]+a[i].x+k;
              g1[i][j][k]=ii;
              g2[i][j][k]=kk-a[ii].x;
            }
        }
        if (j==n && f[i][j][k]>ans)
        {
          ans=f[i][j][k];
          a1=i;
          a2=k;
        }
      }
      int j=1;
      if (j==n && f[i][j][k]>ans)
      {
        ans=f[i][j][k];
        a1=i;
        a2=k;
      }
    }
  if (ans<0) printf("NO\n");
  else
  {
    printf("YES\n");
    go(a1,n,a2);
  }
  return 0;
}
