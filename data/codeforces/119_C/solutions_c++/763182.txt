#include<cstdio>
#include<iostream>
#include<sstream>
#include<cmath>
#include<algorithm>
#include<map>
#include<set>
#include<list>
#include<vector>
#include<stack>
#include<queue>
#include<string>
#include<ctime>
#include<iomanip>
#include<fstream>
using namespace std;
typedef vector<int> VI;
typedef vector<VI> VVI;
typedef pair <int,int> ii;
typedef long long LL;
#define sz(a) int((a).size())
#define pb push_back
const double PI = 3.141592653589793;
const int N = 52;

int n,m,k,suma,c[N],zak[N][2],i,j,mat[N],w,ind,next[N][N*105],l,tab[N*105],q;
LL a[N],b[N],res[N][N*105],r,bat[N*105];
VI graf[N*105];

bool cmp (int a, int b) {
     return c[a]>c[b];
}

int main () {
scanf ("%d %d %d",&n,&m,&k);
suma=0;
for (i=0;i<m;i++) {
    cin >> a[i] >> b[i] >> c[i];
    l = (b[i]-a[i]);
    zak[i][0]=suma; zak[i][1]=suma+l;
    for (j=suma;j<=suma+l;j++) {
        tab[j]=i;
        bat[j]=a[i]+(j-suma);
    }
    suma+=(l+1);
    mat[i]=i;
}
//for (i=0;i<suma;i++) cout << tab[i] << " " << bat[i] << endl;
for (i=0;i<suma;i++) for (j=0;j<suma;j++) if (c[tab[i]] < c[tab[j]] && (bat[i] + k == bat[j] || bat[i] * k == bat[j])) {
    graf[i].pb(j);
    //printf("%d %d\n",i,j);
}
    
sort(mat,mat+m,cmp);
for (i=0;i<m;i++) {
    w=mat[i];
    for (j=1;j<m;j++) for (l=zak[w][0];l<=zak[w][1];l++) res[j][l]=-1;
    for (l=zak[w][0];l<=zak[w][1];l++) {
        res[0][l]=bat[l];
        next[0][l]=-1;
    }
    for (j=1;j<=i;j++) for (l=zak[w][0];l<=zak[w][1];l++) for (q=0;q<graf[l].size();q++) 
    if (res[j-1][graf[l][q]]!=-1 && res[j][l] < res[j-1][graf[l][q]] + bat[l]) {
       res[j][l] = res[j-1][graf[l][q]] + bat[l];
       next[j][l] = graf[l][q];
       //cout << j << " " << res[j][l] << endl;
    }
}
r=-1;

for (i=0;i<suma;i++) {
    //cout << res[n-1][i] << endl;
    if (res[n-1][i]>r) {ind=i; r=res[n-1][i];}
}
if (r==-1) {printf("NO\n"); return 0;}
printf("YES\n");
while (n>0) {
      cout << tab[ind]+1 << " " << a[tab[ind]] + (ind-zak[tab[ind]][0]) << endl;
      ind = next[n-1][ind]; n--;      
}
return 0;
}
