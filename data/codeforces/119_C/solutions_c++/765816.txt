#include <iostream>
#include <cstdio>
#include <cstring>
#include <vector>

#define ll long long int

using namespace std;

typedef pair<ll,ll> ii;
typedef pair<ll,ll> l2;

ll n, m, k;
ll a[128], b[128], c[128];
ii pai[128][128][128];
ll PD[128][128][128];
bool tem[128][128][128];
vector<l2> resp;

ll da(ll u, ll ant, ll xi) {
    if (u==n)
        return 0;

    if (tem[u][ant][xi])
        return PD[u][ant][xi];

    ll cant = c[ant];
    ll best = -1ll;
    for (ll i=0;i<m;i++) if (c[i] > cant) {
        ll xim1 = a[ant]+xi;
        ll x1;
        x1 = xim1 + k;
        if (x1 > 0 and a[i] <= x1 and x1 <= b[i]) {
            ll tt =  da(u+1,i,x1-a[i]);
            if (tt >= 0 and x1 + tt > best) {
                best = x1 + tt;
                pai[u][ant][xi] = ii(i,x1-a[i]);
            }
        }
        x1 = xim1*k;
        if (x1 > 0 and a[i] <= x1 and x1 <= b[i]) {
            ll tt =  da(u+1,i,x1-a[i]);
            if (tt >= 0 and x1 + tt > best) {
                best = x1 + tt;
                pai[u][ant][xi] = ii(i,x1-a[i]);
            }
        }
    }

    tem[u][ant][xi] = true;
    return PD[u][ant][xi] = best;
}

void anda(ll u, ll ant, ll xi) {
    if (u==n) return;
    ii p = pai[u][ant][xi];
    cout << p.first+1 << " " << a[p.first] + (ll)p.second << endl;
    anda(u+1,p.first,p.second);
}

int main() {

    cin >> n >> m >> k;
    for (ll i=0;i<m;i++) {
        ll A,B;
        ll C;
        cin >> A >> B >> C;
        a[i] = A;
        b[i] = B;
        c[i] = C;
    }

    memset(tem,false,sizeof(tem));

    //qm vai ser o 1o?
    ll imaior, jmaior;
    imaior = jmaior = -1;
    ll maior = -2ll;
    for (ll i=0;i<m;i++)
        for (ll j = a[i]; j <= b[i];j++) {
            ll tt = da(1,i,j-a[i]);
            if (tt >= 0 and tt + j > maior) {
                maior = tt+j;
                imaior = i;
                jmaior = j;
            }
        }
    if (maior >= 0) {
        cout << "YES" << endl;
        cout << imaior +1 << " " << jmaior << endl;
        anda(1,imaior,jmaior-a[imaior]);
    }
    else
        cout << "NO" << endl;

    return 0;
}
