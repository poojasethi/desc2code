/*cf_119c.cpp AT 12/04/2011 06:55:50 PM BY dOMhOM*/

#include	<stdlib.h>
#include	<stdio.h>
#include	<string.h>
#include	<math.h>
#include<map>
#include<algorithm>
#include<vector>
using namespace std;
#define CC(x,i) do{memset(x,i,sizeof(x));}while(0)
#define SWAP(a,b) do{int _tmp=a;a=b;b=_tmp;}while(0)
#define INFI 2000000000
#define INFF 1e100
typedef long long  LL;
LL f[55][55][110];int pre[55][55][110],p2[55][55][110],k;
struct ss{LL a,b;int c,d;}p[55];
bool cmp(ss a,ss b){return a.c<b.c;}
void relax(int r1,int k1,int f1,int r2,int k2,int f2){
	if(f[r1][k1][f1]<f[r2][k2][f2]+f1+p[k1].a){
		f[r1][k1][f1]=f[r2][k2][f2]+f1+p[k1].a;
		pre[r1][k1][f1]=k2;
		p2[r1][k1][f1]=f2;
	}
}
void out(int ri,int ke,int fn){
	if(ri>1)out(ri-1,pre[ri][ke][fn],p2[ri][ke][fn]);
	printf("%d %I64d\n",p[ke].d,fn+p[ke].a);
}
int main ( int argc, char *argv[] )
{
	int n,m;
	CC(f,0);
	scanf("%d%d%d",&n,&m,&k);
	for(int i=0;i<m;i++){
		scanf("%I64d%I64d%d",&p[i].a,&p[i].b,&p[i].c);
		p[i].d=i+1;
	}
	sort(p,p+m,cmp);
	for(int ke=0;ke<m;ke++)
		for(int fn=0;p[ke].a+fn<=p[ke].b;fn++)
			f[1][ke][fn]=p[ke].a+fn;
	for(int ri=2;ri<=n;ri++)
	for(int ke=0;ke<m;ke++)
	for(int fn=0;fn+p[ke].a<=p[ke].b;fn++){
		LL d;
		f[ri][ke][fn]=-1;
		if((fn+p[ke].a)%k==0){
			d=(fn+p[ke].a)/k;
			for(int i=0;i<ke;i++){
				if(p[i].c<p[ke].c&&p[i].a<=d&&p[i].b>=d&&f[ri-1][i][d-p[i].a]>=0){
					relax(ri,ke,fn,ri-1,i,d-p[i].a);
				}
			}
		}
		d=fn+p[ke].a-k;
		for(int i=0;i<ke;i++){
			if(p[i].c<p[ke].c&&p[i].a<=d&&p[i].b>=d&&f[ri-1][i][d-p[i].a]>=0){
				relax(ri,ke,fn,ri-1,i,d-p[i].a);
			}
		}
	}
	LL mx=-1;int id,ee;
	for(int ke=0;ke<m;ke++){
		for(int fn=0;fn+p[ke].a<=p[ke].b;fn++)
			if(f[n][ke][fn]>mx){
				mx=f[n][ke][fn];
				id=ke;ee=fn;
			}
	}
	if(mx<0)puts("NO");
	else{
		puts("YES");
		out(n,id,ee);
	}
	return EXIT_SUCCESS;
}

