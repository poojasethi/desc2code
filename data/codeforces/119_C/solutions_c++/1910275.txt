#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<cmath>
#include<cstring>
using namespace std;

#define e -1e18
int n,m,k,c[55],p[55],u[55][55][105],pr[55][55][105],w[55][55][105];
__int64 a[55],b[55],r[55][55][105];

bool f(int x,int y)
{
 return c[x]<c[y];
}

__int64 g(int s,int l,__int64 v)
{
 int d,i,x,y;
 __int64 t1,t2,cur=e;
 d=p[s];
 if(s==m)return int (l!=n)*e;
 if(v<a[d]||v>b[d])return e;
 if(w[s][l][v-a[d]])return r[s][l][v-a[d]];
 w[s][l][v-a[d]]=1;
 x=y=0;
 for(i=s+1;i<=m;i++)
 {
  if(c[p[i]]<=c[d])continue;
  t1=g(i,l+1,v+k)+v;
  t2=g(i,l+1,v*k)+v;
  if(cur<t1)
  {
   cur=t1;
   x=0;
   y=i;
  }
  if(cur<t2)
  {
   cur=t2;
   x=1;
   y=i;
  }
 }
 r[s][l][v-a[d]]=cur;
 u[s][l][v-a[d]]=x;
 pr[s][l][v-a[d]]=y;
 return cur;
}

void o(int s,int l,__int64 v)
{
 int d=p[s];
 if(s==m)return;
 printf("%d %I64d\n",d+1,v);
 if(u[s][l][v-a[d]])o(pr[s][l][v-a[d]],l+1,v*k);
 else o(pr[s][l][v-a[d]],l+1,v+k);
}
int main()
{
 //freopen("a.txt","r",stdin);
 int x,i;
 __int64 y,j,sum,cur;
 scanf("%d%d%d",&n,&m,&k);
 for(i=0;i<m;i++)
 {
  scanf("%I64d%I64d%d",a+i,b+i,c+i);
  p[i]=i;
 }
 p[m]=m;
 c[m]=101;
 sort(p,p+m,f);
 memset(w,0,sizeof(w));
 sum=e;
 x=y=0;
 for(i=0;i<m;i++)
  for(j=a[p[i]];j<=b[p[i]];j++)
  {
   cur=g(i,0,j);
   if(sum<cur)
   {
    sum=cur;
    x=i;
    y=j;
   }
  }
 if(sum<0)printf("NO\n");
 else
 {
  printf("YES\n");
  o(x,0,y);
 }
 return 0;
}
