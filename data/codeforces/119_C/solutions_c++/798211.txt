#include<iostream>
#include<algorithm>
#include<cstdio>
#include<string>
#include<cstring>
#include<map>
using namespace std;

struct sub
{
	long long a,b,c,d;
}S[50];

bool operator<(sub A,sub B)
{
	return A.c<B.c;
}

int n,m,k;
long long F[50][50][110];

void Find(int i,int j,int l)
{
	if(!i)
	{
		cout<<S[j].d<<' '<<l+S[j].a<<endl;
		return;
	}
	for(int o=0;o<j;++o)if(S[o].c<S[j].c)
	{
			if((S[j].a+l)%k==0&&(S[j].a+l)/k>=S[o].a&&(S[j].a+l)/k<=S[o].a+S[o].b
			&&F[i-1][o][(S[j].a+l)/k-S[o].a]==F[i][j][l]-l-S[j].a)
			{
				Find(i-1,o,(S[j].a+l)/k-S[o].a);
				break;
			}
			if(S[j].a+l-k>=S[o].a&&S[j].a+l-k<=S[o].a+S[o].b
			&&F[i-1][o][S[j].a+l-k-S[o].a]==F[i][j][l]-l-S[j].a)
			{
				Find(i-1,o,S[j].a+l-k-S[o].a);
				break;
			}
	}
	cout<<S[j].d<<' '<<l+S[j].a<<endl;
}

void GetMax(long long &a,long long b)
{
	if(a<b)a=b;
}

int main()
{
	//freopen("input.txt","r",stdin);
	//freopen("output.txt","w",stdout);
	cin>>n>>m>>k;
	for(int i=0;i<m;++i)cin>>S[i].a>>S[i].b>>S[i].c,S[i].b-=S[i].a,S[i].d=i+1;
	sort(S,S+m);
	for(int i=0;i<m;++i)
		for(int j=0;j<=S[i].b;++j)F[0][i][j]=j+S[i].a;
	for(int i=0;i<n-1;++i)
		for(int j=0;j<m;++j)
			for(int l=0;l<=S[j].b;++l)
			if(F[i][j][l])
					for(int o=j+1;o<m;++o)if(S[o].c>S[j].c)
					{
						if((S[j].a+l)*k>=S[o].a&&(S[j].a+l)*k<=S[o].a+S[o].b)
						GetMax(F[i+1][o][(S[j].a+l)*k-S[o].a],(S[j].a+l)*k+F[i][j][l]);
						if(S[j].a+l+k>=S[o].a&&S[j].a+l+k<=S[o].a+S[o].b)
						GetMax(F[i+1][o][S[j].a+l+k-S[o].a],S[j].a+l+k+F[i][j][l]);
					}
	int x,y;
	long long ans=0;
	for(int i=0;i<m;++i)
		for(int j=0;j<=S[i].b;++j)
			if(F[n-1][i][j]>ans)x=i,y=j,ans=F[n-1][i][j];
	if(ans)
	{
		cout<<"YES"<<endl;
		Find(n-1,x,y);
		return 0;
	}
	cout<<"NO"<<endl;
	return 0;
}
