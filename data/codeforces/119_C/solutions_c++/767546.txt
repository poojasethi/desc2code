#include <cstdio>
#include <iostream>
#include <algorithm>
#include <cmath>
#include <cstring>
#include <climits>
using namespace std;
#define p(x) cout<<#x<<":"<<x<<"\n"
#define in(x,y,z) (x>=y && x<=z)
#define ll long long
#define lim 51
#define lim2 101

ll n,m,c,i,j,s,i2,j2,mx;
ll A[lim],B[lim],C[lim],M[lim][lim2][lim],S[lim][lim2][lim],P[lim][lim2][lim];

ll solve(ll i,ll j,ll k)
{
  ll &res=M[i][j][k],p,x;
  
  if(res==-1)
  {
    if(k>1)
	{
	  res=LLONG_MIN;
	  x=A[i]+j;
	  for(p=0;p<m;p++)
	  {
	    if(C[p]>C[i] && in(x+c,A[p],B[p]) && solve(p,x+c-A[p],k-1)>res)
		{
		  res=solve(p,x+c-A[p],k-1);
		  P[i][j][k]=p;
		  S[i][j][k]=x+c;
		}
	    if(C[p]>C[i] && in(x*c,A[p],B[p]) && solve(p,x*c-A[p],k-1)>res)
		{
		  res=solve(p,x*c-A[p],k-1);
		  P[i][j][k]=p;
		  S[i][j][k]=x*c;
		}
	  }
	  if(res>=0)
	    res+=j+A[i];
    }
	else
	  res=j+A[i];
    //printf("%I64d %I64d %I64d %I64d %I64d %I64d \n",i,j,k,M[i][j][k],P[i][j][k],S[i][j][k]);
  }
  return res;
}
int main()
{
  scanf("%I64d%I64d%I64d",&n,&m,&c);
  for(i=0;i<m;i++)
    scanf("%I64d%I64d%I64d",&A[i],&B[i],&C[i]);
  memset(M,-1,sizeof M);
  for(i=0;i<m;i++)
    for(j=A[i];j<=B[i];j++)
	  if(solve(i,j-A[i],n)>mx)
	  {
	    mx=solve(i,j-A[i],n);
		i2=i;
		j2=j;
	  }
  if(!mx)
  {
    printf("NO");
	return 0;
  }
  printf("YES\n");
  i=i2;
  j=j2;
  j-=A[i];
  while(n)
  {
    printf("%I64d %I64d\n",i+1,j+A[i]);
	s=S[i][j][n];
	i=P[i][j][n];
	j=s-A[i];
	n--;
  }
  return 0;
}
