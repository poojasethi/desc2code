#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
#include <vector>

using namespace std;

const int MAXN=1010;

struct node
{
    int x,y,id;
}p[MAXN];

int n,k;
vector<int> load[MAXN];

bool cmp(const node &a,const node &b)
{
    if(a.y==b.y)return a.x>b.x;
    return a.y<b.y;
}
int main()
{
//    freopen("in.txt","r",stdin);
    scanf("%d%d",&n,&k);
    int m=0;
    double ans=0;
    for(int i=0;i<n;++i)
    {
        scanf("%d%d",&p[i].x,&p[i].y);
        p[i].id=i+1;
        if(p[i].y==1)m++;
        ans+=p[i].x;
    }
    sort(p,p+n,cmp);

    for(int i=0;i<k;++i)
    {
        load[i].push_back(p[i].id);
        if(p[i].y==1)ans-=0.5*p[i].x;
    }
    if(m>=k && p[k-1].x>min(p[m-1].x,p[n-1].x))
    {
        ans+=p[k-1].x*0.5;
        ans-=min(p[m-1].x,p[n-1].x)*0.5;
    }
    for(int i=k;i<n;++i)
        load[k-1].push_back(p[i].id);
    printf("%.1f\n",ans);
    for(int i=0;i<k;++i)
    {
        printf("%d",load[i].size());
        for(int j=0;j<(int)load[i].size();++j)
            printf(" %d",load[i][j]);
        puts("");
    }
    return 0;
}
