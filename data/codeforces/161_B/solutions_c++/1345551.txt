#include<cstdio>
#include<algorithm>
#include<vector>
using namespace std;
int N,K;
typedef pair<double, int> PDI;
vector<PDI> sc,cr;
double sol;
int main(){
	//freopen("d.in","r",stdin);
	//freopen("d.out","w",stdout);
	int i,tip,s,c;
	double pret;
	scanf("%d%d",&N,&K);
	for(i=0;i<N;++i){
		scanf("%lf%d",&pret,&tip);
		if(tip==1)
			sc.push_back(PDI(pret,i+1));
		else
			cr.push_back(PDI(pret,i+1));
		sol+=pret;
	}
	sort(sc.begin(),sc.end());
	sort(cr.begin(),cr.end());
	tip=(int)sc.size()-1;
	for(i=1;i<K && tip>=0;++i,--tip)
		sol-=sc[tip].first/2;
	if(tip>=0){
		if(cr.size())
			sol-=min(sc[0].first,cr[0].first)/2;
		else
			sol-=sc[0].first/2;
	}
	printf("%.1lf\n",sol);
	s=(int)sc.size()-1;
	for(i=1;i<K && s>=0;++i,--s)
		printf("1 %d\n",sc[s].second);
	c=0;
	for(;i<K;++i,++c)
		printf("1 %d\n",cr[c].second);
	printf("%d",N-K+1);
	for(;s>=0;--s)
		printf(" %d",sc[s].second);
	for(;c<(int)cr.size();++c)
		printf(" %d",cr[c].second);
	printf("\n");
	return 0;
}
