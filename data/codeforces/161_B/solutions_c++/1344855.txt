#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;

struct item {
  int price, t, id;
};

bool operator<(item a, item b) {
  return a.t < b.t || a.t == b.t && a.price > b.price;
}

const int N = 1010;

int n, m;
item a[N];

int main() {
  scanf("%d %d", &n, &m);
  int pmin = 1000000010;
  for (int i = 0; i < n; i++) {
    scanf("%d %d", &a[i].price, &a[i].t);
    a[i].price <<= 1;
    a[i].id = i + 1;
    if (pmin > a[i].price)
      pmin = a[i].price;
  }
  sort(a, a + n);
  long long ans = 0;
  for (int i = 0; i < n; i++) {
    if (a[i].t == 1 && i < m - 1)
      ans += a[i].price >> 1;
    else
      ans += a[i].price;
  }
  if (a[m - 1].t == 1)
    ans -= pmin >> 1;
  printf("%I64d.%d\n", ans >> 1, (ans & 1) ? 5 : 0);
  for (int i = 0; i < m; i++) {
    if (i < m - 1)
      printf("%d %d\n", 1, a[i].id);
    else {
      printf("%d", n - m + 1);
      for (int j = m - 1; j < n; j++)
        printf(" %d", a[j].id);
      puts("");
    }
  }
  return 0;
}
