#include <cstdio>
#include <cmath>
#include <queue>
#include <vector>
#include <iostream>
#include <algorithm>
#include <cstring>
#include <cassert>
#define DEB(...) fprintf(stderr, ##__VA_ARGS__)
using namespace std;
typedef long long LL;
const int MAXN = 1111;
vector<int> ans[MAXN];
int c[MAXN], t[MAXN], ind[MAXN];
int n, k;
LL tot;
inline bool cmp(int a, int b) { if (t[a] == t[b]) return c[a] > c[b]; return t[a] < t[b]; }
int main() {
	scanf("%d%d", &n, &k);
	tot = 0;
	for (int i = 0;i < n;i++) {
		scanf("%d%d", &c[i], &t[i]); c[i] <<= 1; tot += c[i];
		ind[i] = i;
	}
	sort(ind, ind + n, cmp);
	for (int i = 0;i + 1 < k;i++) {
		ans[i].push_back(ind[i]);
		if (t[ind[i]] == 1) tot -= c[ind[i]] / 2;
	}
	int mi = c[ind[k - 1]];
	for (int i = k - 1;i < n;i++) {
		ans[k - 1].push_back(ind[i]);
		mi = min(mi, c[ind[i]]);
	}
	if (t[ind[k - 1]] == 1) tot -= mi / 2;
	printf("%.1lf\n", tot * .5);
	for (int i = 0;i < k;i++) {
		printf("%d", ans[i].size());
		for (int j = 0;j < (int)ans[i].size();j++) printf(" %d", ans[i][j] + 1);
		puts("");
	}
	return 0;
}
