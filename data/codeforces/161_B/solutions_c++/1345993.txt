#include <cstdio>
#include <iostream>
#include <algorithm>

using namespace std;

long v[200005]={0};
long hash[200005]={0};
long a[200005]={0};

bool cmp(long x,long y)
{
 return v[x]>v[y];
}

int main()
{
 long long ans=0;
 long n,i,j;
 long k;
 long o=0;
 long s=0;
 long min=2000000001;
 
 scanf("%ld%ld",&n,&k);
 for(i=1;i<=n;i++)
   {
    long x,c;
    scanf("%ld%ld",&x,&c);
    v[i]=x*2;
    if(c==1)
     a[++o]=i;
    ans+=v[i];
    if(v[i]<min)
     min=v[i];
   }
 sort(a+1,a+o+1,cmp);
 for(i=1;i<=o&&i<k;i++)
   {
    hash[a[i]]=1;
    ans-=v[a[i]]/2;
   }
 if(i<=o)
  ans-=min/2;
 printf("%I64d.%c\n",ans/2,ans&1?'5':'0');
 for(i=1;i<=n;i++)
   if(hash[i])
    {
     printf("1 %ld\n",i);
     s++;
    }
 for(i=1;s<k-1;i++)
   if(!hash[i])
    {
     printf("1 %ld\n",i);
     s++;
    }
 printf("%ld",n-s);
 for(;i<=n;i++)
   if(!hash[i])
    printf(" %ld",i);
 
 return 0;
}
