#include <cstdio>
#include <vector>
#include <algorithm>
#include <cmath>

using namespace std;

vector< pair<int,int> > a,b;
int n,k;
double ans;
int oa;
int aa[2010];

int main(){
	scanf("%d%d",&n,&k);
	for (int i=0; i<n; ++i){
		int x,y;
		scanf("%d%d",&x,&y);
		ans+=x;
		if (y==1)
			a.push_back(make_pair(x,i));
		else
			b.push_back(make_pair(x,i));
	}
	int na=a.size()-1, nb=b.size()-1;
	sort(a.begin(), a.end());
	for (int i=0; i<k-1; ++i){
		if (na>=0){
			//printf("%.1lf\n", a[na].first/2.);
			ans-=a[na].first/2.;
			aa[oa++]=a[na].second;
			--na;
		} else{
			aa[oa++]=b[nb].second;
			--nb;
		}
	}
	if (na>=0){
		int mm=1000000000;
		for (int i=0; i<=na; ++i)
			mm=min(mm,a[i].first);
		for (int i=0; i<=nb; ++i)
			mm=min(mm,b[i].first);
		ans-=mm/2.;
	}
	printf("%.1lf\n",ans);
	for (int i=0; i<oa; ++i)
		printf("1 %d\n", aa[i]+1);
	printf("%d", na+nb+2);
	for (int i=0; i<=na; ++i)
		printf(" %d", a[i].second+1);
	for (int i=0; i<=nb; ++i)
		printf(" %d", b[i].second+1);
	printf("\n");
}
