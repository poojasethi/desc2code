#include<bits/stdc++.h>
using namespace std;
typedef long long int uli;
const int mx=1e3+10;
pair<int,int>s[mx],p[mx];
vector<int>cart[mx];
int ns=0,np=0;
int ac[mx],at[mx];
int main(){
   int n,k,v,t;
   scanf("%d %d",&n,&k);
   for(int i=0;i<n;i++){
      scanf("%d %d",&v,&t);
      ac[i]=v,at[i]=t;
      pair<int,int>x(v,i);
      if(t==1)s[ns++]=x;
      else p[np++]=x;
   }
   sort(s,s+ns,greater<pair<int,int> >());
   int i=0;
   for(;i<ns;i++) cart[min(i,k-1)].push_back(s[i].second);   
   int ix=i;
   for(i=0;i<np;i++) cart[min(ix+i,k-1)].push_back(p[i].second);   

   double ans=0.0;
   for(int i=0;i<k;i++){
      int sz=cart[i].size();
      double mini=1e12;
      bool disc=false;
      for(int j=0;j<sz;j++){
         ix=cart[i][j];
         ans+=double(ac[ix]);
         if(at[ix]==1)disc=true;
         mini=min(mini,double(ac[ix]));
      }
      if(disc)ans-=mini*0.5;
   }
   printf("%.1lf\n",ans);
   for(int i=0;i<k;i++){
      int sz=cart[i].size();
      printf("%d",sz);
      for(int j=0;j<sz;j++){
         printf(" %d",1+cart[i][j]);
      }
      printf("\n");
   }
   return 0;
}
