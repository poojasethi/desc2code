#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
struct Node
{
    int p,c,num;
    bool operator<(Node x)const
    {
        if(c!=x.c)return c<x.c;
        return p>x.p;
    }
}e[1005];
int main()
{
    int n,k;
    cin>>n>>k;
    for(int i=0;i<n;++i)
    {
        e[i].num=i+1;
        cin>>e[i].p>>e[i].c;
    }
    sort(e,e+n);
    double ans=0,minn=e[n-1].p;
    for(int i=0;i<n;++i)
    {
        if(i<k-1&&e[i].c!=2)ans+=e[i].p/2.0;
        else ans+=e[i].p,minn=min(minn,double(e[i].p));
    }
    if(e[k-1].c==1)ans-=minn/2;
    printf("%.1lf\n",ans);
    for(int i=0;i<n;++i)
    {
        if(i<k-1)printf("1 %d\n",e[i].num);
        else
        {
            printf("%d",n-i);
            while(i<n)
            printf(" %d",e[i++].num);
            printf("\n");

        }
    }
}
