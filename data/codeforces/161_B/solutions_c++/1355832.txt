#include <iostream>
#include <vector>
#include <algorithm>
#include <iomanip>

#define MP make_pair

using namespace std;

int main()
{
	int n,k,ia=0,ib=0,ir=0,mn=1<<30;
	double s=0;
	cin >> n >> k;
	vector< pair<int,int> > a,b;
	vector< vector<int> > r(k);
	for (int i=0; i<n; ++i) { int h1,h2; cin >> h1 >> h2; if (h2==1) a.push_back(MP(h1,i)); else b.push_back(MP(h1,i)); }
	sort(a.begin(),a.end(),greater< pair<int,int> >());
	for(; ia<(int)a.size() && ir<(int)r.size()-1; ++ia,++ir)
	{
		r[ir].push_back(a[ia].second);
		s+=a[ia].first/2.0;
	}
	for(; ib<(int)b.size(); ++ib,ir=min(ir+1,k-1))
	{
		r[ir].push_back(b[ib].second);
		s+=b[ib].first;
		mn=min(mn,b[ib].first);
	}
	if (ia<(int)a.size())
	{
		for (; ia<(int)a.size(); ++ia)
		{
			r[k-1].push_back(a[ia].second);
			s+=a[ia].first;
			mn=min(mn,a[ia].first);
		}
		s-=mn/2.0;
	}
	cout << fixed << setprecision(1) << s << endl;
	for (int i=0; i<k; ++i)
	{
		cout << r[i].size();
		for (int j=0; j<(int)r[i].size(); ++j)
			cout << ' ' << r[i][j]+1;
		cout << endl;
	}
	return 0;
}