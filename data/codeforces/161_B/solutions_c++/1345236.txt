#include<stdio.h>
#include<algorithm>
#include<vector>
using namespace std;
#define NN 222222
double res=0;
int n,m,i,j,a[NN],b[NN],t1,t2,cost[NN],type[NN],cmi[NN],c[NN],u[NN],oj,ct,ff,idx,mm,mi,cur;
vector<int>as[NN];
int main(){
//	freopen("in.txt","r",stdin);
//	freopen("out.txt","w",stdout);
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++){
		scanf("%d%d",&a[i],&b[i]);
		c[i]=i;
		if(b[i]==1)++t1;else ++t2;
		cost[i]=a[i];type[i]=b[i];
	}
	for(i=1;i<=n;i++)for(j=i+1;j<=n;j++)if(a[i]<a[j]){
		swap(a[i],a[j]);
		swap(b[i],b[j]);
		swap(c[i],c[j]);
	}
	for(i=1;i<=n;i++)if(b[i]==1&&cur<m){as[++cur].push_back(c[i]);u[i]=1;}
	for(i=1;i<=n;i++)if(!u[i])as[min(++cur,m)].push_back(c[i]);
	for(i=1;i<=m;i++){
		ct=0;mm=2000000001;
		for(j=0;j<as[i].size();j++){
			if(cost[as[i][j]]<mm)mm=cost[as[i][j]];
			res+=cost[as[i][j]];
			if(type[as[i][j]]==1)ct=1;
		}
		if(ct)res-=mm*0.5;
	}
	printf("%.1lf\n",res);
	for(i=1;i<=m;i++){
		printf("%d",as[i].size());
		for(j=0;j<as[i].size();j++)printf(" %d",as[i][j]);
		puts("");
	}
	return 0;
}