#include <vector>
#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <ctime>
#include <algorithm>
#include <queue>
using namespace std;
#define REP(i,n) for(int i=0;i<(n);i++)

typedef long long ll;

int main()
{
	int n,k;
	scanf("%d%d",&n,&k);
	vector<pair<int,int> > tab,kar;
	vector<vector<pair<int,int> > > res(k);
	vector<int> disc(k);
	REP(i,n)
	{
		int a,b;
		scanf("%d%d",&a,&b);
		if(b==1)
			tab.push_back(make_pair(a,i+1));
		else
			kar.push_back(make_pair(a,i+1));
	}
	sort(tab.rbegin(),tab.rend());
	int tc=tab.size();
	int last=0;
	{
		int i;
		for(i=0;i<tc&&i<k;i++)
		{
			res[i].push_back(tab[i]);
			disc[i]=1;
		}
		last=i;
		for(;i<tc;i++)
			res[k-1].push_back(tab[i]);
	}
	if(last==k) last--;
	REP(i,kar.size())
	{
		res[last].push_back(kar[i]);
		if(last!=k-1) last++;
	}
	double rv=0;
	REP(i,k)
	{
		sort(res[i].rbegin(),res[i].rend());
		REP(j,res[i].size())
			rv+=res[i][j].first;
		if(disc[i])
			rv-=res[i].back().first/2.0;
	}
	printf("%.1lf\n",rv);
	REP(i,k)
	{
		printf("%u",res[i].size());
		REP(j,res[i].size())
			printf(" %d",res[i][j].second);
		puts("");
	}

}
