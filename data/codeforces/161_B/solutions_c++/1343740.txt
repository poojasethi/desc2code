#include <cstdio>
#include <cstring>
#include <vector>
#include <algorithm>
using namespace std;

int c[1005], t[1005];
vector<int> ans[1005];
long long val=0;
int srt[1005];
bool cmp(int x, int y) {
	return c[x]<c[y] || (c[x]==c[y]&&t[x]>t[y]);
}
int main(void) {
	int n, k;
	scanf("%d%d", &n, &k);
	for(int i=1;i<=n;i++) {
		scanf("%d%d", &c[i], &t[i]);
		c[i]*=2;
		srt[i]=i;
	}
	sort(srt+1, srt+n+1, cmp);
	int r=0;
	for(int i=n;i>=1;i--) {
		int p = srt[i];
		if(t[p]==1 && r<k) {
			++r;
			if(r==k) val += c[p];
			else val += c[p]/2;
			ans[r-1].push_back(p);
		} else {
			val += c[p];
			if(r+i<=k) {
				++r;
				ans[r-1].push_back(p);
			} else if(r==k) {
				ans[r-1].push_back(p);
			} else
				ans[r].push_back(p);
		}
	}
	int f=0;
	for(int j=0;j<(int)ans[r-1].size();j++)
		if(t[ans[r-1][j]]==1)
			f=1;
	if(f) val -= c[srt[1]]/2;
	printf("%I64d.%I64d\n", val/2, val%2*5);
	for(int i=0;i<k;i++) {
		printf("%d", ans[i].size());
		for(int j=0;j<(int)ans[i].size();j++)
			printf(" %d", ans[i][j]);
		puts("");
	}
	return 0;
}

