#include <iostream>
#include <vector>
#include <algorithm>
#include <stdio.h>
using namespace std;
struct tovar
{int i, c, naz;
} a[1005];
bool cmp(tovar a, tovar b)
{return a.c>b.c;}
vector <int> ans[1005];
double s=0;
int main()
{//freopen("i.txt","r",stdin);
int n,k; cin>>n>>k;
int kt=0;
for (int i=1;i<=n;i++)
{a[i].i=i;  cin>>a[i].c>>a[i].naz;
if (a[i].naz==1) kt++;
}
sort(a+1,a+n+1,cmp);
//for (int i=1;i<=n;i++)  cout<<a[i].i<<"   "<<a[i].c<<"  "<<a[i].naz<<endl;
int j=1;
for (int i=1;i<=n;i++)
{ans[j].push_back(a[i].i);
 if (a[i].naz==1&&(j!=k||i==n))
    {s+=(a[i].c+0.0)/2;j++;}
   else
    {if (i==n&&kt>=k) s+=(a[i].c+0.0)/2; else s+=a[i].c;
     if (n-i==k-j) j++;
   }
}
cout.precision(1);
cout.setf(cout.fixed);
cout<<s<<endl;
for (int i=1;i<=k;i++)
{cout<<ans[i].size()<<" ";
  for (int j=0;j<ans[i].size();j++)
   cout<<ans[i][j]<<" ";
  cout<<endl;
}
return 0;
}
