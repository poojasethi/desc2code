#!/usr/bin/env python

import pdb

L = lambda:map(int, raw_input().split())

n, k = L()
a = []
b = []

for i in xrange(n):
	c, t = L()
	if t == 1:
		a += [(c, i+1)]
	else:
		b += [(c, i+1)]

a.sort()
a.reverse()
b.sort()
b.reverse()


i,j = [0,0]
money = 0
carts = []
for crt in xrange(k, 0, -1):

	d = []
	if i == len(a):
		if crt == 1:
			for x,y in b[j:]: 
				d += [y]
				money += 10*x
		else:
			d += [b[j][1]]
			money += 10*b[j][0]
			j += 1

	elif j == len(b):
		if crt == 1:
			for x,y in a[i:]: 
				d += [y]
				money += 10*x
			money -= a[len(a)-1][0]*5
		else:
			d += [a[i][1]]
			money += 5*a[i][0]
			i += 1

	else:
		if crt == 1:
			eh = []
			for x,y in a[i:]: d+=[y]; money += 10*x; eh += [x]
			for x,y in b[j:]: d+=[y]; money += 10*x; eh += [x]
			eh.sort()
			money -= eh[0]*5
		else:

			while j < len(b) and len(a[i:])+len(b[j:])  > k  \
					and a[i][0] <= b[j][0]: 
				d += [b[j][1]]
				money += b[j][0]*10
				j += 1

			d += [a[i][1]]
			money += a[i][0]*5
			i += 1

	carts.append(d)

print "%d.%d" % (money/10, money%10)
for l in carts:
	print len(l),
	for j in l: print j,
	print ''

	
