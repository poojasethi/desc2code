#include<iostream>
#include <bits/stdc++.h>
#include<algorithm>

using namespace std;
const int maxn=100005;
int a[maxn],b[maxn],c[maxn];

int main()
{
	int n,count;
	count=0;
	scanf("%d",&n);
	for (int i=0;i<n;i++)
	{
	scanf("%d",&a[i]);
     b[a[i]]++;
     if(b[a[i]]%2==1)
     count++;
     else
     count--;
	}
	if(count>1)
	{
	printf("0");
    return 0;
	}
	int i;
	for (i=0;i<n/2;i++)
	{
		if(a[i]==a[n-1-i])
		b[a[i]]-=2;
		else break;
		
	}
	if(i==n/2)
	{
		printf("%I64d",(long long)n*(n+1)/2);
	    return 0;
	}
	int l,r,m;
	m=0;
	l=i;r=n-1-i;
	for(i=0;i<=n;i++)
	c[i]=0;
	for(i=l;i<=r;i++)
	{
		if(i<n/2)
		{
			c[a[i]]++;
			if(c[a[i]]<=b[a[i]]/2) 
			     m++;
				else 
				break;
		}
		else
		{
			if((a[i])==a[n-1-i]&&(b[a[i]]%2||n%2==0)) m++;
			else 
			break;
		}
	}
	for (int i=0;i<=n;i++) c[i]=0;
	for (int i=r;i>=l;i--)
	{
		if(i>n/2||(i==n/2&&n%2==0))
		{c[a[i]]++;
		 if(c[a[i]]<=b[a[i]]/2)
		 {
		 	m++;
	     }
		 	else
		 	break;
		}
		else
		{
			if(a[i]==a[n-1-i]&&(n%2==0||b[a[i]]%2))
			m++;
			else
			break;
		}
	}
	printf("%I64d",(long long)(l+1)*(l+m+1));
	return 0;
 } 
	    		   			 	 	 		    		 	 	