#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<algorithm>
#define foru(i,a,b) for(int i=a;i<=b;i++)
using namespace std;
const int maxn=100010;
typedef long long ll;
int n;
int c[maxn],a[maxn],b[maxn];
int sum;
ll ans;
void solve() {
    memset(b,0,sizeof(b));
    foru(i,1,n) b[a[i]]++;
    memset(c,0,sizeof(c));
    int z=n;
    foru(i,1,n/2) {
        while (z>(n+1)/2&&(c[a[z]]+1)*2<=b[a[z]]) c[a[z]]++,z--;
        if (n&1) {
            int mid=(n+1)/2;
            if (z==mid&&2*c[a[z]]+1<=b[a[z]]) z--;
        }
        if (z<=n/2) while (z>=i&&a[z]==a[n-z+1]) z--;
        if (z<i) z=i;
        ans+=n-i+1-z;
        if (a[i]!=a[n-i+1]) break;
        c[a[n-i+1]]--;
        b[a[i]]-=2;
    }
}
int main() {
//    freopen("test.inp","r",stdin);
    cin >> n;
    foru(i,1,n) {
        cin >> a[i];
        b[a[i]]++;
    }
    foru(i,1,n) sum+=(b[i]%2);
    if (sum>1) {
        cout << 0;
        return 0;
    }
    solve();
    reverse(a+1,a+n+1);
    solve();
    foru(i,1,(n+1)/2) {
        ans++;
        if (a[i]!=a[n-i+1]) break;
    }
    cout << ans;
}
