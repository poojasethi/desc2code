#include <cstring>
#include <cstdio>
using namespace std;

const int maxn=10010;
int mmax[maxn],mmin[maxn],ans[maxn];
bool flag[maxn];
char s[maxn];
int n,m,k;

int main()
{
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	scanf("%d%d",&m,&k);
	for (int i=1; i<=k; i++)
	{
		int x;
		scanf("%d",&x);
		flag[x]=1;
	}
	
	scanf("%d",&n);
	for (int i=1; i<=n; i++)
	{
		scanf("%s",s);
		int p,x,num=0,cnt=0;
		scanf("%d",&p);
		for (int j=1; j<=p; j++)
		{
			scanf("%d",&x);
			num+=flag[x];
			if (x==0) cnt++;
		}
		mmin[i]=num;
		if (p-(m-k)>mmin[i]) mmin[i]=p-(m-k);
		mmax[i]=num+cnt;
		if (k<mmax[i]) mmax[i]=k;
	}
	
	for (int i=1; i<=n; i++)
	{
		int minnum=0,maxnum=0;
		for (int j=1; j<=n; j++)
		{
			if (i==j) continue;
			if (mmin[j]>minnum) minnum=mmin[j];
			if (mmax[j]>maxnum)	maxnum=mmax[j];
		}
		if (mmin[i]>=maxnum) ans[i]=0;
		else
		if (mmax[i]<minnum) ans[i]=1;
		else
			ans[i]=2;
	}
	for (int i=1; i<=n; i++)
		printf("%d\n",ans[i]);
	//for (;;);
}
