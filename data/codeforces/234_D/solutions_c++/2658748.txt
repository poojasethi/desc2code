#include<cstring>
#include<cstdio>
const int M=102;
struct film
{
	char name[12];
	int d,l,r;
}f[M];
bool v[M];
int main()
{
	int m,k,a,b,i,j,n;
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	while(~scanf("%d%d",&m,&k))
	{
		int m_k=m-k;
		memset(v,0,sizeof(v));
		for(i=0;i<k;i++){scanf("%d",&a);v[a]=1;}
		scanf("%d",&n);
		for(i=0;i<n;i++)
		{
			f[i].l=0,f[i].r=0;
			scanf("%s",&f[i].name);
			scanf("%d",&f[i].d);
			int t=0,t1=0;
			for(j=0;j<f[i].d;j++)
			{
				scanf("%d",&b);
				if(b==0){t++;continue;}
				if(v[b])f[i].l++;
				else t1++;
			}
			f[i].r=f[i].l+t;
			if(f[i].r>k)f[i].r=k;
			if(t>(m_k-t1))f[i].l+=(t-m_k+t1);
		}
		for(i=0;i<n;i++)
		{
			int min=0,max=0;
			for(j=0;j<n;j++)
			{
				if(i==j)continue;
				if(min<f[j].l)min=f[j].l;
			    if(max<f[j].r)max=f[j].r;
			}
			if(f[i].l>=max)puts("0");
			else if(f[i].r<min)puts("1");
			else puts("2");
		}
	}
	return 0;
}
 		 			  			 	    		  				