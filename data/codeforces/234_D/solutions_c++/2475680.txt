#include <cstdio>
#include <algorithm>
#include <cstring>

using namespace std;

#define NN 110
int fav[NN];
int d[NN], mis[NN], qf[NN];
int ma[NN], mi[NN];

int main() {
	freopen("input.txt", "r", stdin);
	freopen("output.txt", "w", stdout);
	int m, k;
	memset(fav, 0, sizeof fav);
	scanf("%d%d", &m, &k);
	for (int i = 0; i < k; i++) {
		int a; scanf("%d", &a);
		fav[a] = 1;
	}
	int n;
	scanf("%d", &n);
	memset(mis, 0, sizeof mis);
	for (int i = 0; i < n; i++) {
		scanf(" %*s %d", &d[i]);
		for (int j = 0; j < d[i]; j++) {
			int a; scanf("%d", &a);
			if (fav[a])
				qf[i]++;
			else if (a == 0)
				mis[i]++;
		}
	}

	for (int i = 0; i < n; i++) {
		ma[i] = min(k, qf[i]+mis[i]);
		int n = d[i]-qf[i]-mis[i];
		mi[i] = min(k, qf[i]+mis[i]-min(m-k-n, mis[i]));
	}

	for (int i = 0; i < n; i++) {
		int mag = 0;
		int mig = 0;
		for (int j = 0; j < n; j++) {
			if (i == j) continue;
			mag = max(ma[j], mag);
			mig = max(mi[j], mig);
		}
		if (mi[i] >= mag)
			printf("0\n");
		else if (ma[i] < mig)
			printf("1\n");
		else
			printf("2\n");
	}
	return 0;
}
