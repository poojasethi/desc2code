#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int u=10010;
int ver[u],next[u],head[u],d[u],v[u][2],n,m,x,y,i,tot,j;

void add(int x,int y)
{
	ver[++tot]=y,next[tot]=head[x],head[x]=tot;
}

void dfs(int x,int y)
{
	v[x][y]=1;
	for(int i=head[x];i;i=next[i])
		if((i&1)==y&&!v[ver[i]][y]) dfs(ver[i],y);
}

int main()
{
	cin>>n>>m;
	for(tot=i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		add(x,y),add(y,x);
	}
	dfs(1,0);
	dfs(n,1);
	memset(d,0x3f,sizeof(d));
	d[1]=0;
	for(i=1;i<=n;i++)
		for(j=2;j<tot;j+=2)
			if(v[ver[j^1]][0]&&v[ver[j]][1])
			{
				d[ver[j]]=min(d[ver[j]],d[ver[j^1]]+2);
				d[ver[j^1]]=min(d[ver[j^1]],d[ver[j]]-1);
			}
	for(i=2;i<tot;i+=2)
		if(v[ver[i^1]][0]&&v[ver[i]][1]&&d[ver[i]]-d[ver[i^1]]!=1&&d[ver[i]]-d[ver[i^1]]!=2)
			{puts("No"); return 0;}
	puts("Yes");
	for(i=2;i<tot;i+=2)
		if(v[ver[i^1]][0]&&v[ver[i]][1]) printf("%d\n",d[ver[i]]-d[ver[i^1]]);
		else puts("1");
	return 0;
}