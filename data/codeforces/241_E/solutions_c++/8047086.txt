#include <bits/stdc++.h>
using namespace std;
#define rep(i,a,n) for (int i=a;i<n;i++)
#define U e[i][0]
#define V e[i][1]
const int N=5010;
int e[N][2],vis[N][2],d[N],n,m;
void dfs(int u,int v) {
	if (vis[u][v]) return; vis[u][v]=1;
	rep(i,0,m) if (e[i][v]==u) dfs(e[i][v^1],v);
}
int main() {
	scanf("%d%d",&n,&m);
	rep(i,0,m) scanf("%d%d",e[i],e[i]+1);
	dfs(1,0); dfs(n,1);
	rep(j,0,n+10) rep(i,0,m) if (vis[U][0]&&vis[V][1])
		d[V]=min(d[V],d[U]+2),d[U]=min(d[U],d[V]-1);
	rep(i,0,m) if (vis[U][0]&&vis[V][1]) {
		if (d[V]-d[U]!=2&&d[V]-d[U]!=1) return puts("No"),0;
	}
	puts("Yes");
	rep(i,0,m) printf("%d\n",min(max(d[V]-d[U],1),2));
}