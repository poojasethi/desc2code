#include <cstdio>
#include <cstring>
#include <algorithm>
#include <iostream>
using namespace std;
int dp[4005][4005],n,m,i,j,k,d[4005],yer[1000005],res;
int main(){
	scanf("%d",&n);
	for(i=1;i<=n;i++)
	scanf("%d",&d[i]);
	for(i=1;i<=n;i++){
		for(j=i+1;j<=n;j++){
		    k=yer[d[j]];
			dp[i][j]=1+dp[k][i];
			res=max(res,dp[i][j]);
		}
		yer[d[i]]=i;
	}
	printf("%d\n",res+1);
	return 0;	
}
