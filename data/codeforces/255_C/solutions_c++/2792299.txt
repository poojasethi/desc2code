#include<cstdio>
#include<algorithm>
#define m 4001
using namespace std;
int n, a[m], dp[m][m], out;
int main(){
	scanf("%d", &n);
	for(int i = 1; i <= n; i++) scanf("%d", &a[i]);
	for(int i = 1; i <= n; i++){
		for(int j = 0, pv = 0; j < i; j++){
			dp[j][i] = dp[pv][j]+1;
			if(a[j] == a[i]) pv = j;
			out = max(out, dp[j][i]);
		}
	}
	printf("%d\n", out);
}