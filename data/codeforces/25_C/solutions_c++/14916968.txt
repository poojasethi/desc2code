#include <iostream>

using namespace std;
typedef unsigned long long ll;
int main()
{
ll n,k,s=0;
cin>>n;
int d[n][n];
for (ll i=0; i<n;i++)
{
    for (ll j=0; j<n;j++)
    {
        cin>>d[i][j]; if (j>i) s+=d[i][j];
    }
}
cin>>k;
ll a,b,c,x;
for (ll r=0;r<k;r++)
{
    cin>>a>>b>>c;
    for (ll i=0;i<n;i++)
    {
        for (ll j=0;j<n;j++)
    {
            x=d[i][a-1]+d[b-1][j]+c;
            if (x<d[i][j]) { s-=d[i][j]-x; d[i][j]=x; d[j][i]=x; }
    }
    }
    cout<<s<<" ";
}
return 0;
}
