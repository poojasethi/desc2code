#include <stdio.h>
#include <algorithm>
#include <iostream>
using namespace std;
int adj[1001][1001];
int main(){
	int n,a,b,c,i,j,k,t;
	scanf("%d",&n);
	for(i=1;i<=n;++i)
		for(j=1;j<=n;++j)
			scanf("%d",&adj[i][j]);

	scanf("%d",&k);
	
	for(i=0;i<k;++i){	
		scanf("%d %d %d",&a,&b,&c);
		adj[a][b]= min(adj[a][b],c);adj[b][a]= adj[a][b];
		long long int sum = 0;
		for(j=1;j<=n;++j)
			for(t=1;t<=n;++t){
				adj[j][t]= min(adj[j][t],adj[j][a]+adj[a][b]+adj[b][t]);
				adj[t][j]= adj[j][t];
			}
		for(j=1;j<=n;++j)
			for(t=j+1;t<=n;++t)
				sum+=adj[j][t];
		cout<<sum<<endl;
		}
	putchar('\n');
}
