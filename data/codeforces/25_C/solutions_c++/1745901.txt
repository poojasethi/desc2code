#include<iostream>
using namespace std;
const int maxn =333;

int dp[maxn][maxn];

int n;

int main()
{
	cin>>n;
	for(int i=1;i<=n;i++)
	{
		for(int j=1;j<=n;j++)
		{
			cin>>dp[i][j];
		}
	}

	int q;
	cin>>q;
	int x,y,c;
	long long int ans;
	while(q--)
	{
		cin>>x>>y>>c;
		ans = 0;
		int temp;
		for(int i=1;i<=n;i++)
		{
			for(int j=1;j<=n;j++)
			{
				ans += (dp[i][j]=min(min(dp[i][j],dp[i][x]+dp[y][j]+c),dp[i][y]+dp[x][j]+c));
			}
		}
		cout<<ans/2<<endl;
	}
	return 0;
}

  	 		  		     	 			 	 	  	