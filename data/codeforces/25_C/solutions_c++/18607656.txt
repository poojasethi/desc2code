#include <bits/stdc++.h>

typedef long long ll;

using namespace std;

const int N = 301;
const int K = 301;

int ma[N][N];
int ady[N][N];
int n,k,i,e,s;

int main(){
	cin >> n;
	for(i=0;i<n;i++)
		for(e=0;e<n;e++)
			cin >> ma[i][e];
	cin >> k;
	for(s=0;s<k;s++){
		int a,b,c;
		cin >> a >> b >> c;
		for(i=0;i<n;i++)for(e=0;e<n;e++){
			ma[e][i]=min(ma[i][e],ma[i][a-1]+c+ma[b-1][e]);
			ma[i][e]=ma[e][i];
		}
		
		ll y=0;
		for(i=0;i<n;i++)for(e=0;e<n;e++)
			y+=ma[i][e];
		cout << y/2 << " ";
	}
}