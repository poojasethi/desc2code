#include<iostream>
using namespace std;
const int maxn=310;
int arr[maxn][maxn];
int main(){
	int n,k;
	cin>>n;
	for(int i=0;i<n;i++)
		for(int j=0;j<n;j++)
			cin>>arr[i][j];
	cin>>k;
	int a,b,c;
	for(int p=0;p<k;p++){
		cin>>a>>b>>c;
		a--;b--;
		long long sum=0;
		for(int i=0;i<n;i++)
			for(int j=0;j<n;j++){
				arr[i][j]=min(arr[i][j],min(arr[i][a]+c+arr[j][b],arr[i][b]+c+arr[j][a]));
				sum+=arr[i][j];
			}
		cout<<sum/2<<' ';
	}
	cout<<endl;
}
		
				
	
  	 					 	 		   			 			 	