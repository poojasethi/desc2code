#include <stdio.h>
#include <iostream>

using namespace std;
typedef long long int64;

int64 t[2][501][501];
int n,k;

int main() {
	cin >> n;
	for (int i=1;i<=n;i++) {
		for (int j=1;j<=n;j++) cin >> t[0][i][j];
	}
	cin >> k;
	for (int it=0;it<k;it++) {
		if (it!=0) printf(" ");
		int a,b,c;
		cin >> a >> b >> c;
		int64 r=0;
		for (int i=1;i<=n;i++) {
			for (int j=1;j<=n;j++) {
				t[(it+1)%2][i][j]=min(t[it%2][i][j], min(t[it%2][i][a]+c+t[it%2][b][j], t[it%2][i][b]+c+t[it%2][a][j]));
				r+=t[(it+1)%2][i][j];
			}
		}
		cout << r/2;
	}
	printf("\n");
    return 0;
}
