#include <iostream>
#include <vector>

#define ll long long
#define rep(i,x) for(int i=0; i<x; ++i)
using namespace std;

ll m[300][300];

int main()
{
	int n; cin >> n;
	rep(i,n) rep(j,n) cin >> m[i][j];
	int k; cin >> k;
	ll s=0;
	rep(i,n) rep(j,n) s+=m[i][j];
	rep(p,k)
	{
		ll a,b,c; cin >> a >> b >> c;
		a--,b--;
		rep(i,n) rep(j,n)
		{
			ll& old=m[i][j];
			ll v=min(old, min(m[i][a]+c+m[b][j],m[i][b]+c+m[a][j]));
			s=s-old+v;
			old=v;
		}
		cout << s/2 << " ";
	}

	return 0;
}
