#include <iostream>
#include <cstdio>
#include <vector>
using namespace std;
long long x,y,r,d[301][301],i,j,a,b,c,n,k,sum;
int main()
{
cin>>n; for (i=1;i<=n;i++)  for (j=1;j<=n;j++) {cin>>d[i][j];if (j>i) sum+=d[i][j];}
cin>>k; for (r=1;r<=k;r++){ cin>>a>>b>>c;	for (i=1;i<=n;i++) for (j=1;j<=n;j++) {
 x=d[i][a]+d[b][j]+c;y=d[i][b]+d[a][j]+c;
 x=min(x,y); if (x<d[i][j]) sum-=d[i][j]-x,d[i][j]=x,d[j][i]=x;
}
cout<<sum<<" ";
}

return 0;
}
