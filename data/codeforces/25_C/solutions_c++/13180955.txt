#include<bits/stdc++.h>
using namespace std;
int sp[500][500];
int main()
{
    int n;cin >> n;
    for(int i =1;i<=n;i++)
        for(int j =1;j<=n;j++)
            cin >> sp[i][j];
    int k,x,y,val;cin >> k;
    long long total=0;
    while(k--)
    {
        cin >> x >> y >> val;
        sp[x][y]=min(sp[x][y],val);
        for(int i =1;i<=n;i++)
            for(int j =i+1;j<=n;j++)
                total += sp[j][i] = sp[i][j]= min(sp[i][j],min(sp[i][x]+sp[x][y]+sp[j][y],sp[i][y]+sp[x][y]+sp[j][x]));
        cout << total << endl;total=0;
    }
}
