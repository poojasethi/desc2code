#include <iostream>
#include <algorithm>
using namespace std;
#define REP(i,n) for(int i=0;i<(int)(n);i++)

int n;
int cost[300][300];

long long solve(int a,int b,int c)
{
  long long ret = 0;
  REP(i,n)REP(j,i)ret+=cost[i][j]=cost[j][i]=min(cost[i][j],min(cost[j][a]+c+cost[b][i],cost[i][a]+c+cost[b][j]));
  return ret;
}

int main()
{
  cin>>n;
  REP(i,n) REP(j,n) cin>>cost[i][j];

  int k;cin>>k;
  REP(i,k){
    int a,b,c;cin>>a>>b>>c;
    cout<<solve(a-1,b-1,c)<<" ";
  }

  return 0;
}

