#include <cstdio>
#include <algorithm>
#include <numeric>

int g[300][300];
int S,K;

int main(){
	scanf("%d",&S);
	for(int d=0;d<S;d++)
		for (int f=0;f<S;f++)
			scanf("%d",&g[d][f]);
	scanf("%d",&K);
	for (int i=0;i<K;i++){
		int A,B,C;
		scanf("%d%d%d",&A,&B,&C);
		for (int d=0;d<S;d++)
			for (int f=0;f<S;f++)
				g[f][d]=g[d][f]=std::min(g[d][f],g[d][A-1]+C+g[B-1][f]);
		long long s=0;
		for (int d=0;d<S;d++)
			s=std::accumulate(g[d],g[d]+S,s);
		printf("%I64d\n",s/2);
	}
	return 0;
}
