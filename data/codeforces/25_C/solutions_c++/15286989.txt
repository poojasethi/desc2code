#include <bits/stdc++.h>
using namespace std;
typedef long long LL;
LL n,k,x,y,z,s=0;
LL a[399][399];
int main(){
    cin.tie();cout.tie();ios_base::sync_with_stdio(false);
    cin>>n;for(LL i=0;i<n;i++)for(LL j=0;j<n;j++)cin>>a[i][j];cin>>k;
    while(k--){cin>>x>>y>>z;x--;y--;
        for(LL i=0;i<n;i++)for(LL j=0;j<n;j++){a[i][j]=min(min(a[i][x]+z+a[y][j],a[i][y]+z+a[x][j]),a[i][j]);s+=a[i][j];}cout<<s/2<<' ';s=0;}
}
