#include<bits/stdc++.h>
using namespace std;

int dis[500][500];
int main()
 {
	int n, i, j;
	cin>>n;
	for(i=1;i<=n;i++)
		for(j=1;j<=n;j++)
			cin>>dis[i][j];
	int q;
	cin>>q;
	while(q--)
	{
		int x, y, z;
		cin>>x>>y>>z;
		if(dis[x][y] > z) dis[x][y] = dis[y][x] = z;
		for(i=1;i<=n;i++)
			for(j=1;j<=n;j++)
				if(dis[i][j] > dis[i][x] + dis[x][y] + dis[y][j])
					dis[j][i] = dis[i][j] = dis[i][x] + dis[x][y] + dis[y][j];
		long long sum=0;
		for(i=1;i<=n;i++)
			for(j=i+1;j<=n;j++)
				sum += dis[i][j];
		cout<<sum<<endl;
	}
	puts("");
}

 	 	  		 						 			 		  	