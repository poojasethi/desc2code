#include<iostream>
using namespace std;
const int MAXN=304;
long long a[MAXN][MAXN];
int main(){
	int n;
	cin>>n;
	long long  sum=0;
	for(int i=1;i<=n;i++){
		for(int j=1;j<=n;j++){
			cin>>a[i][j];
			sum+=a[i][j];
		}
	}
	sum/=2;
	int m;
	cin>>m;
	for(int i=1;i<=m;i++){
		long long l,r,w;
		long long  y=0;
		cin>>l>>r>>w;
		for(int k=1;k<=n;k++){
			for(int j=1;j<=n;j++){
				long long x=min(a[k][l]+a[j][r],a[j][l]+a[k][r])+w;
				a[k][j]=min(x,a[k][j]);
				y+=a[k][j];
			}
		}
		y/=2;
		cout<<y<<" ";
	}
}

