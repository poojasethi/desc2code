#include<cstdio>
#include<algorithm>
using namespace std;
int n,dp[301][301],m;
int main(){
  scanf("%d",&n);
  for(int i=1;i<=n;i++)
    for(int j=1;j<=n;j++)
      scanf("%d",&dp[i][j]);
  scanf("%d",&m);
  for(int i=0,u,v,c;i<m;i++){
    long long sum = 0ll;
    scanf("%d%d%d",&u,&v,&c);
    for(int j=1;j<=n;j++)
      for(int k=1;k<=n;k++)
    dp[j][k] = min(dp[j][k], min(dp[j][u]+dp[v][k], dp[j][v] + dp[u][k]) + c);
    for(int j=1;j<=n;j++)
      for(int k=1;k<=j-1;k++)
    sum += 1ll*dp[j][k];
    printf("%I64d ",sum);
  }
  return 0;
}
