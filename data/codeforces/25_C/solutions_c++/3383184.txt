#include<cstdio>
#define ll long long
int d[301][301];
int main(){
	int n,i,j,q,a,b,c,t,t1,t2;
	ll sum;
	while(~scanf("%d",&n)){
		sum=0;
		for(i=1;i<=n;i++)for(j=1;j<=n;j++){scanf("%d",&d[i][j]);if(i<j)sum+=d[i][j];}
		scanf("%d",&q);
		while(q--){
			scanf("%d%d%d",&a,&b,&c);
			if(d[a][b]<=c){printf("%lld\n",sum);continue;}
			sum-=(d[a][b]-c),d[a][b]=d[b][a]=c;
			for(i=1;i<=n;i++)for(j=1;j<=n;j++){
				t1=d[i][a]+d[a][j],t2=d[i][b]+d[b][j];
				t=t1<t2?t1:t2;
				if(t<d[i][j])sum-=(d[i][j]-t),d[i][j]=d[j][i]=t;
			}
			printf("%lld\n",sum);
		}
	}
	return 0;
}
 		   	  		 	 			  						