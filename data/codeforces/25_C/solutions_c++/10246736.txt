#include<iostream>
#include<cstdio>
#include<cstdlib>
#define LiangJiaJun main
using namespace std;
int map[304][304];int u,v,w;
int n,m;
int LiangJiaJun (){
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
        for(int j=1;j<=n;j++)scanf("%d",&map[i][j]);
    scanf("%d",&m);
    for(int k=1;k<=m;k++){
        scanf("%d%d%d",&u,&v,&w);
        long long ans=0;
        for(int i=1;i<=n;i++)
            for(int j=1;j<=n;j++)ans+=(map[i][j]=min(map[i][j],min(map[i][u]+w+map[v][j],map[i][v]+w+map[u][j])));
        ans>>=1;
        printf("%I64d ",ans);
    }
    return 0;
}
