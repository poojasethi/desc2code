#include <iostream>
#include <algorithm>
#include <cstdio>
using namespace std;
#define REP(i,n) for(int i=0;i<(int)(n);i++)

int n;
int cost[300][300];

int main()
{
  scanf("%d",&n);
  REP(i,n)REP(j,n)scanf("%d",&cost[i][j]);

  int k;scanf("%d",&k);
  REP(t,k){
    int a,b,c;scanf("%d%d%d",&a,&b,&c);a--;b--;
    long long ret=0;
    REP(i,n)REP(j,i)ret+=cost[i][j]=cost[j][i]=min(cost[i][j],c+min(cost[j][a]+cost[b][i],cost[i][a]+cost[b][j]));
    cout<<ret<<" ";
  }

  return 0;
}

