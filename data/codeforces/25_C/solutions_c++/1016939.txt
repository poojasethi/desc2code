#include <iostream>
#include <cmath>

#define rep(i,n) for(int i=0;i<n;i++)

using namespace std;

int n,k,d[310][310],i,j,a,b,c,s,t;
long long r;

int main(){

  cin>>n;
  rep(i,n)rep(j,n)cin>>d[i][j];
  rep(i,n)rep(j,n)r+=d[i][j];
  cin>>k;
  rep(ii,k){
    cin>>a>>b>>c;
    a--;b--;
    rep(i,n)rep(j,n){
      if(d[i][a]+c+d[b][j]<d[i][j]){r-=d[i][j]-d[i][a]-c-d[b][j];d[i][j]=d[i][a]+c+d[b][j];}
      if(d[i][b]+c+d[a][j]<d[i][j]){r-=d[i][j]-d[i][b]-c-d[a][j];d[i][j]=d[i][b]+c+d[a][j];}
    }
    cout<<r/2<<" ";
  }
  cout<<endl;

  return 0;

}
