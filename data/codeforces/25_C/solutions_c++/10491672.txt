#include <bits/stdc++.h>

using namespace std;

int main()
{
	int g[302][302];
	int n;
	cin >> n;
	for( int i = 0 ; i < n ; i++ )
	{
		for (int j = 0; j < n ; j++ )
		{
			cin >> g[ i ][ j ];
		}
	}
	int k;
	cin >> k;
	for( int i = 0 ; i < k ; i++ )
	{
		int a,b,c;
		cin >> a >> b>>c;
		a--,b--;
		long long s = 0;
		for (int j = 0; j < n; ++j)
		{
			for (int z = 0; z < n; ++z)
			{
				g[j][z]=min(g[j][z],min(g[j][a]+g[b][z],g[j][b]+g[a][z])+c);
				g[z][j]=g[j][z];
				s+=((long long)(g[z][j]));
			}
		}
		cout << s/2 << endl;
	}
}