#include <cstdio>
#include <algorithm>
#include <iostream>
using namespace std;

__int64 c,pr,cnt,t,ans=0,i,j,k,from,to,cost,l,m,n,d[333][333],q,w,x;


int main()
{
cin>>n;
for (i=1;i<=n;i++)
for (j=1;j<=n;j++)
{cin>>d[i][j];
ans+=d[i][j];
}

cin>>t;
for (x=1;x<=t;x++)
{
cin>>q>>w>>c;
if (d[q][w]>c) 
	{
	d[q][w]=c;
	d[w][q]=c;
	ans=0;
	for (i=1;i<=n;i++)
	for (j=1;j<=n;j++)
	{d[i][j]=min(min(d[i][j],d[i][q]+d[q][w]+d[w][j]),d[i][w]+d[q][w]+d[q][j]);
	ans+=d[i][j];}
	}
cout<<ans/2<<" ";
}

return 0;
}