#include <stdio.h>

int n, d[1000][1000], k;
long long rt=0;

int main ()
{
	scanf ("%d", &n);
	for (int i=1; i<=n; i++)
		for (int j=1; j<=n; j++)
			scanf ("%d", &d[i][j]);
	for (int i=1; i<=n; i++)
		for (int j=1; j<i; j++)
			rt += d[i][j];
	
	int A, B, C;
	scanf ("%d", &k);
	for (int e=0; e<k; e++)
	{
		scanf ("%d%d%d", &A, &B, &C);
		for (int i=1; i<=n; i++)
			for (int j=1; j<=n; j++)
				if (d[i][j] > d[i][A]+C+d[B][j])
				{
					rt -= d[i][j] - (d[i][A]+C+d[B][j]);
					d[i][j] = d[j][i] = d[i][A]+C+d[B][j];
				}
		printf ("%I64d ", rt);
	}
	
	return 0;
}
