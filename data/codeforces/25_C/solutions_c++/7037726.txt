#include <iostream>
using namespace std;
int d[301][301];
int main()
{
	int n, k, a, b, c, i, j, h;
	long long ans;
	cin>>n;
	for (i=1; i<=n; i++) for (j=1; j<=n; j++) cin>>d[i][j];
	cin>>k;
	while (k--) {
		cin>>a>>b>>c;
		if (c<d[a][b]) {
			d[b][a]=d[a][b]=c; 
			for (i=1; i<=n; i++) for (j=1; j<=n; j++) {
				d[i][j]=min(d[i][j], d[i][a]+c+d[b][j]); 
				d[i][j]=min(d[i][j], d[i][b]+c+d[a][j]); 
			}
		}
		for (ans=0,i=1; i<=n; i++) for (j=1; j<=n; j++) {
			ans+=d[i][j];
		}
		cout<<ans/2<<" ";
	}
	cout<<endl;
	return 0;
} 
