#include<bits/stdc++.h>

using namespace std;

long long A[333][333],i,j,a,b,u,n,x,sum;

int main(){

	cin >> n;

	for(i=1;i<=n;i++)
		for(j=1;j<=n;j++)
			cin >> A[i][j];

	cin >> x;

	while(x--){

		cin >> a >> b >> u;

		for(sum=0,i=1;i<=n;i++)
			for(j=1;j<i;j++){

				if(A[i][j] > A[i][a] + A[b][j] + u)
					A[j][i] = A[i][j] = A[i][a] + A[b][j] + u;
		      if(A[i][j] > A[i][b] + A[a][j] + u)
					A[j][i] = A[i][j] = A[i][b] + A[a][j] + u;

				sum += A[i][j];
			}

		cout << sum << " ";
	}
	return 0;
}
