#include <bits/stdc++.h>
#define fr(i,a,b) for(int i=a;i<b;i++)
#define rep(i,b) fr(i,0,b)

using namespace std;
#define M 20
#define N 1000100

int pai[N][M];
int h[N];

int dist(int a,int b){
    int ret=h[a]+h[b];
    if(h[a]<h[b]) swap(a,b);
    for(int i=M-1; i>=0; i--) if(h[pai[a][i]]>=h[b])a=pai[a][i];
    for(int i=M-1; i>=0; i--) if(pai[a][i]!=pai[b][i])a=pai[a][i],b=pai[b][i];
    if(a!=b) a=pai[a][0];   
    return ret-2*h[a];
}

int main(){
    pai[1][0]=0;
    h[0]=-1, h[1]=0;
    fr(i,2,5) pai[i][0]=1, h[i]=1;  
    
    
    int q;
    int p1=2, p2=3, ds=2;
    scanf("%d",&q);
    int n= 5;
    rep(u,q){
        int v;
        scanf("%d",&v);
        pai[n][0]=pai[n+1][0]=v;
        h[n]=h[n+1]=h[v]+1;
        fr(i,1,M) pai[n][i]=pai[pai[n][i-1]][i-1];
        fr(i,1,M) pai[n+1][i]=pai[pai[n+1][i-1]][i-1];
                
        if(dist(n,p1) > ds) ds++, p2=n;
        else if(dist(n,p2)>ds) ds++, p1=n;
        printf("%d\n",ds);      
        n+=2;
    }
    
    return 0;
}
