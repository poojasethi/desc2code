#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#define N 1000005
using namespace std;
int q, d[N], f[N][21], len, u, n, i, j, la;
int dis(int u, int v)
{
    int s = d[u] + d[v];
    for (j = 20; j >= 0; j--)
        if (d[f[u][j]] >= d[v]) u = f[u][j];
    for (j = 20; j >= 0; j--)
        if (f[u][j] != f[v][j]) u = f[u][j], v = f[v][j];
    u = f[u][0];
    return (s - d[u] * 2);
}
int main()
{
    scanf("%d", &q);
    d[2] = d[3] = d[4] = 1, la = 4, n = 4, len = 2;
    f[2][0] = f[3][0] = f[4][0] = 1;
    for (i = 1; i <= q; i++)
    {
        scanf("%d", &u);
        f[n + 1][0] = f[n + 2][0] = u;
        d[n + 1] = d[n + 2] = d[u] + 1;
        for (j = 1; j <= 20 && f[n + 1][j - 1] != 0; j++)
            f[n + 1][j] = f[n + 2][j] = f[f[n + 1][j - 1]][j - 1];
        if (d[n + 1] > d[la]) la = n + 1, len++;
        else len = max(len, dis(la, n + 1));
        printf("%d\n", len);
        n += 2;
    }
    return 0;
}