#include<cstdio>
#include<iostream>
#include<cstring>
#include<algorithm>
using namespace std;
int q,d=2,L=2,R=3,id,cur=4;
int anc[1000029][21],dep[1000029];
bool calc_lca(int a,int b){
    int ans=dep[a]+dep[b];
    if(dep[a]>dep[b]) swap(a,b);
    for(int i=19;i>=0;i--){
        if(dep[b]-(1<<i)>=dep[a]) b=anc[b][i];
    }
    for(int i=19;i>=0;i--){
        if(anc[a][i]==anc[b][i]){}
        else a=anc[a][i],b=anc[b][i];
    }
    if(a!=b) a=anc[a][0];
    ans-=2*dep[a];
    if(ans>d) return true;
    else return false;
}   
    
int main(){
    memset(anc,-1,sizeof(anc));
    dep[1]=0; for(int i=2;i<=4;i++) dep[i]=1,anc[i][0]=1;
    
    scanf("%d",&q);
    while(q--){
        scanf("%d",&id);
        int _l=++cur;
        int _r=++cur;
        dep[_l]=dep[_r]=dep[id]+1;
        anc[_l][0]=anc[_r][0]=id;
        for(int i=1;(1<<i)<=dep[_l];i++)
            anc[_l][i]=anc[_r][i]=anc[anc[_l][i-1]][i-1];
        if(calc_lca(_l,L)) R=_l,d++;
        else if(calc_lca(_r,R)) L=_r,d++;
        printf("%d\n",d);
    }
    return 0;
}
