#include <bits/stdc++.h>
using namespace std;
const int maxn = 2*5*100005;
const int k = 20;
int n;
int q;
int f[maxn][k+2];
int dept[maxn];

void add(int u, int v) {
   f[u][0] = v;
   dept[u] = dept[v]+1;
   for(int i = 1; i <= 20; ++i)
      f[u][i] = f[f[u][i-1]][i-1];
}

int lca(int u, int v) {
   if (dept[u] > dept[v]) swap(u, v);
   for(int i = 20; i >= 0; --i)
      if (dept[f[v][i]] >= dept[u]) v = f[v][i];
   for(int i = 20; i >= 0; --i)
      if (f[u][i] != f[v][i]) u = f[u][i], v = f[v][i];
   return f[u][0];
}

int dist(int u, int v) {
   return dept[u] + dept[v] - 2*dept[lca(u, v)];
}

int main() {
   n = 4;
   dept[2] = dept[3] = dept[4] = 1;
   f[2][0] = f[3][0] = f[4][0] = 1;
   int u = 2, v = 3;
   int ans = 2;
   cin >> q;
   int x;
   for(int i = 1; i <= q; ++i) {
      scanf("%d", &x);
      add(++n, x);
      add(++n, x);
      if (dist(n,v) > ans) ans++, u = n;
      else if (dist(n, u) > ans) ans++, v = n;
      printf("%d\n", ans);
   }
}
