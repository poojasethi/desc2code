#include <stdio.h>
#include <string.h>
#include <iostream>
#include <algorithm>
#include <vector>
#include <queue>
#include <set>
#include <map>
#include <string>
#include <math.h>
#include <stdlib.h>
#include <time.h>
using namespace std;
const int maxn=1001000;
int deg[maxn],fa[maxn][22];
void add(int u,int v)
{
      deg[u]=deg[v]+1;
      fa[u][0]=v;
      for(int i=1;i<22;i++)fa[u][i]=fa[fa[u][i-1]][i-1];
}
int lca(int x,int y)
{
      if(deg[x]<deg[y])swap(x,y);
      for(int i=0;i<22;i++)if((deg[x]-deg[y])&(1<<i))x=fa[x][i];
      for(int i=21;i>=0;i--)if(fa[x][i]!=fa[y][i])x=fa[x][i],y=fa[y][i];
      return fa[x][0];
}
int query(int x,int y)
{
      return deg[x]+deg[y]-2*deg[lca(x,y)];
}
int main(){
    int n = 4, m, x, p = 2, q =4, ans = 2;
    deg[2] = deg[3] = deg[4] = 1;
    scanf("%d", &m);
    while (m--)
    {
        scanf("%d", &x); 
        add(++n, x);
        add(++n, x);
        if (query(p, n) > ans) ans++, q = n;
        else if (query(q, n) > ans) ans++, p = n;
        printf("%d\n", ans);
    }
    return 0;
}


