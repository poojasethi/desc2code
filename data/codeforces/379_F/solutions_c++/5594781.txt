#include <cstdio>

#define N 500000
#define M 18

int a[M][N * 2 + 4], g[N * 2 + 4], q, k, n, i, m = 2, v = 1, x, y;

int main()
{
	scanf("%d", &q);

	g[1] = g[2] = g[3] = 1;
	n = 4;

	while (q--)
	{
		scanf("%d", &k);
		--k;
		a[0][n] = a[0][n + 1] = k;
		g[n] = g[n + 1] = g[k] + 1;
		for (i = 1; i < M; i ++)
			a[i][n] = a[i][n + 1] = a[i - 1][a[i - 1][n]];
		if (g[n] > g[v])
			v = n, ++m;
		else
			if (g[n] + g[v] > m)
			{
				x = v, y = n;
				for (i = 0; i < M; i ++)
					if ((g[x] - g[y]) & (1 << i))
						x = a[i][x];
				for (i = M - 1; i >= 0; i --)
					if (a[i][x] != a[i][y])
						x = a[i][x], y = a[i][y];
				if (g[n] + g[v] - (g[a[0][x]] << 1) > m)
					++m;
			}
		n += 2;
		printf("%d\n", m);
	}

	return 0;
}
