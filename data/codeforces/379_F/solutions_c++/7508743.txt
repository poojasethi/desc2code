#include<bits/stdc++.h>
using namespace std;
const int N=1e6+200000;
int n,dad[N][22],d[N],m;
int res=2,x,y;
void add(int u,int v){
    dad[v][0]=u;
    d[v]=d[u]+1;
    for(int i=1;i<=20;++i) dad[v][i]=dad[dad[v][i-1]][i-1];
}
int lca(int p,int q){
    for(int i=20;i>=0;--i) if(d[dad[p][i]]>=d[q]) p=dad[p][i];
    for(int i=20;i>=0;--i) if(d[dad[q][i]]>=d[p]) q=dad[q][i];
    if(p==q) return p;
    for(int i=20;i>=0;--i) if(dad[p][i]!=dad[q][i]) p=dad[p][i], q=dad[q][i];
    return dad[p][0];
}
int dis(int p,int q){
    int LCA=lca(p,q);
    return d[p]+d[q]-2*d[LCA];
}
int main(){
   // freopen("circle.cpp","r",stdin);
    cin>>m;
    n=4;
    add(1,2); add(1,3); add(1,4);
    x=2, y=3;

    for(int i=0;i<m;++i){
        int u,x1,x2;
        scanf("%d",&u);
        x1=n+1;
        x2=n+2;
        add(u,x1); add(u,x2);
        if(res<dis(x,x1)) ++res,y=x1;
        else if(res<dis(y,x2)) x=x2, ++res;
        printf("%d\n",res);

        n+=2;
    }
}
