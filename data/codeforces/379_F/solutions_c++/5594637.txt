#include <cstdio>

#define N 500004
#define M 19

int a[N << 1][M], g[N << 1], q, k, n, i, m = 2, v = 1, w = 2, z, s;

int r(int x, int y)
{
	s = g[x] + g[y];
	if (g[x] < g[y])
		z = x, x = y, y = z;
	for (i = 0; i < M; i ++)
		if ((g[x] - g[y]) & (1 << i))
			x = a[x][i];
	for (i = M - 1; i >= 0; i --)
		if (a[x][i] != a[y][i])
			x = a[x][i], y = a[y][i];
	return s - (g[a[x][0]] << 1);
}

int main()
{
	scanf("%d", &q);

	g[1] = g[2] = g[3] = 1;
	n = 4;

	while (q--)
	{
		scanf("%d", &k);
		--k;
		a[n][0] = a[n + 1][0] = k;
		g[n] = g[n + 1] = g[k] + 1;
		for (i = 1; i < M; i ++)
			a[n][i] = a[n + 1][i] = a[a[n][i - 1]][i - 1];
		if (r(n, v) > m)
			++m, w = n;
		else
			if (r(n, w) > m)
				++m, v = n;
		n += 2;
		printf("%d\n", m);
	}

	return 0;
}
