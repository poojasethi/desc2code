#include<algorithm>
#include<iostream>
#include<cstdlib>
#include<cstring>
#include<cstdio>
#include<cmath>
using namespace std;

#define N 500010
#define M 20

int dep[N<<2],f[M][N<<2];

int n;
int q,k;
int v=1,m=2;

int main()
{
	dep[1]=dep[2]=dep[3]=1;
	n=4;
	scanf("%d",&q);
	while (q--)
	{
		scanf("%d",&k);
		k--;
		f[0][n]=f[0][n+1]=k;
		dep[n]=dep[n+1]=dep[k]+1;
		for (int i=1;i<M && f[i-1][f[i-1][n]];i++)
			f[i][n]=f[i][n+1]=f[i-1][f[i-1][n]];
		if (dep[n]>dep[v])
			v=n,++m;
		else if (dep[n]+dep[v]>m)
		{
			int x=v,y=n;
			for (int i=0;i<M && dep[x]!=dep[y];i++)
				if ((dep[x]-dep[y]) & (1<<i))
					x=f[i][x];
			for (int i=M-1;i>=0;i--)
				if (f[i][x]!=f[i][y])
					x=f[i][x],y=f[i][y];
			if (dep[n]+dep[v]-(dep[f[0][x]]<<1)>m)
				++m;
		}
		n+=2;
		printf("%d\n",m);
	}
	return 0;
}
