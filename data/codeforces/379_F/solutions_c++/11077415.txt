#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <cstring>

using namespace std;

int n,m,dist,x,y,id;
int fa[1000100][25];	
int d[1000100];
void add(int x,int y)
{
	fa[x][0]=y;d[x]=d[y]+1;
	for (int i=1;i<=20;++i) fa[x][i]=fa[fa[x][i-1]][i-1];
}
int len(int x,int y)
{
	if (x==y) return 0;
	int dqx=x,dqy=y;

	if (d[dqx]<d[dqy]) swap(dqx,dqy);
	for (int i=20;i>=0;--i)
	{
		if (d[fa[dqx][i]]>=d[dqy]) dqx=fa[dqx][i];
		if (dqx==dqy) return d[x]+d[y]-2*d[dqx];
	}
	for (int i=20;i>=0;--i)
	{
		if (fa[dqx][i]!=fa[dqy][i])
		{
			dqx=fa[dqx][i];
			dqy=fa[dqy][i];
		}
	}
	
	return d[x]+d[y]-2*d[fa[dqx][0]];
}
int main()
{
	scanf("%d",&m);
	memset(fa,0,sizeof(fa));
	add(2,1);add(3,1);add(4,1);
	dist=2;x=2;y=3;n=4;
	while (m--)
	{
		scanf("%d",&id);
		if (len(x,id)<len(y,id)) swap(x,y);
		if (len(x,id)==dist)
		{
			++dist;
			y=n+1;
		}
		add(n+1,id);
		add(n+2,id);
		n+=2;
		printf("%d\n",dist);
	}	
	return 0;
}
  		  			 	 		  		 	   			 	