//In the name of God
#include <iostream>
using namespace std;
const int N = 1e6 + 6;

int n = 4, m, h[N] = {0, 1, 1, 1}, mx = 1, ans = 2, par[N][22];

int LCA(int u, int v) {
	if (h[u] > h[v])
		swap(u, v);
	for (int i = 20; i >= 0; i--)
		if (h[v] - h[u] >= 1 << i)
			v = par[v][i];
	for (int i = 20; i >= 0; i--)
		if (par[u][i] != par[v][i])
			u = par[u][i], v = par[v][i];
	return (u == v? u: par[u][0]);
}
int main() {
	ios_base::sync_with_stdio(false);
	cin >> m;
	while (m--) {
		int r; cin >> r; r--;
		par[n][0] = par[n + 1][0] = r;
		for (int i = 1; i <= 20; i++)
			par[n][i] = par[n + 1][i] = par[par[n][i - 1]][i - 1];
		h[n] = h[n + 1] = h[r] + 1;
		if (h[n] > h[mx])
			mx = n, ans++;
		else
			ans = max(ans, h[n] + h[mx] - 2 * h[LCA(n, mx)]);
		cout << ans << '\n';
		n += 2;
	}
	return 0;
}
