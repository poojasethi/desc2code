#include <stdio.h>
#define MAX 1000010

int n=4, max=2;
int dep[MAX], f[MAX][30];

void add(int now, int par){
	int i;
	dep[now]=dep[par]+1;
	f[now][0]=par;
	for (i=1;i<20;i++){
		f[now][i]=f[f[now][i-1]][i-1];
	}
}

int lca(int x, int y){
	int i, t, j;
	if (dep[x]<dep[y]){
		t=x, x=y, y=t;
	}
	for (i=dep[x]-dep[y],j=0;i;j++){
		if (i%2) x=f[x][j];
		i/=2;
	}
	for (i=19;i>=0;i--){
		if (f[x][i]==f[y][i]) continue;
		x=f[x][i];
		y=f[y][i];
	}
	return f[x][0];
}

int dis(int x, int y){
	return dep[x]+dep[y]-dep[lca(x,y)]*2;
}

int main(void){
	int query, x, t, maxdep;
	int a=2, b=3, d1, d2;
	scanf("%d", &query);
	dep[2]=dep[3]=dep[4]=1;

	for (;query>=1;query--){
		scanf("%d", &x);
		add(++n, x);
		add(++n, x);
		
		d1=dis(n,a), d2=dis(n-1, b);
		if (d1>max){
			max=d1;
			b=n;
		}else if (d2>max){
			max=d2;
			a=n-1;
		}

		printf("%d\n", max);
	}
	return false;
}