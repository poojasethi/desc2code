#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 1000010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,t,l,r,an;
int dep[N],cnt[N],fa[N][21];
inline void add(int y,int x) {
	fa[x][0]=y; dep[x]=dep[y]+1;
	int i;
	For(i,1,cnt[dep[x]]) fa[x][i]=fa[fa[x][i-1]][i-1];
}
inline int lca(int x,int y) {
	int A=dep[x]+dep[y],i;
	if (dep[x]>dep[y]) swap(x,y);
	for (i=cnt[dep[y]-dep[x]];i>=0;i--)
	if (dep[x]+(1<<i)<=dep[y]) y=fa[y][i];
	if (x==y) return A-dep[x]*2;
	for (i=cnt[dep[x]];i>=0;i--)
	if ((1<<i)<dep[x]&&fa[x][i]!=fa[y][i]) x=fa[x][i],y=fa[y][i];
	x=fa[x][0];
	return A-dep[x]*2;
}
int main() {
	t=4; add(1,2),add(1,3),add(1,4);
	l=2,r=3,an=2;
	scanf("%d",&n);
	For(i,2,n*2) cnt[i]=cnt[i/2]+1;
	For(i,1,n) {
		scanf("%d",&k);
		if (lca(l,k)<lca(r,k)) swap(l,r);
		if (lca(l,k)==an) an++,r=t+1;
		add(k,t+1),add(k,t+2),t+=2;
		printf("%d\n",an);
	}
	//for(;;);
	return 0;
}
