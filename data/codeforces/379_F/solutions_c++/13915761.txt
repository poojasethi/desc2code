#include <bits/stdc++.h>
using namespace std;
const int maxn = 2e6+10;
int q,h[maxn],r[30][maxn],g[maxn],u,v,ans,n;
void add(int x,int y){
    h[y]=h[x]+1;
    r[0][y]=x;
    for (int i=1; i<=g[h[y]]; i++)
        r[i][y]=r[i-1][r[i-1][y]];
}
int lca(int x,int y){
    if (h[x]>h[y]) swap(x,y);
    while (h[y]>h[x]) y=r[g[h[y]-h[x]]][y];
    int i;
    while (x!=y){
        i=0;
        while (r[i][x]!=r[i][y]) i++;
        if (i>0) i--;
        x=r[i][x];y=r[i][y];
    }
    return x;
}
int update(int x,int y){
    int p=lca(x,y);
    int len=h[x]+h[y]-2*h[p];
    if (ans<len){
        ans=len;
        u=x;
        v=y;
    }
}
int main(){
    scanf("%d",&q);
    for (int i=2; i<=2000000; i++) g[i]=g[i>>1]+1;
    add(1,2);
    add(1,3);
    add(1,4);
    ans=2;n=4;
    u=2;v=3;
    for (int x,y,i=1; i<=q; i++){
        scanf("%d",&x);
        for (int j=n+1; j<=n+2; j++){
            add(x,j);
            update(u,j);
            update(v,j);
        }
        n+=2;
        printf("%d\n",ans);
    }
}