//shjj-379f

#include <iostream>
#include <cstring>
#include <cstdio>
#include <cstdlib>

using namespace std;

int Fa[24][2000000+3],dep[2000000+3];
int n,m,Long,ansx,ansy;

int dist(int x,int y)
{
if (dep[x]<dep[y]) swap(x,y);
int dd=dep[x]-dep[y],ss=0;
for (int i=23;i>=0;i--)
  if ((dd>>i)&1)
    {
    ss+=1<<i;
    x=Fa[i][x];
    }
if (x==y) return ss;
for (int i=23;i>=0;i--)
  if (Fa[i][x]!=Fa[i][y])  
    {
    ss+=1<<i;
    ss+=1<<i;
    x=Fa[i][x],y=Fa[i][y];
    }
ss+=2;
return ss;
}

int main()
{
Fa[0][2]=Fa[0][3]=Fa[0][4]=1;n=4;
dep[1]=1;dep[2]=dep[3]=dep[4]=2;
scanf("%d",&m);
for (int i=1;i<=m;i++)
  {
  int x;scanf("%d",&x);
  Fa[0][++n]=x;dep[n]=dep[x]+1;
  Fa[0][++n]=x;dep[n]=dep[x]+1;
  for (int j=1;j<=23;j++)
    {
    Fa[j][n-1]=Fa[j-1][Fa[j-1][n-1]];
    Fa[j][n]=Fa[j-1][Fa[j-1][n]];
    }
  if (dist(n,ansx)>Long)
    {
    Long=dist(n,ansx);
    ansy=n;
    }
  if (dist(n,ansy)>Long)
    {
    Long=dist(n,ansy);
    ansx=n;
    }
  printf("%d\n",Long);
  }
}
