#include <cstdio>
#include <algorithm>
using namespace std;

int n, v, ans, q, k, fa[1100000][21], h[1100000];

int dist(int x, int y) {
	if (h[x] < h[y])	swap(x, y);
	int sum = 0;
	for (int i = 20; i >= 0; i--)
		if (h[fa[x][i]] >= h[y])	x = fa[x][i], sum += (1 << i);
	if (x == y)	return sum;
	for (int i = 20; i >= 0; i--)
		if (fa[x][i] != fa[y][i])	x = fa[x][i], y = fa[y][i], sum += (1 << (i + 1));
	return sum + 2;
}

int main() {
	fa[2][0] = fa[3][0] = fa[4][0] = 1;
	h[2] = h[3] = h[4] = 2;
	h[1] = 1;
	n = 4;
	v = 2;
	ans = 2;
	scanf("%d", &q);
	while (q--) {
		scanf("%d", &k);
		fa[n + 1][0] = fa[n + 2][0] = k;
		h[n + 1] = h[n + 2] = h[k] + 1;
		for (int i = 1; i <= 20; i++)	fa[n + 1][i] = fa[n + 2][i] = fa[fa[n + 1][i - 1]][i - 1];
		n += 2;
		if (h[n] > h[v])	v = n, ans++;
		else	ans = max(ans, dist(n, v));
		printf("%d\n", ans);
	}
}
