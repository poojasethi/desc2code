#include <bits/stdc++.h>

using namespace std;

int N,X,Y,res;
int dad[1100000][23];
int D[1100000];

int f( int x , int y ){
	
	int sum=0;
	
	if( D[y] > D[x] ){	int t=x;	x=y;	y=t;	}
	if( D[x] != D[y] ){
		
		int z=D[x]-D[y];
		for( int i=22 ; i>=0 ; i-- )
			if( D[dad[x][i]] >= D[y] )
				x=dad[x][i];
		sum+=z;
		
	}
	
	if( x == y )	return sum;
	
	for( int i=22 ; i>=0 ; i-- )
		if( dad[x][i] != dad[y][i] ){
			x=dad[x][i]; y=dad[y][i];
			sum+=2*(1<<i);
		}
	
	return sum+2;
	
}

int main(){
	
	int a;
	cin >> N;
	
	dad[2][0]=1;
	dad[3][0]=1;
	dad[4][0]=1;
	X=2; Y=4; res=2;
	D[1]=0; 	D[2]=1; 	D[3]=1; 	D[4]=1;
	
	for( int i=1 , k=5 ; i<=N ; i++ , k+=2 ){
		
		scanf(" %d",&a);
		dad[k][0]=a;
		dad[k+1][0]=a;
		D[k]=D[k+1]=D[a]+1;
		for( int j=1 ; j<=22 ; j++ ){
			dad[k][j]=dad[dad[k][j-1]][j-1];
			dad[k+1][j]=dad[dad[k+1][j-1]][j-1];
		}
		
		int m=X,n=k;
		int q=f( m , n ),p;
		m=Y, n=k;
		p=f( m , n );
		
		if( p >= q && p > res ){
			res=p;
			X=k;
		}
		else if( q >= p && q > res ){
			res=q;
			Y=k;
		}
		
		printf("%d\n",res);
		
	}
	
	return 0;
	
}
