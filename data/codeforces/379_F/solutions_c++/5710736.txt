#include <cstdio>
#include <algorithm>
#define MAXN 1500000
using namespace std;
int n=4;
int A=2,B=3,res=2;
int ust[MAXN][20];
int tt[MAXN];
int Dist(int a,int b)
{
	int res=0;
	if(tt[a] < tt[b]) swap(a,b);
	for(int i=19;i>=0;i--)
	{
		int x=ust[a][i];
		if(tt[x] >= tt[b])
		{
			res+=1<<i;
			a=x;
		}
	}
	if(a==b) return res;
	for(int i=19;i>=0;i--)
	{
		int x=ust[a][i];
		int y=ust[b][i];
		if(x==y) continue;
		res+=1<<i;
		res+=1<<i;
		a=x;
		b=y;
	}
	return res+2;
}
int main()
{
	ust[2][0]=1;
	ust[3][0]=1;
	ust[4][0]=1;
	tt[1]=1;
	tt[2]=2; tt[3]=2; tt[4]=2;
	int m;
	scanf(" %d",&m);
	for(int i=0;i<m;i++)
	{
		int x=n+1,y=n+2,a;
		scanf(" %d",&a);
		ust[x][0]=a;
		ust[y][0]=a;
		tt[x]=tt[a]+1;
		tt[y]=tt[a]+1;
		for(int j=1;j<20;j++)
		{
			ust[x][j]=ust[ust[x][j-1]][j-1];
			ust[y][j]=ust[ust[y][j-1]][j-1];
		}
		n+=2;
		if(Dist(x,A) > res)
		{
			res=Dist(x,A);
			B=x;
		}
		else if(Dist(x,B) > res)
		{
			res=Dist(x,B);
			A=x;
		}
		printf("%d\n",res);
	}
	return 0;
}
