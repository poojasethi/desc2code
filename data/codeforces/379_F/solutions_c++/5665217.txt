#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int i,j,k,n,m,dep[1100001],lca[1100001][21],dis,ans,dv;
int getlca(int x,int y){
	int i;
	if (dep[x]>dep[y]) swap(x,y);
	for (i=20;dep[x]<dep[y];y=lca[y][i])
	 for (;dep[lca[y][i]]<dep[x];i--);
	for (i=20;x!=y;x=lca[x][i],y=lca[y][i])
	 for (;i&&lca[x][i]==lca[y][i];i--);
	return x;
}
void ins(int p){
	int i,k;
	lca[++n][0]=p;dep[n]=dep[p]+1;
	for (i=1;lca[n][i-1];i++) lca[n][i]=lca[lca[n][i-1]][i-1];
	if (dis==dep[p]){
		dis++;ans++;dv=n;
	}else{
		k=getlca(dv,p);
		ans=max(ans,dep[dv]+dep[n]-2*dep[k]);
	}
}
int main(){
	scanf("%d",&m);n=4;dep[0]=0;
	dep[1]=1;dep[2]=dep[3]=dep[4]=2;memset(lca,0,sizeof(lca));
	lca[2][0]=lca[3][0]=lca[4][0]=1;dis=ans=dv=2;
	for (i=1;i<=m;i++){
		scanf("%d",&k);
		ins(k);ins(k);
		printf("%d\n",ans);
	}
	return 0;
}