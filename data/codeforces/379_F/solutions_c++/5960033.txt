#include <cstdio>
#include <algorithm>
#define maxn 1000005

int Q,fa[maxn][20],d[maxn];

void add(int f,int u)
{
	fa[u][0]=f,d[u]=d[f]+1;
	for (int i=1; i<20; i++) fa[u][i]=fa[fa[u][i-1]][i-1];
}

int len(int u,int v)
{
	if (u==v) return 0;
	int x=u,y=v;
	if (d[u]<d[v]) std::swap(u,v);
	for (int i=19; i>=0; i--)
	{
		if (d[fa[u][i]]>=d[v]) u=fa[u][i];
		if (u==v) return d[x]+d[y]-2*d[u];
	}
	for (int i=19; i>=0; i--) if (fa[u][i]!=fa[v][i]) u=fa[u][i],v=fa[v][i];
	return d[x]+d[y]-2*d[fa[u][0]];
}

int main()
{
	scanf("%d",&Q),d[1]=1,add(1,2),add(1,3),add(1,4);
	for (int i=1,x=2,y=3,u,l=2,n=4; i<=Q; i++)
	{
		scanf("%d",&u);
		if (len(u,x)<len(u,y)) std::swap(x,y);
		if (len(u,x)==l) l++,y=n+1;
		add(u,++n),add(u,++n),printf("%d\n",l);
	}
}