#include<bits/stdc++.h>
#define MP make_pair
#define R second
#define L first
using namespace std;
const int maxn=1000*1000+500, maxh=21;
int par[maxn][maxh];
int h[maxn];

int getlca(int x, int y){
	if(h[x]<h[y])
		swap(x, y);
	for(int i=maxh-1;i>=0;i--)
		if((h[x]-h[y])&(1<<i))
			x=par[x][i];
	if(x==y)
		return x;
	for(int i=maxh-1;i>=0;i--)
		if(par[x][i]!=par[y][i])
			x=par[x][i], y=par[y][i];
	return par[x][0];
}

int getdis(int x, int y){
	return h[x]+h[y]-2*h[getlca(x, y)];
}

int main(){
	ios_base::sync_with_stdio(false);
	int t;
	cin >> t;
	h[1]=h[2]=h[3]=1;
	int p1=1, p2=2;
	int cnt=4;
	while(t--){
		int p;
		cin >> p;
		p--;
		par[cnt][0]=p;
		h[cnt]=h[p]+1;
		for(int i=1;i<maxh;i++)
			par[cnt][i]=par[par[cnt][i-1]][i-1];
		if(getdis(cnt, p2)>getdis(p1, p2))
			p1=cnt;
		if(getdis(cnt, p1)>getdis(p1, p2))
			p2=cnt;
		cnt++;
		par[cnt][0]=p;
		h[cnt]=h[p]+1;
		for(int i=1;i<maxh;i++)
			par[cnt][i]=par[par[cnt][i-1]][i-1];
		if(getdis(cnt, p2)>getdis(p1, p2))
			p1=cnt;
		if(getdis(cnt, p1)>getdis(p1, p2))
			p2=cnt;
		cnt++;
		cout << getdis(p1, p2) << endl;
	}

}
