import sys

[N,M] = map(int, sys.stdin.readline().strip().split())

matrix = []



for i in range(0,N):
    row = map(int, sys.stdin.readline().strip().split())
    matrix.append(row)


def ismirror(n):
    for i in range(0,n/2):
        if (matrix[i] != matrix[n-i-1]):
            return False
    
    return True

def calc(n):
    if (n == 0 or n%2 !=0):
        return n
    elif(ismirror(n)):
        return calc(n/2)
    else:
        return n
        
    
ret = calc(N)

print ret