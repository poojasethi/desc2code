def find_min(x):
    while x % 2 == 0:
        x //= 2
    return x


# import sys
# sys.stdin = open("in")

x, y = map(int, raw_input().split())
matrix = [map(int, raw_input().split()) for _ in xrange(x)]
if x % 2 == 1:
    print("{}\n".format(x))
else:
    i = find_min(x)
    min_row = i
    while i <= x // 2:
        for j in xrange(i):
            if matrix[j] != matrix[i * 2 - 1 - j]:
                min_row = i * 2
                break
        i *= 2
    print("{}\n".format(min_row))
