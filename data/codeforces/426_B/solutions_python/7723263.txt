r=lambda:map(int,raw_input().split())
n,m=r()
s=zip(*[r() for i in range(n)])

f=1

while n>1:
    if n%2:
        break
    t=1
    for i in range(m if f else 1):
        if s[i][:n/2] != s[i][n/2:n][::-1]:
            t=0
            break
    if t:
        n/=2
    else:
        break    
print n