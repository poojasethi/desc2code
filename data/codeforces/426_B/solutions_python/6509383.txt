n, m = map(int, raw_input().split())
a = []
for i in xrange(n):
    a.append(raw_input())

while n and n % 2 == 0 and a[:n/2] == a[n-1:n/2-1:-1]:
    n /= 2

print n
