import sys

matrix = []
m_app = matrix.append
n, m = map(int, raw_input().split())

if n % 2 != 0:
	print n
	sys.exit(0)

for i in xrange(n):
	m_app(map(int, raw_input().split()))

size = n


stop = False

while True:
	if size % 2 == 1:
		break
	for i in range(m):
		i1 = 0
		i2 = size - 1
		for j in range(size/2):
			if (matrix[i1][i] != matrix[i2][i]):
				stop = True
				break
			i1 += 1
			i2 -= 1

	if stop:
		break

	size >>= 1
	if size == 1:
		break
	


print size