#!/usr/bin/python
import sys
n , m = map(int , raw_input().split())
a = []
for i in range(0,n):
	a.append( map(int ,raw_input().split()) )

c = []
for i in range(0,8):
	c.append(2 ** i)

def ok( x ):
	b = a[:x]
	b.reverse()
	times = 0	
	for i in range(x,n+x,x):	
	   times += 1
	   b.reverse()
	   if  a[i - x:i] != b :
	     return False
	if not (times in c):
		return False
	return True

if ( (n & 1) == 1 ):
	print n
	sys.exit()

for i in range(1 , n / 2 + 1):
	if ( ok( i ) ):
		print i
		sys.exit()
print n

    						     	 	    				