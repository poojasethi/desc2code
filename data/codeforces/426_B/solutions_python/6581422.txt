I=lambda:map(int, raw_input().split())
n, m = I()
g = []
for _ in xrange(n):
    a = I()
    g.append(a)
ans = n

def isOk(g, n, m):
    if n % 2 != 0: return False
    for i in xrange(0, n/2):
        for j in xrange(0, m):
            if g[i][j] != g[n-1-i][j]: return False
    return True

while n > 1:
    if isOk(g, n, m):
        ans = n/2
    else:
        break
    n /= 2
print ans