R=lambda:map(int,raw_input().split())
n,m=R()
a=[R() for _ in [0]*n]
while n and not n%2 and a[:n/2]==a[n-1:n/2-1:-1]:n/=2
print n