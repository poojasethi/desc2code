f = lambda: map(int,raw_input().split())
n,m = f()
x = [f() for i  in range(n)]
while(n % 2 == 0 and x[:n/2] == x[n - 1:n/2 -1: -1]):
    n /= 2
print n