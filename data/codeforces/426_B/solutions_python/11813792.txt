def is_symmetric(matrix, n):
    i = 0
    while i < (n / 2) and matrix[(n / 2) - 1 - i] == matrix[(n / 2) + i]:
        i += 1
    if i == (n / 2):
        return True
    return False

[n, m] = map(int, raw_input('').split(' '))
matrix = [None] * n
for i in xrange(n):
    nums = map(int, raw_input('').split(' '))
    matrix[i] = ''.join(map(str, nums))
max_size = n
while max_size % 2 == 0 and is_symmetric(matrix, max_size):
    max_size /= 2
print max_size
