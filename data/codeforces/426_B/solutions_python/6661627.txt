R = lambda:map(int, raw_input().split())
r, c = R()
a = [R() for i in range(r)]
i,  flag = 1, 0
while i < r:
	j = r / i
	if r % i == 0 and j & (j - 1) == 0:
		flag = 1
		for k in range(1, j):
			if k & 1:
				for m in range(i):
					if a[m] != a[k * i + i - 1 -  m]:
						flag = 0
						break
			else:
				for m in range(i):
					if a[m] != a[k * i + m]:
						flag = 0
						break 
		if flag:
			break
	i += 1
print i