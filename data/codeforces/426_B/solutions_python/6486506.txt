n,m=map(int,raw_input().split())
nn=n
mat=[]
for i in range(n):
    mat.append(raw_input())
i=0
while not n%2 and n>1:
    t=all(mat[i]==mat[n-1-i] for i in range(n/2))
    # print t, i
    if t:
        i+=1
        n/=2
    else:
        break
print nn/(2**i)
