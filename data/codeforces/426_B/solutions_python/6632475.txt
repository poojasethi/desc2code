a=[]
n,m=map(int,raw_input().split())
for i in range(n):
    a.append(map(int,raw_input().split()))

if n%2==1:
    print n
else:
    grens=n
    split=True
    while split and grens%2==0:
        for i in range(grens):
            for j in range(m):
                if a[i][j]!=a[grens-1-i][j]:
                    split=False
        if split:
            grens=grens/2
        
    print grens        

