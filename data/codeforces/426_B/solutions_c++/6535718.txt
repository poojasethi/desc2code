#include<stdio.h>
int n,m;
int a[101][101];
int main()
{
	int mirror(int t);
	int i,j;

	scanf("%d %d",&n,&m);
	for (i=1;i<=n;i++)
	for (j=1;j<=m;j++) scanf("%d",&a[i][j]);
	printf("%d",mirror(n));
	return 0;
}
int mirror(int t)
{
	if (t%2==1) return t;
	int k=t/2;
	int i,j;
	for (i=0;i<k;i++)
	for (j=1;j<=m;j++)
	if (a[i+1][j]!=a[t-i][j]) return t;
	return mirror(k);
}
			 		 			 		  	       	