#include<bits/stdc++.h>
using namespace std;
int main()
{
	int n,m,i,j,f=0,x;
	cin>>n>>m;
	int a[n][m];
	for(i=0;i<n;i++)
	for(j=0;j<m;j++)
	cin>>a[i][j];
	if(n%2)
	cout<<n<<endl;
	else
	{
		x=n;
		while(f==0&&x%2==0)
		{
			for(i=0;i<x;i++)
			{
				for(j=0;j<m;j++)
				if(a[i][j]!=a[x-1-i][j])
				{
					f=1;
					break;
				}
			}
			if(f!=1)
			{
				x=x/2;
			}
		}
		cout<<x<<endl;
	}
	return 0;
}
