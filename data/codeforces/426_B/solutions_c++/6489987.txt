#include<iostream>
#include<cstdio>
using namespace std;
int main()
{
int flag=0,i,j,k,n,l,m,a[102][102];
cin>>n>>m;
for(i=0;i<n;i++)
for(j=0;j<m;j++)
scanf("%d",&a[i][j]);
//if((n&(n-1))!=0)
//{
//cout<<n;
//return(0);
//}
l=n;
while((l!=1)&&(l%2==0))
{
k=l/2;
for(i=0;i<k;i++)
{
for(j=0;j<m;j++)
{if(a[i][j]!=a[2*k-1-i][j])
{flag=1;
break;
}
}
if(flag) break;
}
if(flag) break;
l=l/2;
}
cout<<l;
return(0);
}
