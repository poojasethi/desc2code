#include<iostream>
using namespace std;
int main()
{
int n,m,i,j,a[100][100];
cin>>n>>m;
for(i=0; i<n; i++)
for(j=0; j<m; j++)
cin>>a[i][j];
while(n>1)
{
if(n%2!=0)
break;
else
{
for(i=0; i<n/2; i++)
{
for(j=0; j<m; j++)
if(a[n/2-i-1][j]!=a[i+n/2][j])
break;
if(j!=m)
break;
}
if(i==n/2)
n/=2;
else
break;
}
}
cout<<n;
return 0;
}
