#include <cstdio>
#include <bitset>
using std::bitset;

bitset<128> a[128];
int n,m,l,d;

bool sym()
{
	if (l&1) return false;
	for (int i=0;i+i<l;++i) if (a[i]!=a[l-1-i]) return false;
	return true;
}
int main()
{
	scanf("%d%d",&n,&m);
	for (int i=0;i<n;++i) for (int j=0;j<m;++j)
	{
		scanf("%d",&d);
		if (d==1) a[i].set(j);
	}
	for (l=n;sym();l/=2);
	printf("%d",l);
	return 0;
}