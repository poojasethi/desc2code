#include<iostream>
#include<cstdio>

using namespace std;

int a[101][101];

int f(int n, int m)
{
	if(n%2==1)
		return n;
	int mid = n/2 - 1,flag=0;
	for(int i=0; i<=mid; i++)
	{
		for(int j=0; j<m; j++)
			if(a[i][j] != a[n-i-1][j])
				return n;
	}
	return f(n/2,m);
}

int main()
{
	int n,m;
	cin>>n>>m;
	for(int i=0; i<n; i++)
		for(int j=0; j<m; j++)
			cin>>a[i][j];
	cout<<f(n,m)<<endl;
	return 0;
}
