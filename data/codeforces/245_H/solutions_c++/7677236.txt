#include<bits/stdc++.h>
using namespace std;
#define ll  int
#define get(t) scanf("%d",&t)
int dp[5001][5001];
bool ispal[5001][5001];
int main(){
//ios::sync_with_stdio(0);
string s;
cin>>s;
ll len=s.length();
for(int i=0;i<len;i++){
dp[i][i]=1;
ispal[i][i]=1;
ispal[i+1][i]=1;
}
int j;
for(int cl=2;cl<=len;cl++){
for(int i=0;i<len;i++){
j=i+cl-1;
if(j>=len) break;
ispal[i][j]=ispal[i+1][j-1]&(s[i]==s[j]);
dp[i][j]=dp[i+1][j]+dp[i][j-1]-dp[i+1][j-1]+ispal[i][j];
}
}
ll q;
get(q);
ll l,r;
while(q--){
get(l);
get(r);
l--;r--;
printf("%d\n",dp[l][r]);
}
}
