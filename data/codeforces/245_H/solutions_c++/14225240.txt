#include <bits/stdc++.h>
using namespace std;
string s;
int dp[5050][5050];
bool is[5050][5050];
int main(){
	memset(is,false,sizeof(is));
	cin>>s;int n = s.size();
	for(int i=0;i<s.size();++i)is[i][i]=true,dp[i][i]=1;
	for(int l=1;l<n;++l)
	for(int i=0;i<n;++i){
		if(i+l>=n)break;
		dp[i][i+l]= dp[i][i+l-1] + dp[i+1][i+l];
		if(l!=1)
			dp[i][i+l] -= dp[i+1][i+l-1];
		if(s[i]==s[i+l]  &&(l==1 || is[i+1][i+l-1]) ){
			is[i][i+l]=true;
			++dp[i][i+l];
		}
	}
	int q,a,b;scanf("%d",&q);;
	for(int i=0;i<q;++i){
		scanf("%d %d",&a,&b);
		printf("%d\n",dp[a-1][b-1]);
	}
}
