#include<cstdio>
char s[5001];
int f[5002][5002],p[5001][5001],n;
inline int read()
{
	int c=getchar(),temp=0;
	for(;c<48||57<c;c=getchar());
	do
	{
		temp=(temp<<3)+(temp<<1)+c-48;
		c=getchar();
	}while(48<=c&&c<=57);
	return temp;
}
int main()
{
	for(int c=getchar();c!='\n';c=getchar()) s[++n]=c;
	p[n][n]=1;
	for(int i=n-1;i;--i)
	{
		p[i][i]=1;
		p[i][i+1]=(s[i]==s[i+1]);
		for(int j=i+2;j<=n;++j)
		p[i][j]=p[i+1][j-1]&(s[i]==s[j]);
	}
	for(int i=n;i;--i)
	for(int j=i;j<=n;++j)
	f[i][j]=f[i+1][j]+f[i][j-1]-f[i+1][j-1]+p[i][j];
	for(n=read();n--;) printf("%d\n",f[read()][read()]);
}