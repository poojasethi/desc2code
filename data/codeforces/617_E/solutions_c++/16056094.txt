#include<bits/stdc++.h>

#define FI(i,a,b) for(int i=(a);i<=(b);i++)
#define FD(i,a,b) for(int i=(a);i>=(b);i--)

#define LL long long

using namespace std;

int s[100005],cnt[1100005],n,m,f;
LL ans[100005],t;

int cl,cr=-1;

struct query{
  int l,r,id;
  bool operator<(const query &k) const{
    if(l/300==k.l/300) return r<k.r;
    else return l<k.l;
  }
}q[100005];

int main(){
  scanf("%d %d %d",&n,&m,&f);
  FI(i,1,n) scanf("%d",&s[i]),s[i]^=s[i-1];
  
  FI(i,1,m) scanf("%d %d",&q[i].l,&q[i].r),q[i].l--,q[i].id=i;
  sort(q+1,q+m+1);
  FI(i,1,m){
    while(cr<q[i].r){
      cr++;
      t+=cnt[s[cr]^f];
      cnt[s[cr]]++;
    }
    while(cr>q[i].r){
      cnt[s[cr]]--;
      t-=cnt[s[cr]^f];
      cr--;
    }
    
    while(cl<q[i].l){
      cnt[s[cl]]--;
      t-=cnt[s[cl]^f];
      cl++;
    }
    while(cl>q[i].l){
      cl--;
      t+=cnt[s[cl]^f];
      cnt[s[cl]]++;
    }
    ans[q[i].id]=t;
  }
  FI(i,1,m) printf("%lld\n",ans[i]);
  return 0;
}