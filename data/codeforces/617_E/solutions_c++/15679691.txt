#include <bits/stdc++.h>
using namespace std;

const int N = 100001, SQRT = 320;
#define int long long
typedef long long ll;

struct Query {
	int left, right, id;
	bool operator < (const Query &q) const 
	{
		if (left / SQRT == q.left / SQRT)
			return (right < q.right);
		return left < q.left;
	}
} q[N];

int a[N], l = 0, r = 0, px[N], n, t, k;
ll temp = 0, ans[N], m[2097152 + 1];

main()
{
	cin >> n >> t >> k;
	for (int i = 0; i < n; i++)
		cin >> a[i];
	px[0] = 0;
	for (int i = 0; i < n; i++)
		px[i + 1] = px[i] ^ a[i];
	for (int i = 0; i < t; i++) {
		cin >> q[i].left >> q[i].right;
		q[i].id = i;
	}
	sort(q, q + t);
	m[0] = 1;
	for (int i = 0; i < t; i++) {	
		while (r < q[i].right) r++, temp += m[px[r] ^ k], m[px[r]]++;
			
		while (r > q[i].right) m[px[r]]--, temp -= m[px[r] ^ k], r--;
		
		while (l < q[i].left - 1) m[px[l]]--, temp -= m[px[l] ^ k], l++;
	
		while (l > q[i].left - 1) l--, temp += m[px[l] ^ k], m[px[l]]++;
		ans[q[i].id] = temp;
	}
	for (int i = 0; i < t; i++)
		cout << ans[i] << "\n";
}
