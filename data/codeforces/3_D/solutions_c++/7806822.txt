// http://codeforces.com/problemset/problem/3/D

#include <bits/stdc++.h>

using namespace std;
long long x,y,w,res;
priority_queue < pair<int,int> > q;
string s;

int main()
{
    cin>>s;
    for (int i=0; i<s.size(); i++)
    {
        if (s[i]=='(') w++;
        else if (s[i]==')') w--;
        else
        {
            s[i]=')';
            scanf("%d %d",&x,&y);
            res+=y;
            w--;
            q.push(make_pair(y-x,i));
        }
        if (w<0)
        {
            if (q.empty()) printf("-1") , exit(0);
            s[q.top().second]='(';
            res-=q.top().first;
            w+=2;
            q.pop();
        }
    }
    if (w==0) cout<<res<<endl<<s;
    else cout<<-1;
}
