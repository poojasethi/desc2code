#include <iostream>
#include <queue>
using namespace std;
int i=0,c=0,a,b;
int main()
{
    string s;
    cin>>s;
    long long t=0;
    priority_queue<pair<int,int> > pq;
    for(;i<s.size();i++)
    {
        if(s[i]=='?')
        {
            cin>>a>>b;
            t+=b;
            s[i]=')';
            pq.push(make_pair(b-a,i));
        }
        c-=(s[i]-'(')*2-1;
        if(c<0)
        {
            if(!pq.size())
                break;
            t-=pq.top().first;
            s[pq.top().second]='(';
            pq.pop();
            c+=2;
        }
    }
    if(c)
        cout<<-1;
    else
        cout<<t<<'\n'<<s;
}