#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cmath>
#include <cstdlib>
#include <cstring>
#include <string>
#include <vector>
#include <set>
#include <queue>
using namespace std;

int a, b, c;
string str;
long long t;
priority_queue<pair<int, int> > que;
int main()
{
	c=0;
	t=0;
	cin>>str;

	for(int i=0;i<str.size();++i)
	{
		if(str[i]=='?')
		{
			cin>>a>>b;
			t+=b;
			str[i]=')';
			que.push(make_pair(b-a, i));
		}
		//c-=(str[i]-'(')*2-1;
		if(str[i]=='(')
			++c;
		else
			--c;
		if(c<0)
		{
			if(que.empty())
				break;
			t-=que.top().first;
			str[que.top().second]='(';
			que.pop();
			c+=2;
		}
	}
	if(c!=0)
		cout<<-1<<endl;
	else
		cout<<t<<endl<<str<<endl;
	return 0;
}