#include <bits/stdc++.h>

using namespace std;

struct node {
	int dv, id;
	node(int dv_, int id_) : dv(dv_), id(id_) {}
	bool operator< (const node &n1) const { return dv > n1.dv; }
};

char seq[50050];
priority_queue<node> que;

int main()
{
	int d = 0;
	long long cost = 0;
	cin >> seq;
	int l = 0, r = strlen(seq);
	for (; l < r; l++) {
		if (seq[l] == '(') d -= 1;
		else if (seq[l] == ')') d += 1;
		else {
			int a, b;
			cin >> a >> b;
			seq[l] = ')';
			cost += b;
			que.push(node(a-b, l));
			d += 1;
		}
		if (d > 0) {
			if (que.empty()) break;
			seq[que.top().id] = '(';
			cost += que.top().dv;
			que.pop();
			d -= 2;
		}
	}

	if (l != r || d != 0) 
		cout << -1 << endl;
	else
		cout << cost << endl << seq << endl;

	return 0;
}
