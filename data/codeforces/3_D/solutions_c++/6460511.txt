//gskhirtladze

#include<iostream>
#include<stdio.h>
#include<algorithm>
#include<queue>

#define fi first
#define se second
#define mk make_pair

using namespace std;

priority_queue < pair < int , int > > q;
string s;
long long ans,n,i,a,b,c;
pair < int , int > t;

main()
 {
  cin>>s;
  for (i=0;i<s.size();i++)
   {
    if (s[i] == '(') b++; else
    if (s[i] == ')') b--;
    if (s[i] == '?')
     {
      b--; 
      cin>>a>>c;
      s[i]=')';
      q.push(mk(c-a,i));
      ans+=c;
     }
    if (b < 0)
     {
      if (q.empty()) break;
      t=q.top();
      q.pop();
      b+=2;
      s[t.se]='(';
      ans-=t.fi;
     }
   }
  if (b != 0)
   { cout<<-1<<endl; return 0; }
  cout<<ans<<endl;
  cout<<s<<endl;
 }
