#include <stdio.h>
#include <algorithm>
#include <queue>
using namespace std;
char a[50009];
int l,q,w;
long long ans;
priority_queue<pair<int,int> > qq;
int main()
{
    scanf("%s",a);
    for(int i=0;a[i];i++)
    {
        if(a[i]=='(')l++;
        else if(a[i]==')')l--;
        else
        {
            scanf("%d%d",&q,&w);
            qq.push(make_pair(w-q,i));
            a[i]=')';
            l--;
            ans+=w;
        }
        if(l<0)
        {
            if(qq.empty()){printf("-1\n");return 0;}
            ans-=qq.top().first;
            l+=2;
            a[qq.top().second]='(';
            qq.pop();
        }
    }
    if(l)printf("-1\n");
    else printf("%I64d\n%s\n",ans,a);
    return 0;
}

  	   	  	 								     	 		 	