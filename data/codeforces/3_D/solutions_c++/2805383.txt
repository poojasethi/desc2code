#include<iostream>
#include<queue>
#include<cstdio>
using namespace std;
#define maxn 1000000
char text[maxn];
priority_queue< pair<int,int > > pque;
int main()
{
	int i,b=0,v1,v2;
	__int64 ans=0;
	pair<int,int >st;
	scanf("%s",text);
	while(!pque.empty())pque.pop();
	for(i=0;text[i];i++)
	{
		if(text[i]=='(')b++;
		else if(text[i]==')')b--;
		else
		{
			scanf("%d%d",&v1,&v2);
			text[i]=')';
			b--;
			ans+=v2;
			pque.push(make_pair(v2-v1,i));
		}
		if(b<0)
		{
			if(pque.empty())
				break;
			st=pque.top();
			pque.pop();
			b+=2;
			ans-=st.first;
			text[st.second]='(';
		}
	}
	if(b!=0)puts("-1");
    else
    	printf("%I64d\n%s\n",ans,text);
	return 0;
}
