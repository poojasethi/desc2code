#include <iostream>
#include<cstring>
#include<cstdio>
#include<queue>
#include<algorithm>
#include<map>
#define X first
#define Y second
#define MAXN 50005
using namespace std;
typedef long long LL;
char str[MAXN];
priority_queue<pair<int,int> > Q;
int main()
{
	int i,j,m,n,k,t,count,x,y;
	LL ans;
	bool flag=true;
	scanf(" %s",str);
	for(count=ans=i=0;str[i];i++)
	{
		if(str[i]=='(') count++;
		else if(str[i]==')') count--;
		else
		{
			scanf("%d %d",&x,&y);
			str[i]=')';
			Q.push(make_pair(y-x,i));
			count--;
			ans+=y;
		}
		pair<int,int> p;
		if(count<0)
		{
			if(Q.empty()){flag=false; continue;}
			p=Q.top(); Q.pop();
			ans-=p.X;
			str[p.Y]='(';
			count+=2;
		}
	}
	(count==0&&flag)?printf("%I64d\n%s\n",ans,str):printf("-1\n");
}
