#include<bits/stdc++.h>
#define N 100005
using namespace std;
multiset<pair<int,int> >G;
int a[N],b[N],delta,n,m,i;
long long ans;char s[N],ch[N];
int main(){
  scanf("%s",s+1);n=strlen(s+1);
  while (scanf("%d%d",&a[m+1],&b[m+1])!=EOF) ++m;
  for (m=0,i=1;i<=n;i++){
    delta+=(s[i]=='('?1:-1);
    ch[i]=(s[i]=='('?'(':')');
    if (s[i]=='?') ans+=b[++m],G.insert(make_pair(a[m]-b[m],i));
    if (delta<0){
      if (G.empty()) return puts("-1"),0;
      delta+=2;ans+=(*G.begin()).first;
      ch[(*G.begin()).second]='(';
      G.erase(G.begin());
    }
  }if (delta) return puts("-1"),0;
  printf("%I64d\n",ans);
  for (i=1;i<=n;i++)
    printf("%c",ch[i]);
}