#include <iostream>
#include <cstdio>
#include <queue>
#include <algorithm>
#define f first
#define s second
#define pii pair<ll int,ll int>
#define pr_queue priority_queue
#define ll long long

using namespace std;

ll int p,res;
string str;
pr_queue <pii> Q;

void read()
{
	ll int i,a,b;
	cin >> str ;
	for(i=0 ; i<str.size() ; i++)
	{
		if(str[i]=='(') p++;
		else if(str[i]==')') p--;
		else
		{
			p--;
			cin >> a >> b ;
			Q.push(make_pair(b-a,i));
			res+=b;
			str[i]=')';
		}
		pii k;
		if(p<0)
		{
			if(!Q.empty())
			{
				k=Q.top();
				Q.pop();
				str[k.s]='(';
				res-=k.f;
				p+=2;
				continue;
			}
			break;
		}
	}
	if(p!=0) cout << -1 << endl ;
	else cout << res << endl << str << endl ;
}

int main()
{
	read();
	return 0;
}
