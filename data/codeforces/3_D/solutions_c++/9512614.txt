#include <iostream>
#include<bits/stdc++.h>
using namespace std;
#define mp make_pair
int main() {
    // your code goes here
    string s;
    cin>>s;
    long long c=0,cost=0,x,y;
    priority_queue<pair<int,int> >q;
    for(int i=0;i<s.size();i++)
    {
        if(s[i]=='(')c++;
        else if(s[i]==')')c--;
        else{
            c--;
            s[i]=')';
            cin>>x>>y;
            cost+=y;
            q.push(mp(y-x,i));
        }
        if(c<0){
            if(q.empty())break;
            int val=-q.top().first;
            int u=q.top().second;
            s[u]='(';
            q.pop();
            c+=2;
            cost+=val;
        }
    }
    if(c==0)cout<<cost<<endl<<s;
    else cout<<"-1";
    return 0;
}