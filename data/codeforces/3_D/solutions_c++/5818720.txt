#include <stdio.h>
#include <string.h>
#include <queue>

using namespace std;

int main(){
	int i, l, a, b, ct;
	long long ans;
	char s[50001];
	priority_queue<pair<int, int> > pq;
	gets(s);
	l = strlen(s);
	if(l % 2 || s[0] == ')' || s[l - 1] == '('){
		puts("-1");
		return 0;
	}
	ct = ans = 0;
	for(i = 0; i < l; i++){
		if(s[i] == '(')
			ct++;
		else if(s[i] == ')')
			ct--;
		else{
			scanf("%d %d", &a, &b);
			ans += b;
			s[i] = ')';
			pq.push(make_pair(b - a, i));
			ct--;
		}
		if(ct < 0){
			if(!pq.empty()){
				s[pq.top().second] = '(';
				ans -= pq.top().first;
				pq.pop();
				ct += 2;
			}
		}
	}
	if(ct == 0)
		printf("%I64d\n", ans), puts(s);
	else
		puts("-1");
	return 0;
}

	  		 	   	 	  		  	 	 		