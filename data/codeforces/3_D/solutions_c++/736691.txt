#include<stdio.h>
#include<iostream>
#include<queue>

using namespace std;

string s;

void doit()
{
	cin>>s; int len=s.size();
	
	int cnt=0;
	long long ans=0;
	
	priority_queue<pair<int,int> > Q;
	
	for (int i=0;i<len;i++)
	{
		if (s[i]=='(') cnt++; else
		if (s[i]==')') cnt--; else
		{
			int a,b; scanf("%d%d",&a,&b);
			
			s[i]=')';
			cnt--;
			ans+=b;
			
			Q.push(make_pair(b-a,i));
		}
		
		if (cnt<0)
		{
			if (Q.empty()) break;
			
			s[Q.top().second]='(';
			cnt+=2;
			ans-=Q.top().first;
			
			Q.pop();
		}
	}
	
	if (cnt==0) cout<<ans<<endl<<s<<endl;
		else cout<<-1<<endl;
}

int main()
{
	//freopen("3D.in","r",stdin);
	//freopen("3D.out","w",stdout);
	
	doit();
	
	return 0;
}
