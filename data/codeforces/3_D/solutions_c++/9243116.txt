#include <bits/stdc++.h>
#define maxn 1000009
using namespace std;
char s[maxn];
priority_queue<pair<int,int> >Q;
int main()
{
	long long ans=0;int sum=0,a,b;
	scanf("%s",s);
	for(int i=0;s[i];i++)
	{
		if(s[i]=='(')
			sum++;
		else if(s[i]==')')
			sum--;
		else
		{
			scanf("%d%d",&a,&b);
			s[i]=')';sum--;
			Q.push(make_pair(b-a,i));
			ans+=b;
		}
		if(sum<0)
		{
			if(Q.empty())
				break;
			s[Q.top().second]='(';
			ans-=Q.top().first;
			Q.pop();
			sum+=2;
		}
	}
	if(sum!=0)
		puts("-1");
	else
	{
		printf("%I64d\n",ans);
		puts(s);
	}
	//system("pause");
	return 0;
}