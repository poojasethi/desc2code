#include <stdio.h>
#include <iostream>
#include <queue>
#include <string>
using namespace std;
#define ll long long
string str;
priority_queue < pair<int,int> > que;
ll b=0,p=0;
int main( ){
	cin>>str;
	for (ll i=0,x,y;i<str.size();i++){
		if (str[i]=='(') b++;
		else if (str[i]==')') b--;
		else{
			b--;
			cin>>x>>y;
			p+=y;
			str[i]=')';
			que.push(make_pair(y-x,i));
		}
		pair <int,int> t;
		if (b<0){
			if (que.empty()) break ;
			t=que.top();
			que.pop();
			b+=2;
			str[t.second]='(';
			p-=t.first;
		}
	}
	if (b!=0) cout<<-1<<endl; else cout<<p<<endl<<str<<endl;
	return 0;
}
