#include<iostream>
#include<cstdio>
#include<queue>
using namespace std;
char s[50010];
int main()
{
	scanf("%s",s);
	priority_queue<pair<int,int> > Q;
	int top=0;
	long long cost=0;
	for(int i=0;s[i];i++)
	{
		if(s[i] == '(')
		{
			top++;
		}
		else if(s[i] == ')')
		{
			top--;
		}
		else
		{
			int a,b;
			scanf("%d%d",&a,&b);
			s[i] = ')';
			cost += b;
			top--;
			Q.push(pair<int,int>(b-a,i));
		}
		if(top<0)
		{
			if(Q.empty())
			{
				printf("-1");
				return 0;
			}
			pair<int,int> p=Q.top(); Q.pop();
			s[p.second]='(';
			cost -= p.first;
			top += 2;
		}
	}
	if(top == 0)
	{
		printf("%I64d\n%s\n",cost,s);
	}
	else
	{
		printf("-1\n");
	}
	return 0;
}
