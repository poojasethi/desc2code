#include <stdio.h>
#include <string.h>
#include <queue>
using namespace std;

#define N 50500

char s[N];
priority_queue < pair<int, int> > pq;

int main() {
	scanf("%s", &s);
	int n = strlen(s), sum = 0, x, y;
	long long ans = 0;
	for (int i = 0; i < n; i ++) {
		if (s[i] == '(') sum ++;
		else if (s[i] == ')') sum --;
		else {
			scanf("%d %d", &x, &y);
			s[i] = ')';
			sum --; ans += y;
			pq.push(make_pair(y - x, i));
		}
		if (sum < 0) {
			if (pq.empty()) break;
			ans -= pq.top().first;
			s[pq.top().second] = '(';
			pq.pop(); sum += 2;
		}
	}
	if (sum) puts("-1");
	else printf("%I64d\n%s\n", ans, s);
	return 0;
}
