#include <iostream>
#include <queue>
#include <string>
using namespace std;

priority_queue< pair< long long ,long long > > q;

string str;
long long b=0,p=0,i,x,y;


int main(){

	cin >> str;
	
	for (i=0; i<(long long)str.size(); i++){
		if (str[i]=='(') b++;else
		if (str[i]==')') b--;else{
			cin >> x >> y;
			str[i]=')';
			p+=y;
			b--;
			q.push(make_pair(y-x,i));
		}
		if (b<0){
			if (q.empty()) break;
			pair< long long,long long > t=q.top();
			q.pop();
			b+=2;
			p-=t.first;
			str[t.second]='(';
		}
	}
	if (b!=0) cout << "-1" << endl; else cout << p << "\n" << str;
	
	return 0;
}
