#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<queue>
using namespace std;
string s;
priority_queue<pair<long long,long long> > q;
int main()
{
	cin>>s;
		long long tot=0;
		long long ans=0;
		for(int i=0;i<s.size();i++)
		{
			long long a,b;
			if(s[i]=='(') tot++;
			else if(s[i]==')') tot--;
			else
			{
				cin>>a>>b;
				tot--;
				ans+=b;
				s[i]=')';
				q.push(make_pair(b-a,i));
			}
			if(tot<0)
			{
				if(q.empty()) break;
				pair<long long,long long> t=q.top();
				q.pop();
				ans-=t.first;
				s[t.second]='(';
				tot+=2;
			}
		}
		if(tot) {puts("-1");}
		else
		{
		cout<<ans<<endl;
		cout<<s<<endl;
		}
	return 0;
}
