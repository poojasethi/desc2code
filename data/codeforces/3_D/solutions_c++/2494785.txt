#include<cstdio>
#include<queue>
#include<cstring>
using namespace std;
char s[101000];
long long n, c, a, b, ans;
pair<int,int> t;
priority_queue< pair<int,int> > Q;
int main()
{
    scanf("%s",s), n=strlen(s);
    for (int i=0;i<n;i++)
    {
        if (s[i]=='(')c++; else if(s[i]==')')c--;
        else
        {
            scanf("%I64d%I64d",&a,&b), ans+=b;
            s[i]=')', c--, Q.push(make_pair(b-a,i));
        }
        if (c<0)
        {
            if (Q.empty()) break;
            t=Q.top(), Q.pop(), ans-=t.first, s[t.second]='(', c+=2;
        }
    }
    if (c) puts("-1");
    else printf("%I64d\n%s\n",ans,s);
    return 0;
}
