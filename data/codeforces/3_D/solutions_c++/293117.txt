#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <queue>
#include <algorithm>

using namespace std;

char s[100020];
priority_queue<pair<long long,int> > q;

int main(){
	long long x,y,ret=0;
	int st=0,id;
	
	gets(s);
	int len=strlen(s);
	if(len&1){
		puts("-1");
		return 0;
	}
	for(int i=0;i<len;i++){
		if(s[i]=='('){
			st++;
		}else if(s[i]==')'){
			st--;
		}else{
			scanf("%I64d%I64d",&x,&y);
			ret+=y;
			q.push(make_pair(y-x,i));
			s[i]=')';
			st--;
		}
		if(st<0){
			if(q.empty()) break;
			x=q.top().first;
			id=q.top().second;
			q.pop();
			s[id]='(';
			ret-=x;
			st+=2;
		}
	}
	if(st!=0){
		puts("-1");
		return 0;
	}
	printf("%I64d\n",ret);
	puts(s);
	
	return 0;
}
