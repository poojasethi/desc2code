#include <iostream>
#include <queue>
#include <string>
using namespace std;
typedef pair<int,int> ii;
int c=0,a,b;
int main()
{
    string s;
    cin>>s;
    long long t=0;
    priority_queue<ii> pq;
    for(int i=0;i<s.size();i++)
    {
        if(s[i]=='?')
        {
            cin>>a>>b;
            t+=b;
            s[i]=')';
            c--;
            pq.push(ii(b-a,i));
        }
        else
            c-=(s[i]-'(')*2-1;
        if(c<0)
        {
            if(!pq.size())
                break;
            t-=pq.top().first;
            s[pq.top().second]='(';
            pq.pop();
            c+=2;
        }
    }
    if(c)
        cout<<-1;
    else
        cout<<t<<'\n'<<s;
}