#include<bits/stdc++.h>
using namespace std;
typedef pair<int,int> pii;
int main()
{
	int i,cnt=0,a,b;
	long long ans=0;
	priority_queue<pii> heap;
	pii t;
	string s;
	cin>>s;
	for(i=0;i<s.size();i++)
	{
		if(s[i]=='(')
			cnt++;
		else if(s[i]==')')
			cnt--;
		else if(s[i]=='?')
		{
			s[i]=')';
			cin>>a>>b;
			ans+=b;
			heap.push(make_pair(b-a,i));
			cnt--;
		}
		while(cnt<0)
		{
			if(heap.empty())
				break;
			t=heap.top();
			ans-=t.first;
			heap.pop();
			s[t.second]='(';
			cnt+=2;
		}
		if(cnt<0)
			break;
	}	
	if(cnt)
		cout<<"-1\n";
	else
	{
		cout<<ans<<endl;
		cout<<s<<endl;
	}
	return 0;
}
