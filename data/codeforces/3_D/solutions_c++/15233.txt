#include<cstdio>
#include<queue>
#define pii pair<int,int>
using namespace std;
char cmd[55555];
int main(){
    scanf("%s",cmd);
    char*p;
    int cnt=0;
    long long cost=0;
    priority_queue<pii,vector<pii>,greater<pii> >pq;
    for(p=cmd;*p;++p){
        if(*p=='(')++cnt;
        else if(*p==')')--cnt;
        else{
            int a,b;
            scanf("%d%d",&a,&b);
            --cnt;
            *p=')';
            cost+=b;
            pq.push(pii(a-b,p-cmd));
        }
        if(cnt<0){
            if(pq.empty())break;
            cnt+=2;
            cost+=pq.top().first;
            cmd[pq.top().second]='(';
            pq.pop();
        }
    }
    if(cnt)puts("-1");
    else printf("%I64d\n%s",cost,cmd);
    return 0;
}