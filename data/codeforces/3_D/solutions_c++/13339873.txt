#include <iostream>
#include <string>
#include <queue>

#define PLI pair< long long,int >

using namespace std;

string s,ans;
long long cost;
priority_queue< PLI > Q;

int main(){
	cin >> s;
	int pointer = 0;
	for(int i=0;i < s.size();i++){
		if(s[i] == '('){
			ans += '(';
			pointer++;
		}
		else if(s[i] == ')'){
			ans += ')';
			pointer--;
		}
		else{
			int a,b; 
			cin >> a >> b;
			cost += b;
			ans += ')';
			Q.push(make_pair(b - a,i));
			pointer--;
		}
		if(pointer < 0){
			if(Q.size() == 0){	break;	}
			ans[Q.top().second] = '(';
			cost -= Q.top().first;
			Q.pop();
			pointer += 2;
		}
	}
	if(pointer != 0){
		cout << -1 << endl;
		return 0;
	}
	cout << cost << endl << ans << endl;
}