#include<cstdio>
#include<queue>
using namespace std;
int main(){
    long long a=0;
    char s[51200];int c1,c2,z;
    gets(s);
    priority_queue<pair<int, char* > > q;
    for(char *p =s;*p;++p){
        if(*p=='?'){
            scanf("%d%d",&c1,&c2);
            *p=')';
            a+=c2;
            q.push(make_pair(c2-c1,p));
            z--;
        }else *p=='('?++z:--z;
        while(z<0){
            if(q.empty()){
                puts("-1");return 0;
            }
            a-=q.top().first;* q.top().second = '(';
            z+=2;
            q.pop();
        }
    }
    if(z)puts("-1");
    else{
        printf("%I64d\n",a);
        puts(s);
    }//while(1);
    return 0;
}
