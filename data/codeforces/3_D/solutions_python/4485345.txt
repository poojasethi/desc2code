from heapq import *
cost, s = 0, []
count, h = 0, []

for i, c in enumerate(raw_input()):
  if c == '?':
    c = ')'
    x, y = map(int, raw_input().split())
    cost += y
    heappush(h, (x - y, i))
  s.append(c)

  if c == '(':
    count += 1
  else:
    count -= 1
    if count < 0:
      if not h:
        break
      else:
        count += 2
        x, y = heappop(h)
        cost += x
        s[y] = '('

if count:
  print '-1'
else:
  print cost
  print ''.join(s)
