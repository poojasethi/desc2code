from heapq import *

def F():
	global c, r
	if not h:
		print -1
		quit()
	d, j = heappop(h)
	r += d
	c += 2
	s[j] = '('

s = list(raw_input())
h = []
c = 0
r = 0
for i, v in enumerate(s):
	if v == '(':
		c += 1
	elif v == ')':
		c -= 1
	else:
		x, y = map(int, raw_input().split())
		r += y
		c -= 1
		heappush(h, (x - y, i))
		s[i] = ')'
	if c < 0:
		F()
while c < 0:
	F()
if c:
	print -1
else:
	print r
	print ''.join(s)