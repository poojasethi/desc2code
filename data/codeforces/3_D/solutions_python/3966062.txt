from heapq import *

t, s = 0, []
a, h = 0, []
for i, c in enumerate(raw_input()):
	if c == '?':
		c = ')'
		x, y = map(int, raw_input().split())
		a += y
		heappush(h, (x - y, i))

	s.append(c)
	if c == '(': t += 1
	else:
		if t == 0:
			if not h:
				t = -1
				break
			t = 1
			x, y = heappop(h)
			a += x
			s[y] = '('
		else: t -= 1

if t: print '-1'
else:
	print a
	print ''.join(s)