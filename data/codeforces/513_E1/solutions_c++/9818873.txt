#include<iostream>
#include<cstring>
#include<stdio.h>
#include<assert.h>
#include<algorithm>
#include<cmath>
#include<vector>
#include<queue>
#include<stack>
#include<map>
#include<set>
#define mp make_pair
#define pb push_back
#define MAX(a,b) ((a)>(b)?(a):(b))
#define MIN(a,b) ((a)<(b)?(a):(b))
#define F first
#define S second
#define ll long long
#define pp pair<ll,ll>
#define SS system("pause")
#define INF 200000000
#define vec vector<int>
#define O 1000000000000000000ll
using namespace std;
const int N=404;
int n,m,i,j,k,a[N],dp[N][N],ans;
int p[N],q[N],s[N];


int main()
{scanf("%d%d",&n,&m);
 for(i=1;i<=n;i++)scanf("%d",&a[i]);
 for(i=1;i<=n;i++)s[i]=s[i-1]+a[i];


 for(k=2;k<=m;k++){
    p[0]=q[0]=-INF;
    for(i=1;i<=n;i++){
        p[i]=q[i]=-INF;
        for(j=1;j<=i;j++)
            p[i]=MAX(p[i],dp[j][i]+s[i]-s[j-1]),
            q[i]=MAX(q[i],dp[j][i]-s[i]+s[j-1]);
        p[i]=MAX(p[i-1],p[i]);
        q[i]=MAX(q[i-1],q[i]);

        //cout<<i<<' '<<p[i]<<' '<<q[i]<<endl;SS;
    }

    for(i=1;i<=n;i++)
        for(j=1;j<=i;j++){
            dp[j][i]=MAX(p[j-1]-s[i]+s[j-1],q[j-1]+s[i]-s[j-1]);
            //cout<<k<<' '<<j<<' '<<i<<' '<<dp[j][i]<<endl;SS;
    }
 }

 for(i=1;i<=n;i++)
    for(j=i;j<=n;j++)ans=MAX(ans,dp[i][j]);
 cout<<ans<<endl;
 return 0;
}
