#include<cmath>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<iostream>
#include<algorithm>

#ifdef WIN32
#define orz "%I64d"
#else
#define orz "%lld"
#endif
#define N 410
#define K 55
#define RG register

using namespace std;
typedef long long LL;

int n,a[N],s[N],k,f[N][K][N],ans;
int wk(RG int x)
{
	return x>0?x:-x;
}
int mx(RG int a,RG int b)
{
	return a>b?a:b;
}
int mn(RG int a,RG int b)
{
	return a<b?a:b;
}
int main()
{
    scanf("%d %d",&n,&k);
    for (RG int i=1;i<=n;i++)
	{
		scanf("%d",&a[i]);
		s[i]=s[i-1]+a[i];
	}
    for (RG int i=1;i<=n;i++)
        for (RG int j=2;j<=mn(i,k);j++)
            for (RG int l=1;l<=i-j+1;l++)
			{ 
				for (RG int t=1;t<=i-l-j+2;t++)
					f[i][j][l]=mx(f[i][j][l],f[i-l][j-1][t]+wk(s[i]-s[i-l]-s[i-l]+s[i-l-t]));
				if (j==k)
					ans=mx(ans,f[i][j][l]);
            }
    printf("%d",ans);
	return 0;
}

