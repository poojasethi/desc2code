#include <bits/stdc++.h>
#define pii pair < int ,int >
#define fi first
#define se second
using namespace std;
int sum[404][404], a[404],dp[54][404][404];
inline int abs(const int x)
{
    if(x < 0)
        return -x;
    return x;
}
int main()
{
    #ifndef ONLINE_JUDGE
        freopen("date.in","r",stdin);
        freopen("date.out","w",stdout);
    #endif // ONLINE_JUDGE
    cin.sync_with_stdio(false);
    int n, k;
    cin >> n >> k;
    for(int i = 1;i <= n; ++i)
        cin >> a[i];
    for (int Left = 1; Left <= n; ++Left)
        for (int Right = Left; Right <= n; ++Right)
        {
            sum[Left][Right] = sum[Left][Right - 1] + a[Right];
            dp[1][Left][Right] = 0;
        }
    for (register int i=2;i<=k; ++i)
        for (register int Left=1;Left<=n;++Left)
            for (register int Right=Left;Right <= n; ++Right)
            {
                dp[i][Left][Right] = -100000004;
                int s =  sum[Left][Right];
                for (int ind = 1; ind < Left; ++ind)
                    dp[i][Left][Right] = max(dp[i][Left][Right], dp[i - 1][ind][Left - 1] + abs(sum[ind][Left-1] - s));
            }
    int sol = -100000004;
    for (int Left = 1; Left <= n; ++Left)
        for (int Right = Left; Right <= n; ++Right)
            sol = max(sol, dp[k][Left][Right]);
    cout<<sol<<"\n";
    return 0;
}
