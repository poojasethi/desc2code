#include<stdio.h>
#include<iostream>
#define INF 1000000000
using namespace std;
int N,K,a;
long long s[410],d[410][410][60],p[410][60],m[410][60],ret;

int main() {
//    freopen("input.in","r",stdin);
    scanf("%d%d",&N,&K);
    for(int i=1;i<=N;++i) {
        scanf("%d",&a);
        s[i] = s[i-1] + a;
    }

    for(int i=1;i<=N;++i) {
        for(int k=1;k<=K;++k) {
            m[i][k] = -INF;
            p[i][k] = -INF;
        }
    }

    for(int i=1;i<=N;++i) {
        for(int j=i;j<=N;++j) {
            m[j][1] = max(m[j][1], s[i-1] - s[j]);
            p[j][1] = max(p[j][1], s[j] - s[i-1]);
            m[j+1][1] = max(m[j][1], m[j+1][1]);
            p[j+1][1] = max(p[j][1], p[j+1][1]);
            for(int k=2;k<=min(K,i);++k) {
                d[i][j][k] = max(m[i-1][k-1]+s[j]-s[i-1],p[i-1][k-1]-s[j]+s[i-1]);
                m[j][k] = max(m[j][k],d[i][j][k] - s[j]+s[i-1]);
                m[j+1][k] = max(m[j][k],m[j+1][k]);
                p[j][k] = max(p[j][k],d[i][j][k] + s[j]-s[i-1]);
                p[j+1][k] = max(p[j][k],p[j+1][k]);
            //    cout<<i<<" "<<j<<" "<<k<<": "<<d[i][j][k]<<"\n";
            }
            ret = max(ret,d[i][j][K]);
        }
    }
    cout<<ret<<"\n";
    return 0;
}
