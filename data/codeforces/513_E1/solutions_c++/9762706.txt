#include <cstdio>
#include <algorithm>
using namespace std;
int n,m,i,j,k,r,a,x,s[402],f[402][52][2];
int main() {
  scanf("%d%d",&n,&m);
  for (i=1; i<=n; i++) {
    scanf("%d",&a);
    s[i]=s[i-1]+a;
    f[i][1][0]=-a;
    f[i][1][1]=a;
    for (j=i-2; j>=0; j--) {
      x=s[i]-s[j];
      f[i][1][0]=max(f[i][1][0],-x);
      f[i][1][1]=max(f[i][1][1],x);
    }
    if (i>1) for (k=0; k<2; k++) f[i][j][k]=max(f[i][j][k],f[i-1][j][k]);
    for (j=2; j<=i && j<=m; j++) {
      f[i][j][0]=max(f[i-1][j-1][0],f[i-1][j-1][1]-2*a);
      f[i][j][1]=max(f[i-1][j-1][0]+2*a,f[i-1][j-1][1]);
      if (j==m) r=max(r,max(f[i-1][j-1][0]+a,f[i-1][j-1][1]-a));
      if (j<i) for (k=0; k<2; k++) f[i][j][k]=max(f[i][j][k],f[i-1][j][k]);
      for (k=i-2; k>=j-1; k--) {
        x=s[i]-s[k];
        f[i][j][0]=max(f[i][j][0],max(f[k][j-1][0],f[k][j-1][1]-2*x));
        f[i][j][1]=max(f[i][j][1],max(f[k][j-1][0]+2*x,f[k][j-1][1]));
        if (j==m) r=max(r,max(f[k][j-1][0]+x,f[k][j-1][1]-x));
      }
    }
  }
  printf("%d\n",r);
  return 0;
}
