#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <vector>
#include <string>
#include <iostream>
#include <cmath>
#include <cctype>
#include <sstream>
#include <algorithm>
#include <iomanip>
#include <set>
#include <queue>

using namespace std;

const int maxn = 410;
const int maxk = 55;

int n, k;
int a[maxn], s[maxn];
int d[maxn][maxn][maxk];

int main()
{
    int i, j;

    cin >> n >> k;
    for (i = 1; i <= n; i++) {
        cin >> a[i];
        s[i] = s[i-1] + a[i];
    }

    memset(d, 0xff, sizeof(d));
    for (i = 1; i <= n; i++)
        for (j = i; j <= n; j++) {
            d[i][j][1] = 0;
        }

    for (int sc = 1; sc < k; sc++) {
        for (i = 1; i <= n; i++)
            for (j = i; j <= n; j++) {
                if (d[i][j][sc] == -1) continue;
                int sum = 0;
                for (int r = j+1; r <= n; r++) {
                    sum += a[r];
                    int cost = d[i][j][sc] + abs(sum - (s[j]-s[i-1])); 
                    if (cost > d[j+1][r][sc+1]) {
                        d[j+1][r][sc+1] = cost;
                    }
                }
            }
    }

    int best = 0;
    for (i = 1; i <= n; i++)
        for (j = i; j <= n; j++)
            if (d[i][j][k] > best) best = d[i][j][k];

    cout << best << endl;

    return 0;
}
