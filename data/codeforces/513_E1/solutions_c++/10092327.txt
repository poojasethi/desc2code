#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <vector>
#include <ctime>
#define fi first
#define se second
#define PA pair<int,int>
#define VI vector<int>
#define VP vector<PA >
#define mk(x,y) make_pair(x,y)
#define N 410
#define inf 100000000
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,u;
int a[N],f[N],g[N],h[N],w[N];
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,n) scanf("%d",&a[i]),a[i]+=a[i-1];
	For(i,0,n) f[i]=g[i]=-inf;
	For(i,1,n)For(j,i,n) {
		int zhi=a[j]-a[i-1];
		f[j]=max(f[j],-zhi);
		g[j]=max(g[j],zhi);
	}
	For(i,2,m) {
		int an=-inf;
		For(j,0,n) h[j]=w[j]=-inf;
		For(j,0,n)For(k,j+1,n)For(u,k,n) {
			int zhi=a[u]-a[k-1];
			an=max(an,f[j]+zhi);
			an=max(an,g[j]-zhi);
			h[u]=max(h[u],f[j]+zhi-zhi);
			h[u]=max(h[u],g[j]-zhi-zhi);
			w[u]=max(w[u],f[j]+zhi+zhi);
			w[u]=max(w[u],g[j]-zhi+zhi);
		}
		For(j,0,n) f[j]=h[j],g[j]=w[j];
		if (i==m) printf("%d\n",an);
	}
	return 0;
}
