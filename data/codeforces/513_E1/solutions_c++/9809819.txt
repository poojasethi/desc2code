#include <iostream>
#include <cmath>

using namespace std;

int n,k;
int sol[500][500][60];
int a[500];

int absolut(int x)
{
  if (x<0) return -x;
  return x;
}

int main()
{
  cin>>n>>k;
  for (int i=1;i<=n;i++)
    cin>>a[i];
  int soltotal=0;
  for (int i=1;i<=n;i++) {
    int si=0;
    for (int ii=i;ii>1;ii--) {
      si+=a[ii];
      int j=ii-1;
      int sj=0;
      for (int jj=j;jj>=1;jj--) {
	sj+=a[jj];
	for (int d=1;d<=jj and d+1<=k;d++)
	  sol[ii][i][d+1]=max(sol[ii][i][d+1],sol[jj][j][d]+absolut(si-sj));
      }
      soltotal=max(soltotal,sol[ii][i][k]);
    }
  }
  cout<<soltotal<<endl;
}
