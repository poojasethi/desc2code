#include <stdio.h>
#include <algorithm>
#define NMax 410
#define KMax 55

using namespace std;

int N, K, Rez;
int S[NMax], v[NMax];
int T[NMax][KMax][NMax];

int main() {

    //freopen("in", "r", stdin);

    scanf("%d%d", &N, &K);
    for ( int i = 1; i <= N; ++ i ) scanf("%d", &v[i]);

    for ( int i = 1; i <= N; ++ i )
        S[i] = S[i - 1] + v[i];

    for ( int i = 1; i <= N; ++ i)
        T[i][1][1] = 0;

    for ( int i = 2; i <= N; ++ i )
        for ( int j = 2; j <= K; ++ j )
            for ( int k = 2; k <= i; ++ k ) {

                for ( int l = j - 1; l < k; ++ l ) {
                    T[i][j][k] = max(T[i][j][k], T[k - 1][j - 1][l] + abs(S[i] - 2 * S[k - 1] + S[l - 1]));
                }
            }

    for ( int i = 1; i <= N; ++ i )
    for ( int k = 1; k <= N; ++ k )
        Rez = max(Rez, T[i][K][k] );

    printf("%d\n", Rez);

    return 0;
}
