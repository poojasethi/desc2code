#include<bits/stdc++.h>
#define MA(a,b) ((a)>(b)?(a):(b))
#define MI(a,b) ((a)<(b)?(a):(b))
#define AB(a) (-(a)<(a)?(a):-(a))
#define X first
#define Y second
#define mp make_pair
#define pb push_back
#define pob pop_back
#define ep 0.000001
#define pi 3.1415926535897932384626433832795
#define na(x) ((x)<P?(x):(x)-P)
#define MI(a,b) ((a)<(b)?(a):(b))
using namespace std;
const int N=409;
const long long P=1000000007;
int n,kk;
int a[N];
int d1[N][N];
int d2[N][N];
int d[N][N];

int main(){
   // freopen("text","r",stdin);
   cin>>n>>kk;
    for (int i=1;i<=n;i++) cin>>a[i],a[i]+=a[i-1];
    for (int j=0;j<=n;j++)
    for (int k=0;k<=kk;k++)
        d1[j][k]=-1000000000,
        d2[j][k]=-1000000000;
    for (int i=1;i<=n;i++)
    for (int j=i;j<=n;j++)
    d1[j][1]=MA(d1[j][1],+a[i-1]-a[j]);
    for (int i=1;i<=n;i++)
    for (int j=i;j<=n;j++)
    d2[j][1]=MA(d2[j][1],-a[i-1]+a[j]);
    for (int j=1;j<=n;j++)
    d2[j][1]=MA(d2[j][1],d2[j-1][1]),
    d1[j][1]=MA(d1[j][1],d1[j-1][1]);

    for (int k=2;k<=kk;k++)
    {
        for (int i=1;i<=n;i++)
        for (int j=i;j<=n;j++)
        d[i][j]=+a[j]-a[i-1]+d1[i-1][k-1],
        d[i][j]=MA(d[i][j],-a[j]+a[i-1]+d2[i-1][k-1]);
        for (int i=1;i<=n;i++)
        for (int j=i;j<=n;j++)
        d1[j][k]=MA(d1[j][k],+a[i-1]-a[j]+d[i][j]),
        d2[j][k]=MA(d2[j][k],-a[i-1]+a[j]+d[i][j]);
    for (int j=1;j<=n;j++)
    d2[j][k]=MA(d2[j][k],d2[j-1][k]),
    d1[j][k]=MA(d1[j][k],d1[j-1][k]);

    }
    int A=0;
      for (int i=1;i<=n;i++)
        for (int j=i;j<=n;j++)
      A=MA(A,d[i][j]);
      cout<<A<<endl;
      return 0;
}
