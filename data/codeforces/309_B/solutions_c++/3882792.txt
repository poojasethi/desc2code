#include <cstdio>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <vector>
#include <string>
using namespace std;

#define FOR(it, c) for(__typeof((c).begin()) it = (c).begin(); it != (c).end(); it++)
#define SZ(c) ((int)(c).size())

int n, r, c;
char s[5000005];
vector<string> p;
int sum[1000005];
int a[1000005];
int to[1000005];
int cto[1000005];
int main(void) {
	scanf("%d%d%d", &n, &r, &c);
	int l=0;
	for(int i=0;i<n;i++) {
		scanf("%s", s);
		l = strlen(s);
		p.push_back(s);
		a[i] = l;
		sum[i] = i? sum[i-1]+l:l;
	}
	
	for(int i=0,j=0;i<n;i++) {
		while(j<i || (j<n && sum[j]-sum[i]+a[i]+(j-i)<=c)) ++j;
		cto[i] = j;
		to[i] = i;
	}

	to[n] = cto[n] = n;
	while(r) {
		if(r%2) for(int i=0;i<n;i++) to[i] = cto[to[i]];
		for(int i=0;i<n;i++) cto[i] = cto[cto[i]];
		r/=2;
	}
	int val=0, mx=0;
	for(int i=0;i<n;i++)
		if(to[i]-i>val) {
			val=to[i]-i;
			mx=i;
		}
	int y=-1;
	for(int i=mx;i<to[mx];i++) {
		if(SZ(p[i])+1+y>c) {
			puts("");
			y=-1;
		}
		if(y>=0) printf(" ");
		printf("%s", p[i].c_str());
		y=y+1+SZ(p[i]);
	}
	puts("");
	return 0;
}
