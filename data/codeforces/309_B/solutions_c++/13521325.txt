#include <iostream>
#include <cstring>
#include <cstdio>
#include <cmath>
#include <algorithm>
using namespace std;
#define N 2000050
char b[N*5];int n,m,p,ans,sta,wz[N][2],ma[N];bool c[N],d[N];
void Get()
 {
    getchar();gets(b);
    int len=strlen(b),now=1;b[len]=' ';
    for (int i=1;i<=len;i++)
     if (b[i]==' ') wz[now][1]=i-1,wz[++now][0]=i+1;
 }
void Pretreat()
 {
    int now=0;
    for (int i=1;i<=n;i++)
     {
        while (now<n&&wz[now+1][1]-wz[i][0]+1<=p) now++;
        ma[i]=now;d[i]=now>=i;
     }
 }
void Solve()
 {
    for (int i=1;i<=n;i++)
     if (!c[i]&&d[i])
      {
         int now=i,k=0,l=i;
         while (k<m&&now<=n&&d[now])
           now=ma[now]+1,k++;
         while (l<=n&&!c[l]&&d[l])
          {
             if (now-l>ans) ans=now-l,sta=l;
             c[l]=1;l=ma[l]+1;k--;
             if (k<m&&now<=n)
               now=ma[now]+1,k++;
          }
      }
 }
void Put()
 {
    while ((m--)&&sta<=n&&d[sta])
     {
        for (int i=wz[sta][0];i<=wz[ma[sta]][1];i++)
          putchar(b[i]);
        puts("");sta=ma[sta]+1;
     }
 }
int main()
 {
    cin >>n>>m>>p;
    Get();Pretreat();Solve();Put();
    return 0;
 }