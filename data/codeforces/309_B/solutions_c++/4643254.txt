#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 1000010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,r,c,x,ma,an1,an2,len;
int l[N],f[N][21],s[N],L[N],R[N];
char p[N*6];
int main() {
	scanf("%d%d%d",&n,&r,&c);
	For(i,1,n) {
		scanf("%s",p+len+1);
		l[i]=strlen(p+len+1);
		s[i]=s[i-1]+l[i];
		L[i]=len+1;
		len+=l[i]+1;
		R[i]=len-1;
	}
	j=n;
	for (i=n;i;i--) {
		for (;j>=i&&s[j]-s[i-1]+j-i>c;j--);
		if (j>=i) f[i][0]=j;
	}
	For(i,1,20)For(j,1,n) if (f[j][i-1]) f[j][i]=max(f[f[j][i-1]+1][i-1],f[j][i-1]);
	For(i,1,n) if (f[i][0]) {
		for (k=r,x=i,j=20;j>=0;j--)
		if (k>=(1<<j)&&f[x][0])
		x=f[x][j]+1,k-=1<<j;
		if (x-i>ma) {
			ma=x-i;
			an1=i,an2=x-1;
		}
	}
	if (ma) {
		k=-1;
		For(i,an1,an2) {
			if (k+l[i]+1>c) printf("\n"),k=-1;
			if (k>=0) printf(" ");
			k+=l[i]+1;
			For(j,L[i],R[i]) printf("%c",p[j]);
		}
		printf("\n");
	}
	//for(;;);
	return 0;
}
