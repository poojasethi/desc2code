#include <cstdio>
#include <algorithm>
#include <string>
using namespace std;

const int N = (1e6)+3;
string s[N];
char buf[(int)(5e6)+3];
int inext[N];
int next[N];
int last[N];

int main()
{
	int n, r, c;
	scanf("%d%d%d", &n, &r, &c);
	for(int i = 0; i < n; ++i) {
		scanf("%s", buf);
		s[i] = buf;
		last[i] = i;
	}
	
	for(int i = 0, j = 0, sl = 0; i < n; ++i) {
		while(j < n && sl + (i < j) + (int)s[j].size() <= c) {
			sl += (i < j) + s[j].size();
			++j;
		}
		inext[i] = next[i] = j;
		
		if(i == j) ++j;
		else sl -= s[i].size() + (i+1 < j);
	}
	next[n] = n;
	
	while(r) {
		if(r & 1) {
			for(int i = 0; i < n; ++i)
				last[i] = next[last[i]];
		} 
		for(int i = 0; i < n; ++i)
			next[i] = next[next[i]];
		r >>= 1;
	}
	
	
	
	int bi = 0;
	for(int i = 1; i < n; ++i)
		if(last[bi]-bi < last[i]-i)
			bi = i;
	
	int e = last[bi];
	while(bi < e) {
		int ce = inext[bi];
		printf("%s", s[bi].c_str());
		++bi;
		while(bi < ce) {
			printf(" %s", s[bi].c_str());
			++bi;
		}
		printf("\n");
	}
	return 0;
}
