#include <cstdio>
#include <map>
#include <algorithm>

using namespace std;

map < int, int > sum, val;

void add(int u, int am) {	
	val[u] += am;
	while (u >= 1) {
		sum[u] += am;
		u /= 2;
	}
}

double decay(int h) {
	double ans = 0;
	double prob = 1;
	int maxv = 0;
	int u = 1;

	int level = 0;

	while (true) {
		if (level == h) { //folha
			ans += prob * max(maxv, val[u]);
			break;
		}

		prob /= 2.0;

		level++;

		int l = 2*u, r = 2*u + 1;
		if (sum[l] + val[u] < sum[r])
			swap(l, r); //agora l eh o mais pesado

		ans += prob * max(maxv, sum[l] + val[u]);
		maxv = max(maxv, val[u] + sum[r]);
		u = l;
	}

	return ans;
}

int main() {
	int h, op; scanf("%d %d", &h, &op);
	while (op--) {
		char s[50]; scanf("%s", s);
		if (s[0] == 'a') {
			int u, am; scanf("%d %d", &u, &am);
			add(u, am);
		}
		else {
			printf("%.9f\n", decay(h));
		}
	}

	return 0;
}
