#include <cstdio>
#include <cstring>
#include <algorithm>
#include <cmath>
#include <map>

using namespace std;

map<int, double> tot, sig;
int h, m;

char token[10];

double calc(int x, double t) {
	if (tot[x] <= t) return t;
	return 0.5 * (calc(x + x, max(t, sig[x] + tot[x + x + 1])) + calc(x + x + 1, max(t, sig[x] + tot[x + x])));
}

int main() {
	scanf("%d%d", &h, &m);
	while (m--) {
		scanf("%s", token);
		
		if (token[0] == 'a') {
			int x; double v; scanf("%d%lf", &x, &v);
			
			sig[x] += v;
			
			while (x > 0) {
				tot[x] += v; x /= 2;
			}
		}
		
		if (token[0] == 'd') printf("%.10f\n", calc(1, 0.));
	}

	return 0;
}
 	 	   																	  	