#include <iostream>
#include <cstdio>
#include <cstring>
#include <string>
#include <map>
using namespace std;

map <int,int> s,v;
map <int,double> f;
int LI[50],H,Q,xx,x,y;
string ss;

double dfs(int x,int y)
{
    if (s[x]<=y) return y;
    return (dfs(x+x,max(y,s[x+x+1]+v[x]))+dfs(x+x+1,max(y,s[x+x]+v[x])))/2;
}

int main()
{
//	freopen("68D.in","r",stdin);

	cout.setf(ios::fixed);
	cout.precision(7);
	cin>>H>>Q;
	for (int i=1;i<=Q;i++)
	{
		cin>>ss;
		if (ss[0]=='a')
		{
			cin>>x>>y;xx=x;v[x]+=y;
			while (x>=1) { s[x]+=y;x/=2; }
		}else cout<<dfs(1,0)<<endl;
	}

	return 0;
}
