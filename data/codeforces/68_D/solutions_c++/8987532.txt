#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <map>
#define db double
#define N 3100000
#define mo 10000007
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,x,y,t;
int c[N],next[N],head[mo];
db a[N],b[N];
char p[10];
inline int get(int x) {
	int A=x%mo,v;
	for (v=head[A];v;v=next[v]) if (c[v]==x) return v;
	c[++t]=x,next[t]=head[A],head[A]=t;
	return t;
}
db cal(int x,db ma) {
	if (a[get(x)]<=ma) return ma;
	return (cal(x*2,max(b[get(x)]+a[get(x*2+1)],ma))+cal(x*2+1,max(b[get(x)]+a[get(x*2)],ma)))/2;
}
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,m) {
		scanf("%s",p);
		if (p[0]=='a') {
			scanf("%d%d",&x,&y);
			b[get(x)]+=y;
			for (;x;x/=2) a[get(x)]+=y;
		} else printf("%.12lf\n",cal(1,0));
	}
	return 0;
}