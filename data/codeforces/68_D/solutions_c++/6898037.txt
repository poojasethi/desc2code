#include <cstdio>
#include <ctime>
#include <iostream>
#include <cstring>
#include <algorithm>
#include <cmath>
#include <map>
using namespace std;
const int N = 1005;
const int HASH = 1000000007;
map <int , int> node , sum;
int h , q;
#define lson root << 1
#define rson root << 1 | 1
double dfs (int root , int v) {
    if (sum[root] <= v) {
        return v;
    }
    return (dfs (lson , max (v , node[root] + sum[rson])) + dfs (rson , max (v , node[root] + sum[lson]))) / 2.0;
}
int main () {
#ifndef ONLINE_JUDGE
    freopen ("input.txt" , "r" , stdin);
    // freopen ("output.txt" , "w" , stdout);
#endif
    scanf ("%d %d" , &h , &q);
    while (q --) {
        char str[10];scanf ("%s" , str);
        if (str[0] == 'a') {
            int p , v;scanf ("%d %d" , &p , &v);
            node[p] += v;
            while (p) {
                sum[p] += v;
                p >>= 1;
            }
        }
        else {
            printf ("%.10f\n" , dfs (1 , 0));
        }
    }
    return 0;
}