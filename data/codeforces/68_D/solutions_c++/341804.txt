#include <iostream>
#include <string>
#include <map>

using namespace std;

map<int, int> cnt;

void add(int v, int e) {
  while (v >= 1) {
    cnt[v] += e;
    v /= 2;
  }
}

int get(int v) {
  return cnt.count(v) ? cnt[v] : 0;
}

double calc(int v, int e_other) {
  double res;
  if (get(v) <= e_other)
    res = e_other;
  else
    res = 0.5*calc(2*v, max(e_other, get(v) - get(2*v))) +
          0.5*calc(2*v+1, max(e_other, get(v) - get(2*v+1)));
//  cout << v << " " << e_other << " " << res << endl;
  return res;
}

double decay() {
  return calc(1, 0);
}

int main() {
  int H, Q;
  cin >> H >> Q >> ws;

  for (int i=0; i < Q; i++) {
    string cmd;
    cin >> cmd;
    if (cmd == "add") {
      int v, e;
      cin >> v >> e;
      add(v, e);
    } else {
      cout << decay() << endl;
    }
  }
}
