#include <stdio.h>
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>
#include <string.h>
#include <math.h>
#include <map>
using namespace std;

map<int,int> cost,sum;
int H, Q;

void add(int n, int e) {
	cost[n] += e;
	while ( n >= 1 ) {
		sum[n] += e;
		n /= 2;
	}
}

double solve(int x, int h, double big) {
	if ( h == H ) {
		return max(big,(double)cost[x]);
	}
	int c = cost[x], L = sum[2*x], R = sum[2*x+1];
	double ans1 = max(big, (double)c+L);
	if ( R > ans1 ) ans1 = solve(2*x+1, h+1, ans1);
	double ans2 = max(big, (double)c+R);
	if ( L > ans2 ) ans2 = solve(2*x, h+1, ans2);
	return (ans1+ans2)/2.0;
}

int main() {
	scanf("%d %d", &H, &Q);
	char s[100];
	int n, e;
	while ( Q-- ) {
		scanf("%s", s);
		if ( s[0] == 'a' ) { scanf("%d %d", &n, &e), add(n,e); }
		else printf("%0.9lf\n", solve(1,0,0.0));
	}
}
