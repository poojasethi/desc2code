#include<iostream>
#include<map>
using namespace std;

map<int,int> d,v;

inline int max(int a, int b) { return a>b?a:b; }

double dec(int n, int m) {
    if (v[n]<=m) return m;
    int l=2*n,r=2*n+1;
    return (dec(r,max(m,v[l]+d[n]))+dec(l,max(m,v[r]+d[n])))*.5;   
}

int main() {
    int h,q,n,e;
    cin >> h >> q;
    while (q--) {
        string com;
        cin >> com;
        if (com=="decay") {            
            cout << dec(1,0) << endl;
        } else {
            cin >> n >> e;
            d[n]+=e;
            for (;n;n>>=1) v[n]+=e;
        }    
    }
}
