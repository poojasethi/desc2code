#include <string>
#include <iostream>
#include <map>
using namespace std;

map<int,int> cnt;
map<int,int> elc;
int H, q;

int main() {
	ios::sync_with_stdio(false);
	cin >> H >> q;
	for(int i = 0; i < q; i++) {
		string s;
		cin >> s;
		if(s == "decay") {
			int v = 1;
			int h = H-1;
			double ans = 0;
			int mx = 0;
			while(h >= 0) {
				int L = 2*v;
				int R = 2*v+1;
				int Lcnt = cnt[L];
				int Rcnt = cnt[R];
				if(Lcnt < Rcnt) {
					ans += (1<<h)*double(max(mx, Rcnt+elc[v]));
					mx = max(mx, Lcnt+elc[v]);
					v = R;
				} else {
					ans += (1<<h)*double(max(mx, Lcnt+elc[v]));
					mx = max(mx, Rcnt+elc[v]);
					v = L;
				}
				h--;
			}
			ans += max(mx, cnt[v]);
			ans /= (1<<H);
			cout.precision(15);
			cout << ans << endl;
		} else {
			int v, e;
			cin >> v >> e;
			elc[v] += e;
			while(v > 0) {
				cnt[v] += e;
				v /= 2;
			}
		}
	}
}
