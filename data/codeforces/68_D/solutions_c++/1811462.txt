#include <cstdio>
#include <algorithm>
#include <map>

using namespace std;

map<int,int> s;
char st[10];

double cal(int x,int y)
{
  if((s.find(x)==s.end())||(s[x]<=y))
    return y*1.0;
  double p=0;
  if(s.find(x*2)!=s.end())
    p+=cal(x*2,max(y,s[x]-s[x*2]))*0.5;
  else
    p+=max(y,s[x])*0.5;
  if(s.find(x*2+1)!=s.end())
    p+=cal(x*2+1,max(y,s[x]-s[x*2+1]))*0.5;
  else
    p+=max(y,s[x])*0.5;
  return p;
}

int main(void)
{
  int h,q;
  scanf("%d %d",&h,&q);
  for(int i=1;i<=q;++i)
  {
    scanf("%s",st);
    if(st[0]=='a')
    {
      int j,k;
      scanf("%d %d",&j,&k);
      while(j>0)
      {
        if(s.find(j)==s.end())
          s[j]=0;
        s[j]+=k;
        j/=2;
      }
    }
    else
      printf("%.6lf\n",cal(1,0));
  }
  return 0;
}