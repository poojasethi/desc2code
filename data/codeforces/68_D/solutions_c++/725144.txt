#include <cstdio>
#include <cstring>
#include <map>
#include <algorithm>
using namespace std;

map<int,double> e,sum;
double sol(int k,double mx)
{
	if(sum[k] <= mx)return mx;
	return (sol(2*k,max(mx,e[k]+sum[k*2+1]))+sol(2*k+1,max(mx,e[k]+sum[k*2])))/2.0;
}

int main()
{
	int h,n;
	scanf("%d%d",&h,&n);
	char s[20];
	while(n--)
	{
		scanf("%s",s);
		if(s[0]=='a')
		{
			int x,v;
			scanf("%d%d",&x,&v);
			e[x] += v;
			while(x>=1)
			{
				sum[x] += v;
				x /= 2;
			}
		}
		else printf("%.15f\n",sol(1,0));
	}

	return 0;
}

		 	 		 			     		 	 	 		