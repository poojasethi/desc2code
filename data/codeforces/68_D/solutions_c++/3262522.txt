#include <stdio.h>
#include <iostream>
#include <algorithm>
#include <cstring>
#include <map>
using namespace std;
int h,q;
map<int,int>sum,val;
double dfs(int x,int d,double premx)
{
	if(d==h) return max(premx,val[x]+0.0);
	double toleft=max(premx,val[x]+sum[x<<1]+0.0);
	double toright=max(premx,val[x]+sum[(x<<1)+1]+0.0);
	if(toleft<sum[(x<<1)+1])
	{
		toleft=dfs((x<<1)+1,d+1,toleft);
	}
	if(toright<sum[x<<1])
	{
		toright=dfs(x<<1,d+1,toright);
	}
	return (toleft+toright)/2;
}
char str[30];
int main()
{
	while(cin>>h>>q){sum.clear();val.clear();
	while(q--)
	{
		scanf("%s",str);
		if(str[0]=='a')
		{
			int a,b;
			scanf("%d%d",&a,&b);
			val[a]+=b;
			while(a)
			{
				sum[a]+=b;
				a/=2;
			}
		}
		else printf("%.8lf\n",dfs(1,0,0));
	}}
	return 0;
}
					 	    		 		 	  			 	