#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <map>
#define db double
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,x,y;
map<int,db> a,b;
char p[10];
db cal(int x,db ma) {
	if (a[x]<=ma) return ma;
	return (cal(x*2,max(b[x]+a[x*2+1],ma))+cal(x*2+1,max(b[x]+a[x*2],ma)))/2;
}
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,m) {
		scanf("%s",p);
		if (p[0]=='a') {
			scanf("%d%d",&x,&y);
			b[x]+=y;
			for (;x;x/=2) a[x]+=y;
		} else printf("%.12lf\n",cal(1,0));
	}
	return 0;
}
