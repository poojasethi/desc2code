#include <iostream>
#include <cstdio>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <vector>
#include <string>
#include <queue>
#include <stack>
#include <map>
#include <set>
#include <list>
#include <iomanip>

using namespace std;
map<int,double>value;
double v;
map<int,double>own;
int h,q;
char str[100];
double dfs(int which,double chance)
{
  if(value[which]<=chance)
    return chance;
  return 0.5*dfs(2*which,max(chance,own[which]+value[2*which+1]))+0.5*dfs(2*which+1,max(chance,own[which]+value[which*2]));
}
int main()
{
  int which;
  scanf("%d%d",&h,&q);
  for(int i=1;i<=q;i++)
  {
    scanf("%s",str);
    if(str[0]=='a')
    {
      scanf("%d%lf",&which,&v);
      own[which]+=v;
      while(which)
      {
        value[which]+=v;
        which/=2;
      }
    }
    else
    {
      printf("%.5lf\n",dfs(1,0));
    }
  }
  return 0;
}

	 		 		   		 	 			  		 		