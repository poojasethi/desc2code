#include <cstdio>
#include <cmath>
#include <cstring>
#include <algorithm>
#include <map>
using namespace std;
#define LL long long
#define maxn 210000
#define INF 1<<30
map<int,double>sum,val;
int n,m;
void ins(int id,int c)
{
    val[id]+=c;
    while(id)
    {
        sum[id]+=c;
        id/=2;
    }
}
double dfs(int id,int h,double pre)
{
    if(h==n) return max(val[id],pre);
    double al=max(pre,val[id]+sum[id*2+1]);
    double ar=max(pre,val[id]+sum[id*2]);
    if(sum[id*2]>al) al=dfs(id*2,h+1,al);
    if(sum[id*2+1]>ar) ar=dfs(id*2+1,h+1,ar);
    return (al+ar)/2;
}
int main()
{
    char cmd[10];
    int a,b;
    while(scanf("%d %d",&n,&m)!=EOF)
    {
        for(int i=0;i<m;i++)
        {
            scanf("%s",cmd);
            if(cmd[0]=='d')
                printf("%.08lf\n",dfs(1,0,0));
            else
                scanf("%d %d",&a,&b),ins(a,b);
        }
    }
}

  	   	 	 		   		  	 	  	 	