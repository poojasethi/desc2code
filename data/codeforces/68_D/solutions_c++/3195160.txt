#include<iostream>
#include<cstring>
#include<cstdio>
#include<map>
using namespace std;
map<int,int> mp,val;
char s[10];
double sum=0.0;
void gao(int all,int height,int x,double now)
{
	if(all==height){
		sum+=max(now,(double)val[x]);
		return ;
	}
	if(mp[x<<1]<mp[x<<1|1]){
		double tmp=max((double)(mp[x<<1|1]+val[x]),now);
		sum+=tmp*(1<<(all-height-1));
		gao(all,height+1,x<<1|1,max((double)(mp[x<<1]+val[x]),now));
	}else{
		double tmp=max((double)(mp[x<<1]+val[x]),now);
		sum+=tmp*(1<<(all-height-1));
		gao(all,height+1,x<<1,max((double)(mp[x<<1|1]+val[x]),now));
	}
}
int main(void)
{
	int h,m,x,y;
	scanf("%d%d",&h,&m);
	for(int i=1;i<=m;i++){
		scanf("%s",s);
		if(strcmp(s,"add")==0){
			scanf("%d%d",&x,&y);
			val[x]+=y;
			int tmp=x;
			while(tmp>=1){
				mp[tmp]+=y;
				tmp/=2;
			}
		}else{
			sum=0.0;
			int n=1<<h;
			gao(h+1,1,1,0);
			printf("%.6lf\n",sum/(double)n);
		}
	}
	return 0;
}
