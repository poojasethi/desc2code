#include <map>
#include <set>
#include <cmath>
#include <stack>
#include <queue>
#include <string>
#include <vector>
#include <bitset>
#include <fstream>
#include <sstream>
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <algorithm>
using namespace std;
#define li		long long
#define rep(i,to)	for(li i=0;i<((li)to);i++)
#define pb		push_back
#define sz(v)		((li)v.size())

map<int,double> memo;

double cal(int num,double m){
	if(memo[num]<=m) return m;
	li l=num*2,r=num*2+1;
	double now=memo[num]-memo[l]-memo[r];
	return (cal(l,max(m,memo[r]+now))+cal(r,max(m,memo[l]+now)))*0.5;
}

int main(){
	li n,h,a,b;
	cin>>h>>n;
	rep(i,n){
		string str;
		cin>>str;
		if(str=="decay"){
			printf("%.20lf\n",cal(1,0));
		}else{
			cin>>a>>b;
			while(a){
				memo[a]+=b;
				a/=2;
			}
		}
	}
}
