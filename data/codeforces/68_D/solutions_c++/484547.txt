#include<cstdio>
#include<map>
#include<algorithm>
using namespace std;

map<int,int> S;
int h,q;
double res;

void dfs(int u,int nh,double p,int v)
{
    if (nh==h+1)
    {
        res+=p*max(v,S[u]);
        return;
    }
    int LS=S.count(u*2)?S[u*2]:0;
    int RS=S.count(u*2+1)?S[u*2+1]:0;
    int SS=S.count(u)?S[u]:0;

    if (SS<=v) {res+=p*v;return;}
    dfs(u*2,nh+1,p*0.5,max(v,SS-LS));
    dfs(u*2+1,nh+1,p*0.5,max(v,SS-RS));
}   

int main()
{
    scanf("%d%d",&h,&q);
    for (int u,v;q--;)
    {
        char buf[10];
        scanf("%s",buf);
        if (buf[0]=='a')
        {
            scanf("%d%d",&u,&v);
            for (;u;u/=2)
                S[u]+=v;
        } else
        {
            res=0;
            dfs(1,1,1,0);
            printf("%0.9lf\n",res);
        }
    }
}
