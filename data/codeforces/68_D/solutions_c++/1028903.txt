#include <cstdio>
#include <map>
#include <iostream>
#define e first
#define s second
using namespace std;
int h;
map<int,pair<int,int> > t;

double calc(int v,int num)
{
	if (t[v].s<=num) return num;
	if (v>=(1<<h)) return t[v].e;
	return (calc(v*2,max(num,t[v].e+t[v*2+1].s))+calc(v*2+1,max(num,t[v].e+t[v*2].s)))*0.5;
}

int main()
{
	int v,x,q;
	scanf("%d%d",&h,&q);
	char str[10];
	while (q--)
	{
		scanf("%s",str);
		if (str[0]=='d') printf("%.6lf\n",calc(1,0)); else
		{
			scanf("%d%d",&v,&x);
			t[v].e+=x;
			while (v) t[v].s+=x, v>>=1;
		}
	}
	return 0;
}
