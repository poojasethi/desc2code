#include<cstdio>
#include<ext/hash_map>
//                     Last Change:  2011-03-30 09:43:11
#include<cstdlib>
#define LL(x) (x<<1)
#define RR(x) (x<<1|1)
using namespace __gnu_cxx;
using namespace std;
int H,q,x,y;
char cmd[5];
hash_map<int,int> h;
double ask(int u,int best)
{
	if(h[u]<=best)return best;
	return (ask(LL(u),max(h[u]-h[LL(u)],best))+ask(RR(u),max(h[u]-h[RR(u)],best)))/2.0;
}
int main()
{
	for(scanf("%d%d",&H,&q);q--;)
	{
		scanf("%s",cmd);
		if(cmd[0]=='a')
		{
			scanf("%d%d",&x,&y);
			while(x)
			{
				h[x]+=y;
				x>>=1;
			}
		}
		else printf("%.9f\n",ask(1,0));
	}
	return 0;
}
