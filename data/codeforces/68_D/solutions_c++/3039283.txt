#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <algorithm>
#include <iostream>
#include <string>
#include <queue>
#include <stack>
#include <map>
#include <set>
#include <vector>
#include <cstring>
#include <list>
#include <ctime>
#include <cmath>
#include <sstream>
using namespace std;

map <int,double> tree;

double query(int pos,double now)
{
    if(tree[pos]<=now)
        return now;
    double x,y;
    x=query(pos*2,max(now,tree[pos]-tree[pos*2]));
    y=query(pos*2+1,max(now,tree[pos]-tree[pos*2+1]));
    return (x+y)/2.0;
}

int main()
{
    int n,q,i,v,x;
    char str[10];
    double now;
    scanf("%d%d",&n,&q);
    for(i=1;i<=q;i++)
    {
        scanf("%s",str);
        if(str[0]=='a')
        {
            scanf("%d%d",&v,&x);
            while(v)
            {
                tree[v]+=x;
                v/=2;
            }
        }
        else
            printf("%f\n",query(1,0));
    }
    return 0;
}

		  	 			 	  	  	 	 	 		