#include <iostream>
#include <cstdio>
#include <map>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)

map< int , int > cnt;

double solve(int h,int x,int y){
        if (cnt[x]<=y) return double(y);
        if (!h) return double(cnt[x]);
        int lx=2*x,rx=2*x+1;
        return (solve(h-1,lx,max(y,cnt[x]-cnt[lx]))+solve(h-1,rx,max(y,cnt[x]-cnt[rx])))*0.5;
}

int main(){
        int h,q,i,x,y;
        string s;
        cin>>h>>q;
        REP(i,0,q){
                cin>>s;
                if (s=="decay") printf("%.10lf\n",solve(h,1,0));
                else {
                        cin>>x>>y;
                        for(;x;x/=2) cnt[x]+=y;
                }
        }
}
