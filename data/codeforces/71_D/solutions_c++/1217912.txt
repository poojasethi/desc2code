#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<vector>
using namespace std;

string dost[13] = {"2", "3", "4", "5", "6", "7", "8", "9", "T", "J", "Q", "K", "A"};
string mast[4] = {"C", "D", "H", "S"};
vector<string> all;
vector<bool> used;
int d[20][20];
int n, m;
bool found = false;
int ax1, ay1, ax2, ay2;

void find()
{
	vector<pair<int, int> > t;
	for(int i = 0; i < n - 2; ++i)
		for(int j = 0; j < m - 2; ++j)	
		{
			int dd = 0, dm = 0;
			vector<int> t2;
			for(int ii = 0; ii < 3; ++ii)
				for(int jj = 0; jj < 3; ++jj)
					t2.push_back(d[i + ii][j + jj]);
			for(int ii = 0; ii < t2.size(); ++ii)
				for(int jj = ii + 1; jj < t2.size(); ++jj)
				{
					if(all[t2[ii]][0] != all[t2[jj]][0])
						dd++;
					if(all[t2[ii]][1] != all[t2[jj]][1])
						dm++;
				}
			if(dm == 0 || dd == 36)
				t.push_back(make_pair(i, j));
		}
	for(int i = 0; i < t.size(); ++i)
		for(int j = i + 1; j < t.size(); ++j)
		{
			int x1 = t[i].first, x2 = t[i].first + 2;
			int y1 = t[i].second, y2 = t[i].second + 2;
			int x3 = t[j].first, x4 = t[j].first + 2;
			int y3 = t[j].second, y4 = t[j].second + 2;
			if(!(min(x1, x2) <= max(x3, x4) && min(y1, y2) <= max(y3, y4) && min(x3, x4) <= max(x1, x2) && min(y3, y4) <= max(y1, y2)))
			{	
				found = true;					
				ax1 = x1, ay1 = y1;
				ax2 = x3, ay2 = y3;
				return;
			}
		}
}

void print()
{
	cout << "Put the first square to (" << ax1+1 << ", " << ay1+1 << ")." << endl;
	cout << "Put the second square to (" << ax2+1 << ", " << ay2+1 << ").";
}
int main()
{
	//freopen("input.txt", "r", stdin);	
	//freopen("output.txt", "w", stdout);

	string tmp, j1, j2;
	for(int i = 0; i < 13; ++i)
		for(int j = 0; j < 4; ++j)
		{
			tmp = dost[i] + mast[j];
			all.push_back(tmp);
		}
	used.resize(52, false);

	int x1 = -1, y1, x2 = -1, y2;
	cin >> n >> m;
	for(int i = 0; i < n; ++i)
		for(int j = 0; j < m; ++j)
		{
			cin >> tmp;	
			for(int k = 0; k < 52; ++k)
				if(all[k] == tmp)
				{
					used[k] = true;
					d[i][j] = k;
					break;
				}
			if(tmp == "J1" || tmp == "J2")
			{
				if(x1 == -1)
					x1 = i, y1 = j, j1 = tmp;
				else
					x2 = i, y2 = j, j2 = tmp;
			}
		}
	if(x1 == -1)	
	{
		find();
		if(found)
		{
			cout << "Solution exists." << endl;
			cout << "There are no jokers." << endl;
			print();
		}
		else
			cout << "No solution.";
	}
	else if(x2 == -1)	
	{
		int ch1 = -1;
		for(ch1 = 0; ch1 < 52; ++ch1)
			if(!used[ch1])
			{
				d[x1][y1] = ch1;
				find();
				if(found) break;
			}
		if(found)
		{
			cout << "Solution exists." << endl;
			cout << "Replace " << j1 << " with " << all[ch1] << ".\n";
			print();
		}
		else
			cout << "No solution.";
	}
	else
	{
		if(j1 != "J1")
			swap(j1, j2), swap(x1, x2), swap(y1, y2);
		int ch1, ch2;
		for(ch1 = 0; ch1 < 52; ++ch1)
		{
			for(ch2 = 0; ch2 < 52; ++ch2)
				if(!used[ch1] && !used[ch2])
				{
					if(ch1 == ch2) continue;
					d[x1][y1] = ch1;
					d[x2][y2] = ch2;
					find();
					if(found) break;
				}
			if(found) break;
		}
		if(found)
		{
			cout << "Solution exists." << endl;
			cout << "Replace " << j1 << " with " << all[ch1] << " and " << j2 << " with " << all[ch2] << ".\n";
			print();
		}	
		else
			cout << "No solution.";
	}

	return 0;
}