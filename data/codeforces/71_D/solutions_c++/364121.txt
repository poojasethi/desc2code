#include <algorithm>
#include <iostream>
#include <cstring>
#include <cstdio>
using namespace std;

int a[20][20];
int Color[257];
int value[257];
int Num[257];
int all[100];

main(){
	value['A'] = 0;
	value['2'] = 1;
	value['3'] = 2;
	value['4'] = 3;
	value['5'] = 4;
	value['6'] = 5;
	value['7'] = 6;
	value['8'] = 7;
	value['9'] = 8;
	value['T'] = 9;
	value['J'] = 10;
	value['Q'] = 11;
	value['K'] = 12;
	value['H'] = 0;
	value['D'] = 1;
	value['C'] = 2;
	value['S'] = 3;
	Num[0] = 'A';
	Num[1] = '2';
	Num[2] = '3';
	Num[3] = '4';
	Num[4] = '5';
	Num[5] = '6';
	Num[6] = '7';
	Num[7] = '8';
	Num[8] = '9';
	Num[9] = 'T';
	Num[10] = 'J';
	Num[11] = 'Q';
	Num[12] = 'K';
	Color[0] = 'H';
	Color[1] = 'D';
	Color[2] = 'C';
	Color[3] = 'S';
	
	int n, m, i, j, J1, J2, R1, R2, C1, C2;
	int mark, color;
	char readin[9];
	
	memset ( all, 0, sizeof ( all ) );
	scanf ( "%d %d", &n, &m );
	for ( i = 0; i < n; i ++ )
		for ( j = 0; j < m; j ++ ){
			scanf ( "%s", readin );
			if ( readin[1] == '1' )
				a[i][j] = 52;
			else if ( readin[1] == '2' )
				a[i][j] = 53;
			else
				a[i][j] = value[readin[0]] + value[readin[1]] * 13;
			all[ a[i][j] ] = 1;
		}
	for ( J1 = 0; J1 < 53; J1 ++ )
		if ( ( all[52] == 1 && J1 == 52 ) || ( all[52] == 0 && J1 != 52 ) || ( all[52] == 1 && all[J1] == 1 ) )
			continue;
		else
	for ( J2 = 0; J2 < 54; J2 ++ )
		if ( ( all[53] == 1 && J2 >= 52 ) || ( all[53] == 0 && J2 != 53 ) || ( all[53] == 1 && all[J2] == 1 ) || J1 == J2 )
			continue;
		else{
			for ( i = 0; i < n; i ++ )
				for ( j = 0; j < m; j ++ ){
					if ( a[i][j] == 52 )	a[i][j] = J1;
					if ( a[i][j] == 53 )	a[i][j] = J2;
				}
			for ( R1 = 0; R1 + 3 <= n; R1 ++ )
			for ( C1 = 0; C1 + 3 <= m; C1 ++ )
			for ( R2 = 0; R2 + 3 <= n; R2 ++ )
			for ( C2 = 0; C2 + 3 <= m; C2 ++ ){
				if ( abs( R1 - R2 ) < 3 && abs( C1 - C2 ) < 3 )
					continue;
				mark = 0;
				color = a[R1][C1] / 13;
				for ( i = 0; i < 3; i ++ )
					for ( j = 0; j < 3; j ++ ){
						if ( color != a[R1+i][C1+j] / 13 )
							color = -1;
						if ( mark & ( 1 << ( a[R1+i][C1+j] % 13 ) ) )
							mark = -1;
						else
							mark |= ( 1 << ( a[R1+i][C1+j] % 13 ) );
					}
				if ( mark == -1 && color == -1 )
					continue;
				mark = 0;
				color = a[R2][C2] / 13;
				for ( i = 0; i < 3; i ++ )
					for ( j = 0; j < 3; j ++ ){
						if ( color != a[R2+i][C2+j] / 13 )
							color = -1;
						if ( mark & ( 1 << ( a[R2+i][C2+j] % 13 ) ) )
							mark = -1;
						else
							mark |= ( 1 << ( a[R2+i][C2+j] % 13 ) );
					}
				if ( mark == -1 && color == -1 )
					continue;
				printf( "Solution exists.\n" );
				if ( J1 == 52 && J2 == 53 )
					printf( "There are no jokers.\n" );
				else
					if ( J1 == 52 )
						printf( "Replace J2 with %c%c.\n", Num[J2%13], Color[J2/13] );
					else
						if ( J2 == 53 )
							printf( "Replace J1 with %c%c.\n", Num[J1%13], Color[J1/13] );
						else
							printf( "Replace J1 with %c%c and J2 with %c%c.\n", Num[J1%13], Color[J1/13], Num[J2%13], Color[J2/13] );
				printf( "Put the first square to (%d, %d).\n", R1 + 1, C1 + 1 );
				printf( "Put the second square to (%d, %d).\n", R2 + 1, C2 + 1 );
//				cin >> i;
				return 0;
			}
			for ( i = 0; i < n; i ++ )
				for ( j = 0; j < m; j ++ ){
					if ( a[i][j] == J1 )	a[i][j] = 52;
					if ( a[i][j] == J2 )	a[i][j] = 53;
				}
		}
	printf( "No solution.\n" );
//	cin >> i;
	return 0;
}
