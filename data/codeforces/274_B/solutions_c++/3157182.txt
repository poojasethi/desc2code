#include<cstdio>
#include<iostream>
#include<vector>
#include<cstdlib>
#define N 100000
#define LL long long
using namespace std;
vector<int> g[N];
int val[N];
LL inc[N][2];

void dfs(int v,int pr){

	for(int i=0;i<g[v].size();++i){
		int u=g[v][i];
		if( u != pr){
			dfs(u,v);
			for(int j=0;j<2;++j)
				inc[v][j] = max( inc[v][j] , inc[u][j] );		
			
		}

	}	
	val[v] += inc[v][0] - inc[v][1];

	inc[v][ val[v]>0 ] += abs(val[v]);
}

int main(){
	int n;scanf("%d",&n);
	for(int i=1,u,v;i<n;++i){
		scanf("%d%d",&u,&v);--v,--u;
		g[u].push_back(v);
		g[v].push_back(u);
	}
	for(int i=0;i<n;++i)
		scanf("%d",val+i);

	dfs(0,-1);
	cout << inc[0][0] + inc[0][1] << endl;

	return 0;
}
