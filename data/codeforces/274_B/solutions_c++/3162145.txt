#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
typedef long long ll;
const int maxn=100001;
int a[maxn*2][2],b[maxn];
ll f[maxn],g[maxn],w[maxn];
int n,s;

void add(int i,int j){
  a[++s][0]=b[i];
  b[i]=s;
  a[s][1]=j;
}

void dfs(int k,int father){
  int i,j;
  for (i=b[k];i;i=a[i][0]){
    j=a[i][1];
    if (j!=father){
      dfs(j,k);
      f[k]=max(f[k],f[j]);
      g[k]=min(g[k],g[j]);
    }
  }
  w[k]-=(g[k]+f[k]);
  if (w[k]>0) f[k]+=w[k];
  else g[k]+=w[k];
}

int main(){
  int i,j,k;
  scanf("%d",&n);
  for (k=1;k<n;k++){
    scanf("%d%d",&i,&j);
    add(i,j);
    add(j,i);
  }
  for (i=1;i<=n;i++) scanf("%I64d",&w[i]);
  dfs(1,0);
  printf("%I64d\n",f[1]-g[1]);
}
