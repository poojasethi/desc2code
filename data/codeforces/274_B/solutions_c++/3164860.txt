#include <cstdio>
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;
int n,i,j,k,x,y;
long long a[100011],b[100011],c[100011];
vector<int> e[100011];
void dfs(int now,int fa){
		 for (int i=0;i<e[now].size();i++)
		 		 if (fa!=e[now][i]){
		 		 		dfs(e[now][i],now);
		 		 		a[now]=max(a[now],a[e[now][i]]);
		 		 		b[now]=min(b[now],b[e[now][i]]);
	 				}
		 c[now]+=a[now]+b[now];
		 if (c[now]>0) b[now]-=c[now];
		 else				 	 a[now]-=c[now];
}
int main(){
		scanf("%d",&n);
		for (i=1;i<n;i++)
				scanf("%d%d",&x,&y),e[x].push_back(y),e[y].push_back(x);
		for (i=1;i<=n;i++) scanf("%I64d",&c[i]);
		dfs(1,0);
		cout<<a[1]-b[1];
		return 0;
}