#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
__int64 a[100010],inc[100010],Dec[100010],v[100010],n,i,x,y;
__int64 head[100010],ver[200010],next[200010],tot;

void add(__int64 x,__int64 y)
{
	ver[++tot]=y,next[tot]=head[x],head[x]=tot;
}

void dp(__int64 x)
{
	v[x]=1;
	for(__int64 i=head[x];i;i=next[i])
		if(!v[ver[i]])
		{
			dp(ver[i]);
			inc[x]=max(inc[x],inc[ver[i]]);
			Dec[x]=max(Dec[x],Dec[ver[i]]);
		}
	a[x]-=inc[x]-Dec[x];
	if(a[x]>0) inc[x]+=a[x]; else Dec[x]-=a[x];
}

int main()
{
	cin>>n;
	for(i=1;i<n;i++)
	{
		scanf("%I64d%I64d",&x,&y);
		add(x,y),add(y,x);
	}
	for(i=1;i<=n;i++) scanf("%I64d",&a[i]);
	dp(1);
	cout<<inc[1]+Dec[1]<<endl;
}