#include<bits/stdc++.h>
using namespace std;
#define ll long long int
#define pb push_back
ll vis[1000000],a[1000000];
vector<ll>v[100000];
struct node
{
ll p;ll m;
};
node dfs(ll x)
{
vis[x]=1;
ll i,pl=0,mi=0;
for(i=0;i<v[x].size();i++)
{
if(vis[v[x][i]]==0){
node z=dfs(v[x][i]);
pl=max(pl,z.p);
mi=max(mi,z.m);
}
}
a[x]+=pl-mi;
if(a[x]>0)
mi+=a[x];
if(a[x]<0)
pl+=-a[x];
node z1;
z1.p=pl;
z1.m=mi;
return  z1;
}
int main()
{
ll n,i,x,y;
scanf("%lld",&n);
for(i=1;i<n;i++)
{
scanf("%lld %lld",&x,&y);
v[x].pb(y);
v[y].pb(x);
}
for(i=1;i<=n;i++)
cin>>a[i];
node k=dfs(1);
cout<<k.p+k.m<<endl;
return 0;
}