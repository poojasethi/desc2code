#include <bits/stdc++.h>
 
#define fi first
#define se second
#define pb push_back
#define mp make_pair
#define pii pair<int,int>
#define MOD 1000000007
#define ll long long int
#define MAXINT 1000000000LL

using namespace std;

vector<int> g[100005];
ll A[100005];

pair<ll,ll> work(int n,int p) {
	pair<ll,ll> ans=mp(0,0),q;
	int i,x;
	ll z;
	for(i=0;i<g[n].size();i++) {
		x=g[n][i];
		if(x==p)	continue;
		q=work(x,n);
		ans.fi=max(ans.fi,q.fi);
		ans.se=max(ans.se,q.se);
	}
	z=ans.fi-ans.se+A[n];
	if(z<0)
		ans.fi-=z;
	else
		ans.se+=z;
	return ans;
}

int main () {
	int n,i,x,y;
	cin>>n;
	for(i=1;i<n;i++) {
		cin>>x>>y;
		g[x].pb(y);
		g[y].pb(x);
	}
	for(i=1;i<=n;i++)
		cin>>A[i];
	pair<ll,ll> ans=work(1,-1);
	cout<<ans.fi+ans.se<<endl;
	return 0;
}