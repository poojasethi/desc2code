#include<iostream>
#include<cstdio>
#include<set>
#include<map>

using namespace std;

typedef long long ll;

int n;
ll m, x, y;
int t[1000000];
ll a[100][2];
ll p[100][2][2];
ll r1, r2;

void mn(ll x)
{
    int pc = 0, ac = 0;
    while(x)
    {
        if(x & 1ll)
        {
            for(int i = 0; i < 2; ++i)
            {
                a[ac+1][i] = 0;
                for(int j = 0; j < 2; ++j)
                    a[ac+1][i] = (a[ac+1][i] + a[ac][j] * p[pc][i][j] % m) % m;
            }
            ++ac;
        }

        for(int i = 0; i < 2; ++i)
            for(int j = 0; j < 2; ++j)
            {
                p[pc+1][i][j] = 0;
                for(int k = 0; k < 2; ++k)
                    p[pc+1][i][j] = (p[pc+1][i][j] + p[pc][i][k] * p[pc][k][j] % m) % m;
            }
        ++pc;

        x >>= 1ll;
    }
    r1 = a[ac][0];
    r2 = a[ac][1];
}

int main()
{
    cin >> n >> x >> y >> m;
    ll s = 0;
    for(int i = 0; i < n; ++i)
    {
        cin >> t[i];
        s = (s + t[i]) % m;
    }
    ll q = t[n-2] % m, w = t[n-1] % m;
    ll c = (t[0] + t[n-1]) % m;

    a[0][0] = 0;
    a[0][1] = 1;
    p[0][0][0] = 0;
    p[0][0][1] = p[0][1][0] = p[0][1][1] = 1;
    mn(x);
    ll c1 = (t[0] + r1 * q % m + r2 * w % m) % m;

    a[0][0] = s;
    a[0][1] = 1;
    p[0][0][0] = 3;
    p[0][0][1] = m - c;
    p[0][1][0] = 0;
    p[0][1][1] = 1;
    mn(x);
    s = r1;

    a[0][0] = s;
    a[0][1] = 1;
    p[0][0][0] = 3;
    p[0][0][1] = m - c1;
    p[0][1][0] = 0;
    p[0][1][1] = 1;
    mn(y);
    s = r1;

    cout << s << endl;

    return 0;
}

