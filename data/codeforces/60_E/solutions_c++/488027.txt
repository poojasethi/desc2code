#include<cstdio>

int n,p;
long long x,y;

void mul(int a[][2],int b[][2])
{
    int c[2][2]={{0,0},{0,0}};
    for (int k=0;k<2;k++)
    for (int i=0;i<2;i++)
    for (int j=0;j<2;j++)
        c[i][j]=(c[i][j]+(long long)a[i][k]*b[k][j]%p)%p;
    for (int i=0;i<2;i++)
    for (int j=0;j<2;j++)
        a[i][j]=c[i][j];
}

int main()
{
    scanf("%d%I64d%I64d%d",&n,&x,&y,&p);
    long long s=0,ss=0,s0,s1,s2;
    for (int i=0,j;i<n;i++)
    {
        scanf("%d",&j);
        s+=j;
        if (i==0) ss+=j;
        if (i==n-1) ss+=j;
        if (i==0) s0=j;
        if (i==n-2) s1=j;
        if (i==n-1) s2=j;
    }
    s%=p;ss%=p;
    if (n==1) {printf("%d\n",(int)s);return 0;}
    int a[2][2]={{1,0},{0,1}},b[2][2]={{3,0},{-1,1}};
    int u[2][2]={{1,0},{0,1}},v[2][2]={{0,1},{1,1}};
    for (;x;x/=2)
    {
        if (x&1) mul(a,b),mul(u,v);
        mul(b,b);mul(v,v);
    }
    s=((long long)s*a[0][0]+(long long)ss*a[1][0])%p;
    ss=((long long)s1*u[0][1]+(long long)s2*u[1][1]+s0)%p;
    
    int c[2][2]={{1,0},{0,1}},d[2][2]={{3,0},{-1,1}};
    for (;y;y/=2)
    {
        if (y&1) mul(c,d);
        mul(d,d);
    }
    s=((long long)s*c[0][0]+(long long)ss*c[1][0])%p;
    printf("%d\n",(int)(s+p)%p);
}
