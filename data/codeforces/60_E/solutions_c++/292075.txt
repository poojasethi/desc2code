/* Problem: test.  Author: Ssy. */
#include<cstdio>
using namespace std;
long long map[3][3],map2[3][3],map3[3][3],k,sum,x,y,p,a[1000001];
int n;
void ok1()
{
 for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map3[i][j]=0;
 for (int i=1;i<=2;i++)
 for (int j=1;j<=2;j++)
 for (int k=1;k<=2;k++) map3[i][j]=(map3[i][j]+(map[i][k]*map[k][j]))%p;
 for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map[i][j]=map3[i][j];
}
void ok2()
{
 for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map3[i][j]=0;
 for (int i=1;i<=2;i++)
 for (int j=1;j<=2;j++)
 for (int k=1;k<=2;k++) map3[i][j]=(map3[i][j]+(map[i][k]*map2[k][j]))%p;
 for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map[i][j]=map3[i][j];
}
void ksm(long long x)
{
 if (x==1) return;
 else
 {
  ksm(x/2);
  ok1();
  if (x%2==1) ok2();
 }
}
int main(){
	scanf("%I64d%I64d%I64d%I64d",&n,&x,&y,&p);
	if (x==0) { x=y; y=0; }
	for (int i=1;i<=n;i++) scanf("%I64d",&a[i]);
	for (int i=1;i<=n;i++) sum=(sum+a[i])%p;
	k=a[1]+a[n];
	map[1][1]=3; map[1][2]=-1; map[2][1]=0; map[2][2]=1;
        for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map2[i][j]=map[i][j];
	ksm(x);
	sum=(map[1][1]*sum+map[1][2]*k)%p;
	if (y>0) {
	map[1][1]=1; map[1][2]=1; map[2][1]=1; map[2][2]=0;
	for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map2[i][j]=map[i][j];
	ksm(x);
	k=(a[1]+(map[1][1]*a[n]+map[1][2]*a[n-1]))%p;
	map[1][1]=3; map[1][2]=-1; map[2][1]=0; map[2][2]=1;
	for (int i=1;i<=2;i++) for (int j=1;j<=2;j++) map2[i][j]=map[i][j];
	ksm(y);
	sum=(map[1][1]*sum+map[1][2]*k)%p;
	} 
    sum=(sum%p+p)%p;  
	printf("%I64d",sum); 
    return 0;
}
