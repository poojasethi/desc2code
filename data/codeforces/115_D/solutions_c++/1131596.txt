#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <algorithm>
using namespace std;

int dp[2005][1005],next[2005];
char s[2222];

void add(int &a,int b) {
    a = (a+b)%1000003;
}

int main() {
    scanf("%s",s);
    int n = strlen(s);
    int res = -1;
    memset(next,-1,sizeof(next));
    for (int i=0; i<n; i++) {
        if (s[i]>='0' && s[i]<='9') {
            int j;
            for (j=i; j<=n; j++)
                if (j==n || !(s[j]>='0' && s[j]<='9')) break;
            next[i] = j-1;
            if (j == n && res == -1) res = i;
        }
    }
    memset(dp,0,sizeof(dp));
    dp[0][0] = 1;
    for (int i=0; i<n; i++) {
        for (int j=0; j<=1000; j++) {
            add(dp[i][j+1],dp[i][j]);
            if (s[i] == '-' || s[i] == '+') add(dp[i+1][j],dp[i][j]);
            if (next[i]!=-1 && j>0 && !(s[next[i]+1]>='0' && s[next[i]+1]<='9')) add(dp[next[i]+2][j-1],dp[i][j]);
        }
    }
    if (res == -1) puts("0");
    else printf("%d\n",dp[res][0]);
}
