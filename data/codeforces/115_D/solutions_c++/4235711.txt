#include<cstdio>
#include<algorithm>
#include<iostream>
#include<cstdlib>
#include<cmath>
#include<cstring>

using namespace std;

#define N 80005

int n,m,f[N];
char s[N];

int main()
{
    scanf("%s",s);
    n=strlen(s);m=2*n;
    f[m]=1;
    for(int i=0;i<n;i++)
        if(s[i]<'0')
            if(s[i]=='+'||s[i]=='-'||i&&s[i-1]>='0')
                m--;
            else 
                {puts("0");return 0;}
        else 
            if(s[i+1]<'0')
                for(int j=m+n;j>m;j--)
                    f[j-1]=(f[j-1]+f[j])%1000003;
    printf("%d\n",f[m]);
    return 0;
}