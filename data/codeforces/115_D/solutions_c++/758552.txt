#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<cctype>
using namespace std;
const int N=2010;
const int P=1000003;
int f[N][N],n=0;
char str[N];
int a[N];
void init()
{
    int i,len;
    gets(str+1);len=strlen(str+1);
    i=1;
    while(i<=len)
    {
        if(isdigit(str[i]))
        {
            a[++n]=0;   
            while(isdigit(str[i]))++i;
        }
        else if(str[i]=='+'||str[i]=='-')a[++n]=1,++i;
        else a[++n]=2,++i;
    }
}
bool check()
{
    int i;
    for(i=1;i<=n;i++)if(a[i]==2&&(a[i-1]||i==1))return false;
    return true;
}
int dfs(int x,int br)
{
    if(x==n+1)return !br;
    if(br<0)return 0;
    if(f[x][br]!=-1)return f[x][br];
    if(!a[x])return f[x][br]=(dfs(x+1,br)+dfs(x,br-1))%P;
    return f[x][br]=dfs(x+1,br+1);
}
void sol()
{
    memset(f,-1,sizeof(f));
    if(!check())puts("0"),exit(0);
    printf("%d\n",dfs(1,0));
}
int main()
{
    init();
    sol();
    return 0;
}
