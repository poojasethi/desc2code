#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <iostream>
#include <algorithm>
#include <ctime>
//#include <cmath>
#include <vector>
#include <map>
using namespace std;
typedef long long LL;
typedef pair<int,int> pint;
typedef pair<LL,LL> pll;
#define fi first
#define se second
typedef map<int,int> mapint;
typedef vector<int> vint;
typedef vector<vint> vintp;
#define rep(i,j,k) for (int i = (j);i <= (k);i ++)
#define ran2 (rand() % 32000 * 32000 + rand() % 32000)
#define pb push_back
#define mp make_pair
#define mx 300000
int n,m,f[mx];
char s[mx];
int main(){
	scanf("%s",s);
	n = strlen(s);
	f[m = 2 * n] = 1;
	for (int i = 0;i < n;i ++)
		if (s[i] < '0') if (s[i] == '+'|| s[i] == '-'|| (i && s[i-1]>='0')) m --;
		else return puts("0"),0;
		else if(s[i + 1] < '0')
		for (int j = m + n;j > m;j --) f[j - 1] = (f[j - 1] + f[j])% 1000003;
	printf("%d\n",f[m]);return 0;
}