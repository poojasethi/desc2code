#include<bits/stdc++.h>

#define ll long long
#define mp make_pair
#define F first
#define S second

const ll MX = 9223372036854775806;
const int SOM = 1110111;	

using namespace std;

int n , m , u , a[SOM] , b[SOM] , p[SOM];
ll sum , d[SOM] , c[SOM];
set< pair<ll , int> > q;
vector< pair<int , ll> > g[SOM];
vector<int> ans;

int main(){

	cin >> n >> m;
	for(int i = 1;i <= m ;i ++){
	   cin >> a[i] >> b[i] >> c[i];
		g[a[i]].push_back( mp(b[i] , c[i]));
		g[b[i]].push_back( mp(a[i] , c[i]));
	}
	cin >> u;
	for(int i = 1;i <= n;i ++)
		d[i] = MX;
	d[u] = 0;
	q.insert( mp(d[u] , u));
	while(q.size())
	{
		int v = q.begin() -> S;
		q.erase(q.begin());   
		for(int i = 0;i < g[v].size();i ++){
			int to = g[v][i].F , len = g[v][i].S;
			if(d[v] + len <= d[to]){
				q.erase(mp(d[to] , to));
				d[to] = d[v] + len;
				p[to] = v;
				q.insert( mp(d[to] , to));
			}
		}
	}              
	for(int i = 1;i <= m;i ++){
		if(p[b[i]] == a[i] || p[a[i]] == b[i]){
			ans.push_back(i);
			sum += c[i];
		}	
	}
	cout << sum << endl;
	for(int i = 0;i < ans.size();i ++)
		cout << ans[i] << " ";
	return 0;
}	
	
		 	
