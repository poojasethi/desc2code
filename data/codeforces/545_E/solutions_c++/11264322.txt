#include<bits/stdc++.h>
 
using namespace std;
 
#define dbg(x) cerr << (#x) << " --> " << (x) << endl
#define lli long long int
#define pii pair<int,int>
#define mod 1000000007
#define N (int)3e5+10
#define mp make_pair
#define pb push_back
#define nd second
#define st first
#define endl '\n'
#define inf mod
#define sag (sol|1)
#define sol (root<<1)
#define ort ((bas+son)>>1)
#define int long long 

priority_queue< pair< pii , pii > > xx;
map< pii , int > e;
int a,i,n,w,y,v;
pii sp[N];
int anns,x,z,m;
vector<int> ans;
vector< pii > arr[N];
main(){
	
	cin >> n >> m;

	for(i=1 ; i<=m ; i++){
		cin >> x >> y >> z;

		e[mp(x,y)] = i;
		e[mp(y,x)] = i;

		arr[x].pb(mp(y,z));
		arr[y].pb(mp(x,z));
	}

	cin >> a;

	xx.push(mp(mp(0,0),mp(0,a)));

	for(i=1 ; i<=n ; i++)
		sp[i].nd = i;

	while(!xx.empty()){
		v = -xx.top().st.st;
		y = -xx.top().st.nd;
		w =  xx.top().nd.st;
		x =  xx.top().nd.nd;

		xx.pop();

		if(sp[x].st)
			continue;

		if(x == a and w)
			continue;

		ans.pb(e[mp(w,x)]);

		anns += y;

		sp[x].st = v;

		for(i=0 ; i<arr[x].size() ; i++)
			if(!sp[arr[x][i].st].st)
				xx.push(mp(mp(-(v+arr[x][i].nd),-arr[x][i].nd) , mp(x,arr[x][i].st)));	
	}

	cout << anns << endl;
	
	for(i=1 ; i<ans.size() ; i++)
		cout << ans[i] << ' ';

	cout << endl;
}
