#include <bits/stdc++.h>
using namespace std;

#define ll long long int
#define mp(i,j) make_pair(i,j)
#define pb(x) push_back(x)
#define MAXN 300010
#define MOD 1000000007

vector <pair<ll,pair<ll,ll> > > g[MAXN];
ll sp[MAXN];
ll taken[MAXN];

int main()
{
	ll i,j,n,m,u,v,w,ec,c,ans;

	scanf("%lld%lld", &n,&m);

	for(i=1;i<=m;i++) {
		scanf("%lld%lld%lld", &u,&v,&w);

		g[u].pb(mp(v,mp(w,i)));
		g[v].pb(mp(u,mp(w,i)));
	}
	scanf("%lld", &u);

	memset(sp,-1,sizeof(sp));
	memset(taken,0,sizeof(taken));

	priority_queue <pair<pair<ll,ll>,pair<ll,ll> > > q;

	q.push(mp(mp(0,0),mp(u,-1)));

	ans= 0;
	while(!q.empty()) {
		c = -q.top().first.first;
		ec = -q.top().first.second;
		u = q.top().second.first;
		i = q.top().second.second;

		q.pop();

		if(sp[u]!=-1) continue;
		
		taken[i]=  1;
		ans+=ec;
		sp[u] = c;

		for(j=0;j<g[u].size();j++) {
			q.push(mp(mp(-(c+g[u][j].second.first),-g[u][j].second.first),mp(g[u][j].first,g[u][j].second.second)));
		}
	}

	printf("%lld\n", ans);

	for(i=1;i<=m;i++) {
		if(taken[i]) printf("%lld ", i);
	}
	printf("\n");

	return 0;
}
