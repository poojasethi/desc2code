//In the Name of God

#include<iostream>
#include<set>
#include<map>
#include<vector>
#define mp make_pair
#define pb push_back
#define ll long long

using namespace std;

const ll inf=1000000000010101010,maxn=300010;
ll n,m,v,u,a[maxn],f,W,dis[maxn],d[maxn];
vector<ll> g[maxn],w[maxn],ans;
map< pair<ll,ll>,ll > num;
set< pair<ll,ll> > s;

void dij(ll x)
{
  dis[x]=0;
  s.insert(mp(dis[x],x));
  while(s.size()>0)
    {
      v=s.begin()->second;
      s.erase(s.begin());
      for(int i=0;i<g[v].size();i++)
	{
	  u=g[v][i];
	  if(dis[v]+w[v][i]<=dis[u])
	    {
	      s.erase(mp(dis[u],u));
	      d[u]=v;
	      dis[u]=dis[v]+w[v][i];
	      s.insert(mp(dis[u],u));
	    }
	}
    }
}

int main()
{
  cin>>n>>m;
  for(ll i=0;i<=n;i++)
    dis[i]=inf;
  for(ll i=1;i<=m;i++)
    {
      cin>>v>>u>>a[i];
      g[v].push_back(u);
      g[u].push_back(v);
      w[v].push_back(a[i]);
      w[u].push_back(a[i]);
      num[mp(v,u)]=num[mp(u,v)]=i;
    }
  cin>>f;
  dij(f);
  for(ll i=1;i<=n;i++)
    if(i!=f)
      {
	W+=a[num[mp(i,d[i])]];
	ans.pb(num[mp(i,d[i])]);
      }
  cout<<W<<endl;
  for(ll i=0;i<n-1;i++)
    cout<<ans[i]<<" ";
  cout<<endl;
  //for(int i=1;i<=n;i++)
  //cout<<d[i]<<endl;
  //cin>>n;
  return 0;
}
