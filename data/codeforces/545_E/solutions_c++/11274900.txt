#include<cstdio>
#include<cstdlib>
#include<cmath>
#include<cstring>
#include<queue>

using namespace std;
typedef long long ll;

struct dd{
	ll dis;
	int x;
	dd(ll _d=0,int _x=0)
	{
		dis=_d;x=_x;
	}
	bool operator < (dd a) const{
		return dis>a.dis;
	}
};

priority_queue<dd> H;
int g[300011],next[600011],y[600011],len[600011];
ll d[600011];
int last[600011];
bool vis[600011];
int tt,n,m,i,x,z,q,st;
ll ans;

struct Edge{
	int x,z,q;
}ed[600011];

void star(int i,int j,int k)
{
	tt++;
	next[tt]=g[i];
	g[i]=tt;
	y[tt]=j;
	len[tt]=k;
}

void Dij(int st)
{
	dd tp;
	int j,k;
	memset(d,127,sizeof(d));
	H.push(dd(0,st));
	d[st]=0;
	while(!H.empty()){
		tp=H.top();
		H.pop();
		if(vis[tp.x])continue;
		vis[tp.x]=true;
		j=g[tp.x];
		while(j!=0){
			k=y[j];
			if(d[tp.x]+len[j]<d[k]){
				d[k]=d[tp.x]+len[j];
				last[k]=j;
				H.push(dd(d[k],k));
			}
			else if(d[tp.x]+len[j]==d[k]){
				if(len[j]<len[last[k]])last[k]=j;
			}
			j=next[j];
		}
	}
}

int main()
{
	scanf("%d%d",&n,&m);
	tt=1;
	for(i=1;i<=m;i++){
		scanf("%d%d%d",&x,&z,&q);
		star(x,z,q);
		star(z,x,q);
		ed[i].x=x;ed[i].z=z;ed[i].q=q;
	}
	scanf("%d",&st);
	Dij(st);
	for(i=1;i<=n;i++)if(i!=st)ans+=len[last[i]];
	printf("%I64d\n",ans);
	for(i=1;i<=n;i++)if(i!=st)printf("%d ",last[i]/2);
}
	 	     	  	  			  	 	 	 			 	