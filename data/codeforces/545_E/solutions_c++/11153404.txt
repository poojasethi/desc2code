#include<cstdio>
#include<vector>
#include<queue>

std::vector<std::pair<std::pair<int,int>,int> > g[333333];
long long d[333333];
int v[333333];

int r[333333],rn;

int main()
{
    std::priority_queue<std::pair<long long,int> > pq;
    std::pair<long long,int> p;
    int i,j,k,n,m,t;
    long long sum=0;
    scanf("%d%d",&n,&m);
    for(t=1;t<=m;t++)
    {
        scanf("%d%d%d",&i,&j,&k);
        g[i].push_back(std::make_pair(std::make_pair(j,k),t));
        g[j].push_back(std::make_pair(std::make_pair(i,k),t));
    }
    scanf("%d",&t);
    pq.push(std::make_pair(0LL,t));
    while(!pq.empty())
    {
        p = pq.top();
        pq.pop();
        if(v[p.second])continue;
        v[p.second]=1;
        d[p.second]=-p.first;
        for(i=0;i<g[p.second].size();i++)pq.push(std::make_pair(p.first-g[p.second][i].first.second,g[p.second][i].first.first));
    }
    for(i=1;i<=n;i++)if(d[i])
    {
        t=-1;
        for(j=0;j<g[i].size();j++)if(d[g[i][j].first.first]+g[i][j].first.second==d[i])
            if(t==-1||g[i][j].first.second<g[i][t].first.second)t=j;
        r[rn++]=g[i][t].second;
        sum+=g[i][t].first.second;
    }
    printf("%I64d\n",sum);
    for(i=0;i<rn;i++)printf("%d ",r[i]);
}
