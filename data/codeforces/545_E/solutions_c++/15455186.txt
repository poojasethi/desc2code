#include <bits/stdc++.h>
using namespace std;
const int N = 3e5+15;
vector< pair<pair<int,int>,pair<int,int> > >adj[N];
#define mp make_pair
#define y second
#define x first
#define ll long long
#define pp pair<pair<ll,int>,pair<int,int> >
#define ppp pair<ll , pair<int,int> >
bool visit[N];
int weight[N], last[N]; long long dis[N];
void solve(int u){
	priority_queue<ppp> q;
	visit[u]=true;
	int j,v,a,b,i;
	ll w;
	q.push(mp(0,mp(u,-1)));
	while(!q.empty()){
		ppp t= q.top();q.pop();
		v = t.y.x;w= -t.x;
		if(dis[v]<w)continue;
		if(dis[v]!=w)
		dis[v]=w,last[v]= t.y.y;
		else{
			ll p = weight[last[v]],c =weight[t.y.y];
			if(p>c)
				last[v]= t.y.y;
			continue;
		}
		for(j=0;j<adj[v].size();++j){
			a= adj[v][j].y.x;if(a==v)a= adj[v][j].y.y;
			if(w-adj[v][j].x.x<dis[a])
			q.push(mp(-w+adj[v][j].x.x,mp(a,adj[v][j].x.y)));
		}
	}
}
int main(){
	int v,u,n,m,i,j,a,b,w;cin>>n>>m;
	vector<int> ret;
	for(i=1;i<=m;++i)
		cin>>a>>b>>w,adj[a].push_back(mp( mp(-w,i),mp(a,b)) ),adj[b].push_back(mp( mp(-w,i),mp(a,b))),weight[i]=w;
	cin>>u;
	for(i=1;i<=n;++i)
		dis[i]= 1e15;
	for(i=1;i<=n;++i)
		sort(adj[i].begin(),adj[i].end());
	solve(u);
	ll sum=0;
	for(i=1;i<=n;++i)
		if(i!=u)
			ret.push_back(last[i]),sum+=weight[last[i]];
	cout<<sum<<endl;
	for(i=0;i<ret.size();++i)
		cout<<ret[i]<<" ";
}
