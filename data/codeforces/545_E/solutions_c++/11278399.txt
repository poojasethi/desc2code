#include<bits/stdc++.h>

using namespace std;

#define int long long
#define mp make_pair
#define pb push_back
#define st first
#define nd second

int n,m,k,i,j,x,y,v,val,l,w,u,anns;

vector<pair<int,int> > V[300005];

vector<int> ans;

bool H[300005];

priority_queue<pair<pair<int,int> , pair<int,int> > > PQ;

map<pair<int,int>,pair<int,int> > E;


main(){

	cin>>n>>m;

	for(i=1 ; i<=m ; i++){
		scanf("%lld %lld %lld",&x,&y,&v);
		V[x].pb(mp(v,y));
		V[y].pb(mp(v,x));
		E[mp(x,y)]=mp(v,i);
		E[mp(y,x)]=mp(v,i);
	}

	cin>>u;

	PQ.push(mp(mp(0,0),mp(0,u)));

	while(!PQ.empty()){
		
		val=-PQ.top().st.st;
		l=-PQ.top().st.nd;
		w=PQ.top().nd.st;
		x=PQ.top().nd.nd;

		PQ.pop();

		if(H[x])
			continue;

		H[x] = 1;

		anns += E[mp(x,w)].st;

		ans.pb(E[mp(x,w)].nd);

		for(i=0 ; i<V[x].size() ; i++)
			if(!H[V[x][i].nd])
				PQ.push(mp(mp(-val-V[x][i].st,-V[x][i].st),mp(x,V[x][i].nd)));

	}

	cout << anns << endl;

	for(i=1 ; i<ans.size() ; i++)
		cout << ans[i] << ' ';

	cout << endl;
}
