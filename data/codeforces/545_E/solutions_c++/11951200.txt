#include<bits/stdc++.h>
#define pb push_back
using namespace std;
typedef long long ll;
typedef pair<ll,ll> P;
const int maxv=3e5+40;
struct edge{
	ll f,t;
	ll w,o;
};
int n,m;
vector<edge> G[maxv];
edge es[maxv];
ll dis[maxv];
int ans[maxv];
priority_queue<P,vector<P>,greater<P> > Q;
void dij(int s){
	memset(dis,0x2f,sizeof dis);
	dis[s]=0;
	Q.push(P(0,s));
	while(!Q.empty()){
		ll u=Q.top().second;
		ll d=Q.top().first;
		Q.pop();
		if(d>dis[u]) continue;
		for(int i=0;i<G[u].size();i++){
			edge &e=G[u][i];
			if(dis[u]+e.w<dis[e.t]){
				dis[e.t]=dis[u]+e.w;
				Q.push(P(dis[e.t],e.t));
				ans[e.t]=e.o;
			}else if(dis[u]+e.w==dis[e.t]){
				if(e.w<es[ans[e.t]].w)
					ans[e.t]=e.o;
			}
		}
	}
}
int u;
int main(){
	/////freopen("/home/files/CppFiles/in","r",stdin);
	cin>>n>>m;
	for(int i=1;i<=m;i++){
		int u,v,w;
		scanf("%d%d%d",&u,&v,&w);
		es[i]=(edge){u,v,w,i};
		G[u].pb((edge){u,v,w,i});
		G[v].pb((edge){v,u,w,i});
	}
	cin>>u;
	dij(u);
	ll tol=0;
	for(int i=1;i<=n;i++){
		if(i!=u){
			tol+=es[ans[i]].w;
		}
	}
	cout<<tol<<endl;
	for(int i=1;i<=n;i++){
		if(i!=u)
			printf("%d ",ans[i]);
	}
	return 0;
}

                                                                                                                                                                                                