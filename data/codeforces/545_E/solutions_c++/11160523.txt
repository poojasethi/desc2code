#include<cstdio>
#include<cstring>
#include<vector>
#include<queue>
#define MAX 300005
#define LL long long
using namespace std;
int n,m,u,v,w,st;
vector<int>g[MAX],e[MAX];
vector<int>id[MAX];
queue<int>q;
int inq[MAX],pre[MAX],from[MAX];
LL dis[MAX],sum;
int list[MAX],tot;
int main()
{
	scanf("%d%d",&n,&m);
	for (int i=1;i<=m;i++)
	{
		scanf("%d%d%d",&u,&v,&w);
		g[u].push_back(v);e[u].push_back(w);
		id[u].push_back(i);
		g[v].push_back(u);e[v].push_back(w);
		id[v].push_back(i);
	}
	scanf("%d",&st);
	memset(dis,0x3f,sizeof(dis));
	inq[st]=1;dis[st]=0LL;q.push(st);
	while (!q.empty())
	{
		u=q.front();q.pop();inq[u]=0;
		for (int i=0;i<g[u].size();i++)
		if (dis[u]+(LL)e[u][i]<dis[g[u][i]])
		{
			dis[g[u][i]]=dis[u]+(LL)e[u][i];
			pre[g[u][i]]=id[u][i];
			from[g[u][i]]=e[u][i];
			if (!inq[g[u][i]])
			{
				inq[g[u][i]]=1;
				q.push(g[u][i]);
			}
		}
		else if (dis[u]+(LL)e[u][i]==dis[g[u][i]]&&e[u][i]<from[g[u][i]])
		{
			pre[g[u][i]]=id[u][i];
			from[g[u][i]]=e[u][i];
		}
	}
	for (int i=1;i<=n;i++)
	if (i!=st)
	{
		list[++tot]=pre[i];
		sum+=(LL)from[i];
	}
	printf("%I64d\n",sum);
	for (int i=1;i<=tot;i++)printf("%d ",list[i]);
}
