#include "stdio.h"
#include "vector"
#include "queue"
#define edge pair<long long,long long>
#define state pair<edge,int>
#define superedge pair<edge,edge>
#define f first
#define s second
using namespace std;
class compare{
    public: bool operator ()(superedge x,superedge y){
        return x.f.s>y.f.s||(x.f.s==y.f.s&&x.s.f>y.s.f);
    };
};
vector<state> g[300001];
int main(){
    int n,m,x,y,w;
    scanf("%d %d",&n,&m);
    for(int i=0;i<m;i++){
        scanf("%d %d %d",&x,&y,&w);
        g[x].push_back(state(edge(y,w),i+1));
        g[y].push_back(state(edge(x,w),i+1));
    }
    scanf("%d",&x);
    vector<bool> check(n+1,false);
    vector<int> ans;
    priority_queue<superedge,vector<superedge>,compare> q;
    long long sum=0;
    q.push(superedge(edge(x,0),edge(0,0)));
    while(!q.empty()){
        superedge p=q.top();
        q.pop();
        if(check[p.f.f]) continue;
        check[p.f.f]=true;
        sum+=p.s.f;
        ans.push_back(p.s.s);
        for(int i=0;i<g[p.f.f].size();i++) q.push(superedge(edge(g[p.f.f][i].f.f,p.f.s+g[p.f.f][i].f.s),edge(g[p.f.f][i].f.s,g[p.f.f][i].s)));
    }
    printf("%I64d\n",sum);
    for(int i=1;i<ans.size();i++) printf("%d ",ans[i]);
}

			   		 	   					 	   	 				 	