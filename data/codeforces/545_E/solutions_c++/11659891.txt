#include <cstdio>
#include <algorithm>
using namespace std;
struct data{long long x,y,s,id,next;} e[1000010];
long long dis[300010],v[300010],pre[300010],W[1000010],head[300010],q[10000010];
long long x,y,s,n,m,h,t,S,cnt;
void Insert(long long x,long long y,long long s,long long id){
	e[++cnt].x =x;e[cnt].y = y;e[cnt].s = s;e[cnt].id = id;
	e[cnt].next = head[x];head[x] = cnt;
}
void Spfa(){
	for (long long i=1;i<=n;i++) dis[i] = 1e16;
	dis[S] = 0;q[1] = S;h = 0;t = 1;v[S] = 1;
	while (h<t){
		long long now = q[++h];v[now] = 0;
		for (long long i=head[now];i;i=e[i].next){
			if (dis[now]+e[i].s<dis[e[i].y]){
				dis[e[i].y] = dis[now]+e[i].s;
				pre[e[i].y] = e[i].id;
				if (!v[e[i].y]) {v[e[i].y] = 1;q[++t] = e[i].y;}
			}
			else if (dis[now]+e[i].s==dis[e[i].y] && e[i].s<W[pre[e[i].y]]){
				pre[e[i].y] = e[i].id;
				if (!v[e[i].y]) {v[e[i].y] = 1;q[++t] = e[i].y;}
			}
		}
	}
}
int main(){
	scanf("%I64d%I64d",&n,&m);
	for (long long i=1;i<=m;i++){
		scanf("%I64d%I64d%I64d",&x,&y,&s);
		Insert(x,y,s,i);Insert(y,x,s,i);
		W[i] = s;
	}
	scanf("%I64d",&S);
	Spfa();
	long long sum = 0;
	for (long long i=1;i<=n;i++) sum+=W[pre[i]];
	printf("%I64d\n",sum);
	for (long long i=1;i<=n;i++)
		if (pre[i]) printf("%I64d ",pre[i]);
}
