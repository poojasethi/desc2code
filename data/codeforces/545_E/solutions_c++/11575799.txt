#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<queue>
#define mp std::make_pair
#define sc second
#define fr first
#define ll long long
#define INF 10000000000000007
std::priority_queue<std::pair<ll,int> >pq;
int fa[600010],next[600010],link[300010],pre[300010],e;
bool vis[300010],used[300010];
ll w[600010],dis[600010];
void add(int x,int y,int z){
    fa[++e]=y;next[e]=link[x];link[x]=e;w[e]=(ll)z;
    fa[++e]=x;next[e]=link[y];link[y]=e;w[e]=(ll)z;
}
int main(){
    int n,m,x,y,z;ll ans=0LL;e=0;
    scanf("%d%d",&n,&m);w[0]=0;
    for (int i=1;i<=m;i++) scanf("%d%d%d",&x,&y,&z),add(x,y,z);
    scanf("%d",&x);pq.push(mp(0LL,x));  
    memset(vis,false,sizeof(vis));
    memset(used,false,sizeof(used));
    for (int i=1;i<=n;i++) dis[i]=INF,pre[i]=0;dis[x]=0;
    std::pair<ll,int> p;
    while (!pq.empty()){
        p=pq.top();pq.pop();
        if (vis[p.sc]) continue;vis[p.sc]=true;
        ans+=w[pre[p.sc]];used[(pre[p.sc]+1)/2]=true;
        for (int i=link[p.sc];i;i=next[i]) if (dis[p.sc]+w[i]<dis[fa[i]]||(dis[p.sc]+w[i]==dis[fa[i]]&&w[i]<w[pre[fa[i]]])){
            dis[fa[i]]=dis[p.sc]+w[i];pre[fa[i]]=i;pq.push(mp(-dis[fa[i]],fa[i]));
        }
    }
    printf("%I64d\n",ans);
    for (int i=1;i<=m;i++) if (used[i]) printf("%d ",i); 
    return 0;
}