#include <iostream>
#include <algorithm>
#include <cstring>
using namespace std;
int n,m,r,g[64][64],t[1024][64][64];
int main(void){
  cin>>n>>m>>r;
  memset(t,0x3f,sizeof(t));
  for(int i=0;i<m;++i){
    for(int u=0;u<n;++u)for(int v=0;v<n;++v)cin>>g[u][v];
    for(int u=0;u<n;++u)for(int v=0;v<n;++v)for(int w=0;w<n;++w)
      g[v][w]=min(g[v][w],g[v][u]+g[u][w]);
    for(int u=0;u<n;++u)for(int v=0;v<n;++v)t[0][u][v]=min(t[0][u][v],g[u][v]);
  }
  for(int i=0;i<1010;++i)for(int u=0;u<n;++u)for(int v=0;v<n;++v)for(int w=0;w<n;++w)
    t[i+1][u][v]=min(t[i+1][u][v],t[i][u][w]+t[0][w][v]);
  for(int i=0,x,y,z;i<r&&cin>>x>>y>>z;++i)cout<<t[z][x-1][y-1]<<endl;
  return 0;
}
