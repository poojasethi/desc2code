#include <set>
#include <cstdio>
#define REP(i,n) for(int i=0; i<(int)(n); i++)

inline int getInt(){ int s; scanf("%d", &s); return s; }

using namespace std;

int g[60][60][60];
int memo[1001][60][60];

int main(){
  int n = getInt();
  int m = getInt();
  int r = getInt();

  REP(c,m){
    REP(i,n) REP(j,n)
      g[c][i][j] = getInt();
    REP(k,n) REP(i,n) REP(j,n)
      g[c][i][j] = min(g[c][i][j], g[c][i][k] + g[c][k][j]);
  }

  REP(c,1001) REP(i,n) REP(j,n) memo[c][i][j] = 10000000;
  REP(c,m) REP(i,n) REP(j,n)
    memo[0][i][j] = min(memo[0][i][j], g[c][i][j]);

  REP(c,1000){
    REP(i,n) REP(j,n) REP(k,n)
      memo[c + 1][i][j] = min(memo[c + 1][i][j], memo[c][i][k] + memo[0][k][j]);
  }

  REP(rr,r){
    int s = getInt() - 1;
    int e = getInt() - 1;
    int k = getInt();

    printf("%d\n", memo[k][s][e]);
  }

  return 0;
}
