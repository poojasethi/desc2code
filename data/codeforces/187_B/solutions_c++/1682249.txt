#include <stdio.h>
#define min(a, b) (((a) < (b)) ? (a) : (b))
#define FOR(i, s, t) for (int i = (s); i < (t); i++)
int n, m, r;
int mat[61][61], opt[61][61][61];
int main() {
	scanf("%d%d%d", &n, &m, &r);
	FOR (i, 0, n) FOR (j, 0, n) FOR (k, 0, n) opt[i][j][k] = 1000000000;
	FOR (k, 0, m) {
		FOR (i, 0, n) FOR (j, 0, n) scanf("%d", &mat[i][j]);
		FOR (k, 0, n) FOR (i, 0, n) FOR (j, 0, n) mat[i][j] = min(mat[i][j], mat[i][k] + mat[k][j]);
		FOR (i, 0, n) FOR (j, 0, n) opt[i][j][0] = min(opt[i][j][0], mat[i][j]);
	}
	FOR (p, 1, n) FOR (i, 0, n) FOR (j, 0, n) FOR (k, 0, n) opt[i][j][p] = min(opt[i][j][p], opt[i][k][p - 1] + opt[k][j][0]);
	while (r--) {
		int u, v, k;
		scanf("%d%d%d", &u, &v, &k);
		printf("%d\n", opt[u - 1][v - 1][min(k, n - 1)]);
	}
	return 0;
}
