#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
using namespace std;
int n,m,task,w1[62][62],ff[62][62][62];
void get_min(int &u,int v)
{
	if (u>v||u==(-1)) u=v;
}
int main()
{
	int i,j,k,l;
	scanf("%d%d%d",&n,&m,&task);
	memset(ff,-1,sizeof(ff));
	for (l=0;l<m;++l)
	{
		for (i=1;i<=n;++i)
			for (j=1;j<=n;++j)
				scanf("%d",&w1[i][j]);
		for (k=1;k<=n;++k)
			for (i=1;i<=n;++i)
				for (j=1;j<=n;++j)
					get_min(w1[i][j],w1[i][k]+w1[k][j]);
		for (i=1;i<=n;++i)
			for (j=1;j<=n;++j)
				get_min(ff[i][j][0],w1[i][j]);
	}
	for (l=1;l<=n;++l)
		for (k=1;k<=n;++k)
			for (i=1;i<=n;++i)	
				for (j=1;j<=n;++j)
					get_min(ff[i][j][l],ff[i][k][l-1]+ff[k][j][0]);
	int sa,ta,ka;
	for (;task--;)
	{
		scanf("%d%d%d",&sa,&ta,&ka);
		if (ka>n) ka=n;
		printf("%d\n",ff[sa][ta][ka]);
	}
	return 0;
}
