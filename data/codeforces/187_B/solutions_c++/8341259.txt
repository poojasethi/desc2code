#include<cstdio>
#include<cstdlib>
#include<algorithm>
#define rep(i,n) for(int i=1;i<=n;i++)
#define inf (1LL<<50)
#define N 65
using namespace std;
long long g[N][N],ans[N][N],f[1005][N][N];
int n,m,R;
void doit(){
	rep(k,n) rep(i,n)
	if(i!=k) rep(j,n)
	if(i!=j&&j!=k) g[i][j]=min(g[i][j],g[i][k]+g[k][j]);
}
int main(){
	scanf("%d%d%d",&n,&m,&R);
	rep(j,n) rep(k,n) ans[j][k]=inf;
	rep(i,m){
		rep(j,n) rep(k,n) scanf("%I64d",&g[j][k]);
		doit();
		rep(j,n) rep(k,n) ans[j][k]=min(ans[j][k],g[j][k]);
	}
//	rep(j,n){rep(k,n) printf("%I64d ",ans[j][k]); printf(" ans\n");}
	rep(j,n) rep(k,n) f[0][j][k]=ans[j][k];
	rep(t,1000){
		rep(i,n) rep(j,n) f[t][i][j]=f[t-1][i][j];
		rep(k,n) rep(i,n)
		if(k!=i) rep(j,n)
		if(j!=i&&j!=k) f[t][i][j]=min(f[t][i][j],f[t-1][i][k]+ans[k][j]);
	}
	while(R--){
		int x,y,t;
		scanf("%d%d%d",&x,&y,&t);
		printf("%I64d\n",f[t][x][y]);
	}
}