#include <cstdio>
#include <algorithm>
#include <iostream>
#include <cstring>
using namespace std;
typedef long long LL;
int n,m,r;
int b[105][105][105];
int d[1005][65][65];

int main(){
	cin>>n>>m>>r;
	memset(d,10,sizeof(d));
	for (int c=0;c<m;c++){
		for (int i=0;i<n;i++)
			for (int j=0;j<n;j++)
				cin>>b[c][i][j];
		for (int k=0;k<n;k++)
			for (int i=0;i<n;i++)
				for (int j=0;j<n;j++)
					b[c][i][j]=min(b[c][i][j],b[c][i][k]+b[c][k][j]);
			for (int i=0;i<n;i++)
				for (int j=0;j<n;j++)
					d[0][i][j]=min(d[0][i][j],b[c][i][j]);
	}
	for (int c=1;c<=1000;c++)
		for (int k=0;k<n;k++)
			for (int i=0;i<n;i++)
				//if (i!=k)
				for (int j=0;j<n;j++)
					//if (j!=k&&j!=i)
					d[c][i][j]=min(d[c][i][j],d[c-1][i][k]+d[0][k][j]);
	int x,y,z;
	for (int i=0;i<r;i++){
		cin>>x>>y>>z;
		cout<<d[z][--x][--y]<<endl;
	}
}
    	     				 	 				  			