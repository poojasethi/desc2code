#include<cstdio>
#include<algorithm>

#define rep(i,n) for(int i=0;i<(n);i++)

using namespace std;

const int INF=1<<29;

int main(){
    int n,m,q; scanf("%d%d%d",&n,&m,&q);

    static int d[1001][60][60];
    rep(t,1001) rep(i,n) rep(j,n) d[t][i][j]=INF;
    {
        rep(_,m){
            int d_tmp[60][60];
            rep(i,n) rep(j,n) scanf("%d",d_tmp[i]+j);
            rep(k,n) rep(i,n) rep(j,n) d_tmp[i][j]=min(d_tmp[i][j],d_tmp[i][k]+d_tmp[k][j]);
            rep(i,n) rep(j,n) d[0][i][j]=min(d[0][i][j],d_tmp[i][j]);
        }
    }

    rep(t,1000) rep(i,n) rep(j,n) rep(k,n) d[t+1][i][j]=min(d[t+1][i][j],d[t][i][k]+d[0][k][j]);

    while(q--){
        int s,t,ch; scanf("%d%d%d",&s,&t,&ch); s--; t--;
        printf("%d\n",d[ch][s][t]);
    }

    return 0;
}