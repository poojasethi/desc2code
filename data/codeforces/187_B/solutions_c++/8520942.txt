#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <stdio.h>
using namespace std;
int main(){
  //freopen("input.txt","r",stdin);
  //freopen("output.txt","w",stdout);
  int q,w,e,r,t,c,v,y,a[60][60][60],s[60][60];
  cin>>q>>y>>t;
  for(e=0;e<q;e++)
   for(r=0;r<q;r++)
    for(c=0;c<q;c++)
     a[e][r][c]=70000000;
  for(w=0;w<y;w++){
   for(e=0;e<q;e++)
    for(r=0;r<q;r++)
     scanf("%d",&s[e][r]);
   for(c=0;c<q;c++)
    for(e=0;e<q;e++)
     for(r=0;r<q;r++)
      s[e][r]=min(s[e][r],s[e][c]+s[c][r]);
   for(e=0;e<q;e++)
    for(r=0;r<q;r++)
     a[0][e][r]=min(a[0][e][r],s[e][r]);}
  for(w=1;w<q;w++)
   for(c=0;c<q;c++)
    for(e=0;e<q;e++)
     for(r=0;r<q;r++)
      for(v=0;v<w;v++)
       a[w][e][r]=min(a[w][e][r],a[v][e][c]+a[w-v-1][c][r]);
  for(;t;t--){
   scanf("%d%d%d",&e,&r,&c);
   e--;r--;
   v=a[0][e][r];
   for(w=min(q-1,c);w;w--)
    v=min(v,a[w][e][r]);
   printf("%d\n",v);}
  return 0;}
