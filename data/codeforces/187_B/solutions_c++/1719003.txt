#include <stdio.h>
#define maxn 2000000000
#define min(a,b) (a)<(b)?(a):(b)

int main()
{
	int n,m,p,i,j,k,mins,i1,i2,r,time,a[62][62][62],f[62][62][62];
	scanf("%d %d %d",&n,&m,&r);
	for (p=1;p<=m;p++)
	for (i=1;i<=n;i++)
	for (j=1;j<=n;j++)
	scanf("%d",&a[i][j][p]);
	
	
	//Floyd
	for (p=1;p<=m;p++)
	for (k=1;k<=n;k++)
	for (i=1;i<=n;i++)
	for (j=1;j<=n;j++)
	if (i!=j && j!=k && k!=i)
	a[i][j][p]=min(a[i][j][p],a[i][k][p]+a[k][j][p]);
	
	for (i=1;i<=n;i++)
	for (j=1;j<=n;j++)
	if (i!=j)
	{
		mins=maxn;
		for (p=1;p<=m;p++)
		{
			if (a[i][j][p]<mins)
			mins=a[i][j][p];
		}
		f[i][j][0]=mins;
	}
	
	for (k=1;k<=n-2;k++)
	for (i=1;i<=n;i++)
	for (j=1;j<=n;j++)
	if (i!=j)
	{
		f[i][j][k]=f[i][j][k-1];
		for (p=1;p<=n;p++)
		if (i!=p && p!=j)
		f[i][j][k]=min(f[i][j][k],f[i][p][k-1]+f[p][j][0]);
	}
	
	for (i=1;i<=r;i++)
	{
		scanf("%d %d %d",&i1,&i2,&time);
		if (time>=n-1) time=n-2;
		printf("%d\n",f[i1][i2][time]);
	}
//	while (1);
	return 0;
}
   				 				 	 			 		 			