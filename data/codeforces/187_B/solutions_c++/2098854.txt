#include<cmath>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<iostream>
#include<algorithm>
using namespace std;

int d[65][65][65],f[65][65][65];
int n,m,r,i,j,k,l;


int main()
{
	scanf("%d %d %d\n",&n,&m,&r);
	for (i=1;i<=m;i++)
		for (j=1;j<=n;j++)
			for (k=1;k<=n;k++) scanf("%d",&d[i][j][k]);
	for (l=1;l<=m;l++)
		for (k=1;k<=n;k++)
			for (i=1;i<=n;i++)
				for (j=1;j<=n;j++)
				d[l][i][j]=min(d[l][i][j],d[l][i][k]+d[l][k][j]);
	
	memset(f,127,sizeof(f));
	
	for (i=1;i<=n;i++)
		for (j=1;j<=n;j++)
			for (k=1;k<=m;k++) f[0][i][j]=min(f[0][i][j],d[k][i][j]);

	for (l=1;l<n;l++)		
		for (k=1;k<=n;k++)
			for (i=1;i<=n;i++)
				for (j=1;j<=n;j++) f[l][i][j]=min(f[l][i][j],f[l-1][i][k]+f[0][k][j]);
	
	for (l=0;l<r;l++)
	{
		scanf("%d %d %d\n",&i,&j,&k);
		k=min(k,n-1);
		printf("%d\n",f[k][i][j]);
	}

	return 0;
}
