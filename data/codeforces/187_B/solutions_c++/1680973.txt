#include <stdio.h>
#include <string.h>
#include <algorithm>
using namespace std;
#define REP(i,n) for(int(i)=1;(i)<=(int)(n);(i)++)
typedef long long ll;
const int MAX=61;
const int INF=(int)2*1e9;
int n,m,r,d[MAX][MAX][MAX],ret[MAX][MAX][MAX];
int main()
{
	scanf("%d%d%d",&n,&m,&r);
	REP(t,m) REP(u,n) REP(v,n) scanf("%d",&d[t][u][v]);
	REP(t,m) REP(i,n) REP(u,n) REP(v,n) //floyd
		d[t][u][v]=min(d[t][u][v],d[t][u][i]+d[t][i][v]);
	REP(u,n) REP(v,n) {
		ret[0][u][v]=INF;
		REP(t,m) ret[0][u][v]=min(ret[0][u][v],d[t][u][v]);
	}
	REP(k,n) REP(u,n) REP(v,n) {
		if (u==v) continue;
		ret[k][u][v]=INF;
		REP(i,n) ret[k][u][v]=min(ret[k][u][v],ret[0][u][i]+ret[k-1][i][v]);
	}
	int ss,tt,cnt;
	while (r--) {
		scanf("%d%d%d",&ss,&tt,&cnt);
		if (cnt>n) cnt=n;
		printf("%d\n",ret[cnt][ss][tt]);
	}
	return 0;
}
