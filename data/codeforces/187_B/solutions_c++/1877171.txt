#include <iostream>
#include <cstdio>
#include <cstring>
#include <climits>
#define FOR(i, n) for (int i = 0; i < (n); ++i)
using namespace std;

int n, m, r, g[60][60][60], dp[1001][60][60], ck, ts, tt, tk;

int main() {
	scanf("%d%d%d", &n, &m, &r);
	FOR (i, n) FOR (j, n) dp[0][i][j] = INT_MAX;
	FOR (c, m) {
		FOR (i, n) FOR (j, n) scanf("%d", &g[c][i][j]);
		FOR (k, n) FOR (i, n) FOR (j, n)
			g[c][i][j] = min(g[c][i][j], g[c][i][k] + g[c][k][j]);
		FOR (i, n) FOR (j, n)
			dp[0][i][j] = min(dp[0][i][j], g[c][i][j]);
	}
	FOR (tr, r) {
		scanf("%d%d%d", &ts, &tt, &tk);
		for (; ck < tk; ++ck) {
			FOR (i, n) FOR (j, n) dp[ck + 1][i][j] = dp[ck][i][j];
			FOR (k, n) FOR (i, n) FOR (j, n)
				dp[ck + 1][i][j] = min(dp[ck + 1][i][j], dp[ck][i][k] + dp[0][k][j]);
		}
		printf("%d\n", dp[tk][ts - 1][tt - 1]);
	}
	return 0;
}
