#include <cstdio>
#define rep(i,n) for(int i=0;i<n;i++)
#define gi(n) scanf("%d",&n)
#define min(a,b) (a<b?a:b)
#define N 65
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
int y[N][N],d[N][N],a[N][N][N];
int main() {
    int n,m,r,u,v,k;
    gi(n); gi(m); gi(r);
    rep(t,m) {
        rep(i,n) rep(j,n) gi(y[i][j]);
        rep(k,n) rep(i,n) rep(j,n) y[i][j] = min(y[i][j], y[i][k] + y[k][j]);
        rep(i,n) rep(j,n) if(t==0 || d[i][j]>y[i][j]) d[i][j] = y[i][j];
    }
    rep(i,n) rep(j,n) rep(k,n+1) a[i][j][k] = d[i][j];
    rep(k,n+1) if(k) rep(i,n) rep(j,n) rep(u,n) a[i][j][k] = min(a[i][j][k], a[i][u][k-1]+d[u][j]);
    rep(i,r) { gi(u); gi(v); gi(k); printf("%d\n",a[u-1][v-1][min(k,n)]); }
    return 0;
}