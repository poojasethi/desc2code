#include<cstdio>
#include<iostream>
#include<algorithm>
using namespace std;
int f[60][60][60];
int main()
{
	int n,m,r;
	scanf("%d%d%d",&n,&m,&r);
	for(int i=0;i<m;i++)
		for(int j=0;j<n;j++)
			for(int k=0;k<n;k++)
				scanf("%d",&f[i][j][k]);
	for(int i=0;i<m;i++)
		for(int v=0;v<n;v++)
			for(int j=0;j<n;j++)
				for(int k=0;k<n;k++)
					if(f[i][j][v]+f[i][v][k]<f[i][j][k])
						f[i][j][k]=f[i][j][v]+f[i][v][k];
	
	for(int j=0;j<n;j++)
		for(int k=0;k<n;k++)
			for(int i=1;i<m;i++)
				if(f[i][j][k]<f[0][j][k])f[0][j][k]=f[i][j][k];
	for(int i=1;i<60;i++)
		for(int j=0;j<n;j++)
			for(int k=0;k<n;k++)
			{
				f[i][j][k]=f[0][j][k];
				for(int v=0;v<n;v++)
					f[i][j][k]=min(f[i][j][k],f[i-1][j][v]+f[0][v][k]);
			}
	while(r--)
	{
		int s,t,k;
		scanf("%d%d%d",&s,&t,&k);
		if(k>59)k=59;
		printf("%d\n",f[k][s-1][t-1]);
	}
	return 0;
}
	