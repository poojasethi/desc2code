#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <set>
#include <vector>
#include <map>
#include <algorithm>
#include <string>
#include <cstring>
#include <cmath>
#include <fstream>
#include <ctime>
#include <queue>

#define X first
#define Y second
#define pii pair<int,int>

using namespace std;

const int INF = 1000000000;

int n;
string s;
int a[155], best[155], mem[155][155][155];

int rec(int l, int r, int len)
{
	int &res=mem[l][r][len];
	if ( res != -1)
		return res;
	if ( l> r)
		return res = len?-INF:0;
	res= -INF;
	if ( s[l] == s[r])
	{
		res = max(res, rec(l+1, r-1, len+1) );
		res = max(res, rec(l+1, r-1,0) + a[len*2 + (l<r)]);
	}
	for (int i=l; i<r; i++)
	{
		res = max(res, rec(l, i, len) + rec(i+1, r, 0) );
		res = max(res, rec(l, i, 0  ) + rec(i+1, r, len));
	}
	return res;
}

int main()
{	
	scanf("%d%*c", &n);
	for (int i=0; i<n; i++)
	{
		scanf("%d ", &a[i]);
		a[i] = (a[i]==-1)?-INF:a[i];
	}
	cin>>s;
	memset(mem, -1, sizeof(mem) );
	best[0]=0;
	for (int i=1; i<=n; i++)
	{
		best[i] = best[i-1];
		for (int j=0; j<i; j++)
		{
			best[i] = max(best[i], best[j] + rec(j,i-1,0));
		}
	}
	printf("%d", best[n]);
	return 0;
}
