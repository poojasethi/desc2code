#include <bits/stdc++.h>
using namespace std;
#define rep(i,a,n) for (int i=a;i<n;i++)
const int inf=1000000007;
int dp[160][160][80],a[160],n;
char s[160];
int ff(int l,int r,int c) {
	if (l>r) return c?-inf:0;
	if (~dp[l][r][c]) return dp[l][r][c];
	int &res=dp[l][r][c];
	if (c==79) {
		res=max(0,ff(l,r,0));
		rep(i,l,r) res=max(res,ff(l,i,c)+ff(i+1,r,c));
	} else {
		res=-inf;
		if(s[l]==s[r]) {
			res=max(res,ff(l+1,r-1,c+1));
			res=max(res,ff(l+1,r-1,0)+a[2*c+2-(l==r)]);
		}
		rep(i,l,r) res=max(res,ff(l,i,0)+ff(i+1,r,c)),res=max(res,ff(l,i,c)+ff(i+1,r,0));
	}
	return res;
}
int main() {
	memset(dp,-1,sizeof(dp));
	scanf("%d",&n);
	rep(i,1,n+1) {
		scanf("%d",a+i);
		if (a[i]<0) a[i]=-inf;
	}
	scanf("%s",s);
	printf("%d\n",ff(0,n-1,79));
}
