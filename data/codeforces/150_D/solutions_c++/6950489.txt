#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 160
#define int64 long long
#define inf 1000000000ll
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,l,u;
int a[N]; 
int64 f[N][N][N],g[N][N],h[N];
char p[N];
int main() {
	scanf("%d",&n);
	For(i,1,n) {
		scanf("%d",&a[i]);
		if (a[i]<0) a[i]=-inf;
	}
	scanf("%s",p+1);
	For(i,1,n)For(j,i-1,n)For(k,1,n) f[i][j][k]=-inf;
	For(i,1,n) f[i][i][1]=0,g[i][i]=a[1];
	For(l,1,n-1)For(i,1,n-l) {
		j=i+l;
		if (p[i]==p[j]) {
			f[i][j][2]=g[i+1][j-1];
			For(k,3,l+1) f[i][j][k]=f[i+1][j-1][k-2];
		}
		g[i][j]=-inf;
		For(u,i,j-1) {
			For(k,1,l+1) f[i][j][k]=max(f[i][j][k],g[i][u]+f[u+1][j][k]);
			For(k,1,l+1) f[i][j][k]=max(f[i][j][k],g[u+1][j]+f[i][u][k]);
			g[i][j]=max(g[i][j],g[i][u]+g[u+1][j]);
		}
		For(k,1,l+1) g[i][j]=max(g[i][j],f[i][j][k]+a[k]);
	}
	For(i,1,n) {
		h[i]=h[i-1];
		For(j,1,i) h[i]=max(h[i],h[j-1]+g[j][i]);
	}
	printf("%I64d\n",h[n]);
	//for(;;);
	return 0;
}
