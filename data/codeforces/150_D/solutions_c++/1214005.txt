#include<cstdio>
#include<iostream>
#include<cstring>
#define INF 1000000000
using namespace std;
char s[160];
int n,dp[160][160][80],a[160],p[160];
int get(int l,int r,int d){
    if(dp[l][r][d]!=-1) return dp[l][r][d];
    if(l>r) return d?-INF:0;
    int &t=dp[l][r][d];    
    t=-INF;
    for(int i=l+1;i<=r;i++)
        t=max(t,max(get(l,i-1,0)+get(i,r,d),get(l,i-1,d)+get(i,r,0)));
    if(s[l]==s[r])
        t=max(t,max(get(l+1,r-1,d+1),get(l+1,r-1,0)+p[2*d+(l<r)]));
    if(t<0) t=-INF;
    return t;
}
int main(){
    //freopen("in.in","r",stdin);
    cin>>n;
    for(int i=0;i<n;i++){
        cin>>p[i];
        if(p[i]<0) p[i]=-INF;
    }
    cin>>s;
    memset(dp,-1,sizeof(dp));
    for(int i=1;i<=n;i++){
        a[i]=a[i-1];
        for(int j=0;j<i;j++)
            a[i]=max(a[i],a[j]+get(j,i-1,0));
    }
    cout<<a[n]<<endl;
}
