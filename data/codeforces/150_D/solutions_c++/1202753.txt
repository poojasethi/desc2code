#include<stdio.h>
#include<string.h>
#include<algorithm>
using namespace std;
const int inf=1<<25;
int f[160][160][160];
int sum[160],a[160];
char s[160];
int n;
int find(int l,int r,int len){
    int i,res=-inf;
    if (l>r){
        if (len==0) return 0;
        return -inf;
    }
    if (f[l][r][len]!=-1) return f[l][r][len];
    if (s[l-1]==s[r-1]){
        if (l==r){
            res=max(res,find(l+1,r-1,len+1));
            res=max(res,find(l+1,r-1,0)+a[len+1]);
        }else{
            res=max(res,find(l+1,r-1,len+2));
            res=max(res,find(l+1,r-1,0)+a[len+2]);
        }
    }
    for (i=l;i<r;i++){
        res=max(res,find(l,i,len)+find(i+1,r,0));
        res=max(res,find(l,i,0)+find(i+1,r,len));
    }
    if (res<0) res=-inf;
    return f[l][r][len]=res;
}
int main(){
   // freopen("d.in","r",stdin);
    int i,j;
    scanf("%d",&n);
    for (i=1;i<=n;i++){
        scanf("%d",&a[i]);
        if (a[i]<0) a[i]=-inf;
    }
    scanf("%s",s);
    memset(f,-1,sizeof(f));
    sum[0]=0;
    for (i=1;i<=n;i++){
        sum[i]=sum[i-1];
        for (j=1;j<=i;j++)
            sum[i]=max(sum[i],sum[j-1]+find(j,i,0));
    }
    printf("%d\n",sum[n]);
    return 0;
}
