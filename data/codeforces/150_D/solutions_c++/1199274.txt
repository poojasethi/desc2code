#include <cstdio>
#include <algorithm>

using namespace std;
#define maxn 150 + 10
#define oo 1000000000

int n;
int a[maxn];
char str[maxn];

int f[maxn][maxn][maxn],g[maxn];

int main()
{
    int i,j,k,l;
    
    scanf("%d",&n);
    for( i = 1 ; i <= n ; ++i )
        scanf("%d",&a[i]);
    scanf("%s",str+1);
    
    for( i = 1 ; i <= n ; ++i )
        for( j = 1 ; j <= n ; ++j )
            for( k = 0 ; k <= n ; ++k )
                f[i][j][k] = -oo;
    for( i = 1 ; i <= n ; ++i )
        f[i+1][i][0] = 0;
    
    for( i = n ; i >= 1 ; --i )
        for( j = i ; j <= n ; ++j )
            for( k = 0 ; k <= j-i+1 ; ++k )
                {
                    if( k >= 2 && str[i] == str[j] )
                        f[i][j][k] = max(f[i][j][k],f[i+1][j-1][k-2]);
                    if( i == j && k == 1 )
                        f[i][j][k] = 0;
                    for( l = i ; l < j ; ++l )
                        {
                            f[i][j][k] = max(f[i][j][k],f[i][l][k]+f[l+1][j][0]);
                            f[i][j][k] = max(f[i][j][k],f[i][l][0]+f[l+1][j][k]);
                        }
                    if( a[k] != -1 )
                        f[i][j][0] = max(f[i][j][0],f[i][j][k]+a[k]);
                }
    
    for( i = 1 ; i <= n ; ++i )
        {
            g[i] = g[i-1];
            for( j = 1 ; j <= i ; ++j )
                g[i] = max(g[i],g[j-1]+f[j][i][0]);
        }
    printf("%d\n",g[n]);
            
    return 0;
}
