#include <cmath>
#include <cstdio>
#include <cstring>
#include <algorithm>

using namespace std;

int n,s[150010],a[150010];
bool ok[150010];

bool fg(int k) {if (k==0||k==n||(k%2==1&&a[k]<a[k+1])||(k%2==0&&a[k]>a[k+1])) return 1; else return 0;}

bool allok(int l,int r) {return l>r||s[l]==s[r];}

int calc(int k)
{
	int t=0;
	for (int i=1;i<k;i++)
	{
		swap(a[i],a[k]);
		if (fg(i-1)&&fg(i)&&fg(k-1)&&fg(k)&&allok(1,i-1)&&allok(i+1,k-1)&&allok(k+1,n)) t++;
		swap(a[i],a[k]);
	}
	for (int i=k+1;i<=n;i++)
		if (!ok[i])
		{
			swap(a[i],a[k]);
			if (fg(i-1)&&fg(i)&&fg(k-1)&&fg(k)&&allok(1,k-1)&&allok(k+1,i-1)&&allok(i+1,n)) t++;
			swap(a[i],a[k]);
		}
	return t;
}

int main()
{
	#ifndef ONLINE_JUDGE
		freopen("input.txt","r",stdin);
		freopen("output.txt","w",stdout);
	#endif
	scanf("%d",&n);
	for (int i=1;i<=n;i++) scanf("%d",&a[i]);
	int cnt=0;
	for (int i=1;i<n;i++)
		if (!fg(i))
		{
			cnt++;ok[i]=ok[i+1]=1;
		}
	if (cnt>4) {puts("0");return 0;}
	s[1]=0;
	for (int i=2;i<=n;i++)
	{
		s[i]=s[i-1];
		if (!fg(i-1)) s[i]++;
	}
	int ans=0;
	for (int i=1;i<=n;i++) if (ok[i]) ans+=calc(i);
	printf("%d\n",ans);
	return 0;
}
