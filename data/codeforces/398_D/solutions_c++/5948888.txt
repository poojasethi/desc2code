#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#include <map>
#define N 50010
#define M 500010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
struct ww {
	int p[2],x,y;
} e[M];
int i,j,k,n,m,s,q,t,nn;
int a[N],in[N],b[M],c[M],d[M],next[M],head[M],p[M],an[M],F[M],h[M];
map<int,int> mm[N];
inline void Do(int x,int y) {
	if (in[x]>in[y]||in[x]==in[y]&&x<y) swap(x,y);
	if (mm[x].count(y)) return;
	mm[x][y]=++t; d[t]=y,next[t]=head[x],head[x]=t;
}
inline void dian(int x) {
	int v;
	for (v=head[x];v;v=next[v]) if (F[v]) an[d[v]]+=p[x]?-1:1;
	p[x]^=1;
}
inline void lian(int x,int y,int t) {
	int v;
	if (in[x]>in[y]||in[x]==in[y]&&x<y) swap(x,y);
	for (v=head[x];v;v=next[v])
	if (d[v]==y) {
		F[v]=t; an[y]+=p[x]*(t?1:-1); break;
	}
}
inline void cal(int x) {
	int v,s=an[x];
	for (v=head[x];v;v=next[v])
	if (F[v]) s+=p[d[v]];
	printf("%d\n",s);
}
int main() {
	scanf("%d%d%d%d",&n,&m,&q,&nn);
	For(i,1,nn) scanf("%d",&a[i]);
	For(i,1,m) scanf("%d%d",&c[i],&h[i]),in[c[i]]++,in[h[i]]++;
	For(i,1,q) {
		scanf("%s",e[i].p);
		if (e[i].p[0]=='A'||e[i].p[0]=='D') {
			scanf("%d%d",&e[i].x,&e[i].y);
			in[e[i].x]++,in[e[i].y]++;
		} else scanf("%d",&e[i].x);
	}
	For(i,1,m) Do(c[i],h[i]);
	For(i,1,q) if (e[i].p[0]=='A'||e[i].p[0]=='D') Do(e[i].x,e[i].y);
	For(i,1,nn) dian(a[i]);
	For(i,1,m) lian(c[i],h[i],1);
	For(i,1,q) {
		if (e[i].p[0]=='O') dian(e[i].x);
		if (e[i].p[0]=='F') dian(e[i].x);
		if (e[i].p[0]=='C') cal(e[i].x);
		if (e[i].p[0]=='A') lian(e[i].x,e[i].y,1);
		if (e[i].p[0]=='D') lian(e[i].x,e[i].y,0);
	}
	//for(;;);
	return 0;
}
