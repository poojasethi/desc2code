#include<cstdio>
#include<iostream>
#include<algorithm>
#include<vector>
using namespace std;
const int maxn=50001;
int n,m,Q;
bool online[maxn]={0};
vector<int>point[maxn];
vector<int>::iterator it;
int ans[maxn]={0};
char s[3];
void add(int x,int y){
	if(point[x].size()>point[y].size())swap(x,y);
	point[x].push_back(y);
	if(online[x])ans[y]++;
}
int remove(int x,int y){
int z;
for(it=point[x].begin();it!=point[x].end();it++){
z=*it;
if(z==y){point[x].erase(it);if(online[x])ans[y]--;return 0;}
}
swap(x,y);
for(it=point[x].begin();it!=point[x].end();it++){
z=*it;
if(z==y){point[x].erase(it);if(online[x])ans[y]--;return 0;}

}
return 0;
}
int letitonline(int x){
if(online[x])return 0;
online[x]=1;
for(it=point[x].begin();it!=point[x].end();it++)ans[*it]++;
return 0;
}
int letitoffline(int x){
if(!online[x])return 0;
online[x]=0;
for(it=point[x].begin();it!=point[x].end();it++)ans[*it]--;
return 0;
}
void first(){
int num,x,y;
scanf("%d%d%d",&n,&m,&Q);
for(int i=1;i<=n;i++)point[i].clear();
scanf("%d",&num);for(int i=1;i<=num;i++){scanf("%d",&x);online[x]=1;}
while(m--){scanf("%d%d",&x,&y);add(x,y);}
}
int main(){
int x,y;
first();
while(Q--){
scanf("%s",s);
if(s[0]=='A'){scanf("%d%d",&x,&y);add(x,y);}
if(s[0]=='D'){scanf("%d%d",&x,&y);remove(x,y);}
if(s[0]=='O'){scanf("%d",&x);letitonline(x);}
if(s[0]=='F'){scanf("%d",&x);letitoffline(x);}
if(s[0]=='C'){
scanf("%d",&x);
int result=ans[x];
for(it=point[x].begin();it!=point[x].end();it++)result+=online[*it];
printf("%d\n",result);
}
}


}
