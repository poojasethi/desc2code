#include <cstdio>
#include <vector>
using namespace std;

char wasteChar;
char getch( char &c = wasteChar ){
	do { scanf("%c", &c);
	} while ( c == ' ' || c == '\n' );
	return c;
}

template < class T > void mwap( T &x, T &y ){
	T h = x;
	x = y;
	y = h;
}

int n, m, q, o, a, b, br[50100], idbr;
bool on[50100];
vector<int> v[50100], id[50100];
char comm;

void edge( int x, int y ){
	if ( v[y].size() < v[x].size() )
		mwap(x, y);
	v[x].push_back(y);
	if ( on[x] )
		++br[y];
}

void remEdge( int a, int b ){
	for ( int i = 0; i < (int)v[a].size(); i++ )
		if ( v[a][i] == b ){
			swap( v[a][i], v[a][ int(v[a].size()) - 1 ] );
			v[a].pop_back();
			if ( on[a] )
				--br[b];
			return;
		}
	for ( int i = 0; i < (int)v[b].size(); i++ )
		if ( v[b][i] == a ){
			swap( v[b][i], v[b][ int(v[b].size()) - 1 ] );
			v[b].pop_back();
			if ( on[b] )
				--br[a];
			return;
		}
}

int main(){
	scanf("%d %d %d %d", &n, &m, &q, &o);
	while ( o-- ){
		scanf("%d", &a);
		on[a] = true;
	}
	while ( m-- ){
		scanf("%d %d", &a, &b);
		edge(a, b);
	}
	while ( q-- ){
		
		getch(comm);
		
		if ( comm == 'O' ){
			scanf("%d", &a);
			on[a] = true;
			for ( int i = 0; i < int(v[a].size()); i++ )
				++ br[ v[a][i] ] ;
		}
		
		if ( comm == 'F' ){
			scanf("%d", &a);
			on[a] = false;
			for ( int i = 0; i < int(v[a].size()); i++ )
				-- br[ v[a][i] ] ;
		}
		
		if ( comm == 'A' ){
			scanf("%d %d", &a, &b);
			edge(a, b);
		}
		
		if ( comm == 'D' ){
			scanf("%d %d", &a, &b);
			remEdge(a, b);
		}
		
		if ( comm == 'C' ){
			scanf("%d", &a);
			b = br[a];
			for ( int i = 0; i < (int)v[a].size(); i++ )
				if ( on[ v[a][i] ] )
					b++;
			printf("%d\n", b);
		}
		
	}
	
	return 0;
}
