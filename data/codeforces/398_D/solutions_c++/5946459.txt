#include <cstdio>
#include <vector>

using namespace std;

const int MAXN = 50100;

int n, m, q, o, onl[MAXN], ans[MAXN];
vector<int> E[MAXN], D[MAXN];

void update (int x, int val) {
    onl[x] = val;
    int v = (val ? 1 : -1);

    for (vector<int>::iterator it = E[x].begin(); it != E[x].end(); ++it) ans[*it] += v;
    for (vector<int>::iterator it = D[x].begin(); it != D[x].end(); ++it) ans[*it] -= v;
}

int query (int x) {
    int ret = ans[x];
    for (vector<int>::iterator it = E[x].begin(); it != E[x].end(); ++it) ret += onl[*it];
    for (vector<int>::iterator it = D[x].begin(); it != D[x].end(); ++it) ret -= onl[*it];
    return ret;
}

void spoji (int a, int b, int v) {
    if (E[a].size() + D[a].size() > E[b].size() + D[b].size()) swap (a, b);
    if (v) E[a].push_back(b);
    else D[a].push_back(b);
    ans[b] += (v ? onl[a] : -onl[a]);
}

int main ()
{
    scanf ("%d%d%d%d", &n, &m, &q, &o);

    for (int i = 0; i < o; ++i) {
        int x; scanf ("%d", &x);
        onl[x-1] = 1;
    }

    for (int i = 0; i < m; ++i) {
        int a, b; scanf ("%d%d", &a, &b);
        --a; --b;
        spoji (a, b, 1);
    }

    for (int i = 0; i < q; ++i) {
        int a, b; 
        char tip[5];
        scanf ("%s%d", tip, &a); --a;
        if (tip[0] == 'O') update(a, 1);
        else if (tip[0] == 'F') update(a, 0);
        else if (tip[0] == 'A') {
            scanf ("%d", &b); --b;
            spoji (a, b, 1);
        }
        // kod deletea treba zaprvo izbrista iz vectora edge da bi svojstva bila dobra, slucajno proslo i ovako
        else if (tip[0] == 'D') {
            scanf ("%d", &b); --b;
            spoji (a, b, 0);
        }
        else printf ("%d\n", query(a));
    }

    return 0;
}

