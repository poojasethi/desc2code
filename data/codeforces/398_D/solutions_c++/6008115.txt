#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<fstream>
#include<map>
#include<ctime>
#include<set>
#include<queue>
#include<cmath>
#include<vector>
#include<bitset>
#include<functional>
#define x first
#define y second
#define mp make_pair
#define pb push_back
#define REP(i,l,r) for((i)=(l);(i)<=(r);++(i))
#define REP2(i,l,r) for((i)=(l);(i)!=(r);++(i))
using namespace std;

typedef long long LL;
typedef double ld;

const int MAX=50000+10;

int n,m,q;
int in[MAX],du[MAX],f[MAX];
set<int> ne[MAX];

int cmp(int a,int b)
{
	return (du[a]!=du[b])?(du[a]<du[b]):(a<b);
}

void add(int a,int b)
{
	++du[a];
	++du[b];
	if(cmp(b,a))
		swap(a,b);
	ne[a].insert(b);
	f[b]+=in[a];
}

void del(int a,int b)
{
	--du[a];
	--du[b];
	if(ne[a].find(b)==ne[a].end())
		swap(a,b);
	ne[a].erase(b);
	f[b]-=in[a];
}

int main()
{
#ifndef ONLINE_JUDGE
	freopen("input.txt","r",stdin);freopen("output.txt","w",stdout);
#endif
	scanf("%d%d%d",&n,&m,&q);
	int o,i;
	scanf("%d",&o);
	REP(i,1,o)
	{
		int a;
		scanf("%d",&a);
		in[a]=1;
	}
	while(m--)
	{
		int a,b;
		scanf("%d%d",&a,&b);
		add(a,b);
	}
	REP(i,1,q)
	{
		char Q[10];
		int a,b;
		scanf("%s",Q);
		if(Q[0]=='A')
		{
			scanf("%d%d",&a,&b);
			add(a,b);
		}
		else if(Q[0]=='D')
		{
			scanf("%d%d",&a,&b);
			del(a,b);
		}
		else if(Q[0]=='O')
		{
			scanf("%d",&a);
			in[a]=1;
			for(set<int>::iterator it=ne[a].begin();it!=ne[a].end();++it)
				f[*it]++;
		}
		else if(Q[0]=='F')
		{
			scanf("%d",&a);
			in[a]=0;
			for(set<int>::iterator it=ne[a].begin();it!=ne[a].end();++it)
				f[*it]--;
		}
		else
		{
			scanf("%d",&a);
			int ans=0;
			for(set<int>::iterator it=ne[a].begin();it!=ne[a].end();++it)
				ans+=in[*it];
			printf("%d\n",ans+f[a]);
		}
	}
	return 0;
}
