#include<cstdio>
#include<set>
using namespace std;

#define maxn 50010
#define FOR(c) for(it=(c).begin();it!=(c).end();it++)

set<int> s[maxn];
int online[maxn];
int cnt[maxn];

int main()
{
    int n,m,q,o;
    int x,y;
    scanf("%d%d%d%d",&n,&m,&q,&o);
    while (o--)
    {
        scanf("%d",&x);
        online[x]=1;
    }
    while (m--)
    {
        scanf("%d%d",&x,&y);
        if (s[x].size()>s[y].size()) swap(x,y);
        s[x].insert(y);
        cnt[y]+=online[x];
    }
    char op;
    set<int>::iterator it;
    int ans;
    while (q--)
    {
        scanf(" %c%d",&op,&x);
        if (op=='O')
        {
            online[x]=1;
            FOR(s[x])
                cnt[*it]++;
        }
        if (op=='F')
        {
            online[x]=0;
            FOR(s[x])
                cnt[*it]--;
        }
        if (op=='A')
        {
            scanf("%d",&y);
            if (s[x].size()>s[y].size()) swap(x,y);
            s[x].insert(y);
            cnt[y]+=online[x];
        }
        if (op=='D')
        {
            scanf("%d",&y);
            if (s[x].find(y)==s[x].end())
                swap(x,y);
            s[x].erase(y);
            cnt[y]-=online[x];
        }
        if (op=='C')
        {
            ans=cnt[x];
            FOR(s[x])
                ans+=online[*it];
            printf("%d\n",ans);
        }
    }
    return 0;
}