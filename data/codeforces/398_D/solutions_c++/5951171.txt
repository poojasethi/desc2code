#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
#include <vector>

using namespace std;

const int maxn = 60000;

int n, m, q, u, v, o;
int in[maxn], cnt[maxn];
vector<int> E[maxn], D[maxn];
char cmd[maxn];

void insert(int u, int v, int k) {
    if (E[u].size() + D[u].size() > E[v].size() + D[v].size()) swap(u, v);
    if (k == 1) E[u].push_back(v); else D[u].push_back(v);
    cnt[v] += k * in[u];
}

void rev(int u) {
    int k = 1 - 2 * in[u];
    in[u] = 1 - in[u];
    for (size_t i = 0; i < E[u].size(); i++) cnt[E[u][i]] += k;
    for (size_t i = 0; i < D[u].size(); i++) cnt[D[u][i]] -= k;
}

int calc(int u) {
    int ans = cnt[u];
    for (size_t i = 0; i < E[u].size(); i++) ans += in[E[u][i]];
    for (size_t i = 0; i < D[u].size(); i++) ans -= in[D[u][i]];
    return ans;
}

int main() {
    memset(in, 0, sizeof(in));
    memset(cnt, 0, sizeof(cnt));
    cin>>n>>m>>q>>o;
    while (o--) {
        scanf("%d", &u);
        in[u] = 1;
    }
    while (m--) {
        scanf("%d%d", &u, &v);
        insert(u, v, 1);
    }
    while (q--) {
        scanf("%s", cmd);
        scanf("%d", &u);
        if (cmd[0] == 'O' || cmd[0] == 'F') rev(u);
        else if (cmd[0] == 'A' || cmd[0] == 'D') {
            scanf("%d", &v);
            insert(u, v, cmd[0] == 'A' ? 1 : -1);
        } else cout<<calc(u)<<endl;
    }
}
