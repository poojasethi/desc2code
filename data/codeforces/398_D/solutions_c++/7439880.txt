#include <cstdio>
#include <vector>
#include <algorithm>
using namespace std;
const int maxn = 50001,limit = 632;
int a[maxn],sum[maxn],nn = 0,f[maxn];
vector<int> s[maxn],h[maxn];
void add(int x,int y)
{
	if(s[x].size() == limit){
		f[x] = ++nn;
		for(int i = 0; i < s[x].size(); ++i){
			sum[s[x][i]] -= a[x];
			h[s[x][i]].push_back(x);
		}
	}
	s[x].push_back(y);
	if(!f[x]) sum[y] += a[x];
	else h[y].push_back(x);
}
void del(int x,int y)
{
	if(f[x]){
		h[y].erase(find(h[y].begin(),h[y].end(),x));
	}
	else{
		s[x].erase(find(s[x].begin(),s[x].end(),y));
		sum[y] -= a[x];
	}
}
int main()
{
	int n,m,q,o;
	scanf("%d%d%d",&n,&m,&q);
	scanf("%d",&o);
	while(o--){
		int x;
		scanf("%d",&x);
		a[x] = 1;
	}
	while(m--){
		int x,y;
		scanf("%d%d",&x,&y);
		add(x,y);
		add(y,x);
	}
	while(q--){
		char op[2];
		int x,y;
		scanf("%s",op);
		if(op[0] == 'O'){
			scanf("%d",&x);
			a[x] = 1;
			if(!f[x])
				for(int i = 0; i < s[x].size(); ++i)
					++sum[s[x][i]];
		}
		if(op[0] == 'F'){
			scanf("%d",&x);
			if(!f[x])
				for(int i = 0; i < s[x].size(); ++i)
					--sum[s[x][i]];
			a[x] = 0;
		}
		if(op[0] == 'A'){
			scanf("%d%d",&x,&y);
			add(x,y);
			add(y,x);
		}
		if(op[0] == 'D'){
			scanf("%d%d",&x,&y);
			del(x,y);
			del(y,x);
		}
		if(op[0] == 'C'){
			scanf("%d",&x);
			int ans = sum[x];
			for(int i = 0; i < h[x].size(); ++i)
				ans += a[h[x][i]];
			printf("%d\n",ans);
		}
	}
	return 0;
}