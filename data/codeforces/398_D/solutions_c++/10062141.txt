#include<cstdio>
#include<algorithm>
#include<vector>
using namespace std;
vector<int>adj[120000],del[120000];
int n,m,x1,x2,q;
char opt[120];
int open[120000];
int ans[120000];
inline void edit(int x,int v)
{
	open[x]=v;
	if(v==1)
	{
		int tp=adj[x].size();
		for (int i=0;i<tp;i++)
		{
			ans[adj[x][i]]++;
		}
		tp=del[x].size();
		for (int i=0;i<tp;i++)
		{
			ans[del[x][i]]--;
		}
	}
	else
	{
		int tp=adj[x].size();
		for (int i=0;i<tp;i++)
		{
			ans[adj[x][i]]--;
		}
		tp=del[x].size();
		for (int i=0;i<tp;i++)
		{
			ans[del[x][i]]++;
		}
	}
}
inline void join(int x,int y)
{
	if(del[x].size()+adj[x].size()>del[y].size()+adj[y].size())swap(x,y);
	adj[x].push_back(y);
	ans[y]+=open[x];
}
inline void spilt(int x,int y)
{
	if(del[x].size()+adj[x].size()>del[y].size()+adj[y].size())swap(x,y);
	del[x].push_back(y);
	ans[y]-=open[x];
}
inline int query(int x)
{
	int res=ans[x];
	int tp=adj[x].size();
	for (int i=0;i<tp;i++)
	{
		res+=open[adj[x][i]];
	}
	tp=del[x].size();
	for (int i=0;i<tp;i++)
	{
		res-=open[del[x][i]];
	}
	return res;
}
int main()
{
	scanf("%d %d %d",&n,&m,&q);
	scanf("%d",&x1);
	for (int i=1;i<=x1;i++)
	{
		scanf("%d",&x2);
		open[x2]=1;
	}
	for (int i=1;i<=m;i++)
	{
		scanf("%d %d",&x1,&x2);
		join(x1,x2);
	}
	for (int i=1;i<=q;i++)
	{
		scanf("%s",opt+1);
		if(opt[1]=='O')scanf("%d",&x1),edit(x1,1);
		if(opt[1]=='F')scanf("%d",&x1),edit(x1,0);
		if(opt[1]=='A')scanf("%d %d",&x1,&x2),join(x1,x2);
		if(opt[1]=='D')scanf("%d %d",&x1,&x2),spilt(x1,x2);
		if(opt[1]=='C')scanf("%d",&x1),printf("%d\n",query(x1));
	}
	return 0;
}
