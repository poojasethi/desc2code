#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#include<map>
#define mk make_pair
#define N 51000
#define Q 310000
using namespace std;
map<pair<int,int> ,int>M;
int res,i,n,m,head[N],next[N*10],e[N*10],bo[N],re[Q][2],x,y,du[N],X[N*3],Y[N*3],len,ans[N],q,j,o;
char type[Q][3];
void addedge(int x,int y){
	int t=M[mk(x,y)];
	if(t)e[t]=y;
	else{
		next[++len]=head[x]; head[x]=len; e[len]=y;
		M[mk(x,y)]=len;
	}
	if(bo[x])ans[y]++;
}
void del(int x,int y){
	int t=M[mk(x,y)];
	e[t]=-1;
	if(bo[x])ans[y]--;
}
void check(int &x,int &y){
	if(du[x]>du[y])swap(x,y);
	else if(du[x]==du[y] && y<x)swap(x,y);
}
int main(){
	scanf("%d%d%d%d",&n,&m,&q,&o);
	for(i=1;i<=o;++i)scanf("%d",&x),bo[x]=1;
	for(i=1;i<=m;++i){
		scanf("%d%d",&X[i],&Y[i]);
		du[X[i]]++; du[Y[i]]++;
	}
	for(i=1;i<=q;++i){
		scanf("%s%d",type[i],&re[i][0]);
		if(type[i][0]=='A' || type[i][0]=='D')scanf("%d",&re[i][1]);
		if(type[i][0]=='A')du[re[i][0]]++,du[re[i][1]]++;
	}
	for(i=1;i<=m;++i){
		check(X[i],Y[i]);
		addedge(X[i],Y[i]);
	}
	for(i=1;i<=q;++i){
		x=re[i][0]; y=re[i][1];
		if(type[i][0]=='O'){
			bo[x]=1;
			for(j=head[x];j;j=next[j])if(e[j]!=-1)ans[e[j]]++;
		}
		if(type[i][0]=='F'){
			bo[x]=0;
			for(j=head[x];j;j=next[j])if(e[j]!=-1)ans[e[j]]--;
		}
		if(type[i][0]=='A'){
			check(x,y);
			addedge(x,y);
		}
		if(type[i][0]=='D'){
			check(x,y);
			del(x,y);
		}
		if(type[i][0]=='C'){
			int res=ans[x];
			for(j=head[x];j;j=next[j])if(e[j]!=-1 && bo[e[j]])res++;
			printf("%d\n",res);
		}
	}
}
