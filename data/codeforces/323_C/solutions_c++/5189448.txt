#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#define N 1001000
using namespace std;
int ans,n,len,lch[N*21],rch[N*21],s[N*21],a[N],b[N],rt[N],x,i,m,l1,l2,r1,r2;
int f(int x){
	return (x-1+ans)%n+1;
}
void add(int p1,int &p,int l,int r,int x){
	p=++len;
	if(l==r){
		s[p]=s[p1]+1;
		return;
	}
	int mid=l+r>>1;
	if(x<=mid)add(lch[p1],lch[p],l,mid,x),rch[p]=rch[p1];
	else add(rch[p1],rch[p],mid+1,r,x),lch[p]=lch[p1];
	s[p]=s[lch[p]]+s[rch[p]];
}
void calc(int p1,int p2,int l,int r,int x,int y){
	if(!p2)return;
	if(x<=l && y>=r){
		ans+=s[p2]-s[p1];
		return;
	}
	int mid=l+r>>1;
	if(x<=mid)calc(lch[p1],lch[p2],l,mid,x,y);
	if(y>mid)calc(rch[p1],rch[p2],mid+1,r,x,y);
}
int main(){
	scanf("%d",&n);
	for(i=1;i<=n;++i)scanf("%d",&a[i]);
	for(i=1;i<=n;++i)scanf("%d",&x),b[x]=i;
	for(i=1;i<=n;++i)a[i]=b[a[i]],add(rt[i-1],rt[i],1,n,a[i]);
	scanf("%d",&m);
	ans=-1;
	for(i=1;i<=m;++i){
		scanf("%d%d%d%d",&l1,&r1,&l2,&r2);
		ans++;
		l1=f(l1); r1=f(r1); l2=f(l2); r2=f(r2);
		if(l1>r1)swap(l1,r1); if(l2>r2)swap(l2,r2);
		ans=0;
		calc(rt[l1-1],rt[r1],1,n,l2,r2);
		printf("%d\n",ans);
	}
}
