#include <iostream>
#include<stdio.h>
#include<algorithm>
#include<string.h>
#include<vector>
#include<map>
using namespace std;
#define pb push_back
#define mp make_pair
#define x first
#define y second
#define all(x)  x.begin(),x.end()
typedef long long ll;
typedef pair<ll,ll> pii;
#define inf 1000000007
#define N 1000010
vector<int>t[N<<2];int a[N],b[N];
void ins(int p,int l,int r)
{
    if(l==r)
    {
        t[p].resize(1);
        t[p][0]=b[a[l]];
        return;
    }
    int m=(l+r)>>1;
    ins(p<<1,l,m);ins(p<<1|1,m+1,r);
    t[p].resize(t[p<<1].size()+t[p<<1|1].size());
    merge(all(t[p<<1]),all(t[p<<1|1]),t[p].begin());
}
int get(int p,int l,int r,int x,int y,int a,int b)
{
    if(y<l||x>r)return 0;
    if(l>=x&&r<=y)
    {
        return upper_bound(all(t[p]),b)-lower_bound(all(t[p]),a);
    }
    int m=(l+r)>>1;
    return get(p<<1,l,m,x,y,a,b)+get(p<<1|1,m+1,r,x,y,a,b);
}
int main()
{
    //freopen("in.txt","r",stdin);
    int i,j,n,m;
    while(~scanf("%d",&n))
    {
        for(i=1;i<=n;i++)scanf("%d",&a[i]);
        for(i=1;i<=n;i++)scanf("%d",&j),b[j]=i;
        ins(1,1,n);
        scanf("%d",&m);
        int x=0;
        while(m--)
        {
            int c,d,e,f;
            scanf("%d%d%d%d",&c,&d,&e,&f);
            c=(c-1+x)%n+1;d=(d-1+x)%n+1;
            e=(e-1+x)%n+1;f=(f-1+x)%n+1;
            int l1=min(c,d),r1=max(c,d);
            int l2=min(e,f),r2=max(e,f);
            x=get(1,1,n,l1,r1,l2,r2);
            printf("%d\n",x);
            x++;
        }
    }
    return 0;
}
