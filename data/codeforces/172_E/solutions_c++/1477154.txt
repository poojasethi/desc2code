#include <cstdio>
#include <algorithm>
#include <cstring>
#define L 12
#define K 205
#define N 400000
#define M 1000005
#define FI(a, b, c) for(int a = b; a <= c; a++)
#define FD(a, b, c) for(int a = b; a >= c; a--)
using namespace std;
typedef long long LL;

int n, f[N], o[N], v[N], t[N], e, p, x;
char s[M], q[K][L], k[N][L];

void add(int a, int b){
	v[++e] = b;
	o[e] = f[a];
	f[a] = e;
}

int main(){
	t[0] = x = 1;
	
	scanf("%s", s);
	for(int i = 0; s[i]; i++){
		int j = i;
		while(s[i] != '>') i++;
		
		if(s[j + 1] == '/'){
			add(t[p - 1], t[p]);
			strncpy(k[t[p]], s + j + 2, i - j - 2);
			p--;
		}else if(s[i - 1] == '/'){
			add(t[p], ++x);
			strncpy(k[x], s + j + 1, i - j - 2);
		}else{
			t[++p] = ++x;
		}
	}
	
	scanf("%d", &n);
	while(n--){
		scanf("\n%[^\n]", s);
		e = p = 0;
		
		for(int i = 0; ; i++){
			int j = i;
			while(s[i] != ' ' && s[i] != '\0') i++;
			
			strncpy(q[++e], s + j, i - j);
			q[e][i - j] = '\0';
			
			if(!s[i]) break;
		}
		
		FI(i, 1, x) t[i] = 0;
		FI(i, 1, x){
			if(!strcmp(k[i], q[min(t[i] + 1, e)])){
				if(t[i] + 1 >= e) p++;
				for(int j = f[i]; j; j = o[j]) t[v[j]] = min(t[i] + 1, e);
			}else for(int j = f[i]; j; j = o[j]) t[v[j]] = t[i];
		}
		printf("%d\n", p);
	}
	scanf("\n");
}
