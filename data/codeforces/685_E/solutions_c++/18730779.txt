#include <map>
#include <set>
#include <cmath>
#include <ctime>
#include <cstdio>
#include <vector>
#include <cstring>
#include <cstdlib>
#include <algorithm>

using namespace std;

#define mp make_pair
#define pb push_back
#define x first
#define y second

typedef long long ll;
typedef vector<int> vi;
typedef pair<int,int> pii;
typedef vector<pii> vpii;

int e[200010][2],a[200010],b[200010],c[200010],head[200010],next[200010],d[1010][1010];
bool ans[200010];

int main()
{
	#ifndef ONLINE_JUDGE
		freopen("input.txt","r",stdin);
		freopen("output.txt","w",stdout);
	#endif
	int n,m,q;scanf("%d%d%d",&n,&m,&q);
	for (int i=1;i<=m;i++) scanf("%d%d",&e[i][0],&e[i][1]);
	for (int i=1;i<=q;i++)
	{
		int x;scanf("%d%d%d%d",&x,&a[i],&b[i],&c[i]);
		next[i]=head[x];head[x]=i;
	}
	for (int i=1;i<=n;i++)
		for (int j=1;j<=n;j++)
			d[i][j]=m+1;
	for (int i=m;i;i--)
	{
		int x=e[i][0],y=e[i][1];
		for (int j=1;j<=n;j++)
		{
			int t=min(d[x][j],d[y][j]);
			if (x==j||y==j) t=i;
			d[x][j]=d[y][j]=t;
		}
		int p=head[i];
		while (p)
		{
			ans[p]=(d[b[p]][c[p]]<=a[p]);
			p=next[p];
		}
	}
	for (int i=1;i<=q;i++) if (ans[i]) puts("Yes"); else puts("No");
	return 0;
}
