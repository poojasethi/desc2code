#include<iostream>
#include<set>
using namespace std;
int n,m,a[100005][40],b[100005],i,j,l,x,e=1;
set<int> s;
int main()
{
char c;
cin>>n>>m;
for(i=1;i<=n;i++)
{
for(l=0;l<4;l++)
{
if(l>0) cin>>c;
cin>>x;
for(j=8;j>0;j--)
{
a[i][l*8+j-1]=x%2;
x/=2;
}
}
b[i]=a[i][0];
s.insert(b[i]);
}
for(j=1;j<31;j++)
{
if(s.size()>=m) break;
s.clear();
for(i=1;i<=n;i++) b[i]=b[i]*2+a[i][j],s.insert(b[i]);
}
if(s.size()!=m) cout<<-1;
else
{
l=0;
for(i=0;i<32;i++)
{
l=l*2+(i<j);
if(i%8==7) cout<<l<<(i<31?".":""),l=0;
}
}
return 0;
}