#include<cstdio>
#include<iostream>
#include<cstring>
#include<algorithm>
#include<map>
#define LL long long
using namespace std;
map<int,int> M;
int s[300005],n,cut[300005],p=0;
LL ps[300005];
LL ans,al,ar;
int main(){
  scanf("%d",&n);
  ps[0]=0;
  for(int i=1;i<=n;i++){
    int x;
    scanf("%d",&x);
    s[i]=x;
    ps[i]=max(0,x)+ps[i-1];
  }
  ans=-2000000007;
  for(int i=n;i>=1;i--){
    if(M.count(s[i])==0){
      M[s[i]]=i;
    }else{
      if(ps[M[s[i]]-1]-ps[i]+2*s[i] > ans){
        ans=ps[M[s[i]]-1]-ps[i]+2*s[i];
        al=i;
        ar=M[s[i]];
      }
    }
  }
  printf("%I64d",ans);
  for(int i=1;i<al;i++) cut[p++]=i;
  for(int i=al+1;i<=ar-1;i++){
    if(s[i]<0){
      cut[p++]=i;
    }
  }
  for(int i=ar+1;i<=n;i++) cut[p++]=i;
  printf(" %d\n",p);
  for(int i=0;i<p;i++) printf("%d%c",cut[i],i==p-1?'\n':' ');
  return 0;
}