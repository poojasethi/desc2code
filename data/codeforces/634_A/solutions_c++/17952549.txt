#include <bits/stdc++.h>
#define ll long long
using namespace std;

vector <int> a,b;
int main(){
    ll n,x,y; cin >> n;
    for(int i=0;i<n;i++){
        cin >> x;if(x!=0)a.push_back(x);
    }
    for(int i=0;i<n;i++){
        cin >> x;if(x!=0)b.push_back(x);
    }
    for(int j=0;j<n-1;j++)
        if(b.at(j)==a.at(0))
        {y = j;break;}
    ll m=0;
    for(int j=0;j<n-1;j++){
            if(y == n-1) y=0;
        if(a.at(m++) != b.at(y++))
            {cout<<"NO";return 0;}
    }
    cout << "YES";
}