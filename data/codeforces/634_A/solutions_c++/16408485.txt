#include <bits/stdc++.h>
using namespace std;

#define mp(x, y) make_pair((x), (y))

typedef long long ll;

int n;
int a[200005], b[200005];


int main()
{
	scanf("%d", &n);
	for(int i=0; i<n; i++) scanf("%d", &a[i]);
	for(int i=0; i<n; i++) scanf("%d", &b[i]);
	int j=0, k=0;
	while(a[j]!=1) j++;
	while(b[k]!=1) k++;
	while(1) {
		j=(j+1)%n;
		while(a[j]==0) j=(j+1)%n;
		k=(k+1)%n;
		while(b[k]==0) k=(k+1)%n;
		if(a[j]!=b[k]) {
			printf("NO\n");
			return 0;
		} else if(a[j]==1) {
			printf("YES\n");
			return 0;
		}
	}

	return 0;
}
