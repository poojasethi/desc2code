#include<iostream>
using namespace std;
int n,na,k,x,a[400001],b[200001],i;
main()
{
cin>>n;
for (i=1; i<=n; i++){
 cin>>x;
 if (x>0){
  a[++na]=x;
  a[na+n-1]=x;
 }
}



na=0;
for (i=1; i<=n; i++)
{
cin>>x;
if (x>0)
 b[++na]=x;
}




for (i=1; i<=n; i++)
if (b[1]==a[i]){
na=i;
break;
}

k=0;
for (i=1; i<n; i++)
if (b[i]!=a[na+i-1]){
k=1;
break;
}
if (k==0)
cout<<"YES"<<endl;
else
cout<<"NO"<<endl;

}
