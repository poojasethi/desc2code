#include <cstdio>
#include <vector>

using namespace std;

vector <int> V1,V2;

int main(){
	int n;
	int i,j,k,a;
	bool czy;
	scanf("%d", &n);
	for(i=0; i<n; i++){
		scanf("%d", &a);
		if(a!=0) V1.push_back(a);
		if(a == 1) j = V1.size()-1;
	}
	for(i=0; i<n; i++){
		scanf("%d", &a);
		if(a!=0) V2.push_back(a);
		if(a == 1) k = V2.size()-1;
	}
	czy = true;
	n--;
	for(i=0; i<n; i++){
		if(V1[j] != V2[k]) czy = false;
		j = (j+1)%n;
		k = (k+1)%n;
	}
	if(czy) printf("YES\n");
	else printf("NO\n");
	return 0;
}
