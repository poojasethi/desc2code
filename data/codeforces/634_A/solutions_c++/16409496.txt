#include<bits/stdc++.h>
#define M 200000
using namespace std;
vector < int > a , b;
int n , pos[M + 5];
int main(){
	scanf("%d",&n);
	for(int i = 1 ; i <= n ; i++){
		int x;
		scanf("%d",&x); if(x != 0) a.push_back(x);
	}
	for(int i = 1 ; i <= n ; i++){
		int x;
		scanf("%d",&x) ; if(x != 0){
			pos[x] = b.size();
			b.push_back(x);
		}
	}
	for(int i = 1 ; i < a.size() ; i++)	if((pos[a[i - 1]] + 1)%a.size() != pos[a[i]]){
		printf("NO");
		return 0;
	}	
	printf("YES");
}