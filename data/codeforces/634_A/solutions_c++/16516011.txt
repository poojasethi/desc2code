#include <iostream>
using namespace std;

int main()
{
	int n,i,j,p,ind=1;
	int a[200000],b[200000];
	cin >> n;
	for (i=0;i<n;i++)
		cin >> a[i];
	for (i=0;i<n;i++)
		cin >> b[i];
	if (a[0]==0)
		j=1;
	else 
		j=0;
	for (i=0;b[i]!=a[j];i++);
	for (p=0;p<n && ind;p++,j=(j+1)%n,i=(i+1)%n)
	{
		if (a[j]==0)
			j=(j+1)%n;
		if(b[i]==0)
		i=(i+1)%n;
		ind=(a[j]==b[i]);
	}
	if (ind || n<4)
		cout << "YES" << endl;
	else
		cout << "NO" << endl;
	return 0;
}