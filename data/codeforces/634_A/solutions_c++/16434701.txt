#include<cstdio>

#define ran 222222

int n;
int a[ran*2], pa;
int b[ran*2], pb;

int main() {
	scanf("%d", &n);
	for(int i=0;i<n;i++) {
		scanf("%d", &a[i]);
		a[i+n] = a[i];
		if(a[i]==1) pa = i;
	}
	for(int i=0;i<n;i++) {
		scanf("%d", &b[i]);
		b[i+n] = b[i];
		if(b[i]==1) pb = i;
	}
	for(int i=0;i<n-1;i++) {
		if(a[pa]!=b[pb]) {
			printf("NO\n");
			return 0;
		}
		pa++; if(a[pa]==0)pa++;
		pb++; if(b[pb]==0)pb++;
	}
	printf("YES\n");
	
	return 0;
}