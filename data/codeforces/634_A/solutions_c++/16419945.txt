#include "cstdio"
#define NMAX 200000
using namespace std;
int n, a[NMAX], b[NMAX];
int main()
{
    int i, j;
    scanf("%d", &n);
    i=0;
    while (i<n-1)
    {
        scanf("%d", &j);
        if (j!=0)
            a[i++]=j;
    }
    i=0;
    while (i<n-1)
    {
        scanf("%d", &j);
        if (j!=0)
            b[i++]=j;
    }
    j=0;
    while (b[j]!=a[0]) j++;
    for (i=0; i<n-1; i++)
        if (a[i]!=b[(i+j)%(n-1)])
        {
            printf("NO\n");
            return 0;
        }
    printf("YES\n");
    return 0;
}