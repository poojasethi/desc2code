#include <iostream>
using namespace std;

int main(){
	ios_base::sync_with_stdio(0);	cin.tie();
	int n;	cin>>n;	n--;
	int arr1[400001],arr2[400001];
	for(int i=0;i<n;i++)	{	cin>>arr1[i];	if(arr1[i]==0)	i--;	}
	for(int i=0;i<n;i++)	{	cin>>arr2[i];	if(arr2[i]==0)	i--;	}
	for(int i=0;i<n;i++)	arr1[i+n]=arr1[i];
	for(int i=0;i<2*n;i++)	if(arr1[i]==arr2[0]){
		int j=0;
		for(j=0;j<n&&(arr1[i+j]==arr2[j]);j++);
		if(j==n)	{	cout<<"YES";	return 0;	}
	}
	cout<<"NO";	
}