# include <iostream>
using namespace std;
int n,a[400001],b[200001],i,j,x,k;
main (){
  cin>>n;
  for (i=1; i<=n; i++){
    cin>>x;
    if (x!=0){
      a[n+j]=x;
      a[++j]=x;
    }
  }
  j=0;
  for (i=1; i<=n; i++){
    cin>>x;
    if (x!=0) b[++j]=x;
  }
  for (i=1; i<=n; i++)
    if (b[1]==a[i]) break;
  for (j=2; j<n; j++){ 
    i++;
    if (b[j]!=a[i]){
      k=1;
      break;
    }
  }    
  if (k==1) cout<<"NO"<<endl;
    else cout<<"YES"<<endl;
}