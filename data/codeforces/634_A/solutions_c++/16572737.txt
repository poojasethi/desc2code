#include<stdio.h>
#include<string.h>

const int MAXN=200000+1000;
int a[MAXN],b[MAXN];
int n,k;

int main(){
	int x,y,w,z;
	while(scanf("%d",&n)!=EOF){
		k=1;
		for(int i=0;i<n;i++){
			scanf("%d",&x);if(x){a[w]=x;w++;}
		}w=0;
		for(int i=0;i<n;i++){
			scanf("%d",&y);
			if(y==a[0]) z=w;
			if(y){b[w]=y;w++;}
		}
		for(int i=0;i<w;i++){
			if(a[i]!=b[z]){
				k=0;break;
			}
			z++;if(z==w) z=0;
		}
		if(k) printf("YES\n");
		else printf("NO\n");
	}
	return 0;
}