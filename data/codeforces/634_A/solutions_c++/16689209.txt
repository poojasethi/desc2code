#include <iostream>
using namespace std;
int n,i,k,posa,posb,a[400001],b[200001],x;
main()
{
cin>>n;
for (i=1; i<=n; i++)
{ cin>>a[i]; a[i+n]=a[i]; }
for (i=1; i<=n; i++)
cin>>b[i];
posb=1; x=b[1];
if (x==0)
{x=b[2]; posb=2; }

for (i=1; i<=n; i++)
if (x==a[i])
{
 posa=i; break; }

for (i=1; i<n; i++)
{
 if (a[posa]==0) posa++;
 if (b[posb]==0) posb++;
 if (a[posa]!=b[posb])
 { k=1; break; }
 posa++;
 posb++;
}

if (k==1)
cout<<"NO"<<endl;
else
cout<<"YES"<<endl;
}
