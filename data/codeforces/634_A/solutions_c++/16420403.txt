#include <cstdio>
#include <iostream>
#include <cstring>
#include <algorithm>
#include <cmath>
#include <vector>
#include <queue>
using namespace std;
const int N=2E5+5;
int n,a[N],b[N],tot,p,x;

int main()
{
	cin>>n;
	for (int i=1;i<=n;i++) 
	{
		scanf("%d",&x);
		if (x) a[++tot]=x;
	}
	tot=0;
	for (int i=1;i<=n;i++) 
	{
		scanf("%d",&x);
		if (x==a[1]) p=tot+1;
		if (x) b[++tot]=x;
	}
	for (int i=1;i<n;i++) 
	{
		if (a[i]!=b[p])
		{
			cout<<"NO"; return 0;
		}
		p++; if (p==n) p=1;
	}
	cout<<"YES";
}
