n = int(raw_input())
a = map(int, raw_input().split(" "))
b = map(int, raw_input().split(" "))

for i in xrange(n):
    if a[i] == 1:
        ak = i
    if b[i] == 1:
        bk = i

av = a[ak:n] + a[0:ak]
bv = b[bk:n] + b[0:bk]
a = av
b = bv

for i in xrange(n):
    if a[i] == 0:
        ak = i
    if b[i] == 0:
        bk = i

if a[0:ak] + a[ak+1:n] == b[0:bk] + b[bk+1:n]:
    print "YES"
else :
    print "NO"
