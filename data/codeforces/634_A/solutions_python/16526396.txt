island = int(raw_input())
oldOrder = raw_input().split()
newOrder = raw_input().split()
oldOrderNo0=[]
newOrderNo0=[]
compare=[]
for i in oldOrder:
    if i!="0":
        oldOrderNo0.append(i)
for i in newOrder:
    if i!="0":
        newOrderNo0.append(i)
n=newOrderNo0.index(oldOrderNo0[0])
for i in range(len(newOrderNo0)-n):
    compare.append(newOrderNo0[i+n])
for i in range(n):
    compare.append(newOrderNo0[i])



if oldOrderNo0==compare:
    print "YES"
else:
    print "NO"
    