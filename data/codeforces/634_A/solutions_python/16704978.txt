n = input()

a = [int(i) for i in raw_input().split()]
a = [i for i in a if i]
b = [int(i) for i in raw_input().split()]
b = [i for i in b if i]

a1 = 0
b1 = 0

for i in xrange(n-1):
    if a[i] == 1:
        a1 = i
    if b[i] == 1:
        b1 = i

a = a[a1:]+a[:a1]
b = b[b1:]+b[:b1]



for i in xrange(n-1):
    if a[i] != b[i]:
        print "NO"
        exit()

print "YES"