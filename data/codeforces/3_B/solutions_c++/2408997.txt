#include <cstdio>
#include <utility>
#include <algorithm>
#include <vector>
using namespace std;
int main(){
    int n, m;
    scanf("%d%d", &n, &m);
    vector< pair<int,int> > v[3];
    for(int i=1; i<=n; i++){
        int t, p;
        scanf("%d%d", &t, &p);
        v[t].push_back(make_pair(p, i));
    }
    v[1].push_back(make_pair(0, 0));
    for(int i=1; i<3; i++){
        sort(v[i].begin(), v[i].end());
        reverse(v[i].begin(), v[i].end());
    }
    if(v[2].size()>m/2) v[2].resize(m/2);
    int t = min(v[1].size(),m-v[2].size()*2);
    while(!v[2].empty() && t+2 <= v[1].size() && v[1][t].first + v[1][t+1].first > v[2].back().first){
        v[2].pop_back();
        t += 2;
    }
    v[1].resize(t);
    int ans = 0;
    for(int i=1;i<3;i++)for(int j=0;j<v[i].size();j++)
        ans+= v[i][j].first;
    printf("%d\n", ans);
    for(int i=1;i<3;i++)for(int j=0;j<v[i].size();j++)
        if(v[i][j].second) printf("%d ", v[i][j].second);
}