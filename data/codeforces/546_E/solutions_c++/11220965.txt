#include <cstdlib>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <queue>
#include <cmath>
#include <stack>
#include <map>
#include <set>
#include <deque>
#include <cstring>
#include <functional>
#include <climits>

#define F1(x,y,z) for(int x=y;x<z;x++)
#define F2(x,y,z) for(int x=y;x<=z;x++)
#define F3(x,y,z) for(int x=y;x>z;x--)
#define F4(x,y,z) for(int x=y;x>=z;x--)
#define W(x) while(x-->0)
#define SI(x) scanf("%d",&x)
#define pb push_back

#define MAX 5000000

using namespace std;

int n,m;
int l[205][205],f[205][205];
int p[205];
int ta,tb,tc,i;
bool v[205];

int dfs(int a,int b){
	v[a]=true;
	p[b]=a;
	if(a==n*2+1)return INT_MAX;
	b++;
	F1(c,0,n*2+2){
		if(!v[c]&&l[a][c]-f[a][c]+f[c][a]>0){
			int tt=dfs(c,b);
			if(tt!=-1){
				return min(tt,l[a][c]-f[a][c]+f[c][a]);
			}
		}
	}
	return -1;
}

int main(){
	SI(n);
	SI(m);
	F2(a,1,n){
		SI(l[0][a]);
		ta+=l[0][a];
	}
	F2(a,1,n){
		SI(l[n+a][n*2+1]);		
		tb+=l[n+a][n*2+1];
	}
	if(ta!=tb){
		printf("NO\n");
		return 0;
	}
	F2(a,1,n)l[a][n+a]=100;
	W(m){
		SI(tb);
		SI(tc);
		l[tb][n+tc]=100;
		l[tc][n+tb]=100;
	}
	tc=0;
	while(true){
		memset(v,0,sizeof(v));
		tb=dfs(0,0);
		if(tb==-1)break;
		tc+=tb;
		i=0;
		while(true){
			f[p[i]][p[i+1]]+=tb;
			i++;
			if(p[i]==n*2+1)break;
		}
	}
	//F1(a,0,n*2+2)F1(b,a,n*2+2)printf("%d %d %d %d\n",a,b,l[a][b],f[a][b]-f[b][a]);
	if(ta!=tc){
		printf("NO\n");
		return 0;
	}
	printf("YES\n");
	F2(a,1,n)F2(b,1,n)printf("%d%c",f[a][n+b]-f[n+b][a],b==n?'\n':' ');
	//system("pause");
    return 0;
}
