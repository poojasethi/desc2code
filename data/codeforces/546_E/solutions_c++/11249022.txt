#include<bits/stdc++.h>
#define maxi 1001
using namespace std;
int n,m,s,t;

int arr[maxi][maxi],arr1[maxi][maxi];
typedef long long ll;
ll sum,sum1;
int parent[maxi],aa,bb;
ll x,lol;
const int mm = 1224456788;
queue<int> q;

void PUSH(int x,int y)
{
	if(parent[x]==-1)
	{
		parent[x]=y;
        q.push(x);
	}
}

ll bfs()
{
   memset(parent,-1,sizeof(parent));

   PUSH(s,s);

   while(!q.empty())
   {
   	  int r = q.front();
      q.pop();
      for(int j=0;j<=t;j++)
      {
      	 if(arr[r][j]>0)
      	 {
      	 	PUSH(j,r);
      	 }
      }

   }


   if(parent[t]==-1)
   {
   	 return -1;
   }

   int vv = t;
   int swag=arr[parent[vv]][vv];

   while(vv!=s)
   {
      swag=min(swag,arr[parent[vv]][vv]);
      vv=parent[vv];
   }

   vv = t;
   
   while(vv!=s)
   {
   	 arr[parent[vv]][vv]-=swag;
   	 arr[vv][parent[vv]]+=swag;
   	 vv=parent[vv];
   }

   
   return swag;

}

int main()
{
	cin >> n >> m;

    s = 2*n;
    t = s+1;

	for(int i=0;i<n;i++)
	{
		cin >> arr[s][i];
		sum+=arr[s][i];
		arr1[s][i]=arr[s][i];
	}

    for(int i=0;i<n;i++)
    {
    	cin >> arr[n+i][t];
    	sum1+=arr[n+i][t];
    	arr1[n+i][t]=arr[n+i][t];
    }

    for(int i=0;i<n;i++)
    {
       arr[i][n+i]=mm;
       arr1[i][n+i]=mm;
    }

    for(int i=0;i<m;i++)
    {
    	 cin >> aa >> bb;
    	 aa--;
    	 bb--;
         arr[aa][bb+n]=arr[bb][aa+n]=mm;
         arr1[aa][bb+n]=mm;
         arr1[bb][aa+n]=mm;
    }

  // cout<<lol<<endl
    int cc=0;
    while((cc=bfs())>0)
    {
    	lol+=cc;
    	//cout<<lol<<endl;
    }



    if(lol == sum1 && lol==sum)
    {
    	cout<<"YES"<<endl;

        for(int i=0;i<n;i++)
        {
        	for(int j=n;j<2*n;j++)
        	{
        		cout<<arr1[i][j]-arr[i][j]<<" ";
        	}
        	cout<<endl;
        }

    }
    else
    {
    	cout<<"NO"<<endl;
    }

	return 0;
}