#include <cstdio>
#include <algorithm>
#define S 0
#define T n*2+1
#define N 310
#define M 10010
#define inf 1e9
using namespace std;
struct data{int y,c,v,next;} e[M];
int cnt = 1,n,m,x,y,sum,sum1,res,h,t,ans[N][N];
int head[N],v[N],q[N];
void Insert(int x,int y,int v){
	e[++cnt].y = y;e[cnt].c = v;e[cnt].v = v;
	e[cnt].next = head[x];head[x] = cnt;
}
void Ins(int x,int y,int v){Insert(x,y,v);Insert(y,x,0);}
int bfs(){
	for (int i=0;i<=T;i++) v[i] = 0;
	q[1] = S;h = 0;t = 1;v[S] = 1;
	while (h<t){
		int now = q[++h];
		for (int i=head[now];i;i=e[i].next)
			if (e[i].v && !v[e[i].y]){
				v[e[i].y] = v[now]+1;
				q[++t] = e[i].y;
			}
	}
	return v[T]!=0;
}
int dinic(int pos,int flow){
	if (pos==T || flow==0) return flow;
	int F = flow;
	for (int i=head[pos];i;i=e[i].next)
		if (e[i].v && v[pos]+1==v[e[i].y]){
			int t = dinic(e[i].y,min(F,e[i].v));
			e[i].v-=t;e[i^1].v+=t;F-=t;
		}
	return flow-F;
}
int main(){
	scanf("%d%d",&n,&m);
	for (int i=1;i<=n;i++) {scanf("%d",&x);Ins(S,i,x);sum1+=x;}
	for (int i=1;i<=n;i++) {scanf("%d",&x);Ins(i+n,T,x);sum+=x;}
	for (int i=1;i<=m;i++) {scanf("%d%d",&x,&y);Ins(x,y+n,inf);Ins(y,x+n,inf);}
	for (int i=1;i<=n;i++) Ins(i,i+n,inf);
	if (sum1!=sum) return printf("NO"),0;
	while (bfs()) 
		res+=dinic(S,inf);
	if (res!=sum) return printf("NO"),0;
	printf("YES\n");
	for (int j=1;j<=n;j++)
		for (int i=head[j];i;i=e[i].next)
			ans[j][e[i].y-n] = e[i].c-e[i].v;
	for (int i=1;i<=n;i++){
		for (int j=1;j<=n;j++) printf("%d ",ans[i][j]);
		printf("\n");
	}
}
