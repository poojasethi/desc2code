#include<cstdio>
#include<algorithm>
#include<cstring>
#define rep(i,n) for(int i=1; i<=n; i++)
#define inf 5000000
using namespace std;

int n,m,t,sum=0,sum2=0,ans=0,a[300],f[300][300],d[300],cnt[300];

int dfs(int x,int flow){
    if (x==2*n+1) return flow;
    int now=0;
    rep(i,2*n+1) if (f[x][i]!=0 && d[x]==d[i]+1){
        int tmp=dfs(i,min(flow-now,f[x][i]));
        f[x][i]-=tmp;
        f[i][x]+=tmp;
        now+=tmp;
        if (now==flow) return flow;
    }
    if (d[0]>=2*n+2) return now;
    if (!--cnt[d[x]]) d[0]=2*n+2;
    cnt[++d[x]]++;
    return now;
}

int main(){
    memset(f,0,sizeof(f));
    memset(d,0,sizeof(d));
    memset(cnt,0,sizeof(cnt));
    scanf("%d%d",&n,&m);
    rep(i,n) {scanf("%d",&t); f[0][i]=t; sum+=t;}
    rep(i,n) {scanf("%d",&t); f[n+i][2*n+1]=t; sum2+=t;}
    if (sum!=sum2){
        printf("NO");
        return 0;
    }
    rep(i,m){
        int x,y;
        scanf("%d%d",&x,&y);
        f[x][n+y]=inf;
        f[y][n+x]=inf;
    }
    rep(i,n) f[i][n+i]=inf;
    while (d[0]<2*n+2) ans+=dfs(0,inf);
    if (ans==sum){
        printf("YES\n");
        rep(i,n){
            rep(j,n) if (f[i][n+j]==0) printf("0 ");
            else printf("%d ",inf-f[i][n+j]);
            printf("\n");
        }
    }
    else printf("NO");
}