#include<cstdio>
#include<cstring>
#include<iostream>

#define S 10000
#define T 10001
#define nn 20010
#define inf 100000000
using namespace std;

struct Edge{int to,old,c;}e[nn];
int i,j,n,m,l[nn],pre[nn],tot,s[nn],aa[nn],a[nn],b[nn];

inline void Add(int x,int y,int z)
{
	e[++tot].to=y;e[tot].old=l[x];l[x]=tot,e[tot].c=z;
	e[++tot].to=x;e[tot].old=l[y];l[y]=tot;e[tot].c=0;
}

inline int Dfs(int x,int f)
{
	int flow=f;
	if (x==T) return(f);
	for (int i=l[x];i;i=e[i].old)
	if (e[i].c&&pre[e[i].to]==pre[x]+1)
	{
		int a=Dfs(e[i].to,min(f,e[i].c));
		e[i].c-=a,e[i^1].c+=a,f-=a;
	}
	return(flow-f);
}
inline bool Bfs()
{
	int h=1,t=1;s[1]=S;
	memset(pre,-1,sizeof(pre));pre[S]=0;
	do{
		int now=s[h];
		for (int i=l[now];i;i=e[i].old) if (pre[e[i].to]==-1&&e[i].c)
		s[++t]=e[i].to,pre[e[i].to]=pre[now]+1;
		h++;
	}while (h<=t);
	return(pre[T]!=-1);
}

int main()
{
	scanf("%d%d",&n,&m);tot=1;int num_=0,num=0,num__=0;
	for (int i=1;i<=n;i++) {scanf("%d",&a[i]);Add(S,i,a[i]);num_+=a[i];}
	for (int i=1;i<=n;i++) {scanf("%d",&b[i]);Add(i+n,T,b[i]);num__+=b[i];}
	for (int i=1;i<=n;i++) Add(i,i+n,inf);
	for (int i=1;i<=m;i++)
	{
		int u,v;scanf("%d%d",&u,&v);
		Add(u,v+n,inf);Add(v,u+n,inf);
	}
	
	if (num_!=num__) {puts("NO");return(0);}
	
	while (Bfs())
	num+=Dfs(S,inf);
	
	if (num!=num_) {puts("NO");return(0);}
	puts("YES");
	for (int i=1;i<=n;i++)
	{
		memset(aa,0,sizeof(aa));
		for (int j=l[i];j;j=e[j].old) if (e[j].to!=S)
		aa[e[j].to-n]=e[j^1].c;
		for (int j=1;j<=n;j++) printf("%d ",aa[j]);puts("");
	}
}
