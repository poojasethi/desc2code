#include <bits/stdc++.h>
#define f(i,a,b) for(int i = (a); i <= (b); i++)
using namespace std;
int s,t,x,y,N,M,c[205][205],R[205][205];
main()
{
    cin>>N>>M;
    t=2*N+1;
    f(i,1,N)cin>>c[s][i];
    f(i,1,N)cin>>c[N+i][t];
    f(i,1,N)c[i][N+i]=999;
    f(i,1,M)
    {
        cin>>x>>y;
        c[x][N+y]=c[y][N+x]=999;
    }
    while(true)
    {
        queue<int>q;
        vector<int>in(205,0),from(205,-1);
        in[s]=1,q.push(s);
        while(!q.empty())
        {
            x=q.front(),q.pop();
            if(x==t)break;
            f(v,0,204)if(c[x][v]>0&&!in[v])in[v]=1,from[v]=x,q.push(v);
        }
        if(!in[t])break;
        y=999,x=t;
        while(from[x]>=0)y=min(y,c[from[x]][x]),x=from[x];
        x=t;
        while(from[x]>=0)c[from[x]][x]-=y,c[x][from[x]]+=y,x=from[x];
    }
    f(i,1,N) if(c[s][i]>0||c[N+i][t]>0)
    {
        cout<<"NO";
        return 0;
    }
    f(n,1,N)f(v,1,N)R[n][v]+=c[N+v][n];
    cout<<"YES\n";
    f(i,1,N)
    {
        f(j,1,N)cout<<R[i][j]<<" ";
        cout<<"\n";
    }
}