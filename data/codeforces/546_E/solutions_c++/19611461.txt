#include<bits/stdc++.h>
using namespace std;

const int maxn = 222;
int c[maxn][maxn],f[maxn][maxn],n,m,a,t;
bool mark[maxn];

int dfs(int u, int C){
    if(u == t) return C;
    mark[u] = 1;
    for(int v = 1; v <= 2*n+1; ++v) if(!mark[v] && c[u][v] > 0){
        int F = dfs(v,min(C,c[u][v]));
        if(F > 0){
   //         cout<<v<<"<-";
            c[u][v] -= F;
            c[v][u] += F;
            return F;
        }
    }
    return 0;
}

int main(){
  //  freopen("input.txt","r",stdin);
    scanf("%d%d",&n,&m);
    int k = 0, s = 0;
    for(int i = 1; i <= n; ++i){
        scanf("%d",&a);
        c[0][i] = a;
        c[i][i+n] = INT_MAX;
        k += a;
    }
    for(int i = 1; i <= n; ++i){
        scanf("%d",&a);
        c[i+n][2*n+1] = a;
        s += a;
    }
    while(m--){
        int u,v;
        scanf("%d%d",&u,&v);
        c[u][v+n] = c[v][u+n] = INT_MAX;
    }
    t = 2*n+1;
    int flow = 0,aug;
    do{
        memset(mark,0,sizeof mark);
        aug = dfs(0,INT_MAX);
        flow += aug;
 //       cout<<endl<<aug<<endl;
    }while(aug);
 //   cout<<flow<<' '<<s<<endl;
    if(flow != s || flow != k) puts("NO");
    else{
        puts("YES");
        for(int i = 1; i <= n; ++i){
            for(int j = 1; j <= n; ++j)
                printf("%d ",c[j+n][i]);
            puts("");
        }
    }
}
