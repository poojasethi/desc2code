#include<iostream>
#include<cstring>
#include<cstdio>
using namespace std;

const int maxn = 256;
const int inf = 1000000;

int n, m, s, t;
int g[maxn][maxn], f[maxn][maxn], mark[maxn];

int dfs(int u, int m){
	if (u==t || !m) return m;
	if (mark[u]++) return 0;
	for (int i=0 ; i<=t ; i++){
		int x = dfs(i, min(m, g[u][i] - f[u][i]));
		if (x){
			f[u][i] += x;
			f[i][u] -= x;
			return x;
		}
	}	
	return 0;	
}

void maxflow(){
	int x, J=0;
	while(dfs(s, inf))
		memset(mark, 0, sizeof mark);
}

int main(){
	ios::sync_with_stdio(0);
	cin >> n >> m;
	s = 2*n;
	t = 2*n+1;
	for (int i=0 ; i<n ; i++)
		cin >> g[s][i];
	for (int i=0 ; i<n ; i++)
		cin >> g[n+i][t];
	for (int i=0 ; i<n ; i++)
		g[i][i+n] = 200;
	for (int i=0 ; i<m ; i++){
		int x, y;
		cin >> x >> y;
		x--; y--;
		g[x][y+n] = g[y][x+n] = 200;
	}
	maxflow();
	for (int i=0 ; i<n ; i++)
		if (f[s][i] != g[s][i] || f[i+n][t] != g[i+n][t]){
			cout << "NO" << endl;
			return 0;
		}
	cout << "YES" << endl;
	for (int i=0 ; i<n ; i++){
		for (int j=0 ; j<n ; j++)
			if (f[i][n+j]>0)
				cout << f[i][n+j] << " ";
			else
				cout << "0 ";
		cout << endl;
	}	
}
