#include <bits/stdc++.h>
using namespace std;

int c[205][205];
int flow[205][205];
int bottleneck[205];
int pre[205];
int n,m,S,T;

int main(){

    cin >> n >> m;
    S = 0, T = n + n + 1;
    int sa = 0,sb = 0;
    for(int i = 1, a; i <= n; ++i)
    {
        cin >> a;
        c[S][i] = a;
        c[i][n+i] = 99999;
        sa += a;
    }
    for(int i = 1, a; i <= n; ++i)
    {
        cin >> a;
        c[i+n][T] = a;
        sb += a;
    }
    for(int i = 1,a,b; i <= m; ++i)
    {
        cin >> a >> b;
        c[a][b+n] = 99999;
        c[b][a+n] = 99999;
    }
    while(1){

        memset(bottleneck, 0, sizeof bottleneck);
        bottleneck[S] = 999999;
        queue<int > q; q.push(S);
        while(!q.empty()&&!bottleneck[T]){
            int cur = q.front(); q.pop();
            for(int i = S; i <= T; i++){
                if(!bottleneck[i]&&c[cur][i] > flow[cur][i]){
                    q.push(i);
                    pre[i] = cur;
                    bottleneck[i] = min(bottleneck[cur], c[cur][i] - flow[cur][i]);
                }
            }
        }
        if(bottleneck[T] == 0) break;

        for (int cur = T; cur != S; cur = pre[cur]) {
            flow[pre[cur]][cur] += bottleneck[T];
            flow[cur][pre[cur]] -= bottleneck[T];
        }
    }
    for(int i = n+1; i <= 2 * n; ++i) if(flow[i][T] != c[i][T] || sa != sb){ cout << "NO" << endl; exit(0); }
    cout << "YES" << endl;
    for(int i = 1; i <= n; ++i)
    {
        for(int j = 1; j <= n; ++j)
        {
            cout << flow[i][j+n] << " ";
        }
        cout << endl;
    }

    return 0;

}
