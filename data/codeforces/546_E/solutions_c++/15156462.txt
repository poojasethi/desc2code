#include <bits/stdc++.h>
#define N 209
#define pb push_back
#define oo 100001
using namespace std;
int n,m,s,t,b[N],pre[N],c[N][N],f[N][N],sa;
vector<int> a[N];
queue<int> h;
int fp()
{
    for(int i=1;i<=t;i++) pre[i]=0;
    pre[s]=-1;
    h.push(s);
    while(h.size())
    {
        int u=h.front();
        h.pop();
        for(int i=0,v;v=a[u][i];i++)
        if(!pre[v]&&c[u][v]>f[u][v])
        {
            pre[v]=u;
            h.push(v);
        }
    }
    return pre[t];
}
int enlarge()
{
    int del=oo;
    for(int i=t;i!=s;i=pre[i])
    if(f[pre[i]][i]<0) del=min(del,-f[pre[i]][i]);
    else del=min(del,c[pre[i]][i]-f[pre[i]][i]);
    for(int i=t;i!=s;i=pre[i])
    {
        f[pre[i]][i]+=del;
        f[i][pre[i]]-=del;
    }
}
int main()
{
    //freopen("test.in","r",stdin);
    cin>>n>>m;
    for(int i=1;i<=2*n;i++)
    {
        cin>>b[i];
        if(i<=n) sa+=b[i]; else sa-=b[i];
    }
    if(sa)
    {
        cout<<"NO";
        return 0;
    }
    while(m--)
    {
        int x,y;
        cin>>x>>y;
        a[x].pb(y+n);
        a[y+n].pb(x);
        c[x][y+n]=oo;

        a[y].pb(x+n);
        a[x+n].pb(y);
        c[y][x+n]=oo;
    }
    t=2*n+1;
    s=t+1;
    for(int i=1;i<=n;i++)
    {
        a[s].pb(i);
        a[i].pb(s);
        c[s][i]=b[i];

        a[i+n].pb(t);
        a[t].pb(i+n);
        c[i+n][t]=b[i+n];

        a[i].pb(i+n);
        a[i+n].pb(i);
        c[i][i+n]=oo;
    }
    for(int i=1;i<=s;i++) a[i].pb(0);
    while(fp()) enlarge();
    for(int i=1;i<=n;i++)
    if(f[i+n][t]!=c[i+n][t])
    {
        cout<<"NO";
        return 0;
    }
    cout<<"YES\n";
    for(int i=1;i<=n;i++,cout<<endl)
    for(int j=1;j<=n;j++) cout<<f[i][j+n]<<" ";
}
