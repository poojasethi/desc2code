#include <cstring>
#include <cstdio>
#include <algorithm>
using namespace std;
const int maxn = 210;
const int inf = 0x3fffffff;
int c[maxn][maxn], f[maxn][maxn], open[maxn], d[maxn], mk[maxn], pnt[maxn];
int maxflow(int n, int s, int t) {
	int cur, tail,u,v,flow = 0;	
	memset(f, 0, sizeof(f));
	do{
		memset(mk, 0, sizeof(mk));
		memset(d, 0, sizeof(d));
		open[0] = s; mk[s] = 1; d[s] = inf;
		for (pnt[s]=cur=tail= 0; cur <= tail && !mk[t]; cur ++) {
			for (u = open[cur], v=1; v<=n;v++) if (!mk[v]&&f[u][v]<c[u][v]) {
				mk[v] = 1; open[++tail] = v; pnt[v] = u;
				if (d[u] < c[u][v] - f[u][v]) d[v] = d[u];
				else d[v] = c[u][v] - f[u][v];
			}
		}
		if(!mk[t]) break;
		flow += d[t];
		for(u=t;u!=s;) { v = u; u = pnt[v]; f[u][v] += d[t]; f[v][u] = -f[u][v];}
	}while(d[t]>0); 
	return flow;
}
int n, m;
int main() {
	//freopen("in.txt", "r", stdin);
	while(scanf("%d %d", &n, &m) != EOF) {
		memset(c, 0, sizeof(c));
		int sum1 = 0, sum2 = 0;
		int v,u;
		for(int i = 1; i <= n; i++) {
			scanf("%d", &v); 
			c[n+n+1][i] = v;
			sum1 += v;
		}
		//puts("!");
		for(int i = 1; i <= n; i++) {
			scanf("%d", &v);
			c[i+n][n+n+2] = v;
			sum2 += v;
		}
		//puts("!");
		for (int i = 1; i <= n; i++) c[i][i+n] = inf;
		while(m --) {
			scanf("%d %d", &u, &v);
			c[u][v+n] = c[v][u+n] = inf;
		}
		//puts("!");
		if (sum1 == sum2 && sum1 == maxflow(n+n+2, n+n+1, n+n+2)) {
			puts("YES");
			for (int i = 1; i <= n; i++) {
				for (int j = 1; j <= n; j++) printf("%d ", f[i][j+n]);
				puts("");
			}
		} else puts("NO");	
	}
	return 0;
}