#include <bits/stdc++.h>
#define f(i,a,b) for(int i=a;i<=b;i++)
using namespace std;
int s,t,x,y,N,M,c[205][205],R[205][205];
main()
{
    cin>>N>>M;
    t=2*N+1;
    f(i,1,N)cin>>c[s][i];
    f(i,1,N)cin>>c[N+i][t];
    f(i,1,N)c[i][N+i]=999;
    f(i,1,M)cin>>x>>y,c[x][N+y]=c[y][N+x]=999;
    while(true)
    {
        queue<int>q;
        vector<int>l(205,0),z(205,-1);
        l[s]=1,q.push(s);
        while(q.size())
        {
            x=q.front(),q.pop();
            f(v,0,204)if(c[x][v]&&!l[v])l[v]=1,z[v]=x,q.push(v);
        }
        if(!l[t])break;
        y=999,x=t;
        while(z[x]>=0)y=min(y,c[z[x]][x]),x=z[x];
        x=t;
        while(z[x]>=0)c[z[x]][x]-=y,c[x][z[x]]+=y,x=z[x];
    }
    f(i,1,N)if(c[s][i]||c[N+i][t]){cout<<"NO";return 0;}
    f(n,1,N)f(v,1,N)R[n][v]+=c[N+v][n];
    cout<<"YES\n";
    f(i,1,N){f(j,1,N)cout<<R[i][j]<<" ";cout<<"\n";}
}
  		 	 				 	 	    			 			  		