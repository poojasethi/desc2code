#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstdlib>
#include<cstring>

#define W(a) (a.w+D*a.s)

using namespace std;

const int fin=0,maxn=5010,maxm=100010;
int n,m,K,R,D;
int p[maxn];
struct rec{int x,y,w,n;bool s;}a[maxm];
inline bool operator <(const rec &a,const rec &b){
  return (W(a)!=W(b))?(W(a)<W(b)):(a.s>b.s);
}
inline int getf(int x){
  if(x!=p[x]&&p[p[x]]!=p[x])p[x]=getf(p[x]);
  return p[x];
}

int sol(){
  int i,x,y,s=0;
  R=n-1;
  sort(a,a+m);
  for(i=1;i<=n;++i)p[i]=i;
  for(i=0;i<m;++i){
    if(x=getf(a[i].x),y=getf(a[i].y),x==y)continue;
    p[y]=x,s+=a[i].s,R--;
  }
  return s;
}

void det(){
  int i,x,y,s=0;
  cout<<n-1<<endl;
  sort(a,a+m);
  for(i=1;i<=n;++i)p[i]=i;
  for(i=0;i<m;++i){
    if(x=getf(a[i].x),y=getf(a[i].y),x==y)continue;
    if(s==K&&a[i].s)continue;
    cout<<a[i].n+1<<" ";
    p[y]=x,s+=a[i].s;
  }
}

int main(){
  if(fin){
    freopen("t.in","r",stdin);
    freopen("t.out","w",stdout);
  }
  int i,s=0,l,r;
  cin>>n>>m>>K;
  for(i=0;i<m;++i){
    cin>>a[i].x>>a[i].y>>a[i].w;
    s+=a[i].s=a[i].x==1||a[i].y==1,a[i].n=i;
  }
  if(sol(),R)return puts("-1"),0;
  for(l=-maxm,r=maxm;l<r;)
    if(D=(l+r+1)/2,s=sol(),s==K){
      l=D;
      break;
    }else if(s<K)
      r=D-1;
    else
      l=D;
  if(l==-maxm||l==maxm)return puts("-1"),0;
  D=l,det();
  return 0;
}
