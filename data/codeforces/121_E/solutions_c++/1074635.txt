#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>

using namespace std;
const int N=100005;
int a[N],t[N],ar[N],n;

void add(int i,int v)
{
    for (; i<=n; ar[i]+=v,i+=(i&(-i)));
}

int cal(int i)
{
    int s=0;
    for (; i>0; s+=ar[i],i-=(i&(-i)));
    return s;
}

int main()
{
    int i,j,m,x,y,d;
    char s[100];
    t[0]=1;
    for (i=1; i<=10000; i++)
    if ((i%10==4 || i%10==7) && t[i/10]) t[i]=1;
    scanf("%d%d",&n,&m);
    for (i=1; i<=n; i++)
    {
        scanf("%d",&a[i]);
        if (t[a[i]]) add(i,1);
    }
    for (i=1; i<=m; i++)
    {
        scanf("%s%d%d",s,&x,&y);
        if (s[0]=='c')
        {
            printf("%d\n",cal(y)-cal(x-1));
        }
        else
        {
            scanf("%d",&d);
            for (j=x; j<=y; j++)
            {
                if (t[a[j]+d]-t[a[j]]!=0) add(j,t[a[j]+d]-t[a[j]]);
                a[j]+=d;
            }
        }
    }
}
