#include <cstdio>
#include <iostream>
#include <algorithm>
using namespace std;

int dat[100100];
int query(int i) {
	int res = 0;
	for (i += 2; i; i -= i & -i) {
		res += dat[i];
	}
	return res;
}
void add(int i, int v) {
	for (i += 2; i < 100100; i += i & -i) {
		dat[i] += v;
	}
}

bool lucky[10100];
int val[100100];

int main() {
	lucky[0] = true;
	for (int i = 1; i < 10100; i++) {
		lucky[i] = (i % 10 == 4 || i % 10 == 7) && lucky[i / 10];
	}
	int n, m;
	cin >> n >> m;
	for (int i = 0; i < n; i++) {
		cin >> val[i];
		if (lucky[val[i]]) {
			add(i, 1);
		}
	}
	for (int i = 0; i < m; i++) {
		string s;
		int l, r;
		cin >> s >> l >> r;
		l--;
		if (s[0] == 'c') {
			cout << query(r - 1) - query(l - 1) << '\n';
		} else {
			int v;
			cin >> v;
			while (l < r) {
				int cur = lucky[val[l]];
				val[l] += v;
				if (lucky[val[l]] != cur) {
					add(l, lucky[val[l]] - cur);
				}
				l++;
			}
		}
	}
}
