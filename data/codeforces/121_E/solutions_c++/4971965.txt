#include <cstdio>
#include <iostream>

using namespace std;

const int MAXN=1e5+10;

int N,M;
int f[MAXN];
int ar[MAXN];

bool lucky[MAXN];

int sum( int pl ){
	
	int rev=0;
	
	for( int i=pl+2 ; i>0 ; i-=i&-i )
		rev+=f[i];
	
	return rev;
}

void inc( int pl , int v ){
	
	for( int i=pl+2 ; i<MAXN ; i+=i&-i )
		f[i]+=v;
}

int main(){
	
	lucky[0]=1;
	for( int i=1 ; i<10100 ; i++ )
		lucky[i]= ((i%10==4 || i%10==7) && lucky[i/10]);
	
	scanf(" %d %d",&N,&M);
	
	for( int i=1 ; i<=N ; i++ ){
		scanf(" %d",ar+i);
		if( lucky[ar[i]] )
			inc(i,1);
	}
	
	string s;
	
	for( int a,b,c,i=0 ; i<M ; i++ ){
		
		cin >> s;
		
		if( s[0]=='c' ){
			scanf(" %d %d",&a,&b);
			printf("%d\n",sum(b)-sum(a-1));
		}
		else{
			scanf(" %d %d %d",&a,&b,&c);
			while( a<=b ){
				if( lucky[ar[a]] && !lucky[ar[a]+c] )
					inc(a,-1);
				else if( !lucky[ar[a]] && lucky[ar[a]+c] )
					inc(a,1);
				ar[a]+=c;
				a++;
			}
		}	
	}
	
	return 0;
}
