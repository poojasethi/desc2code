#include <cstdio>
#include <cstring>
int mark[10005],T[100005],a[100005];
int n,m;

#define lowbit(x) (x&(-x))

void add(int x,int y) {
	for (;x<=n;x+=lowbit(x)) 
		T[x]+=y;
}
int query(int x) {
	int t = 0;
	for (;x>0;x-=lowbit(x)) 
		t += T[x];
	return t;
}
int main(){
	

	memset(mark,0,sizeof(mark));
	for (int i = 0; i<10005; i++) {  
		bool flag = true;
		int x = i;
		while (x && flag) {  
			if (x%10!=4 && x%10!=7)  
				flag = false;
			x /= 10;  
		}  
		mark[i] = flag;  
	}  
	scanf("%d%d",&n,&m);
	for(int i = 0; i <= n; i++) T[i]=0;
	for(int i = 1; i <= n; i++){
		scanf("%d",a + i);
		if(mark[a[i]]) add(i,1);
	}
	while(m--) {
		int x,y,z;
		char s[10];
		scanf("%s%d%d",s,&x,&y);
		if(s[0]=='c') printf("%d\n",query(y)-query(x-1));
		else {
			scanf("%d",&z);
			if(z==0) continue;
			for(int i = x; i <= y; i++)
			{
				if(mark[a[i]]) add(i,-1);
				a[i]+=z;
				if(mark[a[i]]) add(i,1);
			}
		}
	}
	return 0;
}