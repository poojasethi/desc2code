#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>

using namespace std;

const int MAXN=100010;
const int MAXL=10010;

int n,m,a[MAXN],c[MAXN];
bool flag[MAXL];

void insert(int x,int num)
{
    for(;x<MAXN;x+=x&(-x))
        c[x]+=num;
}
int sum(int x)
{
    int s=0;
    for(;x;x-=x&(-x))
        s+=c[x];
    return s;
}
void get_lucky_number()
{
    memset(flag,false,sizeof(flag));
    flag[4]=flag[7]=true;
    for(int i=44;i<MAXL;++i)
        flag[i]=((i%10==4 || i%10==7) && flag[i/10]);
}
void init()
{
    get_lucky_number();
    scanf("%d%d",&n,&m);
    memset(c,0,sizeof(c));
    for(int i=1;i<=n;++i)
    {
        scanf("%d",&a[i]);
        if(flag[a[i]])insert(i,1);
    }
}
void solve()
{
    char str[10];
    for(int i=0,l,r,d;i<m;++i)
    {
        scanf("%s%d%d",str,&l,&r);
        if(str[0]=='c')printf("%d\n",sum(r)-sum(l-1));
        else
        {
            scanf("%d",&d);
            for(int j=l;j<=r;++j)
            {
                if(flag[a[j]] && !flag[a[j]+d])insert(j,-1);
                else if(!flag[a[j]] && flag[a[j]+d])insert(j,1);
                a[j]+=d;
            }
        }
    }
}
int main()
{
//    freopen("in.txt","r",stdin);
    init();
    solve();
    return 0;
}
