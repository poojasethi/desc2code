#include<iostream>
#include<cstdio>

using namespace std;

const int maxn=100010;
int s[maxn], n, m, l, r, z, p[maxn];
bool L[10086];
string op;

int calc(int x){
    int ret=0;
    while (x>0){
        ret+=s[x];
        x-=x&(-x);
    }
    return ret;
}

void add(int x, int d){
    while (x<=n){
        s[x]+=d;
        x+=x&(-x);
    }
}

int main(){
    cin.sync_with_stdio(false);
    cin>>n>>m;
    for (int i=1; i<=10000; i++){
        int tmp=i; bool flag=true;
        while (tmp){
            int k=tmp%10;
            if (k!=4 && k!=7){flag=false;break;}
            tmp/=10;
        }
        L[i]=flag;
    }
    for (int i=1; i<=n; i++){
        cin>>p[i];
        if (L[p[i]]) add(i, 1);
    }
    for (;m;m--){
        cin>>op>>l>>r;
        if (op[0]=='c'){
            cout<<calc(r)-calc(l-1)<<endl;
        }else{
            cin>>z;
            for (int i=l; i<=r; i++){
                if (L[p[i]]) add(i, -1);
                p[i]+=z;
                if (L[p[i]]) add(i, 1);
            }
        }
    }
}