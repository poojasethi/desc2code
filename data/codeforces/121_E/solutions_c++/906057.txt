#include<cstdio>
#include<algorithm>
#include<iostream>
#include<cstring>
#define FOR(i,a,b) for(int i=a;i<=b;i++)
#define FORD(i,a,b) for(int i=a;i>=b;i--)


using namespace std;
int n,m,a[100010],c[100010],vv,l,r;
bool ki[10010];
char mk;

int sum(int x){
  int ss=0;
  while (x>0){
    ss+=c[x];
    x-=x&(-x);
  }
  return ss;
}

void add(int x,int va){
  while (x<=n){
    c[x]+=va;
    x+=x&(-x);
  }
}

void init(){
  FOR(i,1,10000){
    ki[i]=true;
    int x=i;
    while (x!=0){
      if(((x%10)!=4)&&((x%10)!=7)){ki[i]=false;break;}
      x/=10;
    }
  }
}



int main(){
  init();

  scanf("%d%d",&n,&m);
  FOR(i,1,n)c[i]=0;
  FOR(i,1,n){
    scanf("%d",&a[i]);
    if(ki[a[i]])add(i,1);
  }

  FOR(i,1,m){
    scanf("\n");
    scanf("%c",&mk);
    if(mk=='c'){
      while(mk!=' ')scanf("%c",&mk);
      scanf("%d%d",&l,&r);
      printf("%d\n",sum(r)-sum(l-1));
    }else{
      while(mk!=' ')scanf("%c",&mk);
      scanf("%d%d%d",&l,&r,&vv);
      FOR(j,l,r){
        if(ki[a[j]])add(j,-1);
        a[j]+=vv;
        if(ki[a[j]])add(j,1);
      }
    }
  }
 // system("pause");
}
