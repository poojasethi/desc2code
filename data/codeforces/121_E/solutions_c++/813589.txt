#include		<iostream>
#include		<cstdio>
#include		<cstdlib>
#include		<cstring>
#include		<cmath>
#include		<algorithm>
#define         Maxn 100001
using namespace std;
bool 	fg[10001];
int sum[Maxn],c[Maxn],a[Maxn];
int i,j,n,m,x,y,z;
char s[20];
void		Insert(int x,int d)
{
    if (x==0) return;    
	for (;x<=n;x+=x&(-x)) c[x]+=d;return;
}
int 		get(int x){
	int sum=0;
	for (;x>0;x-=x&(-x)) sum+=c[x];
    return sum;
}
void		DFS(int x)
{
	if (x>=10000) return;
	if (x!=0) fg[x]=1;
	DFS(x*10+4);DFS(x*10+7);return;
}
int main()
{
	//freopen("input.txt","r",stdin);
	//freopen("output.txt","w",stdout);
	scanf("%d %d\n",&n,&m);
	DFS(0);
	for (i=1;i<=n;i++) {
		scanf("%d",&a[i]);
		if (fg[a[i]]) Insert(i,1);
	} scanf("\n");
	while (m--)
	{
		scanf("%s %d %d",&s,&x,&y);
		if (s[0]=='c')
		{
			scanf("\n");
			printf("%d\n",get(y)-get(x-1));
		} else
		{
			scanf("%d\n",&z);
			for (i=x;i<=y;i++)
			{
				if (fg[a[i]]) Insert(i,-1);
				a[i]+=z;
				if (fg[a[i]]) Insert(i,1);
			}
		}
	}
	return 0;
}
