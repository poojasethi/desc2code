#include <iostream>
using namespace std;
#define REP(i,n) for(i=0;i<(n);i++)

int t[110000],a[110000];
bool lucky[10000];
int n,m;
string k;

void add(int x,int y){
        for (;x<=n;x+=(x&(-x))) t[x]+=y;
}

int get(int x){
        int ret=0;
        for (;x;x-=(x&(-x))) ret+=t[x];
        return ret;
}

int main(){
        int i,x,j;
        cin>>n>>m;
        REP(i,10000){
                x=i;
                lucky[i]=true;
                while (x) {
                        if(x%10!=4&&x%10!=7) lucky[i]=false;
                        x/=10;
                }
        }
        REP(i,n) cin>>a[i+1];
        REP(i,n) if (lucky[a[i+1]]) add(i+1,1);
        REP(i,m){
                int l,r;
                cin>>k>>l>>r;
                if (k[0]=='a'){
                        cin>>x;
                        for(int j=l;j<=r;j++){
                                if (lucky[a[j]]) add(j,-1);
                                a[j]+=x;
                                if (lucky[a[j]]) add(j,1);
                        }
                }else cout<<get(r)-get(l-1)<<endl;
        }
}
