#include <stdio.h>
#define MAXN 100000+5
int bit[MAXN], val[MAXN];
int n,m;
bool isLucky[MAXN+1];
void generate(int n){
    if ( n >= MAXN )
    return;
    isLucky[n] = true;
    
    generate(n * 10 + 4 );
    generate(n * 10 + 7);
}
void add(int id,int d){
    while(id <= n){
    bit[id] += d;
    id += id & -id;
    }
}
int count(int id){
    int rep = 0;
    while(id){
    rep += bit[id];
    id -= id & -id;
    }
    return rep;
}
int main(){
    generate(0); isLucky[0] = false;
    scanf("%d %d",&n,&m);
    for(int i = 1 ; i <= n ; ++i){
    scanf("%d",val+i);
    if ( isLucky[val[i]] )
        add(i,1);
    }
    char cmd[10];
    int l,r,d,k;
    while(m--){
    scanf("%s",cmd);
    if ( cmd[0] == 'a' ){
        scanf("%d %d %d",&l,&r,&d);
        for(int i = l ; i <= r ; ++i){
        k = isLucky[val[i]]?-1:0;
        val[i] += d;
        k += isLucky[val[i]]?1:0;
        if ( k != 0 ) add(i,k);
        }
    }else{
        scanf("%d %d",&l,&r);
        printf("%d\n",count(r)-count(l-1));
    }
    }
    return 0;
}