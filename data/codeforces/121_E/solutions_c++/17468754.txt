#include<cstdio>
const int N=100001;
int t[N],v[N];
bool f[N];
void add(int x,int v)
{
	while(x<N)
		t[x]+=v,x+=x&(-x);
}
int sum(int x)
{
	int s=0;
	while(x)
		s+=t[x],x-=x&(-x);
	return s;
}
bool F(int n)
{
	while(n)
	{
		if(n%10!=4&&n%10!=7)
			return 0;
		n/=10;
	}
	return 1;
}
int main()
{
	int i,a,b,c,n,m;
	char s[10];
	for(i=1;i<N/10;i++)
		f[i]=F(i);
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++)
	{
		scanf("%d",&v[i]);
		if(f[v[i]])add(i,1);
	}

	while(m--)
	{
		scanf("%s%d%d",s,&a,&b);
		if(s[0]=='c')printf("%d\n",sum(b)-sum(a-1));
		else
		{
			scanf("%d",&c);
			for(i=a;i<=b;i++)
			{
				if(f[v[i]])add(i,-1);
				v[i]+=c;
				if(f[v[i]])add(i,1);
			}
		}
	}
	return 0;
}
     	 	   				 		   		  	 	 	