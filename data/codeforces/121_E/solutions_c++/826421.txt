#include<cstdio>
#include<cstdlib>
using namespace std;

bool isLucky[100001];
int n,m;
int a[100001];
int s[100001];

void add(int j, int value){
  while(j<=n){
    s[j] += value;
    j += j&(-j);
  }
}

int sum(int i){
  int res=0;
  while(i>=1){
    res += s[i];
    i -= i&(-i);
  }
  return res;
}

int main(){
  for(int k = 1; k <= 5; k++)
    for(int S=0; S < (1<<k); S++){
      int i=0,d;
      for(int j = 0; j < k; j++){
        (S&(1<<j))? d=4: d=7;
        i = 10*i+d;
      }
      isLucky[i] = true;
    }
  
  scanf("%d %d",&n,&m);
  for(int i = 1; i <= n; i++){
    scanf("%d",a+i);
    if(isLucky[a[i]]){
      add(i,1);
    }
  }
  
  for(int i = 0; i < m; i++){
    char c[10];
    int l,r;
    scanf("%s %d %d", c, &l, &r);
    if(c[0]=='a'){
      int d;
      scanf("%d", &d);
      for(int j = l; j <= r; j++){
        if(isLucky[a[j]]) add(j,-1);
        a[j]+=d;
        if(isLucky[a[j]]) add(j,1);
      }
    }
    else{
      printf("%d\n",sum(r)-sum(l-1));
    }
  }
}
