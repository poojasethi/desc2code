#include <bits/stdc++.h>

using namespace std;

const int MAX = 1E5 + 10;

int N, M, a[MAX], bit[MAX], mark[MAX];

void openFile() {
	freopen("in.inp", "r", stdin);
//	freopen("ou.out", "w", stdout);
}

void add(int i, int j) {
	while (i < MAX) {
		bit[i] += j;
		i += (i & (-i));
	}
}

int sum(int j, int i) {
	int ans = 0; --j;
	while (i > 0 || j > 0) {
		if (i > 0) {
			ans += bit[i];
			i -= (i & (-i));
		}
		if (j > 0) {
			ans -= bit[j];
			j -= (j & (-j));
		}
	}
	return ans;
}

int main() {
	mark[0] = 1;
	for (int i = 1; i < MAX; ++i)
		mark[i] = mark[i / 10] && ((i % 10) == 4 || (i % 10) == 7);
	
	scanf("%d %d", &N, &M);
	for (int i = 1; i <= N; ++i) {
		scanf("%d", &a[i]);
		add(i, mark[a[i]]);
	}
	
	char s[10];
	int l, r, d;
	while (M--) {
		scanf("%s %d %d", s, &l, &r);
		if (*s == 'c') printf("%d\n", sum(l, r));
		else {
			scanf("%d", &d);
			for ( ; l <= r; ++l) {
				if (mark[a[l]]) add(l, -1);
				if (mark[a[l] += d]) add(l, 1);
			}
		}
	}
}
