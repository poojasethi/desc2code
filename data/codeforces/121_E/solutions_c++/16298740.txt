#include<bits/stdc++.h>
using namespace std;
int luk[1000000],ans[1000000],ar[1000000],n,m;
int init(int i,int v){
	v-=ans[i+=n];
	if(v){
		for(; i; i/=2)
			ans[i]+=v;
	}
}
int add(int i, int j) {
	int res = 0;
	for (i += n, j += n; i <= j; i = (i + 1) / 2, j = (j - 1) / 2) {
		if (i & 1) res += ans[i];
		if (~j & 1) res += ans[j];
	}
	return res;
}
int main(){
	luk[0]=1;
	for(int i=1 ; i<=100000 ; i++){
		luk[i]=((i%10==4 || i%10==7) && luk[i/10]);
	}
	scanf("%d %d",&n,&m);
	for(int i=0 ; i<n ; i++){
		scanf("%d",&ar[i]);
		init(i,luk[ar[i]]);
	}
	for (; m --> 0; ) {
		char q[8];
		int x, y;
		scanf("%s%d%d", q, &x, &y);
		--x;
		--y;
		if (q[0] == 'c') {
			printf("%d\n", add(x, y));
		} else {
			int d;
			scanf("%d", &d);
			for (; x <= y; ++x) {
				init(x, luk[ar[x] += d]);
			}
		}
	}
/*	for(int i=1 ; i<=m ; i++){
		char com[10];
		int x,y;
		scanf("%s %d %d",com,&x,&y);
		if(com[0]=='c'){
			printf("%d\n",add(x,y));
		}
		if(com[0]=='a'){
			int v;
			scanf("%d",&v);
			for(int j=x ; j<=y ; j++){
				init(x , luk [ar[j]+=v]);
			}
		}

	}*/
	return 0;
}
