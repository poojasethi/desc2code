#include <cstdio>
#include <algorithm>
#include <cstdlib>
using namespace std;

#define rep(i,n) for(int i=0;i<(n);++i)
#define fab(i,a,b) for(int i=(a);i<=(b);++i)

#define N 111111
bool b[N];
int n, m, a[N], s[N];

int add(int t, int d = 1)
{
	for (int x = t; x <= n; x += x & -x)
		s[x] += d;
}
int ss(int t)
{
	int ret = 0;
	for (int x = t; x; x &= x - 1)
		ret += s[x];
	return ret;
}

int main()
{
	scanf("%d%d", &n, &m);
	fab(i, 1, 5)
		rep(s, 1 << i)
		{
			int k = 0;
			rep(j, i) k = k * 10 + (s >> j & 1 ? 7 : 4);
			b[k] = true;
		}
	fab(i, 1, n)
	{
		scanf("%d", a + i);
		b[a[i]] && add(i);
	}
	rep(mm, m)
	{
		char cmdd[10];
		int x, y, z;
		scanf("%s%d%d", cmdd, &x, &y);
		if (cmdd[0] == 'a')
		{
			scanf("%d", &z);
			fab(i, x, y)
				b[a[i]] && add(i, -1),
				b[a[i] += z] && add(i);
		} else
			printf("%d\n", ss(y) - ss(x - 1));
	}
	return 0;
}

