#include<iostream>
#include<cstdio>
#include<cstring>
#include<string>
#include<algorithm>
#define N 100005
using namespace std;
int a[N],q[N];
bool vis[10005];
int n,m;
string s;
int l,r,ad;
void add(int id,int v)
{
    while(id<N)
    {  
        a[id]+=v;
        id+=id&(-id);
    }
}
int sum(int id)
{
    int res=0;
    while(id)
    {
        res+=a[id];
        id-=id&(-id);
    }
    return res;
}
bool islucky(int v)
{    if(!v) return false;
    while(v)
    {
        if(v%10!=4&&v%10!=7)  return false;
        v/=10;
    }
    return true;
}
int main()
{
    int i,j;
    for(i=1;i<N;i++) if(islucky(i)) vis[i]=1;
    cin>>n>>m;
    for(i=1;i<=n;i++)
    {
        cin>>q[i];
        if(vis[q[i]])add(i,1);
    }
    for(i=1;i<=m;i++)
    {
        cin>>s;
        if(s[0]=='c')
        {
            cin>>l>>r;
            cout<<sum(r)-sum(l-1)<<endl;
        }
        else
        {
            cin>>l>>r>>ad;
            for(j=l;j<=r;j++)
            {
                if(vis[q[j]])
                    add(j,-1);
                q[j]+=ad;
                if(vis[q[j]])
                    add(j,1);
            }
        }
    }
}
/*
3 6
2 3 4
count 1 3
count 1 2
add 1 3 2
count 1 3
add 2 3 3
count 1 3
*/
