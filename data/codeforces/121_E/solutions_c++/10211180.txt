#include <cstdio>

#define FRR(I,L,R) for(int I=L;i<R;++i)
#define FOR(I,N) FRR(I,0,N)

int N, M;
int A[100001];
bool L[10001];

// Lucky numbers
void lucky(int v) {
	if (v > 10000) return;
	if (v) L[v] = true;
	lucky(v*10+4);
	lucky(v*10+7);
}

// Fenwick tree
int FT[100001];
void Inc(int x, int d) {
	for (; x <= N; x = (x | (x-1)) + 1) FT[x] += d;
}
int Sum(int x) {
	int res = 0;
	for (; x > 0; x = x & (x-1)) res += FT[x];
	return res;
}

int main() {
	lucky(0);

	scanf("%d%d", &N, &M);
	FOR(i,N) {
		scanf("%d", &A[i]);
		if (L[A[i]]) Inc(i+1, 1);
	}
	FOR(i,M) {
		char cmd[10];
		int l, r;
		scanf("%s%d%d", cmd, &l, &r);
		if (cmd[0] == 'a') {
			int d;
			scanf("%d", &d);
			FRR(i,l-1,r) {
				if (L[A[i]]) Inc(i+1, -1);
				A[i] += d;
				if (L[A[i]]) Inc(i+1, 1);
			}
		} else {
			printf("%d\n", Sum(r) - Sum(l-1));
		}
	}
	return 0;
}

	 	 		   		 	 	  	 		 	  	  	