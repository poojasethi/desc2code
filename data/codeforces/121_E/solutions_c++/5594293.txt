/* in the name of ALLAH, most gracious, most merciful */
#include <stdio.h>

bool lucky [10001];
void dfs (int x) {
    if (x > 10000) return;
    x && (lucky [x] = true);
    dfs (x * 10 + 4); dfs (x * 10 + 7);
}

int n, m, a [100001];
int tr [100001];

int get (int i, int s = 0) {
    for (; i; i -= i & -i)
        s += tr [i];
    return s;
}

int add (int i, int v) {
    for (; i <= n; i += i & -i)
        tr [i] += v;
}

int main () {
#ifdef Local
	freopen ("input.txt", "r", stdin);
	// freopen ("output.txt", "w", stdout);
#endif
    scanf ("%d %d", &n, &m);

    dfs (0);

    for (int i = 1; i <= n; ++i) {
        scanf ("%d", a + i);
        lucky [a [i]] && add (i, 1);
    }

    for (int i = 0; i < m; ++i) {
        char buf [10];
        int l, r;
        scanf ("%s %d %d", buf, &l, &r);

        if (buf [0] == 'a') {
            int w;
            scanf ("%d", &w);

            for (int j = l; j <= r; ++j) {
                lucky [a [j]] && add (j, -1);
                a [j] += w;
                lucky [a [j]] && add (j, 1);
            }
        } else printf ("%d\n", get (r) - get (l - 1));
    }
	return 0;
}

