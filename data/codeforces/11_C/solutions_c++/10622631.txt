#include <iostream>
#include <cstdio>
#include <string>
using namespace std;

const int MAXN = 300;
const int MAXM = 250;
const int dr[8] = {0, 1, 0,-1, 1, 1,-1,-1};
const int dc[8] = {1, 0,-1, 0, 1,-1, 1,-1};

char a[MAXN][MAXN];
int n, m;

void Find_Square(int r, int c, int &cnt){
    if (r < 0 || r >= m || c < 0 || c >= n || a[r][c]!='1') return;
    a[r][c] = '2';
    cnt++;
    for(int i = 0; i < 8; i++)
        Find_Square(r+dr[i],c+dc[i], cnt);
}

int Check_Square(int r, int c, int len, int le, int ri){
    for(int i = 0; i < len+1; i++)
        for(int j = le; j < ri; j++)
            if(r + i*dr[j] < 0 || r + i*dr[j] >= m ||
               c + i*dc[j] < 0 || c + i*dc[j] >= n ||
               a[r+i*dr[j]][c+i*dc[j]] != '2') return 0;
    return 1;
}

int main()
{
    #ifndef ONLINE_JUDGE
    freopen("square1.i1","r",stdin);
    freopen("square1.o1","w",stdout);
    #endif // ONLINE_JUDGE
    int t, res, s;
    scanf("%d",&t);
    for (int i = 0; i < t ; i++){
        scanf("%d%d",&m,&n);
        for(int i = 0; i < m; i++) scanf("%s",a[i]);
        res = 0;
        for(int i = 0; i < m; i++)
            for(int j = 0; j < n; j++)
                if(a[i][j]=='1'){
                    Find_Square(i,j,s = 0);
                    if( s % 4>0  || s/4 > MAXM) continue;
                    res += Check_Square(i,j,s/4,0,2) && Check_Square(i+s/4, j+s/4,s/4,2,4);
                    res += Check_Square(i,j,s/4,4,6) && Check_Square(i+s/2,j,s/4,6,8);
                }
        printf("%d\n",res);
    }
    return 0;
}
