#include<iostream>
#include<sstream>
#include<fstream>
#include<cstring>
#include<cmath>
#include<ctime>
#include<cstdio>
#include<cstdlib>
#include<string>
#include<string.h>
#include<math.h>
#include<cassert>
#include<iomanip>
#include<utility>
#include<bitset>
#include<set>
#include<map>
#include<list>
#include<queue>
#include<deque>
#include<stack>
#include<vector>
#include<functional>
#include<algorithm>
#include<memory.h>
#include<assert.h>
#include<numeric>
#include<limits.h>
using namespace std;
int m,n;
char a[505][505];
int fnd(int x,int y)
{
	int ret=1;
	a[x][y]='2';
	for(int i=-1;i<=1;i++)for(int j=-1;j<=1;j++)
	if(x+i<0||x+i>=m||y+j<0||y+j>=n)continue;
	else if(a[x+i][y+j]=='1')ret+=fnd(x+i,y+j);
	return ret;
}
int c1(int x,int y)
{
	int i,j,k;
	for(i=y;i<n;i++)if(a[x][i]!='2')break;
	k=i-y;
	if(x+k-1>=m)return 0;
	for(j=0;j<k;j++)
	{
		if(a[x+j][y]!='2'||a[x+j][y+k-1]!='2')break;
		if(a[x+k-1][y+j]!='2')break;
	}
	if(j==k)return(k-1)*4;
	return 0;
}
int c2(int x,int y)
{
	int j,k;
	for(k=0;x+k<m&&y+k<n;k++)if(a[x+k][y+k]!='2')break;
	if(y-k+1<0||x+k-1+k-1>=m)return 0;
	for(j=0;j<k;j++)
	{
		if(a[x+j][y-j]!='2'||a[x+k+k-2-j][y-j]!='2'||a[x+k+k-2-j][y+j]!='2')
		break;
	}
	if(j==k)return (k-1)*4;
	return 0;
}
int check(int x,int y)
{
	int t=fnd(x,y);
	if(a[x][y+1]=='2')return(t==c1(x,y));
	if(x+1<m&&a[x+1][y+1]=='2')return(t==c2(x,y));
	return 0;
}
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int ans=0;
		scanf("%d%d",&m,&n);
		for(int i=0;i<m;i++)scanf("%s",a[i]);
		for(int i=0;i<m;i++)for(int j=0;j<n;j++)if(a[i][j]=='1')ans+=check(i,j);
		cout<<ans<<endl;
	}
	return 0;
}
