#include<iostream>
using namespace std;
char a[255][255];
int s,n,m,t,ans,dic1[8]={0,1,0,-1,1,1,-1,-1},dic2[8]={1,0,-1,0,1,-1,1,-1};
void dfs(int x,int y,int &s)
{
	if (x<0 || x>=n || y<0 || y>=m || a[x][y]!='1') return;
	a[x][y]='2';
	s++;
	for(int i=0;i<8;i++) dfs(x+dic1[i],y+dic2[i],s);
}
int check(int x,int y,int d,int l,int r)
{
	for(int i=0;i<=d;i++) 
	{
	    for(int j=l;j<r;j++)
		{
	        if (x+dic1[j]*i<0 || x+dic1[j]*i>=n || y+dic2[j]*i<0 || y+dic2[j]*i>=m || a[x+dic1[j]*i][y+dic2[j]*i]!='2') 
		    return 0;
		} 
	} 
	return 1;
}
int main()
{
	cin>>t;
	while(t--)
	{
		ans=0;
		cin>>n>>m;
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<m;j++)
			{
				cin>>a[i][j];
			}
		}
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<m;j++)
			if (a[i][j]=='1')
			{
			    s=0;
				dfs(i,j,s);
				if(s%4==0 || s/4>250)
				{ 
				    ans+=check(i,j,s/4,0,2) && check(i+s/4,j+s/4,s/4,2,4);
				    ans+=check(i,j,s/4,4,6) && check(i+s/2,j,s/4,6,8);
				}
			}
		}
		cout<<ans<<endl;
	}
	return 0;
}
