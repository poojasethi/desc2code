#include <iostream>
#include <algorithm>
#include <stdio.h>
#include <string.h>

using namespace std;

const int xx[8]= {0,1,0,-1,1,1,-1,-1},yy[8]= {1,0,-1,0,1,-1,1,-1};
int n,m,s;
char a[300][300];
void judge(int x,int y,int &s)
{
   if (x<0||x>=n||y<0||y>=m||a[x][y]!='1') return;
    a[x][y]='2',s++;
    for(int i=0; i<8; i++)
        judge(x+xx[i],y+yy[i],s);
}

bool solve(int x,int y,int d,int l,int r)
{
    int i,j,k;
   for(int i=0; i<d+1; i++)
        for(int j=l; j<r; j++)
            if (x+xx[j]*i<0||x+xx[j]*i>=n||y+yy[j]*i<0||y+yy[j]*i>=m||a[x+xx[j]*i][y+yy[j]*i]!='2')
                return 0;
    return 1;
}

int main()
{
    int i,j,k;
    int t;
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d%d",&n,&m);
        for(i=0; i<n; i++)
        {
            getchar();
                scanf("%s",a[i]);
        }
        int ans=0;
        for(i=0; i<n; i++)
            for(j=0; j<m; j++)
                if (a[i][j]=='1')
                {
                    judge(i,j,s=0);
                    if (s%4 || s/4>250) continue;
                    ans+=solve(i,j,s/4,0,2)&&solve(i+s/4,j+s/4,s/4,2,4);
                    ans+=solve(i,j,s/4,4,6)&&solve(i+s/2,j,s/4,6,8);
                }
        printf("%d\n",ans);
    }
    return 0;
}

     	   	 					   	 	  	 	 	 	