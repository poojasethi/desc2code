#include <cstdio>
#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;

char map[300][300];
int dx[] = {0,1,0,-1,1,1,-1,-1};
int dy[] = {1,0,-1,0,-1,1,-1,1};
int n,m,s;

bool ok(int x,int y)
{
    if(x<n && x>=0 && y<m && y>=0)return true;
    return false;
}
void dfs(int x,int y,int &s)
{
    if(map[x][y]!='1' || !ok(x,y))return ;
    s++;map[x][y]='2';
    for(int i=0;i<8;i++)dfs(x+dx[i],y+dy[i],s);
}
int check(int x,int y,int d,int l,int r)
{
    for(int i=0;i<=d;i++)
    {
        for(int j=l;j<=r;j++)
        {
            if(!ok(x+dx[j]*i,y+dy[j]*i) || map[x+dx[j]*i][y+dy[j]*i]!='2')return 0;
        }
    }
    return 1;
}
int main()
{
    int T;
    scanf("%d",&T);
    while(T--)
    {
        scanf("%d%d",&n,&m);
        for(int i=0;i<n;i++)
        scanf("%s",map[i]);

        int ans=0;
        for(int x=0;x<n;x++)
        {
            for(int y=0;y<m;y++)
            {
                if(map[x][y]=='1')
                {
                    dfs(x,y,s=0);
                    if(s%4 || s/4>250)continue;
                    ans+=check(x,y,s/4,0,1)&&check(x+s/4,y+s/4,s/4,2,3);
                    ans+=check(x,y,s/4,4,5)&&check(x+s/2,y,s/4,6,7);
                }
            }
        }
        printf("%d\n",ans);
    }
    return 0;
}
