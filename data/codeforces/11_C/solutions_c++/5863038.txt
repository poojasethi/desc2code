#include <stdio.h>
#include <iostream>
#include <cstring>
using namespace std;
char a[280][280];
int n,m,t,z,s,
X[8]={ 0, 1, 0,-1, 1, 1,-1,-1},
Y[8]={ 1, 0,-1, 0, 1,-1, 1,-1};
int check(int d,int x,int y,int l,int r){
	for (int i=0;i<=d;i++)
		for (int j=l;j<r;j++)
if (x+X[j]*i<0 || x+X[j]*i>=n || y+Y[j]*i<0 || y+Y[j]*i>=m || a[x+X[j]*i][y+Y[j]*i]!='2')
				return 0;
	return 1;
}
void back(int x,int y){
	if (x<0 || x>=n || y<0 || y>=m || a[x][y]!='1')
		return ;
	a[x][y]='2';
	s++;
	for (int i=0;i<8;i++)
		back(x+X[i],y+Y[i]);
}
int main( ){
	cin>>t;
	for (int k=1;k<=t;k++){
		cin>>n>>m;
		for (int i=0;i<n;i++)
			cin>>a[i];
		z=0;
		for (int i=0;i<n;i++)
			for (int j=0;j<m;j++)
				if (a[i][j]=='1'){
					s=0;
					back(i,j);
					if (s%4>0 || s>1000) continue ;
z+=(check(s/4,i,j,0,2) && check(s/4,i+s/4,j+s/4,2,4))+(check(s/4,i,j,4,6) && check(s/4,i+s/2,j,6,8));
				}
		cout<<z<<endl;
	}
	return 0;
}
