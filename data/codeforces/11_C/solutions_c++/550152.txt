#include <stdio.h>

int m, n;
char a[505][505];
int fill2(int x, int y) {
	int ret = 1;
	a[x][y]='2';
	for(int i=-1;i<=1;i++)
		for(int j=-1;j<=1;j++)
			if(x+i<0||x+i>=m||y+j<0||y+j>=n) continue;
			else if(a[x+i][y+j]=='1')
				ret += fill2(x+i, y+j);
	return ret;
}
int checkType1(int x, int y) {
	int i, j, siz;
	for(i=y;i<n;i++)
		if(a[x][i]!='2')
			break;
	siz = i-y;
	if(x+siz-1>=m) return 0;
	for(j=0;j<siz;j++) {
		if(a[x+j][y]!='2' || a[x+j][y+siz-1]!='2')
			break;
		if(a[x+siz-1][y+j]!='2')
			break;
	}
	if(j==siz)
		return (siz-1)*4;
	return 0;
}
int checkType2(int x, int y) {
	int j, siz;
	for(siz=0;x+siz<m && y+siz<n;siz++)
		if(a[x+siz][y+siz]!='2')
			break;
	if(y-siz+1<0 || x+siz-1+siz-1>=m) return 0;
	for(j=0;j<siz;j++) {
		if(a[x+j][y-j]!='2' || a[x+siz-1+siz-1-j][y-j]!='2' ||
				a[x+siz-1+siz-1-j][y+j]!='2')
			break;
	}
	if(j==siz)
		return (siz-1)*4;
	return 0;
}

int check(int x, int y) {
	int i, j, siz, t;
	t = fill2(x, y);
	if (a[x][y+1]=='2')
		return (t == checkType1(x, y));
	if (x+1<m && a[x+1][y+1]=='2')
		return (t == checkType2(x, y));
	return 0;
}

int main(void) {
	int T, i, j;
	scanf("%d", &T);
	while(T--) {
		int ans = 0;
		scanf("%d%d", &m, &n);
		for(i=0;i<m;i++)
			scanf("%s", a[i]);
		for(i=0;i<m;i++)
			for(j=0;j<n;j++)
				if(a[i][j]=='1')
					ans += check(i, j);
		printf("%d\n", ans);
	}
	return 0;
}
