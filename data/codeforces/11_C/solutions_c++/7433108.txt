#include <cstdio>
#include <iostream>
using namespace std;
char map[300][300];
const int dx[]={0,1,0,-1,1,1,-1,-1};
const int dy[]={1,0,-1,0,-1,1,-1,1};
int n,m,s;

inline bool Ok(int x,int y)
{
	if (x<n && x>=0 && y<m && y>=0) return true;
	return false;
}
void Dfs(int x,int y,int &s)
{
	if (map[x][y]!='1' || !Ok(x,y)) return;
	s++;
	map[x][y]='2';
	for (int i=0;i<8;i++) Dfs(x+dx[i],y+dy[i],s);
}
int Check(int x,int y,int d,int l,int r)
{
	for (int i=0;i<=d;i++)
	{
		for (int j=l;j<=r;j++)
		{
			if (!Ok(x+dx[j]*i,y+dy[j]*i)||map[x+dx[j]*i][y+dy[j]*i]!='2') return false;
		}
	}
	return true;
}
int main()
{
	int T;
	scanf("%d",&T);
	while (T--)
	{
		scanf("%d%d",&n,&m);
		for (int i=0;i<n;i++) scanf("%s",map[i]);
		int ans=0;
		for (int x=0;x<n;x++)
		{
			for (int y=0;y<m;y++)
			if (map[x][y]=='1')
			{
				Dfs(x,y,s=0);
				if (s%4 || s/4>250) continue;
				ans+=Check(x,y,s/4,0,1)&&Check(x+s/4,y+s/4,s/4,2,3);
				ans+=Check(x,y,s/4,4,5)&&Check(x+s/2,y,s/4,6,7);
			}
		}
		printf("%d\n",ans);
	}
	return 0;
}
