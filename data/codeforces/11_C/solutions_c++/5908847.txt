#include <cstdio>
#include <iostream>
using namespace std;
char a[305][305];
int n,m,b[8]={0,1,0,-1,1,1,-1,-1},c[8]={1,0,-1,0,1,-1,1,-1};
bool judge (int x,int y,int t,int l,int r) {
	int i,j;
	for (i=0;i<=t;i++) {
		for (j=l;j<r;j++) {
			if (x+b[j]*i<0 || x+b[j]*i>=n || y+c[j]*i<0 || y+c[j]*i>=m || a[x+b[j]*i][y+c[j]*i]!='2') return false;
		}
	}
	return true;
}
void dfs (int x,int y,int &s) {
	int i;
	if (x<0 || x>=n || y<0 || y>=m || a[x][y]=='0' || a[x][y]=='2') return;
	a[x][y]='2';s++;
	for (i=0;i<8;i++) dfs(x+b[i],y+c[i],s);
}
int main ( ) {
	int t;
	scanf("%d",&t);
	while (t--) {
		int i,j,s,ans=0;
		scanf("%d%d",&n,&m);
		for (i=0;i<n;i++) scanf("%s",a[i]);
		for (i=0;i<n;i++) {
			for (j=0;j<m;j++) {
				if (a[i][j]=='1') {
					s=0;dfs(i,j,s);
					if (s%4!=0 || s/4>250) continue;
					ans+=judge(i,j,s/4,0,2) && judge(i+s/4,j+s/4,s/4,2,4);
					ans+=judge(i,j,s/4,4,6) && judge(i+s/2,j,s/4,6,8);
				}
			}
		}
		printf("%d\n",ans);
	}
	return 0;
}
/*
Sample test(s)

input

2
8 8
00010001
00101000
01000100
10000010
01000100
00101000
11010011
11000011
10 10
1111111000
1000001000
1011001000
1011001010
1000001101
1001001010
1010101000
1001001000
1000001000
1111111000

output

1
2

input

1
12 11
11111111111
10000000001
10111111101
10100000101
10101100101
10101100101
10100000101
10100000101
10111111101
10000000001
11111111111
00000000000

output

3
*/
