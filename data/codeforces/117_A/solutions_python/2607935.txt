def g(f, t, m):
	x = max((t - f) / (2 * m) + 1, 0)
	y = max((t + f - 2) / (2 * m), 0)
	return min(2 * m * x + f - 1, 2 * m * y + 2 * m + 1 - f)

n, m = map(int, raw_input().split())
for s, f, t in [map(int, raw_input().split()) for _ in range(n)]:
	print [g(f, g(s, t, m - 1), m - 1), t][s == f]