def g(f, t, m):
	x = max((t - f + 1 + 2 * m - 3) / (2 * m - 2), 0)
	y = max((t - m * 2 + 1 + f + 2 * m - 3) / (2 * m - 2), 0)
	return min((2 * m - 2) * x + f - 1, (2 * m - 2) * y + m * 2 - 1 - f)

n, m = map(int, raw_input().split())
print '\n'.join(`[g(f, g(s, t, m), m), t][s == f]` for s, f, t in [map(int, raw_input().split()) for _ in range(n)])