import operator

n, m = map(int, raw_input().split())
par = (tuple(map(int, raw_input().split())) for i in xrange(n))
mod = 2 * m - 2

def calc(s, f, t):
    offs = t % mod
    base = t - offs

    if s == f:
        return t

    if s < f:
        if s < offs:
            base += mod
        return base + f

    s2 = m - 1  - s
    if m - 1 + s2 < offs:
        base += mod
    f2 = m - 1 - f
    return base + m - 1 + f2

print '\n'.join((str(calc(s-1, f-1, t)) for (s, f, t) in par))



