#include <iostream>
#include <cstdio>
#include <vector>
#include <algorithm>
#include <utility>
#include <set>

using namespace std;

typedef long long ll;

int main(){

	ll n, m, s, f, t, T;
	cin >> n >> m;
	T = 2 * (m-1);
	for (int i = 0 ; i < n; i++){
		cin >> s >> f >> t;
		ll ans = 0;
		if (s == f) ans = t;
		else if (s < f){
			ans += t-t%T+f-1;
			if (t%T+1 > s) ans += T;
			
		} else {
			ans += t-t%T+m-1 + (m - f);
			if (T-t%T+1 < s) ans += T;
		}
		cout << ans << endl;
	}

	return 0;
}
