#include <iostream>
using namespace std;

int main()
{
  int N,M;
  int p,s,f,t,x;
  cin >> N >> M; p=(M-1)*2;
  while(N--)
  {
    cin >> s >> f >> t;
    if(s==f) cout << t << endl;
    else
    {
      x = t / p*p + (s<f ? s-1 : 2*(M)-1-s);
      cout << (x<t ? x+p : x) + (f>s ? f-s : s-f) << endl;
    }
  }
  return 0;
}
