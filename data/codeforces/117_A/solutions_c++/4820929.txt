#include <cstdio>
int n,m;

int go(int t,int s){
	int pos = t % (2*m-2);
	if (pos >= m){
		pos = 2 * m - 1 - pos;
		if (pos >= s) 
			t += pos-s;
		else 
			t += pos+s-2;
	} else {
		if (pos < s)
			t += s - pos - 1;
		else 
			t += 2 * m - pos - s - 1;
	}
	return t;
}

int main(){
	scanf("%d%d",&n,&m);
	for (int i = 1; i <= n; i++){
		int s,f,t;
		scanf("%d%d%d",&s,&f,&t);
		if (s==f) printf("%d\n",t);
		else {
			t=go(t,s);
			t=go(t,f);
			printf("%d\n",t);
		}
	}
	return 0;
}