#include <cstdio>
#include <iostream>
#include <map>
using namespace std;
int K,N;
long long ans;
long long a[4*100010];
map < long long , int > X;
main()
{
 int i,j,j0;
 scanf("%d %d",&N,&K);
 for(i=0;i<N;i++)
  scanf("%I64d",&a[i]);
  j = 0;
  for(i=0;i<N;i++)
  {
   X[a[i]]+=1;
   if(X[a[i]]==K)
   do{
    ans+=(long long)(N-i);
    X[a[j]]-=1;
    j+=1;             
    }while(a[i]!=a[j-1]);
  }
  cout << ans << endl;
  //system("pause");
}