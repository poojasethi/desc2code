#include <bits/stdc++.h>
using namespace std; 

int main() {
	int n, k;
	scanf("%d %d", &n, &k);

	int a[n];
	map <int, int> r;

	int l = 0;
	long long cnt = 0LL;
	for(int i = 0; i < n; ++i) {
		scanf("%d", &a[i]);

		++r[a[i]];

		if(r[a[i]] == k) {
			cnt += n-i;

			while(a[l] != a[i]) {
				cnt += n-i;
				--r[a[l]];
				++l;
			}
			--r[a[l]];
			++l;
		}
	}

	printf("%lld\n", cnt);

	return 0;
}
