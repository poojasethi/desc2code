#include <cstdio>
#include <map>
#include <iostream>
using namespace std;
int n,k,a[500000];
long long int tot;
map<int,int> occ;

int main(){
	scanf("%d %d",&n,&k);
	for(int i=0;i<n;i++) scanf("%d",a+i);
	int x=0;
	int y=0;
	while(y<n){
		occ[a[y]]++;
		while(occ[a[y]]==k){
			tot+=n-y;
			occ[a[x]]--;
			x++;
		}
		y++;
	}
	cout<<tot<<endl;
}
