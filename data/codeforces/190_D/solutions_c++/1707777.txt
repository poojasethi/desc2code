#include <iostream>
#include <map>
using namespace std;
int n,k,a[400005],i,j;
map<int,int> m;
__int64 c;
int main(void){
    cin>>n>>k;
    for (i=0,j=0;j<n;++j){
        cin>>a[j];
        if ((++m[a[j]])<k) continue;
        while (true)
        {
            c += n-j;
            --m[a[i]];
            if (a[i++]==a[j]) break;
        }
    }
    cout<<c<<endl;
    return 0;
}
