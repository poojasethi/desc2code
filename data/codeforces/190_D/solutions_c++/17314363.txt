#include<bits/stdc++.h>

using namespace std;

map < int , int > M;

int A[400005],n,i,j,k,x;

long long asd;

int main(){

	cin >> n >> k;

	for(i=1;i<=n;i++)	
		cin >> A[i];

	for(i=j=1;i<=n;i++){

		while(!x && j <= n)  x += (++M[ A[j++] ] == k);

		if(x)
			asd += n - j + 2;

		x -= M[ A[i] ]-- == k;
	}

	cout << asd;
	return 0;
}
