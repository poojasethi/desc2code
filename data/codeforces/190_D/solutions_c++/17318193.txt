#include<bits/stdc++.h>
using namespace std;
int n,m,i,j,h[400003];
long long t;
map<int,int>MP;
int main()
{
	cin>>n>>m;
	for(i=1;i<=n;i++)
		scanf("%d",h+i);
	MP[h[++j]]++;
	for(i=1;i<=n;i++)
	{
		while(MP[h[j]]<m and j<=n)MP[h[++j]]++;
		if(j>n)break;
		t+=n-j+1;MP[h[i]]--;
	}
	cout<<t<<endl;
}
