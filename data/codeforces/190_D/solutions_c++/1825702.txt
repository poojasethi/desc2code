

#include <iostream>
#include <vector>
#include <map>

using namespace std;


int k, n;


void readInput()
{
	cin >> n >> k;
	vector<long long> nums(n);
	for (int i = 0; i < n; i++)
		cin >> nums[i];

	int b = 0, e = 0;
	map<int, int> cnt;

	long long res = 0;
	while(e < n)
	{
		int a = ++cnt[nums[e]];
		while (a == k)
		{
			res += n-e;
			cnt[nums[b]]--;
			b++;
			a = cnt[nums[e]];
		}
		e++;
	}

	cout << res;
}

int main()
{
	readInput();
	return 0;
}
