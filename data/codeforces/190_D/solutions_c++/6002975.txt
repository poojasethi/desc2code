

#include<bits/stdc++.h>
using namespace std;
const int mx = 400005;

int a[mx];
map<int, int> mp;


int main()
{
    int n, k, i = 0, j;
    long long cnt = 0;
    scanf("%d%d%d", &n, &k, &a[0]);
    for (int j = 0; j < n; scanf("%d", &a[++j])) 
        if (++mp[a[j]] >= k)
            do cnt += n - j, --mp[a[i]];
            while (a[i++] != a[j]);
    printf("%I64d", cnt);
    return 0;
}
