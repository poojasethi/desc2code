#include <iostream>
#include <map>
using namespace std;
int n,k,a[400005],i,j;
map<int,int> m;
__int64 c;
int main(void){
    for (cin>>n>>k>>a[0];j<n;cin>>a[++j]) if (++m[a[j]]>=k) do c+=n-j+0*--m[a[i]]; while(a[i++]-a[j]);
    cout<<c;
}