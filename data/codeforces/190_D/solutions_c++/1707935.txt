#include<iostream>
#include<map>
using namespace std;
__int64 n,k,c,i,j;
map<int,int>m,a;
int main(){for(cin>>n>>k>>a[0];j<n;cin>>a[++j])if(++m[a[j]]>=k)do c+=n-j+0*--m[a[i]];while(a[i++]-a[j]);cout<<c;}