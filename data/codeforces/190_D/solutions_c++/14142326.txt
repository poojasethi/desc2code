#include<cstdio>
#include<iostream>
#include<map>
using namespace std;

map<int,int> m;
int N,K,q[400040];
long long ans;

int main()
{
	cin>>N>>K;
	for(int l=0,r=0;r<N;r++)
	{
		scanf("%d",q+r);
		m[q[r]]++;
		for(;l<=r&&K<=m[q[r]];l++)
			ans+=N-r,m[q[l]]--;
	}
	cout<<ans<<endl;
	return 0;
}
