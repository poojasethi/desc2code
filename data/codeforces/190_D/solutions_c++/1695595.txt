#include<iostream>
#include<map>
#include<vector>
#include<cstdio>
using namespace std;
int A[4 * 100005];
int main()
{
	map < int , vector < int > > pos;
	int N , K;
	long long res = 0;
	int prev = -1;
	cin >> N >> K;
	for(int i = 0; i < N; ++i)
		scanf("%d", A + i );
	for(int i = 0; i < N; ++i)
	{
		pos[ A[i] ].push_back( i );
		int L = pos[A[i]].size();
		if( L >= K ) 
		{
			if( pos[A[i]][L-K] > prev ) 
					prev = pos[A[i]][L-K];
		}
		res = res + ( prev + 1);
	}
	cout << res << "\n";
	return 0;
}