#include<bits/stdc++.h>
using namespace std;
# define ll long long int
ll arr[400005];
map <int ,int > m ;
int main()
{ll ans=0;
ll tc=0ll;
ll n,k;
cin>>n>>k;
for(int i=0;i<n;i++)
cin>>arr[i];
int f,b;
f=b=0;
while(f<n&&b<n)
{
m[arr[b]]++;
while(m[arr[b]]==k)
{
m[arr[f]]--;
f++;
ans = ans + n-(ll)b;
}
b++;
//cout<<ans<<"  "<<f<<"  "<<b<<endl;;
}
cout<<ans;
return 0;
}