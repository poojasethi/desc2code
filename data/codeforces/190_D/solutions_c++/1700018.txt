#include <cstdio>
#include <iostream>
#include <map>

using namespace std;

long long ans;
int n,k,a[400001];
map <int,int> d;

int main()
{
    scanf ("%d%d",&n,&k);
                        
    for (int i = 1; i <= n; ++i)
        scanf ("%d",&a[i]);

    int l = 1, r = 1;

    for (; r <= n; ++r)
    {
        ++d[a[r]];
        while (d[a[r]] >= k && l <= r)
        {
            ans += n - r + 1;
            --d[a[l++]];
        }
    }

    printf ("%I64d",ans);
}