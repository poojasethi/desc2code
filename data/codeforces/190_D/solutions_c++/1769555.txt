#include <iostream>
#include <algorithm>
#include <map>
using namespace std;
map <long long, int> q;
long long n,m,i,j,k,l,a[500000],f,ans;
main()
{

 cin>>n>>k;
  l=1;
   for (i=1;i<=n;i++)
     {
       cin>>a[i];
      q[a[i]]++;
      while (q[a[i]]>=k)
      {
       ans+=n-i+1;
       q[a[l]]--;
       l++;
       }
     }

  cout<<ans<<endl;
 // system ("pause");
 
 }
