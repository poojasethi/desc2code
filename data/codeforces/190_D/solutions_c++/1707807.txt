#include <iostream>
#include <map>
using namespace std;
int n,k,a[400005],i,j;
map<int,int> m;
__int64 c;
int main(void){
    cin>>n>>k;
    for (i=0,j=0;j<n;++j){
        cin>>a[j];
        if ((++m[a[j]])<k) continue;
        c+=n-j;--m[a[i]];
        for (;a[i++]!=a[j];c+=n-j,--m[a[i]]);
    }
    cout<<c<<endl;
    return 0;
}
