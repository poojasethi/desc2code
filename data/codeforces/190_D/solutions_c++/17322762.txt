#include<bits/stdc++.h>

using namespace std;

int n,k;
int a[400004];
long long  ans;
map <int,int> m;

int main()
{
	cin>>n>>k;
	for(int i=1; i<=n; i++)
		cin>>a[i];
	int ii=1,jj=1;
	m[a[1]]++;
	while(ii<=n)
	{
		while(jj<=n){if(m[a[jj]]==k){ans += n-jj+1;break;}jj++;m[a[jj]]++;}
		m[a[ii]]--,ii++;
	}
	cout<<ans;
}
