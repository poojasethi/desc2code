#include<vector>
#include<iostream>
#include<map>
using namespace std;

map<int, int> count;

int main(){
	int n, k;
	int vec[400000];
	int l = 0;
	unsigned long long ans = 0;
	cin >> n >> k;
	for(int i = 0; i < n; ++i){
		cin >> vec[i];
		count[vec[i]]++;
		while((count[vec[i]] >= k)){
			ans += n - i;
			count[vec[l++]]--;
		}
	}	
	cout << ans << endl;
	return 0;
}
