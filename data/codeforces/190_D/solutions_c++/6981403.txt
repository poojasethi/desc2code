#include <bits/stdc++.h>

using namespace std;

int n,k,a[441111],x,p=0;
long long ans=0LL;
map<int,int> f;

int main(){
    ios::sync_with_stdio(false);
    cin>>n>>k;
    for(int i=0;i<n;++i){
        cin>>a[i];
        f[ a[i] ]++;
        if (f[ a[i] ]>=k){
            while (p<=i && f[a[i]]>=k) {f[ a[p] ]--;p++;ans+=n-i;}
        }
    }
    cout<<ans<<'\n';
    return 0;
}
