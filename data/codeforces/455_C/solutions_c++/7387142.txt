#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#include<ctime>
#include<iostream>
#include<cmath>
#include<vector>
#define int64 long long
#define mk make_pair
#define pb push_back
#define sqr(x) (x)*(x)
#define rep(i,x,y) for(int i=x;i<=y;++i)
#define VI vector<int>
#define N 310000
using namespace std;
int fa[N],next[N*2],head[N],e[N*2],len,n,m,Q,f[N],bo[N],i,x,y,d[N],type;
int get(int x){
	if(fa[x]==x)return x;
	return fa[x]=get(fa[x]);
}
int dfs(int x,int ff,int b){
	bo[x]=1;
	fa[x]=b;
	f[x]=0;
	int ans=0;
	for(int i=head[x];i;i=next[i])if(e[i]!=ff){
		ans=max(ans,dfs(e[i],x,b));
		int v=f[e[i]]+1;
		ans=max(ans,f[x]+v);
		f[x]=max(f[x],v);
	}
	return ans;
}
int main(){
	scanf("%d%d%d",&n,&m,&Q);
	for(i=1;i<=m;++i){
		scanf("%d%d",&x,&y);
		next[++len]=head[x]; head[x]=len; e[len]=y;
		next[++len]=head[y]; head[y]=len; e[len]=x;
	}
	for(i=1;i<=n;++i)if(!bo[i]){
		d[i]=dfs(i,0,i);
	}
	for(i=1;i<=Q;++i){
		scanf("%d",&type);
		if(type==1){
			scanf("%d",&x);
			x=get(x);
			printf("%d\n",d[x]);
		}else{
			scanf("%d%d",&x,&y);
			x=get(x); y=get(y);
			if(x==y)continue;
			fa[y]=x;
			d[x]=max(max(d[x],d[y]),(d[x]+1)/2+(d[y]+1)/2+1);
		}
	}
}