#include <bits/stdc++.h>

using namespace std;

int f[300100],fa[300100];
int g[300100];
vector<int> e[300100];
int n,m,q,u,v,now;

int find(int now){
	if (fa[now]==now) return now;
	return fa[now]=find(fa[now]);
}

void dfs(int k,int fa,int dep){
	if (dep>now){
		now=dep;
		v=k;
	}
	f[k]=1;
	for (int i=0;i<e[k].size();i++){
		u=e[k][i];
		if (u!=fa){
			dfs(u,k,dep+1);
		}
	}
}

int main(){
	scanf("%d%d%d",&n,&m,&q);
	for (int i=1;i<=n;i++) fa[i]=i;
	for (int i=1;i<=m;i++){
		int x,y;
		scanf("%d%d",&x,&y);
		e[x].push_back(y);
		e[y].push_back(x);
		fa[find(x)]=find(y);
	}
	for (int i=1;i<=n;i++){
		if (f[i]==0){
			now=-1;
			dfs(i,0,0);
			now=-1;u=v;
			dfs(u,0,0);
			g[find(i)]=now;
		}
	}
	for (int i=1;i<=q;i++){
		int x,y,z;
		scanf("%d%d",&x,&y);
		if (x==1){
			int ans=g[find(y)];
			printf("%d\n",ans);
		}else{
			scanf("%d",&z);
			int xx=find(y);
			int yy=find(z);
			if (xx==yy) continue;
			g[yy]=max(max(g[xx],g[yy]),g[yy]/2+g[yy]%2+g[xx]/2+g[xx]%2+1);
			fa[xx]=yy;
		}
	}
	return 0;
}
