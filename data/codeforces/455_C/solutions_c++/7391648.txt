#include<bits/stdc++.h>
using namespace std;

vector<int> v[300005];
int f[300005],len[300005],s;
bool z[300005];

int find(int x)
{
	return x==f[x]?x:f[x]=find(f[x]);
}

int dfs(int x,int p)
{
	int i,j,y,d1=0,d2=0,k;
	for(i=0,j=v[x].size();i<j;i++)
		if((y=v[x][i])!=p)
		{
			k=dfs(y,x)+1;
			if(k>d1)
				swap(k,d1);
			if(k>d2)
				swap(k,d2);
			s=max(s,d1+d2);
		}
	return d1;
}

int main()
{
	int n,m,q,a,b,i,j;
	scanf("%d%d%d",&n,&m,&q);
	for(i=1;i<=n;i++)
		f[i]=i;
	for(i=0;i<m;i++)
	{
		scanf("%d%d",&a,&b);
		v[a].push_back(b);
		v[b].push_back(a);
		f[find(b)]=find(a);
	}
	for(i=1;i<=n;i++)
	{
		j=find(i);
		if(!z[j])
		{
			s=0;
			z[j]=1;
			dfs(j,0);
			len[j]=s;
		}
	}
	for(i=0;i<q;i++)
	{
		scanf("%d",&j);
		if(j==1)
		{
			scanf("%d",&a);
			printf("%d\n",len[find(a)]);
		}
		else
		{
			scanf("%d%d",&a,&b);
			a=find(a);b=find(b);
			if(a!=b)
			{
				len[a]=max(max(len[a],len[b]),(len[a]+1)/2+(len[b]+1)/2+1);
				f[b]=a;
			}
		}
	}
	return 0;
}
