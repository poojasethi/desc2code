#include<bits/stdc++.h>
using namespace std;

#define pb push_back

int Ata[600005],LP[600005];

vector<int> V[600005];

bool H[600005];

int mx,mx2,n,m,q,w,e,qwe;

void dfs(int x,int y,int ata){

	int i;

	if(y>mx){
		mx=y;
		qwe=x;
	}

	H[x]=1;

	for(i=0 ; i<V[x].size() ; i++)
		if(V[x][i]!=ata)
			dfs(V[x][i],y+1,x);

}

void dfs2(int x,int y,int ata){

	int i;

	if(y>mx2)
		mx2=y;

	for(i=0 ; i<V[x].size() ; i++)
		if(V[x][i]!=ata)
			dfs2(V[x][i],y+1,x);

}

int atabul(int x){
	return Ata[x]= ( Ata[x]==x ? x : atabul(Ata[x]) ) ;
}

int main(){
	
	int i,a,b,x;

	scanf("%d %d %d",&n,&m,&q);

	for(i=1 ; i<=n ; i++)
		Ata[i]=i;

	for(i=1 ; i<=m ; i++){
		scanf("%d %d",&a,&b);

		Ata[atabul(a)]=atabul(b);

		V[a].pb(b);
		V[b].pb(a);
	}

	for(i=1 ; i<=n ; i++){
		if(!H[i]){
	
			mx2=0;
			mx=0;
			qwe=i;

			dfs(i,0,0);
	
			dfs2(qwe,0,0);

			LP[atabul(i)]=mx2;
//			cout<<i<<' '<<LP[atabul(i)]<<endl;
		}
	}

	for(i=1 ; i<=q ; i++){
		scanf("%d",&x);
		if(x==2){
			scanf("%d %d",&a,&b);

			e=atabul(a);
			w=atabul(b);

			if(e==w)
				continue;

			Ata[e]=w;

			LP[w]=max(max(LP[w], LP[e]),(LP[e]+1)/2+(LP[w]+1)/2+1);
		}
		else {

			scanf("%d",&a);

			printf("%d\n",LP[atabul(a)]);

		}
	}

	return 0;
}
