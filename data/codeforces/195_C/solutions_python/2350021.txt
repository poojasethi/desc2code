import re
v=[raw_input() for _ in xrange(input())]
t=[]
for s in v:
  p=re.split('\s+',re.sub('[(),]',' ',s).strip())
  if not p:continue
  if p[0]=='try':
    t.append('')
  elif p[0]=='catch':
    if t[-1]==p[1]:
      print re.findall('".*"',s)[0].strip('"')
      break
    e=t.pop()
    if e and t:
      t.pop()
      t.append(e)
  elif p[0]=='throw':
    t.append(p[1])
else:
  print 'Unhandled Exception'