#!/usr/bin/env python
input=raw_input
import re

if __name__ == '__main__':
    nlines = int(input())

    context = []
    exception = None
    for n in range(nlines):
        line = input().strip()
        if len(line) == 0: continue
        line = line.replace('(', ' ').replace(')', ' ').replace(',', ' ')

        if line.startswith('try'):
            context.append('[')
        elif line.startswith('throw'):
            exception = line.split()[1]
            context.append(exception)
        elif line.startswith('catch'):
            if context[-1] == '[':
                context.pop()
            else:
                ex = line.split()[1]
                msg1 = line.find('"')
                msg2 = line.find('"', msg1+1)
                msg = line[msg1+1:msg2]
                #print ex, msg1, msg2, msg
                if ex == exception:
                    print msg
                    quit()
                context.append(line)
        else:
            raise ValueError

    print 'Unhandled Exception'
