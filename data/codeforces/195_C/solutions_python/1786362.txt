#!/usr/bin/env python
import re

t=re.compile('try')
c=re.compile('catch *\( *([^ ,]*) *, *"([^"]*)" *\)')
th=re.compile('throw *\( *([^ \)]*) *\)')

N=int(raw_input())
n=0
while(True):
    s=raw_input()
    n+=1
    q=th.search(s)
    if(q):
        ex=q.group(1)
        break

tz=0
while n<N:
    s=raw_input()
    n+=1
    q=c.search(s)
    if(q):
        if(tz>0):
            tz-=1
            continue
        exz,mz=q.groups()
        if exz==ex:
            print mz
            exit(0)
    if(t.search(s)):
        tz+=1
        continue

print 'Unhandled Exception'