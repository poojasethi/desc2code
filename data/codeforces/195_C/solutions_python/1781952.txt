import re,sys
n,c,d,e = int(raw_input()),'',0,0
for i in range(n):
	s = re.sub('[(),]',' ',raw_input().strip())
	p = re.split('[\s]+',s)
	if s.startswith('th'):
		c=p[1]
		e=d
	elif s.startswith('tr'): d+=1
	elif s.startswith('c'):
		if c==p[1] and d<=e:
			print re.findall('"(.*)"',s)[0]
			sys.exit()
		d-=1
		e=min(e,d)
print 'Unhandled Exception'