#include <iostream>
#include <string.h>
#include <stack>
#include <stdio.h>

using namespace std;
typedef long long ll;

int main(int argc,char** argv) {
	int N;

	char line[256];
	gets(line);
	sscanf(line,"%d",&N);
	ll depth=0;
	ll th_depth=-1;
	bool th_met = false;
	char th_type[50];
	int i=0;
	while (i++<N) {
		gets(line);
		if (strstr(line, "catch")) {
			if (th_depth != -1) {
				if (depth <= th_depth) {
					char* t = strchr(line,'(')+1;
					char* e = strchr(t,',');
					char* m = strchr(line,'"')+1;
					//if (e) {
						*e='\0';
					//}
					char type[50];
					sscanf(t,"%s",type);
					if (strcmp(type, th_type)==0) {
						char* e = strchr(m,'"');
						*e='\0';
						printf(m);
						return 0;
					}
					if (depth == th_depth) {
						th_depth--;
					}
				}
			}
			--depth;
		} else if (strstr(line, "throw")) {
			if (depth == 0) {
				printf("Unhandled Exception");
				return 0;
			}
			th_depth=depth;
			char* t = strchr(line,'(')+1;
			char*e = strchr(t,')');
			//if (e) {
				*e='\0';
			//}
			sscanf(t,"%s",th_type);
		} else if (strstr(line, "try")) {
			++depth;
		}
	} 

	printf("Unhandled Exception");
	
	return 0;
}