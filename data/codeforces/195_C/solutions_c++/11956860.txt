#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <stdio.h>
using namespace std;
int main(){
  //freopen("input.txt","r",stdin);
  //freopen("output.txt","w",stdout);
  int q,w,e,r,t=0;
  char a[51],h[21];
  bool b=0,b1;
  for(scanf("%d",&q),gets(a);q;q--){
   gets(a);
   for(w=0;a[w]==' ';w++);
   if(!a[w])
    continue;
   if(!b){
    if(a[w+1]!='h')
     continue;
    for(;a[w]!='(';w++);
    for(w++;a[w]==' ';w++);
    e=0;
    for(;(a[w]!=' ')&&(a[w]!=')');w++){
     h[e]=a[w];
     e++;}
    h[e]=0;
    b=1;
    continue;}
   if(a[w+1]=='r')
    t++;
   if(a[w+1]=='a'){
    t--;
    if(t<0){
     t=0;
     for(;a[w]!='(';w++);
     for(w++;a[w]==' ';w++);
     e=0;
     b1=1;
     for(;(a[w]!=',')&&(a[w]!=' ');w++){
      if(h[e]!=a[w]){
       b1=0;
       break;}
      e++;}
     if(h[e]!=0)
      b1=0;
     if(b1){
      for(;a[w]!='"';w++);
      for(w++;a[w]!='"';w++)
       printf("%c",a[w]);
      return 0;}}}
   }
  printf("Unhandled Exception");
  return 0;}
