#include <stdio.h>
#include <string.h>

int top,vp;
char s[100];
char exp[100];

bool isletter(char c)
{
	return (((c>='a')&&(c<='z'))||((c>='A')&&(c<='Z')));
}

int main()
{
	int i,j,k,p,p2,len,n;
	char nowexp[100];

	//freopen("c.in","r",stdin);

	scanf("%d",&n);
	gets(s);
	top=0;
	vp=0;
	for (i=1; i<=n; ++i)
	{
		gets(s);
		len=strlen(s);
		p=0;
		while ((p<len)&&(!isletter(s[p])))
			++p;
		if (p>=len)
			continue;
		if (s[p]=='c') //catch
		{
			if (vp!=top)
			{
				--top;
				continue;
			}
			else {
				p=0;
				while (s[p]!='(')
					++p;
				while (!isletter(s[p]))
					++p;
				len=0;
				while (isletter(s[p]))
				{
					nowexp[len++]=s[p];
					++p;
				}
				nowexp[len]='\0';
				if (strcmp(nowexp,exp)==0)
				{
					while (s[p]!='"')
						++p;
					++p;
					len=0;
					while (s[p]!='"')
						printf("%c",s[p++]);
					printf("\n");
					return 0;
				}
				else continue;
				--vp;
				--top;
			}
		}
		else if ((s[p]=='t')&&(s[p+1]=='r')) //try
			++top;
		else //throw
		{
			p=0;
			while (s[p]!='(')
				++p;
			vp=top;
			while (!isletter(s[p]))
				++p;
			len=0;
			while (isletter(s[p]))
			{
				exp[len++]=s[p];
				++p;
			}
			exp[len]='\0';
		}
	}
	printf("Unhandled Exception\n");
	return 0;
}