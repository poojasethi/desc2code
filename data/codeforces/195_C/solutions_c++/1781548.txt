#include<cstdio>
#include<cstring>
#include<iostream>
using namespace std;

int N;
char r[80],ans[80];
char s[80],t[80];
bool flag;

bool deal()
{
    bool find=false;
    while(scanf("%*[^a-z]%[a-z]",s),s[1]!='a')
    {
        if(s[1]=='r') find|=deal();
        if(s[1]=='h')
        {
            scanf("%*[^A-Za-z]%[A-Za-z]",r);
            find=true;
        }
    }
    char a[80],b[80];
    scanf("%*[^A-Za-z]");
    scanf("%[A-Za-z]",a);
    scanf("%*[^\"]\"%[^\"]",b);
    if(find&&flag==0&&strcmp(a,r)==0)
    {
        flag=true;
        strcpy(ans,b);
    }
    return find;
}
int main()
{
    cin>>N;
    while(scanf("%*[^a-z]%[a-z]",s)!=EOF&&s[1]=='r') deal();
    if(flag) cout<<ans<<endl;
    else cout<<"Unhandled Exception"<<endl;
    return 0;
}
