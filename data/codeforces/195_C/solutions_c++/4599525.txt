//By: Amit Saharana, IIT Delhi

#include <bits/stdc++.h>
using namespace std;
#define ll long long

int main() {
  ios_base::sync_with_stdio(0);
  int n;
  cin>>n;
  int f,t=0; string ex; string p;
  getline(cin,p);
  for(int cur=0; cur<n; cur++) {
    getline(cin,p);
    int z = p.length();
    int j = 0;
    while(j<z && p[j]==' ') j++;
    if(j==z) continue;
    if(p[j+1]=='r') {
      t++;
    }
    else if(p[j+1]=='h') {
      int b = p.find("(",j)+1;
      int c = p.find(")",b+1)-1;
      while(p[b]==' ') b++;
      while(p[c]==' ') c--;
      ex = p.substr(b,c-b+1);
      f = t;
    }
    else if(p[j+1]=='a'){
      if(t<=f) {
	int b = p.find("(",j)+1;      
	while(p[b]==' ') b++;
	int c = p.find(",",b+1)-1;
	int c2 = c;
	while(p[c]==' ') c--;	
	string exd = p.substr(b,c-b+1);
	if(ex==exd) {
	  int d = p.find("\"",c2+2)+1;
	  int e = p.find("\"",d+1)-1;
	  cout<<p.substr(d,e-d+1)<<endl;
	  return 0;
	}	
      }
      t--;
      f = min(f,t);     
    }
  }
  cout<<"Unhandled Exception"<<endl;
  return 0;
}
