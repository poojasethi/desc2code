#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <algorithm>

using namespace std;

const int MaxN = 100005;

int top = 0;
int st[MaxN];
char tp[MaxN];
char buf[MaxN];
char lhs[MaxN], rhs[MaxN];

int main() {
	int N;
	char* ptr;
	
	scanf("%d", &N);
	gets(buf);
	while (N--) {
		gets(buf);
		ptr = buf;
		while (*ptr == ' ') ptr++;
		if (*ptr == 0) continue;
		ptr++;
		if (*ptr == 'r') { //try
			st[++top] = 0;
		} else if (*ptr == 'a') { //catch
			if (st[top] == 1) {
				while (*ptr != '(') ptr++;
				ptr++;
				while (*ptr == ' ') ptr++;
				char *plhs = lhs, *prhs = rhs;
				while (*ptr != ' ' && *ptr != ',') *plhs++ = *ptr++;
				*plhs = 0;
				while (*ptr == ' ' || *ptr == ',') ptr++;
				while (*ptr != '"') ptr++;
				ptr++;
				while (*ptr != '"') *prhs++ = *ptr++;
				*prhs = 0;
				if (strcmp(lhs, tp) == 0) {
					puts(rhs);
					return 0;
				}
			}
			top--;
		} else { // throw
			for (int i = 1; i <= top; i++) st[i] = 1;
			while (*ptr != '(') ptr++;
			ptr++;
			while (*ptr == ' ') ptr++;
			char* plhs = tp;
			while (*ptr != ' ' && *ptr != ')') *plhs++ = *ptr++;
			*plhs = 0;
		}
	}
	puts("Unhandled Exception");
	
	return 0;
}

