#include <iostream>
#include <sstream>
#include <cstring>
#include <string>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <algorithm>
#include <bitset>
#include <vector>
#include <stack>
#include <list>
#include <utility>
#include <queue>
#include <set>
#include <map>
using namespace std;
int main() 
{
	int n;
	cin >>n;
	cin.ignore();
	int level = 0, el = 0;
	string exp="";
	string ans = "Unhandled Exception";
	stack<int> st;
	for(int l = 0; l < n; l++) {
		string line;
		getline(cin, line);
		int p = 0;
		while(line[p]==' ') p++;
		line = line.substr(p);
		if(line.find("try")==0) st.push(l);
		else if(line.find("throw")==0) {
			int a = line.find('(')+1, b = line.find(')')-1;
			while(line[a]==' ') a++;
			while(line[b]==' ') b--;
			exp = line.substr(a, b-a+1);
			el = l;
		} else if(line.find("catch")==0) {
			int a = line.find('(')+1, b = line.find(')')-1, c=line.find(',');
			int d = c+1;
			c--;
			while(line[a]==' ')a++;
			while(line[c]==' ')c--;
			while(line[d]==' ')d++;
			while(line[b]==' ')b--;
			string e = line.substr(a,c-a+1), msg = line.substr(d+1,b-d-1);
			if(e == exp && el > st.top()) {
				ans=msg;
				exp="";
			}
			st.pop();
		}
	}
	cout<<ans<<endl;
	return 0;
}
