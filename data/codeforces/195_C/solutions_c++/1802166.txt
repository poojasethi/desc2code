#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<algorithm>
#include<vector>
#include<queue>
#include<math.h>
#include<string>
#include<map>
#include<set>
#include<sstream>
using namespace std;

char st[25];
int main()
{
	int n;
	char str[60],ss[60];
	scanf("%d",&n);
	getchar();
	int flag=0;
	int top=0;
	for(int j=0;j<n;j++){
		gets(str);
		if(flag) continue;
		int i=0;
		while(str[i]==' ')
			i++;
		if(str[i]=='t'&&str[i+1]=='r'){
			if(st[0]!=0) top++;
		}
		else if(str[i]=='t'&&str[i+1]=='h'){
			while(str[i]!='(')
				i++;
			i++;
			while(str[i]==' ')
				i++;
			int k=0;
			while(str[i]!=' '&&str[i]!=')'){
				st[k++]=str[i];
				i++;
			}
			st[k]=0;
		}
		else if(str[i]=='c'){
			if(top>0){
				top--;
				continue;
			}
			while (str[i] != '(')
				i++;
			i++;
			while (str[i] == ' ')
				i++;
			int k=0;
			while (str[i] != ' '&&str[i]!=',') {
				ss[k++] = str[i];
				i++;
			}
			ss[k]=0;
			if(strcmp(ss,st)==0){
				flag=1;
				while (str[i] != '"')
					i++;
				i++;
				k=0;
				while (str[i] != '"'){
					ss[k++] = str[i];
					i++;
				}
				ss[k]=0;
				puts(ss);
			}
		}
	}
	if(flag==0)
		puts("Unhandled Exception");
}
