#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <iostream>
#include <map>
#include <string>

using namespace std;

int N;
char str[100]="\0";
char str2[100]="\0";
int sp=0;
int In=-1e9;
char exist[100]="\0";
int ep=0;

void remove()
{
	sp=0;
	int flag=0;
	for(int i=1;str[i]!='\0';i++)
	{
		if((str[i]==' ' && flag==0) || str[i]=='\n' || str[i]=='\r') continue;
		str2[++sp]=str[i];
		if(str2[sp]=='\"')
			flag^=1;
	}
	str2[sp+1]='\0';
	return;
}

int main()
{
	scanf("%d\n",&N);
	int Cnt=0;
	int flag=0;	
		
	for(;N>0;N--)
	{
		gets(str+1);
		remove();
		if(sp==0) continue;
		if(strcmp(str2+1,"try")==0)
			Cnt++;
		else if(str2[1]=='t')
		{
			In=Cnt;
			for(int i=7;i<=sp-1;i++)
				exist[++ep]=str2[i];
		}
		else
		{
			if(Cnt<=In)
			{
				int Ok=1;
				for(int i=1;i<=ep;i++)
				{
					if(exist[i]!=str2[i+6])
					{
						Ok=0;
						break;
					}
				}
				if(str2[ep+7]!=',') Ok=0;
				if(Ok==1)
				{
					for(int i=ep+9;str2[i]!='\"';i++)
						putchar(str2[i]);
					
					In=-1e9;
					flag=1;
				}
			}
			if(Cnt==In)
				In--;
			Cnt--;
			
		}
	}
	if(flag==0)
		cout<<"Unhandled Exception"<<endl;
	return 0;
}
