#include <stdio.h>
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

long long n, len, try1;
string rem, s, block, ans;
bool was, kav, answas;

int main()
{
    cin>>n;
    getline(cin, s);
    for (int i = 0; i < n; i++)
    {
        rem = "";
        getline(cin, s);
        if (s != "")
        {
            len = s.length();
            for (int j = 0; j < len; j++)
                if (s[j] != ' ' || kav)
                {
                    rem += s[j];
                    if (s[j] == '"')
                        kav = !kav;
                }
            if (rem == "try" && was)
                try1++;
            else
            {
                if (rem.substr(0, 5) == "throw")
                    block = rem.substr(6, rem.length() - 7), was = true;
                if (rem.substr(0, 5) == "catch")
                {
                    if (rem.substr(6, rem.find(",")-6) == block && try1 <= 0 && !answas)
                        ans = rem.substr(rem.find(",")+2, rem.length()-rem.find(",")-4), answas = true;
                    if (was && try1 > 0) try1--;
                }
            }
        }
    }
    if (ans == "")
        cout<<"Unhandled Exception";
    else
        cout<<ans;
    cin>>n;
    return 0;
}
