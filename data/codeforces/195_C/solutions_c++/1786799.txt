#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main()
{
	ios::sync_with_stdio(false);
	int n;
	cin >> n;
	vector<int> v;
	string type;
	for(int i = 0; i < n+2; i++)
	{
		string s;
		getline(cin,s);
		int m=s.size();
		int p=0;
		while(s[p]==' '&&p<m) ++p;
		if(p==m) continue;
		string c="";
		//cerr << s << endl;
		while(p<m&&isalpha(s[p]))
			c+=s[p],p++;
		//cerr << c << endl;
		if(c=="try")
		{
			v.push_back(0);
		}
		else if(c=="throw")
		{
			if(v.empty())
				break;
			v.back()=1;
			while(s[p]==' '||s[p]=='(') p++;
			string tmp="";
			while(p<m&&isalpha(s[p]))
				tmp+=s[p],p++;
			type=tmp;
		}
		else if(c=="catch")
		{
			if(v.back()==1)
			{
				while(s[p]==' '||s[p]=='(') p++;
				string tmp;
				while(isalpha(s[p])) tmp+=s[p],p++;
				if(tmp==type)
				{
					while(s[p]==' '||s[p]==',') p++;
					p++;
					while(s[p]!='"') cout << s[p],p++;
					cout << endl;
					return 0;
				}
				v.pop_back();
				if(!v.empty()) v.back()=1;
			}
			else
				v.pop_back();
		}
	}
	cout << "Unhandled Exception" << endl;
	return 0;
}
