#include <iostream>
#include <string>
#include <vector>
#include <sstream>
#include <cstdlib>

using namespace std;

void depura(string &s)
{
  for (int i=0;i<int(s.size());i++)
    if (s[i]==',' or s[i]=='(' or s[i]==')')
      s[i]=' ';
}

string extrae(string &s)
{
  int i1=0;
  while (s[i1]!='"') i1++;
  i1++;
  int i2=i1;
  while (s[i2]!='"') i2++;
  if (i1==i2) return "";
  return s.substr(i1,i2-i1);
}

int main()
{
  int lineas;
  cin>>lineas;
  string s;
  getline(cin,s);
  int numtries=0;
  string trow="";
  int triestrow=-1;
  for (int i=0;i<lineas;i++) {
    getline(cin,s);
    depura(s);
    istringstream ci(s);
    string oper;
    ci>>oper;
    if (oper=="try") {
      numtries++;
    } else if (oper=="catch") {
      if (triestrow!=-1 and numtries<=triestrow) {
	string option;
	ci>>option;
	if (option==trow) {
	  getline(ci,option);
	  cout<<extrae(option)<<endl;
	  exit(0);
	}
	triestrow--;
      }
      numtries--;
    } else {
      ci>>trow;
      triestrow=numtries;
    }
  }
  cout<<"Unhandled Exception"<<endl;
}
