#include <cstdio>
#include <cstring>
#include <cctype>
using namespace std;

const int MAXL=50+1;
const int MAXLE=20+1;
int n,nt,nout;
char ln[MAXL],en[MAXLE],cen[MAXLE],em[MAXLE];
bool wt;

void geten(char *ln,char *en){
    char *p=strstr(ln,"(");
    while(!isalpha(*p)) p++;
    memset(en,0,MAXLE);
    for(int j=0; isalpha(p[j]); j++) en[j]=p[j];
}

void getem(char *ln,char *em){
    char *p=strstr(ln,"\"")+1;
    memset(em,0,MAXLE);
    for(int j=0; p[j]!='\"'; j++) em[j]=p[j];
}

int main(int argc, char const *argv[]) {
    scanf("%d\n",&n);
    nt=0;
    nout=0;
    wt=false;
    for(int i=0; i<n; i++){
        gets(ln);
        if(wt && !nt) continue;
        if(strstr(ln,"catch")){
            geten(ln,cen);
            getem(ln,em);
            if(wt && !nout && !strcmp(en,cen)){
                printf("%s\n",em);
                wt=false;
            }
            nt--;
            nout-=(wt&&nout);
        }else if(strstr(ln,"throw")){
            wt=true;
            geten(ln,en);
        }else if(strstr(ln,"try")){
            nt++;
            nout+=wt;
        }
    }
    if(wt) printf("Unhandled Exception\n");
    return 0;
}
