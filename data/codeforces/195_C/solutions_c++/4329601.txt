#include <bits/stdc++.h>

using namespace std;

void replaceall(string &s)
{
	for (int i = 0; i < (int) s.length(); ++i)
		if (s[i] == '(' || s[i] == ')' || s[i] == ',')
			s[i] = ' ';
}

int main()
{
	string s, name, key, obj, mkey;
	int n, heap = -1;
	stack<int> st;

	cin >> n >> ws;

	for (int i = 1; i <= n; ++i)
	{
		getline(cin, s);
		replaceall(s);

		istringstream in(s);

		if (!(in >> name))
			continue;

		if (name == "try")
			st.push(i);

		if (name == "throw")
		{
			in >> mkey;
			heap = i;
		}

		if (name == "catch")
		{
			in >> key;
			if (key == mkey && heap > st.top())
			{
				getline(in, obj);
				obj.erase(0, obj.find('"') + 1);
				obj.erase(obj.find('"'), obj.length());
				cout << obj << endl;
				return 0;
			}
			st.pop();
		}
	}
	cout << "Unhandled Exception\n";
	return 0;
}
