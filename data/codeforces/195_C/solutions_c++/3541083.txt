#include<cstdio>
#include<cstring>
char s[52],s1[22],s2[22],mes[22];
bool isC(char c){
	return (c>='a'&&c<='z')||(c>='A'&&c<='Z');
}
int main(){
	int l,i,j,m,n;
	while(~scanf("%d",&n)){
		bool f=0;
		m=-1;
		l=0;getchar();
		while(n--){
			gets(s);
			i=0;
			while(s[i]==' ')i++;
			if(s[i]=='t'){
				if(s[i+1]=='r')l++;
				else {
					for(i+=2;s[i];i++)if(s[i]=='(')break;
					for(i+=1;s[i];i++)if(s[i]!=' ')break;
					for(j=0;isC(s[i]);i++,j++)s1[j]=s[i];s1[j]='\0';
					m=l;
				}
			}else if(s[i]=='c'){
				for(i+=2;s[i];i++)if(s[i]=='(')break;
				for(i+=1;s[i];i++)if(s[i]!=' ')break;
				for(j=0;isC(s[i]);i++,j++)s2[j]=s[i];s2[j]='\0';
				if(m!=-1&&l==m){
					if(!f&&strcmp(s1,s2)==0){
						f=1;
						for(;s[i];i++)if(s[i]=='"')break;
						for(i+=1,j=0;s[i]!='"';i++,j++)mes[j]=s[i];mes[j]='\0';
					}else m--;
				}
				l--;
			}
		}
		puts(f?mes:"Unhandled Exception");
	}
	return 0;
}
		 	  		  	 	 	  	   	 			