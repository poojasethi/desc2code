#include <iostream>
#include <cstdlib>
#include <cstdio>
using namespace std;
string error;
int err_line;
int line = 0;
void in_char(char &t){
	while(true){
		t=getchar();
		if(t!=' '&&t!='\n'&&t!='\r')
			return;
	}
}
void handle(int start){
	string type;
	while(true){
		line++;
		for(int i = 0; i < 10; ++i){
			char t;
			in_char(t);
			type.push_back(t);
			if(type=="try" || type == "catch" || type == "throw")
				break;
		}
		if(type!="catch" && type !="try" && type != "throw"){
			return;
		}
		if(type=="throw"){
			char t;
			in_char(t);
			in_char(t);
			while(t!=')'){
				error.push_back(t);
				in_char(t);
			}
			err_line = line;
		}
		if(type=="try"){
			handle(line+1);
		}
		if(type=="catch"){
			string test,mess;
			char t;
			in_char(t);
			in_char(t);
			while(t!=','){
				test.push_back(t);
				in_char(t);
			}
			in_char(t);
			getline(cin,mess,'"');
//			cout << test << ' ' << mess << '\n';
			in_char(t);
			if(err_line>=start&&error==test){
				cout << mess << '\n';
				exit(0);
			}
			return;
		}
		type.resize(0);
	}
}
int main(){
	int n;
	cin >> n;
	handle(0);
	cout << "Unhandled Exception\n";
}
