// C. Try and Catch
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <string>
#include <stack>

using namespace std;

int main(int argc, char *argv[])
{
    static char s[1024];
    int n;
    fgets(s, sizeof(s), stdin);
    n = atoi(s);
    stack<int> st;
    int thrown = -1;
    string thrown_type;
    for (int i = 0; i < n; i++) {
        fgets(s, sizeof(s), stdin);
        char *p = s;
        while (isspace(*p)) p++;
        if (!strncmp(p, "try", 3)) {
            st.push(i);
        } else if (!strncmp(p, "catch", 5)) {
            for (p += 5; !isalpha(*p); p++) {}
            string type, msg;
            for ( ; isalpha(*p); p++) type += *p;
            while (*p != '"') p++;
            for (p++; *p != '"'; p++) msg += *p;
            if (type == thrown_type && thrown > st.top()) {
                printf("%s\n", msg.c_str());
                return 0;
            }           
            st.pop();           
        } else if (!strncmp(p, "throw", 5)) {
            for (p += 5; !isalpha(*p); p++) {}
            for ( ; isalpha(*p); p++) thrown_type += *p;
            thrown = i;
        }
    }
    printf("Unhandled Exception\n");

    return 0;
}
