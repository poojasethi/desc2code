//By momo
#include <map>
#include <cstring>
#include <iostream>
#include <string>
#include <cstdio>
#include <algorithm>
#define N 100010
using namespace std;

int n, cnt, cnt2, ans = -1, stk[N], sn, fl;
string nme, A, B;
map<string, int> chg;
map<string, string> err;

int main (){
	scanf("%d%*[ \n]", &n);
	for(int i = 0; i < n; i++){
		char s[100];
		scanf("%[^ ^\n^(]%*[ \n(]", s);
		if(!strcmp(s, "try")){
			stk[sn++] = cnt;
			cnt++;
		}
		if(!strcmp(s, "throw")){
			char nm[100];
			scanf("%[^)^ ^\n]", nm);
			nme = nm;
			ans = cnt;
			scanf("%*[ \n)]");
		}
		if(!strcmp(s, "catch")){
			char a[100];
			scanf("%[^,^ ]", a);
			A = a;
			scanf("%*[^\"]\"");
			char b[100];
			scanf("%[^\"]", b);
			B = b;
			scanf("%*[ \n)\"]");
			if(sn > 0 && !err.count(A) && ans > stk[sn-1])
				err[A] = B;
			sn--;
		}
	}
	if(err.count(nme)) cout << err[nme] << endl;
	else puts("Unhandled Exception");
}
