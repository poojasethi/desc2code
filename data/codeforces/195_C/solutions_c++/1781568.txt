#include <vector>
#include <string>
#include <algorithm>
#include <cstdio>
#include <iostream>
#include <queue>
#include <cstring>
#include <cstdlib>
#include <sstream>
using namespace std;
#define REP(i,n) for(int i=0;i<(n);i++)
#define FOR(i,a,b) for(int i=(a);i<(b);i++)
#define FORD(i,a,b) for(int i=(a);i>(b);i--)
typedef long long ll;
int nextint()
{
	int t;
	scanf("%d",&t);
	return t;
}

ll nextll()
{
	ll t;
	cin>>t;
	return t;
}

int main()
{
	int depth=0;
	int qdepth=-1;
	int n=nextint();
	string str;
	string message;
	getline(cin,str);
	while(n--)
	{
		getline(cin,str);
		REP(i,str.size())
			if(str[i]==')'||str[i]=='('||str[i]==',')
				str[i]=' ';
		istringstream in(str);
		if(!(in>>str)) continue;

		if(str=="try")
		{
			depth++;
		}
		else if(str=="throw")
		{
			in>>message;
			qdepth=depth;
		}
		else
		{
			in>>str;
			if(depth==qdepth&&str==message)
			{
				getline(in,str);
				int print=0;
				REP(i,str.size())
				{
					if(str[i]=='"')
						print^=1;
					else if(print) putchar(str[i]);
				}
				puts("");
				return 0;
			}
			depth--;
			if(qdepth>depth) qdepth=depth;
		}

	}
	cout<<"Unhandled Exception"<<endl;
}
