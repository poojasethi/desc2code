#include <cstdio>
#include <cstring>
#include <stack>
#include <string>
#include <algorithm>
using namespace std;

int tot, es;
char line[100000];
char et[100000], einfo[100000], be[100000], info[100000], cmd[100000];

int main() {
	int n;
	while (scanf("%d ", &n) != EOF) {
		tot = 0; es = -1;
		einfo[0] = 0;
		for (int i = 0; i < n; ++i) {
			gets(line);
			if (sscanf(line, " %[^( ]", cmd) != 1) {
				continue;
			}
			if (strcmp(cmd, "try") == 0)
				++tot;
			else if (strcmp(cmd, "throw") == 0) {
				if (es == -1) {
					sscanf(line, " throw ( %[^) ] )", et);
					es = tot;
				}
			} else {
				sscanf(line, " catch ( %[^, ] , \"%[^\"]\" )", be, info);
				if (tot == es && strcmp(be, et) == 0) {
					es = -1;
					puts(info);
				} else if (tot == es) {
					--es;
				}
				--tot;
			}
			//printf("%d %d", es, tot);
		//	system("pause");
		}
		if (es != -1) {
			puts("Unhandled Exception");
		}
	}
	return 0;
}
	 	  			   	  		  		 			  	