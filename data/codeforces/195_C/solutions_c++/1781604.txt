#include <cstdio>
#include <algorithm>
#include <iostream>
#include <vector>
#include <map>
#include <cctype>
#include <cstring>

using namespace std;

char s[1000], *p;
int n;

void skip()
{
	while(*p && isspace(*p)) p++;
}

string type;

int main()
{
		gets(s);
		sscanf(s, "%d", &n);

		type = "";
		int cnt = 0;
		int need_cnt = -1;

		for(int i = 0; i < n; i++)
		{
			gets(s);
			p = s;
			skip();
			if (!strncmp(p, "try", 3)) { cnt++; continue;}

			if (!strncmp(p, "throw", 5))
			{
				need_cnt = cnt - 1;
				p += 5;
				skip();
				p++; // skip '('
				skip();
				while(*p && isalpha(*p)) type += *p++;
				//printf("type = %s\n", type.c_str());
				continue;
			}


			if (!strncmp(p, "catch", 5))
			{
			cnt--;
			if (cnt != need_cnt) continue;
			p += 5;
			skip();
			p++; // skip '('
			skip();
			string type2 = "";
			while(*p && isalpha(*p)) type2 += *p++;
			if (type == type2)
			{
				string msg = "";
				skip();
				p++; // skip ','
				skip();
				p++; // skip "
				while(*p != '\"') msg += *p++;
				puts(msg.c_str());
				return 0;
			}
			else need_cnt--;
			}
		}


		puts("Unhandled Exception");
        return 0;       
}
