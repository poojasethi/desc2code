#include<cstdio>
#include<cstring>
#include<iostream>
using namespace std;
char s[90],r[90],a[90],b[90],ans[90]={"Unhandled Exception"};
int n;
bool done=0;
bool check(){
    bool hv=0;
    while(scanf("%*[^a-z]%[a-z]",s),s[1]!='a'){
        if(s[1]=='r') hv|=check();
        if(s[1]=='h')scanf("%*[^A-Za-z]%[A-Za-z]",r),hv=true;
    }
    scanf("%*[^A-Za-z]%[A-Za-z]",a),scanf("%*[^\"]\"%[^\"]",b);
    if(hv&&!done&&strcmp(a,r)==0)done=true,strcpy(ans,b);
    return hv;
}
int main(){
    scanf("%d",&n);
    while(scanf("%*[^a-z]%[a-z]",s)!=EOF&&s[1]=='r')check();
    scanf("%*[^\n]\n");
    printf("%s\n",ans);
    return 0;
}
