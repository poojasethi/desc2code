#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <string>
#include <map>
#include <set>
#include <vector>
#include <algorithm>
#include <queue>
#include <bitset>
#include <stack>
#include <iostream>
#include <fstream>
#include <cmath>

#define pii pair<int,int>
#define X first
#define Y second

using namespace std;

const int MAXLEN = 505;

int n;
char str[MAXLEN],er_th[MAXLEN];
bool ans;

bool shut_up()
{
    bool res=false;
    while ( scanf("%*[^a-z]%[a-z]", str) && str[1]!='a')
    {
        //cout<<str<<endl;
        if ( str[1] == 'r') res |= shut_up();            
        if ( str[1] == 'h')
        {           
                    scanf("%*[^A-Za-z]%[A-Za-z]", er_th);
                    res=true;
                    //cout<<er_th<<endl;
        }
    }
    char er[MAXLEN], messange[MAXLEN];
    scanf("%*[^A-Za-z]%[A-Za-z]", er);
    scanf("%*[^\"]\"%[^\"]", messange);
   // cout<<er<<"\\\\ "<<messange<<endl;
    if ( res && strcmp(er, er_th)==0)
    {
        printf("%s", messange);
        exit(0);
    }
    return res;
}

int main()
{
    //freopen("input.txt", "r", stdin);
    //freopen("output.txt", "w", stdout);
    while( ~scanf("%*[^a-z]%[a-z]", str) && str[1] == 'r') 
        shut_up();
   
    printf("Unhandled Exception");
    return 0;
}