# include <iostream>
# include <fstream>
# include <cstdio>
# include <cstring>
# include <cctype>

using namespace std;

int  n,t;
bool v=true,ret=false;
bool stack[100000]; int sz=0;

char AE[50],BE[50],MSG[50];
int  ae,be,msg;

int  c , len;
char line[50];

int main()
{
	cin>>n;
	scanf("\n");
	
	for (int i=0 ; i<n ; i++)
	{
		gets(line);
		c=0;
		len=strlen(line);
		while( c<len && !isalpha(line[c]) ) c++;
		
		if(c!=len)
		{
			if(line[c]=='c')
			{
				sz--;
				if( stack[sz]==true && ret==false )
				{
					be=0;c+=5;
					while(line[c]!=',')
					{
						if(isalpha(line[c]))
						BE[be++]=line[c];
						c++;
					}
					if(be==ae)
					{
						for (t=0 ; t<ae ; t++)
						if ( AE[t]!=BE[t] ) break;
						if(t==ae)
						{
							while(line[c]!='\"') c++; c++;
							while(line[c]!='\"')
							{
								MSG[msg++]=line[c];
								c++;
							}
							ret=true;
						}
					}
				}
			}
			else
			{
				if(line[c+1]=='r')
				stack[sz++]=v ;
				
				else
				{
					c+=5;
					while(line[c]!=')')
					{
						if(isalpha(line[c]))
						AE[ae++]=line[c];
						c++;
					}
					v=false;
				}
			}
		}
	}
	
	if(ret==false)
	cout<<"Unhandled Exception";
	else
	cout<<MSG;
	
	return 0;
}
