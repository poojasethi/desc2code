#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <stdio.h>
using namespace std;
const int i1=800010;
class sp{
  public:
  int q;
  sp *w;
  sp(int q1,sp *w1){
   q=q1;w=w1;}
};
sp *a[200000+i1];
int t,t1,i,y=0,f[200000+i1],s[200000+i1],d[200000+i1],h[200000+i1];
int q1,st[200000+i1],st1[200000+i1],st2[200000+i1],tr[200000+i1],mn[200000+i1];
int no[200000+i1];
void un(int e,int r){
  a[e]=new sp(r,a[e]);
  a[r]=new sp(e,a[r]);
}
int k(int q){
  if(f[f[q]]!=f[q])
   f[q]=k(f[q]);
  return f[q];
}
int bp(int u1,int u,int q){
  //cout<<u1<<" "<<u<<" "<<q<<"    *\n";
  int v;
  for(v=1<<17;v;v>>=1)
   if((u1+v<u)&&(st1[u1+v]<=q))
    u1+=v;
  if((u1>=u)||((st1[u1]>q)||(q>=st2[u1])))
   return -1;
  return mn[st[u1]];
}
void l(int q,int w,int t,int u){
  //cout<<q<<" "<<w<<" "<<t<<" "<<u<<" "<<"\n";
  mn[q]=q1;
  a[q1]=0;
  f[q1]=q;
  s[q1]=-2;
  tr[q1]=q;
  mn[q1]=q1;
  q1++;
  sp *c;
  no[q]=y;
  y++;
  int e=q,u1=u,y1;
  s[q]=t;
  for(c=a[q];c;c=c->w)
   if(c->q!=w){
    if(s[c->q]==-1){
     y1=y;
     l(c->q,q,t+1,u);
     if((s[k(c->q)]>0)&&(s[k(c->q)]==t)){
      st[u]=q1;
      st1[u]=y1;
      st2[u]=y;
      f[q1]=q;
      a[q1]=0;
      s[q1]=-2;
      mn[q1]=q1;
      tr[q1]=q;
      un(q1,mn[c->q]);
      u++;q1++;}
     if((s[k(c->q)]>0)&&(s[k(c->q)]<t))
      un(mn[q],mn[c->q]);}
    else
     if(no[q]<no[c->q])
      if((s[k(c->q)]==t)/*&&(u1<u)*/){
       //cout<<q<<" "<<c->q<<"\n";
       int r=bp(u1,u,no[c->q]);
       if(r<0)
        un(mn[q],mn[c->q]);
       else
        un(r,mn[c->q]);}
      else
       if((s[k(c->q)]>0)&&(s[k(c->q)]<t))
        un(mn[q],mn[c->q]);
    if((s[k(c->q)]>0)&&(s[k(c->q)]<s[k(e)]))
     e=k(c->q);}
  f[q]=k(e);
  s[q]=-2;
}
int l1(int q,int w){
  if(s[q]==0){
   s[q]=1;
   d[t]=q;
   t++;
   return q;}
  s[q]=0;
  sp *c;
  int e;
  for(c=a[q];c;c=c->w)
   if((c->q!=w)&&(k(c->q)==i)){
    e=l1(c->q,q);
    if((e==-2)||(q==e))
     return -2;
    if(e>=0){
     s[q]=1;
     d[t]=q;
     t++;
     return e;}}
  return -1;
}
bool next(int q,int w){
  if(k(w)!=i)
   return 0;
  if(d[q]==w)
   return 0;
  q++;
  if(q==t)
   q=0;
  if(d[q]==w)
   return 0;
  q-=2;
  if(q<0)
   q+=t;
  if(d[q]==w)
   return 0;
  return 1;
}
int l2(int q,int w){
  h[t1]=q;
  t1++;
  if(s[q]==1)
   return 1;
  s[q]=2;
  sp *c;
  for(c=a[q];c;c=c->w)
   if((c->q!=w)&&((k(c->q)==i)&&(s[c->q]!=2)))
    if(l2(c->q,q))
     return 1;
  t1--;
  return 0;
}
int main(){
  //freopen("input.txt","r",stdin);
  //freopen("output.txt","w",stdout);
  int q,w,e,r,v;
  scanf("%d%d",&q,&w);
  q1=q;
  for(e=0;e<q;e++){
   a[e]=0;
   f[e]=tr[e]=e;
   s[e]=-1;}
  for(;w;w--){
   scanf("%d%d",&e,&r);
   e--;r--;
   un(e,r);}
  for(w=0;w<q;w++)
   if(s[w]==-1)
    l(w,-1,1,0);
  sp *c;
  /*for(w=q;w<q1;w++)
   for(c=a[w];c;c=c->w)
    cout<<w<<" "<<c->q<<"   "<<tr[w]+1<<"\n";
  cout<<"\n";*/
  for(w=q;w<q1;w++)
   if(s[w]==-2){
    t=0;i=k(w);
    r=l1(w,-1);
    if(t){
     /*for(e=0;e<t;e++)
      cout<<d[e]<<" ";
     cout<<"\n";*/
     for(e=0;e<t;e++)
      for(c=a[d[e]];c;c=c->w)
       if(next(e,c->q)){
        s[d[e]]=2;
        t1=1;
        h[0]=d[e];
        r=l2(c->q,d[e]);
        printf("YES\n%d",t1);
        for(r=0;r<t1;r++)
         printf(" %d",tr[h[r]]+1);
        t1=h[t1-1];r=1;
        for(v=e;d[v]!=t1;){
         v++;r++;
         if(v>=t)
          v=0;}
        printf("\n%d",r);
        for(v=e;d[v]!=t1;){
         printf(" %d",tr[d[v]]+1);
         v++;
         if(v>=t)
          v=0;}
        printf(" %d\n%d",tr[t1]+1,t-r+2);
        r=1;
        for(v=e;d[v]!=t1;){
         printf(" %d",tr[d[v]]+1);
         v--;
         if(v<0)
          v=t-1;}
        printf(" %d",tr[t1]+1);
        return 0;}}}
  printf("NO");
  return 0;}
