#include <bits/stdc++.h>
#define rep(i,a,b) for (int i=a;i<=b;i++)
#define drep(i,a,b) for (int i=a;i>=b;i--)
#define D double
#define LL long long
#define pb push_back
#define mp make_pair
using namespace std;
const int N=220000;
vector<int> E[N];
pair<int,int> pre[N];
int dep[N],fa[N],vis[N],n,m,ti;
vector<int> tmp;
vector<int> rev(vector<int> a)
{
	if (!a.size()) return a;
	vector<int> b;b.clear();
	for (int i=a.size()-1;i>=0;i--) b.pb(a[i]);
	return b;
}
vector<int> add(vector<int> a,vector<int> b)
{
	for (int i=0;i<b.size();i++) a.pb(b[i]);
	return a;
}
vector<int> Run(int x,int y)
{
	vector<int> a;a.clear();
	if (dep[x]<dep[y]) swap(x,y);
	while (x!=y) a.pb(x),x=fa[x];
	a.pb(y);
	return a;
}
void print(int s1,int t1,int s2,int t2,int x)
{
	puts("YES");
	//printf("%d %d %d %d\n",s1,t1,s2,t2);
	if (dep[s1]<dep[s2]) swap(s1,s2),swap(t1,t2);
	if (dep[t1]>dep[t2]) swap(s1,s2),swap(t1,t2);
	tmp=Run(x,t2);
	printf("%d ",tmp.size());
	for (int i=0;i<tmp.size();i++) printf("%d ",tmp[i]);puts("");
	tmp=rev(Run(s2,x));
	printf("%d ",tmp.size()+1);
	for (int i=0;i<tmp.size();i++) printf("%d ",tmp[i]);printf("%d\n",t2);
	tmp=add( rev(Run(s1,x)) , rev(Run(t2,t1)) );
	printf("%d ",tmp.size());
	for (int i=0;i<tmp.size();i++) printf("%d ",tmp[i]);puts("");
	exit(0);
}
void up(int S,int T)
{
	//printf("%d %d\n",S,T);
	int x=S;
	while (x!=T)
	{
		if (pre[x].first!=0) print(pre[x].first,pre[x].second,S,T,x);
		pre[x]=mp(S,T);
		x=fa[x];
	}
}
void dfs(int w,int Fa)
{
	//printf(" w = %d\n",w);
	vis[w]=++ti;fa[w]=Fa;dep[w]=dep[Fa]+1;
	for (int i=0;i<E[w].size();i++)
	if (E[w][i]!=Fa)
	{
		if (!vis[E[w][i]]) dfs(E[w][i],w);
		else if (vis[E[w][i]]<vis[w]) up(w,E[w][i]);
	}
}
int main()
{
	//freopen("E.in","r",stdin);
	scanf("%d%d",&n,&m);int x,y;
	rep(i,1,m) scanf("%d%d",&x,&y),E[x].pb(y),E[y].pb(x);
	rep(i,1,n) if (!vis[i]) dfs(i,0);
	puts("NO");
}
