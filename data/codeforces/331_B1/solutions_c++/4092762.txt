#include<cstdio>
#include<cstdlib>
#include<cmath>
#include<cstring>
#include<string>
#include<algorithm>

using namespace std;
int cnt[410000];
int tt[410000];
int main()
{	
	int N,Q;
	scanf("%d",&N);
	for(int i=0;i<N;i++)
		{
		scanf("%d",&cnt[i]);
		tt[cnt[i]]=i;
		}
	scanf("%d",&Q);
	for(int i=0;i<Q;i++)
		{
		int a,b,c;
		scanf("%d%d%d",&a,&b,&c);
		if(a==1)
			{
			int cc=1;
			for(int i=b+1;i<=c;i++)
				{
				if(tt[i-1]>tt[i])
					cc++;
				}
			printf("%d\n",cc);
			}
		else
			{
			swap(cnt[b-1],cnt[c-1]);
			tt[cnt[b-1]]=b-1;
			tt[cnt[c-1]]=c-1;
			}
		}
	return 0;
}
