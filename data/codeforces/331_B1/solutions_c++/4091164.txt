#include <algorithm>
#include <iostream>
#include <cstdio>
#include <queue>
#include <map>
#include <vector>
#define INF 300005

using namespace std;
int N[INF], P[INF];
int Work(int x, int y)
{
	int res=0, i, bef=INF;
	for (i=x; i<=y; i++)
	{
		if (P[i]<bef) res++;
		bef=P[i];
	}
	return res;
}
int main()
{
	int i, j, n, m;
	
	for (i=scanf("%d", &n); i<=n; i++)
		scanf("%d", &N[i]), P[N[i]]=i;
    
	int p, x, y;
	for (i=scanf("%d", &n); i<=n; i++)
	{
		scanf("%d%d%d", &p, &x, &y);
		if (p==1)
		{
			printf("%d\n", Work(x,y));
		}
		else swap(N[x], N[y]), P[N[x]]=x, P[N[y]]=y;
	}
    return 0;
}
