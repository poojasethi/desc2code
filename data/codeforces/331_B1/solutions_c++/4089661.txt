#include <cstdio>

int n,q,va,vb,vc;
int pos[100008];
int place[100008];
int main() {
	scanf("%d",&n);
	for(int i=1;i<=n;i++) {
		scanf("%d",&pos[i]);
		place[pos[i]]=i;
	}
	scanf("%d",&q);
	for(int qry=0;qry<q;qry++) {
		scanf("%d%d%d",&va,&vb,&vc);
		if(va==1) {
			int ret=1;
			for(int i=vb+1;i<=vc;i++) {
				if(place[i]<place[i-1]) ret++;
			}
			printf("%d\n",ret);
		} else {
			int v1=pos[vb];
			int v2=pos[vc];
			place[v1]=vc;
			place[v2]=vb;
			pos[vb]=v2;
			pos[vc]=v1;
		}
	}
	return 0;
}
