//#include <iostream>
#include <cstdio>
//#include <vector>
//#include <algorithm>
//#include <utility>
//#include <climits>
//#define P_II pair<int, int>

#define MAX 500000

using namespace std;

//typedef long long ll;
int a[MAX];
int inv[MAX];

int main(){
	int N, Q;
	scanf("%d", &N);

	for (int i = 1; i <= N; i++){
		scanf("%d", &a[i]);
		inv[a[i]] = i;
	}
	
	scanf("%d", &Q);
	while(Q--){
		int type, x, y;
		scanf("%d %d %d", &type, &x, &y);

		if (type == 1){
			int count = 1;
			for (int i = x; i < y; i++) if (inv[i+1] < inv[i]) count++;
			printf("%d\n", count);
		}
		else{
			inv[a[x]] = y;
			inv[a[y]] = x;
			
			int t = a[x];
			a[x] = a[y];
			a[y] = t;
		}
	}

	return 0;
}
