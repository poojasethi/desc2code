c={}
for _ in range(input()):
  a=raw_input()
  n,d=a.lower().split('@')
  if d=='bmail.com':
    n=n[:(n+'+').find('+')].replace('.','')
  t=n+'@'+d
  c[t]=c.get(t,[])+[a]
print len(c)
for k in c:
  print len(c[k]),' '.join(c[k])
