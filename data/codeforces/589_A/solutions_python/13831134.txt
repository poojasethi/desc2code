from operator import itemgetter, attrgetter, methodcaller
from collections import Counter, defaultdict
from fractions import gcd
import sys
import re

def canonizeEmail(email):
	email = email.lower()
	login, domain = email.split('@')
	if domain == 'bmail.com':
		login = login.replace('.', '')
		login = login.split('+')[0]
	return login + "@" + domain

def main():
	n = int(raw_input())
	d = defaultdict(list)
	for i in xrange(n):
		email = raw_input()
		canonized = canonizeEmail(email)
		#print "Canonized " + email + " to " + canonized
		d[canonized].append(email)
	print len(d)
	#print d
	for can in d:
		print str(len(d[can])) + ' ' + ' '.join(d[can])

if __name__ == "__main__":
   main()