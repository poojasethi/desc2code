n = int(raw_input())
a = {}
for  _ in range(n):
    s = raw_input()
    ns, d = s.lower().split("@")
    if d == "bmail.com":
        ns = ns.replace(".", "")
        if "+" in ns:
            ns = ns[:ns.index("+")]
    ns = ns + "@" + d         
    if ns in a:
        a[ns].append(s)
    else:
        a[ns] = [s]
print len(a)
for i in a.values():
    print len(i),
    for j in i:
        print j,
    print   