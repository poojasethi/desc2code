#!/usr/bin/env python
# -*- coding: utf-8 -*-
import re
import sys

groups = {}

nn = int(sys.stdin.readline())

for i in range(nn):
    line = sys.stdin.readline()
    line = line.strip()
    fields = line.lower().split("@")
    
    group_can = ""
    if fields[1] == "bmail.com":
        fields[0] = fields[0].replace(".", "")
        fields1 = fields[0].split("+")
        group_can = fields1[0] + "@" + "bmail.com"
    else:
        group_can = line.lower()
    
    if not group_can in groups:
        groups[group_can] = []
    
    groups[group_can].append(line)
        
print len(groups)
for gr_can in groups:
    print len(groups[gr_can]), " ", " ".join(groups[gr_can])
