from collections import defaultdict
t = int(raw_input())
maildom=defaultdict(list)
#print t,maildom
for i in range(t):
    s=raw_input()
    temp=s
    s=s.lower()
    logd=s.split("@")
    login=logd[0]
    domain=logd[1]
    #print login,domain
    if(domain=="bmail.com"):
        login=login.replace(".","")
        login=login.split('+')[0]
    login=str(login)
    #print login
    maildom[(login,domain)].append(temp)
#print maildom
print len(maildom)
for i in maildom:
    print str(len(maildom[i]))+" "+" ".join(maildom[i])
