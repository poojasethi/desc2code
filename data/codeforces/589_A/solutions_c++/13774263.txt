#include <cstdio>
#include <cstring>
#include <string>
#include <vector>
#include <iostream>
#include <algorithm>
#include <map>
using namespace std;

int N;
map<string, vector<string> > Map;

int main() {
	scanf("%d",&N);
	for(int i=0;i<N;i++) {
		string in;
		cin >> in;
		string buffin = in;
		transform(in.begin(), in.end(), in.begin(), ::tolower);
		string key = in;

		string domain = in.substr(in.find("@")+1);
		if(domain=="bmail.com") {
			int inpluspos = in.find("+");
			if (inpluspos == -1) inpluspos = in.find("@");
			key = in.substr(0,inpluspos);
			key.erase(remove(key.begin(),key.end(), '.'), key.end());
		}

		//cout << domain + "\n";
		Map[key].push_back(buffin);

		//printf("%d\n",found);
	}

	printf("%d\n",Map.size());
	for(map<string, vector<string> >::iterator it = Map.begin(); it != Map.end(); it++) {
		vector<string> v = it->second;
		printf("%d ",v.size());
		for(int i=0;i<v.size();i++) {
			cout << v[i] + " ";
		}
		printf("\n");
	}
}
