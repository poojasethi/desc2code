#include <bits/stdc++.h>
using namespace std;
string f(string s){
  for(int i=0;i<s.size();i++){
    if(s[i]>='A' && s[i]<='Z')
      s[i]=char(s[i]-'A'+'a');
  }
  return s;
}
int main(){
  int n;
  string s,sx,w,q;
  map<string, vector<string> >m;
  map<string, vector<string> >::iterator it;
  cin>>n;
  for(int c=0;c<n;c++){
    cin>>s;
    sx=f(s);
    w="";
    q="";
    for(int i=0;i<sx.size();i++){
      if(sx[i]>='a' && sx[i]<='z')
        w+=sx[i];
      if(sx[i]=='+'){
        while(sx[i]!='@' && i<sx.size())i++;
      }
      if(sx[i]=='@'){
        while(i<sx.size()){
          q+=sx[i];
          i++;
        }
      }
    }
    if(q=="@bmail.com"){
      m[w+q].push_back(s);
    }else{
      m[sx].push_back(s);
    }
  }
  cout<<m.size()<<endl;
  for(it=m.begin();it!=m.end();++it){
    cout<<(it->second).size();
    for(int i=0;i<(it->second).size();i++){
      cout<<" "<<(it->second)[i];
    }
    cout<<endl;
  }
  return 0;
}