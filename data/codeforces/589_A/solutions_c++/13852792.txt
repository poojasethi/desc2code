#include <cstdio>
#include <cstring>
#include <cctype>
#include <string>
#include <map>
#include <vector>
using namespace std;

int n;
string org[20000];
map<string, vector<string> > ans;

int main()
{
	scanf("%d", &n);
	for(int i = 0; i < n; i++)
	{
		char temp[101];
		string s;
		scanf("%s", temp);
		org[i] = temp;
		int len = strlen(temp);
		for(int j = 0; j < len; j++) temp[j] = tolower(temp[j]);
		if(temp[len-1] == 'm' && temp[len-2] == 'o' && temp[len-3] == 'c' && temp[len-4] == '.' &&
		   temp[len-5] == 'l' && temp[len-6] == 'i' && temp[len-7] == 'a' && temp[len-8] == 'm' && temp[len-9] == 'b' && temp[len-10] == '@')
		{
			for(int j = 0; j < len; j++)
			{
				if(temp[j] == '+' || temp[j] == '@')
				{
					s += "@bmail.com";
					break;
				}
				else if(temp[j] != '.') s += temp[j];
			}
		}
		else s = temp;
		ans[s].push_back(org[i]);
	}
	printf("%li\n", ans.size());
	for(map<string, vector<string> >::iterator it = ans.begin(); it != ans.end(); it++)
	{
		printf("%d", it->second.size());
		for(int i = 0; i < it->second.size(); i++) printf(" %s", it->second[i].c_str());
		printf("\n");
	}
}
