#include<iostream>
#include<string>
#include<map>
#include<vector>
using namespace std;
map<int,vector<string> > mp;
map<string,int> mp2;
int p=0;
string to_lower(string c){
	for(int i=0;i<c.size();i++) if(c[i]>='A'&&c[i]<='Z') c[i]=c[i]-'A'+'a';
	return c;
}
void work(string c){
	string login="",domain="";
	int k=c.size()-1;
	while(c[k]!='@') k--;
	domain=to_lower(c.substr(k));
	if(domain=="@bmail.com")
		for(int i=0;i<k;i++){
			if(c[i]=='.')continue;
			if(c[i]=='+')break;
			login+=c[i];
		}
	else login=c.substr(0,k);
	login=to_lower(login);
	string res=login+domain;
	if(mp2[res]==0) mp2[res]=++p;
	mp[mp2[res]].push_back(c);
}
int main(){
	int n;
	cin>>n;
	string m;
	for(int i=0;i<n;i++){
		cin>>m;
		work(m);
	}
	cout<<p<<"\n";
	for(map<int,vector<string> >::iterator it=mp.begin();it!=mp.end();it++){
		vector<string> t=it->second;
		cout<<t.size();
		for(int i=0;i<t.size();i++)
			cout<<" "<<t[i];
		cout<<"\n";
	}
	return 0;
}