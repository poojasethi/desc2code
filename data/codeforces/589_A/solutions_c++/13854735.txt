#include<bits/stdc++.h>
using namespace std;
#define rep(i,n) for(int i=0;i<n;++i)
#define se second

char s[20020][110];

int main()
{
	map<string, vector<int> >mp;
	int n;
	cin >> n;
	rep(i, n) {
		scanf("%s", s[i]);
		string a;
		for(int j = 0; s[i][j]; ++j) {
			if(s[i][j] >= 'A' && s[i][j] <= 'Z') a.push_back(s[i][j]+32);
			else a.push_back(s[i][j]);
		}
		int temp = a.find("@bmail.com"), pos;
		if(temp >= 0 && temp + 10 == a.size()) {
			pos = a.find("+");
			if(pos >= 0) a.replace(pos, a.size()-pos, "");
			else a.replace(temp, a.size()-pos, "");
		}
		while((pos = a.find(".")) >= 0 && pos < temp) a.replace(pos, 1, ""), --temp;
		mp[a].push_back(i);
	}
	cout << mp.size() << endl;
	for(map<string, vector<int> >::iterator it = mp.begin(); it != mp.end(); ++it) {
		printf("%d", it->se.size());
		rep(i, it->se.size()) printf(" %s", s[it->se[i]]);
		puts("");
	}
	return 0;
}
		   	   	  	  	   	 	 		 	 		