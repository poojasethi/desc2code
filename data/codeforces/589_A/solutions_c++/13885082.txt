#include<bits/stdc++.h>
using namespace std;
const int maxn = 1e5;
map<string,int> st;
vector<string> var[maxn];
int sz;
void init()
{
	st.clear();
	sz=0;
}
int read(string s)
{
	string a,b(s);
	for(int i=0;i<s.length();i++)
		s[i] = tolower(s[i]);
	bool add=(s.substr(s.find('@')).compare("@bmail.com")==0);
	bool dot = add;
	bool ig = 0;
	for(int i=0;i<s.length();i++)
	{
		if(dot&&s[i]=='.')
			continue;
		if(add&&s[i] == '+')
			ig = 1;
		if(s[i] == '@')
			add = ig = dot = 0;
		if(ig) continue;
		a+=s[i];
	}
	map<string,int>::iterator it = st.find(a);
	int to = it->second;
	if(it == st.end())
	{
		var[sz].clear();
		st.insert(make_pair(a,to=sz++));
	}
	var[to].push_back(b);
}
void print(string s)
{
	cout<<" "+s;
}
char s[111];
int main()
{
	int n;
	init();
	scanf("%d",&n);
	while(n--)
	{
		scanf("%s",s);
		read(s);
	}
	printf("%d\n",sz);
	for(int i=0;i<sz;i++)
	{
		cout<<var[i].size();
		for_each(var[i].begin(),var[i].end(),print);
		cout<<endl;
	}
	return 0;
}

    	     			 					 	    	