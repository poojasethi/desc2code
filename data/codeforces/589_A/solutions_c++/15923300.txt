#include <bits/stdc++.h>
#define pii pair<string,string>

using namespace std;

string cad;

int main(){
	int n;
	cin>>n;

	map< pii , vector<string> > check;

	cin.ignore();
	for(int i=0;i<n;i++){
		getline( cin , cad );

		string a = "";
		string c = a;
		string b = a;

		int j = 0;
		int f = 0;

		while(cad[j]!='@'){
			if(cad[j]=='+') f = 1;
			if(!f && cad[j]!='.') b += tolower( cad[j] );
			a += tolower( cad[j] );
			j++;
		}

		j++;
		while(j<cad.size()){
			c += tolower( cad[j] );
			j++;
		}

		//cout<<a<<" "<<b<<" "<<c<<" = "<<cad<<endl;

		if(c=="bmail.com")
			check[pii(b,c)].push_back( cad );
		else
			check[pii(a,c)].push_back( cad );
	}

	cout<<check.size()<<'\n';
	for(map< pii , vector<string> > :: iterator it = check.begin();it!=check.end();it++){
		cout<<(it->second).size();
		for(int i=0;i<(it->second).size();i++)
			cout<<" "<<it->second[i];
		cout<<'\n';
	}
	return 0;
}
