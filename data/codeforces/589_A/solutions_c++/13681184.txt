#include <bits/stdc++.h>

using namespace std ;


int main()
{
	int N;
	cin >> N;
	map< string, vector<string> > store;
	for (int i = 0; i < N; ++i)
	{
		string b;
		cin >> b ;
		// A.push_back(b);

		string temp = b ;
		transform(temp.begin(), temp.end(), temp.begin(), ::tolower);

		int f = temp.find("@");
		string domain = temp.substr(f+1,temp.size()-f-1);
		string c = temp.substr(0,f);
		if(domain.compare("bmail.com")==0)
		{
			f = c.find("+");
			c = c.substr(0,f);
			c.erase(std::remove(c.begin(), c.end(), '.'), c.end());
		}
		
		string final = c + "@" + domain ;
		store[final].push_back(b);
	}

	map< string, vector<string> >::iterator it;
	cout << store.size() << endl;
	for (it = store.begin(); it != store.end(); ++it)
	{
		cout << it->second.size() << " " ;
		for (int i = 0; i < it->second.size(); ++i)
		{
			if(i==it->second.size()-1)
			{
				cout << it->second[i] << endl; 
			}
			else
			{
				cout << it->second[i] << " " ;
			}	
		}
	}
}