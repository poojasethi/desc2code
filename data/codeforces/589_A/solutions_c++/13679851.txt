#include<iostream>
#include<cstdio>
#include<string>
#include<map>
#include<vector>
#include<algorithm>
using namespace std;
const int MAXN=20010;
struct address
{
	string ori,edit;
}add[MAXN];
map<string,vector<string> > BST;
int n;
inline void init()
{
	cin>>n;
	for(int i=0;i<n;i++)
	{
		string log,dom;
		cin>>add[i].ori;
		int p=add[i].ori.find_first_of('@');
		log=add[i].ori.substr(0,p);
		dom=add[i].ori.substr(p+1);
		for(int j=0;j<dom.size();j++)dom[j]=tolower(dom[j]);
		if(dom=="bmail.com")
		{
			log=log.substr(0,log.find_first_of('+'));
			string temp;
			for(int j=0;j<log.size();j++)
				if(log[j]!='.')temp+=tolower(log[j]);
			log=temp;
		}
		else
			for(int j=0;j<log.size();j++)log[j]=tolower(log[j]);
		add[i].edit=log+"@"+dom;
	}
}
inline void solve()
{
	for(int i=0;i<n;i++)BST[add[i].edit].push_back(add[i].ori);
	cout<<BST.size()<<endl;
	for(map<string,vector<string> >::iterator i=BST.begin();i!=BST.end();i++)
	{
		cout<<i->second.size();
		for(int j=0;j<i->second.size();j++)cout<<' '<<i->second[j];
		cout<<endl;
	}
}
int main(void)
{
	init();
	solve();
	return 0;
}