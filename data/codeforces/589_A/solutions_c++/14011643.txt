#include <iostream>
#include <bits/stdc++.h>

using namespace std;

int main()
{
//    string s = "ICPC.@bmail.com";
//    cout << s.find('@') << endl;
//    freopen("in.txt", "r", stdin);
    int n; cin >> n;
    string s;
    map <string, vector <string> > ans;
    while(n--){
        cin >> s;
        int idx = s.find('@');
        string dom = "";
        for(int i = idx+1; i < s.size(); i++)
            dom += tolower(s[i]);
        bool f = 0;
        if(dom == "bmail.com") f = 1;
        string login = "";
        for(int i = 0; i < idx; i++)
        {
            char c = tolower(s[i]);
            if(s[i] == '+' && f)break;
            if(s[i] == '.' && f)continue;
            login += c;
        }
        string key = "";
        key += login; key += '@'; key += dom;
        ans[key].push_back(s);
    }
    cout << ans.size() << endl;
    map <string, vector <string> >::iterator it;
    for(it = ans.begin(); it != ans.end(); it++){
        vector <string> tmp = it->second;
        cout << tmp.size() << " ";
        for(int i = 0; i < tmp.size(); i++)
            cout << tmp[i] << " \n"[i == tmp.size()-1];
    }
    return 0;
}
