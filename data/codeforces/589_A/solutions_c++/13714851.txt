#include <bits/stdc++.h>
using namespace std;
const int N(2e4+5);
vector<string> g[N];
map<string,int> mp;
int main()
{
   // freopen("in", "r", stdin);
    int n;
    int id=0;
    cin>>n;
    string s, t;
    for(int i=0; i<n; i++)
    {
        cin>>s;
        t=s;
        for(int j=0; j<t.size(); j++)
        {
            t[j]=tolower(t[j]);
        }
        string dom=t.substr(t.find('@')+1, t.size());
        string log=t.substr(0, t.find('@'));
        if(dom=="bmail.com")
        {
            for(int j=0; j<log.size();)
            {
                if(log[j]=='.')
                {
                    log.erase(j, 1);
                }
                else j++;
            }
            if(log.find('+')<log.size())
                log.erase(log.find('+'), log.size());
            t=log+'@'+dom;
        }
        if(mp.find(t)==mp.end()) mp[t]=++id;
        g[mp[t]].push_back(s);

    }
    cout<<id<<endl;
    for(int i=1; i<=id; i++)
    {
        cout<<g[i].size();
        for(int j=0; j<g[i].size(); j++)
        {
            cout<<' '<<g[i][j];
        }
        puts("");
    }
}
