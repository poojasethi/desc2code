#include<iostream>
#include<algorithm>
#include<string>
#include<map>//int dx[4]={0,0,-1,1};int dy[4]={-1,1,0,0};
#include<set>//int gcd(int a,int b){return b?gcd(b,a%b):a;}
#include<vector>
#include<cmath>
#include<queue>
#include<string.h>
#include<stdlib.h>
#include<cstdio>
#define mod 1e9+7
#define ll long long
using namespace std;
string x[20005],y[20005];
map<string,vector<int> >r;
int v[20005];
int main(){
	int n;
	cin>>n;
	for(int i=0;i<n;++i){
		cin>>x[i];
		y[i]=x[i];
		for(int j=0;j<x[i].length();++j){
			if(x[i][j]>='A'&&x[i][j]<='Z')
				x[i][j]+=32;
		}
		int aa=x[i].rfind('@');
		int g=x[i].find('+');
		if(x[i].length()-aa==10&&x[i].substr(aa,10)=="@bmail.com"){
			if(g!=-1)
				x[i].erase(g,aa-g);
			aa=x[i].rfind('@');
			for(int j=0;j<aa;++j){
				if(x[i][j]=='.'){
					x[i].erase(j,1);
					j--;
					aa--;
				}
			}
		}
	}
	int c=-1;
	for(int i=0;i<n;++i){
		r[x[i]].push_back(i);
	}
	cout<<r.size()<<endl;
	for(map<string,vector<int> >::iterator it=r.begin();it!=r.end();++it){
		cout<<(it)->second.size();
		for(int i=0;i<(it)->second.size();++i)
			cout<<" "<<y[r[(it)->first][i]];
		cout<<endl;
	}
	return 0;
}

					  		 	  	 	 				   		 	 		