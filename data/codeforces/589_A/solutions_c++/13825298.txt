#include<cstdio>
#include<iostream>
#include<map>
#include<vector>
#include<string>
#define pb push_back
#define rep(i,n) for(int i=0;i<n;i++)
using namespace std;
string str[2];
string org[20033];
int hsh[20033];
map<string,int> hash;
vector<int> ans[20033];
int n,p;
inline void low(string &t){
	rep(i,t.size())
		if(t[i]>='A' && t[i]<='Z')
			t[i]+='a'-'A';
	return;
}
int main(){
	ios::sync_with_stdio(false);
	cin>>n;
	rep(i,n){
		string t;
		cin>>t;
		int ttt;
		for(ttt=0;ttt<t.size();ttt++)
			if(t[ttt]=='@')
				break;
		str[0]=t.substr(0,ttt);
		str[1]=t.substr(ttt+1);
		org[i]=t;
		low(str[0]);
		low(str[1]);
		if(str[1]=="bmail.com"){
			t="";
			rep(j,str[0].size()){
				if(str[0][j]=='+')
					break;
				else if(str[0][j]=='.')
					continue;
				t=t+str[0][j];
			}
			str[0]=t;
		}
		t=str[0]+"@"+str[1];
		if(!hash.count(t))
			hash[t]=p++;
		hsh[i]=hash[t];
		ans[hash[t]].pb(i);
	}
	cout<<p;
	rep(i,p){
		cout<<endl<<ans[i].size();
		rep(j,ans[i].size())
			cout<<" "<<org[ans[i][j]];
	}
	return 0;
}
