#include<iostream>
#include<map>
#include<vector>
#include<utility>
using namespace std;

int n;
string w[20005];
map<pair<string,string>,vector<int> > ans;

int main(){
	cin >> n;
	for(int i=0; i<n; i++)cin >> w[i];
	for(int i=0; i<n; i++){
		string s,t;
		s=w[i];
		for(int j=0; j<s.length(); j++)s[j]=tolower(s[j]);
		int pos=0;
		while(s[pos]!='@')pos++;
		t=s.substr(pos+1,s.length()-pos-1);
		s=s.substr(0,pos);
		if(t!="bmail.com"){ans[make_pair(s,t)].push_back(i); continue;}
		string hah="";
		for(int j=0; j<s.length(); j++){
			if(s[j]=='+')break;
			if(s[j]=='.')continue;
			hah+=s[j];
		}
		ans[make_pair(hah,t)].push_back(i);
	}
	cout << ans.size() << endl;
	for(map<pair<string,string>,vector<int> >::iterator it=ans.begin(); it!=ans.end(); ++it){
		cout << it->second.size();
		for(int j=0; j<it->second.size(); j++)cout << " " << w[it->second[j]]; cout << endl;
	}
	return 0;
}