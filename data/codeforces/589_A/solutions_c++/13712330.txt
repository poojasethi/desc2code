#include <iostream>
#include <map>
#include <string>
#include <vector>
using namespace std;
string proc(string s){
    for(int i=0; i<s.size(); i++){
        if(s[i]<='Z'&&s[i]>='A')s[i]+='a'-'A';
    }
    vector<string> v;
    v.push_back("");
    for(int i=0; i<s.size(); i++){
        if(s[i]=='@') v.push_back("");
        else v.back()+=s[i];
    }
    string temp;
    if(v[1]=="bmail.com"){
        for(int i=0; i<v[0].size(); i++){
            if(v[0][i]=='+')break;
            else if(v[0][i]=='.')continue;
            else temp+=v[0][i];
        }
        return temp+'@'+v[1];
    }
    return s;
    //for(int)
}
int main(){
    ios::sync_with_stdio(0);
    cin.tie(0);
    map<string,vector<string> > m;
    string s;
    int n;
    cin >> n;
    for(int i=0; i<n; i++){
        cin >> s;
        //proc(s)
        m[proc(s)].push_back(s);
    }
    cout << m.size() << '\n';
    for(map<string,vector<string> >::iterator it=m.begin(); it!=m.end(); it++){
        cout << it->second.size() << ' ';
        for(int i=0; i<it->second.size(); i++){
            cout << it->second[i] << ' ';
        }
        cout << '\n';
    }
}
