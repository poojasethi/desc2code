#include <cstdio>
#include <string>
#include <vector>
#include <map>

using namespace std;

const int MAXL = 1E3 + 10;

map<string, vector<string> > lst;

string trans(string s){
	string ret;
	int r = s.find('@');
	for (int i = 0; i < s.size(); ++i)
		if (isalpha(s[i]))
			s[i] = tolower(s[i]);
//	printf("%s\n", string(s.begin() + r, s.end()).c_str());
	if (string(s.begin() + r, s.end()) == "@bmail.com"){
		int i = 0;
		for (; s[i] != '+' && s[i] != '@'; ++i)
			if (s[i] != '.')
				ret += s[i];
		ret += "bmail.com";
	}
	else
		ret = s;
	return ret;
}

int main(){
	int n;
	scanf("%d", &n);
	char s[MAXL];
	for (int i = 0; i < n; ++i){
		scanf("%s", s);
		string res = trans(s);
		if (lst.find(res) == lst.end())
			lst[res] = vector<string>();
		lst[res].push_back(string(s));
	}
	printf("%d\n", (int)lst.size());
	for (map<string, vector<string> >::iterator p = lst.begin(); p != lst.end(); ++p){
		vector<string> &a = p->second;
		printf("%d", (int)a.size());
		for (int i = 0; i < a.size(); ++i)
			printf(" %s", a[i].c_str());
		puts("");
	}
	return 0;
}
