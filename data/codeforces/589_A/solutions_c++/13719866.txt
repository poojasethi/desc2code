#include<bits/stdc++.h>
using namespace std;
map<string,vector<string> >ck;
int k;
pair<string,string>  chg(string s)
{
    int k1=s.find('@');
    string s1=s,s2=s,s3;
    for(int i=0;i<s.size();i++)
        s[i]=tolower(s[i]);
    string tmp="@bmail.com";
    string tmp1=s.substr(k1);
    s2=s;
    if(tmp==tmp1)
    {

        if(s.find('+')!=string::npos)
        {
            k1=s.find('+');
            s2=s.substr(0,k1);
            s2+=tmp;
        }
        int k2=s2.find('@');
         s3="";
        for(int i=0;i<k2;i++)
            if(s2[i]!='.')s3+=s2[i];
        s3+=tmp;
        s2=s3;
    }
    return make_pair(s1,s2);
}
int main()
{
    int n;
    cin>>n;
    for(int i=0;i<n;i++)
    {
        string s;
        cin>>s;
        pair<string,string> p=chg(s);
        ck[p.second].push_back(p.first);
    }
    cout<<ck.size()<<endl;
    for(map<string,vector<string> >::iterator it=ck.begin();it!=ck.end();it++)
    {
        vector<string> v=it->second;
        cout<<v.size()<<" ";
        for(int i=0;i<v.size();i++)
            cout<<v[i]<<" ";
        cout<<endl;
    }
}
