#include<bits/stdc++.h>
using namespace std;
const int N=20020;
pair<string,string> a[N];
int n;
int main()
{	
	cin>>n;
	for(int i=1;i<=n;++i)
	{
		string s;
		cin>>s;
		a[i].second=s;
		bool flag=false;
		for(int j=0;j<(int)s.size();++j)
			s[j]=tolower(s[j]);
		int e=s.find('@');
		bool bmail=e+9==(int)s.size()-1 && 
					s[e+1]=='b' && s[e+2]=='m' && s[e+3]=='a' && 
					s[e+4]=='i' && s[e+5]=='l' && s[e+6]=='.' && 
					s[e+7]=='c' && s[e+8]=='o' && s[e+9]=='m';
		if(bmail)   
		{
			for(int j=0;j<(int)s.size();++j)
			{
				if(!flag)
				{
					while(s[j]=='.')
						s.erase(j,1);
					if(s[j]=='+')
					{
						int e=s.find('@');
						s.erase(j,e-j);
					}
					if(s[j]=='@')
						flag=true;
				}
			}
		}
		a[i].first=s;
	}
	sort(a+1,a+n+1);
	int t=n;
	for(int i=2;i<=n;++i)
		t-=(a[i].first==a[i-1].first);
	cout<<t<<endl;
	for(int i=2,l=1;i<=n+1;++i)
	{
		if(a[i].first!=a[l].first)
		{
			cout<<i-l;
			for(int j=l;j<i;++j)
				cout<<' '<<a[j].second;
			cout<<endl;
			l=i;
		}
	}
	return 0;
}