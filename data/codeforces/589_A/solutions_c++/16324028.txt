#include<iostream>
#include<string>
#include<map>
#include<vector>
using namespace std;

int n;
string s1[22222];
string s2[22222];
map<string, vector<string> > mp;
map<string, vector<string> > ::iterator it;

char calc(char c) {
	if(c=='+' || c=='.') return c;
	if(c>'Z') return c-'a'+'A';
	return c;
}

int main() {
	mp.clear();
	cin>>n;
	for(int i=0;i<n;i++) {
		string str, pre="", suf="";
		cin>>str;
		for(int j=str.length()-1;str[j]!='@';j--)
			suf = calc(str[j]) + suf;
		if(suf == "BMAIL.COM") {
			for(int j=0;str[j]!='+' && str[j]!='@';j++)
				if(str[j] != '.') 
					pre = calc(str[j]) + pre;
		} else {
			for(int j=0;str[j]!='@';j++)
				pre = calc(str[j]) + pre;
		}
		s1[i] = str; s2[i] = pre + suf;
		if(mp.find(s2[i]) != mp.end()) mp[s2[i]].push_back(s1[i]);
		else {
			vector<string> vec(1, s1[i]);
			mp[s2[i]] = vec;
		}
	}
	cout<<mp.size()<<endl;
	for(int i=0;i<n;i++)
		if(mp[s2[i]].size()) {
			cout<<mp[s2[i]].size();
			for(int j=0;j<mp[s2[i]].size();j++)
				cout<<' '<<mp[s2[i]][j];
			cout<<endl;
			mp[s2[i]].clear();
		}
	
	return 0;
}