#include<bits/stdc++.h>
#define maxn 100006
#define ll long long
using namespace std;
string str;
map < string , vector<string> > mp;
map < string , vector<string> > ::iterator it;
string fun(string s)
{
    int i,p;
    for(i=0;i<s.length();i++)
    {
        if(s[i]>='A'&&s[i]<='Z')
            s[i]+='a'-'A';
    }
    p=s.find('@');
    if(s.substr(p)!="@bmail.com")   return s;
    string log;
    for(i=0;i<p;i++)
    {
        if(s[i]=='.')   continue;
        if(s[i]=='+')   break;
        log+=s[i];
    }
    return log+"@bmail.com";
}
int main()
{
    int n,i;
    while(cin>>n)
    {
        mp.clear();
        for(i=0;i<n;i++)
        {
            cin>>str;
            mp[fun(str)].push_back(str);
        }
        printf("%d\n",mp.size());
        for(it=mp.begin();it!=mp.end();it++)
        {
            printf("%d",mp[it->first].size());
            for(i=0;i<mp[it->first].size();i++)
            {
                cout<<" "<<mp[it->first][i];
            }
            printf("\n");
        }
    }
}
 	  	 		 	 						          		 	