#include <bits/stdc++.h>
using namespace std;
map<string, vector<string> > mapa;
map<string,vector<string> >::iterator it;
char login[150], domain[150];
string myfun(const string &s) 
{
    int i = 0;
    for (; i < s.size()&& s[i] != '@';++i) 
    login[i]=tolower(s[i]);
    login[i++]= 0;
    int sz = 0;
    for (; i < s.size(); ++i)
    domain[sz++]=tolower(s[i]);
    domain[sz++] = 0;
    if (strcmp(domain, "bmail.com") == 0)
    {
        int sz = 0, i = 0;
        for (; i < s.size() && s[i] != '@' && s[i] != '+'; ++i)
        {
            if (s[i] != '.') 
            login[sz++] = tolower(s[i]);
        }
        login[sz++] = 0;
    }
    return string(login) + string(domain);
}

int main() 
{
    int n;
    scanf("%d", &n);
    for(int i=0;i<n;i++) 
    {
        string s;
        cin>>s;
        string temp=myfun(s);
        mapa[temp].push_back(s);
    }
    cout<<mapa.size()<<endl;
    for(it = mapa.begin(); it != mapa.end(); ++it) 
    {
        cout<<it->second.size()<<" ";
        for(int i=0;i<it->second.size();i++)
        cout<<it->second[i].c_str()<<" ";
        cout<<endl;
    }
}