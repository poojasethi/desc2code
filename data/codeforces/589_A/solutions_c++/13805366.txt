#include <cstdio>
#include <cstring>
#include <list>
#include <map>
#include <algorithm>
#include <iostream>

using namespace std;

int main(int argc, char **argv){
	int n;
	map<string,list<string> > addrs;
	char str[500];
	scanf("%d", &n);
	while(n--){
		scanf("%s", str);
		char *at = strchr(str, '@');
		char *domain = at+1;
		if(strcasecmp(domain, "bmail.com")==0){
			char norg[400] = {};
			int i, j;
			for(i=0,j=0; str[i]!='@' &&  str[i]!='+'; i++){
				if(str[i]!='.'){
					norg[j++] = tolower(str[i]);
				}
			}
			norg[j++] = '@';
			strcpy(norg+j, "bmail.com");
			addrs[norg].push_back(str);
		}else{
			string lorig = str;
			std::transform(lorig.begin(), lorig.end(), lorig.begin(), ::tolower);
			//printf("n '%s' '%s' entrou em bmail\n", str, lorig.c_str());
			addrs[lorig].push_back(str);
		}
	}
	printf("%u\n", (unsigned)addrs.size());
	for(map<string,list<string> >::iterator it=addrs.begin(); it!=addrs.end(); it++){
		printf("%u", (unsigned)it->second.size());
		for(list<string>::iterator jt=it->second.begin(); jt!=it->second.end(); jt++){
			printf(" %s", jt->c_str());
		}
		printf("\n");
	}
	return 0;
}

