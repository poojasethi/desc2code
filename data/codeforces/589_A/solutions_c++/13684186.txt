#include <bits/stdc++.h>

using namespace std ;

const int maxn = 2e4 + 10 ;
map <string , int> m ;
vector <string> ans[maxn] ;

string lalala(string s)
{
	int idx ;
	bool flag = false ;
	string q ;
	for(int i = 0 ; i < s.size() ; i++){
		if('A' <= s[i] and s[i] <= 'Z')
			s[i] += 'a' - 'A' ;
		if(flag)
			q += s[i] ;
		if(s[i] == '@'){
			flag = true ;
			idx = i ;
		}
	}
	if(q != "bmail.com")
		return s ;
	string ret ;
	for(int i = 0 ; i < idx ; i++){
		if(s[i] == '.')
			continue ;
		if(s[i] == '+')
			break ;
		ret += s[i] ;
	}
	ret += q ;
	return ret ;
}

int main()
{
	string s ;
	int n , cnt = 1 ;
	cin >> n ;
	for(int i = 0 ; i < n ; i++){
		cin >> s ;
		string p = lalala(s) ;
		if(m[p] == 0)
			m[p] = cnt++ ;
		ans[m[p]].push_back(s) ;
	}
	cout << cnt - 1 << endl ;
	for(int i = 1 ; i < cnt ; i++){
		cout << ans[i].size() << " " ;
		for(int j = 0 ; j < ans[i].size() ; j++)
			cout << ans[i][j] << " " ;
		cout << endl ;
	}
	return 0 ;
}
