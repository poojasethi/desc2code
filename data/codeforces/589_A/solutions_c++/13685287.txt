#include <bits/stdc++.h>

using namespace std;

int n;
string str[20005], login[20005], domain[20005];
vector<vector<string> > vec;
map<string, int> mp;

int main() {
	scanf("%d", &n);
	for (int i = 0; i < n; i++) {
		cin >> str[i];
		string temp = str[i];
		for (int j = 0; j < str[i].size(); j++) {
			temp[j] = tolower(str[i][j]);
		}
		login[i] = temp.substr(0, temp.find("@"));
		domain[i] = temp.substr(temp.find("@"));
		if (domain[i] == "@bmail.com") {
			login[i] = login[i].substr(0, login[i].find("+"));
			login[i].erase(remove(login[i].begin(), login[i].end(), '.'), login[i].end());
		}
		//cout << login[i] << " " << domain[i] << "\n";
		
		if (mp.count(login[i] + domain[i])) {
			vec[mp[login[i] + domain[i]]].push_back(str[i]);
		} else {
			vector<string> tempVec;
			tempVec.push_back(login[i]+domain[i]);
			tempVec.push_back(str[i]);
			vec.push_back(tempVec);
			mp[login[i]+domain[i]] = vec.size() - 1;
		}
	}
	printf("%d\n", vec.size());
	for (int i = 0; i < vec.size(); i++) {
		printf("%d", vec[i].size() - 1);
		for (int j = 1; j < vec[i].size(); j++) {
			cout << " " << vec[i][j];
		}
		printf("\n");
	}
}
