#include<cstdio>
#include<vector>
#include<set>
#include<string>
#include<cstring>
#include<algorithm>
using namespace std;
char s[200];
pair<string,string> a[30000];
string p;
int main()
{
	int i,j,n;
	scanf("%d",&n);
	for(i=0;i<n;i++)
	{
		scanf("%s",s);
		a[i].first=a[i].second=s;
		for(j=0;j<a[i].first.size();j++)
		if(a[i].first[j]>='A'&&a[i].first[j]<='Z')
		a[i].first[j]+=32;
		if(a[i].first.size()>10&&a[i].first.substr(a[i].first.size()-10,a[i].first.size())=="@bmail.com")
		{
			p=a[i].first;
			a[i].first="";
			for(j=0;j<p.size();j++)
			{
				if(p[j]=='@'||p[j]=='+')
				break;
                if(p[j]=='.')
				continue;
                a[i].first+=p[j];
			}
			while(p[j]!='@')
			j++;
			while(j<p.size())
			a[i].first+=p[j++];
		}
	}
	sort(a,a+n);
	j=1;
	for(i=1;i<n;i++)if(a[i].first!=a[i-1].first)j++;
	printf("%d\n",j);
	for(i=j=0;i<n;)
	{
		while(a[j].first==a[i].first)
		j++;
		printf("%d",j-i);
        while(i<j)
		printf(" %s",a[i++].second.c_str());
        puts("");
	}
}
