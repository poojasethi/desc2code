#include <bits/stdc++.h>
using namespace std;

string hash(string s) {
  transform(s.begin(), s.end(), s.begin(), ::tolower);

  if (s.size() >= 10 && s.substr(s.size()-10, 10) == "@bmail.com") {
    // remove periods
    int i = 0;
    while (s.at(i) != '@') {
      if (s.at(i) == '.') {
        s.erase(i, 1);
      } else {
        i++;
      }
    }

    // remove after +
    size_t at = s.find("@");
    size_t plus = s.find("+");
    if (plus != string::npos) {
      s.erase(plus, at-plus);
    }
  }
  return s;
}

int main() {
  map<string, vector<string> > a;
  int n;
  string s;
  vector<string> ss;

  cin >> n;

  for (int i = 0; i < n; i++) {
    cin >> s;
    string h = hash(s);
    if (a.find(h) == a.end()) {
      ss.push_back(h);
    }
    a[h].push_back(s);
  }

  cout << ss.size() << "\n";
  for (int i = 0; i < ss.size(); i++) {
    cout << a[ss.at(i)].size() << " ";
    for (int j = 0; j < a[ss.at(i)].size(); j++) {
      cout << a[ss.at(i)].at(j) << " ";
    }
    cout << "\n";
  }

  return 0;
}
