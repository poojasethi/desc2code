#include <bits/stdc++.h>
#define fi first
#define se second
#define pb push_back
#define mp make_pair

using namespace std;
typedef long long ll;
typedef vector<int> vi;
typedef pair<int,int> ii;
const int INF=0x3f3f3f3f;

map<string, vector<string> > wh;

string getx(string str) {
	string ret;
	int ap=0;
	for(int i=0;i<str.size();i++)if(str[i]=='@') {
		ap=i;
		break;
	}
	string dom=str.substr(ap+1, str.size()-ap-1);
	for(int i=0;i<dom.size();i++)
		dom[i]=tolower(dom[i]);

	bool hasx=dom=="bmail.com";


	bool hasp=false, hasat=false;
	for(int i=0;i<str.size();i++) {
		if(hasx) {
			hasp|=str[i]=='+';
			hasat|=str[i]=='@';
			if(hasp&&!hasat)continue;
			if(str[i]=='.'&&!hasat)continue;
		}
		ret.pb(tolower(str[i]));
	}
	return ret;
}

int main(void) {
	ios::sync_with_stdio(false);
	int n;
	cin>>n;
	for(int i=0;i<n;i++) {
		string s;
		cin>>s;
		string tm=getx(s);
		wh[tm].pb(s);
	}
	map<string,vector<string> >::iterator it;
	vector<string>::iterator itx;

	cout<<wh.size()<<'\n';
	for(it=wh.begin();it!=wh.end();it++) {
		cout<<it->se.size();
		for(itx=it->se.begin();itx!=it->se.end();itx++)
			cout<<' '<<*itx;
		cout<<'\n';
	}






	return 0;
}
