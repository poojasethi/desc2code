#include<cstdio>
#include<iostream>
#include<cstring>
#include<string>
#include<vector>
#include<map>
using namespace std;

char s2[105],s1[105],bm[]={"bmail.com"};
int n,atw,now,num[20010],ansnum;

map<string,int> m;

vector<string>a[20010];

int main()
{
	scanf("%d",&n);
    for(int i=1;i<=n;i++)
    {
        cin>>s1;
        strcpy(s2,s1);
        int atw;
        for(int j=0;s1[j];j++)
        {
            if(s1[j]<='Z'&&s1[j]>='A')
            	s1[j]+='a'-'A';
            if(s1[j]=='@')
				atw=j;
        }
        if(!strcmp(s1+atw+1,bm))
        {
            int l=0;
            for(int j=0;j<atw;j++)
            {
                if(s1[j]=='.')
					continue;
                else if(s1[j]=='+')
					break;
                s1[l++]=s1[j];
            }
			for(int j=atw;s1[j];j++)
				s1[l++]=s1[j];
            s1[l]=0;
        }
        if(m.find(s1)==m.end())
			m[s1]=++ansnum;
        int now=m[s1];
        num[now]++;
        a[now].push_back(s2);
    }
    cout<<ansnum<<endl;
    for(int i=1;i<=ansnum;i++)
    {
        cout<<num[i];
        for(int j=0;j<a[i].size();j++)
			cout<<' '<<a[i][j];
        puts("");
    }
    return 0;
}
			     			 	  	 					 		 	  		