#include <iostream>
#include <string>
#include <cctype>
#include <map>
#include <vector>
#include <algorithm>

using namespace std;

void lwr(string & s)
{
  for (int i = 0; i < s.size(); ++i)
    s[i] = tolower(s[i]);
}

string format(const string & s)
{
  int n = s.find('@');
  string d(s.begin() + n, s.end()), r;
  lwr(d);
  if (d == "@bmail.com") {
    for (int i = 0; s[i] != '@' && s[i] != '+'; ++i)
      if (s[i] != '.')
	r.push_back(tolower(s[i]));
  }
  else {
    r.assign(s.begin(), s.begin() + n);
    lwr(r);
  }
  return r + d;
}

int main()
{
  int n; cin >> n;
  vector<vector<string> > v;
  map<string, int> f;
  for (int i = 0; i < n; ++i) {
    string r; cin >> r;
    string s = format(r);
    map<string, int>::iterator it = f.find(s);
    if (it == f.end()) {
      it = f.insert(make_pair<string, int>(s, v.size())).first;
      v.resize(v.size() + 1);
    }
    v[it->second].push_back(r);
  }
  cout << v.size() << endl;
  for (int i = 0; i < v.size(); ++i) {
    cout << v[i].size();
    for (int j = 0; j < v[i].size(); ++j)
      cout << " " << v[i][j];
    cout << endl;
  }
  return 0;
}

	 	  	 	   		 	 			 		  				  	