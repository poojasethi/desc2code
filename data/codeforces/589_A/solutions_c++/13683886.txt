
#include<bits/stdc++.h>
using namespace std;
string tran  (string str )
{
    string newstr  , s ;
    int n = str.size() , temp = str.find('@') ;
    for (int i=0;i<n ; ++i)
        str[i]=tolower(str[i]);
   // cout<<"after lower "<<str<<endl;
    s.assign( str.begin() + temp , str.end() );
    if (s== "@bmail.com")
    {
        for (int i=0; i<temp&&str[i]!='+' ; ++i)
            if (str[i]!='.')
            newstr+=str[i];

        return newstr;
    }
    else
        return str;


}
map <string , vector<int > > m ;

int main(){

    int n ;
    cin>>n;
    string s[20005] ,s2;
    for ( int i =0;i<n;++i)
    {
        cin>>s[i];

        string newstr = tran ( s[i]);
       // cout<<newstr<<endl;
       m[newstr].push_back(i);



    }
    map <string , vector<int > > ::iterator it ;
    cout<<m.size()<<endl;

    for (it = m.begin() ; it!= m.end() ; ++it)
    {       cout<<it->second.size();
        for (int i=0;i<it->second.size() ; ++i)
            {
                int x= it->second[i];
                cout<<" "<<s[x];

            }

        cout<<endl;
    }


    return 0;
}
