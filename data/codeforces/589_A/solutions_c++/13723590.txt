#include<cstdio>
#include<algorithm>
#include<string>
#include<map>
#include<iostream>
#include<vector>

using namespace std;

string conv(string a)
{
    string b = "@bmail.com";
    transform(a.begin(), a.end(), a.begin(), ::tolower);
    if (a.size() > b.size() && a.substr(a.size()-b.size(), b.size()) == b) {
        string s;
        for (size_t i=0;i<a.size() - b.size();++i)
            if (a[i] == '+')
                return s + b;
            else if (a[i] != '.')
                s += a[i];
        return s + b;
    }
    return a;
}

typedef vector<string> vs;
typedef map<string, vs> msvs;

int main(){
    int n;
    cin >> n;
    map<string, vector<string> > mp;
    for (int i=0;i<n;++i) {
        string s;
        cin >> s;
        mp[conv(s)].push_back(s);
    }
    cout << mp.size() << endl;
    for (msvs::iterator it=mp.begin(); it != mp.end(); ++it) {
        cout << it->second.size();
        for (vs::iterator iv=it->second.begin(); iv != it->second.end(); ++iv)
            cout << ' ' << *iv;
        cout << endl;
    }
    return 0;
}
