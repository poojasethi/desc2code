#include<bits/stdc++.h>
using namespace std;
string s;
map<string,vector<string> >mp;
map<string,vector<string> > ::iterator it;
string trans(string a){
	int siz=a.length();
	for(int i=0;i<siz;i++){
		if(a[i]>='A'&&a[i]<='Z'){
			a[i]+='a'-'A';
		}
	}
	int wh=a.find('@');
	if(a.substr(wh)!="@bmail.com")return a;
	string tmp;
	for(int i=0;i<wh;i++){
		if(a[i]=='.')continue;
		if(a[i]=='+')break;
		tmp+=a[i];
	}
	return tmp+"@bmail.com";
} 
int main(){
	int n;
	cin>>n;
	for(int i=0;i<n;i++){
		cin>>s;
		mp[trans(s)].push_back(s);
	}
	cout<<mp.size()<<endl;
	for(it=mp.begin();it!=mp.end();it++){
		int siz=mp[it->first].size();
		printf("%d",siz);
		for(int i=0;i<siz;i++){
			cout<<" "<<mp[it->first][i];
		}
		cout<<endl;
	}
}
	  				   	 		 			    		   		 	