#include <iostream>
#include <map>
#include <vector>
#include <algorithm>
using namespace std;

int IDX = 1;
map<pair<string,string>,int> m;
vector<string> arr[20004];

void process(string &s)
{
	string s1,s2;
	int f=0;
	for(int i=0;i<s.length();i++)
	{
		if(s[i]=='@')	f=2;
		else if(s[i]=='+')	f=1;
		else if(s[i]!='.'||f==2)
		{
			if(f==0)
			s1+=tolower(s[i]);
			else if(f==2)	s2+=tolower(s[i]);
		}
	}
	if(s2!="bmail.com")	{
		s1 = "";
		for(int i=0;i<s.size()&&s[i]!='@';i++)
		{
			s1+=tolower(s[i]);
		}
	}
	if(!m[make_pair(s1,s2)]){
		m[make_pair(s1,s2)] = IDX++;
	}
	int idx = m[make_pair(s1,s2)];
	arr[idx].push_back(s);
}


int main()
{
	//freopen("c:/c++/input.txt","r",stdin);
	ios_base::sync_with_stdio(0);	cin.tie();
	int n;	cin>>n;
	string str;
	
	for(int i=0;i<n;i++)
	{
		cin>>str;
		process(str);
	}
	vector<pair<int, int> > res;
	for(int i=1;i<IDX;i++)	res.push_back(make_pair(arr[i].size(),i));
	sort(res.begin(),res.end());
	cout<<res.size()<<'\n';
	for(int i=res.size()-1;i>=0;i--)
	{
		int j = res[i].second;
		cout<<arr[j].size()<<' ';
		for(int k=0;k<arr[j].size();k++)	cout<<arr[j][k]<<' ';
		cout<<'\n';
	}
}