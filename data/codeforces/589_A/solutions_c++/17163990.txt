#include <bits/stdc++.h>

using namespace std;
map< pair<string , string> , vector<string> > ans ;
int main()
{
    int n ;
    cin>>n;
    string s ;
    while( n-- )
    {
        cin>>s ;
        string login="" , dom="" ;

        int att = s.find('@') ;

        for( int i = att+1 ; i < s.size() ; i++ )dom+=tolower(s[i]) ;

        if( dom == "bmail.com" )
        {
            for( int i = 0 ; s[i] != '@' && s[i] != '+' ; i++ )
                if( s[i]!='.' && isalpha(s[i]) )login+=tolower(s[i]) ;
        }
        else
        {
            for( int i = 0 ; s[i] !='@' ; i++ )
                login+=tolower(s[i]) ;
        }
        ans[make_pair(login,dom)].push_back(s) ;
    }

    map< pair<string,string> , vector<string> >::iterator it = ans.begin() ;

    cout<<ans.size()<<endl;

    while( it != ans.end() )
    {
        vector< string > iii = it->second ;
        cout<<iii.size() ;
        for( int i = 0 ; i < iii.size() ; i++ )cout<<" "<<iii[i] ;

        cout<<endl;

        it++ ;
    }
    return 0;
}
