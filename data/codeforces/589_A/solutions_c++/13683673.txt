#include <iostream>
#include <map>
#include <set>
#include <string>
using namespace std;

string tolower (string s){
	int l = s.length();
	string ans;
	ans.assign(s);
	for (int i = 0; i < l; ++i) {
		if(s[i] >= 65 && s[i] <= 90)
			ans[i] = s[i] + 32;
	}
	return ans;
}

int main () {
	int n;
	cin>>n;
	map<string,set<string> > dict;
	string s, cl,login,domen;
	size_t p, l;
	for (int i = 0; i < n; ++i) {
		cin>>s;
		cl = tolower(s);
		l = cl.length();
		p = cl.find('@');
		login.assign(cl,0,p);
		domen.assign(cl,p+1,l-p-1);
		if (domen == "bmail.com"){
			while (login.find('.') != string::npos){
				p = login.find('.');
				login.erase(p,1);
			}
			if (login.find('+') != string::npos){
				p = login.find('+');
				login.erase(p);
			}
		}
		cl = login+domen;
		dict[cl].insert(s);
	}
	cout<<dict.size()<<endl;
	for (map<string,set<string> >::iterator i = dict.begin(); i != dict.end(); ++i) {
		cout<<i->second.size()<<" ";
		for (set<string>::iterator j = i->second.begin(); j != i->second.end(); ++j) {
			cout<<*j<<" ";
		}
		cout<<endl;
	}
	return 0;
}