#include <bits/stdc++.h>
using namespace std;
map<string, vector<string> > M;
string tolower(string a){
	int n = a.length();
	for(int i=0;i<n;i++) if(a[i] >= 'A' && a[i] <= 'Z') a[i] = a[i]-'A'+'a';
	return a;
}
int main(){
	int n; cin >> n;
	while(n--){
		string a, name, domain; cin >> a;
		int m = a.length();
		for(int i=m-1;i>=0;i--){
			if(a[i] == '@') break;
			domain += a[i];
		}
		reverse(domain.begin(), domain.end());
		domain = tolower(domain); int flag = (domain == "bmail.com");
		for(int i=0;i<m;i++){
			if(a[i] == '@') break;
			if(flag && a[i] == '.') continue;
			if(flag && a[i] == '+') break;
			name += a[i];
		}
		name = tolower(name);
		name += "@" + domain;
		M[name].push_back(a);
	}
	cout << M.size() << "\n";
	for(map<string, vector<string> >::iterator it = M.begin(); it != M.end(); it++){
		vector<string> &v = it->second;
		cout << v.size() << " ";
		for(int i=0;i<v.size();i++) cout << v[i] << " ";
		cout << "\n";
	}
}