#include <bits/stdc++.h>
using namespace std;
#define ll long long

ll n;
string s,t;
map <string,vector<string> > m;

string f1(string t)
{
    string s="";
    for(int i=0;i<t.size();i++)
    {
    	if(t[i]>='A'&&t[i]<='Z')
            s+=(char)(t[i]+32);
        else s+=t[i];
	}
    return s;
}
string f2(string t)
{
    string s="";
    for(int i=0;i<t.size();i++)
    {
        if(t[i]=='@' || t[i]=='+')break;
        else if(t[i]!='.')s+=t[i];
    }
    return s;
}
bool f(string t)
{
    string a=t.substr(t.find("@")+1);
    if(a=="bmail.com")return 1;
    return 0;
}

int main()
{
	ios_base::sync_with_stdio(0);
    cin>>n;
    for(int i=0;i<n;i++)
    {
        cin>>s;
        t=f1(s);
        if(f(t))t=f2(t)+"bmail.com";
        m[t].push_back(s);
    }
    cout<<m.size()<<"\n";
    for(map <string,vector<string> >::iterator it=m.begin();it!=m.end();it++)
    {
        cout<<it->second.size()<<" ";
        for(int i=0;i<(int)it->second.size();i++)
            cout<<it->second[i]<<" ";
        cout<<"\n";
    }
    return 0;
}
