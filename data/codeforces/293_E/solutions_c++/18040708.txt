#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int N=100003;
long long ans;
int i,j,k,n,M,num,L,W,RT,vis[N],f[N],siz[N],c[N];
int t,en[N*2],nxt[N*2],w[N*2],fa[N],dis[N],dep[N];
struct A{
	int d,w;
	int operator<(const A&a)const{
		return w<a.w;
	}
}tmp[N];
void add(int a,int b,int c){en[++t]=b,nxt[t]=fa[a],fa[a]=t,w[t]=c;}
void Add(int i){for(++i;i<=M;++c[i],i+=i&-i);}
int Cnt(int i)
{
	int t=0;if(++i>M)i=M;
	for(;i;t+=c[i],i-=i&-i);return t;
}
void getRT(int u,int p)
{
	siz[u]=1,f[u]=0;
	for(int i=fa[u],v;i;i=nxt[i])if(!vis[v=en[i]]&&v!=p)
		getRT(v,u),siz[u]+=siz[v],f[u]=max(f[u],siz[v]);
	if((f[u]=max(f[u],num-f[u]))<f[RT])RT=u;
}
void getdis(int u,int p)
{
	tmp[++t]=(A){dep[u],dis[u]},siz[u]=1;
	for(int i=fa[u],v;i;i=nxt[i])if(!vis[v=en[i]]&&v!=p)
		dis[v]=dis[u]+w[i],dep[v]=dep[u]+1,getdis(v,u),siz[u]+=siz[v];
}
long long cal(int u)
{
	getdis(u,t=0),M=t+1;
	if(t<2)return 0;
	sort(tmp+1,tmp+t+1);
	int i=t-1,j;long long r=0;
	for(;i&&tmp[i].w+tmp[i+1].w>W;--i);
	if(!i)return 0;
	for(j=i+1;j<=t&&tmp[i].w+tmp[j].w<=W;++j)
		Add(tmp[j].d);
	for(--j;;--j)
	{
		if(L>=tmp[i].d)r+=Cnt(L-tmp[i].d);
		if(!--i)break;Add(tmp[i+1].d);
		for(++j;(j<=t)&&(tmp[i].w+tmp[j].w<=W);++j)
			Add(tmp[j].d);
	}
	memset(c+1,0,4*(t+1));
	return r;
}
void work(int u)
{
	vis[u]=1,dis[u]=dep[u]=0,ans+=cal(u);
	for(int i=fa[u],v;i;i=nxt[i])
		if(!vis[v=en[i]])
		{
			dis[v]=w[i];
			dep[v]=1;
			ans-=cal(v);
			num=siz[v];
			getRT(v,RT=0);
			work(RT);
		}
}
int main()
{
	scanf("%d%d%d",&n,&L,&W);
	for(i=1;i<n;i++,add(j,i,k),add(i,j,k))
		scanf("%d%d",&j,&k);
	f[0]=n+1,num=n,getRT(1,RT=0),work(RT);
	printf("%I64d",ans);
}