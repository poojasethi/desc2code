from collections import defaultdict

n,k = map(int,raw_input().split())
a = map(int,raw_input().split())

dic1,dic2,result = defaultdict(int),defaultdict(int),0

for term in a[::-1]:
    result += dic2[term*k]
    dic2[term] += dic1[term*k]
    dic1[term] += 1

print result