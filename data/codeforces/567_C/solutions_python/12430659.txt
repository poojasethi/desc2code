from collections import defaultdict


def geometric(k, lst):
    d = defaultdict(int)
    total = 0

    for i, num in enumerate(lst):
        
        if num % k == 0:
            total += d[num // k, 2]
            d[num, 2] += d[num // k, 1]
        d[num, 1] += 1

    return total


_, k = map(int, raw_input().split())
lst = map(int, raw_input().split())

print geometric(k, lst)