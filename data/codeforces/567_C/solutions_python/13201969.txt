#!/usr/bin/env python

def main ():
    n, k = map(int, raw_input().split())
    arr = map(int, raw_input().split())
    left = [0]*n
    right = [0]*n
    h = dict()

    left[0] = 0
    h[arr[0]] = 1

    for i in range(1, n):
        if arr[i] % k == 0:
            try:
                left[i] = h[arr[i]/k]
            except KeyError:
                left[i] = 0
        else:
            left[i] = 0
        try:
            h[arr[i]] += 1
        except KeyError:
            h[arr[i]] = 1

    h = dict()
    right[n-1] = 0
    h[arr[n-1]] = 1

    for i in range(n-2, -1, -1):
        try:
            right[i] = h[arr[i]*k]
        except KeyError:
            right[i] = 0
        try:
            h[arr[i]] += 1
        except KeyError:
            h[arr[i]] = 1

    cnt = 0

    for i in range(n):
        cnt += left[i]*right[i]

    print cnt
if __name__ == "__main__":
    main ()

