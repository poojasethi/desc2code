from sys import stdin
n, k = map(int, stdin.readline().split())
a = map(int, stdin.readline().split())

dl = {}
dr = {}
for i in a:
    if i in dr:
        dr[i] += 1
    else:
        dr[i] = 1
ans = 0
if n >= 3:
    dr[a[0]] -= 1
    dl[a[0]] = 1
    dr[a[1]] -= 1
    for i in xrange(1, len(a)-1):
        if a[i]%k == 0:
            ans += dl.get(a[i]/k, 0) * dr.get(a[i]*k, 0)
        dl[a[i]] = dl.get(a[i], 0)+1
        dr[a[i+1]] = dr[a[i+1]]-1
print ans
