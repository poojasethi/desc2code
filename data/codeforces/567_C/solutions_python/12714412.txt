(n, k), a = (int(x) for x in raw_input().split()), [int(x) for x in raw_input().split()]
left, right, result = dict.fromkeys(a, 0), dict.fromkeys(a, 0), 0
for x in a:
    right[x] += 1
for x in a:
    right[x] -= 1
    if x % k == 0:
        count1 = left[x / k] if (x / k) in left else 0
        count2 = right[x * k] if (x * k) in right else 0
        result += count1 * count2
    left[x] += 1
print result