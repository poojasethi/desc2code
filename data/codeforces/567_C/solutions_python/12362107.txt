n, k = [int(i) for i in raw_input().split()]
a = [int(i) for i in raw_input().split()]
dict1 = {}
dict2 = {}
ans = 0

for i in a[::-1]:
    if i*k in dict2:
        ans += dict2[i*k]

    if i*k in dict1:
        dict2.setdefault(i, 0)
        dict2[i] += dict1[i*k]

    dict1.setdefault(i, 0)
    dict1[i] += 1

print ans



