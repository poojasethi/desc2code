n, k = map(int, raw_input().split(' '))
want = [{}, {}]
result = 0
for temp in map(int, raw_input().split(' ')):
    if temp in want[1]:
        result += want[1][temp]
    if temp in want[0]:
        if temp * k not in want[1]:
            want[1][temp * k] = 0
        want[1][temp * k] += want[0][temp]
    if temp * k not in want[0]:
        want[0][temp * k] = 0
    want[0][temp * k] += 1
print result