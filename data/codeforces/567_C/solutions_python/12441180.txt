n, k= map(int, raw_input().split())
lis=map(int, raw_input().split())
dict1={}
dict2={}
answer=0
for x in range(n):
    if lis[x] in dict2:
        answer+=dict2[lis[x]]
    if lis[x] in dict1:
        if lis[x]*k not in dict2:
            dict2[lis[x]*k]=0
        dict2[lis[x]*k]+=dict1[lis[x]]
    if lis[x]*k not in dict1:
        dict1[lis[x]*k]=0
    dict1[lis[x]*k]+=1


print answer
