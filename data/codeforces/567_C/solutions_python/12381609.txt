R=lambda:map(int,raw_input().split())
(n,k),a=R(),R()
def u(d,c,i):
    if i%k==0:d[i]=d.get(i,0)+c.get(i/k,0);
    c[i]=c.get(i,0)+1
    return d,c
print reduce(lambda x,y:(x[0]+(y%k==0 and x[1][0].get(y/k,0)),u(x[1][0],x[1][1],y)), a, (0,({},{})))[0]