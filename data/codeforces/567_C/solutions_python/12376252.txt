n, k = raw_input("").split(" ")
n, k = int(n),int(k)
a = raw_input("").split(" ")
a = [int(el) for el in a]

found_numbers = {}
can_be_second = {}
answer = 0
if k == 1:
	for el in a:
		if el in found_numbers:
			possib = found_numbers[el]
			if el:
				answer += possib*(possib - 1)/2
			found_numbers[el] += 1
		else:
			found_numbers[el] = 1

else:
	for i, el in enumerate(a):
		if el % k == 0 and (el / k) % k == 0 and el:
			prev = el / k
			#pro_prev = prev / k
			#print pro_prev, can_be_second
			if prev in can_be_second:
				answer += can_be_second[prev]
				#print i, pro_prev, prev, el
				#print "-------" + str(answer)
		if el in found_numbers:
			found_numbers[el] += 1
		else:
			found_numbers[el] = 1
		#if el in can_be_second:
		#	can_be_second[]
		if el % k == 0 and el:
			prev = el / k
			if prev in found_numbers:
				if el in can_be_second:
					can_be_second[el] += found_numbers[prev]
				else:
					can_be_second[el] = found_numbers[prev]
		#print i, el, found_numbers
if 0 in found_numbers:
	for i in range(1, found_numbers[0] + 1):
		#possib = found_numbers[el]
		possib = i - 1
		answer += possib*(possib - 1)/2
		#print can_be_second
#print found_numbers
print answer

