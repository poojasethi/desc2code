front = {};
back = {};
n, k = map(int, raw_input().split());
a = map(int, raw_input().split());
ans = 0;

for i in xrange(n):
	if (a[i] in back):
		back[a[i]] += 1;
	else:
		back[a[i]] = 1;
		front[a[i]] = 0;

for i in xrange(n):
	back[a[i]] -= 1;
	if (a[i] % k == 0 and a[i] / k in front and a[i] * k in back):
		ans += front[a[i] / k] * back[a[i] * k];
	front[a[i]] += 1;

print ans;
