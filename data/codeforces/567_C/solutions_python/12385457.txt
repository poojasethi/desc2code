r = lambda: map(int, raw_input().split())
n, k = r()
a = r()
dp = [1] * n
for _ in xrange(2):
    s = {}
    for i in xrange(n):
        temp = dp[i]
        if a[i] % k == 0: 
            dp[i] = s.get(a[i] / k, 0)
        else:
            dp[i] = 0
        s[a[i]] = s.get(a[i], 0) + temp
print sum(dp)