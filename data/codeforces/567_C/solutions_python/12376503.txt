#!/usr/bin/python
#coding: utf


n, k = map(int, raw_input().split())
numdict = {}
numbers = map(int, raw_input().split())

for i in numbers:
    if i in numdict:
        if (i % k == 0) and (i / k in numdict):
            numdict[i][2] += numdict[i / k][1]
            numdict[i][1] += numdict[i / k][0]
        numdict[i][0] += 1
    else:
        numdict[i] = [1, 0, 0]
        if (i % k == 0) and (i / k in numdict) and (i / k != i):
            numdict[i][2] = numdict[i / k][1]
            numdict[i][1] = numdict[i / k][0]

ans = 0
for i in numdict:
    ans += numdict[i][2]

print ans
