from collections import defaultdict

n,k = map(int,raw_input().split())
a = map(int,raw_input().split())


cnt = {}
cbef  = {}
ans = 0
for x in a:
    if x % k*k == 0 and x%k == 0:
        if k != 1:
            ans += cbef.get(x/k,0)
        else:
            ans += (cnt.get(x,0)-1)*cnt.get(x,0)/2
    if x%k==0:
        cbef[x] = cbef.get(x,0)+cnt.get(x/k,0)
    cnt[x] = cnt.get(x,0) + 1
print ans
        