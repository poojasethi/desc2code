#!/usr/bin/python

from collections import defaultdict as dd

def ir():
    return int(raw_input())

def ia():
    line = raw_input()
    line = line.split()
    return map(int, line)

n, k = ia()
a    = ia()

FL = dict()
L = dict()
for i, e in enumerate(a):
    if e % k is 0 and e/k in L:
        FL[i] = L[e/k]        
    if e in L: L[e] = L[e] + 1
    else     : L[e] = 1

FR = dict()
R = dict()
for i, e in reversed(list(enumerate(a))):
    if e*k in R:
        FR[i] = R[e*k]
    if e in R: R[e] = R[e] + 1
    else     : R[e] = 1


ans = 0    
for i in range(len(a)):
    if i in FL and i in FR:
        ans = ans + FL[i]*FR[i]
print ans
