n, k = [int(i) for i in raw_input().split()]
left = {}
right = {}
nums = [int(i) for i in raw_input().split()]
for i in range(n):
	left[nums[i]] = 0
	if nums[i] in right:
		right[nums[i]] += 1
	else:
		right[nums[i]] = 1

total = 0
for i in range(n):
	l, r = 0, 0;
	if nums[i] % k == 0 and nums[i] / k in left:
		l = left[nums[i] / k]
	right[nums[i]] -= 1
	if nums[i] * k in right:
		r = right[nums[i] * k]
	total += l * r
	left[nums[i]] += 1
print total