#include <iostream>
#include <cmath>
#include <algorithm>
#include <map>
using namespace std;

int n, k, x;
long long ans;
map<int, long long> m[2];

int main(){
	cin >> n >> k;
	for(int i = 0; i < n; i++){
		cin >> x;
		if(abs(x) % k)
			m[0][x]++;
		else{
			ans += m[1][x/k];
			m[1][x] += m[0][x / k];
			m[0][x]++;
		}
	}

	cout << ans << "\n";
	return 0;
}