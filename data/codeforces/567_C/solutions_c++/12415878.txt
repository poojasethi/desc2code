#include <iostream>
#include <map>

using namespace std;

int main()
{
	int i;
	long long n, k, *a, sum = 0LL;
	map<long long, long long> m1, m2;

	cin>>n>>k;

	a = new long long[n];

	for (i = 0; i < n; i++)
	{
		cin>>a[i];
	}

	for (i = n-1; i >= 0; i--)
	{
		sum += m2[a[i]*k];
		m2[a[i]] += m1[a[i]*k];
		m1[a[i]]++;
	}

	cout<<sum<<endl;

	return 0;
}
