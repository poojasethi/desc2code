#include <bits/stdc++.h>
using namespace std;
#define ll long long
map<ll,ll> hash,cc;
int ar[(int)2e5+5];
int main(){
	int n,k,a,i,j;cin>>n>>k;
	ll ret=0,cur;
	for(i=0;i<n;++i)
		cin>>ar[i];
	for(i=n-1;i>=0;--i){
		cur = ar[i];
		ret += hash[cur*k];
		hash[cur]+= cc[cur*k];
		cc[cur]++;
	}
	cout<<ret<<endl;
}
