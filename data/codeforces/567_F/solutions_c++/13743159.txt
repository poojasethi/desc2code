#include<stdio.h>
#include<iostream>
#define mp make_pair
#define sc second
#define pb push_back
#define fs first
using namespace std;
int N,k,x,y;
int cmp[80][80];
string s;
string sg[] = {"x","<","<=","=",">=",">"};
long long d[80][80],rez;

inline bool check(int x, int l, int r) {
    bool ok =1;
    for(int i=l;i<=r;++i) {
        if(cmp[x][i] >= 3) {
            ok = 0;
        }
    }
    return ok;
}

int main() {
	#ifndef ONLINE_JUDGE
	freopen("input.in","r",stdin);
	#endif
	scanf("%d%d",&N,&k);
    for(int i=1;i<=k;++i) {
        scanf("%d",&x);
        cin>>s;
        scanf("%d",&y);
        for(int j=0;j<6;++j) {
            if(s == sg[j]) {
                cmp[x][y] = j;
                cmp[y][x] = 6-j;
            }
        }
    }

    for(int i=1;i<2*N;++i) {
        if(!cmp[i][i+1] || (cmp[i][i+1]> 1 && cmp[i][i+1] < 5)) {
            d[i][i+1] = 1;
        }
    } // position the N

    for(int n=N-1;n>=1;--n) {
        int len = 2*(N-n+1); 
        for(int i=1;i+len-1<=2*N;++i) {
            int j = i+len-1;
            
            if(d[i+1][j-1]) {
                if(cmp[i][j]!=1 && cmp[i][j] != 5) {
                    if(check(i,i+1,j-1) && check(j,i+1,j-1)) {
                        d[i][j] += d[i+1][j-1];
                    }
                }
            }
            if(d[i][j-2]) {
                if(cmp[j-1][j]!=1 && cmp[j-1][j] != 5) {
                    if(check(j-1,i,j-2) && check(j,i,j-2)) {
                        d[i][j] += d[i][j-2];
                    }
                }
            }
            if(d[i+2][j]) {
                if(cmp[i][i+1]!=1 && cmp[i][i+1] != 5) {
                    if(check(i,i+2,j) && check(i+1,i+2,j)) {
                        d[i][j] += d[i+2][j];
                    }
                }
            }
        }
    }
    cout<<d[1][2*N];
    return 0;
}
