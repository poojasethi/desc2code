#include<cstdio>
#include<cstring>

using namespace std;

	bool w[5][100][100];
	long long f[100][100];
	long long ans=0;
	
	int n,m;
	char op;
	int x,y;
	
bool check(int x,int y)
{
	return !w[1][x][y];
}

bool S(int now,int l,int r)
{
	for (int i=l;i<=r;i++)
	{
		if (w[2][now][i])
		{
			return 0;
		}	
	}	
	return 1;
}

bool L(int now,int l,int r)
{
	for (int i=1;i<=l;i++)
	{
		if (w[3][now][i])
		{
			return 0;
		}
	}
	for (int i=r;i<=2*n;i++)
	{
		if (w[3][now][i])
		{
			return 0;
		}
	}
	return 1;
}

int main()
{
	scanf("%d%d",&n,&m);
	memset(f,0,sizeof(f));
	memset(w,0,sizeof(w));
	for (int i=1;i<=m;i++)
	{
		scanf("%d",&x);
		op=getchar();
		op=getchar();
		if (op=='=')
		{
			scanf("%d",&y);
			w[2][x][y]=1;
			w[2][y][x]=1; 
			w[3][x][y]=1;
			w[3][y][x]=1;
		}
		else
		{
			if (op=='<')
			{
				op=getchar();
				if (op=='=')
				{
					scanf("%d",&y);
					w[3][x][y]=1;
					w[2][y][x]=1;
				}
				else
				{
					scanf("%d",&y);
					w[3][x][y]=1;
					w[2][y][x]=1;
					w[1][x][y]=1;
					w[1][y][x]=1;
				}
			}
			else
			{
				op=getchar();
				if (op=='=')
				{
					scanf("%d",&y);
					w[2][x][y]=1;
					w[3][y][x]=1;
				}
				else
				{
					scanf("%d",&y);
					w[2][x][y]=1;
					w[3][y][x]=1;
					w[1][x][y]=1;
					w[1][y][x]=1;
				}
			}
		}
	}
	
	f[1][2*n]=1;
	for (int l=1;l<=n;l++)
	{
		for (int i=1;i<=2*l-1;i++)
		{
			int j=2*n-2*l+i+1;
			if (f[i][j]==0)
			{
				continue;
			}
			if (j-i==1)
			{
				if (check(i,j))
				{
					ans+=f[i][j];
				}
			}
			else
			{
				if (check(i,j) && S(i,i+1,j-1) && S(j,i+1,j-1) && L(i,i-1,j+1) && L(j,i-1,j+1))
				{
					f[i+1][j-1]+=f[i][j];
				}				
				if (check(i,i+1) && S(i,i+2,j) && S(i+1,i+2,j) && L(i,i-1,j+1) && L(i+1,i-1,j+1))
				{
					f[i+2][j]+=f[i][j];
				}
				if (check(j-1,j) && S(j-1,i,j-2) && S(j,i,j-2) && L(j-1,i-1,j+1) && L(j,i-1,j+1))
				{
					f[i][j-2]+=f[i][j];
				}
			}
		}
	}
	
	printf("%I64d\n",ans);
	
	return 0;
}
		   			 		 	     		 	 	 	 	