#include<bits/stdc++.h>
using namespace std;
bool ch[80][80];
#define ll long long int
ll ff[80][80];
vector<ll> a[80][5];
bool ok(ll l,ll r,ll x,ll y)
{
    ll i;
    for(i=0;i<a[x][1].size();i++)
    {
        if(a[x][1][i]!=y && a[x][1][i]!=x) return false;
    }
    for(i=0;i<a[y][1].size();i++)
    {
        if(a[y][1][i]!=x && a[y][1][i]!=y) return false;
    }
    for(i=0;i<a[x][2].size();i++)
    {
        if(a[x][2][i]>=l && a[x][2][i]<=r) return false;
    }
    for(i=0;i<a[x][3].size();i++)
    {
        if(a[x][3][i]>=l && a[x][3][i]<=r && a[x][3][i]!=y && a[x][3][i]!=x) return false;
    }
    swap(x,y);
    for(i=0;i<a[x][2].size();i++)
    {
        if(a[x][2][i]>=l && a[x][2][i]<=r) return false;
    }
    for(i=0;i<a[x][3].size();i++)
    {
        if(a[x][3][i]>=l && a[x][3][i]<=r && a[x][3][i]!=y && a[x][3][i]!=x) return false;
    }
    return true;
}
ll f(ll x,ll y)
{
    if(x==y+1) return 1;
    if(ch[x][y]) return ff[x][y];
    ch[x][y]=true;
    if(ok(x,y,x,y)) ff[x][y]+=f(x+1,y-1);
    if(x!=y-1){
    if(ok(x,y,x,x+1)) ff[x][y]+=f(x+2,y);
    if(ok(x,y,y-1,y)) ff[x][y]+=f(x,y-2);
    }
    //printf("%lld %lld %lld\n",x,y,ff[x][y]);
    return ff[x][y];
}
int  main()
{
    ll n,k,i,x,y,z;
    //freopen("test.inp","r",stdin);
    scanf("%lld %lld",&n,&k);
    for(i=1;i<=k;i++)
    {
        string op;
        scanf("%lld",&x);
        cin>>op;
        scanf("%lld",&y);
        if(op=="<")
        {
            op=">"; swap(x,y);
        }
        if(op=="<=")
        {
            op=">="; swap(x,y);
        }
        if(op=="="){
            z=1;
        }
        if(op==">="){
            z=3;
        }
        if(op==">"){
            z=2;
        }
        a[x][z].push_back(y);
        if(z==1) a[y][z].push_back(x);
        //printf("%lld %lld %lld\n",x,z,y);
    }
    printf("%lld",f(1,n*2));
}
