#include <cstdio>
#include <cstdlib>
#include <string>
#include <cstring>
#include <vector>
#include <algorithm>
#include <cmath>
#include <iostream>
#include <queue>
#include <set>
#define LL __int64
#define eps 1e-12
#define mod 1000001
#define N 100008

using namespace std;
struct node
{
    int x,y,si;
}con[108];
LL dp[75][75];
bool check(int l,int r,int a,int b,int k)
{
    bool f=true;
    for(int i=0;i<k&&f;i++)
        if(con[i].x==a||con[i].x==b)
        {
            if(con[i].si==0&&(l>con[i].y||r<con[i].y))
                f=false;
            else if(con[i].si==4&&((l<=con[i].y&&con[i].y<=r)||con[i].y==a||con[i].y==b))
                f=false;
            else if(con[i].si==2&&(con[i].y!=a&&con[i].y!=b))
                f=false;
            else if(con[i].si==1&&con[i].y!=a&&con[i].y!=b&&(l>con[i].y||r<con[i].y))
                f=false;
            else if(con[i].si==3&&(l<=con[i].y&&con[i].y<=r))
                f=false;
        }
    return f;
}
int main()
{
    int n,k;
    LL ans=0;
    scanf("%d%d",&n,&k);
    for(int i=0;i<k;i++)
    {
        char str[5];
        scanf("%d%s%d",&con[i].x,str,&con[i].y);
        if(str[0]=='=')
            con[i].si=2;
        else if(str[0]=='<'&&str[1]=='=')
            con[i].si=1;
        else if(str[0]=='>'&&str[1]=='=')
            con[i].si=3;
        else if(str[0]=='<')
            con[i].si=0;
        else
            con[i].si=4;
    }
    memset(dp,0,sizeof(dp));
    dp[1][2*n]=1;
    for(int i=1;i<n;i++)
        for(int j=1;j<=2*i+1;j++)
        {
            int l=j,r=j+2*(n-i)-1;
            if(l-2>0&&check(l,r,l-1,l-2,k))
                dp[l][r]+=dp[l-2][r];
            if(l-1>0&&r+1<=2*n&&check(l,r,l-1,r+1,k))
                dp[l][r]+=dp[l-1][r+1];
            if(r+2<=2*n&&check(l,r,r+1,r+2,k))
                dp[l][r]+=dp[l][r+2];
        }
    for(int i=1;i<2*n;i++)
        if(check(-1,-1,i,i+1,k))
            ans+=dp[i][i+1];
    printf("%I64d",ans);
    return 0;
}
