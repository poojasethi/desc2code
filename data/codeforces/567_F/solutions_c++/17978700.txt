//
//	ID: y0rkl1u
//	PROG: codeforces 567F. Mausoleum
//	LANG: C++
//	DATE: 05.18.2016
//	NOTE: dp
//

#include <bits/stdc++.h>
using namespace std;

#define ef else if
#define reg register
#define rint reg int
#define Min(a,b) ((a)<(b)?(a):(b))
#define Max(a,b) ((a)>(b)?(a):(b))
#define Abs(a) ((a)>=0?(a):(-(a)))
#define cmax(a,b) ((a)<(b)?(a)=(b):1)
#define cmin(a,b) ((a)>(b)?(a)=(b):1)
#define For(i,l,r) for(rint i=(l),_c=(r);i<=_c;i++)
#define Dor(i,l,r) for(rint i=(l),_c=(r);i>=_c;i--)
#define clr(a,sz) memset(a,0,sizeof(a[0])*(sz+5))
#define clrs(a,k,sz) memset(a,k,sizeof(a[0])*(sz+5))
#define pt(x,b) cerr<<#x<<" = "<<x<<(b?'\n':'\t')
#define pa(a,l,r) do{cerr<<#a<<" = ";\
	For(_i,l,r)cerr<<a[_i]<<" \n"[_i==r];}while(0)
typedef long long ll;

bool comp(rint a,rint b,reg string s)
{
	if(s=="=")return a==b;
	if(s==">")return a>b;
	if(s=="<")return a<b;
	if(s==">=")return a>=b;
	if(s=="<=")return a<=b;
	assert(0);
}
enum
{
	LESS,CURR,MORE
};
int L,R,Ft,Sc;
int getType(rint pos)
{
	if(pos<L||pos>R)return LESS;
	if(pos==Ft||pos==Sc)return CURR;
	return MORE;
}
const int MN=111;
ll dp[MN][MN];
int a[MN],b[MN],k;
string sign[MN];
bool check(rint l,rint r,rint ft,rint sc)
{
	L=l,R=r,Ft=ft,Sc=sc;
	For(i,0,k-1){
		rint aa=getType(a[i]),bb=getType(b[i]);
		if(aa!=CURR&&bb!=CURR)continue;
		if(!comp(aa,bb,sign[i]))return 0;
	}
	return 1;
}
ll calc(rint l,rint r)
{
	ll &ret=dp[l][r];
	if(~ret)return ret;
	ret=0;
	if(l+1==r){
		if(check(l,r,l,r))ret=1;
	}
	else{
		if(check(l,r,l,l+1))ret+=calc(l+2,r);
		if(check(l,r,l,r))ret+=calc(l+1,r-1);
		if(check(l,r,r-1,r))ret+=calc(l,r-2);
	}
	return ret;
}
inline void Main()
{
	rint n;
	cin>>n>>k;
	n<<=1;
	For(i,0,k-1){
		cin>>a[i]>>sign[i]>>b[i];
		--a[i],--b[i];
	}
	memset(dp,-1,sizeof(dp));
	cout<<calc(0,n-1)<<endl;
}
int main()
{
	Main();
	return 0;
}