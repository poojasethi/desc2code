#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#include<iostream>
#define ll long long
using namespace std;
int n,k;
#define N 110 
ll f[N][N];
struct P{
    int c,x,y;
}a[N];
inline int check(int p,int q,int l,int r){
    for(int i=1;i<=k;i++){
        if(a[i].x==a[i].y){
            if(a[i].c==1)return 0;else continue;
        }
        if(a[i].c==0){
            if(a[i].x==p&&a[i].y!=q)return 0;
            if(a[i].x==q&&a[i].y!=p)return 0;
            if(a[i].x>=l&&a[i].x<=r&&(!(a[i].y>=l&&a[i].y<=r)))return 0;
            if(a[i].y>=l&&a[i].y<=r&&(!(a[i].x>=l&&a[i].x<=r)))return 0; 
        }
        if(a[i].c==1){
            if(a[i].x==p&&(!(a[i].y>=l&&a[i].y<=r)))return 0;
            if(a[i].x==q&&(!(a[i].y>=l&&a[i].y<=r)))return 0;
            if((a[i].x>=l&&a[i].x<=r)&&(!(a[i].y>=l&&a[i].y<=r)))return 0; 
        }
        if(a[i].c==2){
            if(a[i].x==p&&(!((a[i].y>=l&&a[i].y<=r)||(a[i].y==q))))return 0;
            if(a[i].x==q&&(!((a[i].y>=l&&a[i].y<=r)||(a[i].y==p))))return 0;
            if(a[i].x>=l&&a[i].x<=r&&(!(a[i].y>=l&&a[i].y<=r)))return 0;
        } 
    }
    return 1;
}
int main(){
    scanf("%d%d",&n,&k);
    char ch1,ch2;
    for(int i=1;i<=k;i++){
        scanf("%d%c%c%c%d\n",&a[i].x,&ch1,&ch1,&ch2,&a[i].y);
        if(ch1=='=')a[i].c=0;
        if(ch1=='<'&&ch2==' ')a[i].c=1;
        if(ch1=='<'&&ch2=='=')a[i].c=2;
        if(ch1=='>'&&ch2==' ')a[i].c=3;
        if(ch1=='>'&&ch2=='=')a[i].c=4;
        if(a[i].c==3)a[i].c=1,swap(a[i].x,a[i].y);
        if(a[i].c==4)a[i].c=2,swap(a[i].x,a[i].y);
    }
    memset(f,0,sizeof(f));
    for(int i=1;i<2*n;i++)if(check(i,i+1,0,0))f[i][i+1]=1;
    for(int l=4;l<=2*n;l+=2)
        for(int i=1;i+l-1<=2*n;i++){
            int j=i+l-1;
            if(check(i,j,i+1,j-1))f[i][j]+=f[i+1][j-1];
            if(check(i,i+1,i+2,j))f[i][j]+=f[i+2][j];
            if(check(j-1,j,i,j-2))f[i][j]+=f[i][j-2];
        }
    printf("%I64d",f[1][2*n]);
}