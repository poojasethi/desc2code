#include<cstdio>
#include<iostream>
#include<algorithm>
#include<cstring>
#include<cstdlib>
using namespace std;
typedef long long LL;
const int maxn=72;
int n,k;
int bj[maxn][maxn][5];
int x,y;char s[5];
LL dp[maxn][maxn];
bool pd(int l,int r,int x,int y){
	if(bj[x][y][1]|bj[x][y][2])return false;
	for(int i=1;i<=l;++i){
		if(bj[i][x][0]|bj[i][x][2]|bj[i][x][4])return false;
		if(bj[i][y][0]|bj[i][y][2]|bj[i][y][4])return false;
	}
	for(int i=r;i<=2*n;++i){
		if(bj[i][x][0]|bj[i][x][2]|bj[i][x][4])return false;
		if(bj[i][y][0]|bj[i][y][2]|bj[i][y][4])return false;
	}return true;
}
LL DP(int l,int r){
	if(l>r)return 0;
	if(dp[l][r]!=-1)return dp[l][r];
	if(r-l==1)return pd(l-1,r+1,l,r);
	dp[l][r]=0;
	if(pd(l-1,r+1,l,r))dp[l][r]+=DP(l+1,r-1);
	if(pd(l-1,r+1,l,l+1))dp[l][r]+=DP(l+2,r);
	if(pd(l-1,r+1,r-1,r))dp[l][r]+=DP(l,r-2);
	return dp[l][r];
}
int main(){
	scanf("%d%d",&n,&k);
	for(int i=1;i<=k;++i){
		scanf("%d%s%d",&x,&s,&y);
		if(s[0]=='=')bj[x][y][0]=bj[y][x][0]=1;
		else if(s[0]=='<'){
			if(s[1]=='=')bj[x][y][3]=bj[y][x][4]=1;
			else bj[x][y][1]=bj[y][x][2]=1;
		}else{
			if(s[1]=='=')bj[x][y][4]=bj[y][x][3]=1;
			else bj[x][y][2]=bj[y][x][1]=1;
		}
	}
	memset(dp,-1,sizeof(dp));
	printf("%I64d\n",DP(1,2*n));return 0;
}
