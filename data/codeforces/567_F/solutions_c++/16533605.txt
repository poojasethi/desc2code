#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <iostream>
#define N 80
#define int64 long long
#define max(a, b) ((a) > (b) ? (a) : (b))
#define min(a, b) ((a) < (b) ? (a) : (b))
#define swap(T, a, b) ({T ttt = a; a = b; b = ttt;})
int n, k, x, y, z, a[N][N];
int64 f[N][N];
char s[3]; 
int64 F(int l, int r)
{
    if (l >= r) return 0; 
    if (f[l][r]) return f[l][r]; 
    bool q1, q2, q3; 
    q1 = q2 = q3 = true; 
    if (a[l][r] == 3) q2 = q3 = false;
    if (a[l][r] == 1 || a[l][r] == 5) q1 = false; 
    if (a[l][l + 1] == 1 || a[l][l + 1] == 5) q2 = false;
    if (a[r - 1][r] == 1 || a[r - 1][r] == 5) q3 = false;
    if (a[l][l + 1] == 3 || a[r - 1][r] == 3) q1 = false;
//    if (a[l][l + 1] == 3 || a[l][r] == 5) return f[l][r] = F(l + 2, r); 
//    if (a[r - 1][r] == 3 || a[l][r] == 1) return f[l][r] = F(l, r - 2); 
    for (int i = l; i <= r; i++)
    {
        if (i > l && i < r && (a[i][l] == 3  || a[i][l] == 5 || a[i][l] == 4 || a[i][r] == 3  || a[i][r] == 5 || a[i][r] == 4)) q1 = false; 
        if (i >= l + 2 && (a[i][l] == 3  || a[i][l] == 5 || a[i][l] == 4 || a[i][l + 1] == 3  || a[i][l + 1] == 5 || a[i][l + 1] == 4)) q2 = false;
        if (i <= r - 2 && (a[i][r] == 3  || a[i][r] == 5 || a[i][r] == 4 || a[i][r - 1] == 3  || a[i][r - 1] == 5 || a[i][r - 1] == 4)) q3 = false; 
    }
    if (q1) f[l][r] += F(l + 1, r - 1); 
    if (q2) f[l][r] += F(l + 2, r); 
    if (q3) f[l][r] += F(l, r - 2); 
    return f[l][r]; 
}
int main()
{
    scanf("%d%d", &n, &k); 
    for (int i = 1; i <= k; i++)    
    {
        scanf("%d %s %d", &x, s, &y);
        if (strlen(s) == 1)
           if (s[0] == '=') z = 3; 
           else z = s[0] == '>' ? 1 : 5;
        else z = s[0] == '>' ? 2 : 4;
        a[x][y] = z; a[y][x] = 6 - z;
    }
    n <<= 1; 
    for (int i = 1; i < n; i++) 
        if (a[i][i + 1] != 1 && a[i][i + 1] != 5) f[i][i + 1] = 1; 
    //f[i][j] = f[i + 1][j - 1] + f[i + 2][j] + f[i][j - 2]; 
    std::cout << F(1, n) << std::endl; 
    return 0; 
}

				 	  	  			 				 		 			   	