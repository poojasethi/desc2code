#include<iostream>
#include<cstring>
using namespace std;

int l[10001],r[10001],c1,c2,n,m;
int la[10001],ra[10001],next[10001],q;
void pre(){
	for(int i=1;i<=n;i++) next[i]=i;
}
int find(int x){
	if(next[x]!=x){next[x]=find(next[x]);}
	return next[x];
}

int main()
{
	cin>>n>>m;
	for(int i=1;i<=m;i++)
		cin>>l[i]>>r[i];
	pre();
	for(int i=1;i<=m;i++){
		int p=find(l[i]),q=find(r[i]);
		if(p!=q){la[++c1]=i;next[p]=q;}
	}
	pre();
	for(int i=m;i>=1;i--){
		int p=find(l[i]),q=find(r[i]);
		if(p!=q){ra[++c2]=i;next[p]=q;}
	}
	cin>>q;
	for(int i=1;i<=q;i++)
	{
		int ans=0,x,y;
		cin>>x>>y;
		pre();
		for(int i=1,it=la[1];i<=c1&&it<x;i++,it=la[i])
		{
			int p=find(l[it]),q=find(r[it]);
			if(p!=q){next[p]=q;ans++;}
		}
		for(int i=1,it=ra[1];i<=c2&&it>y;i++,it=ra[i]){
			int p=find(l[it]),q=find(r[it]);
			if(p!=q) {next[p]=q;ans++;}
		}
		cout<<n-ans<<endl;
	}
	return 0;
}