#include <stdio.h>
#include <iostream>
using namespace std;
int n,m,k,l[10005],r[10005];
struct node{
	int f[505],c;
	int gf(int x){
		if (f[x]==x)
			return x;
		else
			return f[x]=gf(f[x]);
	}
	inline void merge(int x,int y){
		x=gf(x);
		y=gf(y);
		if (x!=y) f[x]=y,c++;
	}
}q[10005],p[10005],t;
int main( ){
	scanf("%d %d",&n,&m);
	for (int i=0;i<=500;i++)
		q[0].f[i]=p[m+1].f[i]=i;
	for (int i=1;i<=m;i++)
		scanf("%d %d",&l[i],&r[i]);
	for (int i=1;i<=m;i++){
		q[i]=q[i-1];
		q[i].merge(l[i],r[i]);
		p[m+1-i]=p[m+2-i];
		p[m+1-i].merge(l[m+1-i],r[m+1-i]);
	}
	scanf("%d",&k);
	for (int j=1,x,y;j<=k;j++){
		scanf("%d %d",&x,&y);
		t=q[x-1];
		for (int i=1;i<=n;i++)
			t.merge(i,p[y+1].f[i]);
		printf("%d\n",n-t.c);
	}
	return 0;
}
