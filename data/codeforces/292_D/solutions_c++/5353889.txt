#include <cstdio>
#include <iostream>
using namespace std;
struct node {
	int a[601],t;
	int search (int x) {
		if (a[x]) {
			if (x!=a[x]) a[x]=search(a[x]);
			return a[x];
		}
		else {
			a[x]=x;
			return a[x];
		}
	}
	void work (int x,int y) {
		x=search(x);y=search(y);
		if (x!=y) {a[x]=y;t++;}
	}
}p[10101],q[10101],r;
int b[10101],c[10101];
int main ( ) {
	int n,m,i,k,x,y;
	scanf("%d%d",&n,&m);
	for (i=1;i<=m;i++) scanf("%d%d",&b[i],&c[i]);
	for (i=1;i<=m;i++) {
		p[i]=p[i-1];
		p[i].work(b[i],c[i]);
	}
	for (i=m;i>=1;i--) {
		q[i]=q[i+1];
		q[i].work(b[i],c[i]);
	}
	scanf("%d",&k);
	while (k--) {
		scanf("%d%d",&x,&y);
		r=p[x-1];
		for (i=1;i<=n;i++) r.work(i,q[y+1].search(i));
		printf("%d\n",n-r.t);
	}
	return 0;
}
/*
6 5
1 2
5 4
2 3
3 1
3 6
6
1 3
2 5
1 5
5 5
2 4
3 3

4
5
6
3
4
2
*/
