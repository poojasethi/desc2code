#include<iostream>
#include<algorithm>

using namespace std;

const int MAXN = 10005;
int x[MAXN], y[MAXN], par[MAXN], comp, size[MAXN];
short int ans[MAXN][MAXN];

int getpar(int x)
{
	if(par[x] == -1)
		return x;
	return par[x] = getpar(par[x]);
}

void add(int x, int y)
{
	x = getpar(x), y = getpar(y);
	if(x == y)
		return;
	comp--;
	if(size[x] < size[y])
		swap(x, y);
	par[y] = x;
	size[x] += size[y];
}

int main()
{
	int n, m;
	cin >> n >> m;
	for(int i = 0; i < m; i++)
	{
		cin >> x[i] >> y[i];
		x[i]--, y[i]--;
	}
	for(int i = 0; i < m; i++)
	{
		comp = n;
		fill(par, par + 505, -1);
		fill(size, size + 505, 1);
		for(int j = 0; j < i; j++)
			add(x[j], y[j]);
		ans[i][m - 1] = comp;
		for(int j = m - 1; j > i; j--)
		{
			add(x[j], y[j]);
			ans[i][j - 1] = comp;
		}
	}
	int q;
	cin >> q;
	while(q--)
	{
		int l, r;
		cin >> l >> r;
		l--, r--;
		cout << ans[l][r] << endl;
	}
	return 0;
}
