#include <stdio.h>
#include <iostream>
using namespace std;
struct node{
	int f[505],c;
	int find(int x){
		if (f[x]==x)
			return x;
		else
			return f[x]=find(f[x]);
	}
	void cherk(int x,int y){
		x=find(x);
		y=find(y);
		if (x!=y){
			f[x]=y;
			c++;
		}
	}
}q[10005],p[10005],t;
int l[10005],r[10005];
int main( ){
	int n,m,k,a,b;
	cin>>n>>m;
	for (int i=1;i<=500;i++){
		q[0].f[i]=i;
		p[m+1].f[i]=i;
	}
	for (int i=1;i<=m;i++)
		cin>>l[i]>>r[i];
	for (int i=1;i<=m;i++){
		q[i]=q[i-1];
		q[i].cherk(l[i],r[i]);
		p[m+1-i]=p[m+2-i];
		p[m+1-i].cherk(l[m+1-i],r[m+1-i]);
	}
	cin>>k;
	for (int j=1;j<=k;j++){
		cin>>a>>b;
		t=q[a-1];
		for (int i=1;i<=n;i++)
			t.cherk(i,p[b+1].f[i]);
		cout<<n-t.c<<endl;
	}
	return 0;
}
