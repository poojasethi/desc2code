#include <bits/stdc++.h>

#define fi first
#define se second
#define mm ((b+s)>>1)
#define umax(a,b) a=max(a,b)
#define umin(a,b) a=min(a,b)
#define inf 1000000009ll
#define kare(a) ((a)*(a))
#define max3(a,b,c) max((a),max((b),(c)))
#define bit(k) (1ll<<(k))
#define fbit(k,i) ((k) & (bit(i)))
#define count(a) __builtin_popcount(a)
#define pq priority_queue
#define all(v) v.begin(),v.end()
#define type(x) __typeof(x.begin())
#define foreach(v,it) for(type(v) it=v.begin(); it!=v.end();it++)

using namespace std;

typedef double db;
typedef long long lint;
typedef pair <lint,lint> ii;
typedef pair <ii,lint> iii;
typedef vector <lint> vi;
typedef vector <ii> vii;

const lint maxn=3e5+30;

lint N,M,T,X[maxn],ans[maxn],shift;
char W[maxn];
vii v;
vi last;

int main(){
	cin >> N >> M >> T;
	
	for(lint i=1;i<=N;i++){
		scanf("%lld %c",&X[i],&W[i]);
		v.push_back(ii(X[i],i));
		W[i]= W[i]=='L' ? -1 : 1;
	}
	
	for(lint i=1;i<=N;i++){
		lint a=(X[i]+T*W[i]),plus=0;
		
		if(W[i]==-1){
			//~ if(a<0)
				//~ plus=!(abs(a)%M);
			a=a<=0 ? (-a)/M+1 : 0;
		}
		else
			plus=-(!(a%M)),a/=M;
		
		shift+=W[i]*a+plus;
		//~ printf("after %lld , shift=%lld\n",i,shift);
	}
	
	T%=M;
	for(lint i=1;i<=N;i++){
		lint a=X[i]+T*W[i]+M;
		a=(a-1)%M+1;
		last.push_back(a);
	}
	
	sort(all(v));
	sort(all(last));
	
	//~ foreach(last,it)
		//~ printf("%lld ",(*it));
	//~ puts("");
	//~ foreach(v,it)
		//~ printf("%lld ",(*it).se);
	//~ puts("");
	
	//~ printf("shift -> %lld\n",shift);
	
	if(shift)
		shift=shift/abs(shift)*(abs(shift)%N);
	//~ printf("shift=%lld , N=%lld\n",shift,N);
	lint beg=((-shift+N+1)-1)%N+1;
	
	//~ printf("beg = %lld\n",beg);
	
	lint j=0;
	for(lint i=beg-1;i<N;i++)
		ans[v[i].se]=last[j++];
	for(lint i=0;i<beg-1;i++)
		ans[v[i].se]=last[j++];
		
	for(lint i=1;i<=N;i++)
		printf("%lld ",ans[i]);
	
	return 0;
}
