#include<bits/stdc++.h>

using namespace std;

#define st first
#define nd second
#define mp make_pair
#define pb push_back
#define sol (root+root)
#define sag (root+root+1)
#define orta ((bas+son)/2)
#define ll long long
#define pii pair<int,int>
#define type(x) __typeof((x).begin())
#define foreach(it, x) for(type(x) it = (x).begin(); it != (x).end(); it++)
#define int ll

const int N=3e5+5;
const int mod=1e9+7;
const int inf=1e9+7;

int n,m,t,i,x,s,shift,last;
int ans[N];

pii ord[N];

vector<int> pos;

char ch;

main(){

	scanf("%lld %lld %lld",&n,&m,&t);

	for(i=1 ; i<=n ; i++){
		scanf("%lld %c",&x,&ch);
		if(ch=='L')
			s=-1;
		else s=1;
		ord[i]=mp(x,i);
		if((x+s*(t%m)+m)%m==0)
			pos.pb(m);
		else
			pos.pb((x+s*(t%m)+m)%m);
		shift+=t/m*s;
		if(s==-1)
			if(pos.back()>x)
				shift+=s;
		if(s==1)
			if(pos.back()<x)
				shift+=s;
	}

	sort(ord+1,ord+n+1);
	sort(pos.begin(),pos.end());

	shift%=n;

	for(i=0 ; i<n ; i++)
		ans[ord[i+1].nd]=pos[(i+shift+n)%n];

	cout<<endl;

	for(i=1 ; i<=n ; i++)
		printf("%lld ",ans[i]);

}
