#include<cstdio>
#include<cstring>
#include<iostream>
#include<algorithm>
#define fo(i,a,b) for(int i=a;i<=b;i++)
#define fd(i,a,b) for(int i=a;i>=b;i--)
#define maxn 300005
#define ll long long
using namespace std;

ll n,m,t;

ll a[maxn],dirt[maxn],pos[maxn],now[maxn],p[maxn],ans[maxn];

bool cmp(ll x,ll y){
	return a[x]<a[y];
}

int main(){
	scanf("%I64d%I64d%I64d",&n,&m,&t);
	fo(i,1,n) {
		scanf("%I64d",&a[i]);
		a[i]--;
		char ch=getchar();
		while (ch!='L' && ch!='R') ch=getchar();
		if (ch=='L') dirt[i]=0;
		else dirt[i]=1;
		pos[i]=i;
	}
	sort(pos+1,pos+n+1,cmp);
	ll rot=0;
	fo(i,1,n) {
		if (dirt[i]==0) {
			now[i]=((a[i]-t) % m+m)% m;
			rot=(rot+(a[i]-t-now[i]) / m) % n;
			rot=(rot % n+n) % n;
		}
		else {
			now[i]=(a[i]+t) % m;
			rot=(rot+(a[i]+t-now[i]) / m) % n;
			rot=(rot % n+n) % n;
		}
	}
	sort(now+1,now+n+1);
	fo(i,1,rot) p[n-rot+i]=now[i];
	fo(i,rot+1,n) p[i-rot]=now[i];
	fo(i,1,n) ans[pos[i]]=p[i]+1;
	fo(i,1,n) printf("%I64d ",ans[i]);
	return 0;
}
