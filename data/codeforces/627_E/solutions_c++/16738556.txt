#include<cstring>
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#define rep(i,l,r) for (int i=l;i<=r;i++)
#define down(i,l,r) for (int i=l;i>=r;i--)
#define clr(x,y) memset(x,y,sizeof(x))
#define maxn 3005
#define inf int(1e9)
#define ll long long
#define mm 1000000007
using namespace std;
int n,m,cnt,k,col[maxn],pre[maxn],next[maxn],a[maxn];
ll ans,ret;
vector<int> c[maxn];
ll read(){
	ll x=0,f=1; char ch=getchar();
	while (!isdigit(ch)){if (ch=='-') f=-1; ch=getchar();}
	while (isdigit(ch)){x=x*10+ch-'0'; ch=getchar();}
	return x*f;
}

int main(){
//	freopen("in.txt","r",stdin);
	n=read(); m=read(); cnt=read(); k=read(); 
	rep(i,1,cnt){
		int x=read(),y=read();
		c[x].push_back(y);
	}
	down(i1,n,1) {
		int cnt=c[i1].size()-1;
		rep(j,0,cnt) col[c[i1][j]]++;
		int j2=0,sum=0;
		ll ret=0;
		rep(j1,1,m) {
			while (j2+1<=m&&sum<k) {
				j2++;
				sum+=col[j2];
			}
			if (sum>=k) ret+=1LL*(m-j2+1);
			sum-=col[j1];
		}
		rep(i,0,m+1) pre[i]=i-1,next[i]=i+1;
		rep(i,1,m) if (!col[i]) pre[next[i]]=pre[i],next[pre[i]]=next[i];
		rep(i,1,m) a[i]=col[i];
	//	printf("%lld\n",ret);
		for (int i2=n;i2>=i1;i2--){
			ans+=ret;
			int cnt=c[i2].size()-1;
			rep(idd,0,cnt) {
				int j=c[i2][idd];
				int l=j,r=j,sl=a[j],sr=0;
				while (next[r]<=m&&sl+sr+a[next[r]]<=k){
					sr+=a[next[r]];
					r=next[r];
				}
				while (1){
					if (sl+sr==k) ret-=1LL*(l-pre[l])*(next[r]-r);
					l=pre[l]; 
					if (l==0) break;
					sl+=a[l];
					if (sl>k) break;
					while (sl+sr>k){
						sr-=a[r];
						r=pre[r];
					}
				}
				a[j]--;
				if (!a[j]) next[pre[j]]=next[j],pre[next[j]]=pre[j];
			}
		}
		
	}
	printf("%lld\n",ans);
	return 0;
}
