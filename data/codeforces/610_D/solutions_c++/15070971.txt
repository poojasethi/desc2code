#include<bits/stdc++.h>
#define fi first
#define se second
#define pb push_back
using namespace std;
typedef pair<int,int> ii;

struct eve{
int t,s,en,ty;
bool operator <(eve a) const{
if(t!=a.t) return t<a.t;
else return ty<a.ty;
}
};eve ev[300005];
int n,m,a1,a2,b1,b2,cnt,b[400005],op[100005],e,z[100005];
long long re;
map<int,vector<ii> > x[2];
map<int,vector<ii> >::iterator co;

void up(int p,int l,int r){
if(l>b1||r<b1) return ;
if(l==r){
    b[p]=op[l]=b2;
    return ;
}
int mid=(l+r)/2;
up(2*p,l,mid);up(2*p+1,mid+1,r);
b[p]=b[2*p]+b[2*p+1];
}

int q(int p,int l,int r){
if(l>b2||r<b1) return 0;
else if(l>=b1&&r<=b2) return b[p];
int mid=(l+r)/2;
return q(2*p,l,mid)+q(2*p+1,mid+1,r);
}

int main(){
scanf("%d",&n);x[0].clear();x[1].clear();
for(int i=0;i<n;i++){
    scanf("%d%d%d%d",&a1,&b1,&a2,&b2);
    if(a1==a2) x[0][a1].pb(ii(min(b1,b2),0)),x[0][a1].pb(ii(max(b2,b1),1));
    else x[1][b1].pb(ii(min(a1,a2),0)),x[1][b1].pb(ii(max(a2,a1),1));
}re=e=n=0;
for(co=x[0].begin();co!=x[0].end();co++) z[n++]=co->fi;
for(int k=0;k<2;k++){
    a2=0;
    for(co=x[k].begin();co!=x[k].end();co++){
        vector<ii> te=co->se;
        sort(te.begin(),te.end());cnt=0;
        for(int j=0;j<te.size();j++){
            if(te[j].se==0){
                cnt++;
                if(cnt==1){
                    a1=te[j].fi;
                    if(!k) ev[e++]=(eve){a1,a2,0,0};
                }
            }else{
                cnt--;
                if(cnt==0){
                    re+=(long long)(te[j].fi-a1+1);
                    if(!k) ev[e++]=(eve){te[j].fi,a2,0,2};
                    else{
                        b1=lower_bound(z,z+n,a1)-z;
                        b2=upper_bound(z,z+n,te[j].fi)-z-1;
                        ev[e++]=(eve){co->fi,b1,b2,1};
                    }
                }
            }
        }a2++;
    }
}sort(ev,ev+e);
memset(b,0,sizeof(b));memset(op,0,sizeof(op));
for(int i=0;i<e;i++){
    if(ev[i].ty==1){
        b1=ev[i].s,b2=ev[i].en;
        re-=(long long)q(1,0,n-1);
    }
    else{
        b1=ev[i].s,b2=(ev[i].ty==0);
        up(1,0,n-1);
    }
}
cout<<re<<endl;
return 0;
}
