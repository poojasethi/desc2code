#include<bits/stdc++.h>

using namespace std;

#define int long long

int n,m,k,ans;
int ok[100005],col[100005],sum[100005],A[100005],lazy[100005];

void update(int x,int bas,int son,int v){

	int i;

	if(ok[x]!=-1){
		
		if(son-bas+1==k){
			lazy[x]+=abs(ok[x]-v);
			ok[x]=v;
		}

		else {
			
			for(i=(x-1)*k+1 ; i<=x*k ; i++){
				if(i<bas or i>son)
					col[i]=ok[x];
				else {
					col[i]=v;
					A[i]+=abs(v-ok[x]);
					sum[x]+=abs(v-ok[x]);
				}
			}
			
			ok[x]=-1;
		}

		return;
	}

	if(son-bas+1==k)
		ok[x]=v;

	for(i=bas ; i<=son ; i++){
		sum[x]+=abs(v-col[i]);
		A[i]+=abs(v-col[i]);
		col[i]=v;
	}

}

int query(int x,int bas,int son){
	
	if(son-bas+1==k)
		return sum[x]+lazy[x]*k;

	int i,ans=lazy[x]*(son-bas+1);

	for(i=bas ; i<=son ; i++)
		ans+=A[i];

	return ans;
}

main(){

	int n,m,i,j,w,l,r,x;

	cin>>n>>m;

	k=sqrt(n);

	memset(ok,-1,sizeof ok);

	for(i=1 ; i<=n ; i++)
		col[i]=i;

	for(i=1 ; i<=m ; i++){
	
		scanf("%lld %lld %lld",&w,&l,&r);

		if(w==1){
		
			scanf("%lld",&x);

			for(j=1 ; j<=r ; j+=k)
				if(l<j+k)
					update(j/k+1,max(l,j),min(r,j+k-1),x);

		}

		else{

			ans=0;

			for(j=1 ; j<=r ; j+=k)
				if(l<j+k)
					ans+=query(j/k+1,max(l,j),min(r,j+k-1));

			printf("%lld\n",ans);

		}

	}

	return 0;
}
