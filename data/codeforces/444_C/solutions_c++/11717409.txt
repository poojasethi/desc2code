#include <cmath>
#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

#define n   400005
#define I64 long long
#define For(i,a,b)  for(int i=a;i<=b;i++)

I64     Ans,sum[n],laz[n];
int     N,M,col[n],siz[n];

void    Upd(int u,int k){
        sum[u]+=1ll*abs(k-col[u])*siz[u];
        laz[u]+=abs(k-col[u]);  col[u]=k;
}
void    Dnd(int u,I64 x,int k){
        sum[u]+=1ll*x*siz[u];   laz[u]+=x;  col[u]=k;
}

void    Dn(int u){
        if  (laz[u])    Dnd(u<<1,laz[u],col[u]),Dnd(u<<1|1,laz[u],col[u]),laz[u]=0;
}
void    Up(int u){
        sum[u]=sum[u<<1]+sum[u<<1|1];
        col[u]=(col[u<<1]==col[u<<1|1])?col[u<<1]:-1;
}

void    Build(int u,int l,int r){
        siz[u]=r-l+1;   int Mid=l+r>>1;
        if  (l==r)  {col[u]=l;return;}
        Build(u<<1,l,Mid),Build(u<<1|1,Mid+1,r);col[u]=-1;
}
void    Modify(int u,int l,int r,int x,int y,int t){
        if  (x<=l&&r<=y&&col[u]!=-1)    {
            Upd(u,t);   return;
        }   int Mid=l+r>>1; Dn(u);
        if  (x<=Mid)Modify(u<<1,l,Mid,x,y,t);
        if  (y>Mid) Modify(u<<1|1,Mid+1,r,x,y,t);   Up(u);
}
void    Query(int u,int l,int r,int x,int y){
        if  (x<=l&&r<=y)    {
            Ans+=sum[u];    return;
        }   int Mid=l+r>>1; Dn(u);
        if  (x<=Mid)    Query(u<<1,l,Mid,x,y);
        if  (y>Mid)     Query(u<<1|1,Mid+1,r,x,y);
}

int     main(){
        scanf("%d%d",&N,&M);    Build(1,1,N);
        for (int k,l,r,x;M--;){
            scanf("%d%d%d",&k,&l,&r);
            if  (k==1)  scanf("%d",&x),Modify(1,1,N,l,r,x);
                else    Ans=0,Query(1,1,N,l,r),printf("%I64d\n",Ans);
        }
}