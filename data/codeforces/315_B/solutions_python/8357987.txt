n,m = map(int,raw_input().split())
l = map(int, raw_input().split())

add = 0
inc = [0 for _ in xrange(n)]

for i in xrange(m):
	t = map(int,raw_input().split())
	if t[0]==1:
		l[t[1]-1] = t[2]
		inc[t[1]-1] = -add
	elif t[0]==2:
		add += t[1]
	elif t[0]==3:
		print l[t[1]-1]+inc[t[1]-1]+add
	
