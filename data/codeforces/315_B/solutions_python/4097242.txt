#!/usr/bin
from itertools import imap
val = lambda : map(int, raw_input().split())
n,m = val()
inc = 0
arr = { k+1:f for k, f in enumerate(imap(int, raw_input().split())) }
for __ in xrange(m):
    q = val()
    if q[0] == 1:
        arr[q[1]] = q[2]-inc
    elif q[0] == 2:
        inc += q[1]
    else: print arr[q[1]] + inc