n, m = map(int, raw_input().split())
a = map(int, raw_input().split())
b = [0] * n
s = 0

for i in range(m):
  args = map(int, raw_input().split())
  t = args[0]
  if t == 1:
    v, x = args[1:]
    a[v - 1] = x
    b[v - 1] = s
  elif t == 2:
    y = args[1]
    s += y
  elif t == 3:
    q = args[1] - 1
    print a[q] + s - b[q]