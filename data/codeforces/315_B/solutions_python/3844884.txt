import sys

n, m = map(int, sys.stdin.readline().split(" "))
nums = map(int, sys.stdin.readline().split(" "))
offset = 0

for i in xrange(m):
    operation = map(int, sys.stdin.readline().split(" "))
    if operation[0] == 1:
        nums[operation[1] - 1] = operation[2] - offset
    elif operation[0] == 2:
        offset = offset + operation[1]
    else:
        print nums[operation[1] - 1] + offset