get = lambda: map(int, raw_input().split( ))

if __name__ == '__main__':
    n, m = get()
    mas = get()

    s = 0

    index = 0
    while(index < m):
        data = get()
        if data[0] == 1:
            mas[data[1]-1] = data[2]-s
        elif data[0] == 2:
            s += data[1]
        else:
            print mas[data[1]-1] + s
        index += 1