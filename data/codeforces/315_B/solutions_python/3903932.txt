q = []
n,m = raw_input().split()
n = int(n)
m = int(m)
q = raw_input().split()
s = 0
p = []
k = [] 
b = range(0,n)
for i in b:
    p.append(int(q[i]))
    k.append(0)
b = range(0, m)
for i in b:
    q = raw_input().split()
    if q[0] == "1":
        p[int(q[1])-1] = int(q[2])
        k[int(q[1])-1] = s
    elif q[0] == "2":
        s += int(q[1])
    else:
        print p[int(q[1])-1]-k[int(q[1])-1]+s
