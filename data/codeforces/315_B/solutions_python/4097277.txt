#!/usr/bin
val = lambda : map(int, raw_input().split())
n,m = val()
inc = 0
arr = val()
for _ in xrange(m):
    q = val()
    if q[0] == 1:
        arr[~-q[1]] = q[2]-inc
    elif q[0] == 2:
        inc = inc + q[1]
    else: print arr[~-q[1]] + inc