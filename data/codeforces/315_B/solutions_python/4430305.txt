n,m = map(int, raw_input().split())
a_vec = list(raw_input().split())

num_twos = 0

for i in range(m):
  task = list(raw_input().split())
  if task[0] == '1':
    a_vec[int(task[1]) - 1] = int(task[2]) - num_twos
  elif task[0] == '2':
    num_twos += int(task[1])
  elif task[0] == '3':
    print int(a_vec[int(task[1]) - 1]) + num_twos