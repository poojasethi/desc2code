F = lambda : map(int, raw_input().split())
n, m = F()
L = F()
y = 0
for _ in [0]*m:
    c = F()
    if c[0] == 1:
        L[c[1]-1] = c[2] - y
    elif c[0] == 2:
        y += c[1]
    else:
        print L[c[1]-1] + y
    
