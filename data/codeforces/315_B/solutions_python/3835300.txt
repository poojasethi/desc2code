'''
Created on 2013-6-7

@author: acer
'''
n,m = map(int, raw_input().split());
a = map(int, raw_input().split());
add = 0;
for i in range(m):
    inp = map(int, raw_input().split());
    if inp[0] == 1:
        a[inp[1] - 1] = inp[2] - add;
    elif inp[0] == 2:
        add += inp[1];
    else:
        print a[inp[1] - 1] + add;
        
            