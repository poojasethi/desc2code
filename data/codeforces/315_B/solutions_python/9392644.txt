n,m=map(int,raw_input().split())
arr=map(int,raw_input().split())
ans=[]
c=0
for i in xrange(m):
    a=map(int,raw_input().split())
    if a[0]==1:
        arr[a[1]-1]=a[2]-c
    elif a[0]==2:
        c+=a[1]
    else:
        ans.append(arr[a[1]-1]+c)
for x in ans:
    print x
