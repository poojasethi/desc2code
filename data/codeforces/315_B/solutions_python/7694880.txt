n,m=map(int,raw_input().split())
l=[int(x) for x in raw_input().split()]
ans=chk=0
for i in xrange(m):
    t=map(int,raw_input().split())
    if t[0]==1:
        l[t[1]-1]=t[2]-chk
    elif t[0]==2:
        chk+=t[1]
    else:
        print l[t[1]-1]+chk