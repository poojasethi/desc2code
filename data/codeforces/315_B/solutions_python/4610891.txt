r=lambda:map(int,raw_input().split())
n,m=r()
y=r()
a=0
for i in [0]*m:
    c=r()
    if c[0] == 3:
        print y[c[1]-1] + a
    elif c[0] == 2:
        a+=c[1]      
    else:
        y[c[1]-1]=c[2]-a