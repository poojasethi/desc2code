def main():
	nm=raw_input().split(" ")
	n=int(nm[0])
	m=int(nm[1])
	ar=map(int,raw_input().split(" "))
	inc=0
	for i in range(m):
		stop=str(raw_input())
		if stop[0]=="3":
			inop=stop.split(" ")
			inop=map(int,inop)
			print ar[inop[1]-1]+inc
		elif stop[0]=="2":
			inop=stop.split(" ")
			inop=map(int,inop)
			inc+=inop[1]
		else:
			inop=stop.split(" ")
			inop=map(int,inop)
			ar[inop[1]-1]=inop[2]-inc
	
main()