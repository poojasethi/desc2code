rd = lambda : map(int, raw_input().split())
n, m = rd()
a = rd()
acum = 0
for ii in range(m):
  op = rd()
  if op[0] == 1:
    a[op[1] - 1] = op[2] - acum
  elif op[0] == 2:
    acum += op[1]
  elif op[0] == 3:
    print a[op[1] - 1] + acum
