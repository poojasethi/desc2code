n, m = raw_input().split()
n, m = int(n), int(m)

array = raw_input().split()
array = [int(x) for x in array]

plusFactor = 0
for i in xrange(m):
    query = raw_input().split()
    query = [int(x) for x in query]
    if query[0] == 1:
        array[query[1] - 1] = query[2] - plusFactor
    elif query[0] == 2:
        plusFactor += query[1]
    else:
        print array[query[1] -1] + plusFactor
