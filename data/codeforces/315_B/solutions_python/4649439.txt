d = map(int, raw_input().split())
n, m = d[0], d[1]
add = 0
a = map(int, raw_input().split())
for i in range(m):
   op = map(int, raw_input().split())
   if op[0]==1:
      a[op[1]-1] = op[2]-add
   elif op[0]==2:
      add += op[1]
   else:
      q = op[1]-1
      print a[q]+add