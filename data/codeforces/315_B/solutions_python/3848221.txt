head = 0
n, m = map(int, raw_input().split())
nm = map(int, raw_input().split())
for i in xrange(m):
    #for j in nm:
    #    print j + head,
    #print ''
    comm = map(int, raw_input().split())
    if comm[0] == 1:
        nm[comm[1] - 1] = comm[2] - head
    elif comm[0] == 2:
        head += comm[1]
    else:
        print nm[comm[1] - 1] + head
