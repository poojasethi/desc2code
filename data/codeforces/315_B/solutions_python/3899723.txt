m = int(raw_input().split()[1])
a = map(int, raw_input().split())
add = 0
for i in xrange(m):
    op = map(int, raw_input().split())
    if op[0] == 1:
        a[op[1] - 1] = op[2] - add
    elif op[0] == 2:
        add += op[1]
    else:
        print a[op[1] - 1] + add    
