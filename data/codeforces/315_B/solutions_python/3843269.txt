n, m = map(int, raw_input().split())
a = map(int, raw_input().split())
a.insert(0, 0)
increase = 0
for i in range(m):
    b = map(int, raw_input().split())
    if b[0] == 1:
        a[b[1]] = b[2] - increase
    elif b[0] == 2:
        increase += b[1]
    else:
        print a[b[1]]+increase
