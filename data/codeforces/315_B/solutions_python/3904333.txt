import sys
br = sys.stdin

n, m = map(int, br.readline().split())
a, p = map(int, br.readline().split()), 0

for i in range(m):
  o = map(int, br.readline().split())
  if o[0] == 3:
    print a[o[1] - 1] + p
  if o[0] == 2:
    p += o[1]
  if o[0] == 1:
    a[o[1] - 1] = o[2] - p
