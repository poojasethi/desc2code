r=lambda:map(int,raw_input().split())
n,m=r()
a=r()
k=0
for i in range(m):
    x=r()
    if x[0]==1:
        a[x[1]-1]=x[2]-k
    elif x[0]==2:
        k+=x[1]
    else:
        print a[x[1]-1]+k