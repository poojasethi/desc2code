F = lambda: map(long, raw_input().split(" "))
n, m = F()
matrix = [0] + F()
increase = 0
for _ in xrange(m):
    operation = F()
    if operation[0] == 1:
        matrix[operation[1]] = operation[2]-increase
    elif operation[0] == 2:
        increase += operation[1]
    else:
        print matrix[operation[1]]+increase



