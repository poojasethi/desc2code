#include <iostream>
using namespace std;
long long a[100001],c[100001];
main(){
    int n,m,i,k=0,x,y,z;
    cin>>n>>m;
    for(i=1;i<=n;i++)
        cin>>a[i];
    while(m--){
        cin>>z;
        if(z==1)
            cin>>x>>y,a[x] = y,c[x]=k;
        if(z==2)
            cin>>x,k+=x;
        if(z==3)
            cin>>x,cout<<a[x]+k-c[x]<<endl;
    }
}
