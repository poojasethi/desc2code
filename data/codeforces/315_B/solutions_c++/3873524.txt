#include <cstdio>
using namespace std;
int d,n,m,i,q,x,y,a[1000000];
int main(){
    d=0;
	scanf("%d %d",&n,&m);
	for(i=1;i<=n;i++)scanf("%d",&a[i]);
	for(i=1;i<=m;i++){
        scanf("%d %d",&q,&x);
        if(q==3)(printf("%d\n",a[x]+d));
        else
        if(q==2)(d+=x);
        else{scanf("%d",&y);
        a[x]=y-d;
        }
	}
	return 0;
}
