#include<iostream>
using namespace std;
long long arr[100000];
int main()
{
	long long i,j,k,n,m,pl=0;	
	cin>>n>>m;
	for(i=0;i<n;i++)cin>>arr[i];
	while(m--)
	{
		cin>>k;
		if(k==2)
		{
			cin>>j;
			pl+=j;
		}
		else if(k==3)
		{
			cin>>j;
			cout<<arr[j-1]+pl<<endl;
		}
		else
		{
			cin>>i>>j;
			arr[i-1]=j-pl;
		}
	}
//	cin>>n;
	return 0;
}