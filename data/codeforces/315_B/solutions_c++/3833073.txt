#include <iostream>
using namespace std;

long n,m,i,j,x,y,a[600000],ans,t,q[600000],r[600000];

main()
{
 cin>>n>>m;
  
  for (i=1;i<=n;i++)
   cin>>a[i];
   

 for (i=1;i<=m;i++)
  {
    cin>>t; q[i]+=q[i-1];
     if (t==1) {cin>>x>>y; a[x]=y; r[x]=i; }
     if (t==2) {cin>>x;q[i]+=x;}
     if (t==3) {cin>>x; cout<<a[x] + q[i]-q[r[x]]<<endl;}
  }

}
