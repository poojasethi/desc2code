import re
R=lambda:filter(lambda s:len(s),re.split('[(,) ]+',raw_input().strip()))
f,v={},{}
for _ in xrange(input()):
  t=R()
  k=(t[1],len(t)-1)
  f[k]=(f.get(k) or [])+[t[2:]]
for _ in xrange(input()):
  a,b=raw_input().strip().split()
  v[b]=a
for _ in xrange(input()):
  t=R()
  k=(t[0],len(t))
  t=map(lambda a:v.get(a),t[1:])
  print sum(len(filter(lambda x:x[1] and ('T'==x[0] or x[0]==x[1]),zip(x,t)))==k[1]-1 for x in f[k]) if k in f else 0
