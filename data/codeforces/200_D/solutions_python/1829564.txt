#!/usr/bin/env python
n = int(raw_input().strip())
template = {}
func = {}
var = {}
for i in xrange(n):
    a = raw_input().strip().split(' ',1)[1].replace(' ','').split('(')
    if template.get(a[0],-1) == -1:
        template[a[0]] = []
    template[a[0]].append (a[1].strip(')').split(','))

n = int(raw_input().strip())
for i in xrange(n):
    x = raw_input().strip().split()
    var[x[1]] = x[0]
n = int(raw_input().strip())
for i in xrange(n):
    a = raw_input().strip().split('(')
    func[a[0].strip()] = a[1].strip(')').replace(' ','').split(',')
    res = 0
    for k in template.keys():
        p = template[k]
        if k==a[0].strip():
            for pp in p:
                fp = func[a[0].strip()]
                if len(pp)==len(fp):
                    for i in xrange(len(pp)):
                        if pp[i]!='T' and pp[i]!=var[fp[i]]:
                            break
                    else:
                        res +=1
    print res
