#include<iostream>
#include<string>
#include<map>
#include<sstream>
using namespace std;
#define N 1005

string s1[N],s2;
string na[N],ma[N][6];
string ss[N];
int cnt[N];
map<string,string>Map;
int n,m,k;

int main(){

    cin>>n;
     string aa;
     getline(cin,aa);
    for(int i=0;i<n;i++){

        s1[i]="";

        string a,b,c;

        getline(cin,a);

        istringstream bb(a);
        while(bb>>c) s1[i]+=c;
        na[i]="";
        int j;

        for( j=4;s1[i][j]!='(';j++) na[i]+=s1[i][j];
        j++;
        k=0;

        while(1)
        {
            ma[i][k]="";
            for(;s1[i][j]!=','&&s1[i][j]!=')';j++) ma[i][k]+=s1[i][j];
            k++;
            if(s1[i][j]==')') break;
            else
            j++;
        }
        cnt[i]=k;

    }

    cin>>m;
    getline(cin,aa);
    for(int i=0;i<m;i++){

        string a,b,c,d;
        getline(cin,a);
        istringstream bb(a);
        bb>>c>>d;
        Map[d]=c;
    }

    cin>>k;
    getline(cin,aa);

    for(int i=0;i<k;i++){

        s2="";
        string a,b,c;
        getline(cin,a);
        istringstream bb(a);
        while(bb>>c) s2+=c;

        int num=0;

        a="";
        b="";

        int h;
        for(h=0;s2[h]!='(';h++) a+=s2[h];
        h++;
        int kk=0;
       // cout<<a<<" ";

        while(1)
        {
             ss[kk]="";
            for(;s2[h]!=','&&s2[h]!=')'&&s2[h]!=',';h++) ss[kk]+=s2[h];

           // cout<<kk<<" # "<<ss[kk]<<endl;
            kk++;
            if(s2[h]==')') break;
            else
            h++;
        }

        for(int j=0;j<n;j++){

            if(a!=na[j]||kk!=cnt[j]) continue;
            int c;

            for( c=0;c<kk;c++) if(ma[j][c]!="T"&&ma[j][c]!=Map[ss[c]]) break;
            if(c>=kk) num++;

        }
        cout<<num<<endl;
    }

}
