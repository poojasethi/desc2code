#include <iostream>
#include <cstdio>
#include <cstring>
#include <queue>
#include <list>
#include <string>
#include <algorithm>
#include <set>
#include <cmath>
#include <vector>
#include <map>
#include <iterator>
#include <sstream>
#include <fstream>
#include <list>
#include <set>
#include <stack>
#include <bitset>
#include <ctime>

#pragma comment(linker, "/STACK:256000000")

#define EPS 1e-7
#define PI 3.1415926535897932384626433832795

using namespace std;

int aabs(int a){
	if (a<0) return -a;
	return a;
}

struct myf{
	string name;
	vector <string> params;
};

int main(){
	//freopen("input.txt","rt",stdin);
	//freopen("output.txt","wt",stdout);
		string s;
	int n;
	cin>>n;
		getline(cin,s);
	myf a[1013];
	for (int i=0;i<n;i++){
		string s;
		getline(cin,s);
		stringstream ss;
		for (int j=0;j<s.size();j++){
			if (s[j]=='(') s[j]=' ';
			if (s[j]==')') s[j]=' ';
			if (s[j]==',') s[j]=' ';
		}
		ss<<s;
		ss>>a[i].name>>a[i].name;
		while (ss>>s){
			a[i].params.push_back(s);
		}
	}

	int m;
	cin>>m;
	map <string, string> b;
	for (int i=0;i<m;i++){
		string s1,s2;
		cin>>s1>>s2;
		b[s2]=s1;
	}

	int k;
	cin>>k;
		getline(cin,s);
	for (int i=0;i<k;i++){
		myf c;
		string s;
		getline(cin,s);
		stringstream ss;
		for (int j=0;j<s.size();j++){
			if (s[j]=='(') s[j]=' ';
			if (s[j]==')') s[j]=' ';
			if (s[j]==',') s[j]=' ';
		}
		ss<<s;
		ss>>c.name;
		while (ss>>s){
			c.params.push_back(b[s]);
		}
		int ans=0;
		for (int j=0;j<n;j++){
			if (a[j].params.size()==c.params.size() && a[j].name==c.name){
				bool pp=1;
				for (int jp=0;jp<c.params.size();jp++){
					if (a[j].params[jp]!="T" && a[j].params[jp]!=c.params[jp]){
						pp=0;
						break;
					}
				}
				if (pp){
					ans++;
				}
			}
		}
		cout<<ans<<endl;
	}
	return 0;
}