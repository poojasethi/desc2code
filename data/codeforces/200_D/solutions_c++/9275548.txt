#include<bits/stdc++.h>
using namespace std;
map<string,string>vari;
vector<string>proc[1010];
vector<string> split()
{
   string inp;
   getline(cin,inp);

   int len=inp.size()-1;
   for(int i=0;i<=len;i++)
   {
     if(inp[i]=='(' || inp[i]==')' || inp[i]==',')
        inp[i]=' ';
   }
   vector<string>lis;
   istringstream in(inp);
   while(in>>inp)
    lis.push_back(inp);
   return lis;
}
bool ok(int i,vector<string>&a)
{
  if(proc[i].size()!=a.size())
    return false;
  if(proc[i][0]!=a[0])
    return false;
  for(int j=1;j<a.size();j++)
  {
    if(proc[i][j]!="T" && proc[i][j]!=a[j])
        return false;
  }
  return true;
}
int main()
{
    //freopen("in.txt","r",stdin);
  int n;
  cin>>n;
   getchar();
   for(int i=0;i<n;i++)
   {
     vector<string>li=split();
      int len=li.size()-1;
      for(int j=0;j<=len;j++)
         proc[i].push_back(li[j]);
   }
   int m;
   cin>>m;
   getchar();
   for(int i=0;i<m;i++)
   {
     vector<string>li=split();
     vari[li[1]]=li[0];
   }
   int q;
   cin>>q;
   getchar();
   while(q--)
   {
      int ans=0;
      vector<string>lis=split();
          vector<string>li;
          li.push_back("void");
          li.push_back(lis[0]);
          for(int i=1;i<lis.size();i++)
            li.push_back(vari[lis[i]]);
      for(int i=0;i<n;i++)
      {

        if(ok(i,li))ans++;
      }
      cout<<ans<<endl;
   }
  return 0;
}
