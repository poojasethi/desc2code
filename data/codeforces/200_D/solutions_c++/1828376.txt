#include<iostream>
#include<cstdio>
#include<cstring> 
#include<algorithm>
#include<map>
using namespace std;
map<string,int> h,type;
int a[1010],b[1010][10],c[1010],d[1010],n,m,t,tot,i,j,k,tp,ans[1010],nam;
char s[20],na[20];

void get(char s[20],char end)
{
    int n=0; char ch;
    while(ch=getchar())
        if(ch==end) break;
        else if(ch!=' ') s[n++]=ch;
    s[n]=0;
}

bool get(char s[20],char end,char eoln)
{
    int n=0; char ch;
    while(ch=getchar())
        if(ch==end||ch==eoln) break;
        else if(ch!=' ') s[n++]=ch;
    s[n]=0;
    return ch==end;
}

int main()
{
    cin>>n;
    for(i=1;i<=n;i++)
    {
        scanf("\nvoid");
        get(s,'(');
        if(!h[s]) h[s]=++tot;
        a[i]=h[s];
        while(get(s,',',')'))
        {
            tp=0;
            if(s[0]=='i') tp=1;
            if(s[0]=='s') tp=2;
            if(s[0]=='d') tp=3;
            b[i][++c[i]]=tp;
        }
        tp=0;
        if(s[0]=='i') tp=1;
        if(s[0]=='s') tp=2;
        if(s[0]=='d') tp=3;
        b[i][++c[i]]=tp;
    }
    scanf("%d\n",&m);
    for(i=1;i<=m;i++)
    {
        scanf("%s%s",s,na);
        if(s[0]=='i') tp=1;
        if(s[0]=='s') tp=2;
        if(s[0]=='d') tp=3;
        type[na]=tp;
    }
    scanf("%d\n",&m);
    for(i=1;i<=m;i++)
    {
        get(s,'('); t=0; nam=h[s]; ans[i]=0;
        while(get(s,',',')')) d[++t]=type[s];
        d[++t]=type[s];
        for(j=1;j<=n;j++)
            if(nam==a[j]&&t==c[j])
            {
                for(k=1;k<=t;k++)
                    if(b[j][k]&&b[j][k]!=d[k]) break;
                if(k<=t) continue;
                ans[i]++;
            }
        scanf("\n");
    }
    for(i=1;i<=m;i++) printf("%d\n",ans[i]);
    return 0;
}