#include "cstdio"
#include "string"
#include "map"
#include "vector"
#include "sstream"
#include "iostream"
using namespace std;
typedef vector<string> vec;
map<string,vector<vec> > mp;
int main()
{
	int i,n,j,m,k;
	string s,name,tmp;
	bool first;
	istringstream iss;
	vec v;
	scanf("%d",&n);
	getchar();
	for(i=0;i<n;i++)
	{
		getline(cin,s);
		for(j=0;j<s.length();j++)
		{
			if(s[j]=='('||s[j]==')'||s[j]==',') s[j]=' ';
		}
		iss.clear();
		iss.str(s);
		iss>>name;
		iss>>name;
		v.clear();
		while(iss>>tmp){
			v.push_back(tmp);
		}
		mp[name].push_back(v);
	}
	scanf("%d",&m);
	getchar();
	map<string,string> mpp;
	for(i=0;i<m;i++)
	{
		getline(cin,s);
		iss.clear();
		iss.str(s);
		iss>>tmp>>name;
		mpp[name]=tmp;
	}	
	scanf("%d",&k);
	getchar();
	for(i=0;i<k;i++)
	{
		getline(cin,s);
		for(j=0;j<s.length();j++)
		{
			if(s[j]=='('||s[j]==')'||s[j]==',') s[j]=' ';
		}
		iss.clear();
		iss.str(s);
		iss>>name;
		v.clear();
		while(iss>>tmp){
			v.push_back(mpp[tmp]);
		}
		int res=0;
		if(mp[name].size())
		{
			for(int t=0;t<mp[name].size();t++)
			{
				vec tp=mp[name][t];
				if(v.size()!=tp.size()) continue;
				else{
					int x;
					for(x=0;x<tp.size();x++){
						if(tp[x]=="T"||tp[x]==v[x]) continue;
						else break;
					}
					if(x>=tp.size()) res++;
				}
			}
		}
		printf("%d\n",res);
	}
	return 0;
}
 	 				  		  		 		  	 					 		