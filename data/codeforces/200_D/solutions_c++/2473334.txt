#include <cstdio>
#include <cstdlib>
#include <string>
#include <algorithm>
#include <iostream>
#include <map>
using namespace std;
struct Func
{
	string s,a[6];
	int tot;
	inline bool cmp(Func &x)
	{
//		cout<<s<<" "<<x.s<<" "<<tot<<" "<<x.tot<<endl;
		if(x.s!=s) return 0;
		if(x.tot!=tot) return 0;
		for(int i=1;i<tot;++i) if(a[i]!="T"&&a[i]!=x.a[i]) {return 0;}
		return 1;
	}
}f[1010],g;	
map <string,string> Var;
int n,m,q;	
void del(string &x,const char c)
{
	for(string::iterator it=x.begin();it!=x.end();)
	{
		if(*it==c) it=x.erase(it);
		else ++it;
	}
}
string get;
int main()
{
	scanf("%d",&n); getchar();
	for(int i=1;i<=n;++i)
	{
		getline(cin,get); 
		del(get,' ');
//		cout<<get<<endl;
		int bd=get.size(),p=4;
		char *it=&get[4]; 
		for(;*it!='(';++it)	f[i].s.push_back(*it);
		f[i].tot=1;
		for(++it;*it;++it)
		{
			if(*it==','||*it==')') ++f[i].tot;//cout<<f[i].a[f[i].tot-1]<<endl;
			else f[i].a[f[i].tot].push_back(*it);
		}
	}
	scanf("%d",&m); //cout<<m<<endl;
	for(int i=1;i<=m;++i)
	{
		string sb;
		cin>>get>>sb; Var[sb]=get;
//		cout<<get<<" "<<sb<<endl;
	}
	scanf("%d",&q); //cout<<q<<endl;
	getchar();
	for(int i=1;i<=q;++i)
	{
		g.s.clear();
		for(int j=0;j<=5;++j) g.a[j].clear();
		getline(cin,get);
		del(get,' ');
//		cout<<get<<endl;
		int bd=get.size();
		char *it=&get[0]; 
		for(;*it!='(';++it)	g.s.push_back(*it);
		g.tot=1;
		for(++it;*it;++it)
		{
			if(*it==','||*it==')') ++g.tot;//cout<<g.a[g.tot-1]<<endl;
			else g.a[g.tot].push_back(*it);
		}
		for(int i=1;i<g.tot;++i) g.a[i]=Var[g.a[i]];
		int ans=0;
		for(int j=1;j<=n;++j) ans+=f[j].cmp(g);
		printf("%d\n",ans);
	}
//	while(1);
        return 0;
}
	
	
	