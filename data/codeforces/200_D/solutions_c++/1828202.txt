#include <iostream>
#include <string>
#include <vector>
#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <map>
#include <sstream>
using namespace std;

struct Func {
	string nn;
	vector<string> ty; // 0 for 'T', 1 for int, 2 for double, 3 for string
};

int n, m, k;

map<string, string> var;
Func func[1010];

int main() {
	string str;
	cin >> n;
	cin.ignore();
	for (int i = 0; i < n; i++) {
		getline(cin, str);

		int len = str.length();
		// remove void
		for (int j = 0; j < len - 4; j++)
			if (str[j] == 'v' && str[j + 1] == 'o' && str[j + 2] == 'i' && str[j + 3] == 'd') {
				str[j] = str[j + 1] = str[j + 2] = str[j + 3] = ' ';
				break;
			}
		
		for (int j = 0; j < len; j++)
			if (str[j] == '(' || str[j] == ')' || str[j] == ',')
				str[j] = ' ';

		stringstream ss(str);

		string nn, tt;
		ss >> nn;
		func[i].nn = nn;
		while (ss >> tt)
			func[i].ty.push_back(tt);
	}

	cin >> m;
	cin.ignore();
	for (int i = 0; i < m; i++) {
		getline(cin, str);
		stringstream ss(str);
		string s1, s2;
		ss >> s1 >> s2;
		var[s2] = s1;
	}

	cin >> k; cin.ignore();
	while (k--) {
		getline(cin, str);
		int len = str.length();
		for (int j = 0; j < len; j++)
			if (str[j] == '(' || str[j] == ')' || str[j] == ',')
				str[j] = ' ';
		
		stringstream ss(str);
		string nn, vv;
		vector<string> ty;
		ss >> nn;
		while (ss >> vv) {
			ty.push_back(var[vv]);
		}

		int res = 0;
		for (int i = 0; i < n; i++)
			if (nn == func[i].nn && ty.size() == func[i].ty.size()) {
				bool match = true;
				int sz = ty.size();
				for (int j = 0; j < sz; j++)
					if (!(func[i].ty[j] == ty[j] || func[i].ty[j] == "T"))
						match = false;

				if (match)
					res++;
			}
		cout << res << endl;
	}
}

