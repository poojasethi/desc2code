#include<stdio.h>
#include<string.h>
#include<string>
#include<sstream>
#include<map>
#include<iostream>
using namespace std;
map<string,int>se;
struct  node{
	string name;
	int cnt;
	int flag[10];
}s[1005];
char str[10000];
int main(){
	    int n,m,K;
		int i,j,k;
	    while(scanf("%d",&n)!=EOF){
			gets(str);
			se.clear();
			for(i=0;i<n;i++){
				gets(str);
				int len=strlen(str);
				for(j=0;j<len;j++)
					if(str[j]==')'||str[j]=='('||str[j]==',')str[j]=' ';
				istringstream sin(str);
				k=0;
				s[i].cnt=0;
				string temp;
				sin>>temp;
				sin>>s[i].name;
				while(sin>>temp){
					int tmp=0;
					if(temp=="int")tmp=1;
					else if(temp=="string")tmp=2;
					else if(temp=="double")tmp=3;
					s[i].flag[s[i].cnt++]=tmp;
				}
			}
			scanf("%d",&m);
			gets(str);
			while(m--&&gets(str)){
				istringstream sin(str);
				string temp,A;
			    sin>>temp>>A;
				int tmp=0;
				if(temp=="int")tmp=1;
				else if(temp=="string")tmp=2;
				else if(temp=="double")tmp=3;
				se[A]=tmp;
			}
			scanf("%d%*c",&K);
			while(K--&&gets(str)){
				int len=strlen(str);
				for(j=0;j<len;j++)
					if(str[j]==')'||str[j]=='('||str[j]==',')str[j]=' ';
				istringstream sin(str);
				node now;
				sin>>now.name;
				string temp;
				now.cnt=0;
				while(sin>>temp){
					now.flag[now.cnt++]=se[temp];
				}
				int ans=0;
				for(i=0;i<n;i++){
					if(s[i].name!=now.name||s[i].cnt!=now.cnt)continue;
					for(j=0;j<now.cnt;j++)
						if(!(s[i].flag[j]==0||s[i].flag[j]==now.flag[j]))break;
					if(j>=now.cnt)ans++;
				}
				printf("%d\n",ans);
			}
		}
		return 0;
}