#include<cstdio>
#include<cstring>
#include<iostream>
#include<algorithm>
#include<vector>
#include<map>
using namespace std;
int ans,n,m,t,a[10][10],f[1100][1100];
int B(int x){return 1<<x;}
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    cin>>n>>m>>t;
    while(m--){
        int x,y;
        cin>>x>>y;
        x--;y--;
        a[x][y]=a[y][x]=f[B(x)|B(y)][B(x)|B(y)]=1;
    }
    for(int i=0;i<B(n);i++)
        for(int j=i;j;j=(j-1)&i)
            if(f[i][j]){
                for(int x=0;x<n;x++)if(i&B(x))
                    for(int y=0;y<n;y++)if(~i&B(y)&&a[x][y]){
                        int o=j|B(y);
                        if(j&B(x))o^=B(x);
                        if(o&(B(n)-B(y+1)))continue;
                        f[i|B(y)][o]+=f[i][j];
                    }
            }
    for(int i=0;i<B(n);i++)
        if(__builtin_popcount(i)==t)ans+=f[B(n)-1][i];
    cout<<ans;
    return 0;
}
