#include<cstdio>
#define rep(i,n) for(int i=0;i<n;i++)
#define For(i,n) for(int i=1;i<=n;i++)
int n,m,u,v,t,k,sz,ans,p[11],g[11][11],f[1024][1024],cnt[1024];
int main()
{
    scanf("%d%d%d",&n,&m,&k);
    rep(i,n) p[i]=1<<i;
    rep(i,m)
    {
        scanf("%d%d",&u,&v);
        g[--u][--v]=g[v][u]=1;
        f[p[u]|p[v]][p[u]|p[v]]=1;
    }
    sz=(1<<n)-1;
    For(i,sz)
        for(int j=i;j;--j&=i)
            if (f[i][j])
                rep(u,n)
                    rep(v,n)
                        if (i&p[u] && ~i&p[v] && g[u][v])
                        {
                            t=j & ~p[u] | p[v];
                            if ((t>>v)==1)
                                f[i|p[v]][t]+=f[i][j];
                        }
    For(i,sz) cnt[i]=cnt[i-(i&-i)]+1;
    rep(i,sz+1) if (cnt[i]==k) ans+=f[sz][i];
    printf("%d\n",ans);
    return 0;
}
