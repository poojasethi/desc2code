#include<cstdio>

long long f[1024][1024];
bool g[10][10];
int n,m,p;

int main()
{
    scanf("%d%d%d",&n,&m,&p);
    for (int i=0,u,v;i<m;i++)
    {
        scanf("%d%d",&u,&v);u--;v--;
        g[u][v]=g[v][u]=1;
    }

    for (int i=0;i<n;i++)
    for (int j=0;j<n;j++)
    if (g[i][j]) f[(1<<i)+(1<<j)][(1<<i)+(1<<j)]=1;

    for (int i=0;i<(1<<n);i++)
    for (int j=0;j<(1<<n);j++)
    if (!f[i][j])
    for (int k=0;k<n;k++)
    if (j&(1<<k))
    {
        for (int l=0;l<n;l++)
        if (g[k][l] && !(j&(1<<l)) && (i&(1<<l))) 
            f[i][j]+=f[i^(1<<k)][j^(1<<k)]+f[i^(1<<k)][j^(1<<k)^(1<<l)];
        break;
    }

    long long res=0;
    for (int i=0;i<(1<<n);i++)
    if (f[(1<<n)-1][i])
    {
        int c=0;
        for (int j=0;j<n;j++)
        if (i&(1<<j)) c++;
        if (c==p) res+=f[(1<<n)-1][i];
    }
    printf("%I64d\n",res);
}
