#include<cstdio>
#include<iostream>
#include<string>
#include<cstring>
using namespace std;

int n,m,k;
int f[1100][1100],c[1100],ga[20][20];
long long ans=0;

void work()
{int i,j,p,l,s,x;
 
 s=(1<<n);
 
 for(i=1;i<s;i++)
 	c[i]=c[i-(i&(-i))]+1;
 
 for(i=1;i<=n;i++)
 	if(ga[1][i])
		f[(1<<(i-1))+1][(1<<(i-1))+1]=1;
	 
 for(i=1;i<s;i++)
 	for(j=1;j<=i;j++)
		if((i&j)==j && f[i][j]>0)
		{	//cout<<i<<" "<<j<<" "<<"## "<<f[i][j]<<endl;
			for(p=1;p<=n;p++)
				if(i&(1<<(p-1)))
				{	for(l=1;l<=n;l++)
						if(ga[p][l] && (!(i&(1<<(l-1)))))
						{	x=j-(j&(1<<(p-1)))+(1<<(l-1));
							//cout<<j<<" "<<p<<" "<<l<<" "<<x<<endl;
							if(x<(1<<l))
								f[i+(1<<(l-1))][x]+=f[i][j];
						}
				}
		}
		
 for(i=0;i<s;i++)
 	if(c[i]==k)
	 	ans+=f[s-1][i];	 		
}
				
int main()
{int i,j,x,y;
 
 scanf("%d%d%d",&n,&m,&k);
 
 for(i=1;i<=m;i++)
 {	scanf("%d%d",&x,&y);
 	ga[x][y]=1;
 	ga[y][x]=1;
 }
 
 work();
 
 cout<<ans<<endl;
 
 return 0;
}