#include<bits/stdc++.h>
using namespace std;
bool am[20][20];
int dp[(1<<10)+10][(1<<10)+10];
int ok(int n)
{
	int ans=0;
	while(n%2==0)ans++,n/=2;
	return ans;
}
int main()
{
	int n,m,k,ans=0;
	cin>>n>>m>>k;
	while(m--)
	{
		int v,u;
		cin>>v>>u;
		v--;
		u--;
		am[v][u]=true;
		am[u][v]=true;
	}
	int tmp;
	for(int i=1;i<(1<<n);i++)
		for(int j=1;j<(1<<n);j++)
		{
			if((i|(i^j))-i)
				dp[i][j]=0;
			else if(__builtin_popcount(i)==1)
				dp[i][j]=(i==j);
			else if(__builtin_popcount(i)==2)
				dp[i][j]=(i==j)&(am[ok(tmp=(i&-i))][ok((i-tmp)&(tmp-i))]);
			else
				for(int l=1;l<(1<<n);l*=2)
					if(am[ok(j&-j)][ok(l)]&((j|l)!=j)&((i&l)==l))
						dp[i][j]+=dp[i-(j&-j)][j-(j&-j)]+dp[i-(j&-j)][j-(j&-j)+l];
		}
	for(int i=0;i<(1<<n);i++)
		if(__builtin_popcount(i)==k)
			ans+=dp[(1<<n)-1][i];
	cout<<ans<<endl;
	return 0;
}
	 				 		 	 	  	 	  	 		  			 	