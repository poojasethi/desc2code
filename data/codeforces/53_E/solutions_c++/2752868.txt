#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

int n, m, k, c[13][13], ans, f[1111][1111];

int main()
{
	ios::sync_with_stdio(false);
	cin >> n >> m >> k;
	for (int i = 1, A, B; i <= m; ++i)
	{
		cin >> A >> B;
		++c[A][B], ++c[B][A];
		f[1<<(A-1)|1<<(B-1)][1<<(A-1)|1<<(B-1)] = c[A][B];
	}
	for (int i = 1; i < 1 << n; ++i)
		for (int j = i; j; --j &= i)
			if (f[i][j])
				for (int u = 1; u <= n; ++u)
					if (i >> (u - 1) & 1)
						for (int v = 1; v <= n; ++v)
							if (c[u][v] && !(i >> (v - 1) & 1))
							{
								int t = (j & ~(1 << (u - 1))) | (1 << (v - 1));
								if (!(t >> v))
									f[i|1<<(v-1)][t] += f[i][j] * c[u][v];
							}
	for (int i = 1; i < 1 << n; ++i)
		if (__builtin_popcount(i) == k)
			ans += f[(1<<n)-1][i];
	cout << ans << endl;
	return 0;
}
