#include<cstdio>

int a[210],b[210],n,m,K,Max1,Max2,Cnt1,Cnt2;

long long f[1100000],Ans;

int main()
{
	int i,j,k;
	scanf("%d%d%d",&n,&m,&K);
	for(i=0;i<m;i++)
	{
		scanf("%d%d",a+i,b+i);
		a[i]--;
		b[i]--;
		f[(1<<2*a[i])^(1<<2*b[i])]=1;
		a[i+m]=b[i];
		b[i+m]=a[i];
	}
	m*=2;
	for(i=0;i<(1<<2*n);i++)if(f[i])
	{
	//	for(k=0;k<n;k++)printf("%d",i>>2*k&3);
	//	printf("--%d %I64d\n",i,f[i]);
		Cnt1=Cnt2=0;
		Max1=Max2=-1;
		for(k=0;k<n;k++)
			if((i>>2*k&3)==1)
			{
				if(k>Max1)
				{
					Max2=Max1;
					Max1=k;
				}
				else if(k>Max2)
					Max2=k;
				Cnt1++;
			}
			else if((i>>2*k&3)==2)
				Cnt2++;
		if(Cnt1+Cnt2==n&&Cnt1==K)
			Ans+=f[i];
		for(k=0;k<m;k++)
			if((i>>(2*a[k])&3)&&!(i>>(2*b[k])&3))
			{
				if(b[k]>Max1||((a[k]==Max1)&&(b[k]>Max2)))
				{
					if((i>>2*a[k]&3)==1)
						f[i^(3<<2*a[k])^(1<<2*b[k])]+=f[i];
					else
						f[i^(1<<2*b[k])]+=f[i];
				}
			}
	}
	printf("%I64d\n",Ans);
	return 0;
}
