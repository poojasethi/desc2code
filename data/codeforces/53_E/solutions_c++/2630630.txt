#include<iostream>
using namespace std;
int a[12][12],f[1024][1024],n,m,t,i,j,k,l,ans,x,y;
int main()
{
	cin>>n>>m>>t;
	for(i=1;i<=m;i++)
	{
		cin>>x>>y;
		a[x][y]=a[y][x]=1;
		f[1<<x-1|1<<y-1][1<<x-1|1<<y-1]=1;
	}
	for(i=1;i<1<<n;i++)
		for(j=i;j;j=(j-1)&i) if(f[i][j])
			for(k=1;k<=n;k++) if(i>>k-1&1)
				for(l=1;l<=n;l++) if(!(i>>l-1&1)&&a[k][l])
					if(!((m=j&((1<<n)-1-(1<<k-1))|(1<<l-1))&((1<<n)-(1<<l))))
						f[i|1<<l-1][m]+=f[i][j];
	for(i=0;i<1<<n;i++)
	{
		for(j=k=0;j<n;j++) if(i>>j&1) k++;
		if(k==t) ans+=f[(1<<n)-1][i];
	}
	cout<<ans<<endl;
	return 0;
}