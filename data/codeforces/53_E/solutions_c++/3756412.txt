#include <cstdio>
#include <cstring>
#include <iostream>
using namespace std;
int n,m,k,map[15][15];
long long f[1100][1100];
int cnt[1100];
long long calc(int i, int j)
{
	if (i==0) return 1;
	if (j==0) return 0;
	if (f[i][j]!=-1) return f[i][j]; int _i=i,_j=j;
	long long res=0;
	for (int x=0; x<n; x++) if ((1<<x)&j)
	{
		i^=(1<<x); j^=(1<<x);
		for (int y=0; y<n; y++)
			if (map[x][y] && ((1<<y)&i))
			{
				if ((1<<y)==i && (1<<y)==j)
				{
					return f[_i][_j]=res=1;
				}
				if (!((1<<y)&j))
					res+=calc(i,j)+calc(i,j^(1<<y));
			}
		break;
	}
	return f[_i][_j]=res;
}

int main()
{
        //freopen("input.txt","r",stdin);
        //freopen("output.txt","w",stdout);
	scanf("%d%d%d",&n,&m,&k);
	for (int i=1; i<=m; ++i)
	{
		int x,y;
		scanf("%d%d",&x,&y); x--; y--;
		map[x][y]=map[y][x]=1;
	}
	memset(f,-1,sizeof(f));
	long long ans=0;
	for (int i=0; i<1<<n; i++)
	for (int j=0; j<n; j++)
		if (i&(1<<j)) cnt[i]++;
	for (int i=0; i<1<<n; i++)
		if (cnt[i]==k) ans+=calc((1<<n)-1,i);
	
	cout<<ans<<endl;
	return 0;
}