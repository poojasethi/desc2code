#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <algorithm>

#define N 10
#define lowbit(x) ((x)&(-(x)))

using namespace std;

int n, m, k, g[N][N], f[1<<N][1<<N], cnt[1<<N];

int main() {
#ifndef ONLINE_JUDGE
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
#endif
	scanf("%d%d%d", &n, &m, &k);
	for (int i=1;i<=m;i++) {
		int x, y; scanf("%d%d", &x, &y);
		x--, y--;
		f[(1<<x)|(1<<y)][(1<<x)|(1<<y)] ++;
		if (x > y) swap(x, y);
		g[x][y] = 1;
		g[y][x] = 1;
	}
	for (int i=0;i<1<<n;i++)
		for (int j=0;j<1<<n;j++) if ((j&i)==j && f[i][j]) {
			for (int pi=0;pi<n;pi++)
				for (int pj=0;pj<n;pj++)
					if (g[pi][pj] && (i&(1<<pi)) && !(i&(1<<pj)) && !((j&(~(1<<pi))^(1<<pj))>>(pj+1)))
						f[i|(1<<pj)][j&(~(1<<pi))^(1<<pj)] += f[i][j];
		}
	cnt[0] = 0; int ans = 0;
	for (int i=1;i<1<<n;i++) cnt[i] = cnt[i-lowbit(i)] + 1;
	for (int i=0;i<1<<n;i++)
		if (cnt[i] == k)
			ans += f[(1<<n)-1][i];
	printf("%d\n", ans);
	return 0;
}
