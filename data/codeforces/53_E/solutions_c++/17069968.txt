#include<cstdio>
using namespace std;
long long ans,dp[1200][1200];
int cnt[1200];
int adj[100][100],x1,x2;
int n,m,k,tot;
int main()
{
	for (int i=1;i<=1024;i++)
	{
		cnt[i]=cnt[i-(i&(-i))]+1;
	}
	scanf("%d %d %d",&n,&m,&k);
	for (int i=1;i<=m;i++)
	{
		scanf("%d %d",&x1,&x2);
		x1--;x2--;
		adj[x1][x2]=1;
		adj[x2][x1]=1;
		dp[(1<<x1)+(1<<x2)][(1<<x1)+(1<<x2)]=1;
	}
	tot=(1<<n)-1;
	for (int i=3;i<=tot;i++)
	{
		for (int j=i;j!=0;j=((j-1)&i))
		{
			if(dp[i][j]!=0)
			{
	//			printf("%d %d %d\n",i,j,dp[i][j]);
				for (int ii=0;ii<n;ii++)
				{
					if((i&(1<<ii))!=0)
					{
						for (int jj=0;jj<n;jj++)
						{
							if(ii!=jj&&(i&(1<<jj))==0&&adj[ii][jj]==1)
							{
								int tmp=j;
								if((j&(1<<ii))!=0)tmp-=(1<<ii);
								tmp+=(1<<jj);
								if((tmp&(-tmp))==(1<<jj))
								dp[i+(1<<jj)][tmp]+=dp[i][j];;
							}
						}
					}
				}
			}
		}
	}
	for (int i=1;i<=tot;i++)
	{
		if(cnt[i]==k)
		{
			ans+=dp[tot][i];
		}
	}
	printf("%I64d\n",ans);
	return 0;
}