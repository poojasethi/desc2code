#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

int dp[1025][1025],g[10][10],ct[1025];
#define two(i) (1<<(i))

int main()
{
    for(int i = 0; i < 1024; i++)
        for(int t = i; t > 0; t-=t&-t)ct[i]++;
    int n,m,K;scanf("%d%d%d",&n,&m,&K);
    for(int i = 0; i < m; i++)
    {
        int x,y;scanf("%d%d",&x,&y);x--;y--;
        g[x][y]=g[y][x]=1;
        dp[two(x)|two(y)][two(x)|two(y)]=1;
    }
    for(int i = 0; i < two(n); i++)
        for(int s = i; s > 0; s=(s-1)&i)
            for(int j = 0; j < n; j++)if(two(j)&i)
                for(int k = 0; k < n; k++)if(!(two(k)&i) && g[j][k])
                {
                    int ns = s|two(k);
                    if(two(j)&s)ns^=two(j);
                    if(!((two(k)-1)&ns))dp[i|two(k)][ns] += dp[i][s];
                }
    int ret = 0;
    for(int i = 0; i < two(n); i++)
        if(ct[i]==K)ret+=dp[two(n)-1][i];
    printf("%d\n",ret);

    return 0;
}
