#include<iostream>
#include<cstdio>
using namespace std;
int num,tmp,k,x,y,n,m,i,j,tt,ma[20][20],xx,yy;
long long ans,f[1025][1025];
int main()
{
//	freopen("1.in","r",stdin);
//	freopen("1.out","w",stdout);
	scanf("%d%d%d",&n,&m,&k);
	for(i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		ma[x][y]=ma[y][x]=1;
		f[(1<<(x-1))+(1<<(y-1))][(1<<(x-1))+(1<<(y-1))]+=1;
	}
	for(i=0;i<=(1<<n)-1;i++)
		for(j=1;j<=i;j++)
			if (i|j==i&&f[i][j]!=0)
				for(xx=1;xx<=n;xx++)
					if (i&(1<<xx-1))
						for(yy=1;yy<=n;yy++)
						if (ma[xx][yy]&&(!(i&(1<<(yy-1)))))
						{
								if((j>>(xx-1))%2==1)
								{
									if ((1<<yy)<=j-(1<<(xx-1))+(1<<(yy-1))) continue;
									f[i+(1<<(yy-1))][j-(1<<(xx-1))+(1<<(yy-1))]+=f[i][j];
								}
								else
								{
									if ((1<<yy)<=j+(1<<(yy-1))) continue;
									f[i+(1<<(yy-1))][j+(1<<(yy-1))]+=f[i][j];
								}
						}
	for(i=1;i<=(1<<n)-1;i++)
	{
		num=0;
		for(j=i;j>0;j/=2)
			if(j%2==1) num++;
		if (num==k)
		ans+=f[(1<<n)-1][i];	
	}
	cout<<ans;
}