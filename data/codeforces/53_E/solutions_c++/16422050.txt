#include<cstdio>
#include<queue>
using namespace std;
#define mp make_pair
#define fi first
#define se second
const int N=11,M=1<<11;
int f[M][M],ans,n,m,k,x,y;
bool a[N][N],vis[M][M]; 
queue< pair<int,int> > q; 
int count(int x){
	int t=0;
	for(int i=0;i<n;i++)
	 if (x&(1<<i)) t++;
	return t;
}
int main(){
	scanf("%d%d%d",&n,&m,&k);
	for (int i=1;i<=m;i++) scanf("%d%d",&x,&y),a[x][y]=a[y][x]=1; 
	q.push(mp(1,1));vis[1][1]=1;f[1][1]=1;
	while (!q.empty()){
		int u=q.front().fi,v=q.front().se;
		if (count(v)==k && u==(1<<n)-1) ans+=f[u][v];
		q.pop();
		for (int i=1;i<=n;i++)
		 if (u&(1<<(i-1))){
		 	for (int j=1;j<=n;j++)
		 	 if (a[i][j] && i!=j && !(u&(1<<(j-1)))){
		 	 	int t1=u+(1<<(j-1)),t2=v+(1<<(j-1));
		 	 	if (u!=1) t2&=(~(1<<(i-1)));
		 	 	if (t2>>j) continue;
		 	 	if (!vis[t1][t2]) vis[t1][t2]=1,q.push(mp(t1,t2));
		 	 	f[t1][t2]+=f[u][v];
			  }
		 }
	}
	printf("%d",ans);
	return 0;
}
