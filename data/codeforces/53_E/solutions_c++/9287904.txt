#include<cstdio>
using namespace std;
int n,m,K,i,j,k,a[11][1100],A[1100],B[1100],C[1100],x,y,t;
long long f[1100][1100],ans;
int main()
{
    scanf("%d%d%d",&n,&m,&K);
    for(i=1,A[0]=1;i<=n;i++)A[i]=A[i-1]<<1,B[A[i]]=i;
    for(i=1;i<A[n];i++)C[i]=C[i-(i&(-i))]+1;
    for(i=1;i<=m;i++)
    {
        scanf("%d%d",&x,&y);x--;y--;
        for(j=1;j<A[n];j++)if(j>>y&1)a[x][j]++;
        for(j=1;j<A[n];j++)if(j>>x&1)a[y][j]++;
    }
    for(i=1;i<A[n];i++)
    {
        if(C[i]==1){f[i][i]=1;continue;}
        if(C[i]==2){f[i][i]=a[B[i&(-i)]][i];continue;}
        for(j=i;j;j=(j-1)&i)
        {
            t=j&(-j);f[i][j]+=f[i-t][j-t]*a[B[t]][i^j];
            for(k=0;k<n;k++)if((i^j)>>k&1)f[i][j]+=f[i-t][j+(1<<k)-t]*a[B[t]][1<<k];
        }
    }for(i=1;i<A[n];i++)if(C[i]==K)ans+=f[A[n]-1][i];
    printf("%I64d\n",ans);
}