#include <cstdio>
#include <cstring>
#include <vector>

using namespace std;

int n,m,k;
int g[11][11];
int f[1<<10][1<<10];

int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(int i=1;i<=m;i++){
		int u,v;scanf("%d%d",&u,&v);
		g[u][v]=g[v][u]=1;f[(1<<u-1)|(1<<v-1)][(1<<u-1)|(1<<v-1)]=1;
	}
	for(int i=0;i<(1<<n);i++)
		for(int j=0;j<(1<<n);j++) if((i&j)==j && f[i][j])
			for(int u=1;u<=n;u++) if(i&(1<<u-1))
				for(int v=1;v<=n;v++) if(!(i&(1<<v-1)) && g[u][v]){
					int c=(j&~(1<<u-1))|(1<<v-1);
					if (!(c>>v)) f[i|(1<<v-1)][c]+=f[i][j];
				}
	int ans=0;
	for(int i=0;i<(1<<n);i++) if(__builtin_popcount(i)==k) ans+=f[(1<<n)-1][i];
	printf("%d\n",ans);
		
}
