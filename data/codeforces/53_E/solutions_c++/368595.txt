#include <iostream>
#include <cstdio>
#include <cstdlib>
using namespace std;
int f[1027][1027],g[11][11],n,m,t,c[1027],ans;
int main()
{
	cin>>n>>m>>t;
	for (int i=1;i<=m;i++)
	{
		int p,q;
		scanf("%d%d",&p,&q);
		g[p][q]=g[q][p]=1;
		f[(1<<(p-1))|(1<<(q-1))][(1<<(p-1))|(1<<(q-1))]=1;
	}
	for (int i=1;i<(1<<n);i++) c[i]=c[i>>1]+(i&1);
	for (int i=0;i<(1<<n);i++)
		for (int j=1;j<=n;j++)
			if ((1<<(j-1))&i)
				for (int k=0;k<=i;k++)
					if ((k&i)==k) 
						for (int l=1;l<=n;l++)
							if ( !((1<<(l-1))&i) && g[j][l])
							{
								int p=0;
								if ((1<<(j-1))&k) p=(k^(1<<(j-1)) )|(1<<(l-1));
									else          p=k|(1<<(l-1));
								if ( !(( (1<<(l-1))-1 )&p)) f[i|(1<<(l-1))][p]+=f[i][k];
							}
	for (int i=0;i<(1<<n);i++)
		if (c[i]==t) ans+=f[(1<<n)-1][i];
	cout<<ans;
	return 0;
}
