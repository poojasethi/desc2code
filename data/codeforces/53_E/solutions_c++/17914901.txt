#include<cstdio>
#include<cstring>
#include<iostream>
#include<cstdlib>
#include<algorithm>
using namespace std;

typedef long long LL;
int n,m,k;
int u,v;
int h[12],cnt=0;
struct edge{
	int to,next;
}G[210];
int Num[1024];
LL f[1024][1024];

void add(int x,int y){
	++cnt;G[cnt].to=y;G[cnt].next=h[x];h[x]=cnt;
}

int main(){
	scanf("%d%d%d",&n,&m,&k);
	for(int i=1;i<=m;++i){
		scanf("%d%d",&u,&v);
		u--;v--;
		add(u,v);add(v,u);
		f[(1<<u)|(1<<v)][(1<<u)|(1<<v)]=2;
	}
	for(int i=1;i<(1<<n);++i)Num[i]=Num[i>>1]+(i&1);
	for(int S=1;S<(1<<n);++S){
		for(int T=S;T;T=(T-1)&S){
			if(f[S][T]){
				f[S][T]/=Num[T];
				for(int i=0;i<n;++i){
					if(S>>i&1){
						for(int u=h[i];u;u=G[u].next){
							int j=G[u].to;
							if(!(S>>j&1)){
								int A=(S|(1<<j));
								int B=(T|(1<<j));
								if(B>>i&1)B^=(1<<i);
								f[A][B]+=f[S][T];
							}
						}
					}
				}
			}
		}
	}
	LL ans=0;
	for(int i=0;i<(1<<n);++i){
		if(Num[i]==k)ans+=f[(1<<n)-1][i];
	}cout<<ans<<endl;
	return 0;
}

