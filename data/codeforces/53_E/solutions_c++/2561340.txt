#include<cstdio>
#include<cstdlib>
#include<cstring>

using namespace std;

const int maxn=11;
const int maxs=1<<(maxn+1);

int n,m,k,to[maxn],f[maxs][maxs];

int count(int s)
{
	int cnt=0;
	while (s)
	{
		cnt+=s&1;
		s>>=1;
	}
	return cnt;
}

int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for (int a=1;a<=m;a++)
	{
		int s,e;
		scanf("%d%d",&s,&e);
		to[s]|=1<<(e-1);
		to[e]|=1<<(s-1);
		f[(1<<(s-1))|(1<<(e-1))][(1<<(s-1))|(1<<(e-1))]=1;
	}
	for (int nows=0;nows<(1<<n);nows++)
		for (int s=nows;s;s=(s-1)&nows)
			if (f[nows][s])
				for (int a=1;a<=n;a++)
					if (nows&(1<<(a-1)))
						for (int b=1;b<=n;b++)
							if (!(nows&(1<<(b-1))) && to[a]&(1<<(b-1)))
							{
								int news=nows|(1<<(b-1));
								int s2=(s&(~(1<<(a-1))))|(1<<(b-1));
								if (1<<b>s2) f[news][s2]+=f[nows][s];
							}
	int ans=0;
	for (int a=0;a<(1<<n);a++)
		if (count(a)==k) ans+=f[(1<<n)-1][a];
	printf("%d\n",ans);

	return 0;
}
