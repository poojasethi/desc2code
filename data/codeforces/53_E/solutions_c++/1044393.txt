#include <iostream>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)

typedef long long LL;
LL  f[1030][1030],g[20][20];

inline int two(int x){return 1<<x;}

int main(){
        int n,m,i,j,x,y,K,k;
        cin>>n>>m>>K;
        REP(i,0,m){
                cin>>x>>y;
                x--;y--;
                g[x][y]=g[y][x]=1;
                f[two(x)+two(y)][two(x)+two(y)]=1;
        }
        REP(i,0,two(n))REP(j,0,i+1)if((j|i)==i)
        REP(x,0,n)if((two(x)|i)==i)REP(y,0,n)if((two(y)|i)!=i&&g[x][y]){
                if((two(x)|j)==j) k=j-two(x)+two(y);else k=j+two(y);
                //cout<<i<<' '<<j<<' '<<x<<' '<<y<<' '<<k<<endl;
                if (((two(y)-1)&k)==0) f[i+two(y)][k]+=f[i][j];//cout<<i+two(y)<<' '<<k<<' '<<f[i+two(y)][k]<<endl;
        }
        LL ans=0;
        REP(i,0,two(n)){
                k=0;j=i;
                while (j) k+=j%2,j/=2;
                if (k==K) ans+=f[two(n)-1][i];
        }
        cout<<ans<<endl;
}
