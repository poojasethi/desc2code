#include<stdio.h>
#include<string.h>
int n,m,k,n2,f[1030][1030],a[1030],l2[1030],ans,i,u,v;
bool g[11][11];
int dp(int s,int s1)
{
    if(f[s][s1]!=-1)return f[s][s1];
    if((s1&s)!=s1)return 0;
    if(a[s]==2&&s==s1)return g[l2[s&-s]][l2[s-(s&-s)]];
    if(a[s1]>=a[s]||a[s1]<2)return 0;
    f[s][s1]=0;
    int i,l=s1&-s1,li=l2[l];
    for(i=0;i<n;i++)if((s&(1<<i))&&(~s1&(1<<i))&&g[i][li])f[s][s1]+=dp(s-l,s1-l)+dp(s-l,s1-l+(1<<i));
    return f[s][s1];
}
int main()
{
    scanf("%d%d%d",&n,&m,&k);
    n2=1<<n;
    for(i=1;i<=m;i++)
    {
        scanf("%d%d",&u,&v);
        u--;v--;
        g[u][v]=g[v][u]=1;
    }
    memset(f,-1,sizeof(f));
    for(i=1;i<n2;i++)a[i]=a[i-(i&-i)]+1;
    for(i=0;i<n;i++)l2[1<<i]=i;
    for(i=0;i<n2;i++)if(a[i]==k)ans+=dp(n2-1,i);
    printf("%d\n",ans);
    return 0;
}