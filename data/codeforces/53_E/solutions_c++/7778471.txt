#include<cstdio>
#include<algorithm>
using namespace std;
int dp[1025][1025],n,m,k,e[11][11],c[1025],ans;
int main(){
    scanf("%d%d%d",&n,&m,&k);
    for(int i=0,u,v;i<m;i++){
        scanf("%d%d",&u,&v); u--; v--;
        e[u][v] = e[v][u] = 1;
        dp[(1<<u)+(1<<v)][(1<<u)+(1<<v)] = 1;
    }
    for(int i=1;i<(1<<n);i++)
        c[i] = c[i-(i&(-i))] + 1;
    for(int i=0;i<(1<<n);i++)
        for(int j=0;j<(1<<n);j++)
            if(dp[i][j]){
                for(int k=0;k<n;k++)
                    if(i&(1<<k))
                        for(int k2=0;k2<n;k2++)
                            if(e[k][k2] && !((1<<k2)&i)){
                                int sv = (j^(((j>>k)&1)<<k))|(1<<k2);
                                if((sv&-sv) == 1<<k2)dp[i|(1<<k2)][sv] += dp[i][j];
                            }}
    for(int i=1;i<(1<<n);i++)
        if(c[i] == k)
            ans += dp[(1<<n)-1][i];
    printf("%d\n",ans);
    return 0;
}