#include <stdio.h>
#include <vector>

const int MAXN = 300005;

int n, q;

std::vector<int> A[MAXN];
int pos[MAXN];
int a[MAXN];
bool f[MAXN];

int main() {
	scanf("%d%d", &n, &q);
	int cnt = 0;
	int ans = 0;
	int L = 0;
	for (int i = 1; i <= q; i++) {
		int op, x;
		scanf("%d%d", &op, &x);
		if (op == 1) {
			A[x].push_back(++cnt);
			a[cnt] = x;
			++ans;
		} else if (op == 2) {
			while (pos[x] < (int)A[x].size()) {
				int id = A[x][pos[x]];
				ans -= !f[id];
				f[id] = 1;
				++pos[x];
			}
		} else {
			if (x > L) {
				for (int i = L + 1; i <= x; i++) {
					ans -= !f[i];
					f[i] = 1;
				}
				L = x;
			}
		}
		printf("%d\n", ans);
	}
}
