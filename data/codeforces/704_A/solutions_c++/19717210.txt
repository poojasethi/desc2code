#include<bits/stdc++.h>
using namespace std;
const int N=3e5+9;
vector<int>a[N];
int vis[N];
int main()
{
    //freopen("f.txt","r",stdin);
    int n,q,i=0,t,x,r=1,ans=0;
    scanf("%d%d",&n,&q);
    while(q--){
        scanf("%d%d",&t,&x);
        if(t==1){
            i++;
            a[x].push_back(i);
            ans++;
        }
        else if(t==2){
            for(int j=0;j<a[x].size();j++)if(!vis[a[x][j]])vis[a[x][j]]=1,ans--;
            a[x].clear();
        }
        else{
            for(;r<=x;r++)if(!vis[r])ans--,vis[r]=1;
        }
        printf("%d\n",ans);
    }
    return 0;
}
