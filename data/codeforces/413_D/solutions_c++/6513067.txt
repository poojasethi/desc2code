#include <iostream>
using namespace std;

const int MOD = 1000000007;
int N, K;
int dp[2005][1025];

int main()
{
	cin >> N >> K;
	K = 1<<(K-1);

	dp[0][0] = 1;
	for (int i = 1; i <= N; i++)
	{
		int num;
		cin >> num;
		num /= 2;

		for (int j = 0; j < K; j++)
		{
			if (j % 2 == 1 && num == 2)
				dp[i][num] = (dp[i][num] + dp[i-1][j]) % MOD;
			else if (num != 0)
				dp[i][j+num] = (dp[i][j+num] + dp[i-1][j]) % MOD;
			else
			{
				dp[i][j+1] = (dp[i][j+1] + dp[i-1][j]) % MOD;
				if (j % 2 == 1)
					dp[i][2] = (dp[i][2] + dp[i-1][j]) % MOD;
				else
					dp[i][j+2] = (dp[i][j+2] + dp[i-1][j]) % MOD;
			}
		}
		if (num == 0)
			dp[i][K] = (dp[i][K] + 2*dp[i-1][K] % MOD) % MOD;
		else
			dp[i][K] = (dp[i][K] + dp[i-1][K]) % MOD;
	}

	cout << dp[N][K] << "\n";

	return 0;
}