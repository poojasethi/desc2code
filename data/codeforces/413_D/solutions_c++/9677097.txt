#include<stdio.h>
#define M 1000000007
int dp[2][(1<<10)+1];

int main(){
    int n,k;
    scanf("%d %d",&n,&k);
    int i,j;
    for(i=0;i<=1<<(k-1);i++)dp[0][i]=0;
    dp[0][0]=1;
    for(i=0;i<n;i++){
        int x;
        scanf("%d",&x);
        int p=i%2;
        int q=(i+1)%2;
        for(j=0;j<=1<<(k-1);j++)dp[q][j]=0;
        for(j=0;j<=1<<(k-1);j++){
            if(x!=4){
                int t=j+1;
                if(t>=(1<<(k-1)))dp[q][1<<(k-1)]=(dp[q][1<<(k-1)]+dp[p][j])%M;
                else dp[q][t]=(dp[q][t]+dp[p][j])%M;
            }
            if(x!=2){
                if(j%2==1)dp[q][2]=(dp[q][2]+dp[p][j])%M;
                else{
                    int t=j+2;
                    if(t>=(1<<(k-1)))dp[q][1<<(k-1)]=(dp[q][1<<(k-1)]+dp[p][j])%M;
                    else dp[q][t]=(dp[q][t]+dp[p][j])%M;
                }
            }
        }
    }
    printf("%d\n",dp[n%2][1<<(k-1)]);
    return 0;
}