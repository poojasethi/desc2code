#include <cstdio>
#include <cstring>

const int mod = 1000000007;
const int MAX_L = 1 << 11;
const int MAX_N = 2007;

int n, k;
long long dp[MAX_N][MAX_L + 7];
int a[MAX_N];

int main() {
	scanf("%d%d", &n, &k);
	for (int i = 1; i <= n; ++i) {
		scanf("%d", &a[i]);
	}
	dp[0][0] = 1;
	long long ans = 0;
	int limit = 1 << k;
	for (int i = 1; i <= n; ++i) {
		if (a[i] == 0) ans = (ans << 1) % mod;
		if (a[i] == 0 || a[i] == 2) {
			for (int j = 0; j < limit; j += 2) {
				dp[i][j + 2] = (dp[i][j + 2] + dp[i - 1][j]) % mod;
			}
		}
		if (a[i] == 0 || a[i] == 4) {
			for (int j = 0; j < limit; j += 4) {
				dp[i][j + 4] = (dp[i][j + 4] + dp[i - 1][j]) % mod; 
			}
			for (int j = 2; j < limit; j += 4) {
				dp[i][4] = (dp[i][4] + dp[i - 1][j]) % mod;
			} 
		}
	//	printf("%d: %d\n", i, dp[i][limit]);
		ans = (ans + dp[i][limit]) % mod;
	} 
	printf("%I64d\n", ans);
	return 0;
}
 			   	  			       			 	