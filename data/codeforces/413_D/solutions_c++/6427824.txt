#include<cstdio>
#include<cstring>
#define CL(a) memset(a,0,sizeof(a))
#define rep(i,n) for(int i=0;i<n;i++)
#define MOD 1000000007
#define N 20010
#define eps 1e-9
#define LL long long
LL f[2010][4100];
int n,m,a[2010];
int main(){
	#ifndef ONLINE_JUDGE
	freopen("1.in","r",stdin);
	#endif
	scanf("%d%d",&n,&m);
	int up=1<<m;
	for(int i=1;i<=n;i++)scanf("%d",a+i);
	CL(f);f[0][0]=1;
	for(int i=1;i<=n;i++){
		if((a[i]==2)||(a[i]==0)){
			for(int j=0;j<up;j+=2){
				(f[i][j+2]+=f[i-1][j])%=MOD;
			}
			(f[i][up]+=f[i-1][up])%=MOD;
		}
//		printf("%d %d\n",i,a[i]);
//		for(int j=0;j<=up;j++)printf("%d ",f[i][j]);
//		printf("f[%d][0]=%d\n",i-1,f[i-1][0]);
		if((a[i]==4)||(a[i]==0)){
			for(int j=0;j<up;j+=4)
				(f[i][j+4]+=f[i-1][j])%=MOD;
			for(int j=2;j<up;j+=4){
				(f[i][4]+=f[i-1][j])%=MOD;
			}
			(f[i][up]+=f[i-1][up])%=MOD;
		}
//		for(int j=0;j<=up;j++)printf("%d ",f[i][j]);
	}
	printf("%d\n",f[n][up]);
	return 0;
}