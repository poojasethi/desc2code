#include<bits/stdc++.h>
using namespace std;
#define st first
#define nd second
#define mp make_pair
#define mp3(x,y,z) mp(x,mp(y,z))
#define endl '\n'
#define endll puts("")
#define mod 1000000007
#define pb push_back
#define pii pair< int , int > 
#define ort ((bas+son)/2)
#define sol (root+root)
#define sag (root+root+1)
typedef long long ll;
const int N = 2e3+500;
ll n,m,i,j,k,t,s,x,y,z,h[N],h1[N],hh[N][N],d,l,ii,jj,u;
ll g(ll x)
{
	if(!x)return 1;
	ll y=g(x/2);
	y=y*y%mod;
	if(x&1)y=2*y;
	return y%mod;
}
ll f(int x,ll y)
{
	ll &r=hh[x][y],i;
	if(x>n)return 0;
	if(r!=-1)return r;
	r=0;
	if(h[x])
	{
		if(h[x]>y)y=h[x];
		else
		{
			for(i=1;i<12 and (1<<i)<h[x];i++)
				if(y&(1<<i))
					y=0;
			y+=h[x];
		}
		if(y>=(1<<k))
			return r=g(s-h1[x]);
		return r=f(x+1,y);
	}
	else
	{
		y+=2;
		if(y>=(1<<k))
			r=g(s-h1[x]);
		else
			r=f(x+1,y);
		y-=2;
		if(y&2)y=0;
		y+=4;
		if(y>=(1<<k))
			r+=g(s-h1[x]);
		else
			r+=f(x+1,y);
		return r%=mod;
	}
}
int main()
{
	cin>>n>>k;
	for(i=1;i<=n;i++)
	{
		scanf("%lld",h+i);
		s+=!h[i];
		h1[i]=s;
	}
	memset(hh,-1,sizeof hh);
	printf("%lld\n",f(1,0));
}
