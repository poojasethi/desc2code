#include <cstdio>

#define N 2000
#define M 2048
#define MD 1000000007

int a[N + 1][M + 1], n, k, i, j, m, c, t;

int main()
{
    scanf("%d%d", &n, &k);

    m = 1 << k;

    a[0][0] = 1;

    for (i = 1; i <= n; i++)
    {
        scanf("%d", &c);
        if (!c)
            c = 6;
        if (c & 2)
            for (j = 0; j <= m; j++)
            {
                t = j + 2 <= m ? j + 2 : m;
                a[i][t] = (a[i][t] + a[i - 1][j]) % MD;
            }
        if (c & 4)
        {
            a[i][4] = (a[i][4] + a[i - 1][0]) % MD;
            a[i][4] = (a[i][4] + a[i - 1][2]) % MD;
            for (j = 4; j <= m; j++)
                if (!(j & 2))
                {
                    t = j + 4 <= m ? j + 4 : m;
                    a[i][t] = (a[i][t] + a[i - 1][j]) % MD;
                }
                else
                    a[i][4] = (a[i][4] + a[i - 1][j]) % MD;
        }
    }

    printf("%d\n", a[n][m]);

    return 0;
}
