#include <iostream>
#include <vector>
#include <cmath>
#include <map>//hi
#include <algorithm>
#include <cstdio>
#include <cstring>
using namespace std;typedef long long ll; ll dp [(1<<11)+2][2001];  ll num[2001]; 
const int MOD=pow(10,9)+7; 
#define min(a,b) (a>b) ? b : a
int main()
{
    ll a,b; cin >> a >> b; 
    for (ll g=1; g<=a; g++)
    {
        cin >> num[g]; 
    }dp[0][0]=1; 
    for (ll g=1; g<=a; g++)
    {
        for (ll y=0; y<=(1<<b); y++)
        {
            if (num[g]!=4)
            {
                dp[min(1<<b, y+2)][g]+=dp[y][g-1]; dp[min(1<<b, y+2)][g]%=MOD; 
            }
            if (num[g]!=2)
            {
                if ((y&2)!=0)
                {
                    dp[4][g]+=dp[y][g-1]; dp[4][g]%=MOD; 
                }
                else
                {
                    dp[min(1<<b, y+4)][g]+=dp[y][g-1]; dp[min(1<<b,y+4)][g]%=MOD; 
                }
            }
        }
    }
    cout << dp [1<<b][a] %MOD<< '\n'; 
    
    


}