//In the name of God
#include <iostream>
using namespace std;
const int N = 2014, mod = 1e9 + 7, K = 12;

int n, k, a[N], ans, dp[N][1 << K], sum[N];

void add(int &a, int b) { a = (a + b) % mod; }
void do_for(int i, int mask, int a) {
	if ((mask & -mask) < a)
		add(dp[i + 1][a], dp[i][mask]);
	else if (mask + a == 1 << k)
		add(ans, 1ll * dp[i][mask] * sum[i + 1] % mod);
	else
		add(dp[i + 1][mask + a], dp[i][mask]);
}
int main() {

	ios_base::sync_with_stdio(false);
	cin >> n >> k, k--;
	for (int i = 0; i < n; i++)
		cin >> a[i], a[i] /= 2;
	sum[n] = 1;
	for (int i = n - 1; i >= 0; i--)
		sum[i] = sum[i + 1] * (a[i]? 1: 2) % mod;
	dp[0][0] = 1;
	for (int i = 0; i < n; i++)
		for (int mask = 0; mask < 1 << k; mask++)
			if (a[i])
				do_for(i, mask, a[i]);
			else
				do_for(i, mask, 1), do_for(i, mask, 2);
	cout << ans << '\n';
	return 0;
}
