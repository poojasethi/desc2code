#include <iostream>

using namespace std;

typedef long long ll;

const int MAXN = 2001, MAXK = 12, MOD = 1e9 + 7;
int dp[MAXN][1 << MAXK];

int add(int x, int v) {
	return (x + v) % MOD;
}

int main() {
	int n, k, x;
	cin >> n >> k;
	int lim = 1 << k;
	dp[0][0] = 1;
	for (int i = 1; i <= n; i++) {
		cin >> x;
		for (int j = 0; j <= lim; j++) {
			if (x != 4)
				dp[i][min(lim, j + 2)] = add(dp[i][min(lim, j + 2)], dp[i - 1][j]);
			if (x != 2) {
				if (j % 4 == 0)
					dp[i][min(lim, j + 4)] = add(dp[i][min(lim, j + 4)], dp[i - 1][j]);
				else
					dp[i][4] = add(dp[i][4], dp[i - 1][j]);
			}
		}
	}
	cout << dp[n][lim] << endl;
	return 0;
}
