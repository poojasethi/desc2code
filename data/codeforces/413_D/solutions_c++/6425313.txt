#include<bits/stdc++.h>

#define rep(i,n) for(int i=0;i<(int)n;i++)
#define all(c) (c).begin(),(c).end()
#define mp make_pair
#define pb push_back
#define each(i,c) for(__typeof((c).begin()) i=(c).begin();i!=(c).end();i++)
#define dbg(x) cerr<<__LINE__<<": "<<#x<<" = "<<(x)<<endl

using namespace std;

typedef long long ll;
typedef vector<int> vi;
typedef pair<int,int> pi;
const int inf = (int)1e9;
const double INF = 1e12, EPS = 1e-9;

const int mod = (int)1e9 + 7;
int dp[2][1 << 11];
int n, m, a[2000];

int main(){
	
	cin >> n >> m;
	rep(i, n) cin >> a[i];
	
	dp[0][0] = 1;
	int cur = 0, next = 1;
	
	rep(i, n){
		memset(dp[next], 0, sizeof(dp[next]));
		
		rep(j, 1 << m) rep(k, 2){
			
			if(a[i] && (1 << k + 1) != a[i]) continue;
			if(dp[cur][j] == 0) continue;
			
			int nj = j;
			if(j < (1 << m - 1) && (j & 1) && k == 1) nj = 2;
			else nj += 1 << k;
			
			if(nj >= 1 << m - 1) nj = 1 << m - 1;
			
			(dp[next][nj] += dp[cur][j]) %= mod;
		}
		swap(cur, next);
	}
	cout << dp[cur][1 << m - 1] << endl;
	
	return 0;
}
