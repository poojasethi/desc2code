#include<cmath>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<iostream>
#include<algorithm>

#ifdef WIN32
#define orz "%I64d"
#else
#define orz "%lld"
#endif
#define N 2010
#define K 2100
#define mod 1000000007

using namespace std;
typedef long long LL;

int f[N][K],a[N],n,k;
int main()
{
    scanf("%d%d",&n,&k);
    k--;
    for (int i=1;i<=n;i++)
        scanf("%d",&a[i]),a[i]/=2;
    f[0][0]=1;
    for (int i=1;i<=n;i++)
    {
        for (int j=0;j<=(1<<k);j++)
        {
            if (f[i-1][j]==0) continue;
            if (a[i]<=1)
                f[i][j+1]=(f[i][j+1]+f[i-1][j])%mod;
            if (a[i]!=1)
            {
                if (j&1) 
                    f[i][2]=(f[i][2]+f[i-1][j])%mod;
                else
                    f[i][j+2]=(f[i][j+2]+f[i-1][j])%mod;
            }
        }
        if (a[i]==0)
            f[i][1<<k]=(f[i][1<<k]+(f[i-1][1<<k]*2)%mod)%mod;
        else
            f[i][1<<k]=(f[i][1<<k]+f[i-1][1<<k])%mod;
    }
    printf("%d\n",f[n][1<<k]);
    return 0;
}
