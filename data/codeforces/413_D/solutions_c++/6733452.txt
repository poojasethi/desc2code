#include<cstdio>

const int mod=1000000007;
void up(int &v,int x){v=(v+x)%mod;}
int f[2050][4050];
int n,k;
void gx1(int i){
  for(int j=0;j<1<<k;j++)
      up(f[i][j+1],f[i-1][j]);
  up(f[i][1<<k],f[i-1][1<<k]);
}

void gx2(int i){
  for(int j=0;j<1<<k;j++)
    if(j&1) up(f[i][2],f[i-1][j]);
    else up(f[i][j+2],f[i-1][j]);
  up(f[i][1<<k],f[i-1][1<<k]);
}

int main(){
  scanf("%d%d",&n,&k);
  f[0][0]=1;k--;
  for(int i=1;i<=n;i++){
    int x;scanf("%d",&x);
    x/=2;
    if(!x){
      gx1(i);
      gx2(i);
    }
    if(x==1) gx1(i);
    if(x==2) gx2(i);
  }
  int ans=0;
  printf("%d\n",f[n][1<<k]);
}
