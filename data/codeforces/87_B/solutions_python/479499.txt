#!/usr/bin/python
import itertools, math, os, random, re, sys
NA = -1
n = int (sys.stdin.readline ())
d = {'void' : 0}
for i in range (n):
	s = sys.stdin.readline ().split ()
	if s[0] == 'typedef':
		m = s[2]
		t = s[1]
		plus = sum ([1 for c in t if c == '*'])
		minus = sum ([1 for c in t if c == '&'])
		t = (t + 'x') [minus:-(plus + 1)]
		if not t in d:
			k = NA
		elif d[t] == NA:
			k = NA
		else:
			k = d[t] + plus - minus
		k = max (k, NA)
		d[m] = k
	elif s[0] == 'typeof':
		t = s[1]
		plus = sum ([1 for c in t if c == '*'])
		minus = sum ([1 for c in t if c == '&'])
		t = (t + 'x') [minus:-(plus + 1)]
		if not t in d:
			k = NA
		elif d[t] == NA:
			k = NA
		else:
			k = d[t] + plus - minus
		k = max (k, NA)
		if k == NA:
			print 'errtype'
		else:
			print 'void' + ('*' * k)
	else:
		assert False
