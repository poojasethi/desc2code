#!/usr/bin/python

import sys, re

n = int(sys.stdin.readline())

iserr = {}
lev = {}

for i in xrange(n):
    line = sys.stdin.readline()
    sl = line.split()
    iserr['void'] = False
    lev['void'] = 0
    if len(sl) > 0 and sl[0] in ('typedef', 'typeof'):
        oldn = sl[1].replace('&', '').replace('*', '')
        d = sl[1].count('*') - sl[1].count('&')
        if oldn not in iserr:
            iserr[oldn] = True
            lev[oldn] = 0

        if sl[0] == 'typedef':
            lev[sl[2]] = lev[oldn] + d
            iserr[sl[2]] = iserr[oldn] or lev[sl[2]] < 0
        else:
            
            if iserr[oldn] or lev[oldn] + d < 0:
                print 'errtype'
            else:
                print 'void' + '*' * (lev[oldn] + d) 
