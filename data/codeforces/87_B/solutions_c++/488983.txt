#include <iostream>
#include <cstdio>
#include <map>
using namespace std;
const int INF = 1 << 30;
string id, a, b, t;
map <string, int> m;
map <string, bool> u;
int n;
int calc(string s)
{
  int l = 0, r = 0;
  t.clear();
  for(int i = 0; i < s.size(); i++)
  {
    l += (s[i] == '&');
    r += (s[i] == '*');
    if (s[i] != '*' && s[i] != '&')
      t += s[i];
  }
  if (!u[t] || m[t] == INF || (m[t] + r - l) < 0)
    return INF;
  else
    return m[t] + r - l;
}
int main()
{
  //freopen("input.txt", "r", stdin);
  cin >> n;
  m["void"] = 0;
  u["void"] = true;
  for(int i = 0; i < n; i++)
  {
    cin >> id >> a;
    if (id == "typedef")
    {
      cin >> b;
      m[b] = calc(a);
      u[b] = u[t];
    }
    else
    {
      m[a] = calc(a);
      if (m[a] == INF)
        cout << "errtype\n";
      else
      {
        cout << "void";
        for(int j = 0; j < m[a]; j++)
          cout << '*';
        cout << '\n';
      }
    }
  }
  return 0;
}
