#include<cstdio>
#include<cstring>
#define niubo(ux,uy,xx,yy) f=s1[ux][uy]!=s1[xx][yy];if(dis[ux][uy]+f<dis[xx][yy])dis[xx][yy]=dis[ux][uy]+f,qx[++l[f]][f]=xx,qy[l[f]][f]=yy;
#define min(a,b) a<b?a:b
using namespace std;
int n,m,i,j,dis[60][60],qx[3010][2],qy[3010][2],l[2],t,s,ux,uy,ans,a;
bool f;
char s1[60][60];
int spfa(int x,int y)
{
    qx[l[0]=1][0]=x;qy[l[0]][0]=y;l[1]=0;
    for(t=1;t<=n;t++)for(s=1;s<=m;s++)dis[t][s]=1e9;
    dis[x][y]=0;
    for(t=1;;t++)
    {
        for(s=1;s<=l[0];s++)
        {
            ux=qx[s][0];uy=qy[s][0];
            niubo(ux,uy,ux-1,uy);niubo(ux,uy,ux+1,uy);
            niubo(ux,uy,ux,uy-1);niubo(ux,uy,ux,uy+1);
        }if(l[1])for(l[0]=l[1]++;--l[1];qx[l[1]][0]=qx[l[1]][1],qy[l[1]][0]=qy[l[1]][1]);else break;
    }a=t;
    for(t=1,s=1;s<=l[0];s++)if(s1[qx[s][0]][qy[s][0]]=='B')t=0;
    return a-t;
}
int main()
{
    scanf("%d%d",&n,&m);
    for(i=1;i<=n;i++)scanf("%s",s1[i]+1);ans=1e9;
    for(i=1;i<=n;i++)for(j=1;j<=m;j++)ans=min(ans,spfa(i,j));
    printf("%d\n",ans);
}