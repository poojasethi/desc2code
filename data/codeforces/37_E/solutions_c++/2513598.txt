#include <cstdio>
#include <cstring>
#include <algorithm>
#include <iostream>
#include <ctime>
#include <cmath>
#define maxn 52
#define rep(i,n) for(int i=1;i<=n;++i)
using namespace std;
int n,m,ans;
bool pd[maxn][maxn];
int ch[maxn][maxn],now[maxn][maxn];
int dl[maxn*maxn][2];
int dx[5],dy[5];
bool check()
{
	rep(i,n)rep(j,m)if(now[i][j])return false;
	return true;
}
void bfs(int sx,int sy)
{
	memset(pd,0,sizeof(pd));
	int hd=0,td=1;
	dl[1][0]=sx;
	dl[1][1]=sy;
	pd[sx][sy]=true;
	now[sx][sy]^=1;
	while(hd<td)
	{
		int x=dl[++hd][0];
		int y=dl[hd][1];
		rep(ii,4)
		{
			int nx=x+dx[ii];
			int ny=y+dy[ii];
			if(nx<1||ny<1||nx>n||ny>m)continue;
			if(pd[nx][ny])continue;
			if(now[nx][ny]!=now[sx][sy])
			{
				now[nx][ny]^=1;
				dl[++td][0]=nx;
				dl[td][1]=ny;
				pd[nx][ny]=true;
			}
		}
	}
}
int main()
{
//	freopen("37E.in","r",stdin);
//	freopen("37E.out","w",stdout);
	
	dx[1]=0;dx[2]=1;dx[3]=0;dx[4]=-1;
	dy[1]=-1;dy[2]=0;dy[3]=1;dy[4]=0;
	scanf("%d%d\n",&n,&m);
	rep(i,n)
	{
		rep(j,m)
		{
			char t=getchar();
			if(t=='W')ch[i][j]=0;else ch[i][j]=1;
		}
		scanf("\n");
	}
	ans=n*m;
	rep(i,n)rep(j,m)
	{
		int aug=0;
		rep(k,n)rep(x,m)now[k][x]=ch[k][x];
		while(!check())
		{
			++aug;
			if(aug==ans)break;
			bfs(i,j);
		}
		ans=aug;
	}
	printf("%d\n",ans);
	return 0;
}	