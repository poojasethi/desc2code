#include<iostream>
#include<cstdio>
#include<cstring>
using namespace std;
int n,m,i,j,k,l,o,p,ans;
int a[50][50],f[50][50],w[100000][2];
const int t[5][2]={{1,0},{0,1},{-1,0},{0,-1}};
bool e[50][50];
char ch[60];
void did(int x,int y)
{
    int i,j,k,l,xx,yy;
    for(i=0;i<n;i++)
        for(j=0;j<m;j++) f[i][j]=10000;
    f[x][y]=1;
    k=1;l=1;
    w[1][0]=x;w[1][1]=y;
    memset(e,true,sizeof(e));
    e[x][y]=false;
    while(k<=l)
    {
        x=w[k][0];y=w[k][1];
        for(i=0;i<4;i++)
        {
            xx=x+t[i][0];yy=y+t[i][1];
            if(xx>=0 && yy>=0 && xx<n && yy<m && f[xx][yy]>f[x][y]+1-(a[x][y]==a[xx][yy]))
            {
                f[xx][yy]=f[x][y]+1-(a[x][y]==a[xx][yy]);
                if(e[xx][yy])
                {
                    e[xx][yy]=false;
                    w[++l][0]=xx;
                    w[l][1]=yy;
                }
            }
        }
        ++k;
        e[x][y]=true;
    }
    k=0;
    for(i=0;i<n;i++)
        for(j=0;j<m;j++)
        {
            if(a[i][j]==1) f[i][j]--;
            if(f[i][j]>k) k=f[i][j];
        }
    if(k<ans) ans=k;
}
int main( )
{
    cin >> n >> m ;
    for(i=0;i<n;i++)
    {
        scanf("%s",ch);
        for(j=0;j<m;j++)
        {
            if(ch[j]=='W') a[i][j]=1;
            else a[i][j]=2;
        }
    }
    ans=10000;
    for(i=0;i<n;i++)
        for(j=0;j<=m;j++) did(i,j);
    printf("%d\n",ans);
    cin >> n;
    return 0;
}
