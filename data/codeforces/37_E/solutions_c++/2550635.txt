#include<cstdio>
#include<cstring>
#define MAXN 51

const int dx[]={0,0,-1,1},dy[]={-1,1,0,0};

int n,m,x[MAXN*MAXN],y[MAXN*MAXN],a[MAXN][MAXN],d[MAXN][MAXN],Ans(1000000);

void Bfs(int X,int Y)
{
	int i,j,h,t,h2,k,Now(0);
	memset(d,-1,sizeof d);
	d[X][Y]=1;
	h=0;
	x[h]=X;
	y[h]=Y;
	t=1;
	for(;h<t;)
	{
		h2=h;
		for(;h2<t;h2++)
			for(k=0;k<4;k++)
				if(	0<=x[h2]+dx[k]&&x[h2]+dx[k]<n&&
					0<=y[h2]+dy[k]&&y[h2]+dy[k]<m&&
					!(a[x[h2]+dx[k]][y[h2]+dy[k]]^a[x[h2]][y[h2]])&&
					d[x[h2]+dx[k]][y[h2]+dy[k]]==-1)
				{
					d[x[h2]+dx[k]][y[h2]+dy[k]]=d[x[h2]][y[h2]];
					x[t]=x[h2]+dx[k];
					y[t]=y[h2]+dy[k];
					t++;
				}
		h2=t;
		for(;h<h2;h++)
			for(k=0;k<4;k++)
				if(	0<=x[h]+dx[k]&&x[h]+dx[k]<n&&
					0<=y[h]+dy[k]&&y[h]+dy[k]<m&&
					(a[x[h]+dx[k]][y[h]+dy[k]]^a[x[h]][y[h]])&&
					d[x[h]+dx[k]][y[h]+dy[k]]==-1)
				{
					d[x[h]+dx[k]][y[h]+dy[k]]=d[x[h]][y[h]]+1;
					x[t]=x[h]+dx[k];
					y[t]=y[h]+dy[k];
					t++;
				}
	}
	for(i=0;i<n;i++)
		for(j=0;j<m;j++)
		if(a[i][j]==1)
		{
			if(d[i][j]>Now)
				Now=d[i][j];
		}
	if(Now<Ans)Ans=Now;
}

int main()
{
	int i,j;
	scanf("%d%d",&n,&m);
	for(i=0;i<n;i++)
		for(scanf("\n"),j=0;j<m;j++)
			a[i][j]=(getchar()=='B');
	for(i=0;i<n;i++)
		for(j=0;j<m;j++)
			Bfs(i,j);
	printf("%d\n",Ans);
	return 0;
}
