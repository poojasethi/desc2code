#include <cstdio>
#include <cstdlib>
#include <algorithm>
#include <cstring>
using namespace std;
const int MAXL = 52,MAXN = MAXL * MAXL * 100,dx[] = {-1,1,0,0},dy[] = {0,0,-1,1},oo = ~0U>>2;
int qy[MAXN],qx[MAXN],dis[MAXL][MAXL],n,m;
char map[MAXL][MAXL];
bool v[MAXL][MAXL];

int find(int sx,int sy){
	int head = 0,tail = 0,nx = 0,ny = 0,ex,ey;
	for(int i = 0;i < n;++ i)
		for(int j = 0;j < m;++ j)
			dis[i][j] = oo,v[i][j] = false;
	qx[tail] = sx; qy[tail ++] = sy; dis[sx][sy] = 1; v[sx][sy] = true;
	while(head != tail){
		nx = qx[head]; ny = qy[head ++];
		v[nx][ny] = false;
		for(int i = 0;i < 4;++ i){
			ex = nx + dx[i]; ey = ny + dy[i];
			if(ex >= 0 && ex < n && ey >= 0 && ey < m){
				int c = map[ex][ey] != map[nx][ny];
				if(c + dis[nx][ny] < dis[ex][ey]){
					dis[ex][ey] = dis[nx][ny] + c;
					if(!v[ex][ey]){
						qx[tail] = ex; qy[tail ++] = ey;
						v[ex][ey] = true;
					}
				}
			}
		}
	}
	int ret = 0;
	for(int i = 0;i < n;++ i)
		for(int j = 0;j < m;++ j)
		if(map[i][j] == 'B' && dis[i][j] > ret)
			ret = dis[i][j];
	return ret;
}
int main(){
	scanf("%d%d",&n,&m);
	for(int i = 0;i < n;++ i) scanf("%s",map[i]);
	int ret = n * m;
	for(int tmp,i = 0;i < n;++ i)
		for(int j = 0;j < m;++ j){
			tmp = find(i,j);
			if(tmp < ret) ret = tmp;
		}
	printf("%d\n",ret);
	return 0;
}
