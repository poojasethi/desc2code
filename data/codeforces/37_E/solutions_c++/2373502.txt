#include<cstdio>
#include<algorithm>
#define fo(i,a,b) for(i=a;i<=b;++i)
using namespace std;
const int mn=60,fx[4][2]={{-1,0},{1,0},{0,-1},{0,1}},inf=1<<30;
int n,m,i,j,ans,st,ed;
int dis[mn][mn],que[mn*mn][2];
char map[mn][mn];
void dfs(char ch,int x,int y,int v)
{
    if(map[x][y]!=ch)return;
    if(v<dis[x][y])
    {
        que[++ed][0]=x,que[ed][1]=y;
        dis[x][y]=v;
    }else return;
    int k;
    fo(k,0,3)dfs(ch,x+fx[k][0],y+fx[k][1],v);
}
int bfs(int u,int v)
{
    int i,j,x,y,a,b;
    char ch;
    fo(i,1,n)
        fo(j,1,m)dis[i][j]=inf;
    st=1,ed=0;
    dfs(map[u][v],u,v,0);
    while(st<=ed)
    {
        a=que[st][0],b=que[st][1];
        ch=map[a][b]=='W'?'B':'W';
        fo(i,0,3)
        {
            x=a+fx[i][0],y=b+fx[i][1];
            if(map[x][y]==ch)dfs(ch,x,y,dis[a][b]+1);
        }
        ++st;
    }
    int res=0;
    fo(i,1,n)
        fo(j,1,m)if(map[i][j]=='B')res=max(res,dis[i][j]);
    return res;
}
int main()
{
    scanf("%d%d",&n,&m);
    ans=-1;
    fo(i,1,n)scanf("%s",map[i]+1);
    fo(i,1,n)
        fo(j,1,m)
            if(map[i][j]=='B'){ans=n+m;break;}
    fo(i,1,n)
        fo(j,1,m)
            ans=min(ans,bfs(i,j));
    printf("%d\n",ans+1);
    return 0;
}