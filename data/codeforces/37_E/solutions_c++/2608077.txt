#include<cstdio>
#include<cstring>
const int N=55,u[4]={0,1,0,-1},v[4]={1,0,-1,0};
int n,m,ans=100000,f[N*N*N],g[N*N*N],d[N][N];
char s[N][N];
bool b[N][N];
void work(int x,int y)
{
	int h=0,t=1,z; f[1]=x; g[1]=y;
	memset(d,6,sizeof(d)); d[x][y]=1;
	memset(b,0,sizeof(b)); b[x][y]=1;
	while (h<t){
		x=f[++h],y=g[h],z=d[x][y]; b[x][y]=0;
		for (int i=0;i<4;i++){
			int x1=x+u[i],y1=y+v[i];
			if (x1<0 || x1>=n || y1<0 || y1>=m) continue;
			int z1=z+(s[x][y]!=s[x1][y1]);
			if (z1>=d[x1][y1]) continue; d[x1][y1]=z1;
			if (!b[x1][y1]) b[x1][y1]=1,f[++t]=x1,g[t]=y1;
			}
		}
	int res=0;
	for (int i=0;i<n;i++)
		for (int j=0;j<m;j++)
			if (s[i][j]=='B' && d[i][j]>res) res=d[i][j];
	if (res<ans) ans=res;
}
int main()
{
	scanf("%d%d",&n,&m);
	for (int i=0;i<n;i++) scanf("%s",s[i]);
	for (int i=0;i<n;i++) for (int j=0;j<m;j++) work(i,j);	
	printf("%d\n",ans); return 0;
}
