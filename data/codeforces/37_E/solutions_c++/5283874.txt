#include <cstdio>
#include <cstring>

using namespace std;
int d[3001],i,j,k,n,m,l,r,t,max,ans,qx[6250001],qy[6250001],dx[4],dy[4],a[61][61],g[3001];
bool v[3001][3001];
char c[61][61];

void spfa(){
  memset(d,10,sizeof(d));
  d[i]=0;
  for (qx[l=r=1]=i;l<=r;l++)
  	for (j=1;j<=t;j++)
  	  if (v[qx[l]][j] && d[j]>d[qx[l]]+1) qx[++r]=j,d[j]=d[qx[l]]+1;
  max=0;
  for (j=1;j<=t;j++)
    if (d[j]+g[j]>max) max=d[j]+g[j];
  if (max<ans) ans=max;
}

int main(){
  //freopen("37E.in","r",stdin);
  //freopen("37E.out","w",stdout);
  dx[0]=1;dx[1]=-1;dx[2]=0;dx[3]=0;
  dy[0]=0;dy[1]=0;dy[2]=1;dy[3]=-1;
  
  scanf("%d%d\n",&n,&m);
  for (i=1;i<=n;i++){
  	for (j=1;j<=m;j++) c[i][j]=getchar();
  	getchar();
  }

  for (i=1;i<=n;i++)
    for (j=1;j<=m;j++)
    if (!a[i][j]){
      for (qx[l=r=1]=i,qy[1]=j,a[i][j]=++t;l<=r;l++)
        for (k=0;k<4;k++)
        if (c[qx[l]+dx[k]][qy[l]+dy[k]]==c[qx[l]][qy[l]] && !a[qx[l]+dx[k]][qy[l]+dy[k]]){
          a[qx[l]+dx[k]][qy[l]+dy[k]]=t;
          qx[++r]=qx[l]+dx[k];
          qy[r]=qy[l]+dy[k];
        } else if (c[qx[l]+dx[k]][qy[l]+dy[k]]!=c[qx[l]][qy[l]] && a[qx[l]+dx[k]][qy[l]+dy[k]])
          v[a[qx[l]][qy[l]]][a[qx[l]+dx[k]][qy[l]+dy[k]]]=
		    v[a[qx[l]+dx[k]][qy[l]+dy[k]]][a[qx[l]][qy[l]]]=1;
	  if ((c[i][j]=='B')) g[t]=1;
	    else g[t]=0;
    }
  //printf("%d\n",t);

  ans=1000000;
  for (i=1;i<=t;i++) spfa();
  printf("%d\n",ans);
  
  return 0;
}