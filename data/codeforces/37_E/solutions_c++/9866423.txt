#include<cstdio>
#include<cstring>
using namespace std;
int n,m,ans;
int a[55][55],f[55][55],dis[100005][2];
int u[55][55],dx[]={0,1,-1,0},dy[]={1,0,0,-1};
char ch[55];
const int inf=1e9+7;
void get_ans(int x,int y)
{
    for(int i=0;i<n;i++) for(int j=0;j<m;j++) f[i][j]=inf;
    f[x][y]=1;dis[1][0]=x;dis[1][1]=y;
    memset(u,1,sizeof(u));
    u[x][y]=0;
    int k=1,l=1;
    while(k<=l)
    {
        x=dis[k][0];y=dis[k][1];
        for(int i=0;i<4;i++)
        {
            int t1=x+dx[i],t2=y+dy[i];
            if(t1>=0 && t2>=0 && t1<n && t2<m && f[t1][t2]>f[x][y]+1-(a[x][y]==a[t1][t2]))
            {
                f[t1][t2]=f[x][y]+1-(a[x][y]==a[t1][t2]);
                if(u[t1][t2])
                {
                	l++;
                    u[t1][t2]=0;
                    dis[l][0]=t1;
                    dis[l][1]=t2;
                }
            }
        }
        k++;
        u[x][y]=1;
    }
    k=0;
    for(int i=0;i<n;i++) for(int j=0;j<m;j++)
    {
        if(a[i][j]==1) f[i][j]--;
        if(f[i][j]>k) k=f[i][j];
    }
    if(k<ans) ans=k;
}
int main()
{
    scanf("%d%d",&n,&m);
    for(int i=0;i<n;i++)
    {
        scanf("%s",&ch);
        for(int j=0;j<m;j++)
        {
            if(ch[j]=='W') a[i][j]=1;
            else a[i][j]=2;
        }
    }
    ans=inf;
    for(int i=0;i<n;i++) for(int j=0;j<m;j++) get_ans(i,j);
    printf("%d\n",ans);
    return 0;
}
