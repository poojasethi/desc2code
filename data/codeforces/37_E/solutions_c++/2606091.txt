#include<cstdio>
#include<cstring>
int N,M,i,j,Ans=1000000,E;
char s[60][60];
int d[2550],f[2550],son[2550],Q[100000];
int ed[10050],cost[10050],next[10050];
void Spfa(int x)
{
    int i,j,k,l,r,Max=0;
    memset(d,33,sizeof(d));
    memset(f,0,sizeof(f));
    f[x]=1,Q[1]=x,d[x]=1;
    for(l=0,r=1;l<r;)
    {
        i=Q[++l],f[i]=0;
        for(j=son[i];j;j=next[j])
        {
            k=ed[j];
            if(d[k]>d[i]+cost[j])
            {
                d[k]=d[i]+cost[j];
                if(!f[k]) f[k]=1,Q[++r]=k;
            }
        }
    }
    for(i=0;i<N*M;++i)
        if(s[i/M][i%M]=='B')
            if(d[i]>Max)
                Max=d[i];
    if(Max<Ans) Ans=Max;
}
void Addedge(int i,int j,int k)
{
    ed[++E]=j,cost[E]=k,next[E]=son[i],son[i]=E;
}
int calc(int i,int j)
{
    return i*M+j;
}
int main()
{
    scanf("%d%d",&N,&M);
    for(i=0;i<N;++i) scanf("%s",s[i]);
	for(i=0;i<N;++i)
		for(j=0;j<M;++j)
		{
			if(i!=0) Addedge(calc(i,j),calc(i-1,j),s[i][j]!=s[i-1][j]);
			if(i!=N-1) Addedge(calc(i,j),calc(i+1,j),s[i][j]!=s[i+1][j]);
			if(j!=0) Addedge(calc(i,j),calc(i,j-1),s[i][j]!=s[i][j-1]);
			if(j!=M-1) Addedge(calc(i,j),calc(i,j+1),s[i][j]!=s[i][j+1]);
		}
	for(i=0;i<N;++i)
		for(j=0;j<M;++j)
			Spfa(calc(i,j));
	printf("%d\n",Ans);
	return 0;
}
