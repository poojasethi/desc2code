#include<cstdio>
#define rep(i,n) for(int i=0;i<n;i++)
#define For(i,n) for(int i=1;i<=n;i++)
#define N 52
#define Q 4095
const int dx[4]={0,0,1,-1},
		  dy[4]={1,-1,0,0};
char a[N][N];
int qx[Q],qy[Q],v[N][N],d[N][N];
int n,m,l,r,t,x,y,nx,ny,ans;
int main()
{
	scanf("%d%d",&n,&m);
	For(i,n) scanf(" %s",a[i]+1);
	ans=n*m;
	For(i,n) For(j,m)
	{
		v[i][j]=++t;d[i][j]=1;
		qx[l=0]=i;qy[r=0]=j;
		while (l!=r+1 &Q)
		{
			x=qx[l];y=qy[l];
			l=l+1 & Q;
			rep(w,4)
			{
				nx=x+dx[w];ny=y+dy[w];
				if (nx && ny && nx<=n && ny<=m && v[nx][ny]<t)
					if (a[x][y]==a[nx][ny])
					{
						l=l-1 & Q;
						qx[l]=nx;qy[l]=ny;
						v[nx][ny]=t;
						d[nx][ny]=d[x][y];
					}
					else
					{
						r=r+1 & Q;
						qx[r]=nx;qy[r]=ny;
						v[nx][ny]=t;
						d[nx][ny]=d[x][y]+1;
					}
			}
		}
		d[x][y]-=(a[x][y]=='W');
		if (d[x][y]<ans) ans=d[x][y];
	}
	printf("%d",ans);
	return 0;
}
