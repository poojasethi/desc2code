#include<cstdio>
#include<algorithm>
#include<cstring>
#define rep(i,x,y) for(i=x;i<=y;++i)
#define N 51
using namespace std;
const int d[4][2]={-1,0,1,0,0,-1,0,1};
int ans=1<<30,i,j,n,m,dis[N][N],bfs[N*N*2][2];
char c[61][61];
void work(int x,int y){
	int i,j,maxx=-1,xx,yy,z,l,r;
	rep(i,1,n)
		rep(j,1,m)dis[i][j]=1<<30;
	dis[x][y]=0;
	bfs[l=r=2500][0]=x; bfs[l][1]=y;
	while(l<=r){
		x=bfs[l][0]; y=bfs[l++][1];
		rep(i,0,3){
			xx=x+d[i][0]; yy=y+d[i][1];
			if(xx<1 || xx>n || yy<1 || yy>m)continue;
			if(c[xx][yy]!=c[x][y])z=1;
			else z=0;
			if(dis[x][y]+z<dis[xx][yy]){
				dis[xx][yy]=dis[x][y]+z;
				if(z==1){
					bfs[++r][0]=xx;
					bfs[r][1]=yy;
				}else{
					bfs[--l][0]=xx;
					bfs[l][1]=yy;
				}
			}
		}
	}
	rep(i,1,n)
		rep(j,1,m)if(c[i][j]=='B')maxx=max(maxx,dis[i][j]);
	ans=min(ans,maxx);
}
int main(){
	scanf("%d%d",&n,&m);
	rep(i,1,n)scanf("%s",c[i]+1);
	rep(i,1,n)
		rep(j,1,m)work(i,j);
	printf("%d\n",ans+1);
}