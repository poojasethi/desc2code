#include<iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>
#include<queue>
#define MP make_pair
#define fi first
#define se second
using namespace std;
typedef pair<int,int> PII;
const int inf=2147483647,
    dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};
int n,m,ans;
bool a[52][52],v[52][52];
int d[52][52];
deque<PII> l;
char s[52];
void add(int x,int y,int dis,bool ad){
    v[x][y]=1;
    d[x][y]=dis+ad;
    if(ad)l.push_back(MP(x,y));
    else l.push_front(MP(x,y));
}
bool inside(int x,int y){
    return x<=n&&x>=1&&y<=m&&y>=1;
}
int bfs(int sx,int sy){
    memset(d,63,sizeof d);
    memset(v,0,sizeof v);
    add(sx,sy,0,0);
    while(l.size()){
        int x=l[0].fi,y=l[0].se;
        l.pop_front();
        for(int i=0;i<4;i++){
            int tx=x+dx[i],ty=y+dy[i];
            if(inside(tx,ty)&&!v[tx][ty]){
                v[tx][ty]=1;
                add(tx,ty,d[x][y],a[x][y]!=a[tx][ty]);
            }
        }
    }
    int ret=0;
    for(int i=1;i<=n;i++)
        for(int j=1;j<=m;j++)
            if(a[i][j])ret=max(ret,d[i][j]+1);
    return ret;
}
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    scanf("%d%d",&n,&m);
    for(int i=1;i<=n;i++){
        scanf("\n%s",s+1);
        for(int j=1;j<=m;j++)
            a[i][j]=s[j]=='B';
    }
    ans=inf;
    for(int i=1;i<=n;i++)
        for(int j=1;j<=m;j++)
            ans=min(ans,bfs(i,j));
    cout<<ans;
    return 0;
}
