#include <cstring>
#include <cstdio>
using namespace std;
const int dx[4]={0,0,1,-1};
const int dy[4]={1,-1,0,0};
int n,m;
int inq[60][60], dist[60][60],qx[100000],qy[100000];
char map[60][60];
int getmin(int x, int y){if (x<y) return x; return y;}
int getmax(int x, int y){if (x>y) return x; return y;}
bool inmap(int x, int y){return (x>0&&y>0&&x<=n&&y<=m);}
 
int bfs(int x, int y)
{
    qx[1]=x; qy[1]=y;
    int h=0, t=1 ,xx,yy;
    for (int i=1; i<=n; i++)
    for (int j=1; j<=m; j++) dist[i][j]=1000000;
    dist[x][y]=1; inq[x][y]=1;
    for (;h<t;)
    {
        x=qx[++h], y=qy[h]; inq[x][y]=0;
        for (int k=0; k<4; k++)
        {
            xx=x+dx[k], yy=y+dy[k];
            if (!inmap(xx,yy)) continue;
            int cost=(map[x][y] != map[xx][yy]);
            if (dist[x][y]+cost<dist[xx][yy])
            {
                dist[xx][yy]=dist[x][y]+cost;
                if (!inq[xx][yy]) qx[++t]=xx, qy[t]=yy, inq[xx][yy]=1;
            }
        }
    }
    int res=0;
    for (int i=1; i<=n; i++)
    for (int j=1; j<=m; j++)
        if (map[i][j]=='B') res=getmax(res,dist[i][j]);
    return res;
}
 
int main()
{
    //freopen("paint.in","r",stdin);
    scanf("%d%d",&n,&m);
    for (int i=1; i<=n; i++) scanf("%s",map[i]+1);
     
    int ans=10000000;
    for (int i=1; i<=n; i++)
    for (int j=1; j<=m; j++) 
        ans=getmin(ans,bfs(i,j));
    printf("%d\n",ans);
    //for (;;);
}
