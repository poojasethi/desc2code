#include <cstdio>
#include <cstring>
using namespace std;
struct arr
{
	int x,y;
}q[2502000];
bool v[52][52],a[52][52];
int n,m,ans,l,r,dx[5],dy[5],d[52][52],ma;
char x;
void spfa()
{
	while (l<=r)
	{
		for (int i=1;i<=4;i++)
		{
			if (q[l].x+dx[i]<1||q[l].x+dx[i]>n||q[l].y+dy[i]<1||q[l].y+dy[i]>m) continue;
			if (d[q[l].x+dx[i]][q[l].y+dy[i]]>d[q[l].x][q[l].y]+(a[q[l].x+dx[i]][q[l].y+dy[i]]!=a[q[l].x][q[l].y]))
			{
			   d[q[l].x+dx[i]][q[l].y+dy[i]]=d[q[l].x][q[l].y]+(a[q[l].x+dx[i]][q[l].y+dy[i]]!=a[q[l].x][q[l].y]);
			  if (!v[q[l].x+dx[i]][q[l].y+dy[i]])
			{
				q[++r].x=q[l].x+dx[i];q[r].y=q[l].y+dy[i];v[q[r].x][q[r].y]=true;
			}
		}
		}
		v[q[l].x][q[l].y]=false;l++;
	}
}
int max()
{
	int re=0;
	for (int i=1;i<=n;i++)
	for (int j=1;j<=m;j++)
	{
	  if (re<d[i][j]+1&&a[i][j]) re=d[i][j]+1;
	  if (re<d[i][j]&&!a[i][j]) re=d[i][j];
    }
	return re;
}
int main()
{
	//freopen ("37E.in","r",stdin);
	//freopen ("37E.out","w",stdout);
	scanf ("%d %d\n",&n,&m);
	dx[1]=0;dx[2]=-1;dx[3]=0;dx[4]=1;
	dy[1]=-1;dy[2]=0;dy[3]=1;dy[4]=0;
	for (int i=1;i<=n;i++)
	{
		for (int j=1;j<=m;j++)
		{
			x=getchar();
			if (x=='B') a[i][j]=1;
			ans+=a[i][j];
		}
		scanf("%c",&x);
	}
	for (int i=1;i<=n;i++)
	for (int j=1;j<=m;j++)
	{
	   memset(d,10,sizeof d);
	   memset(v,0,sizeof v);
	   d[i][j]=0;
	   l=r=1;q[l].x=i;q[l].y=j;spfa();
	   ma=max();
	   if (ma<ans) ans=ma;
	}
	printf("%d\n",ans);
	return 0;
}