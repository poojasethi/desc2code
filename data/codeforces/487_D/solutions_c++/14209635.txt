#include <cstdio>

#include <cmath>

#include <cstring>

#include <iostream>

#include <algorithm>

#include <queue>

#include <vector>

#include <map>



using namespace std;



typedef long long LL;


int nxtx[100005][15],nxty[100005][15];
char s[100005][15];
char ss[10];
int n,m,q;
int base=233;
int x,y,dqx,dqy;
void update(int l,int r)
{
    for (int i=l;i<=r;++i) 
        for (int j=1;j<=m;++j) nxtx[i][j]=nxty[i][j]=-1;
    for (int i=1;i<=m;++i) if (s[l][i]=='^') nxtx[l][i]=l-1,nxty[l][i]=i;
    for (int i=l;i<=r;++i)
    {
        nxtx[i][0]=i;nxty[i][0]=0;
        nxtx[i][m+1]=i;nxty[i][m+1]=m+1;
    }
    for (int i=l;i<=r;++i)
    {
        for (int j=1;j<=m;++j)
        {
            if (i!=l&&s[i][j]=='^') nxtx[i][j]=nxtx[i-1][j],nxty[i][j]=nxty[i-1][j];
            else if (s[i][j]=='<') nxtx[i][j]=nxtx[i][j-1],nxty[i][j]=nxty[i][j-1];
        }
        for (int j=m;j>=1;--j)
        {
            if (s[i][j]=='>') nxtx[i][j]=nxtx[i][j+1],nxty[i][j]=nxty[i][j+1];
        }
    }
}

int main()

{
    scanf("%d%d%d",&n,&m,&q);
    for (int i=1;i<=n;++i)
        scanf("%s",s[i]+1);
    for (int i=1;i<=n;i+=base)
    {
        update(i,min(i+base-1,n));
    }
    while (q--)
    {
        scanf("%s",ss);
        if (ss[0]=='A')
        {
            scanf("%d%d",&x,&y);
            while (x>0&&y>0&&y<=m)
            {
                dqx=x;dqy=y;
                x=nxtx[dqx][dqy];
                y=nxty[dqx][dqy];
            }
            printf("%d %d\n",x,y);
        }
        else
        {
            scanf("%d%d",&x,&y);
            scanf("%s",ss);
            s[x][y]=ss[0];
            update((x-1)/base*base+1,min(n,((x-1)/base+1)*base));
        }
    }

    return 0;

}