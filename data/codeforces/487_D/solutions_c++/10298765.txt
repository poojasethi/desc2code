#include <cmath>
#include <cstdio>
#include <algorithm>
using namespace std;

#define m	15
#define n	100005
#define MK	make_pair

int		N,M,Q,S;
char	A[n][m];
pair<int,int>F[n][m];

void	Build(int l,int r){
		for	(int i=l;i<=r;i++){
			for	(int j=1;j<=M;j++)	F[i][j]=MK(i,j);
			for	(int j=1;j<=M;j++)
				if	(A[i][j]=='^')	i==l?F[i][j]=MK(i-1,j):F[i][j]=F[i-1][j];
			for	(int j=1;j<=M;j++)
				if	(A[i][j]=='<')	j==1?F[i][j]=MK(i,j-1):F[i][j]=F[i][j-1];
			for	(int j=M;j>=1;j--)
				if	(A[i][j]=='>')	j==M?F[i][j]=MK(i,M+1):F[i][j]=F[i][j+1];
		}
}

int		main(){
		scanf("%d%d%d",&N,&M,&Q);	S=(int)pow(1.*N/M,0.5)+1;
		for	(int i=1;i<=N;i++)	scanf("%s",A[i]+1);
		for	(int i=1;i<=N;i+=S)	Build(i,min(i+S-1,N));
		for	(int k,x,y;Q--;){
			for	(;(k=getchar())!='A'&&k!='C';);
			if	(k=='A'){
				scanf("%d%d",&x,&y);
				for	(;x&&y>=1&&y<=M;){
					int x1=F[x][y].first,y1=F[x][y].second;
					if	(x1==x&&y1>=1&&y1<=M)	{
						x=x1;y=y1;break;
					}	x=x1;y=y1;
				}	if	(x&&y>=1&&y<=M)	x=y=-1;
				printf("%d %d\n",x,y);
			}	else	{
				for	(scanf("%d%d",&x,&y);(k=getchar())==' ';);
				A[x][y]=k;	Build((x-1)/S*S+1,min(N,((x-1)/S+1)*S));
			}
		}
}