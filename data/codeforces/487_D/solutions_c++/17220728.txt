#include<cstdio>
#include<iostream>
#include<cstring>
using namespace std;
const int N=1e5+10;
int dp[1001][101][11][2];
int vis[1001][101][11];

char ss[N][20];
int n,m,q;

void dfs(int sq,int x,int y){
    int a=x,b=y;
    if(vis[sq][x][y])return ;
    vis[sq][x][y]=1;
    if(ss[sq*100+x][y]=='^')x--;
    else if(ss[sq*100+x][y]=='<')y--;
    else y++;
    if(x<0||y<0||y>=m){
        dp[sq][a][b][0]=x;
        dp[sq][a][b][1]=y;
        return ;
    }
    dfs(sq,x,y);
    dp[sq][a][b][0]=dp[sq][x][y][0];
    dp[sq][a][b][1]=dp[sq][x][y][1];
}

int ax,ay;
void query(int sq,int x,int y){
    int a=dp[sq][x][y][0],b=dp[sq][x][y][1];
    //printf("%d %d\n",a,b);
    if(a>N&&b>N)ax=-2,ay=-2;
    else if(sq==0&&a==-1)ax=-1,ay=b;
    else if(b==-1||b==m)ax=sq*100+a,ay=b;
    else query(sq-1,99,b);
}

int main(){
    #ifdef DouBi
    freopen("in.cpp","r",stdin);
    #endif // DouBi
    while(scanf("%d%d%d",&n,&m,&q)!=EOF){
        for(int i=0;i<n;i++)scanf("%s",ss[i]);
        memset(vis,0,sizeof(vis));memset(dp,0x3f,sizeof(dp));
        for(int i=0;i<n;i+=100){
            for(int j=0;j<100&&j<n-i;j++){
                for(int k=0;k<m;k++){
                    dfs(i/100,j,k);
                    //printf("%d %d %d %d\n",i+j,k,dp[i/100][j][k][0],dp[i/100][j][k][1]);
                }
            }
        }
        for(int i=1;i<=q;i++){
            char tt[2];int x,y;scanf("%s%d%d",tt,&x,&y);x--;y--;
            if(tt[0]=='C'){
                scanf("%s",tt);
                ss[x][y]=tt[0];
                int a=x/100,b=x%100;
                memset(dp[a],0x3f,sizeof(dp[a]));
                memset(vis[a],0,sizeof(vis[a]));
                for(int j=0;j<100&&j<n-a*100;j++){
                    for(int k=0;k<m;k++)dfs(a,j,k);
                }
            }
            else {
                int a=x/100,b=x%100;
                //printf("%d %d %d\n",a,b,y);
                query(a,b,y);
                printf("%d %d\n",ax+1,ay+1);
            }
        }
    }
    return 0;
}
      			       		    		  			