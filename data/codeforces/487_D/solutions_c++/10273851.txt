#include <map>
#include <set>
#include <list>
#include <ctime>
#include <cmath>
#include <queue>
#include <stack>
#include <bitset>
#include <vector>
#include <cstdio>
#include <string>
#include <cstring>
#include <sstream>
#include <iomanip>
#include <cstdlib>
#include <iostream>
#include <algorithm>
#define mp make_pair
using namespace std;
string a[100005];
pair<int,int> f[100005][15];
void work (int x,int y,int m) {
	int i,j;
	for (i=x;i<=y;i++) {
		for (j=0;j<m;j++) f[i][j]=mp(i,j);
		for (j=0;j<m;j++) {
			if (a[i][j]=='^') {
				if (i==x) f[i][j]=mp(i-1,j); else f[i][j]=f[i-1][j];
			}
		}
		for (j=0;j<m;j++) {
			if (a[i][j]=='<') {
				if (j==0) f[i][j]=mp(i,j-1); else f[i][j]=f[i][j-1];
			}
		}
		for (j=m-1;j>=0;j--) {
			if (a[i][j]=='>') {
				if (j==m-1) f[i][j]=mp(i,j+1); else f[i][j]=f[i][j+1];
			}
		}
	}
}
int main ( ) {
	int n,m,p,q,i,u,v;
	scanf("%d%d%d",&n,&m,&q);
	p=(int)(pow(n,0.4));
	for (i=0;i<n;i++) cin>>a[i];
	for (i=0;i<n;i+=p) work(i,min(i+p-1,n-1),m);
	for (i=0;i<q;i++) {
		string c;
		int x,y;
		cin>>c;
		scanf("%d%d",&x,&y);
		x--;y--;
		if (c=="A") {
			while (x>=0 && y>=0 && y<m) {
				u=f[x][y].first;v=f[x][y].second;
				if (x==u && v>=0 && v<m) {y=v;break;}
				x=u;y=v;
			}
			if (x>=0 && y>=0 && y<m) {x=-2;y=-2;}
			printf("%d %d\n",x+1,y+1);
		}
		else {
			getchar();
			a[x][y]=getchar();
			work(x/p*p,min(n-1,x/p*p+p-1),m);
		}
	}
	return 0;
}
/*
Sample test(s)

input

2 2 3
>>
^^
A 2 1
C 1 2 <
A 2 1

output

1 3
-1 -1

input

4 5 7
><<^<
^<^^>
>>>^>
>^>>^
A 3 1
A 2 2
C 1 4 <
A 3 1
C 1 2 ^
A 3 1
A 2 2

output

0 4
-1 -1
-1 -1
0 2
0 2
*/
