#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
pair<int,int> dp[100005][12];
char s[100005][12],t[5];
int n,m,q,Z,x,y;
inline void modify(int r1,int r2)
{
	for(int i=r1;i<=r2;i++)
	{
		for(int j=0;j<m;j++) dp[i][j]=make_pair(i,j);
		for(int j=0;j<m;j++) if(s[i][j]=='^') dp[i][j]=(i==r1) ? make_pair(r1-1,j) : dp[i-1][j];
		for(int j=0;j<m;j++) if(s[i][j]=='<') dp[i][j]=(j==0) ? make_pair(i,-1) : dp[i][j-1];
		for(int j=m-1;j>=0;j--) if(s[i][j]=='>') dp[i][j]=(j==m-1) ? make_pair(i,m) : dp[i][j+1];
	}
	return;
}
int main()
{
	scanf("%d%d%d",&n,&m,&q);
	Z=240;
	for(int i=0;i<n;i++) scanf("%s",s[i]);
	for(int i=0;i<=n;i+=Z) modify(i,min(n,i+Z-1));
	while(q--)
	{
		scanf("%s%d%d",&t,&x,&y);
		x--;y--;
		if(t[0]=='A')
		{
			int r=x,c=y;
			while(r>=0 && c>=0 && c<m)
			{
				int nr=dp[r][c].first,nc=dp[r][c].second;
				if(nr==r && (nc>=0 && nc<m))
				{
					r=nr;
					c=nc;
					break;
				}
				r=nr; c=nc;
			}
			if(r>=0 && (c>=0 && c<m)) r=c=-2;
			printf("%d %d\n",r+1,c+1);
		}
		else
		{
			getchar();
			s[x][y]=getchar();
			modify((x/Z)*Z,min(n,(x/Z)*Z+Z-1));
		}
	}
	return 0;
}
