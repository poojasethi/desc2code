// In The Name Of God ;

#include<bits/stdc++.h>

#define mp make_pair

using namespace std;

const int Maxn = 1e5 + 7;
const int sq = 317;

int n,m,q;
int indx;
char c[Maxn][12];
pair<int,int>next[Maxn][12];
bool mark[Maxn][12];

int f(char t)
{
  if(t=='<')
    return -1;
  return 1;
}

pair<int,int> ret;
void dfs(int x,int y)
{
  if(x/sq!=indx ||  (x<0 || x>=n) || (y>=m || y<0) )
    {
      ret=mp(x,y);
      return ;
    }
  if(y>0 && c[x][y]=='<' && c[x][y-1]=='>')
    mark[x][y-1]=mark[x][y]=true,next[x][y]=next[x][y-1]=mp(x,y);
  if(c[x][y]=='>' && c[x][y+1]=='<')
    mark[x][y+1]=mark[x][y]=true,next[x][y]=next[x][y+1]=mp(x,y);
  if(mark[x][y])
    {
      ret=next[x][y];
      return ;
    }
  mark[x][y]=true;
  if(c[x][y]=='^')
    dfs(x-1,y),next[x][y]=ret;
  if(c[x][y]=='<')
    dfs(x,y-1),next[x][y]=ret;
  if(c[x][y]=='>')
    dfs(x,y+1),next[x][y]=ret;
}

int sx,sy,ex,ey;
void update(int x)
{
  indx=x;
  sx=x*sq,ex=min(n,x*sq+sq);
  for(int i=sx;i<ex;i++)
    for(int j=0;j<m;j++)
      mark[i][j]=false;
  for(int i=sx;i<ex;i++)
    for(int j=0;j<m;j++)
      if(!mark[i][j])
	dfs(i,j);
}

int xx,yy;
void solve(int x,int y)
{
  while(true)
    {
      if(x<0 || y>=m || y<0)
	{
	  cout<<x+1<<" "<<y+1<<endl;
	  return ;
	}
      if(x>=n || next[x][y]==mp(x,y))
	{
	  cout<<-1<<" "<<-1<<endl;
	  return ;
	}
      xx=next[x][y].first;
      yy=next[x][y].second;
      x=xx,y=yy;
    }
}

int main()
{
  ios_base::sync_with_stdio(0);
  cin.tie(0);
  cin>>n>>m>>q;
  for(int i=0;i<n;i++)
    for(int j=0;j<m;j++)
      cin>>c[i][j];
  for(int i=0;i<n;i++)
    for(int j=0;j<m;j++)
      if(!mark[i][j])
	indx=i/sq,dfs(i,j);
  char t;
  for(int x,y;q--;)
    {
      cin>>t>>x>>y;
      x--,y--;
      if(t=='C')
	{
	  cin>>t;
	  c[x][y]=t;
	  update(x/sq);
	}
      else
	solve(x,y);
    }
}
