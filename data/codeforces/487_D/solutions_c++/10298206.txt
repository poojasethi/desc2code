#include <iostream>
#include <algorithm>
#include <cstring>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#define mp make_pair
#define M 100000+5
using namespace std;
pair<int,int> f[M][20];
char s[M][20];
int z,n,m,q,num[M],cnt;
void Modify(int x1,int x2)
{
	for (int i=x1;i<=x2;i++)
	{
		for (int j=0;j<=m+1;j++)
			f[i][j]=mp(i,j);
		for (int j=1;j<=m;j++)
			if (s[i][j]=='^')
				f[i][j]=i==x1?mp(x1-1,j):f[i-1][j];
		for (int j=1;j<=m;j++)
			if (s[i][j]=='<')
				f[i][j]=f[i][j-1];
		for (int j=m;j;j--)
			if (s[i][j]=='>')
				f[i][j]=f[i][j+1];
	}
}
int main()
{
    scanf("%d%d%d",&n,&m,&q);
	for (int i=1;i<=m;i++)
		f[0][i]=mp(0,i);
	for (int i=1;i<=n;i++)
		scanf("%s",s[i]+1);
	z=sqrt(n)+1;
	cnt=-1;
	for (int i=1;i<=n;i+=z)
	{
		cnt++;
		Modify(i,min(n,i+z-1));
		for (int j=i;j<=min(n,i+z-1);j++)
			num[j]=cnt;
	}
	while (q--)
	{
		char t[5];
		int x,y;
		scanf("%s%d%d",t,&x,&y);
		if (t[0]=='A')
		{
			int xx=x,yy=y;
			int ok=1;
			while (xx>=1&&yy>=1&&yy<=m)
			{
				int nx=f[xx][yy].first,ny=f[xx][yy].second;
	            if (nx==xx&&ny>=1&&ny<=m)
			    {
					ok=0;
					puts("-1 -1");
					break;
				}
			    xx=nx,yy=ny;
			}
			if (ok)
				printf("%d %d\n",xx,yy);
		}
		else
		{
			scanf("%s",t);
			int fi=num[x]*z+1;
			s[x][y]=t[0];
			Modify(x,min(fi+z-1,n));
		}
	}
	return 0; 
}
