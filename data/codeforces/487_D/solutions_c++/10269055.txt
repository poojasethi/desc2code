#include<algorithm>
#include<cmath>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<ctime>
#include<deque>
#include<iterator>
#include<iostream>
#include<list>
#include<map>
#include<memory>
#include<queue>
#include<set>
#include<stack>
#include<string>
#include<vector>
#include<utility>
#include<bitset>
#define ll long long
using namespace std;

int n,m,q;
int bs=316;
char a[100001][11];
pair<int,int> f[100001][11];

void dp(int h,int t){
     int i,j;
     for(i=h;i<=t;i++)
         for(j=0;j<m;j++) f[i][j]=make_pair(i,j);
     for(i=h;i<=t;i++)
     {   for(j=0;j<m;j++)
             if(a[i][j]=='^')
             {  if(i==h) f[i][j]=make_pair(i-1,j); else f[i][j]=f[i-1][j];}
         for(j=0;j<m;j++)
             if(a[i][j]=='<')
             {  if(j==0) f[i][j]=make_pair(i,j-1); else f[i][j]=f[i][j-1];}
         for(j=m-1;j>=0;j--)
             if(a[i][j]=='>')
             {  if(j==m-1) f[i][j]=make_pair(i,j+1);else f[i][j]=f[i][j+1];}
     }
}

int main(){
    scanf("%d%d%d",&n,&m,&q);
    int i,j;
    for(i=0;i<n;i++)
        scanf("%s",a[i]);
    for(i=0;i<n;i+=bs) dp(i,min(n-1,i+bs-1));
    while(q--){
               int x,y;
               char c;
               scanf("%c",&c);
               scanf("%c%d%d",&c,&x,&y);
               x--;y--;
               if(c=='A')
               {  while(x>=0 && y>=0 && y<m)
                  {  int xx=f[x][y].first;
                     int yy=f[x][y].second;
                     if(yy>=0 && yy<m && xx==x)
                     {  x=xx;y=yy;break;}
                     x=xx;y=yy;
                  }
                  if(x>=0 && y>=0 && y<m) printf("-1 -1\n");
                  else printf("%d %d\n",x+1,y+1);
               }
               else
               {  scanf(" %c",&c);
                  a[x][y]=c;
                  dp(x/bs*bs,min(x/bs*bs+bs-1,n-1));
               }
    }
    //system("pause");
    return 0;
}
