#include<cstdio>
#include<cmath>
#include<iostream>
using namespace std;
int len,last;

int n,m,q;
char a[100010][12];

struct dot{
	int x,y;
}tt,tp;

struct partt{
	dot ou[12];
}P[400];

dot ichange(dot now){
	char c=a[now.x][now.y];
	if(c=='^')now.x--;
	if(c=='<')now.y--;
	if(c=='>')now.y++;
	return now;
}

dot ipush(dot now,int endx){
	if(now.x==endx||now.x==0||now.y==0||now.y==m+1||now.x==n+1)return now;
	tt=ichange(now);tp=ichange(tt);
	if(tp.x==now.x&&tp.y==now.y){
		tt.x=tt.y=-1;
		return tt;
	}
	return ipush(tt,endx);
}

void imodify(int x,int y,char c){
	a[x][y]=c;
	if(x>last)return;
	int i,j,k;
	k=(x-1)/len+1;
	i=len*k;
	//cout<<x<<' '<<y<<' '<<c<<endl;
	for(j=1;j<=m;j++){
		tt.x=i;tt.y=j;
		P[k].ou[j]=ipush(tt,i-len);
		//cout<<P[k].ou[j].x<<' '<<P[k].ou[j].y<<endl;
	}
}

void imake(){
	int i,j,k=0;
	for(i=1;i+len-1<=n;i+=len){
		k++;
		for(j=1;j<=m;j++){
			tt.x=i+len-1;tt.y=j;
			P[k].ou[j]=ipush(tt,i-1);
		}
	}
}

void iask(int x,int y){
	int k;
	k=(x-1)/len;
	dot now;
	now.x=x;now.y=y;
	now=ipush(now,k*len);
	//cout<<'#'<<x<<' '<<y<<endl;
	if(now.x!=k*len){
		printf("%d %d\n",now.x,now.y);
		return;
	}
	for(;k>0;k--){
		now=P[k].ou[now.y];
		if(now.x!=(k-1)*len){
			printf("%d %d\n",now.x,now.y);
			return;
		}
	}
	cout<<now.x<<' '<<now.y<<endl;
}

void iWork(){
	cin>>n>>m>>q;
	len=ceil(sqrt(n));last=(int)(n/len)*len;
	int i,j;
	for(i=1;i<=n;i++){
		for(j=1;j<=m;j++){
			char c;
			while((c=getchar())&&(c!='^'&&c!='<'&&c!='>'));
			a[i][j]=c;
		}
	}
	imake();
	while(q--){
		char c;
		int x,y;
		while((c=getchar())&&(c!='A'&&c!='C'));
		scanf("%d %d",&x,&y);
		if(c=='A'){
			iask(x,y);
		}
		else{
			while((c=getchar())&&(c!='^'&&c!='<'&&c!='>'));
			imodify(x,y,c);
		}
	}
}

int main(){
	//freopen("487d.in","r",stdin);
	//freopen("487d.out","w",stdout);
	iWork();
	return 0;
}
