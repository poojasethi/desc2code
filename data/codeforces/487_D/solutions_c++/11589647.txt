#include <cstdio>
#include <iostream>

#define M 12
#define S 100
#define N 100010
#define min(a, b) ((a) < (b) ? (a) : (b))

using namespace std;

typedef pair <int, int> PII;

int n, m, q;
char s[N][M];
PII to[N][M];

void build(int lo, int hi) {
	for (int x = lo; x <= hi; x ++) {
		for (int y = 1; y <= m; y ++) to[x][y] = PII(x, y);
		for (int y = 1; y <= m; y ++) if (s[x][y] == '^') {
			if (x == lo) to[x][y] = PII(x - 1, y);
			else to[x][y] = to[x - 1][y];
		}
		for (int y = 1; y <= m; y ++) if (s[x][y] == '<') {
			if (y == 1) to[x][y] = PII(x, y - 1);
			else to[x][y] = to[x][y - 1];
		}
		for (int y = m; y; y --) if (s[x][y] == '>') {
			if (y == m) to[x][y] = PII(x, y + 1);
			else to[x][y] = to[x][y + 1];
		}
	}
}

main() {
//	freopen("D.in", "r", stdin);
	scanf("%d %d %d", &n, &m, &q);
	for (int i = 1; i <= n; i ++) scanf("%s", s[i] + 1);
	for (int i = 1; i <= n; i += S) build(i, min(n, i + S - 1));
	while (q --) {
		char t[M];
		int a, b, x, y;
		scanf("%s %d %d", t, &a, &b);
		if (t[0] == 'A') {
			bool bf = 0;
			for (x = a, y = b; 1 <= x && 1 <= y && y <= m && !bf; ) {
				int xx = to[x][y].first;
				int yy = to[x][y].second;
				if (xx == x && 1 <= yy && yy <= m) bf = 1;
				else x = xx, y = yy;
			}
			if (bf) puts("-1 -1");
			else printf("%d %d\n", x, y);
		} else {
			scanf("%s", t);
			s[a][b] = t[0];
			int pos = (a + S - 1) / S;
			build((pos - 1) * S + 1, min(n, pos * S));
		}
	}
}
