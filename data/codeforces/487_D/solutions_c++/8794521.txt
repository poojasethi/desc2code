#include <cstdio>
#include <cstring>
#define REP(i,n) for (int i=1;i<=n;++i)
using namespace std;

int n,m,q,x,y;
int a[100010][15];
int b[100010][5];
int next[100010][15][2];
int top,st[1000010][2];
bool boo[100010][15];
bool spc[100010][15];

int AC() {
	while (1) {
		char c=getchar();
		if (c=='A') return 0;
		if (c=='C') return 1;
	}
	return 0;	
}

int Get() {
	while (1) {
		char c=getchar();
		if (c=='^') return 0;
		if (c=='<') return 1;
		if (c=='>') return 2;
	}
	return 0;
}

void Dfs(int x,int y) {
	if (boo[x][y]) {
		if ((!next[x][y][0])&&(!next[x][y][1])) {
			next[x][y][0]=-1;
			next[x][y][1]=-1;
		}
		return;
	}
	boo[x][y]=true;
	if (spc[x][y] || x==0 || x==n+1 || y==0 || y==m+1) {
		next[x][y][0]=x;
		next[x][y][1]=y;
		return;
	}
	if (a[x][y]==0) {Dfs(x-1,y);next[x][y][0]=next[x-1][y][0];next[x][y][1]=next[x-1][y][1];} else
	if (a[x][y]==1) {Dfs(x,y-1);next[x][y][0]=next[x][y-1][0];next[x][y][1]=next[x][y-1][1];} else
	if (a[x][y]==2) {Dfs(x,y+1);next[x][y][0]=next[x][y+1][0];next[x][y][1]=next[x][y+1][1];}
}

int main() {
	scanf("%d%d%d",&n,&m,&q);
	REP(i,n) REP(j,m) a[i][j]=Get();
	REP(i,q)
		if (AC())  {
			b[i][0]=1;
			scanf("%d%d",&b[i][1],&b[i][2]);
			spc[b[i][1]][b[i][2]]=true;
			b[i][3]=Get();
		} else {
			b[i][0]=0;
			scanf("%d%d",&b[i][1],&b[i][2]);
		}
	REP(i,n) REP(j,m)
		if ((!next[i][j][0])&&(!next[i][j][1])) Dfs(i,j);
	memset(boo,false,sizeof(boo));
	REP(i,q)
		if (b[i][0]==1)
			a[b[i][1]][b[i][2]]=b[i][3];
		else {
			x=b[i][1];
			y=b[i][2];
			while (!boo[x][y] && x>=1 && x<=n && y>=1 && y<=m) {
				boo[x][y]=true;
				st[++top][0]=x; st[top][1]=y;
				if (spc[x][y]) {
					if (a[x][y]==0) --x; else
					if (a[x][y]==1) --y; else
					if (a[x][y]==2) ++y;
				} else {
					int tx=x,ty=y;
					x=next[tx][ty][0];
					y=next[tx][ty][1];
				}
			}
			if (x==0 || x==n+1 || y==0 || y==m+1 || x==-1)
				printf("%d %d\n",x,y);
			else
				puts("-1 -1");
			REP(i,top) boo[st[i][0]][st[i][1]]=false;
			top=0;
		}
	return 0;
}