#include <iostream>
#include <queue>

using namespace std;
priority_queue<long long> a,b;
long long row[1000100],col[1000100];
long long ca[1000100],cb[1000100];
long long res=-1000000000;
int main(){
	res=res*-res;
	long long n,m,k,q;
	cin>>n>>m>>k>>q;
	for (long long  i=1;i<=n;i++){
		for (long long j=1;j<=m;j++){
			int x;
			cin>>x;
			row[i]+=x;
			col[j]+=x;
		}
	}
	for (long long i=1;i<=n;i++){
		a.push(row[i]);
	}
	for (long long i=1;i<=m;i++){
		b.push(col[i]);
	}
	for (long long i=1;i<=k;i++){
		long long t=a.top();
		a.pop();
		ca[i]=ca[i-1]+t;
		a.push(t-q*m);
		t=b.top();
		b.pop();
		cb[i]=cb[i-1]+t;
		b.push(t-q*n);
	}
	for (long long i=0;i<=k;i++){
		res=max(res,ca[i]+cb[k-i]-i*(k-i)*q);
	}
	cout<<res;
	return 0;
}
