
#include<bits/stdc++.h>

typedef long long LL;
using namespace std;
const int M = 1000000007;

int main()
{
LL n,i,j,m,p,k;

cin>>n>>m>>k>>p;

vector <LL> row(n),col(m);
LL t;
//LL arr[1001][1001];

for(i=0;i<n;i++)
 	for(j=0;j<m;j++)
 		{cin>>t;
 			row[i]+=t;
 			col[j]+=t;
 		}

priority_queue <LL> h1,h2;

for(i=0;i<n;i++)
	h1.push(row[i]);
for(i=0;i<m;i++)
	h2.push(col[i]);
	
LL e1=0,e2=0,A;
vector <LL> ro(k+1),co(k+1);

ro[0]=0;co[0]=0;

for(i=1;i<=k;i++)
{
ro[i]=ro[i-1]+h1.top();

h1.push(h1.top()-m*p);
h1.pop();
}


for(i=1;i<=k;i++)
{
co[i]=co[i-1]+h2.top();

h2.push(h2.top()-n*p);
h2.pop();
}

A=ro[0]+co[k]; 
for(i=0;i<=k;i++)
{
	//cout<<ro[i]<<' '<<co[k-i]<<endl;
	A=max(A,ro[i]+co[k-i]-(k-i)*i*p);
}

cout<<A<<endl;
}

