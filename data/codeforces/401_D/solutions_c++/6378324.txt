#include<bits/stdc++.h>

using namespace std;

#define FOR(ii,aa,bb) for(int ii=aa;ii<=bb;ii++)
#define lli long long int


lli n,m,a[20],dp[1<<19][100],d[10];
char c;

lli f(lli t,lli mod) {

	mod%=m;

	lli &r=dp[t][mod];

	if(r!=-1)
		return r;

	if(t==(1<<n)-1)
		return r=!mod;

	r=0;

	FOR(i,1,n)
	{
		if(t&1<<i-1)
			continue;

		if(!a[i] and !t)
			continue;

		if(i!=1 and a[i]==a[i-1] and !(t&(1<<i-2)))
			continue;

		r+=f(t|1<<i-1,mod*10+a[i]);
	}

	return r;

}

int main () {

	memset(dp,-1,sizeof(dp));

	while((c=cin.get())!=' ')
	{
		a[++n]=c-'0';
		d[a[n]]++;
	}

	sort(a+1,a+n+1);

	cin >> m;

	cout << f(0,0) << endl;

	return 0;

}
