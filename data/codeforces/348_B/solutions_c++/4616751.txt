#include <iostream>
#include <cstdio>
#include <vector>

#define MAXN 100005

using namespace std;

int n;
long long res, b[MAXN], c[MAXN];
vector<int> a[MAXN];

long long gcd(long long a, long long b)
{
  return (b == 0) ? a : gcd(b, a % b);
}

long long lcm(long long a, long long b)
{
  return a / gcd(a, b) * b;
}

int dfs(int u, int prev)
{
  c[u] = 1;
  if (b[u] == 0) 
    b[u] = 1LL << 50;
  else
    return 0;
  
  int p = 0;
  for (int i = 0; i < a[u].size(); i++)
    if (a[u][i] != prev)
    {
      p++;
      int v = a[u][i];
      dfs(v, u);
      if (b[v] == 0) 
      {
        c[v] = 1;
      }
      c[u] = lcm(c[u], c[v]);
      b[u] = min(b[u], b[v]);
      b[u] = (b[u] / c[u]) * c[u];
          }
  b[u] *= p;
  c[u] *= p;
}

main()
{
  cin >> n;
  for (int i = 1; i <= n; i++) 
  {
    cin >> b[i];
    res += b[i];
  }
  
  for (int i = 1; i < n; i++)
  {
    int u, v;
    cin >> u >> v;
    a[u].push_back(v);
    a[v].push_back(u);
  }
  
  dfs(1, 0);
  
  cout << res - b[1];
  //system("pause");
}