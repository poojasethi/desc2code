#include <iostream>
#include <vector>
#include <cstdlib>
using namespace std;

typedef long long ll;

ll gcd(ll a, ll b){
	if(a == 0){return b;}
	return gcd(b%a, a);
}

int n;
ll a[100005];
vector<int> adj[100005];

ll mas[100005];
ll tog[100005];

void calc(int v, int p){
	tog[v] = 1;
	mas[v] = a[v];
	
	ll figli = 0;
	
	for(int i=0; i<(int)adj[v].size(); i++) if(adj[v][i] != p){
		int u = adj[v][i];
		calc(u, v);
		tog[v] = tog[v]/gcd(tog[v],tog[u])*tog[u];
		mas[v] = mas[u];
		if(tog[v] > mas[u]){mas[v] = 0; tog[v] = 1; return;}
		figli++;
	}
	
	if(figli == 0) return;
	
	if(tog[v] <= 0){cout << "STRANO " << tog[v] << endl; exit(0);}
	
	for(int i=0; i<(int)adj[v].size(); i++) if(adj[v][i] != p){
		int u = adj[v][i];
		if(mas[u]/tog[v] < mas[v]) mas[v] = mas[u]/tog[v];
	}
	mas[v] *= tog[v]*figli;
	tog[v] *= figli;
}

int main(){
	ll w = 0;
	
	cin >> n;
	for(int i=0; i<n; i++) {cin >> a[i]; w+=a[i];}
	for(int i=0; i<n-1; i++){
		int x,y; cin >> x >> y; x--; y--;
		adj[x].push_back(y);
		adj[y].push_back(x);
	}
	
	calc(0, -1);
	cout << w - mas[0];
	
	return 0;
}
