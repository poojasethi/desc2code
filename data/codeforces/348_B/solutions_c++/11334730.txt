#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <cstring>

using namespace std;
typedef long long LL;
int n,x,y;
LL a[500005];
int to[500005],next[500005],b[500005];
LL f[500005];
int num;
LL sum;
void addedge(int x,int y)
{
	++num;to[num]=y;next[num]=b[x];b[x]=num;
}

void dfs(int u,int fa)
{
	int s=0; LL m=1e18,t;	f[u]=1;
	for (int i=b[u],v; v=to[i],i; i=next[i]) if (v!=fa)
	{
		s++,dfs(v,u),m=min(m,a[v]),t=__gcd(f[u],f[v]);
		if (f[u]/t>m/f[v]) return;
		f[u]*=f[v]/t;
	}
	if (!s) return;
	a[u]=m/f[u]*f[u]*s,f[u]*=s;
}
int main()
{
	num=0;
	scanf("%d",&n);
	for (int i=1;i<=n;++i) scanf("%I64d",&a[i]);
	for (int i=1;i<=n;++i) sum+=a[i];
	for (int i=1;i<n;++i)
	{
		scanf("%d%d",&x,&y);
		addedge(x,y);addedge(y,x);
	}
	dfs(1,0);
	printf("%I64d\n",sum-a[1]);
	return 0;
}
		  	 				      	  		 		 				