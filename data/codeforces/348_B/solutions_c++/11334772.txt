#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <cstring>

using namespace std;
typedef long long LL;
int n,x,y;
LL a[500005];
int to[500005],next[500005],b[500005];
LL f[500005];
int num;
LL sum;
void addedge(int x,int y)
{
	++num;to[num]=y;next[num]=b[x];b[x]=num;
}

void dfs(int x,int fa)
{
	int son=0;
	LL minx=1e18,dq;
	f[x]=1;
	for (int i=b[x];i!=0;i=next[i])
	{
		int y=to[i];
		if (y==fa) continue;
		son++;dfs(y,x);
		minx=min(minx,a[y]);
		LL dq=__gcd(f[x],f[y]);
		if (f[x]/dq>minx/f[y]) return;
		f[x]=f[x]*f[y]/dq;
	}
	if (!son) return;
	a[x]=minx/f[x]*f[x]*son;
	f[x]*=son;
}
int main()
{
	num=0;
	scanf("%d",&n);
	for (int i=1;i<=n;++i) scanf("%I64d",&a[i]);
	for (int i=1;i<=n;++i) sum+=a[i];
	for (int i=1;i<n;++i)
	{
		scanf("%d%d",&x,&y);
		addedge(x,y);addedge(y,x);
	}
	dfs(1,0);
	printf("%I64d\n",sum-a[1]);
	return 0;
}
 			   	 	 				 		 				 	 	 	