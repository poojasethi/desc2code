//In the name of Allah

#include <bits/stdc++.h>

#define ll long long
#define ld long double

using namespace std;

const int MAXN=100*100*10*2+10;
ll t[MAXN],mn[MAXN],sib[MAXN];
bool mark[MAXN];
vector <ll>a[MAXN];

void dfs(int v){
    //cerr<<v; 
    mark[v]=true;
    
    ll p=1,gcd=1,kmm=1,m=1e+17,cnt=0;
    
    for(int i=0;i<a[v].size();i++)
        if(mark[a[v][i]] == false){
            dfs(a[v][i]); 
			int u=a[v][i];  
    		m=min(m,sib[u]);
    		kmm=kmm/__gcd(kmm,t[u])*t[u];
	    	cnt++;
		}
   //cerr<<sib[v]<<endl;
   if(a[v].size()!=1 or v==0){
	    t[v]=max((ll)1,kmm*cnt); 
 	  	sib[v]=(m/kmm)*kmm*cnt;
	}
}


int main(){
    int n;
    cin>>n;
    ll sum=0;
    for(int i=0;i<n;i++){
        cin>>sib[i];
        sum+=sib[i];
        t[i]=1;
    }
    int x,y;
    for(int i=0;i<n-1;i++){
        cin>>x>>y;
        a[--x].push_back(--y);
        a[y].push_back(x);
    }
    dfs(0);
    cout<<sum-sib[0]<<endl;
    return 0;
}
	 	 	 		 		     	 	 	  		 	