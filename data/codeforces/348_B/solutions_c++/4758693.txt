#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<iostream>
#include<algorithm>
#include<vector>
#include<cmath>
#define LL long long
using namespace std;
const int MAXN=100005;
vector<int> v[MAXN];
LL a[MAXN],tot,q=1,ma=100000000000000000;
void dfs(int x,int fa,LL d)
{
    q=q/__gcd(q,d)*d;
    if(d>tot||d<0){cout<<tot; exit(0);}
    if(v[x].size()==1&&x>1)ma=min(ma,d*a[x]);
    for(int i=0;i<v[x].size();i++)
		if(v[x][i]!=fa)
			dfs(v[x][i],x,d*(v[x].size()-(x!=1)));
}
int main()
{
	int n;
	scanf("%d",&n);
	for(int i=1;i<=n;i++)
		scanf("%I64d",&a[i]),
		tot+=a[i];
	int x,y;
	for(int i=1;i<n;i++)
		scanf("%d%d",&x,&y),
		v[x].push_back(y),
		v[y].push_back(x);
	dfs(1,0,1);
	printf("%I64d\n",tot-ma/q*q);
}