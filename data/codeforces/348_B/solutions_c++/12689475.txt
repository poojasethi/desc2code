#include<iostream>
#include<math.h>
#include<algorithm>
#include<stdio.h>
#include<map>
#include<vector>
#include<set>
#include<iomanip>
#define F first
#define S second
#define P system("PAUSE");
#define H return 0;
#define pb push_back
using namespace std;
const long long A=(long long)1e18,N=228228;

vector<long long> b[N];
long long a[N],d[N],o,x,y,i,j,n,m;

void rec(long long v,long long pr){
    if(b[v].size()==1 && b[v][0]==pr){d[v]=1;return;}
    long long t,i,k=0,e=A;d[v]=1;
    for(i=0;i<b[v].size();i++)if(b[v][i]!=pr){
        rec(b[v][i],v),k++;
        e=min(e,a[b[v][i]]);
        if(!d[b[v][i]])d[v]=0;else d[v]=(d[v]*d[b[v][i]])/__gcd(d[v],d[b[v][i]]);
    }
    if(d[v])t=e/d[v];else t=0;
    for(i=0;i<b[v].size();i++)if(b[v][i]!=pr)o+=a[b[v][i]]-t*d[v];
    a[v]=t*d[v]*k;
    d[v]*=k;
}

int main(){
    cin>>n;
    for(i=0;i<n;i++)scanf("%lld",&a[i]);
    for(i=0;i<n-1;i++)scanf("%lld%lld",&x,&y),x--,y--,b[x].pb(y),b[y].pb(x);
    rec(0,-1);
    cout<<o<<"\n";
}
