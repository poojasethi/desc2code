#include<bits/stdc++.h>
#define st first
#define nd second
#define mp make_pair
#define pb push_back
#define endl '\n'
#define endll puts("")
#define mod 1000000007
#define mp3(x,y,z) mp(x,mp(y,z))
#define pii pair< int , int > 
#define orta ((bas+son)/2)
#define sol (root+root)
#define sag (root+root+1)
using namespace std;
typedef long long ll;
const int N = 1e5+3;
ll n,m,i,j,k,l,s,t,d,u,ii,jj,x,y,z,h[N],hh[N];
vector<ll> V[N];
void dfs(ll x,ll root=0)
{
	ll i,u=V[x].size(),m=1e18,t=1,k=1;
	if(root and u==1){hh[x]=1;return;}
	for(i=0;i<u;i++)
		if(V[x][i]!=root)
		{
			dfs(V[x][i],x);
			m=min(m,h[V[x][i]]);
			k=__gcd(t,hh[V[x][i]]);
			t=t*hh[V[x][i]]/k;
		}
	if(t)
		m-=m%t;
	for(i=0;i<u;i++)
		if(V[x][i]!=root)
		{
			s+=h[V[x][i]]-m;
			h[V[x][i]]=m;
			h[x]+=m;
		}
	hh[x]=t*(u-1);
}
int main()
{
	cin>>n;
	for(i=1;i<=n;i++)
		scanf("%lld",h+i);
	for(i=1;i<n;i++)
	{
		scanf("%lld%lld",&x,&y);
		V[x].pb(y);
		V[y].pb(x);
	}
	dfs(1);
	cout<<s<<endl;
}
