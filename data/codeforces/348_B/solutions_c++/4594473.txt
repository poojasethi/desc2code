#include <cstdio>
#include <algorithm>
#define ll long long
#define maxn 100005
#define lcm(a,b) (a/__gcd(a,b)*b)
using namespace std;

int N,head[maxn],lk[maxn*2],next[maxn*2];
ll S,a[maxn],f[maxn];

void add(int u,int v,int t) {lk[t]=v,next[t]=head[u],head[u]=t;}

void init()
{
	scanf("%d",&N);
	for (int i=1; i<=N; i++) scanf("%I64d",&a[i]),S+=a[i];
	for (int i=1,u,v; i<N; i++) scanf("%d%d",&u,&v),add(u,v,i),add(v,u,i+N-1);
}

void dfs(int u,int fa)
{
	int s=0; ll m=1e18,t;	f[u]=1;
	for (int i=head[u],v; v=lk[i],i; i=next[i]) if (v!=fa)
	{
		s++,dfs(v,u),m=min(m,a[v]),t=__gcd(f[u],f[v]);
		if (f[u]/t>m/f[v]) return;
		f[u]*=f[v]/t;
	}
	if (!s) return;
	a[u]=m/f[u]*f[u]*s,f[u]*=s;
}

void doit()
{
	dfs(1,0);
	printf("%I64d\n",S-a[1]);
}

int main()
{
	init();
	doit();
	return 0;
}
