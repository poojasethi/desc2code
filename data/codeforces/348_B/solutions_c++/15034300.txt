//In the Name of God ;

#include<bits/stdc++.h>

using namespace std;

#define int long long

const int Maxn=2e5+7;
const int Inf=1e15+7;

int dp[Maxn],a[Maxn];
int ver[Maxn];
vector<int>V[Maxn];

void dfs(int u,int par = 0)
{
  int t=0;
  dp[u]=Inf;
  for(int i=0;i<V[u].size();i++)
    {
      int v=V[u][i];
      if(v!=par)
	{
	  t++;
	  dfs(v,u);
	  if(!dp[v])
	    {
	      dp[u]=0;
	      ver[u]=1;
	      return ;
	    }
	  dp[u]=min(dp[v],dp[u]);
	  ver[u]=(ver[v]*ver[u])/(__gcd(ver[v],ver[u]));
	}
    }
  if(!t)
    {
      dp[u]=a[u];
      ver[u]=1;
      return ;
    }
  dp[u]=(dp[u]/ver[u])*t*ver[u]+a[u];
  ver[u]*=t;
}

main()
{
  int n,sum=0;
  cin>>n;
  for(int i=0;i<n;i++)
    cin>>a[i+1],sum+=a[i+1],ver[i+1]=1;
  for(int u,v,i=0;i<n-1;i++)
    {
      cin>>u>>v;
      V[u].push_back(v);
      V[v].push_back(u);
    }
  dfs(1);
  cout<<sum-dp[1]<<endl;
  return 0;
}
