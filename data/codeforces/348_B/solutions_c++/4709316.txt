#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<vector>
#define N 100005
using namespace std;
typedef long long LL;
LL a,b,c,d,f,g,h,i,j,k;
LL G[N],H[N];
LL father[N];
LL D=1,E=-1;
vector<LL>GG[N];

LL LCM(LL x,LL y)
{
    return x*y/__gcd(x,y);
}
void soso(LL x,LL y)
{
    LL ii,jj,kk;
    D=LCM(D,y);
    if(y>h || y<0) {cout<<h<<endl;exit(0);}
    if(GG[x].size()==1 && GG[x][0]==father[x] && (E==-1 || E>y*G[x])) E=y*G[x];
    for(ii=0;ii<GG[x].size();ii++)
    {
        jj=GG[x][ii];
        if(jj==father[x]) continue;
        father[jj]=x;
        soso(jj,y*(x==1?GG[x].size():GG[x].size()-1));
    }
}

int main()
{
    cin>>a;
    for(i=1;i<=a;i++) cin>>G[i];
    for(i=1;i<=a;i++) h+=G[i];
    for(i=1;i<a;i++)
    {
        cin>>c>>d;
        GG[c].push_back(d);
        GG[d].push_back(c);
    }
    soso(1,1);
    cout<< h- E/D*D <<endl;
    return 0;
}
