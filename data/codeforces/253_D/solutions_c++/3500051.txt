#include <iostream>
#include <cstdio>

using namespace std;

const int tope=500;

typedef long long int ll;

int n,m,k;
int v[tope][tope];
int suma[tope][tope];
int vistos[26];

int main()
{
  freopen("input.txt","r",stdin);
  freopen("output.txt","w",stdout);
  cin>>n>>m>>k;
  for (int i=1;i<=n;i++) {
    for (int j=1;j<=m;j++) {
      char c;
      cin>>c;
      v[i][j]=c-'a';
      suma[i][j]=suma[i-1][j]+suma[i][j-1]-suma[i-1][j-1]+(v[i][j]==0);
    }
  }
  ll count=0;
  for (int i1=1;i1<=n;i1++) {
    for (int i2=i1+1;i2<=n;i2++) {
      for (int t=0;t<26;t++) vistos[t]=0;
      int numas=0;
      int jj=1;
      for (int j=1;j<=m;j++) {
	numas+=suma[i2][j]-suma[i2][j-1]-suma[i1-1][j]+suma[i1-1][j-1];
	while (numas>k and jj<j) {
	  numas-=suma[i2][jj]-suma[i2][jj-1]-suma[i1-1][jj]+suma[i1-1][jj-1];
	  if (v[i1][jj]==v[i2][jj]) vistos[v[i1][jj]]--;
	  jj++;
	}
	if (v[i1][j]==v[i2][j]) {
	  int t=v[i1][j];
	  if (numas<=k)
	    count+=vistos[t];
	  vistos[t]++;
	}
      }
    }
  }
  cout<<count<<endl;
}
