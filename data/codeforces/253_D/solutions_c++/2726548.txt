#include<iostream>
#include<cstdio>
using namespace std;

int n,m,k,i,j,h,p,H,sum[500][500],till[500];
char a[500][500];
short S[401][401][401];
long long ans;

void read(char &k)
{
	for (k=getchar();k<=32;k=getchar());
}

int ss(int x,int y,int xx,int yy)
{
	return sum[xx][yy]-sum[xx][y-1]-sum[x-1][yy]+sum[x-1][y-1];
}

int main()
{freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	scanf("%d%d%d",&n,&m,&k);
	for (i=1;i<=n;i++)
	for (j=1;j<=m;j++)	read(a[i][j]);
	for (i=1;i<=n;i++)
	for (j=1;j<=m;j++)
	sum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+(a[i][j]=='a');
	for (i=1;i<=n;i++)
	for (j=i+1;j<=n;j++)
	{
		for (p='a';p<='z';p++)	till[p]=0;
		for (p=1;p<=m;p++)
		{
			S[i][j][p]=S[i][j][till[a[i][p]]]+(a[i][p]==a[j][p]);
			till[a[i][p]]=p;
		}
	}
	for (i=1;i<=n;i++)
	for (j=1;j<=m;j++)
	{
		for (h=m,H=m,p=i+1;p<=n;p++)
		if (a[p][j]==a[i][j])
		{
			while (ss(i,j,p,h)>k)	h--;
			if (h<=j)	break;
			H=min(H,h);
			while (a[i][H]!=a[i][j])	H--;
			if (H<=j)	break;
			ans+=S[i][p][H]-S[i][p][j];
		}
	}
	cout<<ans<<endl;
}
