#include <iostream>
#include <cstdio>

#define N 410

using namespace std;

int n, m, k, s[N][N] = {};
char a[N][N];

int main(){
    freopen("input.txt", "r", stdin);
    freopen("output.txt", "w", stdout);

    cin >> n >> m >> k;
    for (int i = 0; i < n; i++) cin >> a[i];

    for (int i = 0; i < n; i++)
        for (int j = 0; j < m; j++)
            s[i][j + 1] = (a[i][j] == 'a') + s[i][j];

    long long ans = 0;
    for (int i = 0; i < m; i++)
        for (int j = i + 1; j < m; j++){
            int c[30] = {}, sum = 0;
            for (int l = 0, r = -1; l < n; l++){
                while (r + 1 < n && sum + s[r + 1][j + 1] - s[r + 1][i] <= k){
                    r++; sum += s[r][j + 1] - s[r][i];
                    if (a[r][i] == a[r][j]) c[a[r][i] - 'a']++;
                }
                if (a[l][i] == a[l][j]){
                    c[a[l][i] - 'a']--;
                    if (l < r) ans += c[a[l][i] - 'a'];
                }
                sum -= s[l][j + 1] - s[l][i];
            }
        }
    cout << ans;
}
