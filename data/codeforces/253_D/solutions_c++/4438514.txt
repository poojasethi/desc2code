#include<stdio.h>
#include<string.h>
#include<algorithm>
using namespace std;
#define MAXN 405
typedef __int64 LL;
#define LLF "%I64d"
int N,M,K;
char map[MAXN][MAXN];
int sum[MAXN][MAXN];
int que[MAXN],q1,q2;
int cnt[26]; LL res;
int getsum(int x1,int y1,int x2,int y2){
  return sum[x2][y2]-sum[x1-1][y2]-sum[x2][y1-1]+sum[x1-1][y1-1];
}
void mon_run(int a,int b,int n,int len){
  int i;
  memset(cnt,0,sizeof(cnt));
  for(i=len+1,q1=0,q2=-1;i<=n;i++){
    if(map[a][i-len]==map[b][i-len]) cnt[map[a][que[++q2]=i-len]-'a']++;
    while(q1<=q2&&getsum(a,que[q1],b,i)>K) cnt[map[a][que[q1++]]-'a']--;
    if(map[a][i]==map[b][i]) res+=cnt[map[a][i]-'a'];
  }
}
int main(){
  int i,j;
  freopen("input.txt","r",stdin);
  freopen("output.txt","w",stdout);
  while(scanf("%d%d%d",&N,&M,&K)!=EOF){
    for(i=1;i<=N;i++)
      for(j=1;j<=M;j++){
        scanf(" %c",&map[i][j]);
        sum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+(map[i][j]=='a');
      }
    for(i=1,res=0;i<=N;i++)
      for(j=i+1;j<=N;j++)
        mon_run(i,j,M,1);
    printf(LLF"\n",res);
  }
  return 0;
}
