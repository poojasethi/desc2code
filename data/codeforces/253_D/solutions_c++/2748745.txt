#include <cstdio>
#include <deque>
#include <iostream>

using namespace std;

const int MAXN = 410;

int n,m,k;

int s[MAXN][MAXN];
char map[MAXN][MAXN];
deque<int> q[MAXN];

int main(){
	
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	
	scanf("%d %d %d",&n,&m,&k);
	
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			scanf(" %c",&map[i][j]);
	
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
		{
			s[i][j]=(map[i][j]=='a')+s[i][j-1]+s[i-1][j]-s[i-1][j-1];
		}
	
	long long res=0LL;
	
	for(int i=1,tmp;i<=n;i++)
		for(int j=i+1;j<=n;j++)
		{
			for(int l='a';l<='z';l++)
				while(!q[l].empty())
					q[l].pop_back();
			for(int l=1;l<=m;l++){
				
				if(map[i][l]!=map[j][l])
					continue;
					
				tmp=s[j][l]-s[i-1][l];
				
				while(!q[(int)map[i][l]].empty() && tmp-q[(int)map[i][l]].front()>k)
					q[(int)map[i][l]].pop_front();
				
				res+=q[(int)map[i][l]].size();
				
				q[(int)map[i][l]].push_back(s[j][l-1]-s[i-1][l-1]);
				
			}
			
		}
	
	cout << res << endl;
	
	return 0;
	
}
