#include<vector>
#include<iterator>
#include<algorithm>
#include<iostream>
#include<fstream>
using   namespace   std;
int main(void)
{
    ifstream    fin("input.txt");
    ofstream    fout("output.txt");
    char    M[401][401];
    long    n,m,z,x,y,S[401][401]={};
    vector<long>V[26];
    vector<long>::iterator  i,j;
    for(long    long    s;fin>>n>>m>>z;fout<<s<<'\n'){
        for(s=x=0;n^x++;)   for(y=0;m^y;S[x][y]=('a'==M[x][y])+S[x][y-1]+S[x-1][y]-S[x-1][y-1])
            fin>>M[x][++y];
        for(++z;1^--x;) for(y=x;--y;){
            for(n=m;n;--n)  if(M[y][n]==M[x][n])    V[M[x][n]-'a'].push_back(n);
            for(;26^n;s+=(j-i-1)*(j-i)>>1,V[n++].clear())
                for(j=i=V[n].begin();V[n].end()>j;s+=j-++i)
                    for(j=max(j,1+i);V[n].end()>j&&S[x][*i]-S[x][*j-1]-S[y-1][*i]+S[y-1][*j-1]<z;++j);
        }
    }
    return  0;
}