#pragma warning (disable:4786)
#include <cstdio>
#include <cstring>
#include <vector>
#include <algorithm>
#include <map>
#include <set>
using namespace std;
const int maxn = 200010;
int h,m,n;
int vis[maxn],seq[maxn],rank[maxn];
set<int> a[maxn];
map<int,pair<int,int> > history;
void release(pair<int,int> p){
	a[p.first].insert(p.second);
}
int main()
{
	int i,r=0,id,hash;
	__int64 ans=0;
	scanf("%d%d%d",&h,&m,&n);
	for(i=0;i<h;i++)
	if(!vis[i])
	{
		for(int c=0,j=i;!vis[j];j=(j+m)%h,c++)
		{
           rank[j]=r;
		   seq[j]=c;
		   a[r].insert(c);
		   vis[j]=1;
		}
		r++;
	}char s[5];
	while(n--)
	{
		scanf("%s%d",s,&id);
		if(s[0]=='-')	release(history[id]);
		else 
		{
			scanf("%d",&hash);
			int A=rank[hash],B=seq[hash];
			set<int> ::iterator it=a[A].lower_bound(B);
			if(it==a[A].end())
			{
				it=a[A].begin();
                ans+=h/r-B+*it;
			}
			else	ans+=*it-B;
	        history[id]=make_pair(A,*it);//要先映射再删除，不然it就为空了
			a[A].erase(it);
		}
	}
	printf("%I64d\n",ans);
	return 0;
}