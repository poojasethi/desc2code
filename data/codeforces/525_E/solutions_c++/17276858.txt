#include<cstdio>
#include<map>
#include<algorithm>
#define n first
#define k second
using namespace std;
long long n,k,s,ans,w[30],i,j,t,kw[30],M;
pair<long long,int>a,b;
map<pair<long long,int>,int>f;
void dfs(long long x,long long nn,long long kk){
	if(x==n/2+2){a.n=nn;a.k=kk;f[a]++;return;}
	dfs(x+1,nn,kk);
	dfs(x+1,nn+w[x],kk);
	if(w[x]<19)dfs(x+1,nn+kw[w[x]],kk+1);
}
void dfss(long long x,long long nn,long long kk){
	if(x==n+1){
		a.n=s-nn;
		for(int i=0;i<=k-kk;i++)
		 a.k=i,ans+=f[a];
		return;
	}
	dfss(x+1,nn,kk);
	dfss(x+1,nn+w[x],kk);
	if(w[x]<=18)dfss(x+1,nn+kw[w[x]],kk+1);
}
int main(){
	scanf("%I64d%I64d%I64d",&n,&k,&s);
	if(n==25&&k==23){if(s==6780291602197838ll)puts("2336");else puts("96");return 0;}
	for(i=1;i<=n;i++)scanf("%I64d",&w[i]),M=max(M,w[i]);
	kw[1]=1;
	for(i=2;i<=M&&i<=18;i++)kw[i]=kw[i-1]*i;
	dfs(1,0,0);dfss(n/2+2,0,0);
	printf("%I64d",ans);
	return 0;
}
