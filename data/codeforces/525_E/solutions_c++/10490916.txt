#include <cstdio>
#include <map>
using namespace std;
typedef long long ll;

map<ll, ll> d[30];
ll fac[30], a[30], n, s, k, e, ans;

void dfs1(int x, int ke, ll sum) {
    if (sum > s || ke > k) return;
    if (x == e) {
        d[ke][sum]++;
        return;
    }
    if (a[x] <= 19)
        dfs1(x+1, ke+1, sum+fac[a[x]]);
    dfs1(x+1, ke, sum);
    dfs1(x+1, ke, sum+a[x]);
}

void dfs2(int x, int ke, ll sum) {
    if (sum > s || ke > k) return;
    if (x == e) {
        for (int i = 0; i <= k-ke; i++)
            ans += d[i][s-sum];
            return;
    }
    if (a[x] <= 19)
        dfs2(x+1, ke+1, sum+fac[a[x]]);
    dfs2(x+1, ke, sum);
    dfs2(x+1, ke, sum+a[x]);
}

int main() {
    fac[0] = 1;
    for (int i = 1; i <= 20; i++)
        fac[i] = fac[i-1]*i;
    scanf("%lld%lld%lld", &n, &k, &s);
    for (int i = 0; i < n; i++)
        scanf("%lld", &a[i]);
    e = n/2 + n%2;
    dfs1(0, 0, 0);
    e = n;
    dfs2(n/2+n%2, 0, 0);
    printf("%lld\n", ans);
    return 0;
}
