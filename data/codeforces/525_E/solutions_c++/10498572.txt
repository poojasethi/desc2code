//meet-in-the-met
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
ll tong;
int n,k;
ll giaithua[20];
map<ll,int> sum[30];
int board[30];
ll ans=0;
void dfs1(int a,int b,ll c)
{   //cout << a << " " << b << " " << c << " dfs1" << endl;
    if(c>tong) return;
	if(a==n/2) sum[b][c]++;
	else
	{
		dfs1(a+1,b,c);
		dfs1(a+1,b,c+board[a]);
		if(board[a]<19&&b<k)
			dfs1(a+1,b+1,c+giaithua[board[a]]);
	}
}

void dfs2(int a,int b,ll c)
{
	//cout << a << " " << b << " " << c << " dfs2" << endl;
	if(c>tong) return;
	if(a==n)
	{
		for(int x=0;x<=k-b;++x)
		if(sum[x].count(tong - c))
		ans+=sum[x][tong-c];
    }
	else
	{
		dfs2(a+1,b,c);
		dfs2(a+1,b,c+board[a]);
		if(board[a]<19&&b<k)
		{
			dfs2(a+1,b+1,c+giaithua[board[a]]);
		}
	}
}

int main()
{
	ios_base::sync_with_stdio(false);
	giaithua[0]=1;
	for(int x=1;x<20;++x)
		giaithua[x]=giaithua[x-1]*x;
	cin >> n >> k >> tong;
	for(int x=0;x<n;++x)
		cin >> board[x];
	dfs1(0,0,0);
	dfs2(n/2,0,0);
	cout << ans << endl;
}