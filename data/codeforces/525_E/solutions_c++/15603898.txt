#include <bits/stdc++.h>
using namespace std;
#define ll long long
ll pp[30],s;
int k,n,lim;ll ret=0,a[30];
map<ll,ll> dp[30];
void sol(int ind,ll v,int KK,int f){
	if(v>s||KK>k)return;
	if(ind>lim){
		if(f){
			int i;
			for(i=0;i<=k-KK;++i)
				if(dp[i].count(s-v))
					ret+=dp[i][s-v];
		}
		else{
			if(!dp[KK].count(v))dp[KK][v]=0;
			++dp[KK][v];
		}
		return;
	}
	if(a[ind]<=18)
		sol(ind+1,v+pp[a[ind]],KK+1,f);
	sol(ind+1,v,KK,f);
	sol(ind+1,v+a[ind],KK,f);
}
int main(){
	int i,j;
	cin>>n>>k>>s;
	pp[1]=1;
	for(i=2;i<19;++i)pp[i]= pp[i-1]*i;
	lim = n/2;
	for(i=1;i<=n;++i)cin>>a[i];
	sol(1,0,0,0);
	lim= n;
	sol(n/2+1,0,0,1);
	cout<<ret<<endl;
}
