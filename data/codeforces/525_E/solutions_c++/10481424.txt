#include<bits/stdc++.h>
#define LL long long
using namespace std;
int n,k;LL S;
int a[30];
LL fac[20];
LL ans;
int n1,n2;
map<LL,int> Map1[30],Map2[30];
void DFS1(int x,LL c,int p)
{
	if(c>S||p>k)return;
	if(x==n1)
	{
		Map1[p][c]++;
		return;
	}
	DFS1(x+1,c,p);
	DFS1(x+1,c+a[x],p);
	if(a[x]<=18)DFS1(x+1,c+fac[a[x]],p+1);
}
void DFS2(int x,LL c,int p)
{
	if(c>S||p>k)return;
	if(x==n)
	{
		for(int i=p;i<=k;i++)Map2[i][c]++;
		return;
	}
	DFS2(x+1,c,p);
	DFS2(x+1,c+a[x],p);
	if(a[x]<=18)DFS2(x+1,c+fac[a[x]],p+1);

}
int main()
{
//	freopen("input.txt","r",stdin);
	fac[0]=1;
	for(LL i=1;i<=18;i++)fac[i]=fac[i-1]*i;
	cin>>n>>k>>S;
	{
		for(int i=0;i<=k;i++){Map1[i].clear();Map2[i].clear();}
		for(int i=0;i<n;i++)scanf("%d",&a[i]);
		sort(a,a+n);
		n1=(n+1)/2,n2=n-n1;
		ans=0;
		DFS1(0,0,0);
		DFS2(n1,0,0);
		for(int i=0;i<=k;i++)
			for(map<LL,int>::iterator it=Map1[i].begin();it!=Map1[i].end();it++)
				if(Map2[k-i].find(S-(it->first))!=Map2[k-i].end())
					ans+=(LL)(it->second)*Map2[k-i][S-(it->first)];
		printf("%I64d\n",ans);
	}
}
