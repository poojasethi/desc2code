#include<bits/stdc++.h>
using namespace std;
#define int long long
map<int,int> dp[30];
int l,ans,n,a[50],s,k,fac[30];
void f1(int x,int ke,int sum){
    if(ke>k||sum>s)return;
    //cout<<x<<' '<<ke<<' '<<sum<<endl;
    if(x==l){
        ++dp[ke][sum];
        return;
    }
    if(a[x]<=19){
        f1(x+1,ke+1,sum+fac[a[x]]);
    }
    f1(x+1,ke,sum);
    f1(x+1,ke,sum+a[x]);
}
void f2(int x,int ke,int sum){
    if(ke>k||sum>s)return;
    if(x==l){
        for(int i=0;i<=k-ke;++i)
            ans+=dp[i][s-sum];
        return;
    }
    if(a[x]<=19){
        f2(x+1,ke+1,sum+fac[a[x]]);
    }
    f2(x+1,ke,sum);
    f2(x+1,ke,sum+a[x]);
}
main(){
    cin>>n>>k>>s;
    for(int i=1;i<=n;++i)
        cin>>a[i];
    fac[0]=1;
    for(int i=1;i<=20;++i)
        fac[i]=fac[i-1]*i;
    l=n/2+n%2+1;
    f1(1,0,0);
    l=n+1;
    f2(n/2+n%2+1,0,0);
    cout<<ans;
}
