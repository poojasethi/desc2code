#include<bits/stdc++.h>
#define ll long long 
using namespace std;
long long fact[20];
map<long long,long long> m[40];
ll ans=0,s;int n,k,a[30];
void calc()
{
  ll i;fact[0]=1;fact[1]=1;
  for(i=2;i<=18;i++)
    fact[i]=i*fact[i-1];
}
void meet1(int id,int sel,ll sum)
{
  if(sel>k)
    return;
  if(sum>s)
    return;
  if(id==(n/2))
  {  m[sel][sum]++;
    return;
  }
  meet1(id+1,sel,sum);
    meet1(id+1,sel,sum+a[id]);
    if(a[id]<=18)
    meet1(id+1,sel+1,sum+fact[a[id]]);
}
void meet2(int id,int sel,ll sum)
{
  if(sel>k)
    return ;
  if(sum>s)
    return;
  if(id==n)
  {
    for(int i=0;i<=(k-sel);i++)
      if(m[i].count(s-sum)>0)
      {
	ans+=m[i][s-sum];
      }
      return;
  }
  meet2(id+1,sel,sum);
    meet2(id+1,sel,sum+a[id]);
    if(a[id]<=18)
    meet2(id+1,sel+1,sum+fact[a[id]]);
}
int main()
{
  calc();	
  cin>>n>>k>>s;
  int i;
  for(i=0;i<n;i++)
    cin>>a[i];
  
  meet1(0,0,0);
  meet2((n/2),0,0);
  cout<<ans;
  return 0;
}