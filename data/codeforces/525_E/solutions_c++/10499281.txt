#include<iostream>
#include<math.h>
#include<algorithm>
#include<stdio.h>
#include<map>
#include<vector>
#include<set>
#define F first
#define S second
#define P system("PAUSE");
#define H return 0;
#define pb push_back
using namespace std;
const long long K=18,A=100000000000000LL,N=100;

map<long long,int> d[N];
long long b[N],c[N],fact[N],ko,g,i,r,o,a[N],j,n,m;

void rec(long long k,long long pr){
	if(ko>m)return;
	if(g>r)return;
	if(k==pr){
		if(pr!=n){
			d[ko][g]++;
		}else{
			long long i;
			for(i=0;i<=m-ko;i++)o+=d[i][r-g];
		}		
		return;
	}
	rec(k+1,pr);
	g+=a[k],rec(k+1,pr),g-=a[k];
	if(a[k]<=K)g+=fact[a[k]],ko++,rec(k+1,pr),ko--,g-=fact[a[k]];
}

int main(){
	cin>>n>>m>>r;
	for(i=0;i<n;i++)cin>>a[i];
	fact[1]=1;
	for(i=2;i<=K;i++)fact[i]=i*fact[i-1];
	if(n<20)rec(0,n/2),rec(n/2,n);else rec(0,n/2+n%2),rec(n/2+n%2,n);
	cout<<o;
}
