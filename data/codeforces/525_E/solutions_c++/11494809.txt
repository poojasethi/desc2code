#include<bits/stdc++.h>
using namespace std;
#define ll long long
ll S,b[50];int a[30],n,k,o;
ll ans;map<ll,int>mp;
vector<ll>p[30],q[30];
void get(int pre,ll sum,int s){
	if(sum>S||s>k)return;
	if(pre==o)p[s].push_back(sum);
	else{
		get(pre+1,sum,s);
		get(pre+1,sum+a[pre],s);
		if(a[pre]<19)get(pre+1,sum+b[a[pre]],s+1);
	}
}
int main(){
	b[0]=1;
	for(int i=1;i<19;++i)b[i]=b[i-1]*i;
	scanf("%d%d%I64d",&n,&k,&S);
	for(int i=0;i<n;++i)scanf("%d",&a[i]);
	o=n/2,get(0,0,0),reverse(a,a+n);o=n-o;
	swap(p,q),get(0,0,0);
	for(int i=k;i>=0;--i){
		for(int j=0;j<q[k-i].size();++j)++mp[S-q[k-i][j]];
		for(int j=0;j<p[i].size();++j)ans+=mp[p[i][j]];
	}
	printf("%I64d\n",ans);
}
