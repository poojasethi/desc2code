#include<cstdio>
#include<cstring>
#include<map>
#define ll long long

using namespace std;
const int N=51;
int n,m,cnt,LN,a[N];ll S,f[N],ans;
bool flag;
map<ll,int>Index[N];
void Dfs(int kn,int km,ll now){
	if (now>S) return;
	if (kn>LN){
		if (!flag) Index[km][now]++;
			else for (int i=0;i+km<=m;i++) ans+=Index[i][S-now];
		return;
	}
	if (km<m && a[kn]<cnt) Dfs(kn+1,km+1,now+f[a[kn]]);
	Dfs(kn+1,km,now+a[kn]);
	Dfs(kn+1,km,now);
}
int main(){
	scanf("%d%d%I64d",&n,&m,&S);
	for (f[cnt=1]=1;f[cnt]<=S;cnt++) f[cnt+1]=(cnt+1)*f[cnt];
	for (int i=1;i<=n;i++) scanf("%d",&a[i]);
	LN=(n+1)/2;Dfs(1,0,0);
	LN=n;flag=true;Dfs((n+1)/2+1,0,0);
	printf("%I64d\n",ans);
}
