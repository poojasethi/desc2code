#include <bits/stdtr1c++.h>
using namespace std;
#define ll long long

int i, n, m, k;
ll s, ans, fac[19], ar[25];
map <ll,int> mp[30];

void bt(int i, int lim, int r, ll sum, bool flag){
  if(r > k || sum > s) return;
  if(i == lim){
    if(flag) mp[r][sum]++;
    else for(i = 0;(i + r) <= k;i++) ans += mp[i][s - sum];
    return;
  }
  bt(i + 1, lim, r, sum, flag); bt(i + 1, lim, r, sum + ar[i], flag);
  if(ar[i] < 19) bt(i + 1, lim, r + 1, sum + fac[ar[i]], flag);
}

int main(){
  fac[0]++;
  for(i = 1; i < 19; i++) fac[i] = (fac[i - 1] * i);
  cin >> n >> k >> s;  
  for(i = 0; i < n; i++) cin >> ar[i]; sort(ar,ar+n);
  for(i = 0; i < n/4; i++) swap(ar[i] , ar[i + n / 2]);
  ans = 0, m = n >> 1;
  bt(0, m, 0, 0, true); bt(m, n, 0, 0, false);
  cout << ans << endl;
}