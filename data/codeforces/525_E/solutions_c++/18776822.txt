#include <cstdio>
#include <map>
using namespace std;
map <long long,long long> mp[26];
long long jc[20],s,ans;
int n,k,a[26];
void dfs1(int now,int cnt,long long s1){
	if (s1>s || cnt>k) return;
	if (now==n/2+1){
		mp[cnt][s1]++;
		return;
	}
	dfs1(now+1,cnt,s1);
	dfs1(now+1,cnt,s1+a[now]);
	if (a[now]<=18) dfs1(now+1,cnt+1,s1+jc[a[now]]);
}
void dfs2(int now,int cnt,long long s2){
	if (s2>s || cnt>k) return;
	if (now==n+1){
		for (int i=0;i+cnt<=k;i++){
			if (mp[i].count(s-s2)) ans+=mp[i][s-s2];	
		}
		return;
	}
	dfs2(now+1,cnt,s2);
	dfs2(now+1,cnt,s2+a[now]);
	if (a[now]<=18) dfs2(now+1,cnt+1,s2+jc[a[now]]);
}
int main(){
	//freopen("Anya and Cubes.in","r",stdin);
	//freopen("Anya and Cubes.out","w",stdout);
	scanf("%d%d%I64d",&n,&k,&s);
	for (int i=1;i<=n;i++) scanf("%d",&a[i]); jc[0]=1;
	for (int i=1;i<=18;i++) jc[i]=jc[i-1]*i;
	dfs1(1,0,0); dfs2(n/2+1,0,0);
	printf("%I64d",ans);
	//fclose(stdin); fclose(stdout);
}
