#include<cstdio>
#include<map>
int i,n,m,M,z,a[26];
long long s,ans,f[19];
std::map<int,int>L[26];
void dfs(int p,int k,int now)
{
	if(p>M)
	{
		if(!z)L[k][now]++;else
		for(i=0;i+k<=m;i++)
			ans+=L[i][s-now];
		return;
	}
	if(k<m&&a[p]<19&&f[a[p]]+now<=s)
		dfs(p+1,k+1,now+f[a[p]]); 
	dfs(p+1,k,now+a[p]);
	dfs(p+1,k,now);
}
int main()
{
	for(f[1]=i=1;i<18;f[i+1]=f[i]*++i);
	scanf("%d%d%I64d",&n,&m,&s);
	for(i=1;i<=n;i++)
		scanf("%d",&a[i]);
	M=n/2+1,dfs(1,0,0);
	z=M=n,dfs(n/2+2,0,0);
	printf("%I64d",ans);
}
