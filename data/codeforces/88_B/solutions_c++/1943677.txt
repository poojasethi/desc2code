#include <iostream>
#include <stdio.h>
#include <algorithm>
#include <queue>
#include <map>
#include <string.h>

const int N=500010;
const int inf=0x3f3f3f3f;

using namespace std;

bool vis[27];
int dis[27];
char s[31][31];
char str[N];

int main()
{
	int n,m,x;
	scanf("%d%d%d",&n,&m,&x);
	for(int i=1;i<=n;i++)
		scanf("%s",&s[i][1]);
	for(int i=0;i<26;i++)
		dis[i]=inf;
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
		{
			if(s[i][j]=='S') continue;
			vis[s[i][j]-'a']=1;
			for(int ii=1;ii<=n;ii++)
				for(int jj=1;jj<=m;jj++)
					if(s[ii][jj]=='S') dis[s[i][j]-'a']=min(dis[s[i][j]-'a'],(i-ii)*(i-ii)+(j-jj)*(j-jj));
		}
	scanf("%d",&m);
	scanf("%s",str);
	int ret=0;
	for(int i=0;i<m;i++)
	{
		if(str[i]<='z' && str[i]>='a')
		{
			if(vis[str[i]-'a']) continue;
			puts("-1");
			return 0;
		}
		if(dis[str[i]-'A']==inf)
		{
			puts("-1");
			return 0;
		}
		if(dis[str[i]-'A']>x*x) ret++;
	}	
	printf("%d\n",ret);
	return 0;
}
