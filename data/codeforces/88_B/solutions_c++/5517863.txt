#include <stdio.h>
#include <iostream>
#include <string>
using namespace std;
int p,n,m,x,a,d[60],f,r,k[60];
string t,s[60];
int back(int x,int y,int x1,int y1){
	return (x-x1)*(x-x1)+(y-y1)*(y-y1);
}
void find(int x,int y){
	for (int i=0;i<n;i++)
		for (int j=0;j<m;j++)
			if (s[i][j]!='S')
				if (d[s[i][j]-'a']<back(i,j,x,y))
					d[s[i][j]-'a']=d[s[i][j]-'a'];
				else
					d[s[i][j]-'a']=back(i,j,x,y);
}
int main( ){
	cin>>n>>m>>x;
	for (int i=0;i<n;i++)
		cin>>s[i];
	cin>>a>>t;
	for (int i=0;i<60;i++)
		d[i]=x*x+1;
	for (int i=0;i<n;i++)
		for (int j=0;j<m;j++){
			if (s[i][j]=='S'){
				f=1;
				find(i,j);
			}else k[s[i][j]-'a']=1;
		}
	for (int i=0;i<t.length();i++)
		if (t[i]>='A' && t[i]<='Z'){
			r=1;
			if (d[t[i]-'A']>x*x)
				p++;
			if (k[t[i]-'A']==0){
				cout<<-1<<endl;
				return 0;
			}
		}
		else if (k[t[i]-'a']==0){
			cout<<-1<<endl;
			return 0;
		}
	if (r==1 && f==0){
		cout<<-1<<endl;
		return 0;
	}
	if (r==0){
		cout<<0<<endl;
		return 0;
	}
	cout<<p<<endl;
	return 0;
}
