/*  Grader: Codeforces
	88B_keyboard
	Varot Premtoon 10 Jul 2554 */
	
#include <cstdio>

char type[1000005];

int dis(int a,int b,int c,int d) { return ((a-c)*(a-c))+((b-d)*(b-d)); }

int main()
{
	char tab[100][100];
	int d[100][100];
	int able[30];
	char exist[30];
	int n,m,x;
	int i,j,k,l;
	int hs = 0;
	scanf("%d %d %d",&n,&m,&x); x = x*x;
	for(i=0;i<n;i++) scanf("%s",tab[i]);
	for(i=0;i<26;i++) {
		able[i] = 1000000;
		exist[i] = 0;
	}
	for(i=0;i<n;i++) for(j=0;j<m;j++) d[i][j] = 100000000;
	for(i=0;i<n;i++) for(j=0;j<m;j++) {
		if(tab[i][j]!='S') continue;
		hs = 1;
		for(k=0;k<n;k++) for(l=0;l<m;l++) {
			if(tab[i][j]=='S') d[i][j] = -1;
			if(dis(i,j,k,l)<d[k][l]) d[k][l] = dis(i,j,k,l);
		}
	}
	for(i=0;i<n;i++) for(j=0;j<m;j++) {
		if(d[i][j]!=-1&&d[i][j]<able[tab[i][j]-'a']) able[tab[i][j]-'a'] = d[i][j];
		if(tab[i][j]!='S') exist[tab[i][j]-'a'] = 1;
	}
	scanf("%d",&k);
	scanf("%s",type);
	for(i=0,l=0;i<k;i++) {
		if(type[i]<='Z') {
			if(hs==0||exist[type[i]-'A']==0) { printf("-1\n"); return 0; }
			if(able[type[i]-'A']>x) l++;
		} else {
			if(exist[type[i]-'a']==0) { printf("-1\n"); return 0; }
		}
	}
	printf("%d\n",l);
	return 0;
}
		
			
		
	
	 

		
	
