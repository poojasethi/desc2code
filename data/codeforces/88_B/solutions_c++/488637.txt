#include<iostream>
#include<algorithm>
#include<cstring>
#include<cstdio>

using namespace std;

#define for(i,n) for(int i=0;i<n;i++)
#define dist(x1,x2,y1,y2) (x1-x2)*(x1-x2)+(y1-y2)*(y1-y2)

int main()
{
    int n,m,x,q;
    char s[40][40];
    int k[255];
    cin>>n>>m>>x;
    x=x*x;
    bool flag;
    flag=false;
    memset(k,0,sizeof k);
    for(i,n)
    for(j,m) {cin>>s[i][j];k[s[i][j]]=1;if (s[i][j]=='S') flag=true;};
    //cout<<0<<endl;
    for(i,n)
    for(j,m)
    if (s[i][j]!='S'){
        for(i1,n)
        for(j1,m)
        if (s[i1][j1]=='S')
        if (dist(i1,i,j1,j)<=x) {
                k[s[i][j]]=2;
                //cout<<i<<' '<<j<<' '<<s[i][j]<<' '<<i1<<' '<<j1<<' '<<dist(i1,i,j1,j)<<endl;
                break;
        }
    }
    cin>>q;

    int ans=0;
    char ch=getchar();
    for(i,q){
        ch=getchar();
        if (!k[tolower(ch)]) {cout<<-1<<endl;return 0;}
        if (ch==toupper(ch)){
            if (!flag) {cout<<-1<<endl;return 0;}
            if (k[tolower(ch)]==1) ans++;
        };
    }
    cout<<ans<<endl;
    return 0;
}
