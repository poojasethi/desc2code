
#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
using namespace std;

bool A[100001]={0},B[100001]={0};
char P[40][40];
char G[1000001];
int N,M,K,T;



int main()
{
	int ans=0,m;
	cin>>N>>M>>K;
	for(int i=0;i<N;i++) scanf("%s",P[i]); 
	
	int t=0;
	for(int i=0;i<N;i++)
	{
		for(int k=0;k<M;k++)
		{
			//scanf("%c",&P[i][k]);
			if(P[i][k]=='S')
			{
			
			t=1;
			
			for(int j=0;j<N;j++)  
                    for(int l=0;l<M;l++)  
                        if((j-i)*(j-i)+(l-k)*(l-k)<=K*K&&P[j][l]!='S') 
                            A[P[j][l]-'a']=1; 
							
			}
			else B[P[i][k]-'a']=1;
		}
	}
	
	scanf("%d%s",&T,G);
	int i; 
	
	for(i=0;i<T;i++)
	{
		if(G[i]>=65&&G[i]<=65+25)
		{
			if(!t)break;
			if(A[G[i]-65]);
			else if(B[G[i]-65])ans++;
			else break;
		}
		else if(B[G[i]-97]);
		else break;
	}
	
	  
    if(i<T) printf("-1\n");  
    else printf("%d\n",ans);
	
	
	
	return  0;
}


/*

3 9 4
qwertyuio
asdfghjkl
SzxcvbnmS
35
TheQuIcKbRoWnFOXjummsovertHeLazYDOG

*/
		  		  		 	 	 	  		 	 		