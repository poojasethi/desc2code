#include <map>
#include <set>
#include <cmath>
#include <stack>
#include <queue>
#include <string>
#include <vector>
#include <fstream>
#include <sstream>
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <iostream>
#include <algorithm>
using namespace std;
#define li       	long long int
#define rep(i,to)	for(li i=0;i<((li)(to));i++)
#define pb       	push_back
#define sz(v)    	((li)v.size())
#define bit(n)   	(1ll<<(li)(n))


int main(){
	li n,m,k,exist[1000],ok[1000];
	string mp[105],str;
	cin>>n>>m>>k;
	rep(i,n) cin>>mp[i];
	rep(i,2) cin>>str;
	rep(i,1000) ok[i]=exist[i]=false;
	rep(i,n)rep(j,m) exist[mp[i][j]]=true;
	rep(i,n)rep(j,m)if(mp[i][j]=='S')rep(x,n)rep(y,m)if(mp[x][y]!='S'){
		if((i-x)*(i-x)+(j-y)*(j-y)<=k*k) ok[mp[x][y]]=true;
	}
	li res=0;
	rep(i,sz(str)){
		if(islower(str[i]) && !exist[str[i]]){ cout<<-1<<endl; return 0; }
		if(islower(str[i])) continue;
		if(!exist['S']){ cout<<-1<<endl; return 0; }
		if(!exist[str[i]-'A'+'a']){ cout<<-1<<endl; return 0; }
		if(!ok[str[i]-'A'+'a']) res++;
	}
	cout<<res<<endl;
}
