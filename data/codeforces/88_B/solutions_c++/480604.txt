#include<cmath>
#include<cstdio>
#include<cstring>
#define For(i,b,e) for (int i=b;i<=e;i++)
int const maxn=36,d='a'-'A';
bool KEY[130];
int N,M,X;
char MAP[maxn][maxn];
inline int sqr(int x) { return x*x; }
main()
{
    char a;
    memset(KEY,0,sizeof(KEY));
    scanf("%d%d%d\n",&N,&M,&X);
    X*=X;
    bool es=0;
    For(i,1,N) scanf("%s",MAP[i]+1);
    For(i,1,N)
        For(j,1,M) if ((a=MAP[i][j])!='S' && !KEY[a-d]) {
            KEY[a]=1;
            For(ii,1,N) if (!KEY[a-d]) For(jj,1,M)
            if (MAP[ii][jj]=='S' && sqr(i-ii)+sqr(j-jj)<=X) { KEY[a-d]=1; break ; }
        } else if (a=='S') es=1;
    int L;
    int ans=0;
    scanf("%d\n",&L);
    For(i,1,L) {
        a=getchar();
        if (KEY[a]) continue;
        if (a<'a' && es && KEY[a+d]) ans++; else { ans=-1; break ;}
    }
    printf("%d\n",ans);
    return 0;
}
