#include<cstdio>
#include<cstring>

using namespace std;

int n,m,x;
int reach[256];
char s[60][60];
int q;
char line[500010];
int main()
{
    while(scanf("%d%d%d",&n,&m,&x)!=EOF)
    {
        for(int i=0;i<n;i++)
            scanf("%s",s+i);
        memset(reach,255,sizeof(reach));
        for(int i=0;i<n;i++)
            for(int j=0;j<m;j++)
                if(s[i][j]!='S') {
                    reach[s[i][j]]=0;
                    bool flag=false;
                    for(int k=0;k<n;k++)
                        for(int l=0;l<m;l++)
                            if(s[k][l]=='S' )
                            {
                                flag=true;
                                  if((i-k)*(i-k)+(j-l)*(j-l)<=x*x)   reach[s[i][j]-'a'+'A']=0;
                            }
                    if(flag &&  reach[s[i][j]-'a'+'A']==-1)  reach[s[i][j]-'a'+'A']=1;
                }
        scanf("%d%s",&q,line);
        int cnt=0;
        for(int i=0;i<q;i++)
            if(reach[line[i]]==-1) {
                cnt=-1;break;
            }else cnt+=reach[line[i]];
        printf("%d\n",cnt);
    }
    return 0;
}
