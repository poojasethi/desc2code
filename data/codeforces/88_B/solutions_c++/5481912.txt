#include <iostream>
#include <cstdio>
#include <cmath>
#include <string>
#include <cstring>
using namespace std;
int ans,n,m,x,a,i,j,d[40],ok,ok1,k[40];
string t,s[40];
int dist(int x,int y,int x1,int y1)
{
	return (x-x1)*(x-x1)+(y-y1)*(y-y1);
}
void search1(int x,int y)
{
	for (int i=0;i<n;i++) for (int j=0;j<m;j++) if (s[i][j]!='S') d[s[i][j]-'a']=min(d[s[i][j]-'a'],dist(i,j,x,y));
}
int main()
{
	cin>>n>>m>>x;
	for (i=0;i<n;i++) cin>>s[i];
	cin>>a>>t;
	for (i=0;i<40;i++) d[i]=x*x+1;
	for (i=0;i<n;i++) for (j=0;j<m;j++) {if (s[i][j]=='S') {ok=1; search1(i,j);} else k[s[i][j]-'a']=1;}
	for (i=0;i<t.size();i++) {if (t[i]>='A' && t[i]<='Z') {ok1=1;if (d[t[i]-'A']>x*x) {ans++;} if (k[t[i]-'A']==0) {cout<<-1;return 0;}} else if (k[t[i]-'a']==0) {cout<<-1;return 0;}}
	if (ok1==1 && ok==0)
		{cout<<-1;return 0;}
	if (ok1==0)
		{cout<<0;return 0;}
   cout<<ans;

return 0;
}
