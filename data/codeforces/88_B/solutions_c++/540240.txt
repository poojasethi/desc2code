#include <map>
#include <set>
#include <cmath>
#include <stack>
#include <queue>
#include <string>
#include <vector>
#include <fstream>
#include <sstream>
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <algorithm>
using namespace std;
#define li		long long
#define rep(i,to)	for(li i=0;i<((li)to);i++)
#define pb		push_back
#define sz(v)		((li)v.size())

int main(){
	li dis[26];
	rep(i,26) dis[i]=(1<<15);
	li n,m,k,res=0,t;
	cin>>n>>m>>k;
	vector<string> mp(n);
	rep(i,n) cin>>mp[i];
	cin>>t;
	rep(i,n)rep(j,m)if(mp[i][j]=='S'){
		rep(k,n)rep(l,m)if(mp[k][l]!='S'){
			dis[mp[k][l]-'a']=min(dis[mp[k][l]-'a'],(i-k)*(i-k)+(j-l)*(j-l));
		}
	}
	li exist[26];
	rep(i,26) exist[i]=0;
	rep(i,n)rep(j,m)if(mp[i][j]!='S') exist[mp[i][j]-'a']=1;
	string str;
	cin>>str;
	rep(i,sz(str)){
		if('A'<=str[i] && str[i]<='Z'){
			if(dis[str[i]-'A']==(1<<15)){
				cout<<"-1"<<endl;
				return 0;
			}
			if(k*k<dis[str[i]-'A']) res++;
		}else if(exist[str[i]-'a']==0){
			cout<<"-1"<<endl;
			return 0;
		}
	}
	cout<<res<<endl;
}
