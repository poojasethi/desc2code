//#define DEBUG 1


#include <string>
#include <vector>
#include <map>
#include <set>
#include <stack>
#include <queue>
#include <algorithm>
#include <cstdlib>
#include <cstdio>
#include <cmath>
using namespace std;



#ifdef DEBUG

#include <fstream>
ifstream cin("input.txt");
ofstream cout("output.txt");

#else

#include <iostream>

#endif




int main()
{
	bool b[30]={};
	bool c[30]={},g=0;
	char a[35][35];
	int n,m,q;
	cin>>n>>m>>q;
	for(int i=0;i<n;++i)
		for(int j=0;j<m;++j)
			cin>>a[i][j];
	for(int i=0;i<n;++i)
		for(int j=0;j<m;++j)
		{
			if(a[i][j]!='S')
			{
				b[a[i][j]-'a'+1]=1;
				for(int x=0;x<n;++x)
					for(int y=0;y<m;++y)
						if(a[x][y]=='S')
							if((x-i)*(x-i)+(y-j)*(y-j)<=q*q)
								c[a[i][j]-'a'+1]=1;
			}
			else
				g=1;
		}
	int t,k=0;
	char p;
	cin>>t;
	for(int i=1;i<=t;++i)
	{
		cin>>p;
		if(p<='z'&&p>='a')
		{
			if(!b[p-'a'+1])
			{
				cout<<-1<<'\n';
				return 0;
			}
		}
		else
		{
			if(!b[p-'A'+1]||!g)
			{
				cout<<-1<<'\n';
				return 0;
			}
			if(!c[p-'A'+1])
				++k;
		}
	}
	cout<<k<<'\n';
}