#include<cstdio>
#include<cstring>
#include<algorithm>
#define lowbit(x) (x&(-x))
using namespace std;
char st[3000005];
char ans[3000005];
int size[3000005];
int pos[3000005];
int la[5005];
int ra[5005];
int n,m,k;
int del(int p)
{	--m;
    while (p<=k)
    {	--size[p];
    	p+=lowbit(p);
	}
}
int kth(int p)
{	int i,ans=0;
    for (i=22;i>=0;--i)
        if ((1<<i|ans)<=k&&size[1<<i|ans]<p)
        {   ans=ans|(1<<i);
		 	p-=size[1<<i|ans];
		}
    return ans+1;
}
void work()
{	int i,j,l,p,t;
    for (i=n;i>0;--i)
    {	l=ra[i]-la[i]+1,p=min(la[i]+1,ra[i]);
        for (j=1;j<=l&&ra[i]<=m;++j)
        {	t=kth(ra[i]+1);
            pos[t]=kth(p);
            del(t);
            p+=2;
            if (p>ra[i])
                p=la[i];
        }
    }
    p=1;
    for (i=1;i<=k;++i)
    	if (pos[i])
            ans[i]=ans[pos[i]];
        else ans[i]=st[p++];
}
int main()
{	int i;   
	scanf("%s",st+1);
    scanf("%d%d",&k,&n);
    m=k;
    for (i=1;i<=n;++i)
        scanf("%d%d",&la[i],&ra[i]);
    for (i=1;i<=k;++i)
        size[i]=lowbit(i);
    work();     
    printf("%s\n",ans+1);
    return 0;
}

 		  	   	 	 		 		  		  	 	