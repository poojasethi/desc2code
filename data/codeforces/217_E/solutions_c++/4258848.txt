#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
#define maxn 5010
#define maxm 3000010
#define lowbit(x) (x&(-x))
using namespace std;
char str[maxm],ans[maxm];
int L[maxn],R[maxn],n,k,tot,len;
int size[maxm];
int from[maxm];
void read()
{
	scanf("%s",str+1);
	len=strlen(str+1);
	scanf("%d %d",&k,&n);
	tot=k;
	for(int i=1;i<=n;++i)
		scanf("%d %d",&L[i],&R[i]);
	for(int i=1;i<=k;++i)
		size[i]=i&(-i);
}
int Delete(int p)
{
	--tot;
	for(int i=p;i<=k;i+=lowbit(i))
		--size[i];
}
int kth(int rank)
{
	int ans=0;
	for(int i=22;i>=0;--i)
		if((1<<i|ans)<=k&&size[1<<i|ans]<rank)
			ans=ans|(1<<i),rank-=size[1<<i|ans];
	return ans+1;
}
void print()
{
	for(int i=n;i>=1;--i)
	{
		int cnt=R[i]-L[i]+1,p=min(L[i]+1,R[i]);
		for(int j=1;j<=cnt&&R[i]<=tot;++j)
		{
			int temp=kth(R[i]+1);
			from[temp]=kth(p);
			Delete(temp);
			p+=2;
			if(p>R[i])
				p=L[i];
		}
	}
	for(int i=1,j=1;i<=k;++i)
	{
		if(from[i])
			ans[i]=ans[from[i]];
		else
			ans[i]=str[j++];
	}
	printf("%s\n",ans+1);
}
int main()
{
	read();
	print();
	return 0;
}
 	  					   						  			 	