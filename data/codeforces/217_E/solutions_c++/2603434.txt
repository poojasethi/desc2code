#include<cstdio>

const int maxk = 3000010, maxn = 5010;
int n, k, l[maxn], r[maxn], s[maxk], p[maxk];
char str[maxk], ans[maxk];

void del(int x){for(;x <= k; x += x & -x) s[x]--;}

int query(int x){
	int ret = 0;
	for(int e = (1 << 22); e; e >>= 1)
		if (ret + e <= k && s[ret + e] < x) ret += e, x -= s[ret];
	return ret + 1;
}

int main(){
	scanf("%s%d%d", str, &k, &n);
	for (int i = 1; i <= n; i++) scanf("%d%d", l + i, r + i);
	for (int i = 1; i <= k; i++) s[i] = i & -i;
	for (int i = n, now = k; i; i--){
		for (int j = l[i] + 1; j <= r[i] && r[i] < now; j += 2, now--){
			int cur = query(r[i] + 1);
			del(cur); p[cur] = query(j);
		}
		for (int j = l[i]; j <= r[i] && r[i] < now; j += 2, now--){
			int cur = query(r[i] + 1);
			del(cur); p[cur] = query(j);
		}
	}
	for (int i = 0, j = 0; i < k; i++) ans[i] = p[i + 1] ? ans[p[i + 1] - 1] : str[j++];
	printf("%s", ans);
}

