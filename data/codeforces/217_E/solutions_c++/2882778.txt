#include<cstdio>
#include<vector>
#define CH getchar()
using namespace std;
const int n=5005;
const int m=3000005;
int K,N,i,pos,X,Y,len,Len,tot;
int L[n],R[n],P[m],f[m];
char S[m],res[m];
int fa[m];
void read(int &x)
{
	char ch;x=0;
	for(ch=CH;ch<'0'||ch>'9';ch=CH);
	for(;ch>='0'&&ch<='9';x=x*10+ch-48,ch=CH);
}
void Inc(int x,int y)
{
	for(;x<=K;x+=x&-x) f[x]+=y;
}
int Sum(int x)
{
	int res=0;
	for(;x;x-=x&-x) res+=f[x];
	return res;
}
int Find(int x)
{
	int res=0;
	for(int i=1<<21;i;i>>=1)
		if(res+i<K&&f[res+i]<x)
			res+=i,x-=f[res];
	return res;
}
void Build()
{
	for(int i=1;i<=K;++i) Inc(i,1);
}
void Work()
{
	for(int i=1;i<=K;++i)
		if(Sum(i)-Sum(i-1)) res[i-1]=S[len++];
}
int main()
{
	gets(S),read(K),read(N);
	for(i=1;i<=N;++i) read(L[i]),read(R[i]);
	Build(),Len=K;
	for(i=N;i;--i)
	{
		for(pos=L[i]+1;pos<=R[i]&&R[i]<Len;pos+=2,--Len)
		{
			X=Find(R[i]+1),Y=Find(pos);
			fa[X]=Y,P[tot++]=X,Inc(X+1,-1);
		}
		for(pos=L[i];pos<=R[i]&&R[i]<Len;pos+=2,--Len)
		{
			X=Find(R[i]+1),Y=Find(pos);
			fa[X]=Y,P[tot++]=X,Inc(X+1,-1);
		}
	}
	Work();
	for(i=tot-1;i>=0;--i) res[P[i]]=res[fa[P[i]]];
	puts(res);
	return 0;
}
