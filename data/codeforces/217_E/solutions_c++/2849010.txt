#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <algorithm>
#include <ext/rope>
using namespace std;
using namespace __gnu_cxx;

const int maxn = 3000005, maxm = 5005;
char ss[maxn];
int l[maxm], r[maxm];
crope st;
int n, k;

crope build(int n, int k) {
    if (n < 0) return st.substr(0, k);
    int len = r[n] - l[n];
    int x = min(r[n] + len, k) - r[n];
    if (x <= 0) return build(n - 1, k);
    crope t = build(n - 1, k - x);
    char *s = new char[x + 1];
    for (int i = 0; i < x; ++i)
        if (i * 2 + 1 < len)
            s[i] = t[l[n] + i * 2 + 1];
        else s[i] = t[l[n] + (i - len / 2) * 2];
    s[x] = '\0'; t.insert(r[n], s);
    return t;
}

int main() {
    int i;
    scanf("%s%d%d", ss, &k, &n); st = ss;
    for (i = 0; i < n; ++i) {
        scanf("%d%d", l + i, r + i); --l[i];
    }
    puts(build(n - 1, k).c_str());
    return 0;
}
