#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 3000010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,K,s;
int l[N],r[N],tr[N],fa[N];
char p[N],an[N];
inline void del(int x) {
	for (;x<=K;x+=x&-x) tr[x]--;
}
inline int find(int x) {
	int i,s=0;
	for (i=22;i>=0;i--) if (s+(1<<i)<=K&&tr[s+(1<<i)]<x) {
		s+=1<<i;
		x-=tr[s];
	}
	return s+1;
}
int main() {
	scanf("%s%d%d",p+1,&K,&n);
	For(i,1,n) scanf("%d%d",&l[i],&r[i]);
	For(i,1,K) tr[i]=i&-i;
	s=K;
	for (i=n;i;i--) if (r[i]<s) {
		int len=min(r[i]-l[i]+1,s-r[i]),A=r[i]+1;
		s-=len;
		for (j=l[i]+1;j<=r[i]&&len;j+=2,len--,A++) fa[find(A)]=find(j);
		for (j=l[i];j<=r[i]&&len;j+=2,len--,A++) fa[find(A)]=find(j);
		for (A--;A>r[i];A--) del(find(A));
	}
	k=0;
	For(i,1,K) if (!fa[i]) an[i]=p[++k];
		else an[i]=an[fa[i]];
	printf("%s\n",an+1);
	return 0;
}
