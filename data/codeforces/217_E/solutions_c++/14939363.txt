#include<bits/stdc++.h>
using namespace std;

struct unit
{int x,y;
};
struct unit q[5010];

int n,m,l,l1;
int c[3000010],p[3000010];
char a[3000010],ans[3000010];
        
void change(int i,int x)        
{for(;i<=n;i+=i&(-i)) c[i]+=x;
}
        
int query(int i)        
{int j,ret=0;
 for(j=(1<<21);j;j>>=1)
    if(ret+j<=n && c[ret+j]<i)
        i-=c[ret+=j];
 return ret+1;
}
        
int main()
{int i,j,j1,last,x,k;
 
 scanf("%s",a+1);
 l=strlen(a+1);
 scanf("%d%d",&n,&m);
 for(i=1;i<=m;i++)
    scanf("%d%d",&q[i].x,&q[i].y);
 for(i=1;i<=n;i++) c[i]=i&(-i);
 last=n;
 for(i=m;i>=1;i--)
    for(j=1,j1=q[i].x+1,k=q[i].y+1;j<=q[i].y-q[i].x+1 && k<=last;j++,j1+=2,last--)
    {   if(j1>q[i].y) j1=q[i].x;
        x=query(k);
        change(x,-1);
        p[x]=query(j1);
    }
 j=1;
 for(i=1;i<=n;i++) ans[i]=p[i]?ans[p[i]]:a[j++];
 for(i=1;ans[i]!='\0';i++) printf("%c",ans[i]);
 printf("\n");          
 return 0;
}