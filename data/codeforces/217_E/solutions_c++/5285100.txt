#include <cstdio>
#include <ext/rope>
#include <cstring>
using namespace __gnu_cxx;
const int N=3000005;
int n,k,ask[N][2];
rope <char> rop;
char st[N],save[N],save2[N];
void dfs(int s,int t){
    if (!s) rop.insert(0,st,st+t+1);
    else{
        if (ask[s][1]>=t) return dfs(s-1,t);
        int lon=ask[s][1]-ask[s][0]+1,rr=ask[s][1]+lon,add;
        if (rr>=t){
            dfs(s-1,ask[s][1]);
            add=ask[s][1];
        }else{
            dfs(s-1,t-lon);
            add=t-lon;
        }
        int ns=0;
        for (int i=1;i<lon && ns<t-add;i+=2) save2[ns++]=rop[ask[s][0]+i];
        for (int i=0;i<lon && ns<t-add;i+=2) save2[ns++]=rop[ask[s][0]+i];
        rop.insert(ask[s][1]+1,save2,save2+ns);
    }
}
int main(){
    scanf("%s",st);
    scanf("%d%d",&k,&n);
    for (int i=1;i<=n;i++){
        scanf("%d%d",&ask[i][0],&ask[i][1]);
        --ask[i][0];
        --ask[i][1];
    }
    dfs(n,k-1);
    rop.copy(0,k,save);
    printf("%s",save);
}
