#include <iostream>
#include <cstdio>
using namespace std;
const int N=3000010;

int p,k,f[N],l[N],r[N],t[N];

char s[N],ans[N],b[N];

void update(int x,int y){
    for(; x<=k; x += x&-x)
		t[x] += y;
}
int sum(int x){
    int y=0;
    for(int i = 1<<21; i ; i>>=1){
        if(y+i < k && t[y + i] < x){
            y+=i;
            x-=t[y];
        }
	}
    return y+1;
}
int main()
{
    int n;
    scanf("%s%d%d", s+1, &k, &n);
    
    for(int i=1;i<=n;i++){
		scanf("%d%d", &l[i], &r[i]);
	}
    for(int i = 1;i <= k; i ++)
		t[i] = i&-i;
    for(int now = k, i = n; i ; i --){
        for(int x = l[i] + 1,j = l[i]; j <= r[i] && r[i] < now; j++, x+=2, now--){
            if(x > r[i])
				x = l[i];
            p = sum(r[i] + 1);
            update(p, -1);
            f[p] = sum(x);
        }
	}
    for(int i = n = 1; i <= k; i ++){
        b[i] = f[i] ? b[f[i]] : s[n ++];
	}
    b[k+1] = '\0';
    puts(b+1);
    return 0;
}
