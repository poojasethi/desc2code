#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<iostream>
#include<algorithm>

using namespace std;

#define K 3000010
#define N 5010 

int n,k,l[N],r[N],s[K],p[K];
char c[K],ans[K];

void updata(int x)
{
	for(;x<=k;x+=x&-x)
		s[x]--;
}

int ask(int x)
{
	int tmp=0;
	for(int i=(1<<30);i;i>>=1)
		if(tmp+i<=k&&s[tmp+i]<x) 
			tmp+=i,x-=s[tmp];
	return tmp+1;
}

void init()
{
	scanf("%s%d%d",c,&k,&n);
	for(int i=1;i<=n;i++) 
		scanf("%d%d",&l[i],&r[i]);
	for(int i=1;i<=k;i++) 
		s[i]=i&-i;
}

void work()
{
	int now=k;
	for(int i=n;i;i--)
	{
		for(int j=l[i]+1;j<=r[i]&&r[i]<now;j+=2)
		{
			int temp=ask(r[i]+1);
			updata(temp);
			p[temp]=ask(j);
			now--;
		}
		for(int j=l[i];j<=r[i]&&r[i]<now;j+=2)
		{
			int temp=ask(r[i]+1);
			updata(temp);
			p[temp]=ask(j);
			now--;
		}
	}
	for(int i=0,j=0;i<k;i++) 
		if(p[i+1])
			ans[i]=ans[p[i+1]-1];
		else
			ans[i]=c[j++];
	printf("%s",ans);
}

int main()
{
	init();
	work();
	return 0;
}
					 	  		 	 		 	 	 	 	  	