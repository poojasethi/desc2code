#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<iostream>
#include<algorithm>
using namespace std;
const int N=3000100;
int n,k,q,A;
int a[N],b[N],l[5100],r[5100];
char s[N],c[N];
int ask(int x)
{
	int q=0;
	for(int i=1<<22;i>0;i>>=1 )
		if ( i+q<=k && x>a[i+q] )
			q|=i,x-=a[q];
	return q+1;
}
void del(int x)
{	
	for(--A;x<=k;--a[x],x+=x&-x);	
}
int main()
{
	scanf("%s%d%d",s+1,&k,&n);
	A=k;
	for(int i=1;i<=k;++i)
		a[i]=i&-i,b[i]=0;
	for(int i=1;i<=n;++i) scanf("%d%d",&l[i],&r[i]);
	for(int i=n;i>0;--i)
		for(int j=r[i]-l[i],now=l[i]+1;j>=0 && r[i]<A;--j,now+=2)
		{
			if ( now>r[i] ) now=l[i];
			int p=ask(r[i]+1);
			del(p),b[p]=ask(now);
		}
	for(int i=1,j=0;i<=k;++i)
		printf("%c",c[i]=(b[i]>0?c[b[i]]:s[++j]));puts("");
	return 0;
}