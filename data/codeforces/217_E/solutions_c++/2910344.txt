#include<cstdio>

char Str[3010000];

int n,K,f[3010000],c[4200000],Ans[3010000],L[5100],R[5100],MaxK;

int Find(int x){return !f[x]?x:f[x]=Find(f[x]);}

void Add(int a,int b){for(;a<=MaxK;a+=a&-a)c[a]+=b;}

int Get(int k)
{
	if(c[MaxK]<k)return K+1;
	int L(1),R(MaxK);
	for(;L!=R;)
	if(k>c[(L+R)/2])
	{
		k-=c[(L+R)/2];
		L=(L+R)/2+1;
	}
	else R=(L+R)/2;
	return L;
}


int main()
{
	int i,j,k;
	scanf("%s%d%d",&Str,&K,&n);
	for(MaxK=1;MaxK<K;MaxK<<=1);
	for(i=0;i<n;i++)scanf("%d%d",L+i,R+i);
	for(i=1;i<=K;i++)Add(i,1);
	for(i=n-1;i>=0;i--)
	{
		for(k=L[i]+1;k<=R[i];k+=2)
		{
			j=Get(R[i]+1);
			if(j==K+1)break;
			f[j]=Get(k);
			Add(j,-1);
		}
		for(k=L[i];k<=R[i];k+=2)
		{
			j=Get(R[i]+1);
			if(j==K+1)break;
			f[j]=Get(k);
			Add(j,-1);
		}
	}
	for(k=1;;k++)
	{
		j=Get(k);
		if(j==K+1)break;
		Ans[j]=k-1;
	}
	for(i=1;i<=K;i++)putchar(Str[Ans[Find(i)]]);putchar('\n');
	return 0;
}
