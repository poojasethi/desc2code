#include<cstdio>
const int mn=3000010;
int p,x,now,k,n,i,j,f[mn],l[mn],r[mn],t[mn];
char s[mn],ans[mn],b[mn];
void dec(int x)
{
    for(;x<=k;x+=x&-x)t[x]--;
}
int get(int x)
{
    int y=0;
    for(int i=1<<21;i;i>>=1)
        if(y+i<k&&t[y+i]<x)
        {
            y+=i;
            x-=t[y];
        }
    return y+1;
}
int main()
{
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    scanf("%s%d%d",s+1,&k,&n);
    for(i=1;i<=n;i++)scanf("%d%d",&l[i],&r[i]);
    for(i=1;i<=k;i++)t[i]=i&-i;
    for(now=k,i=n;i;i--)
        for(x=l[i]+1,j=l[i];j<=r[i]&&r[i]<now;j++,x+=2,now--)
        {
            if(x>r[i])x=l[i];
            p=get(r[i]+1);
            dec(p);
            f[p]=get(x);
        }
    for(i=n=1;i<=k;i++)
        b[i]=f[i]?b[f[i]]:s[n++];
    puts(b+1);
    return 0;
}
