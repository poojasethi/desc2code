#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int u=3000010,w=5010;
int a[w],b[w],c[u],f[u],n,k,now,i,j,p,x,y;
char s[u],ans[u];

void dec(int x)
{
	for(;x<=k;x+=x&-x) c[x]--;
}
int get(int x)
{
	int y=0,i;
	for(i=1<<21;i;i>>=1)
		if(y+i<=k&&c[y+i]<x) x-=c[y+=i];
	return y+1;
}

int main()
{
	scanf("%s%d%d",s+1,&k,&n);
	for(i=1;i<=n;i++) scanf("%d%d",&a[i],&b[i]);
	for(i=1;i<=k;i++) c[i]=i&-i;
	for(now=k,i=n;i;i--)
		for(x=a[i]+1,j=1;j<=b[i]-a[i]+1&&b[i]<now;j++,x+=2,now--)
		{
			if(x>b[i]) x=a[i]; 
			p=get(b[i]+1),dec(p),f[p]=get(x);
		}
	for(i=1,j=0;i<=k;i++)
		ans[i]=f[i]?ans[f[i]]:s[++j];
	puts(ans+1);
	return 0;
}