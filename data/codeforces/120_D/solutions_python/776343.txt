#!env python

with open('input.txt') as f:
    n, m = f.readline().strip().split(' ')
    n, m = int(n), int(m)
    field = []
    for i in xrange(n):
        t = f.readline().strip().split(' ')
        field.append([int(x) for x in t])
    legacy = [int(x) for x in f.readline().strip().split(' ')]

field_v = [sum(x) for x in field]
field_h = []
for j in xrange(m):
    result = 0
    for i in xrange(n):
        result += field[i][j]
    field_h.append(result)

def run(field, n, m):
    result = 0
    s1 = s2 = 0
    for i in xrange(n):
        s1 += field[i]
        if s1 in legacy:
            s2 = 0
            l2 = legacy[:]
            l2.remove(s1)
            for j in xrange(i+1, n):
                s2 += field[j]
                if s2 in l2:
                    l3 = l2[:]
                    l3.remove(s2)
                    if len(field[j+1:]) and sum(field[j+1:]) in l3:
                        result += 1
    return result

result = run(field_v, n, m)
result += run(field_h, m, n)

with open('output.txt', 'w') as f:
    f.write(str(result))

