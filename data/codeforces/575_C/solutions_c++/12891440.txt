#include <cstdio>
#include <ctime>
using namespace std;

#define n   25
#define For(i,a,b)  for(int i=a;i<=b;i++)

int     N,Ans,A[n][n],B[n][n],w[n][n];
int     Tim,LA[n],LB[n],VA[n],VB[n],QA[n],QB[n],Mat[n],Suf[n];

inline  int min(int a,int b)    {return a<b?a:b;}
inline  int max(int a,int b)    {return a>b?a:b;}

bool    Find(int u) {
        VA[u]=Tim;
        For(i,1,N)  if  (VB[i]!=Tim&&LA[u]+LB[i]==w[u][i]){
            VB[i]=Tim;
            if  (!Mat[i]||Find(Mat[i])) {
                Mat[i]=u;   return  1;
            }
        }   return  0;
}
void    Change(){
        int Min=1<<30;  *QA=*QB=0;
        For(i,1,N)  if  (VA[i]==Tim)    QA[++*QA]=i;
        For(i,1,N)  if  (VB[i]!=Tim)    QB[++*QB]=i;
        For(i,1,*QA)    For(j,1,*QB)    Min=min(Min,LA[QA[i]]+LB[QB[j]]-w[QA[i]][QB[j]]);
        For(i,1,N)  {
            if  (VA[i]==Tim)    LA[i]-=Min;
            if  (VB[i]==Tim)    LB[i]+=Min;
        }
}

int     KM(int s){
        For(i,1,N)  {
            int Now=0;
            For(j,1,N)  Now+=w[Mat[j]][j];
            if  (Now+Suf[i]<=Ans)   return  0;

            For(j,1,N)  w[i][j]=((1<<i-1)&s)?A[i][j]:B[i][j];
            for (;;){
                Tim++;
                if  (Find(i))   break;  Change();
            }
        }
        int ret=0;
        For(i,1,N)  ret+=w[Mat[i]][i];
        return  ret;
}

int     main(){
        scanf("%d",&N);
        For(i,1,N)  For(j,1,N)  scanf("%d",&A[i][j]),A[i][0]=max(A[i][0],A[i][j]);
        For(i,1,N)  For(j,1,N)  scanf("%d",&B[i][j]),B[i][0]=max(B[i][0],B[i][j]);

        int U=(1<<N)-1;
        For(s,0,U)  {
            int t=0;
            For(i,1,N)  if  ((1<<i-1)&s)    t++;
            if  (t!=N/2)continue;

            For(i,1,N)  LA[i]=((1<<i-1)&s)?A[i][0]:B[i][0],Suf[i]=LA[i],LB[i]=Mat[i]=0;;
            for (int i=N-1;i;i--)   Suf[i]+=Suf[i+1];

            Ans=max(Ans,KM(s));
            if  (clock() / (double)(CLOCKS_PER_SEC) >= 1.3) break;
        }
        printf("%d\n",Ans);
}