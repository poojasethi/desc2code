#include<cstring>
#include<cstdio>
#include<algorithm>
#include<cstdlib>
#define N 52
using namespace std;
int n,m,x,y,k,g1,g2,s1,s2,a[N][N],minn[N],maxx[N],i,j,g[N],b[N],s[N],l;
long long f[N][N],v,ans;
int main(){
	scanf("%d%d",&n,&m);
	memset(a,3,sizeof(a));
	for(i=1;i<=m;++i){
		scanf("%d%d%d",&x,&y,&k);
		a[x][y]=a[y][x]=k;
	}
	scanf("%d%d%d%d",&g1,&g2,&s1,&s2);
	for(k=1;k<=n;++k)
		for(i=1;i<=n;++i)
			for(j=1;j<=n;++j)a[i][j]=min(a[i][j],a[i][k]+a[k][j]);
	for(i=1;i<=n;++i){
		minn[i]=1<<30; maxx[i]=-1<<30;
		for(j=1;j<=n;++j)if(i!=j){
			a[i][j]=a[i][j]*100+i;
			minn[i]=min(minn[i],a[i][j]);
			maxx[i]=max(maxx[i],a[i][j]);
		}
	}
	for(i=1;i<=n;++i)
		for(j=1;j<=n;++j){
			if(i==j || minn[i]>=maxx[j])continue;
			memset(g,0,sizeof(g));
			memset(s,0,sizeof(s));
			memset(b,0,sizeof(b));
			for(k=1;k<=n;++k){
				if(minn[k]<minn[i])g[k]=1;
				if(maxx[k]>maxx[j])b[k]=1;
				for(l=1;l<=n;++l)if(l!=k && a[k][l]>minn[i] && a[k][l]<maxx[j]){
					s[k]=1;
					break;
				}
			}
			g[i]=1; s[i]=b[i]=0;
			b[j]=1; g[j]=s[j]=0;
			memset(f,0,sizeof(f));
			f[0][0]=1;
			for(k=1;k<=n;++k){
				for(x=g2;x>=0;--x)
					for(y=s2;y>=0;--y)if(v=f[x][y]){
						if(g[k])f[x+1][y]+=v;
						if(s[k])f[x][y+1]+=v;
						if(!b[k])f[x][y]=0;
					}
			}
			for(x=g1;x<=g2;++x)
				for(y=s1;y<=s2;++y)ans+=f[x][y];
		}
	printf("%I64d\n",ans);
}