#include <bits/stdc++.h>
#define sisa 1000000007
using namespace std;

string s,kata[100005];
char temp;
int n;
long long panjang[15],ganti[15],hasil = 0,tempa,tempb;

int main()
{
	for (int i = 0; i < 10; i++)
	{
		panjang[i] = 10;
		ganti[i] = i;
	}
	getline(cin, s);
	scanf("%d", &n);
	scanf("%c", &temp);
	for (int i = 0; i < n; i++)
		getline(cin, kata[i]);
	for (int i = n - 1; i >= 0; i--)
	{
		tempa = 1;
		tempb = 0;
		for (int j = 3; j < kata[i].length(); j++)
		{
			tempa = (tempa * panjang[kata[i][j] - '0']) % sisa;
			tempb = (tempb * panjang[kata[i][j] - '0'] + ganti[kata[i][j] - '0']) % sisa;
		}
		panjang[kata[i][0] - '0'] = tempa;
		ganti[kata[i][0] - '0'] = tempb;
	}
	for (int i = 0; i < s.length(); i++)
		hasil = (hasil * panjang[s[i] - '0'] + ganti[s[i] - '0']) % sisa;
	printf("%I64d\n", hasil);
	return 0;
}
