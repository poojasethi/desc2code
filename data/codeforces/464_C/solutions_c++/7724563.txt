#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
typedef pair<ll,ll> pii;

const ll MOD = 1000000007;
const int MAXN = 100005;
int N;
string S, T[MAXN];
ll val[10], len[10];

pii calc(string s){
  ll v = 0, p = 1;
  for(int i = s.size() - 1; i >= 0; i--){
    v += val[s[i] - '0'] * p;
    v %= MOD;
    p *= len[s[i] - '0'];
    p %= MOD;
  }
  return pii(v, p);
}

int main(){
  cin >> S >> N;
  for(int i = 0; i < N; i++) cin >> T[i];
  for(int i = 0; i < 10; i++){
    val[i] = i;
    len[i] = 10;
  }
  for(int i = N - 1; i >= 0; i--){
    int d = T[i][0] - '0';
    pii p = calc(T[i].substr(3));
    val[d] = p.first;
    len[d] = p.second;
  }
  cout << calc(S).first << '\n';
}
