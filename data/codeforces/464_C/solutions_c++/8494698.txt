#include <cstdio>
#include <cmath>
#include <cstring>
#include <iostream>
#include <algorithm>

typedef long long LL;

using namespace std;
const int mod=1e9+7;
string s,q[200000];
LL add[20],shift[20];
int n;
int main()
{
	cin>>s;
	cin>>n;
	for (int i=0;i<10;++i)
	{
		add[i]=i;
		shift[i]=10;
	}
	for (int i=0;i<n;++i) cin>>q[i];
	for (int i=n-1;i>=0;--i)
	{
		LL dqa=0,dqs=1;
		for (int j=q[i].size()-1;j>=3;--j)
		{
			dqa=(dqa+add[q[i][j]-'0']*dqs)%mod;
			dqs=(shift[q[i][j]-'0']*dqs)%mod;
		}
		int x=q[i][0]-'0';
		add[x]=dqa;
		shift[x]=dqs;
	}
	LL ans=0;
	for (int i=0;i<s.size();++i) ans=(ans*shift[s[i]-'0']+add[s[i]-'0'])%mod;
	cout<<ans<<endl;
	return 0;
}
	  	    	 			   	 			 	  	    	