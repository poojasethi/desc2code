#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <cstring>
using namespace std;

typedef long long ll;
const ll mod=1000000007;
struct info{
	int d;
	string t;
}a[111111];
char ss[111111];
string s;
int n;
ll w[11],v[11];

int main(){
	cin>>s>>n;
	for (int i=1;i<=n;i++){
		scanf("%d->",&a[i].d);
		gets(ss);
		a[i].t=ss;
	}
	for (int i=0;i<=9;i++){
		w[i]=10;
		v[i]=i;
	}
	for (int i=n;i;i--){
		ll res=0,wei=1;
		for (int j=0;j<a[i].t.size();j++){
			int num=a[i].t[j]-'0';
			res=(res*w[num]+v[num])%mod;
			wei=wei*w[num]%mod;
		}
		w[a[i].d]=wei;
		v[a[i].d]=res;
	}
	ll ans=0,wei=1;
	for (int i=0;i<s.size();i++){
		int num=s[i]-'0';
		ans=(ans*w[num]+v[num])%mod;
		wei=wei*w[num]%mod;
	}
	cout<<ans<<endl;
}
