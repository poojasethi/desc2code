#include<stdio.h>
#include<algorithm>
#include<string.h>
#include<vector>
#include<string>
using namespace std;
typedef __int64 LL;
const int N=100005,mod=1e9+7;
char s[N],str[N];
int a[N],c[N],b[N];
string ss[N];
    
int main(){
    int i,n,m,j,k,T,l,r;
    LL ans,t,x,y;
    while(~scanf("%s",s)){
        n=strlen(s);
        scanf("%d",&m);
        for(i=0;i<m;i++) scanf("%s",str),ss[i]=str;
        for(i=0;i<10;i++) c[i]=i,b[i]=10;
        for(i=m-1;i>=0;i--){
            for(y=1,x=0,j=ss[i].size()-1;j>=3;j--){
                t=ss[i][j]-'0';
                x=(x+c[t]*y)%mod;
                y=y*b[t]%mod;
            }
            a[i]=ss[i][0]-'0';
            c[a[i]]=x;
            b[a[i]]=y;
        }
        for(x=i=0;i<n;i++) x=(x*b[s[i]-'0']+c[s[i]-'0'])%mod;
        printf("%I64d\n",x);
    }
    return 0;
}   