#include<stdio.h>
#include<string>
#include<iostream>
using namespace std;
#define M 12
#define N 100200
int pw[M];
int digit[M];
string query[N];
string curr;
int n;
const int MOD=1e9+7;
main(){
//	freopen("test.inp","r",stdin);
	cin>>curr;
	cin>>n;
	for(int i=1;i<=n;i++)
		cin>>query[i];
	for(int i=0;i<10;i++){
		digit[i]=i;
		pw[i]=10;
	}
	for(int i=n;i>=1;i--){
		int cpw=1;
		int cdigit=0;
		for(int j=3;j<query[i].size();j++){
			cpw=(1ll*cpw*pw[query[i][j]-48])%MOD;
			cdigit=(1ll*cdigit*pw[query[i][j]-48]+digit[query[i][j]-48])%MOD;
		}
		pw[query[i][0]-48]=cpw;
		digit[query[i][0]-48]=cdigit;
	}
	int ans=0;
	for(int i=0;i<curr.size();i++)
		ans=(1ll*ans*pw[curr[i]-48]+digit[curr[i]-48])%MOD;
	cout<<ans;
}