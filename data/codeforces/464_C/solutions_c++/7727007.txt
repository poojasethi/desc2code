#include <bits/stdc++.h>
#define FRO(i,a,b) for(int i=a; i>=b; i--)
#define FOR(i,a,b)  for(int i=a; i<=b; i++)
#define ll  long long
#define oo 1000000007
using namespace std;

string st, p[100005];   ll mu[15] , gt[15], test;
int main()
{
    cin>>st>>test;  FOR(i,0,9){ mu[i] = 10; gt[i] = i;} FOR(i,1,test) cin>>p[i];
    FRO(j,test,1)
    {
        ll a = 0;   ll b = 1;
        FOR(i, 3, p[j].size()-1){   int x = p[j][i] - 48;   a = (a * mu[x] % oo + gt[x])%oo;    b = ( b*mu[x] )%oo;}
        int x = p[j][0] - 48;   mu[x] = b;  gt[x] = a;
    }   ll a = 0;
    FOR(i,0,st.size()-1){   int x = st[i] - 48; a = (a*mu[x]%oo + gt[x])%oo;}    cout<<a;
}
