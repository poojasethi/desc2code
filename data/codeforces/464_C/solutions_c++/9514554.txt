#include <iostream>
#include <string>
#include <algorithm>

using namespace std;
typedef long long ll;
const int modbase = 1000000007;

int main () {
	ios::sync_with_stdio(false);
	string s, query[100000];
	int n, lenpow[10], val[10];

	cin >> s;
	cin >> n;
	for (int i=0; i<n; ++i)
		cin >> query[i];

	for (int i=0; i<10; ++i) {
		lenpow[i] = 10;
		val[i] = i;
	}

	while (n-->0) {
		const string &q = query[n];
		int d = q[0]-'0';
		ll lp = 1, v = 0;
		for (int i=q.length()-1; i>=3; --i) {
			v = (v + val[q[i]-'0']*lp)%modbase;
			lp = (lp * lenpow[q[i]-'0'])%modbase;
		}

		val[d] = v;
		lenpow[d] = lp;
	}

	ll v=0, lp=1;
	for (int i=s.length()-1; i>=0; --i) {
		v = (v + val[s[i]-'0']*lp)%modbase;
		lp = (lp * lenpow[s[i]-'0'])%modbase;
	}

	cout << v << endl;
	return 0;
}






