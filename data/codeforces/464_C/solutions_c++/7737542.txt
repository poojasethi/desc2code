#include<bits/stdc++.h>
using namespace std;
const long long int n = 100005,m=1000000007;
 long long int t;
string s ,c[n];
long long int add[10],shift[10];
int main(){
long long int ta,ts;
cin>>s;
cin>>t;
for(int i=0;i<10;i++){
    add[i]=i;
    shift[i]=10;
}
for(int i=0;i<t;i++)
    cin>>c[i];
for(long long int i=t-1;i>=0;--i){
ta=0;ts=1;
for(int j=c[i].size()-1;j>=3;j--){
    ta=(ta+add[c[i][j]-'0']*ts)%m;
    ts=(shift[c[i][j]-'0']*ts)%m;
}
int x = c[i][0]-'0';
add[x]=ta;
shift[x]=ts;
}
long long int p=0;
for(long long int i=0;i<s.size();i++){
    p=(p*shift[s[i]-'0']+add[s[i]-'0'])%m;
}
cout<<p<<endl;
}
