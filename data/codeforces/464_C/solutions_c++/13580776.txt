#include <bits/stdc++.h>
#define P 1000000007
using namespace std;

long long numb[10], size[10];
stack<string> query;

int main() {
	for(int i=0;i<10;i++){
		numb[i] = i;
		size[i] = 10;
	}
	int nq;
	string data, tmp;
	cin >> data;
	cin >> nq;
	for(int i=0;i<nq;i++){
		cin >> tmp;
		query.push(tmp);
	}
	while(query.size() != 0){
		tmp = query.top();
		query.pop();
		long long temp = 0, tamp = 1;
		int now = (int)tmp[0]-48;
		for(int i=3;i<(int)tmp.size();i++){
			temp = (temp*size[(int)tmp[i]-48]%P + numb[(int)tmp[i]-48])%P;
			tamp = tamp * size[(int)tmp[i]-48] % P;
		}
		numb[now] = temp;
		size[now] = tamp;
	}
	long long ans = 0;
	for(int i=0;i<(int)data.size();i++){
		ans = (ans * size[(int)data[i]-48] % P + numb[(int)data[i]-48])%P;
	} cout << ans << endl;
}