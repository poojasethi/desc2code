#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007
int M[10];
int P[10];
string A;
pair<int,string> C[100000];
int main()
{
	for(int i=0; i<10; i++){M[i]=i;P[i]=10;}
	cin>>A;
	int q; cin>>q;
	int x;
	for(int i=0;i<q;i++)
	{
		scanf("%1d->",&C[i].first);
		//cin>>C[i].second;
		getline(cin, C[i].second, '\n');
		
	}
	/*	for(int i=0;i<q;i++)
	{
		cout<<C[i].first<<" "<<C[i].second<<endl;
		
	}*/
	for(int i=q-1;i>=0;i--)
	{
		int n = C[i].second.size();
		long long cn = 0;
		for(int j=0;j<n;j++)
		{
			cn = (cn*P[C[i].second[j]-'0'] + M[C[i].second[j]-'0'])%mod;
		}
		M[C[i].first ]=cn;
		cn = 1;
		for(int j=0;j<n;j++)
		{
			cn = (cn*P[C[i].second[j]-'0'] )%mod;
		}
		P[C[i].first]=cn;
	}
	
	long long ans=0;
	int n = A.size();
	for(int i=0;i<n;i++)
		ans = (ans*P[A[i]-'0'] + M[A[i]-'0'])%mod;
	cout<<ans<<endl;
	return 0;
	
}
