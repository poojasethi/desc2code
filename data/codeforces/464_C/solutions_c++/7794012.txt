#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <iostream>
#include <string>
using namespace std;
typedef long long ll;
typedef double db;
typedef pair<int,int> pii;

const int mo=1e9+7;

string s;
int n;
ll x[128],y[128];
string t[100005];

int main(){
	cin>>s>>n;
	for(int i=1;i<=n;i++)
		cin>>t[i];
	for(int i=0;i<10;i++) x[i]=10,y[i]=i;
	for(int i=n;i;i--){
		ll xx=1,yy=0;
		for(int j=3;j<t[i].size();j++){
			(xx*=x[t[i][j]-'0'])%=mo;
			(yy=yy*x[t[i][j]-'0']+y[t[i][j]-'0'])%=mo;
		}
		x[t[i][0]-'0']=xx;
		y[t[i][0]-'0']=yy;
	}
	ll ans=0;
	for(int i=0;i<s.size();i++) (ans=ans*x[s[i]-'0']+y[s[i]-'0'])%=mo;
	printf("%d\n",int(ans));
	scanf("\n");
}
