#include<bits/stdc++.h>
#define mod 1000000007
using namespace std;
#define ll long long int
#define pb push_back
#define pi pair<ll,ll>
#define f first
#define s second
#define mp make_pair
ll m[10];
ll len[10];
ll bpow(ll x,ll n){
	ll ans=1;
	while(n>0){
		if(n&1) ans=ans*x%mod;
		x=x*x%mod;
		n/=2;
	}
	return ans;
}
int main(){
for(int i=0;i<=9;i++){
	m[i]=i;
	len[i]=10;
}	
string s;
cin>>s;
ll q;
cin>>q;
string inp[q+1];
for(int i=1;i<=q;i++) cin>>inp[i];
for(int i=q;i>=1;i--){
int d=inp[i][0]-'0';
ll t=0;
ll p=1;
for(int j=inp[i].length()-1;j>=3;j--){
	t=t+(m[inp[i][j]-'0']*p)%mod;
    p*=len[inp[i][j]-'0'];
    p%=mod;
    t%=mod; 
}
m[d]=t;
len[d]=p;
}
ll ans=0;
ll p=1;
for(int i=s.length()-1;i>=0;i--){
 ans=ans+(m[s[i]-'0']*p)%mod;
 p*=len[s[i]-'0'];
 p%=mod;
 ans%=mod;
}
cout<<ans;
} 
