#include<iostream>
#include<string>

using namespace std ;

const int maxn=1e5+10, Mod=1e9+7 ;
string s ;
int n ;
string q[maxn] ;
long long a[10] , b[10] ; 
int main()
{ 
	cin >> s >> n ;
	for(int i=0 ; i<10 ; i++)
	{
		a[i]=i ; 
		b[i]=10 ;
	}
	for(int i=0 ; i<n ; i++)	
		cin >> q[i] ;
	for(int i=n-1 ; i>=0 ;i--)
	{
		long long aa=0,bb=1 ;		
		for(int j=q[i].size()-1 ; j>=3 ; j--)
		{
			aa=(aa+a[q[i][j]-'0']*bb)%Mod ;
			bb=b[q[i][j]-'0']*bb%Mod ;
		}
		int x=q[i][0]-'0';
		a[x]=aa ;
		b[x]=bb ;
	}
	long long ans=0ll;
	for(int i=0 ; i<s.size() ; i++)	
		ans=(ans*b[s[i]-'0']+a[s[i]-'0'])%Mod ;
	cout << ans << endl ;
	return 0 ; 
}
