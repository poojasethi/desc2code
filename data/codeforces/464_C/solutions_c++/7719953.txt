#include<iostream>
#include<cstring>
#include<cstdio>
#include<cmath>
#include<queue>
#include<map>
#include<vector>
using namespace std;

#define maxn 100
#define INF 0x3f3f3f3f
#define MOD 1000000007
#define LL long long

LL shift[12], val[12];
string s, q[100010];

int main()
{
	int n;
	cin >> s;
	cin >> n;
	for (int i = 1; i <= n; i++) cin >> q[i];

	for (int i = 0; i <= 9; i++)
	{
		shift[i] = 10;
		val[i] = i;
	}

	for (int i = n; i > 0; i--)
	{
		LL tshift = 1, tval = 0;
		for (int j = q[i].length() - 1; j >= 3; j--)
		{
			int num = q[i][j] - '0';
			tval = (tval + tshift * val[num]) % MOD;
			tshift = (tshift * shift[num]) % MOD;
		}
		int num = q[i][0] - '0';
		val[num] = tval;
		shift[num] = tshift;
	}

	LL ans = 0;
	for (int i = 0; i < s.length(); i++)
	{
		ans = (ans * shift[s[i] - '0'] + val[s[i] - '0']) % MOD;
	}
	cout << ans << endl;
}

