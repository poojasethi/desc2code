#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>
using namespace std;
const int mo =1000000007;
const int N = 100010;
char s[N];
string q[N];
int n;
long long f[N],pw[N];
int main()
{
	//freopen("1.in","r",stdin);
	scanf("%s",s);
	scanf("%d",&n);
	for (int i=0;i<n;i++) cin>>q[i];
	for (int i=0;i<10;i++) f[i]=i,pw[i]=10;
	for (int i=n-1;i>=0;i--)
	{
		int c = q[i][0]-'0';
		long long  p = 1;
		long long  su = 0;
		for (int j=3;j<q[i].size();j++)
		{
			su=su*pw[q[i][j]-'0']+f[q[i][j]-'0'];
			su%=mo;
			p = p*pw[q[i][j]-'0']%mo;
		}
		f[c]=su;
		pw[c]=p;
	}
	long long ans = 0;
	for (int i=0;i<strlen(s);i++)
		ans = (ans*pw[s[i]-'0']+f[s[i]-'0'])%mo;	
	printf("%I64d",ans);
}