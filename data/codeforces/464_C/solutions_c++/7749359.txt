#include <iostream>
#define C 1000000007;
using namespace std;

int main(){

	long long output=0;long n;
	string str="",q[100001];
	long long a[10],s[10];
	long long tempa,temps;
	
	for (int i=0;i<=9;i++) {a[i]=i;s[i]=10;}
	cin>>str;
	cin>>n;
	
	for (int i=0;i<n;i++) cin>>q[i];
	for (long i=n-1;i>=0;i--){
		tempa=0;temps=1;
		for (long j=q[i].size()-1;j>=3;j--){
			tempa=(tempa+a[q[i][j]-'0']*temps)%C;
			temps=(temps*s[q[i][j]-'0'])%C;
		}
		
		int front=(q[i][0]-'0');
		a[front]=tempa;
		s[front]=temps;
	}
	
	for (long i=0;i<str.size();i++){
		output=(output*s[str[i]-'0']+a[str[i]-'0'])%C;
	}
	
	cout<<output<<endl;
	
return 0;}