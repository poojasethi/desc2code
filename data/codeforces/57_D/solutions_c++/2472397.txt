#include<cstdio>
#define fo(i,a,b) for(i=a;i<=b;++i)
#define fd(i,a,b) for(i=a;i>=b;--i)
const int mn=1010;
typedef long long LL;
char g1[mn][mn],g2[mn][mn];
int h[mn],x[mn],y[mn];
int n,m,tt;
LL ans;
void calc(char g[][mn],int n,int m,int h[])
{
    int i,j,s;
    fo(i,1,n)
    {
        h[i]=0;
        fo(j,1,m)if(g[i][j]=='X')h[i]=j;
    }
    fo(i,1,n)
        fo(j,i+1,n)
            ans+=2LL*(j-i)*(m-(h[i]>0))*(m-(h[j]>0));
}
int main()
{
    scanf("%d%d",&n,&m);
    int i,j,h1,h2;
    fo(i,1,n)
        scanf("%s",g1[i]+1);
    fo(i,1,n)
        fo(j,1,m)
        {
            if(g1[i][j]=='.')++tt;
            g2[j][i]=g1[i][j];
        }
    calc(g1,n,m,y);
    calc(g2,m,n,x);
    fo(i,1,m)
    {
        if(!x[i])continue;
        h1=n-x[i],h2=x[i]-1;
        ans+=4LL*h1*h2;
        fo(j,i+1,m)
        {
            if(!x[j]||x[j]>x[j-1])break;
            h2=x[j]-1;
            ans+=4LL*h1*h2;
        }
        fd(j,i-1,1)
        {
            if(!x[j]||x[j]>x[j+1])break;
            h2=x[j]-1;
            ans+=4LL*h1*h2;
        }
    }
    fo(i,1,n)
    {
        if(!y[i])continue;
        h1=y[i]-1,h2=m-y[i];
        ans+=4LL*h1*h2;
        fo(j,i+1,n)
        {
            if(!y[j]||y[j]<y[j-1])break;
            h2=m-y[j];
            ans+=4LL*h1*h2;
        }
        fd(j,i-1,1)
        {
            if(!y[j]||y[j]<y[j+1])break;
            h2=m-y[j];
            ans+=4LL*h1*h2;
        }
    }
    printf("%.8lf\n",(double)ans/tt/tt);
    return 0;
}