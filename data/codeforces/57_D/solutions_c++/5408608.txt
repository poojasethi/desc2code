#include <cstdio>

using namespace std;
double ans;
int s,sum,n,m,i,j,a1[1001],a2[1001];
char ch;

void Portait_Left(){
  s=0;
  for (i=1;i<=n;i++){
    if (a1[i]>0){
      if (a1[i]>a1[i-1]) s+=a1[i]-1;
        else s=a1[i]-1;
    } else s=0;
    ans+=4. * s*(m-a1[i]) / sum/sum;
  }
}

void Portait_Right(){
  s=0;
  for (i=1;i<=n;i++){
    if (a1[i]>0){
      if (a1[i]<a1[i-1]) s+=m-a1[i];
        else s=m-a1[i];
    } else s=0;
    ans+=4. * s * (a1[i]-1) / sum/sum;
  }
}

void Lateral_Up(){
  s=0;
  for (i=1;i<=m;i++){
    if (a2[i]>0){
      if (a2[i]>a2[i-1]) s+=a2[i]-1;
        else s=a2[i]-1;
    } else s=0;
    ans+=4. * s * (n-a2[i]) / sum/sum;
  }
}

void Lateral_Down(){
  s=0;
  for (i=1;i<=m;i++){
    if (a2[i]>0){
      if (a2[i]<a2[i-1]) s+=n-a2[i];
        else s=n-a2[i];
    } else s=0;
    ans+=4. * s * (a2[i]-1) / sum/sum;
  }  
}

void calc(){
  for (i=1;i<=n;i++)
    for (j=1;j<i;j++)
      ans+=2.*(i-j)*(m-(a1[i]>0))*(m-(a1[j]>0))/sum/sum;
  for (i=1;i<=m;i++)
    for (j=1;j<i;j++)
      ans+=2.*(i-j)*(n-(a2[i]>0))*(n-(a2[j]>0))/sum/sum;

  Portait_Left();
  Portait_Right();
  Lateral_Up();
  Lateral_Down();

  for (i=1;i<=n;i++)
    if (a1[i]) ans-=4.*(a1[i]-1)*(m-a1[i])/sum/sum;
  for (i=1;i<=m;i++)
    if (a2[i]) ans-=4.*(a2[i]-1)*(n-a2[i])/sum/sum;
}

int main(){
  //freopen("57D.in","r",stdin);
  //freopen("57D.out","w",stdout);
  scanf("%d%d\n",&n,&m);
  sum=n*m;
  for (i=1;i<=n;i++){
    for (j=1;j<=m;j++){
      ch=getchar();
      if (ch=='X') a1[i]=j,a2[j]=i,sum--;
    }
    getchar();
  }
  calc();
  printf("%.9lf\n",ans);
  return 0;
}