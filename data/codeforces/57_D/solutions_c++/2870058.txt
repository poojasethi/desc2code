#include <cstdio>
#include <iostream>
using namespace std;
long long ans,all;
int n,m,i,j,k,o;
char a[1011][1011];
int s[2][1011][1011];
int tot[1011][1011],x[1011],y[1011];
int main()
{
		ios::sync_with_stdio(false);
		cin>>n>>m;
		for (i=1;i<=n;i++)
				cin>>a[i]+1;
		for (i=1;i<=n;i++)
				for (j=1;j<=m;j++)
				{
						for (k=0;k<2;k++)
								s[k][i][j]=s[k][i-1][j]+s[k][i][j-1]-s[k][i-1][j-1];
						tot[i][j]=tot[i-1][j]+tot[i][j-1]-tot[i-1][j-1];
						if (a[i][j]=='.') s[0][i][j]+=i,s[1][i][j]+=j,tot[i][j]++;
						else							x[i]=j,y[j]=i;
				}
		for (i=1;i<=n;i++)
		for (j=1;j<=m;j++)
				if (a[i][j]=='.')
				{
					 ans+=tot[i-1][j-1]*(i+j)-s[0][i-1][j-1]-s[1][i-1][j-1];
					 ans+=(tot[i][m]-tot[i][j-1])*(i-j)-(s[0][i][m]-s[0][i][j-1])+(s[1][i][m]-s[1][i][j-1]);
					 ans+=(tot[n][j]-tot[i-1][j])*(j-i)+(s[0][n][j]-s[0][i-1][j])-(s[1][n][j]-s[1][i-1][j]);
					 ans+=(tot[n][m]-tot[i][m]-tot[n][j]+tot[i][j])*(-i-j)+(s[0][n][m]-s[0][i][m]-s[0][n][j]+s[0][i][j])+(s[1][n][m]-s[1][i][m]-s[1][n][j]+s[1][i][j]);
				}
				else	ans+=4*(i-1)*(n-i)+4*(j-1)*(m-j);
		for (i=1;i<=n;i++) if (x[i])
		{
				if (x[i+1]<x[i]) o=1;
				else						 o=-1;
				for (j=i+1;x[j]&&x[j]*o<x[j-1]*o;j++)
						if (o==1) ans+=4*(m-x[i])*(x[j]-1);
						else			ans+=4*(x[i]-1)*(m-x[j]);
		}
		for (i=1;i<=m;i++) if (y[i])
		{
				if (y[i+1]<y[i]) o=1;
				else						 o=-1;
				for (j=i+1;y[j]&&y[j]*o<y[j-1]*o;j++)
						if (o==1) ans+=4*(n-y[i])*(y[j]-1);
						else			ans+=4*(y[i]-1)*(n-y[j]);
		}
		all=tot[n][m];
		all*=all;
		printf("%.10f\n",(double)ans/all);
		return 0;
}