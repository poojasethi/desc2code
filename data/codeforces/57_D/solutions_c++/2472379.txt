//Codeforces 57D Journey
#include<fstream>
#include<iostream>
#include<cstdlib>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;

const int MAXN=1005;
int n,m;
char a[MAXN][MAXN];
int xn[MAXN],yn[MAXN];
double ans=0;
double pr=0;
int px[MAXN],py[MAXN];

int main()
{
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;i++)
	scanf("%s",a[i]+1);
	memset(px,-1,sizeof(px));
	memset(py,-1,sizeof(py));
	for(int i=1;i<=n;i++)
	for(int j=1;j<=m;j++)
	if(a[i][j]=='.')
	{
		xn[i]++;yn[j]++;
		pr++;
	}
	else px[i]=j,py[j]=i;
	pr=pr*pr;
	for(int i=1;i<=n;i++)
	for(int j=i+1;j<=n;j++)
	ans+=(long long)(j-i)*xn[i]*xn[j];
	for(int i=1;i<=m;i++)
	for(int j=i+1;j<=m;j++)
	ans+=(long long)(j-i)*yn[i]*yn[j];
	ans*=2;
	int s=0;
	for(int i=1;i<=n;i++)
	{
		if(px[i]>px[i-1]) s+=px[i]-1;
		else if(px[i]==-1) s=0;
		else s=px[i]-1;
		int t=m;
		if(px[i]!=-1) t=m-px[i];
		ans+=4*t*s;
	}
	s=0;
	for(int i=n;i>=1;i--)
	{
		if(px[i]<px[i+1]) s=0;
		int t=m;
		if(px[i]!=-1) t=m-px[i];
		ans+=4*t*s;
		if(px[i]>px[i+1]) s+=px[i]-1;
		else if(px[i]==-1) s=0;
		else s=px[i]-1;
	}
	s=0;
	for(int i=1;i<=m;i++)
	{
		if(py[i]>py[i-1]) s+=py[i]-1;
		else if(py[i]==-1) s=0;
		else s=py[i]-1;
		int t=n;
		if(py[i]!=-1) t=n-py[i];
		ans+=4*t*s;
	}
	s=0;
	for(int i=m;i>=1;i--)
	{
		if(py[i]<py[i+1]) s=0;
		int t=n;
		if(py[i]!=-1) t=n-py[i];
		ans+=4*t*s;
		if(py[i]>py[i+1]) s+=py[i]-1;
		else if(py[i]==-1) s=0;
		else s=py[i]-1;
	}
	
	printf("%.9lf\n",ans/pr);
	
	return 0;
}
/*
Sample Input1:
2 2
..
.X
Sample Output1:
0.888888888889

Sample Input2:
3 3
...
.X.
...
Sample Output2:
2.000000000000
*/
