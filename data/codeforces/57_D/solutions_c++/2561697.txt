#include<cstdio>
#define ll long long

int n,m,i,j,e[1010][1010],Line[1010],Row[1010];

ll 	X[1010],_X[1010],_SumX,
	Y[1010],_Y[1010],_SumY,
	Ans,Sum;

int main()
{
	int i,j;
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++)
		for(scanf("\n"),j=1;j<=m;j++)
			e[i][j]=(getchar()=='X');
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			if(!e[i][j])
			{
				X[i]++;
				_X[i]+=i;
				Y[j]++;
				_Y[j]+=j;
				Sum++;
				_SumX+=i;
				_SumY+=j;
			}
			else
			{
				Line[i]=j;
				Row[j]=i;
			}
	for(i=1;i<=n;i++)X[i]+=X[i-1],_X[i]+=_X[i-1];
	for(i=1;i<=m;i++)Y[i]+=Y[i-1],_Y[i]+=_Y[i-1];
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			if(!e[i][j])
			{
				Ans+=X[i]*i-_X[i];
				Ans+=(_SumX-_X[i])-(Sum-X[i])*i;
				Ans+=Y[j]*j-_Y[j];
				Ans+=(_SumY-_Y[j])-(Sum-Y[j])*j;
			}
	for(i=1;i<=m;i++)
		for(j=i;j<=m;j++)
		{
			if(!Row[j]||i<j&&Row[j-1]>Row[j])
				break;
			Ans+=4ll*(Row[i]-1)*(n-Row[j]);
		}
	for(i=1;i<=m;i++)
		for(j=i+1;j<=m;j++)
		{
			if(!Row[j]||i<j&&Row[j-1]<Row[j])
				break;
			Ans+=4ll*(n-Row[i])*(Row[j]-1);
		}
	for(i=1;i<=n;i++)
		for(j=i;j<=n;j++)
		{
			if(!Line[j]||i<j&&Line[j-1]>Line[j])
				break;
			Ans+=4ll*(Line[i]-1)*(m-Line[j]);
		}
	for(i=1;i<=n;i++)
		for(j=i+1;j<=n;j++)
		{
			if(!Line[j]||i<j&&Line[j-1]<Line[j])
				break;
			Ans+=4ll*(m-Line[i])*(Line[j]-1);
		}
	Sum*=Sum;
	printf("%.8lf\n",1.0*Ans/Sum);
	return 0;
}
