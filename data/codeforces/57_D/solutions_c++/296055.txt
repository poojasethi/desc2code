#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cstring>
using namespace std;
int n,m,f[1007],v[1007];
long long ans,tot;
char c[1007][1007];
long long g[1007][1007];
double fin;
long long abs(long long x)
{
	if (x<0) return -x; else return x;
}

int main()
{
//	freopen("input.txt","r",stdin);
	//freopen("output.txt","w",stdout);
	scanf("%d%d\n",&n,&m);
	tot=n*m;
	for (int i=1;i<=n;i++)
	{
		for (int j=1;j<=m;j++)
		{
			scanf("%c",&c[i][j]);
			if (c[i][j]=='X') f[i]=j,tot--,v[j]=i;
		}
		scanf("\n");
	}	
	for (int i=1;i<=n;i++)
		if (f[i])
		{
			ans+=(f[i]-1)*(m-f[i]);
			for (int j=i+1;j<=n;j++)
				if (f[j-1]<f[j]) ans+=(f[i]-1)*(m-f[j]);
					else break;
		}
	for (int i=1;i<=n;i++)
		if (f[i])
			for (int j=i+1;j<=n;j++)
				if (f[j] && f[j]<f[j-1]) ans+=(f[j]-1)*(m-f[i]);
					else break;
	for (int i=1;i<=m;i++)
		if (v[i]) 
		{
			ans+=(v[i]-1)*(n-v[i]);
			for (int j=i+1;j<=m;j++)
				if (v[j-1]<v[j]) ans+=(v[i]-1)*(n-v[j]);
					else break;
		}
	for (int i=1;i<=m;i++)
		if (v[i])
			for (int j=i+1;j<=m;j++)
				if (v[j] && v[j]<v[j-1]) ans+=(v[j]-1)*(n-v[i]);
					else break;
			
	ans*=2;
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++) g[i][j]=g[i-1][j]+(i-1)*j+(j)*(j-1)/2;
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++) g[i][j]+=i*j;
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++) ans+=g[n-i+1][m-j]+g[n-i][j];
	for (int i=1;i<=n;i++)
		for (int j=1;j<=m;j++)
			if (c[i][j]=='X') ans-=g[n-i][j]+g[n-i+1][m-j]+g[i-1][m-j+1]+g[i][j-1];
	for (int i=1;i<=n;i++)
		for (int j=i+1;j<=n;j++)
			if (f[i] && f[j])
				ans+=abs(i-j)+abs(f[i]-f[j]);
	fin=((double)ans*2)/(tot*tot);
	printf("%.8lf",fin);
//	fclose(stdin);
//	fclose(stdout);
	return 0;
}
