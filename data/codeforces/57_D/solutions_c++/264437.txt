#include <cstdio>
#include <cstring>
#include <cmath>
#include <algorithm>
#include <string>
#include <vector>
#include <map>
#include <set>
#include <cctype>
#include <queue>
#define FOR(i,s,e) for(int i=(s);i<(int)(e);i++)
#define FOE(i,s,e) for(int i=(s);i<=(int)(e);i++)
#define CLR(s) memset(s,0,sizeof(s))
using namespace std;
typedef long long LL;
typedef pair<int,int> P;
#define x first
#define y second

int m, n;
char s[1024][1024];
char t[1024][1024];
int xx[1024], yy[1024];

int Abs(int x) { return x<0?-x:x; }

double solve(int m, int n, char s[1024][1024], int xx[1024]) {
        double ans=0;
        FOR(kk,0,2) {
                FOR(i,0,m) if (xx[i]!=-1) {
                        int last=xx[i];
                        int left=xx[i];
                        FOR(j,i+1,m) {
                                if(xx[j]<last) break;
                                ans+=2.0*left*(n-1-xx[j])*2;
                                last=xx[j];
                        }
                }
                FOR(i,0,m) if(xx[i]!=-1) xx[i]=n-1-xx[i];
        }
        FOR(i,0,m) if(xx[i]!=-1) ans+=2.0*xx[i]*(n-1-xx[i])*2;
        LL tot=0;
        FOR(i,0,m) FOR(j,0,m) {
                LL cur=(n-(xx[i]!=-1))*(n-(xx[j]!=-1));
                tot+=cur;
                ans+=cur*Abs(j-i);
        }
        return ans/tot;
}

int main() {
        scanf("%d%d", &m, &n);
        FOR(i,0,m) scanf("%s",s[i]);
        FOR(i,0,m) FOR(j,0,n) t[j][i]=s[i][j];
        memset(xx,-1,sizeof(xx));
        memset(yy,-1,sizeof(yy));
        FOR(i,0,m) FOR(j,0,n)
                if(s[i][j]=='X') xx[i]=j, yy[j]=i;
        double ans=0;
        ans += solve(m,n,s,xx);
        ans += solve(n,m,t,yy);
        printf("%.10f\n", ans);
        return 0;
}
