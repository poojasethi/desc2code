#include<cstdio>
#include<iostream>
#include<string>
#include<cstring>
#include<algorithm>
using namespace std;

int n,m;
int w1[1010],w2[1010];
char a[1010][1010],b[1010][1010];
double ans;

void work(int n1,int m1)
{int i,j,k=0;
 double s=0;
 
 memset(w1,0,sizeof(w1));
 for(i=1;i<=n1;i++)
 	for(j=1;j<=m1;j++)
 		if(b[i][j]=='X')
 			w1[i]=j;
 
 k=0;
 for(i=1;i<=n1;i++)
 	if(w1[i]>k)
 	{	ans+=s*(m1-w1[i])*2;
		k=w1[i];
		s+=w1[i]-1;
 	}
 	else if(w1[i]!=0)
 	{	k=w1[i];
	 	s=w1[i]-1;
 	}
 	else
 	{	k=0;
 		s=0;
 	}
}

int main()
{int i,j,s1=0,s2=0,sh=0;
 
 scanf("%d%d",&n,&m);
 
 for(i=1;i<=n;i++)
 {	scanf("%s",a[i]+1);
 	for(j=1;j<=m;j++)
 	{	//cout<<i<<" "<<j<<endl;
	 	b[i][j]=a[i][j];
 		sh+=(a[i][j]=='X')?1:0;
  	}
 }
  
 work(n,m); 
 
 for(i=1;i<=n;i++)
 	for(j=1;j<=m;j++)
 		b[i][j]=a[i][m+1-j];
  
 work(n,m);
  
 for(i=1;i<=m;i++)
 	for(j=1;j<=n;j++)
	 	b[i][j]=a[j][i];
 
 work(m,n);
 
 for(i=1;i<=m;i++)
 	for(j=1;j<=n/2;j++)
	 	swap(b[i][j],b[i][n+1-j]);		  		
 
 work(m,n);
 
 ans*=2;

 //cout<<ans<<endl;

 for(i=1;i<=n;i++)
 	for(j=1;j<=m;j++)
 		if(a[i][j]=='X')
 		{	ans+=(i-1)*(n-i)*4;
 			ans+=(j-1)*(m-j)*4;
 		}
 
 //cout<<ans<<" "<<sh<<endl;
 
 memset(w1,0,sizeof(w1));
 memset(w2,0,sizeof(w2));
 for(i=1;i<=n;i++)
 	for(j=1;j<=m;j++)
 		if(a[i][j]=='X')
 		{	w1[i]=1;
 			w2[j]=1;
 		}
 
 s1=0;
 s2=n*m-sh;
 
 for(i=1;i<=n;i++)
 {	s2-=m-w1[i];
 	ans+=(double)(i*s1-i*s2)*(m-w1[i])*2;
 	s1+=m-w1[i];
 }
 
 s1=0;
 s2=n*m-sh;
 
 for(i=1;i<=m;i++)
 {	s2-=n-w2[i];
 	ans+=(double)(i*s1-i*s2)*(n-w2[i])*2;
 	s1+=n-w2[i];
 }

 //cout<<ans<<endl;
 
 ans/=(n*m-sh);
 ans/=(n*m-sh);
 
 printf("%.10lf\n",ans);
 
 return 0;
}	 	