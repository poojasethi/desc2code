#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstdlib>
#include<cstring>

typedef long double lf;

const int fin=0,maxn=1010;
int n,m;
int x[maxn],y[maxn],r[maxn];
lf ans;

void sol0(){
  int i,j;
  for(i=1;i<=n;++i)r[i]=m-!!x[i];
  for(i=1;i<=n;++i)
    for(j=i+1;j<=n;++j)
      ans+=(lf)2*(j-i)*r[i]*r[j];
  for(i=1;i<=m;++i)r[i]=n-!!y[i];
  for(i=1;i<=m;++i)
    for(j=i+1;j<=m;++j)
      ans+=(lf)2*(j-i)*r[i]*r[j];
}

void sol1(){
  int i,j,t;
  for(i=1;i<=n;++i)
    for(t=0,j=i;j<=n;++j)
      if(x[j]>t)ans+=(lf)4*(x[i]-1)*(m-x[j]),t=x[j];
      else break;
  for(i=1;i<=n;++i)if(x[i])
    for(t=x[i],j=i+1;j<=n;++j)
      if(x[j]&&x[j]<t)ans+=(lf)4*(m-x[i])*(x[j]-1),t=x[j];
      else break;
  for(i=1;i<=m;++i)
    for(t=0,j=i;j<=m;++j)
      if(y[j]>t)ans+=(lf)4*(y[i]-1)*(n-y[j]),t=y[j];
      else break;
  for(i=1;i<=m;++i)if(y[i])
    for(t=y[i],j=i+1;j<=m;++j)
      if(y[j]&&y[j]<t)ans+=(lf)4*(n-y[i])*(y[j]-1),t=y[j];
      else break;
}

int main(){
  if(fin){
    freopen("t.in","r",stdin);
    freopen("t.out","w",stdout);
  }
  int s,i,j;
  char ch;
  scanf("%d%d",&n,&m),s=n*m;
  for(i=1;i<=n;++i)
    for(j=1;j<=m;++j){
      while(ch=getchar(),ch!='.'&&ch!='X');
      if(ch=='X')x[i]=j,y[j]=i,--s;
    }
  sol0();
  sol1();
  ans=ans/s/s;
  printf("%.12lf",(double)ans);
  return 0;
}
