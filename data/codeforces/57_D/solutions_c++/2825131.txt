#include <cstdio>
#include <cstring>
#include <cstdlib>

using namespace std;

enum {MAXN = 1010};
char mp[MAXN][MAXN];

int main()
{
  int n,m;
  scanf("%d%d",&n,&m);
  
  for(int i = 0;i < n;i++) scanf("%s",mp[i]);

  long long ans = 0;

  int pcnt = 0;
  long long psum = 0;
  for(int i = 0;i < n;i++)
    {
      int c = 0;
      for(int j = 0;j < m;j++)
	if (mp[i][j] == '.') ++c;
      ans += ((long long) pcnt * i - psum) * c;
      pcnt += c;
      psum += c * i;
    }

  pcnt = 0;
  psum = 0;
  for(int j = 0;j < m;j++)
    {
      int c = 0;
      for(int i = 0;i < n;i++)
	if (mp[i][j] == '.') ++c;
      ans += ((long long)pcnt * j - psum) * c;
      pcnt += c;
      psum += c * j;
    }

  for(int i = 0,prep = -1,pos,lsum,rsum;i < n;i++)
    {
      pos = -1;
      for(int j = 0;j < m;j++)
	if (mp[i][j] == 'X')
	  {
	    pos = j;
	    if (prep != -1)
	      {
		if (prep < pos)
		  {
		    lsum += j;
		    rsum = m - 1 - j;
		  }
		else
		  {
		    lsum = j;
		    rsum += m - 1 - j;
		  }
	      }
	    else
	      {
		lsum = j;
		rsum = m - 1 - j;
	      }
	    ans += lsum * rsum * 2;
	    break;
	  }
      prep = pos;
    }

  for(int j = 0,prep = -1,pos,lsum,rsum;j < m;j++)
    {
      pos = -1;
      for(int i = 0;i < n;i++)
	if (mp[i][j] == 'X')
	  {
	    pos = i;
	    if (prep != -1)
	      {
		if (prep < pos)
		  {
		    lsum += i;
		    rsum = n - 1 - i;
		  }
		else
		  {
		    lsum = i;
		    rsum += n - 1 - i;
		  }
	      }
	    else
	      {
		lsum = i;
		rsum = n - 1 - i;
	      }
	    ans += lsum * rsum * 2;
	  }
      prep = pos;
    }

  printf("%.10f\n",ans * 2 / ((double)pcnt * pcnt));
  return 0;
}
