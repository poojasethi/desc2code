n, d = map(int, raw_input().split())
l = []
for _ in xrange(n):
    a, b, t = raw_input().split()
    t = int(t)
    l.append([a, b, t])
    
s = set()
for i in xrange(len(l)):
    for j in xrange(i):
        if l[i][0] == l[j][1] and l[i][1] == l[j][0] and abs(l[i][2] - l[j][2]) in xrange(1, d + 1):
            s.add(tuple(sorted(l[i][:-1])))
            
print len(s)
for a in s:
    print a[0], a[1]