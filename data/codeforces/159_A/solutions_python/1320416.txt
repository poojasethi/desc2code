#!/usr/bin/python

import sys

def main():
  rawdata=[lines.split() for lines in sys.stdin.readlines()]
  num=int(rawdata[0][0])
  tdif=int(rawdata[0][1])
  data=rawdata[1:]
  #print num,tdif,data
  if num==1:
    print 0
  else:
    count=0
    k=0
    friends=[]
    while count<num-1:
      name1=data[count][0]
      name2=data[count][1]
      time=int(data[count][2])
      j=count+1
      while(int(data[j][2])-time<=tdif):
        if int(data[j][2])!=time and data[j][0]==name2 and data[j][1]==name1 and not [name1,name2] in friends and not [name2,name1] in friends:
	  k+=1
	  friends.append([name1,name2])
	j+=1
	if j==num: break
      count+=1
    print k
    for line in friends:
      print line[0],line[1]

if __name__=='__main__':
  main()
