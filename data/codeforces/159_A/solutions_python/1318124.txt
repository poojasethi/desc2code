[N, D] = [int(x) for x in raw_input().split()]

l = []
ans = set()
for _ in range(N):
    [a, b, t] = raw_input().split()
    t = int(t)
    tmp = []
    for i in range(len(l)):
        [c,d,s] = l[i]
        if t - s > D:
            l = l[:i]
            break
        if d == a and c == b and s < t:
            tmp = a + ' ' + b if a < b else b + ' ' + a
            ans.add(tmp)
            break
    l.insert(0, [a,b,t])

print len(ans)
for tmp in ans:
    print tmp
