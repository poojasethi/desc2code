n, dd = map(int, raw_input().split())
l = []
for i in range(0, n):
	s = raw_input().split();
	l.append((s[0], s[1], int(s[2])))
d = {}
for (q1, w1, t1) in l:
	for (q2, w2, t2) in l:
		if q1 == w2 and q2 == w1 and 0 < t2 - t1 <= dd:
			s = min(q1, w1) + " " + max(q1, w1)
			if s not in d: d[s] = 1
print len(d)
for q in d.keys():
	print q