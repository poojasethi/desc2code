#!/usr/bin/env python

n, d = map(int, raw_input().strip().split())
messages = map((lambda (a, b, t): (a, b, int(t))), [raw_input().strip().split() for i in xrange(n)])

friends = set()

for a, b, t in messages:
    for aa, bb, tt in messages:
        if (a, b) == (bb, aa):
            if 0 < tt - t <= d:
                if (a, b) not in friends and (b, a) not in friends:
                    friends.add((a, b))

print len(friends)
for a, b in friends:
    print a, b
