import sys
sys.setrecursionlimit(1111)
n, diff = map(int, raw_input().strip().split())
d = dict()
ans = set()
w = []
for line in sys.stdin.readlines():
	fro, to, time = line.strip().split()
	w.append((fro, to, int(time)))
	
for i in xrange(0, n):
	for u in xrange(i+1, n):
		if w[i][0] == w[u][1] and w[i][1] == w[u][0]:
			ddd = w[u][2] - w[i][2]
			if ddd > 0 and ddd <= diff:
				ans.add(frozenset((w[i][0], w[i][1])))

print len(ans)
for a,b in ans:
	print a,b
	