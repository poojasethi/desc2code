n, d = map(int, raw_input().split())
log = []
ans = set()
for i in range(n):
    A, B, t = raw_input().split()
    t = int(t)
    for e in log:
        if e[0] == B and e[1] == A and 0 < t - e[2] <= d:
            ans.add(tuple(sorted([A, B])))
    log.append([A, B, t])
print len(ans)
for a in ans:
    print a[0], a[1]
