#!/usr/bin/env python
import sys

(n, d) = map(int, raw_input().split(" "))
friend = set()
msg = []

for i in range(n):
    (f1, f2, t) = raw_input().split(" ")
    t = int(t)
    for p in msg:
        if p[0] == f2 and p[1] == f1 and 0 < t - p[2] <= d:
                friend.add(tuple(sorted([f1,f2])))
                break
    msg.append((f1,f2,t));

print len(friend)
for (f1, f2) in friend:
    print f1, f2

