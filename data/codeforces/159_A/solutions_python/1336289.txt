import sys
s=""
s=[x.replace("\n",'') for x in sys.stdin.readlines()]
n=int(s[0].split()[0])
d=int(s[0].split()[1])
fr=[[x.split()[0],x.split()[1]] for x in s[1:]]
t=[int(x.split()[2]) for x in s[1:]]
resfr=[]
for i in xrange(n):
	for j in xrange(i,n):
		if [fr[i][0],fr[i][1]] in resfr or [fr[i][1],fr[i][0]] in resfr:
			break 
		if 0<t[j]-t[i]<=d:
			if fr[j][1]==fr[i][0] and fr[j][0]==fr[i][1]:
				resfr.append([fr[i][0],fr[i][1]]) 
print len(resfr)
for x in resfr:
	print x[0],x[1]
