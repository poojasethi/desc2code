#include <iostream>
#include <set>
using namespace std;
int main ()
{
    int n,d;
    string a[1000];
    string b[1000];
    int c[1000];
    set < pair<string,string> > v;
    cin>>n>>d;
    for(int i=0;i<n;i++)
        cin>>a[i]>>b[i]>>c[i];
    for(int i=0;i<n-1;i++)
        for(int j=i+1;j<n;j++)
            if(a[i]==b[j] && b[i]==a[j] && c[j]-c[i]<=d && c[j]-c[i]>0)
                v.insert(make_pair(min(a[i],a[j]),max(b[i],b[j])));
        cout<<v.size()<<endl;
        set < pair<string,string > >::iterator it;
        for(it=v.begin();it!=v.end();it++)
            cout<<it->first<<' '<<it->second<<'\n';
    return 0;
}