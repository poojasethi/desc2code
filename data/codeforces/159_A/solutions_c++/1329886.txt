#include <iostream>
#include <vector>
#include <set>

using namespace std;

#define fab(i,a,b) for(int i=a;i<=b;i++)
#define rep(i,n) fab(i,0,n-1)

int n, d, t[1010];
string a[1010], b[1010];
set< pair< string, string > > ans;

int main()
{
    cin >> n >> d;
    rep(i, n)
        cin >> a[i] >> b[i] >> t[i];

    rep(i, n)
        fab(j, i+1, n-1)
            if (a[i] == b[j] && b[i] == a[j] && t[j]-t[i] <= d && t[j] > t[i])
                ans.insert(make_pair(min(a[i], b[i]), max(a[i], b[i])));

    cout << (int)ans.size() << '\n';
    for (set< pair< string, string > > :: iterator i = ans.begin(); i != ans.end(); i ++)
        cout << i->first << ' ' << i->second << '\n';
    return 0;
}
