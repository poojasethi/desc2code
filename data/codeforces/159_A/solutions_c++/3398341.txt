#include <iostream>
#include <cstdio>
#include <cstring>
#include <set>
#include <string>

using namespace std;

set <pair <string, string> > ans;
string a[1006], b[1006];
int t[1006];

int main()
{
	int n, d;
	scanf("%d%d", &n, &d);
	for(int i=0; i<n; i++) cin>>a[i]>>b[i]>>t[i];
	for(int i=0; i<n; i++)
		for(int j=0; j<n; j++)
			if(a[i]==b[j] && b[i]==a[j] && t[j]-t[i]>0 && t[j]-t[i]<=d)
				ans.insert(make_pair(min(a[i], b[i]), max(a[i], b[i])));
	cout<<ans.size()<<endl;
	for(set <pair <string, string> >::iterator it=ans.begin(); it!=ans.end(); it++)
		cout<<it->first<<" "<<it->second<<endl;
	return 0;
}

	  		  		  	  	  		  			 	