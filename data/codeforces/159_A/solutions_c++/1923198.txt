#include<iostream>
using namespace std;

int main()
{
	int n,d;
	string a[1000],b[1000];
	int t[1000];
	while(cin>>n>>d)
	{
		int i,j,k;
		for(i=0;i<n;i++)
			cin>>a[i]>>b[i]>>t[i];
		int l[1000]; 
		int num=0;
		for(i=0;i<n;i++)
			for(j=i+1;j<n;j++)
				if(a[i]==b[j] && b[i]==a[j] && t[j]-t[i]<=d && t[j]-t[i]>0)
				{
					for(k=0;k<num;k++)
						if((a[i]==a[l[k]] && b[i]==b[l[k]]) ||(a[i]==b[l[k]] && b[i]==a[l[k]]) )
							break;
					if(k==num)
						l[num++]=i;
					break;
				} 
		cout<<num<<endl;
		for(i=0;i<num;i++)
			cout<<a[l[i]]<<" "<<b[l[i]]<<endl;
	}
	return 0;
} 
				 			       	       			