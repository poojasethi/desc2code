#include<bits/stdc++.h>
using namespace std;
string s1[2000],s2[2000];
int n,d,t[2000],cnt[2000],c;
set< pair<string, string> >ss;
int main(){
   cin>>n>>d;
   for(int i=0;i<n;i++){
      cin>>s1[i]>>s2[i]>>t[i];
   }
   for(int i=0;i<n;i++){
      for(int j=0;j<n;j++){
         if(i==j) continue;
         if(s1[i]==s2[j] && s1[j]==s2[i]){
             if(abs(t[i]-t[j])>0 && abs(t[i]-t[j])<=d){
                     ss.insert(make_pair(min(s1[i],s1[j]),max(s1[i],s1[j])));
             }
         }
      }
   }
   cout<<ss.size()<<endl;
   for (set< pair< string, string > >::iterator it=ss.begin();it!=ss.end();it++ )
   {
        cout<<(*it).first<<" "<<(*it).second<<endl;
   }
   return 0;
}
