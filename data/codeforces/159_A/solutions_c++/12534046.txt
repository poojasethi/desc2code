#include<bits/stdc++.h>
using namespace std;

int n,d,tme[10002],s;
string ans[2002][3],A[2002],B[2002];

set<pair<string,string > > ss;

int main(){
	cin >> n >> d ;
	for(int i=1;i<=n;i++)
		cin >> A[i] >> B[i] >> tme[i];

	for(int i=1;i<=n;i++)
		for(int j=i+1;j<=n;j++){
			if(tme[j] - tme[i] > d)
				break;

			if(tme[j] - tme[i] > 0 && A[i] == B[j] && A[j] == B[i])
				ss.insert(make_pair(max(A[i],B[i]),min(A[j],B[j])));

			}
	cout << ss.size() << endl;

	for(set < pair < string,string > > ::iterator p =ss.begin(); p!=ss.end();++p)
		cout << p->first << ' ' << p->second << endl;
}
