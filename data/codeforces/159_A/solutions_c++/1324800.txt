#include<iostream>
#include<vector>
#include<map>

using namespace std;

bool mark[2000];

int main()
{
	int n,d,t[2000],x=0;
	string a[2000][2],k1,k2;
	vector <string> h;
	map <string, int> M;
	cin>>n>>d;
	for (int i=0; i<n; i++)
		cin>>a[i][0]>>a[i][1]>>t[i];
	for (int i=0; i<n; i++)
		for(int j=i+1; j<n; j++)
		{
			if(t[j]-t[i]<=d && t[j]-t[i]>0 && a[i][0]==a[j][1] && a[i][1]==a[j][0])
			{
				k1.clear();k2.clear();
				k1=a[i][0]; k1+=" "+a[i][1];
				k2=a[i][1]; k2+=" "+a[i][0];
				if (M.find(k1)==M.end() && M.find(k2)==M.end())
				{
					M[k1]=x;
					h.push_back(k1);
					x++;	
				}	
			}
		}
	cout<<x<<endl;
	for (int i=0; i<h.size(); i++)
		cout<<h[i]<<endl;
		
	return 0;
}
