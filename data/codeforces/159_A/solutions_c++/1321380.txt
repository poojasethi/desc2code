#include <cstdio>
#include <iostream>
#include<string>
#define m 25100
using namespace std;
int main()
{
	int n,d,i,j,k,count=0;
	string A[m],B[m];
	int t[m],temp[m];
	scanf("%d%d",&n,&d);
	i=0;
	while(i<n)
	{
		cin>>A[i]>>B[i]>>t[i];
		i++;
	}
	for(i=0;i<n-1;i++)
		for(j=i+1;j<n&&t[j]-t[i]<=d;j++)
		{
			if(t[j]>t[i])
				if(A[j]==B[i]&&B[j]==A[i])
				{
					temp[count]=i;
					for(k=0;k<count;k++)
					{
						if((A[i]==A[temp[k]]&&B[i]==B[temp[k]])||(A[i]==B[temp[k]]&&B[i]==A[temp[k]]))
						{
							count--;
							break;
						}
					}
					count++;
				}
		}
	cout<<count<<endl;
	for(i=0;i<count;i++)
		cout<<A[temp[i]]<<" "<<B[temp[i]]<<endl;

}