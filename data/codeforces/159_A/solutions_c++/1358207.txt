#include <iostream>
#include <string>
#include <set>
#include <algorithm>

using namespace std;

int n, d, t[1010];
string a[1010], b[1010];
set < pair <string, string> > s;

int main(){
    cin >> n >> d;
    for (int i = 0; i < n; i++) cin >> a[i] >> b[i] >> t[i];

    for (int i = 0; i < n; i++)
        for (int j = i + 1; j < n; j++)
            if (a[i] == b[j] && a[j] == b[i] && (t[j] - t[i]) <= d && t[j] > t[i])
                s.insert(make_pair(min(a[i], a[j]), max(a[i], a[j])));

    cout << s.size() << endl;
    for (set < pair <string, string> > :: iterator it = s.begin(); it != s.end(); it++)
        cout << it -> first << " " << it -> second << endl;
}
