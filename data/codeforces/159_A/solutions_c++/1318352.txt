#include<iostream>
#include<string>
#include<map>
#include<vector>
using namespace std;

int t[1100];
string a[1100],b[1100];
map<string,map<string,bool> >u;
vector<int>ans;
int n,d;

int main(){
    cin>>n>>d;
    for(int i=0;i<n;i++)
        cin>>a[i]>>b[i]>>t[i];
    for(int i=0;i<n;i++){
        for(int j=0;j<n;j++)
            if(0<t[i]-t[j] && t[i]-t[j]<=d && a[j]==b[i] && a[i]==b[j] && !u[a[i]][b[i]]){
                u[a[i]][b[i]]=u[a[j]][b[j]]=1;
                ans.push_back(i);
            }
    }
    cout<<ans.size()<<endl;
    for(int i=0;i<(int)ans.size();i++)
        cout<<a[ans[i]]<<' '<<b[ans[i]]<<endl;
}
