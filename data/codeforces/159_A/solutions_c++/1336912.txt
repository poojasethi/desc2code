#include <map>
#include <set>
#include <string>
#include <iostream>
using namespace std;
#define mp make_pair
#define sz(x) ((int) (x).size())
#define abs(a) ((a)<0?-(a):(a))
#define FOR(i,a,b) for (int i(a); i <= (b); i++)
set< pair<string,string> >q;
int t[1001];
string a[1001],b[1001];
int main()
{
	  int n,d;
	  cin >> n >> d;
	  FOR(i,1,n)
		  cin >> a[i] >> b[i] >> t[i];
	  q.clear();
	  FOR(i,1,n)
	  FOR(j,i+1,n)
	  if(a[i]==b[j] && a[j]==b[i] && abs(t[j]-t[i])<=d && abs(t[j]-t[i])>0)
		  q.insert(mp(min(a[i],a[j]),max(a[i],a[j])));

	  cout<<sz(q)<<endl;
	  for(set< pair<string,string> >::iterator it=q.begin();it!=q.end();it++)
		  cout<<it->first<<" "<<it->second<<endl;

      return 0;
}
