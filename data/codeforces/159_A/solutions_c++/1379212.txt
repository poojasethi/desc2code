#include <iostream>
#include <algorithm>
#include <string>
#include <set>
#include <utility>
using namespace std;

int main()
{
    set< pair<string,string> > ans;
    int n,d,t[1007], i,j;
    string a[1007],b[1007];
    cin>>n>>d;
    for (i=0; i<n; i++)
        cin>>a[i]>>b[i]>>t[i];
    for (i=0; i<n; i++)
    {
        for (j=i+1; j<n; j++)
        {
            if(a[i]==b[j] && b[i]==a[j] && t[j]>t[i] && t[j]-t[i]<=d)
                ans.insert( make_pair(min(a[i],a[j]),max(a[i],a[j])) );
        }
    }
    cout<<ans.size()<<endl;
    for (set<pair<string,string> >::iterator it=ans.begin();
                it != ans.end(); it++)
        cout<<it->first<<" "<<it->second<<endl;
    return 0;
}
