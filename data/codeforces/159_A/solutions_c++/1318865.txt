#include<iostream>
#include<map>
#include<string>
using namespace std;
#define N 1010
string a[N],b[N];
int t[N];
string ans1[N],ans2[N];
int main(){

	int n,d,i,j,k;
	int l=0;
	
	cin>>n>>d;
	for(i=0;i<n;i++){
		cin>>a[i]>>b[i]>>t[i];
	}
	for(i=0;i<n;i++){
		for(j=i+1;j<n;j++){
			if(a[i]==b[j]&&b[i]==a[j]&&(t[j]-t[i])<=d&&t[j]-t[i]>0)
			{
				for(k=0;k<l;k++)
					if(ans1[k]==a[i]&&ans2[k]==b[i]||ans1[k]==b[i]&&ans2[k]==a[i])
						break;
				if(k==l)
				{
					ans1[l]=a[i];
					ans2[l++]=b[i];
				}

			}
			if(t[j]-t[i]>d) break;
		}
	}
	cout<<l<<endl;
	for(i=0;i<l;i++)
		cout<<ans1[i]<<" "<<ans2[i]<<endl;


	return 0;
}