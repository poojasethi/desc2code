#include<bits/stdc++.h>
using namespace std;
typedef pair<string,string> p;
int main()
{set<p>s;long n,k,i,j;
cin>>n>>k;string a[n],b[n];long t[n];
for(i=0;i<n;i++)cin>>a[i]>>b[i]>>t[i];
for(i=0;i<n;i++)
    for(j=i+1;j<n;j++)
      if(a[i]==b[j]&&a[j]==b[i]&&t[j]-t[i]<=k&&t[j]-t[i])
         s.insert(p(max(b[i],b[j]),min(a[i],a[j])));
cout<<s.size()<<endl;
set<p>::iterator it=s.begin();
for(;it!=s.end();++it)
        cout<<(it->first)<<' '<<(it->second)<<endl;

    return 0;
}