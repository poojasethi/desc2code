#include <iostream>
#include <algorithm>
#include <utility>
#include <set>
#include <string>
#include <cmath>

using namespace std;

int N,D,T[1010];
string A[1010],B[1010];
set<pair<string,string> > result;

int main()
{
	cin >> N >> D;
	for (int i=0;i<N;i++)
		cin >> A[i] >> B[i] >> T[i];
	for (int i=0;i<N-1;i++)
		for (int j=i+1;j<N;j++)
			if (A[i]==B[j]&&B[i]==A[j]&&abs(T[i]-T[j])>0&&abs(T[i]-T[j])<=D)
				result.insert(make_pair(min(A[i],B[i]),max(A[i],B[i])));
	cout << result.size() << endl;
	for (set<pair<string,string> >::iterator it=result.begin();it!=result.end();it++)
		cout << it->first << " " << it->second << endl;
	return 0;
}