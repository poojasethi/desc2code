#include<iostream>
#include<vector>
using namespace std;

int main() {
	vector< pair<string,string> > v;
	int n,d,t[1000];
	string a[1000],b[1000];
	cin>>n>>d;
	for(int i=0; i<n; ++i) cin>>a[i]>>b[i]>>t[i];
	for(int i=0; i<n-1; ++i) for(int j=i+1; j<n; ++j) {
		if(a[i] == b[j] && b[i] == a[j] && t[j]-t[i] <= d && t[j]-t[i]>0) {
			bool cz = true;
			for(int k=0; k<v.size(); ++k) if((a[i] == v[k].first && b[i] == v[k].second) || (a[i] == v[k].second && b[i] == v[k].first)) 
				{ cz=false; break; }
			if(cz) v.push_back(make_pair(a[i],b[i]));
		}
	}
	cout<<v.size()<<endl;
	for(int i=0; i<v.size(); ++i) cout<<v[i].first<<" "<<v[i].second<<endl;
	
}

