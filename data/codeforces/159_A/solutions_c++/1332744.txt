#include<cstdio>
#include<algorithm>
#include<string>
#include<set>
#include<iostream>
using namespace std;

set< pair<string,string> > hash;
string A[1111],B[1111];
int t[1111];
int n,d;

int main()
{
	cin >> n >> d;
	for (int i=0;i<n;i++)
		cin >> A[i] >> B[i] >> t[i];
	for (int i=0;i<n;i++)
		for (int j=0;j<n;j++)
		if (A[i]==B[j] && B[i]==A[j] && abs(t[i]-t[j])<=d && t[i]!=t[j])
		{
			pair<string,string> tmp=make_pair(A[i],B[i]);
			if (A[i]>B[i]) swap(tmp.first,tmp.second);
			hash.insert(tmp);
		}
	printf("%d\n",hash.size());
	for (set< pair<string,string> > :: iterator it=hash.begin();it!=hash.end();it++)
		cout << it->first << " " << it->second << endl;
}
