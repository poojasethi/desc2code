#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
typedef int data[1101][1101];
data a,b,c,d,w;
int i,j,k,n,m,ans;
int main(){
	scanf("%d%d",&n,&m);
	for (i=1;i<=n;i++)
	 for (j=1;j<=m;j++) scanf("%d",&w[i][j]);
	memset(a,0,sizeof(a));memset(b,0,sizeof(b));memset(c,0,sizeof(c));memset(d,0,sizeof(d));
	for (i=1;i<=n;i++)
	 for (j=1;j<=m;j++) a[i][j]=w[i][j]+max(a[i-1][j],a[i][j-1]);
	for (i=n;i;i--)
	 for (j=1;j<=m;j++) b[i][j]=w[i][j]+max(b[i+1][j],b[i][j-1]);
	for (i=n;i;i--)
	 for (j=m;j;j--) c[i][j]=w[i][j]+max(c[i+1][j],c[i][j+1]);
	for (i=1;i<=n;i++)
	 for (j=m;j;j--) d[i][j]=w[i][j]+max(d[i-1][j],d[i][j+1]);
	for (i=2,ans=0;i<n;i++)
	 for (j=2;j<m;j++) ans=max(ans,a[i-1][j]+c[i+1][j]+b[i][j-1]+d[i][j+1]),ans=max(ans,a[i][j-1]+c[i][j+1]+b[i+1][j]+d[i-1][j]);
	printf("%d\n",ans);
	return 0;
}