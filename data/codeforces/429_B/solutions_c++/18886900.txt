#include <bits/stdc++.h>
using namespace std;
#define Int long long
Int mat[1002][1002],dp1[1002][1002],dp2[1002][1002],dp3[1002][1002],dp4[1002][1002];
int main(){

	Int n,m,i,j,M=0,k1,k2;
	cin>>n>>m;
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			cin>>mat[i][j];
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++){
			dp1[i][j] = max(dp1[i-1][j],dp1[i][j-1]) + mat[i][j];
		}
	for(i=n;i>=1;i--)
		for(j=m;j>=1;j--){
			dp2[i][j] = max(dp2[i+1][j],dp2[i][j+1]) + mat[i][j];
		}
	for(i=n;i>=1;i--)
		for(j=1;j<=m;j++){
			dp3[i][j] = max(dp3[i+1][j],dp3[i][j-1]) + mat[i][j];
		}
	for(i=1;i<=n;i++)
		for(j=m;j>=1;j--){
			dp4[i][j] = max(dp4[i-1][j],dp4[i][j+1]) + mat[i][j];
		}
	for(i=2;i<n;i++){
		for(j=2;j<m;j++){
			k1 = dp1[i][j-1] + dp2[i][j+1] + dp3[i+1][j] + dp4[i-1][j]; 
			k2 = dp1[i-1][j] + dp2[i+1][j] + dp3[i][j-1] + dp4[i][j+1];
			M = max(M,max(k1,k2));
		}
	}
	cout<<M<<endl;
	return 0;
}