#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
typedef long long ll;
#define rep(i,n) for (int i=1;i<=n;++i)
const int N=1005;
int n,m,ans,a[N][N],f0[N][N],f1[N][N],f2[N][N],f3[N][N];
int main()
{
	scanf("%d%d",&n,&m);
	rep(i,n) rep(j,m) scanf("%d",&a[i][j]),f0[i][j]=max(f0[i-1][j],f0[i][j-1])+a[i][j];
	rep(i,n) for (int j=m;j;--j) f1[i][j]=max(f1[i-1][j],f1[i][j+1])+a[i][j];
	for (int i=n;i;--i) rep(j,m) f2[i][j]=max(f2[i+1][j],f2[i][j-1])+a[i][j];
	for (int i=n;i;--i) for (int j=m;j;--j) f3[i][j]=max(f3[i+1][j],f3[i][j+1])+a[i][j];
	rep(i,n) rep(j,m) if (i>1 && j>1 && i<n && j<m)
		ans=max(ans,f0[i-1][j]+f1[i][j+1]+f2[i][j-1]+f3[i+1][j]),
		ans=max(ans,f0[i][j-1]+f1[i-1][j]+f2[i+1][j]+f3[i][j+1]);
	printf("%d\n",ans);
	return 0;
}
