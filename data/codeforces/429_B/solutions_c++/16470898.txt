#include <bits/stdc++.h>
#define ll long long int
using namespace std;
ll a1[1010][1010],a2[1010][1010],b1[1010][1010],b2[1010][1010],a[1010][1010],n,m,mx=-1;
int main(){
	cin>>n>>m;
	for(int i=1;i<=n;i++)for(int j=1;j<=m;j++)scanf("%I64d",&a[i][j]);
	for(int i=1;i<=n;i++)for(int j=1;j<=m;j++)a1[i][j]=a[i][j]+max(a1[i-1][j],a1[i][j-1]);
	for(int i=n;i;i--)for(int j=m;j;j--)a2[i][j]=a[i][j]+max(a2[i+1][j],a2[i][j+1]);
	for(int i=n;i;i--)for(int j=1;j<=m;j++)b1[i][j]=a[i][j]+max(b1[i+1][j],b1[i][j-1]);
	for(int i=1;i<=n;i++)for(int j=m;j;j--)b2[i][j]=a[i][j]+max(b2[i-1][j],b2[i][j+1]);
	for(int i=2;i<n;i++)for(int j=2;j<m;j++)mx=max(mx,max(a1[i-1][j]+a2[i+1][j]+b1[i][j-1]+b2[i][j+1],a1[i][j-1]+a2[i][j+1]+b1[i+1][j]+b2[i-1][j]));
	cout<<mx<<endl;
}