#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
const int N=1005;
ll d[N][N][4];
int n, m, a[N][N];

int main() {
	scanf("%d%d", &n, &m);
	for(int i=1; i<=n; ++i) for(int j=1; j<=m; ++j) scanf("%d", &a[i][j]);
	for(int i=1; i<=n; ++i) {
		for(int j=1; j<=m; ++j) {
			d[i][j][0]=max(d[i-1][j][0], d[i][j-1][0])+a[i][j];
		}
		for(int j=m; j>=1; --j) {
			d[i][j][1]=max(d[i-1][j][1], d[i][j+1][1])+a[i][j];
		}
	}
	for(int i=n; i>=1; --i) {
		for(int j=1; j<=m; ++j) {
			d[i][j][2]=max(d[i+1][j][2], d[i][j-1][2])+a[i][j];
		}
		for(int j=m; j>=1; --j) {
			d[i][j][3]=max(d[i+1][j][3], d[i][j+1][3])+a[i][j];
		}
	}
	ll ans=0;
	for(int i=2; i<n; ++i) {
		for(int j=2; j<m; ++j) {
			ans=max(ans, max(d[i][j-1][2]+d[i][j+1][1]+d[i-1][j][0]+d[i+1][j][3],
					d[i+1][j][2]+d[i-1][j][1]+d[i][j-1][0]+d[i][j+1][3]));
		}
	}
	printf("%I64d\n", ans);
	return 0;
}