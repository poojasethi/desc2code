#include <cstdio>
#include <iostream>
using namespace std;
const int N=1010;
int a[6][1010][1010];
int n,m;
int main(){
	cin>>n>>m;
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			cin>>a[1][i][j];
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			a[2][i][j]=max(a[2][i-1][j],a[2][i][j-1])+a[1][i][j];
	for(int i=n;i>=1;i--)
		for(int j=1;j<=m;j++)
			a[3][i][j]=max(a[3][i+1][j],a[3][i][j-1])+a[1][i][j];
	for(int i=1;i<=n;i++)
		for(int j=m;j>=1;j--)
			a[4][i][j]=max(a[4][i-1][j],a[4][i][j+1])+a[1][i][j];
	for(int i=n;i>=1;i--)
		for(int j=m;j>=1;j--)
			a[5][i][j]=max(a[5][i+1][j],a[5][i][j+1])+a[1][i][j];
	int ans=0;
	for(int i=2;i<=n-1;i++)
		for(int j=2;j<=m-1;j++){
			ans=max(ans,a[2][i-1][j]+a[3][i][j-1]+a[4][i][j+1]+a[5][i+1][j]);
			ans=max(ans,a[2][i][j-1]+a[3][i+1][j]+a[4][i-1][j]+a[5][i][j+1]);
		}
	cout<<ans;
	return 0;
}
  	  		   			   	   	 				   	