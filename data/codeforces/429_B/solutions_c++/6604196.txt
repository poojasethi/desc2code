#include <cstdio>
#include <cstring>
#include <algorithm>

using namespace std;

const int MaxN = 1010;

#define FOR(I,L,R) for(int I=(L);I<=(R);I++)
#define FORD(I,R,L) for(int I=(R);I>=(L);I--)

int n,m,ans;
int a[MaxN][MaxN];
int f[4][MaxN][MaxN];

int main()
{
	scanf("%d%d",&n,&m);
	FOR(i,1,n) FOR(j,1,m) scanf("%d",&a[i][j]);
	FOR(i,1,n) FOR(j,1,m) f[0][i][j]=a[i][j]+max(f[0][i][j-1],f[0][i-1][j]);
	FORD(i,n,1) FOR(j,1,m) f[1][i][j]=a[i][j]+max(f[1][i][j-1],f[1][i+1][j]);
	FOR(i,1,n) FORD(j,m,1) f[2][i][j]=a[i][j]+max(f[2][i][j+1],f[2][i-1][j]);
	FORD(i,n,1) FORD(j,m,1) f[3][i][j]=a[i][j]+max(f[3][i][j+1],f[3][i+1][j]);
	FOR(i,2,n-1) FOR(j,2,m-1)
		ans=max(ans,f[0][i-1][j]+f[1][i][j-1]+f[2][i][j+1]+f[3][i+1][j]),
		ans=max(ans,f[0][i][j-1]+f[1][i+1][j]+f[2][i-1][j]+f[3][i][j+1]);
	printf("%d\n",ans);
	return 0;
}
