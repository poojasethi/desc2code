#include <iostream>
#include <cstdio>
using namespace std;
int n, m, a[1002][1002], i, j;
long long b[1002][1002], c[1002][1002], d[1002][1002], e[1002][1002], ans;
int main()
{
	scanf("%d%d", &n, &m);
	for (i=1; i<=n; i++) for (j=1; j<=m; j++) scanf("%d", &a[i][j]);
	for (i=1; i<=n; i++) for (j=1; j<=m; j++) b[i][j]=max(b[i-1][j],b[i][j-1])+a[i][j];
	for (i=n; i>=1; i--) for (j=m; j>=1; j--) c[i][j]=max(c[i+1][j],c[i][j+1])+a[i][j];
	for (i=n; i>=1; i--) for (j=1; j<=m; j++) d[i][j]=max(d[i+1][j],d[i][j-1])+a[i][j];
	for (i=1; i<=n; i++) for (j=m; j>=1; j--) e[i][j]=max(e[i-1][j],e[i][j+1])+a[i][j];
	for (i=2; i<=n-1; i++) for (j=2; j<=m-1; j++) {
		ans=max(ans, b[i][j-1]+c[i][j+1]+d[i+1][j]+e[i-1][j]);
		ans=max(ans, d[i][j-1]+e[i][j+1]+c[i+1][j]+b[i-1][j]);
	}
	cout<<ans<<endl;
	return 0;
}
