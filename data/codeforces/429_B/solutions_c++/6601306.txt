#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 1010 
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an;
int a[N][N],f[4][N][N];
inline void work(int _,int x,int y) {
	int i,j,A=x>0?1:n,B=y>0?1:m;
	f[_][A][B]=a[A][B];
	for (i=A;i&&i<=n;i+=x)
	for (j=B;j&&j<=m;j+=y) {
		int C=i-x;
		if (C&&C<=n) f[_][i][j]=max(f[_][i][j],f[_][C][j]+a[i][j]);
		C=j-y;
		if (C&&C<=m) f[_][i][j]=max(f[_][i][j],f[_][i][C]+a[i][j]);
	}
}
int main() {
	scanf("%d%d",&n,&m);
	For(i,1,n)For(j,1,m) scanf("%d",&a[i][j]);
	work(0,1,1);
	work(1,-1,1);
	work(2,-1,-1);
	work(3,1,-1);
	For(i,2,n-1)For(j,2,m-1) {
		an=max(an,f[0][i][j-1]+f[1][i+1][j] +f[3][i-1][j]+f[2][i][j+1]);
		an=max(an,f[0][i-1][j]+f[1][i][j-1] +f[3][i][j+1]+f[2][i+1][j]);
	}
	printf("%d\n",an);
	//for(;;);
	return 0;
}
