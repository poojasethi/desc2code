#include <cstdio>
#include <algorithm>

using namespace std;

int f1[1001][1001],f2[1001][1001],f3[1001][1001],f4[1001][1001],g[1001][1001];
int i,j,m,n,s;

int main()
{
	scanf("%d%d",&n,&m);
	for (i=1;i<=n;i++)
	    for (j=1;j<=m;j++)
	        scanf("%d",&g[i][j]);
	for (i=1;i<=n;i++)
	    for (j=1;j<=m;j++)
	        f1[i][j]=max(f1[i-1][j],f1[i][j-1])+g[i][j];
	for (i=1;i<=n;i++)
	    for (j=m;j>0;j--)
	        f2[i][j]=max(f2[i-1][j],f2[i][j+1])+g[i][j];
	for (i=n;i>0;i--)
	    for (j=1;j<=m;j++)
	        f3[i][j]=max(f3[i+1][j],f3[i][j-1])+g[i][j];
	for (i=n;i>0;i--)
	    for (j=m;j>0;j--)
	        f4[i][j]=max(f4[i+1][j],f4[i][j+1])+g[i][j];
	for (i=2;i<n;i++)
	    for (j=2;j<m;j++)
	        s=max(s,max(f1[i-1][j]+f2[i][j+1]+f3[i][j-1]+f4[i+1][j],f1[i][j-1]+f2[i-1][j]+f3[i+1][j]+f4[i][j+1]));
	printf("%d",s);
	return 0;
}