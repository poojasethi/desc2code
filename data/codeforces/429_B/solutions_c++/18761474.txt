#include <algorithm>
#include <cstdio>
int f[1010][1010][4],a[1010][1010],i,j,n,m,ans;
int main()
{
//	freopen("ex.in","r",stdin);
	scanf("%d%d\n",&n,&m);
	for (i=1;i<=n;++i,scanf("\n"))
		for (j=1;j<=m;++j) scanf("%d",&a[i][j]);
	for (i=1;i<=n;++i)
		for (j=1;j<=m;++j)
			f[i][j][0]=std::max(f[i-1][j][0],f[i][j-1][0])+a[i][j];
	for (i=1;i<=n;++i)
		for (j=m;j>=1;--j)
			f[i][j][1]=std::max(f[i-1][j][1],f[i][j+1][1])+a[i][j];
	for (i=n;i>=1;--i)
		for (j=1;j<=m;++j)
			f[i][j][2]=std::max(f[i+1][j][2],f[i][j-1][2])+a[i][j];
	for (i=n;i>=1;--i)
		for (j=m;j>=1;--j)
			f[i][j][3]=std::max(f[i+1][j][3],f[i][j+1][3])+a[i][j];
	for (i=2;i<n;++i)
		for (j=2;j<m;++j)
		{
			ans=std::max(ans,f[i-1][j][0]+f[i][j+1][1]+f[i+1][j][3]+f[i][j-1][2]);
			ans=std::max(ans,f[i][j-1][0]+f[i-1][j][1]+f[i][j+1][3]+f[i+1][j][2]);
		}
	printf("%d\n",ans);
}
