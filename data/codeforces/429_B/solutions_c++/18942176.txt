#include<cstdio>
#include<algorithm>
using namespace std;

long long map[1005][1005],n,m,dp[5][1005][1005],ans=0;

int main()
{
	scanf("%d%d",&n,&m);
	
	for(int i=1;i<=n;i++)
	for(int j=1;j<=m;j++)
	scanf("%d",&map[i][j]);
	
	for(int i=1;i<=n;i++)
	for(int j=1;j<=m;j++)
	    dp[1][i][j]=map[i][j]+max(dp[1][i-1][j],dp[1][i][j-1]);
	
	for(int i=1;i<=n;i++)
	for(int j=m;j>=0;j--)
		dp[2][i][j]=map[i][j]+max(dp[2][i-1][j],dp[2][i][j+1]); 
	
	for(int i=n;i>=0;i--)
	for(int j=1;j<=m;j++)
		dp[3][i][j]=map[i][j]+max(dp[3][i+1][j],dp[3][i][j-1]);
	
	for(int i=n;i>=0;i--)
	for(int j=m;j>=0;j--)
	    dp[4][i][j]=map[i][j]+max(dp[4][i+1][j],dp[4][i][j+1]);
	
	for(int i=2;i<n;i++)
	for(int j=2;j<m;j++)
		ans=max(max(ans,dp[1][i-1][j]+dp[2][i][j+1]+dp[3][i][j-1]+dp[4][i+1][j]),max(ans,dp[1][i][j-1]+dp[2][i-1][j]+dp[3][i+1][j]+dp[4][i][j+1]));
		
	printf("%d\n",ans);
}
	 	  		 	 		   	  		   		  	