#include <cstdio>
#include <algorithm>
using namespace std;
int i, j, n, m, s = 0;
int a[1002][1002], b[1002][1002], c[1002][1002], d[1002][1002], t[1002][1002];
int main() {
	scanf("%d %d", &n, &m);
	int u = n + 1, v = m + 1;
	for(i = 1; i < u; i++) for(j = 1; j < v; j++) scanf("%d", &t[i][j]);
	for(i = 1; i < u; i++) for(j = 1; j < v; j++) {
		a[i][j] = t[i][j] + max(a[i - 1][j], a[i][j - 1]);
		b[u - i][j] = t[u - i][j] + max(b[u - i + 1][j], b[u - i][j - 1]);
		c[i][v - j] = t[i][v - j] + max(c[i - 1][v - j], c[i][v - j + 1]);
		d[u - i][v - j] = t[u - i][v - j] + max(d[u - i + 1][v - j], d[u - i][v - j + 1]);
	}
	for(i = 2; i < n; i++) for(j = 2; j < m; j++) {
		u = a[i][j - 1] + b[i + 1][j] + c[i - 1][j] + d[i][j + 1];
		v = a[i - 1][j] + b[i][j - 1] + c[i][j + 1] + d[i + 1][j];
		s = max(s, max(u, v));
	}
	printf("%d\n", s);
}