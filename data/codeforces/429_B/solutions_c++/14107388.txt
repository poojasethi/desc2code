#include <iostream>
using namespace std;
int a[1000 + 10][1000 + 10],fa[1000 + 10][1000 + 10],fb[1000 + 10][1000 + 10],ga[1000 + 10][1000 + 10],gb[1000 + 10 ][1000 + 10];
int main() 
{
	int n,m,ans=0;
  	cin>>n>>m;
  	for(int i=1;i<=n;i++) 
  	{
  		for(int j=1;j<=m;j++) 
		{
			cin>>a[i][j];
	      	fa[i][j]=max(fa[i-1][j],fa[i][j-1])+a[i][j];
	    }
	    for(int j=m;j>=1;j--)
			gb[i][j]=max(gb[i-1][j],gb[i][j+1])+a[i][j];
  	}
  
  	for(int i=n;i>0;i--) 
  	{
  	 	for(int j=1; j<=m; j++) 
			ga[i][j]=max(ga[i+1][j],ga[i][j-1])+a[i][j];
	    for(int j=m;j>=1;j--) 
			fb[i][j]=max(fb[i+1][j],fb[i][j+1])+a[i][j];
	}
	
 	 for(int i=2;i<n;i++) 
 	 {
		for(int j=2;j<m;j++) 
		{
	   	 	ans=max(ans,fa[i-1][j]+fb[i+1][j]+ga[i][j-1]+gb[i][j+1]);
			ans=max(ans,fa[i][j-1]+fb[i][j+1]+ga[i+1][j]+gb[i-1][j]);
		}
  	}
  	cout<<ans<<endl;
  	return 0;
}
	     	   	    		 		 		 	  	 	