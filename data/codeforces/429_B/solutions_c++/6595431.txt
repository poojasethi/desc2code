#include<stdio.h>
#include<string.h>
int n,m,i,j,f1[1200][1200],f2[1200][1200],f3[1200][1200],f4[1200][1200],a[1200][1200],temp,ans;
int max(int x,int y)
{
    return x>y?x:y;
}
main()
{
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)scanf("%d",&a[i][j]);
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++) f1[i][j]=max(f1[i-1][j],f1[i][j-1])+a[i][j];
	for(i=n;i>=1;i--)
		for(j=m;j>=1;j--) f2[i][j]=max(f2[i+1][j],f2[i][j+1])+a[i][j];
	for(i=n;i>=1;i--)
		for(j=1;j<=m;j++) f3[i][j]=max(f3[i+1][j],f3[i][j-1])+a[i][j];
	for(i=1;i<=n;i++)
		for(j=m;j>=1;j--) f4[i][j]=max(f4[i-1][j],f4[i][j+1])+a[i][j];
	ans=-1;
	for(i=2;i<n;i++)
		for(j=2;j<m;j++)
		{
			temp=max(f1[i-1][j]+f2[i+1][j]+f3[i][j-1]+f4[i][j+1],f1[i][j-1]+f2[i][j+1]+f3[i+1][j]+f4[i-1][j]);
			if(temp>ans) ans=temp;
		}
	printf("%d\n",ans);
}
