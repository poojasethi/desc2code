#include<iostream>
#include<cmath>
using namespace std;
int a[1010][1010],f1[1010][1010],f2[1010][1010],f3[1010][1010],f4[1010][1010],n,m,i,j,ans;
int main()
{
	cin>>n>>m;
	for (i=1;i<=n;i++)
	    for (j=1;j<=m;j++)
	         cin>>a[i][j];
    for (i=1;i<=n;i++)
        for (j=1;j<=m;j++)
            f1[i][j]=max(f1[i-1][j],f1[i][j-1])+a[i][j];
    for (i=1;i<=n;i++)
        for (j=m;j>=1;j--)
            f2[i][j]=max(f2[i-1][j],f2[i][j+1])+a[i][j];
    for (i=n;i>=1;i--)
        for (j=1;j<=m;j++)
            f3[i][j]=max(f3[i+1][j],f3[i][j-1])+a[i][j];
    for (i=n;i>=1;i--)
        for (j=m;j>=1;j--)
            f4[i][j]=max(f4[i+1][j],f4[i][j+1])+a[i][j];
    for (i=2;i<=n-1;i++)
        for (j=2;j<=m-1;j++)
           	ans=max(ans,max(f1[i-1][j]+f2[i][j+1]+f3[i][j-1]+f4[i+1][j],f1[i][j-1]+f2[i-1][j]+f3[i+1][j]+f4[i][j+1]));
    cout<<ans;
}
