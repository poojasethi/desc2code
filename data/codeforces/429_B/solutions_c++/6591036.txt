#include<cstdio>
#include<algorithm>
using namespace std;

int a[1005][1005],dp[4][1005][1005];

int main()
{
	int n,m,i,j,s=0;
	scanf("%d%d",&n,&m);
	for(i=1;i<=n;i++)
	for(j=1;j<=m;j++)
		scanf("%d",&a[i][j]);
	for(i=1;i<=n;i++)
	for(j=1;j<=m;j++)
	{
		dp[0][i][j]=max(dp[0][i-1][j],dp[0][i][j-1])+a[i][j];
		dp[1][n-i+1][m-j+1]=max(dp[1][n-i+2][m-j+1],dp[1][n-i+1][m-j+2])+a[n-i+1][m-j+1];
		dp[2][i][m-j+1]=max(dp[2][i-1][m-j+1],dp[2][i][m-j+2])+a[i][m-j+1];
		dp[3][n-i+1][j]=max(dp[3][n-i+2][j],dp[3][n-i+1][j-1])+a[n-i+1][j];
	}
	for(i=2;i<n;i++)
	for(j=2;j<m;j++)
		s=max(s,max(dp[0][i][j-1]+dp[1][i][j+1]+dp[2][i-1][j]+dp[3][i+1][j],dp[0][i-1][j]+dp[1][i+1][j]+dp[2][i][j+1]+dp[3][i][j-1]));
	printf("%d\n",s);
	return 0;
}
