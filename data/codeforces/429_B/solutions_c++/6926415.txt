#include <algorithm>
#include<cstdio>
using namespace std;
int tablero[1111][1111],dp[5][1111][1111],n,m,i,j;
int main()
{
	scanf("%d%d",&n,&m);
	{
		for(i=1;i<=n;i++)for(j=1;j<=m;j++)scanf("%d",&tablero[i][j]);
		for(i=1;i<=n;i++)for(j=1;j<=m;j++)dp[1][i][j] = tablero[i][j]+ max(dp[1][i-1][j],dp[1][i][j-1]);
		for(i=n;i>=1;i--)for(j=1;j<=m;j++)dp[2][i][j] = tablero[i][j]+ max(dp[2][i][j-1], dp[2][i+1][j]);
		for(i = n;i>=1;i--)for(j=m;j>=1;j--)dp[3][i][j] = tablero[i][j] + max(dp[3][i][j+1], dp[3][i+1][j]);
		for(i=1;i<=n;i++)for(j=m;j>=1;j--)dp[4][i][j] = tablero[i][j] + max(dp[4][i-1][j], dp[4][i][j+1]);
		int r = 0;
		for(i = 2;i<n;i++)for(j=2;j<m;j++)r = max(r,max(dp[1][i][j-1] + dp[3][i][j+1] + dp[2][i+1][j] + dp[4][i-1][j],dp[1][i-1][j] + dp[3][i+1][j] + dp[2][i][j-1] + dp[4][i][j+1]));
		printf("%d\n",r);
	}
	return 0;
}

