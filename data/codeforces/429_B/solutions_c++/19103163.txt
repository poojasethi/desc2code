#include <cstdio>
#include <algorithm>
#define rep(i,n) for(int i=1;i<=n;i++)
#define red(i,n) for(int i=n;i>=1;i--)
const int N=1005; 
long long ans=0,a[N][N],dp[4][N][N];
int n,m;
using namespace std;
int main(){
    scanf("%d%d",&n,&m);  
    rep(i,n)rep(j,m)scanf("%I64d",&a[i][j]);  
    rep(i,n)rep(j,m)dp[1][i][j]=a[i][j]+max(dp[1][i-1][j],dp[1][i][j-1]);  
    red(i,n)rep(j,m)dp[2][i][j]=a[i][j]+max(dp[2][i+1][j],dp[2][i][j-1]);  
    rep(i,n)red(j,m)dp[3][i][j]=a[i][j]+max(dp[3][i-1][j],dp[3][i][j+1]);  
    red(i,n)red(j,m)dp[0][i][j]=a[i][j]+max(dp[0][i+1][j],dp[0][i][j+1]);  	
    for(int i=2;i<n;i++)for(int j=2;j<m;j++){
	    ans=max(ans,dp[1][i-1][j]+dp[0][i+1][j]+dp[2][i][j-1]+dp[3][i][j+1]);
		ans=max(ans,dp[3][i-1][j]+dp[2][i+1][j]+dp[1][i][j-1]+dp[0][i][j+1]);  
    }return printf("%I64d\n",ans),0;
}
 	 	   	 	 				   		     	 	 		