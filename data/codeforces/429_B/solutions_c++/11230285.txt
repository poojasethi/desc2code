#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;

#define fo(i,x) for(int i=1; i<=x; i++)
#define fd(i,x) for(int i=x; i; i--)

const int N = 1005;

int n, m;
int v[N][N];

int a[N][N], b[N][N], c[N][N], d[N][N];

int main()
{
	
	scanf("%d%d", &n, &m);
	fo(i,n) fo(j,m) scanf("%d", &v[i][j]);
	
	fo(i,n) fo(j,m) a[i][j] = max(a[i-1][j], a[i][j-1]) + v[i][j];
	fo(i,n) fd(j,m) b[i][j] = max(b[i-1][j], b[i][j+1]) + v[i][j];
	fd(i,n) fo(j,m) c[i][j] = max(c[i+1][j], c[i][j-1]) + v[i][j];
	fd(i,n) fd(j,m) d[i][j] = max(d[i+1][j], d[i][j+1]) + v[i][j];
	
	int ans(0);
	fo(i,n) fo(j,m) if(i>1 && j>1 && i<n && j<m)
	{
		ans = max(ans, a[i-1][j] + b[i][j+1] + c[i][j-1] + d[i+1][j]);
		ans = max(ans, a[i][j-1] + b[i-1][j] + c[i+1][j] + d[i][j+1]);
	}
	printf("%d\n", ans);
	
	return 0;
}

		  		    	 		 	    	 			 	 			