// BE NAMASH


#include<iostream>
#include<vector>
#include<fstream>
using namespace std;
const int MN=210;
ifstream fin("input.txt");
ofstream fout("output.txt");
int n,t,m;
vector<int> l[MN];
int lst[MN][MN];
int c[MN],a[MN][2][2],mk[MN],vz[MN];
string s[MN];
int main(){
	fin>>n>>t;
	for(int i=0;i<n;i++){
		fin>>a[i][0][0]>>a[i][0][1];
		fin>>a[i][1][0]>>a[i][1][1];
	}
	fin>>m;
	for(int i=0;i<m;i++){
		fin>>s[i];
		fin>>c[i];
	}
	int T=t;
	int tm=0;
	int cm=0;
	while(true){
		if(mk[cm]==1){
			int Cm=cm;
			cm++;
			cm%=m;
			while(mk[cm]==1){
				cm++;
				cm%=m;
				if(Cm==cm){
					break;
				}
			}
			if(Cm==cm){
				break;
			}
		}
		if(T==0){
			T=t;
			vz[tm]=!vz[tm];
			tm++;
			tm%=n;
		}
		int v=vz[tm];
		int time=max(1,c[cm]-(a[tm][v][0]+a[tm][!v][1])-lst[tm][cm]);
		if(T>=time){
			mk[cm]=1;
			l[tm].push_back(cm);
			T-=time;
			cm++;
			cm%=m;
		}else{
			lst[tm][cm]+=T;
			cm++;
			cm%=m;
			T=0;
		}
	}
	for(int i=0;i<n;i++){
		fout<<l[i].size()<<" ";
		for(int j=0;j<l[i].size();j++){
			fout<<s[l[i][j]]<<" ";
		}fout<<endl;
	}
	return 0;
}


