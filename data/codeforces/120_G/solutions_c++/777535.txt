#include<stdio.h>
#include<string.h>
#include<vector>
#include<stdlib.h>
using namespace std;
int a[128][2];
int b[128][2];
int c[128];
char s[128][22];
int d[128][128];
bool u[128];
int max(int a,int b){
	if(a>b)
		return a;
	else return b;
}
vector<int> r[128];
int n;
void out(){
	for(int i=0;i<n;i++){
		printf("%d",r[i].size());
		for(unsigned j=0;j<r[i].size();j++){
			printf(" %s",s[r[i][j]]);
		}
		putchar('\n');
	}
	exit(0);
}
int main(){
#ifdef _DEBUG
	freopen("in.txt","r",stdin);
	freopen("out.txt","w",stdout);
#else
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
#endif

	int t,m;

	scanf("%d%d",&n,&t);
int i;
	for(i=0;i<n;i++){
		scanf("%d%d%d%d",a[i],b[i],a[i]+1,b[i]+1);
	}
	scanf("%d\n",&m);

	for(i=0;i<m;i++){
		gets(s[i]);
		scanf("%d\n",c+i);
	}


	memset(d,0,sizeof(d));
	memset(u,0,sizeof(u));
int k=0;
bool p=0;
i=0;
	while(1){
		int t1=0;
		int cur=0;
		while(t1+(cur=max(1,c[k]- (a[i][p] + b[i][!p]) - d[i][k])) <=t){
			t1+=cur;
			int k0=k;
			u[k]=1;
			r[i].push_back(k);
			k++;			
			if(k==m)
				k=0;
			while(u[k] && k!=k0){
				k++;
				if(k==m)
					k=0;
			}
			if(k==k0){
				out();
			}
		}

		d[i][k]+=t-t1;

		if(t-t1){
			k++;			
			if(k==m)
				k=0;
			while(u[k]){
				k++;
				if(k==m)
					k=0;
			}
		}

		i++;
		if(i==n)
		{
			i=0;
			p=!p;
		}
	}

	return 0;
}

