#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<algorithm>
using namespace std;

const int maxn=105;

char s[maxn][25];
int c[maxn];
int a[maxn][2],b[maxn][2];
int d[maxn][maxn];
int n,m,t;

void Read(){
	scanf("%d%d",&n,&t);
	for(int i=1;i<=n;i++) scanf("%d%d%d%d",&a[i][0],&b[i][0],&a[i][1],&b[i][1]);
	scanf("%d",&m);
	for(int i=1;i<=m;i++){
		scanf("%s",&s[i]);
		scanf("%d",&c[i]);
	}
}

int cor[maxn][maxn],tot[maxn];
int q[maxn];
int head,tail;

void Solve(){
	int x=0,y=1,state=0,timeleft;
	head=1; tail=m;
	for(int i=1;i<=m;i++) q[i]=i;
	while(head<=tail) {
		int now=q[head%maxn];
		head++;
		if(!state) { 
			x++; if(x%n==1 || n==1) { x=1; y^=1; }
			timeleft=t;
		}
		int p=max(1,c[now]-(a[x][y]+b[x][y^1])-d[x][now]);
		if(p<=timeleft) {
			tot[x]++; cor[x][tot[x]]=now;
			timeleft-=p;  state=1;
			if(timeleft==0) state=0;
		}
		else {
			d[x][now]+=timeleft; state=0;
			tail++; q[tail%maxn]=now;
		}
	}
	for(int i=1;i<=n;i++) {
		printf("%d",tot[i]);
		for(int j=1;j<=tot[i];j++) printf(" %s",s[cor[i][j]]);
		printf("\n");
	}
}

int main(){
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	Read();
	Solve();
	return 0;
}
