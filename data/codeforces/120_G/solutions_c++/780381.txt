#include<iostream>
#include<stdio.h>
using namespace std;

int main()
{
	int n,t,m,left;
	int a[101][2],b[101][2],c[101],d[101][101]={0},guess[101]={0},p[101]={0};
	string s[101],l[101][101];
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	cin>>n>>t;
	for(int i=0;i<n;i++)
		cin>>a[i][0]>>b[i][0]>>a[i][1]>>b[i][1];
	cin>>m;
	for (int i=0;i<m;i++)
	{
		cin>>s[i];
		cin>>c[i];
	}
	int cardIndex=0,teamIndex=0,playerIndex=0;
	left=m;
	while (left>0)
	{
		int duration=t;
		while (left>0&&duration>0)
		{
			int time=c[cardIndex]-a[teamIndex][playerIndex]-b[teamIndex][1-playerIndex]-d[teamIndex][cardIndex];
			time=time>1?time:1;
			if (duration>=time)
			{
				guess[cardIndex]=1;
				duration-=time;
				l[teamIndex][p[teamIndex]++]=s[cardIndex++];
				left--;
			}
			else
			{
				d[teamIndex][cardIndex++]+=duration;
				duration=0;
			}
			if (left==0) break;
			if (cardIndex>=m)cardIndex%=m;
			while (guess[cardIndex])
			{
				cardIndex++;
				if (cardIndex>=m) cardIndex=0;
			}
		}
		if (teamIndex<n-1) teamIndex++;
		else
		{
			teamIndex=0;
			playerIndex=1-playerIndex;
		}
	}
	for (int i=0;i<n;i++)
	{
		cout<<p[i]<<' ';
		for (int j=0;j<p[i];j++)
			cout<<l[i][j]<<' ';
		cout<<endl;
	}
	return 0;
}
