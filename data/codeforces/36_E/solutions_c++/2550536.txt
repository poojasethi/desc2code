#include<cstdio>
#include<map>
#define MAXN 10100

using namespace std;

int Seq[MAXN],bl[MAXN],o[MAXN],Cover[MAXN],
	x[2*MAXN],y[2*MAXN],f[MAXN],T(2),s[MAXN],
	n,Cnt,Cnt1,Cnt2,Last,L,m,_Map[MAXN];

map <int,int> Map;

void Dfs(int l,int _)
{
	for(int k=f[l];k;k=x[k])
	if(!Cover[k>>1])
	{
		Cover[k>>1]=1;
		Dfs(y[k],k>>1);
	}
	if(_)Seq[Last++]=_;//printf("--%d\n",_Map[l]);
}

void Bfs(int l,int _)
{
	int i,j,k;
	for(bl[s[i=0]=l]=_,j=1;i<j;i++)
		for(k=f[s[i]];k;k=x[k])
			if(!bl[y[k]])
				bl[s[j++]=y[k]]=_;
}

void IN(int a,int b)
{
	if(!Map.count(a))_Map[Map[a]=++n]=a;
	if(!Map.count(b))_Map[Map[b]=++n]=b;
	a=Map[a];
	b=Map[b];
	x[T]=f[a];y[T]=b;f[a]=T++;
	o[a]++;
}

int main()
{
	int i,j,k,A,B;
	freopen("input.txt","rb",stdin);
	freopen("output.txt","w",stdout);
	scanf("%d",&m);
	for(i=0;i<m;i++)
	{
		scanf("%d%d",&j,&k);
		IN(j,k);
		IN(k,j);
	}
	for(i=1;i<=n;i++)
		if(!bl[i])
			Bfs(i,++Cnt);
	if(Cnt>2){printf("-1\n");return 0;}
	if(Cnt==2)
	{
		for(i=1;i<=n;i++)
			if(o[i]&1)
			{
				if(bl[i]==1)Cnt1++;
					else Cnt2++;
			}
		if(Cnt1>2||Cnt2>2){printf("-1\n");return 0;}
		
		if(Cnt1==0)
		{
			for(i=1;i<=n;i++)if(bl[i]==1)break;
			Dfs(i,0);
		}
		else
		{
			for(i=1;i<=n;i++)if(bl[i]==1&&(o[i]&1))break;
			Dfs(i,0);
		}
		
		L=Last;
		
		if(Cnt2==0)
		{
			for(i=1;i<=n;i++)if(bl[i]==2)break;
			Dfs(i,0);
		}
		else
		{
			for(i=1;i<=n;i++)if(bl[i]==2&&(o[i]&1))break;
			Dfs(i,0);
		}
		
		printf("%d\n",L);
		for(i=0;i<L;i++)
			printf("%d\n",Seq[i]);
		printf("\n%d\n",Last-L);
		for(i=L;i<Last;i++)
			printf("%d\n",Seq[i]);
		return 0;
	}
	for(i=1;i<=n;i++)
		if(o[i]&1)
			Cnt1++;
	if(Cnt1>4){printf("-1\n");return 0;}
	if(Cnt1==4)
	{
		for(i=1;i<=n;i++)
			if(o[i]&1)
				break;
		A=i;
		for(i++;i<=n;i++)
			if(o[i]&1)
				break;
		B=i;
		IN(_Map[A],_Map[B]);
		IN(_Map[B],_Map[A]);
		
		for(i=1;i<=n;i++)
			if(o[i]&1)
				break;
		A=i;
		Dfs(A,0);
		for(i=0;i<Last;i++)if(Seq[i]==m+1)break;
		printf("%d\n",i);
		for(j=0;j<i;j++)
			printf("%d\n",Seq[j]);
		printf("\n%d\n",Last-i-1);
		for(j=i+1;j<Last;j++)
			printf("%d\n",Seq[j]);
		return 0;
	}
	for(i=1;i<=n;i++)
			if(o[i]&1)
				break;
	A=i>n?n:i;
	Dfs(A,0);
	if(Last==1){printf("-1\n");return 0;}
	printf("%d\n",1);
	printf("%d\n",Seq[0]);
	printf("\n%d\n",Last-1);
	for(j=1;j<Last;j++)
		printf("%d\n",Seq[j]);
	return 0;
}
