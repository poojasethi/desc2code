#include<cstdio>
#define dec(x) gs1[x]--,gs[dad[x]]--
using namespace std;
int n,i,x,y,gs[100010],gs1[200010],head[100010],ne[200010],dad[200010],v[200010][2],l,bb[200010],ln,vis[200010],ans[400010],ss[200010][2],dn,flag;
void dfs(int x)
{
    int t,pre=0,qq=dn;
    for(t=x;gs1[t];dec(t),(v[t][0]==pre?(pre=t,t=v[t][1]):(pre=t,t=v[t][0])),dec(t));
    for(t=x,pre=0;((t!=x)&&(vis[t]>1))||qq==dn;(v[t][0]==pre?(pre=t,ans[++dn]=ss[t][1],t=v[t][1]):(pre=t,ans[++dn]=ss[t][0],t=v[t][0])))
        if(gs[dad[t]])for(int i=head[dad[t]];i;i=ne[i])if(gs1[i])dfs(i);
    if(gs[dad[t]])for(int i=head[dad[t]];i;i=ne[i])if(gs1[i])dfs(i);
}
int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    scanf("%d",&n);
    for(i=1;i<=n;i++)
    {
        scanf("%d%d",&x,&y);gs[x]++;gs[y]++;
        if(gs[x]&1)dad[++l]=x,ne[l]=head[x],head[x]=l;
        if(gs[y]&1)dad[++l]=y,ne[l]=head[y],head[y]=l;
        ss[head[x]][gs1[head[x]]]=i;v[head[x]][gs1[head[x]]++]=head[y];
        ss[head[y]][gs1[head[y]]]=i;v[head[y]][gs1[head[y]]++]=head[x];
    }for(i=1;i<=l;vis[i]=gs1[i],i++)if(gs1[i]&1)bb[++ln]=i;
    if(ln>4||n==1){printf("-1\n");return 0;}if(ln==0)bb[ln=1]=1;
    if(ln==4)
    {
        int t,pre=0,qq;
        for(t=bb[1];gs1[t];dec(t),(v[t][0]==pre?(pre=t,t=v[t][1]):(pre=t,t=v[t][0])),dec(t));
        if(gs1[bb[2]])dfs(bb[2]);else dfs(bb[3]);flag=dn;qq=dn;
        for(t=bb[1],pre=0;((t!=bb[1])&&(vis[t]>1))||qq==dn;(v[t][0]==pre?(pre=t,ans[++dn]=ss[t][1],t=v[t][1]):(pre=t,ans[++dn]=ss[t][0],t=v[t][0])))
            if(gs[dad[t]])for(int i=head[dad[t]];i;i=ne[i])if(gs1[i])dfs(i);
        if(gs[dad[t]])for(int i=head[dad[t]];i;i=ne[i])if(gs1[i])dfs(i);
    }else
    {
        dfs(bb[1]);flag=dn;
        for(i=1;i<=l;i++)if(gs1[i]){dfs(i);break;}
    }for(i=1;i<=l;i++)if(gs1[i]){printf("-1\n");return 0;}if(flag==n)flag--;if(!flag)flag++;
    printf("%d\n",flag);for(i=1;i<=flag;i++)printf("%d ",ans[i]);puts("");
    printf("%d\n",n-flag);for(i=flag+1;i<=n;i++)printf("%d ",ans[i]);puts("");
}