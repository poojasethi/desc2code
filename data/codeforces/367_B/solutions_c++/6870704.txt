#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
typedef long long ll;
const ll mm=1000000009;
ll s[310001],p[310001],sb,pb,q[310001],b[310001];
int i,j,k,n,m,w,a[310001],ans[310001];
ll pw(ll b,ll p){
	ll res=1;
	for (;p;p>>=1,b=b*b%mm)
	 if (p&1) res=res*b%mm;
	return res;
}
void work(int x){
	int i;
	ll t1,t2;
	for (i=(x?x:w),q[0]=0;i<=n;i+=w) q[++q[0]]=a[i];
	for (i=p[0]=1,s[0]=0;i<=q[0];i++) s[i]=s[i-1]+q[i],p[i]=p[i-1]*q[i]%mm;
	for (i=1;i<=q[0]-m+1;i++){
		t1=s[i+m-1]-s[i-1];t2=p[i+m-1]*pw(p[i-1],mm-2)%mm;
		if (t1==sb&&t2==pb) ans[++ans[0]]=(i-1)*w+(x?x:w);
	}
}
int main(){
	scanf("%d%d%d",&n,&m,&w);
	for (i=1;i<=n;i++) scanf("%d",&a[i]);
	for (i=1,sb=0,pb=1;i<=m;i++) scanf("%d",&k),b[i]=k,sb+=b[i],pb=pb*b[i]%mm;
	for (ans[0]=i=0;i<w;i++) work(i);
	sort(ans+1,ans+1+ans[0]);
	printf("%d\n",ans[0]);
	for (i=1;i<=ans[0];i++) printf("%d ",ans[i]);
	puts("");
	return 0;
}