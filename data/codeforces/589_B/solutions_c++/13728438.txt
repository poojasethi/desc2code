# include <stdio.h>
# include <iostream>
# include <algorithm>
using namespace std;

struct BLOCK {
	int a,b;
}p[4010];
int n;

inline int cmp(BLOCK x,BLOCK y) {
	if(x.a==y.a) return x.b<y.b;
	else return x.a<y.a;
}

long long maxx=-1,maxi,maxj;
int c[4010];

int main() {
	scanf("%d",&n);
	for (int i=0;i<n;++i) {
		scanf("%d%d",&p[i].a,&p[i].b);
		if (p[i].a>p[i].b) swap(p[i].a,p[i].b);
	}
	sort(p,p+n,cmp);
	for (int i=0;i<n;++i) {
		for (int j=i;j<n;++j)
			c[j]=p[j].b;
		sort(c+i,c+n);
		for (int j=i;j<n;++j) {
			long long t=(long long)p[i].a*c[j]*(n-j);
			if(t>maxx) {
				maxx=t;
				maxi=p[i].a;
				maxj=c[j];
			}
		}
	}
	if(maxi<maxj) swap(maxi,maxj);
	cout<<maxx<<endl<<maxi<<' '<<maxj<<endl;	
	return 0;
}
