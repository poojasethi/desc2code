#include <iostream>
#include <algorithm>

using namespace std;

struct pct{long long x;long long y;}a[5000];

int cmp(pct x,pct y)
{
    return x.x<y.x;
}
int b[5000][5000];
int n;

long long mx;

int main()
{
    int i,j,x,y,aux,l1,l2;
    cin>>n;
    for(i=1;i<=n;i++)
    {
        cin>>x>>y;
        if(x<y){aux=x;x=y;y=aux;}
        a[i].x=x;a[i].y=y;
    }
    sort(a+1,a+n+1,cmp);
    for(i=n;i>=1;i--)
        for(j=n;j>=1;j--)
            b[i][j]=b[i][j+1]+(a[j].y>=a[i].y ? 1:0);
    for(i=1;i<=n;i++)
    {
        for(j=i;j<=n;j++)
        {
            if(a[j].y<=a[i].y)
            {
                if(a[i].x*a[j].y*b[j][i]>mx)
                    {mx=a[i].x*a[j].y*b[j][i];l1=a[i].x;l2=a[j].y;}
            }
        }
    }
    cout<<mx<<"\n"<<l1<<" "<<l2;
    return 0;
}
