#include <iostream>
#include <algorithm>
#include <set>
using namespace std;
#define ll long long

ll n,mx,x,y;
pair<ll,ll> s[4000];
multiset<ll> sside;
multiset<ll>::iterator iter;
int main()
{
    cin >> n;
    for(ll i = 0;i<n;i++)
    {
        cin >> s[i].first >> s[i].second;
        if(s[i].first > s[i].second)
            swap(s[i].first,s[i].second);
    }

    sort(s,s+n);
    for(ll i = n-1;i >= 0;i--)
    {
        sside.insert(s[i].second);
        iter = sside.begin();
        for(ll j = i;j<n;j++)
        {
            if((*iter)* 1LL * s[i].first * (n-j) > mx)
            {
                mx = (*iter) * 1LL * s[i].first * (n-j);
                x = s[i].first;
                y = *iter;
            }
            iter++;
        }
    }

    cout << mx << endl << x << " " << y;

    return 0;
}
