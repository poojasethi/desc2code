#include <bits/stdc++.h>

#define ll long long
#define fi freopen("", "r", stdin)
#define fo freopen("", "w", stdout)

using namespace std;

const int N = 4100;

int n, m;
pair<int, int> a[N];
int d[N];

int main()
{
  fi;fo;
  cin >> n;
  for(int i = 1; i <= n; i++){
    cin >> a[i].first >> a[i].second;
    if(a[i].first > a[i].second) swap(a[i].first, a[i].second);
  }
  sort(a + 1, a + n + 1);
  long long ans = 0;
  pair<int, int> w;
  for(int i = n; i >= 1; i--){
    m = 0;
    for(int j = i; j <= n; j++) d[++m] = a[j].second;
    sort(d + 1, d + m + 1);
    for(int j = m; j >= 1; j--)
      if(ans < 1ll * a[i].first * d[j] * (m - j + 1)){
        ans = 1ll * a[i].first * d[j] * (m - j + 1);
        w = make_pair(a[i].first, d[j]);
      }
  }
  cout << ans << endl;
  cout << w.first << " " << w.second;
  return 0;
}
