#include <bits/stdc++.h>

using namespace std;

int n;
const int MAXN = 4000;
pair<int, int> a[MAXN];
vector<int> b;
    

int main() {
    scanf("%d", &n);
    for (int i = 0; i < n; i++) {
        scanf("%d%d", &a[i].first, &a[i].second);
        if (a[i].second > a[i].first) {
           swap(a[i].first, a[i].second);
        }
		b.push_back(a[i].second);
    }
    sort(a, a+n);
	sort(b.begin(), b.end());
    long long ans = 0;
    int wa, ha;
    for (int i = 0; i < n; i++) {
        int w = a[i].first;
		int s = b.size();
		for (int j = 0; j < s; j++) {
			int h = b[j];
			long long cur = (long long)w * h * (s - j);
			if (cur > ans) {
			   ans = cur;
			   wa = w, ha = h;
			}	
		}
		b.erase(find(b.begin(), b.end(), a[i].second));
    }
    cout << ans<<'\n'<<wa<<' '<<ha;
}