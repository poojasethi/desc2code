#include<cstdio>
#include<cstring>
int p[3333][333],sum[333];
double f[3333],g[3333],q[3333];
void cmax(double &a,double b){
    if (b>a) a=b;
}
int main(){
//  freopen("183d.in","r",stdin);
//  freopen("183d.out","w",stdout);
    int n,m,i,j,k,u;
    scanf("%d%d",&n,&m);
    memset(sum,0,sizeof sum);
    for (i=0;i<n;i++)
        for (j=0;j<m;j++) sum[j]+=(scanf("%d",&p[i][j]),p[i][j]);
    memset(f,0,sizeof f);
    for (j=0;j<m;j++){
        memset(q,0,sizeof q);
        q[0]=1,u=sum[j]/1000+10;
        for (i=0;i<n;i++){
            for (k=u;k>=1;k--)
                q[k]=q[k]*(1000-p[i][j])/1000+q[k-1]*p[i][j]/1000;
            q[0]=q[0]*(1000-p[i][j])/1000;
        }
        double cnt0=0,cnt1=1;
        memset(g,0,sizeof g);
        for (k=0;k<=u;k++){
            cnt0+=k*q[k],cnt1-=q[k];
            for (i=0;i<=n-k;i++)
                cmax(g[i+k],f[i]+cnt0+cnt1*k);
        }
        memcpy(f,g,sizeof f);
    }
    printf("%.10lf\n",f[n]);
    return 0;
}
