#include"stdio.h"
#include"algorithm"
#include"iostream"
using namespace std;
int mp[222][222];
int a[2233]; int n,m,out[2233];
bool dfs(int x,int deep,int st)
{
    out[deep]=x;
    if(deep==m)
    {
	      return x==a[0]&&st;
	}
	int r=a[deep+1];
	if(st)
	{
	  r=1;    
	}
//	cout<<r<<' '<<deep<<' '<<st<<endl;
    for(int i=r;i<=n;i++)
    if(mp[x][i])
	{
	     mp[x][i]--;
	     mp[i][x]--;
	     if(dfs(i,deep+1,st|i>r))
	     {
		     return 1;
		 }
		 mp[x][i]++;
		 mp[i][x]++;
	}
	return 0;
}
int main()
{
   
    cin>>n>>m;
    for(int i=0;i<=m;i++)
    {
	    scanf("%d",&a[i]);
	}
	for(int i=0;i<m;i++)
	{
	    mp[a[i]][a[i+1]]++;
	    mp[a[i+1]][a[i]]++;
	}
	if(dfs(a[0],0,0))
	{
	    for(int i=0;i<=m;i++)
	    printf("%d ",out[i]);
	    puts("");
	}
	else puts("No solution");
}
							   	     		  	   		