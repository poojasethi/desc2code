#include <memory.h>
#include <assert.h>
#include <stdlib.h>
#include <iostream>

using namespace std;

#define rep(i,x) for(int i=0; i<x; ++i)

int n,m;
int g[128][128];
int ans[128],path[2048];

bool go(int v, int pos, bool over)
{
	ans[pos] = v;

	if (pos==m)
		return over;

	for(int i=(over ? 0 : path[pos+1]); i<n; ++i)
	{
		if (g[v][i])
		{
			g[v][i]=g[i][v]=0;
			if (go(i,pos+1,over || (i!=path[pos+1])))
				return true;
			g[v][i]=g[i][v]=1;
		}
	}
	return false;
}

int main()
{
	cin >> n >> m;
	
	memset(g,0,sizeof(g));

	int st; cin >> st; st--;
	path[0] = st;
	rep(i,m)
	{
		int t; cin >> t; t--;
		g[st][t] = g[t][st] = 1;
		st = t;
		path[i+1] = st;
	}
	
	if (go(path[0],0,false))
	{
		rep(i,m+1)
			cout << ans[i]+1 << " ";
		cout << endl;
	}
	else
		cout << "No solution" << endl;
	
	return 0;
}
