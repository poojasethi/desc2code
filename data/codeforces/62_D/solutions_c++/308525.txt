#include <vector>
#include <list>
#include <map>
#include <set>
#include <queue>
#include <algorithm>
#include <sstream>
#include <iostream>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <cstring>

using namespace std;

#define f(i, a, b) for(int i = a; i < b; i++)
#define rep(i, n)  f(i, 0, n)

int n, m;
int adj[100][100], size[100], viz[100][100];
int p[2001], r[2001];

int go(int v, int l, int gt) {

    if(l == m) 
        return gt;

    for(int i = 0; i < size[v]; i++) {
        int u = adj[v][i];
        if(!viz[v][u]) {

            viz[v][u] = viz[u][v] = 1;

            r[l + 1] = u;
            if(gt) {
                if(go(u, l + 1, 1)) return 1;
            }
            else {
                if(u == p[l + 1]) {
                    if(go(u, l + 1, 0)) return 1;
                }
                else if(u > p[l + 1])
                    if(go(u, l + 1, 1)) return 1;
            }

            viz[v][u] = viz[u][v] = 0;

        }
    }

    return 0;
}

int main(){

    cin >> n >> m;
    rep(i, m + 1) {
        cin >> p[i];
        p[i]--;
    }

    rep(i, m) {
        int a = p[i];
        int b = p[i + 1];
        adj[a][size[a]++] = b;
        adj[b][size[b]++] = a;
    }

    rep(i, n)
        sort(adj[i], adj[i] + size[i]);

    r[0] = p[0];
    if(go(p[0], 0, 0))
        rep(i, m + 1)
            cout << r[i] + 1 << ' ';
    else
        cout << "No solution";

    cout << endl;

}
