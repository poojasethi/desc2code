#include<iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>
using namespace std;
const int mm=110;
int g[mm][mm],chu[2100],ans[2100],n,m;
bool dfs(int u,int dep,bool yes)
{ ans[dep]=u;
  if(dep==m){return yes;}
  int beg=chu[dep+1];
  bool flag;
  if(yes)beg=1;
  for(int i=beg;i<=n;++i)
    if(g[u][i])
    {
      g[u][i]=g[i][u]=0;
      if(i^chu[dep+1])
      flag=dfs(i,dep+1,1);
      else flag=dfs(i,dep+1,yes);
      if(flag)return 1;
      g[u][i]=g[i][u]=1;
    }

  return 0;
}
int main()
{
  while(scanf("%d%d",&n,&m)!=EOF)
  { memset(g,0,sizeof(g));
    for(int i=0;i<=m;++i)
    {
      scanf("%d",&chu[i]);if(i)g[chu[i]][chu[i-1]]=g[chu[i-1]][chu[i]]=1;
    }
    if(dfs(chu[0],0,0))
    {
      for(int i=0;i<=m;++i)
        printf("%d ",ans[i]);
        puts("");
    }
    else printf("No solution\n");
  }
}

	 		 	  		 		   	 		 	 		