#include<cstdio>

int g[110][110];
int res[2010],p[2010];
int n,m;

bool dfs(int u,int dep,int flag)
{
    res[dep]=u;
    if (dep==m) return flag;
    for (int v=flag?1:p[dep+1];v<=n;v++)
    if (g[u][v])
    {
        g[u][v]--;g[v][u]--;
        if (dfs(v,dep+1,flag | (v!=p[dep+1]))) return 1;
        g[u][v]++;g[v][u]++;
    }
    return 0;
}

int main()
{
    scanf("%d%d",&n,&m);
    scanf("%d",&p[0]);
    for (int i=1;i<=m;i++)
    {
        scanf("%d",&p[i]);
        g[p[i-1]][p[i]]++;g[p[i]][p[i-1]]++;
    }
    
    if (dfs(p[0],0,0))
        for (int i=0;i<=m;i++) printf("%d%c",res[i],i==m?'\n':' ');
    else printf("No solution\n");
}
