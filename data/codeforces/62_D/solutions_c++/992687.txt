#include<cstdio>  
#include<cstring>  
#include<cstdlib>  
#include<iostream>  
#include<algorithm>  
#include<map>
using namespace std;
#define fo(i,a,b) for(i=a;i<=b;++i)
#define fd(i,a,b) for(i=a;i>=b;--i)
const int mn=110;
int n,m,i,p[mn*20],ans[mn*20],g[mn][mn];
bool dfs(int u,int dep,int flag)
{
    ans[dep]=u; 
    if(dep==m) return flag; 
    for(int v=flag?1:p[dep+1];v<=n;v++) 
        if(g[u][v])
        {
            --g[u][v],--g[v][u];
            if (dfs(v,dep+1,flag | (v!=p[dep+1]))) return 1;
            ++g[u][v],++g[v][u];
        }
    return 0;
}
int main()
{
    scanf("%d%d%d",&n,&m,&p[0]);
    fo(i,1,m)
    {
        scanf("%d",&p[i]);
        ++g[p[i-1]][p[i]],++g[p[i]][p[i-1]];
    }
    if(dfs(p[0],0,0))
    {
        fo(i,0,m-1)printf("%d ",ans[i]);
        printf("%d\n",ans[m]);
    }
    else printf("No solution\n");
    return 0;
}
