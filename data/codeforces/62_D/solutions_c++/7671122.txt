#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 110
#define M 2010
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,num,s;
int a[M],b[N][N],f[N],re[M],c[N][N];
void dfs(int x) {
	int i;
	For(i,1,n) if (b[x][i]&&c[x][i]!=num) {
		c[x][i]=c[i][x]=num;
		dfs(i);
	}
	re[++s]=x;
}
void Dfs(int x,int dep) {
	int i;
	printf("%d ",x);
	For(i,1,n) if (b[x][i]) {
		c[x][i]=c[i][x]=++num;
		s=dep;
		dfs(i);
		if (s==m+1) {
			b[x][i]=b[i][x]=0;
			Dfs(i,dep+1);
			return;
		}
	}
}
int main() {
	//freopen("62d.in","r",stdin);
	scanf("%d%d",&n,&m);
	For(i,1,m+1) scanf("%d",&a[i]);
	for (i=m;i;i--) {
		int A=a[i];
		b[A][a[i+1]]++;
		b[a[i+1]][A]++;
		For(j,a[i+1]+1,n) if (b[A][j]) {
			s=i; c[A][j]=c[j][A]=++num;
			dfs(j);
			if (s==m+1) {
				For(k,1,i) printf("%d ",a[k]);
				b[A][j]--;
				b[j][A]--;
				Dfs(j,i+1);
				printf("\n");
				//for(;;);
				return 0;
			}
		}
	}
	printf("No solution\n");
	return 0;
}
