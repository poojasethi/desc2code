#include<cstdio>
#include<cstring>
#include<cmath>
#include<algorithm>
#include<iostream>
#define inf 200000000ll
#define MAXN 105
#define MAXM 2050
using namespace std;
int n,m,seq[MAXM],out[MAXN];
bool g[MAXN][MAXN];
bool dfs(int u,int pos,int s)
{
    out[pos]=u;
    if(pos==m)
        return s;
    else{
        int tmp=s?1:seq[pos+1];
        for(int i=tmp;i<=n;i++){
            if(g[u][i]){
                g[u][i]=g[i][u]=false;
                if(dfs(i,pos+1,s|(i>tmp)))
                    return true;
                g[u][i]=g[i][u]=true;
            }
        }
        return false;
    }
}

void solve()
{
    if(dfs(seq[1],1,0)){
        for(int i=1;i<=m;i++)
            printf("%d%c",out[i],i<m?' ':'\n');
    }
    else
        puts("No solution");
}
int main()
{
    //freopen("d.in","r",stdin);
    while(scanf("%d%d",&n,&m)==2){
        m++;
        for(int i=1;i<=m;i++)
            scanf("%d",seq+i);
        memset(g,false,sizeof(g));
        for(int i=1;i<m;i++)
            g[seq[i]][seq[i+1]]=g[seq[i+1]][seq[i]]=true;
        solve();
    }
    //while(1);
    return 0;
}
