#include <cstdio>

using namespace std;

int n,m,a[2005],b[2005],f[101][101];

bool dfs(int x,int z,bool flag)
{
  b[z]=x;
  if(z==m)
    return flag;
  if(flag)
  {
    for(int y=1;y<=n;++y)
    {
      if(f[x][y]>0)
      {
        --f[x][y];
        --f[y][x];
        if(dfs(y,z+1,flag))
          return true;
        ++f[x][y];
        ++f[y][x];
      }
    }
  }
  else
  {
    if(f[x][a[z+1]]>0)
    {
      --f[x][a[z+1]];
      --f[a[z+1]][x];
      if(dfs(a[z+1],z+1,flag))
        return true;
      ++f[x][a[z+1]];
      ++f[a[z+1]][x];
    }
    for(int y=a[z+1]+1;y<=n;++y)
    {
      if(f[x][y]>0)
      {
        --f[x][y];
        --f[y][x];
        if(dfs(y,z+1,true))
          return true;
        ++f[x][y];
        ++f[y][x];
      }
    }
  }
  return false;
}

int main(void)
{
  scanf("%d %d",&n,&m);
  scanf("%d",&a[0]);
  for(int i=1;i<=m;++i)
  {
    scanf("%d",&a[i]);
    ++f[a[i-1]][a[i]];
    ++f[a[i]][a[i-1]];
  }
  if(dfs(a[0],0,false))
  {
    for(int i=0;i<m;++i)
      printf("%d ",b[i]);
    printf("%d\n",b[m]);
  }
  else
    printf("No solution\n");
  return 0;
}