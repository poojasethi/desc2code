#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>

using namespace std;

const int MAXN = 110 ;
const int MAXM = 2010 ;
int n,m;
int a[MAXN][MAXN],list[MAXM];
int ans[MAXM];
bool findpath(int pos,int u){
    ans[pos]=u ;
    if (pos==m) return true;
    for (int i=1;i<=n;i++){
        if (a[u][i]){
            a[u][i]=a[i][u]=0;
            if (findpath(pos+1,i)) return true;
            a[u][i]=a[i][u]=1;
        }
    }
    return false;
}
int main(){
    scanf("%d%d",&n,&m);
    for (int i=0;i<=m;i++)
        scanf("%d",&list[i]);
    for (int st=m-1;st>=0;st--){
        for (int i=st+1;i<=m;i++)
            a[list[i-1]][list[i]] = a[list[i]][list[i-1]] = 1 ;
        int nxt = list[st+1] , u = list[st];
        for (int i=nxt+1;i<=n;i++)
            if (a[u][i]){
                a[u][i]=a[i][u]=0;
                if (findpath(st+1,i)){
                    for (int t=0;t<=st;t++)
                        printf("%d ",list[t]);
                    for (int t=st+1;t<=m;t++)
                        printf("%d ",ans[t]);
                    exit(0);
                }
                a[u][i]=a[i][u]=1;
            }
    }
    printf("No solution\n");
    return 0;
}
