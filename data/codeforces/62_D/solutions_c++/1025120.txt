#include <iostream>
using namespace std;
#define REP(i,a,b) for(i=a;i<b;i++)

int n,m;
int a[2100],p[2100],g[110][110];

bool dfs(int dep,int x,int same){
        int i;
        if (dep==m){
                if (x!=a[0]||same) return 0;
                REP(i,0,m+1) cout<<p[i]<<' ';cout<<endl;
                return 1;
        }
        if (same) i=a[dep+1];else i=1;
        REP(i,i,n+1)if (g[x][i]){
                p[dep+1]=i;
                g[x][i]--;g[i][x]--;
                if (dfs(dep+1,i,same&&(i==a[dep+1]))) return 1;
                g[x][i]++;g[i][x]++;
        }
}

int main(){
        cin>>n>>m;
        int i;
        REP(i,0,m+1) cin>>a[i];
        REP(i,0,m) g[a[i]][a[i+1]]++,g[a[i+1]][a[i]]++;
        p[0]=a[0];
        if (!dfs(0,a[0],1)) cout<<"No solution"<<endl;
}
