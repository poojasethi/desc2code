#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<algorithm>
using namespace std;
bool vis[105];
bool map[105][105];
int a[2005],b[2005];
int m,n;
bool dfs(int k,int x,bool flag)
{
	if(k==m+1)
	{
	    if(x==a[0]&&flag)return true;
		return false;	
	}
	
	int st;
	if(flag)st=1;
	else st=a[k];
	for(;st<=n;st++)
	if(map[x][st])
	{
		 map[x][st]=map[st][x]=false;  
		 b[k]=st;
		 if(dfs(k+1,st,flag||st>a[k]))return true;
		 map[x][st]=map[st][x]=true;	 	
	}
	return false;
}
int main()
{

	

    scanf("%d%d",&n,&m);
    for(int i=0;i<=m;i++)
    {
		 scanf("%d",&a[i]);
	     if(i!=0)map[a[i]][a[i-1]]=map[a[i-1]][a[i]]=true;   	 
	}
	b[0]=a[0];
	if(dfs(1,a[0],false)==false)puts("No solution");
	else 
	for(int i=0;i<=m;i++)printf("%d ",b[i]);
	
	
	return 0;
}

 				 			 	 	   	  			 	 	