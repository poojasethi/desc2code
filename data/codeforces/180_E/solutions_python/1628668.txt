action_num= int(raw_input().split()[2])

cube_map = {}
cube_last_index_map = {}
cube_list = raw_input().split()

offset, result = 0, 1
for cube in cube_list:
	if cube_map.has_key(cube):
#		adjust result and last offset
		cube_offset_list = cube_map[cube]
		cube_offset_list.append(offset)
		last_list_index = cube_last_index_map[cube]
		last_offset = cube_offset_list[last_list_index]
		part_len = offset - last_offset + 1
#		print "Current Offset: ", offset
#		print "Index: ",last_list_index," ",len(cube_offset_list)
		while len(cube_offset_list)- last_list_index + action_num < part_len:
			last_list_index += 1
			last_offset = cube_offset_list[last_list_index]
			part_len = offset - last_offset + 1
		else:
			cube_last_index_map[cube] = last_list_index
#		print "Index: ",last_list_index," ",len(cube_offset_list)
		if len(cube_offset_list)- last_list_index > result:
			result = len(cube_offset_list)- last_list_index
#		print result
	else:
		cube_map[cube] = [offset]
		cube_last_index_map[cube] = 0
	offset += 1

print result
	

