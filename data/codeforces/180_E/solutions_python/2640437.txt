R=lambda:map(int,raw_input().split())
n,m,k=R()
p,t={},0
for i,x in enumerate(R()):
  p[x]=p.get(x,[-10**8])
  p[x].append(i)
for v in p.itervalues():
  i,s=0,0
  for j in range(1,len(v)):
    s+=v[j]-v[j-1]-1
    while i<j and s>k:
      s-=v[i+1]-v[i]-1
      i+=1
    t=max(t,j-i+1)
print t
