action_num= int(raw_input().split()[2])

cube_map = {}
cube_last_index_map = {}
cube_list = raw_input().split()

offset, result = 0, 1
for cube in cube_list:
	if cube_map.has_key(cube):
#		adjust result and last offset
		cube_offset_list = cube_map[cube]
		cube_offset_list.append(offset)
		last_list_index = cube_last_index_map[cube]
		last_offset = cube_offset_list[last_list_index]
		list_length = len(cube_offset_list)
		while list_length - last_list_index + action_num < (offset - last_offset + 1):
			last_list_index += 1
			last_offset = cube_offset_list[last_list_index]
		else:
			cube_last_index_map[cube] = last_list_index
		if list_length - last_list_index > result:
			result = list_length - last_list_index
	else:
		cube_map[cube] = [offset]
		cube_last_index_map[cube] = 0
	offset += 1

print result
	

