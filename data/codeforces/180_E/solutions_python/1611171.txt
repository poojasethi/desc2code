n,m,k=[int(x) for x in raw_input().split()]
a=[int(x) for x in raw_input().split()]

#n,m,k=10,2,2
#a=[1,2,1,2,1,1,2,1,1,2]

cnt=[0]*(m+1)
left=[0]*(m+1)
nxt=[0]*(n+1)
last=[-1]*(m+1)


ans=1
for i in range(n):
    if last[a[i]]>=0:
        nxt[last[a[i]]]=i
    else:
        left[a[i]]=i
    last[a[i]]=i
    cnt[a[i]]+=1

    while i-left[a[i]]+1-cnt[a[i]]>k:
        left[a[i]]=nxt[left[a[i]]]
        cnt[a[i]]-=1
    ans=max(ans,cnt[a[i]])
print ans
