d={}
n,m,k=map(int,raw_input().split())
a=map(int,raw_input().split())
for i,j in enumerate(a):
	if j not in d:
		d[j]=[]
	d[j].append(i)
mx=0
for l in d.itervalues():
	h=0
	n=len(l)
	for j in range(n):
		while h<n and l[h]-l[j]-(h-j)<=k:
			h+=1
		mx=max(mx,h-j)
print mx
