#include <iostream>
#include <vector>
#include <cmath>

using namespace std;

int maximo=0;

int n,m,k;

void calcula(vector<int> &v)
{
  int ii=0;
  for (int i=0;i<int(v.size());i++) {
    while (ii<i and (v[i]-v[ii]+1)-(i-ii+1)>k) ii++;
    maximo=max(maximo,i-ii+1);
  }
}

int main()
{
  cin>>n>>m>>k;
  vector<vector<int> > v(m+1);
  for (int i=0;i<n;i++) {
    int x;
    cin>>x;
    v[x].push_back(i);
  }
  for (int i=1;i<=m;i++)
    calcula(v[i]);
  cout<<maximo<<endl;
}
