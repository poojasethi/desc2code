#include<cstdio>
#include<vector>
#include<algorithm>
using namespace std;
int i,n,m,k,j,t,u,a;
vector<int> L[102400];
int main(){
	scanf("%d%d%d",&n,&m,&k);
	for(i=0;i<n;L[t].push_back(i++))
		scanf("%d",&t);
	for(i=1;i<=m;++i){
		vector<int> &l=L[i];
		for(j=t=u=0;t<l.size();){
			for(;t+1<l.size()&& u+l[t+1]-l[t]-1<=k;++t)
				u+=l[t+1]-l[t]-1;
			a=max(t-j+1,a);
			if(t+1==l.size())break;
			u+=l[t+1]-l[t]-1;
			for(++t;j<t&&u>k;++j)
				u-=l[j+1]-l[j]-1;
		}
	}
	printf("%d\n",a);
}
