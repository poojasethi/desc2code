#include <iostream>
#include <vector>

#define rep(i,n) for(int i=0;i<n;i++)

using namespace std;

int n,m,j,i,l,k,t,res;
vector<int> c[100010];

int main(){

  cin>>n>>m>>k;

  rep(i,n){
    cin>>t;
    c[--t].push_back(i);
  }

  rep(i,m){
    int p=0;
    rep(j,c[i].size()){
      while(c[i][j]-c[i][p]>j-p+k)p++;
      res=max(res,j-p+1);
    }
  }

  cout<<res<<endl;
}
