#include <stdio.h>
#include <vector>
#include <algorithm>
using namespace std;
#define REP(i,n) for(int(i)=0;(i)<(int)(n);(i)++)
vector <int> a[100005];
int main()
{
	int n,m,k,tmp;
	scanf("%d%d%d",&n,&m,&k);
	REP(i,n) {scanf("%d",&tmp); a[tmp].push_back(i);}
	int ans=0;
	for (int i=1; i<=m; i++) {
		int j=0;
		REP(p,a[i].size()) {
			while ((a[i][p]-a[i][j]+1)-(p-j+1)>k)
				j++;
			ans=max(ans,p-j+1);
		}
	}
	printf("%d\n",ans);
}
