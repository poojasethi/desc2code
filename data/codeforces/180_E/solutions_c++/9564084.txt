#include <bits/stdc++.h>
using namespace std;
vector<int> color[100010];
int main()
{
	#ifndef ONLINE_JUDGE
    freopen("in.txt", "r", stdin);
	#endif
	std::ios_base::sync_with_stdio(false);
	int i,j,k,l,m,n,o,ans=0;
	cin>>i>>j>>k;
	int A[i];
	for(l=0;l<i;l++)
	{
		cin>>m;
		color[m].push_back(l);
	}	
	for(l=1;l<=j;l++)
	{
		for(m=0,n=0;m<color[l].size();m++)
		{
			while(n<color[l].size()&&color[l][n]-color[l][m]-(n-m)<=k)
				n++;
		//	cout<<l<<" "<<n<<" "<<m<<endl;
			ans=max(ans,n-m);
		}
	}
	cout<<ans<<endl;
	return 0;
}