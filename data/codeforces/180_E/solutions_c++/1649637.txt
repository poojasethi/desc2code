#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
#include <vector>
using namespace std;
vector<int> l[100005];
int s[100005], pos[100005];
int main() {
	int n, m, k;
	scanf("%d%d%d", &n, &m, &k);
	int ans = 1;
	for (int i = 0; i < n; i++) {
		int t;
		scanf("%d", &t);
		l[t].push_back(i);
		s[t]++;
		if (l[t].size() != 1) {
			while (i - l[t][pos[t]] + 1 - (s[t] - pos[t]) > k) {
				pos[t]++;
			}
			ans = max(ans, s[t] - pos[t]);
		}
	}
	printf("%d\n", ans);
	return 0;
}
