#include<iostream>
#include<algorithm>
#include<vector>
using namespace std;
#define N 200005

int a[N];
int n,m,k;

vector<int>v[N];

int main()
{

    cin>>n>>m>>k;

    for(int i=0;i<n;i++)
    {
        cin>>a[i];
        v[a[i]].push_back(i);
    }

    int best=0;

    for(int i=1;i<=m;i++)
    {
        int l=0;
        int len=v[i].size();

        for(int j=0;j<len;j++)
        {
            while(l<=j&&v[i][j]-v[i][l]+1-(j-l+1)>k) l++;
            best=max(best,j-l+1);
        }

    }
    cout<<best<<endl;
}
