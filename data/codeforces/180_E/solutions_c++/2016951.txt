#include<iostream>
#include<vector>
#include<algorithm>
#define M 100100
#define O push_back
using namespace std;vector<int>P[M];int x,i,j,J,n,m,k,S;main(){cin>>n>>m>>k;for(i=1;i<=n;i++){cin>>x;P[x].O(i);}for(i=1;i<=m;i++){j=0;for(J=0;J<P[i].size();J++){while(j<P[i].size()&&P[i][j]-P[i][J]<=k+(j-J))j++;S=max(S,j-J);}}cout<<S;}