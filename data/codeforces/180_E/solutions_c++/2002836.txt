#include<iostream>
using namespace std;
int m, n, maxk;
int a[200001];
int last[200001], next[200001];
int p[200001], cnt[200001];
int main()
{
  cin>>n>>m>>maxk;
  for (int i = 1; i <= n; i++) {
    cin>>a[i];
    next[last[a[i]]] = i;
    last[a[i]] = i;
  }

  for (int i = 1; i <= m; i++) last[i] = 0;

  int ans = 0;
  for (int i = 1; i <= n; i++) {
    int c = a[i];
    if (!last[c]) last[c] = i;
    p[i] = ++cnt[c];
    while (i-last[c]-(p[i]-p[last[c]]) > maxk) last[c] = next[last[c]];
    ans = max(ans, p[i] - p[last[c]] + 1);
  }
  cout<<ans<<endl;
    
  return 0;
}
