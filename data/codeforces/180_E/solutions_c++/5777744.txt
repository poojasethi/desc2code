#include <cstdio>
#include <iostream>
#include <cstring>
#include <vector>
#include <algorithm>
using namespace std;
const int N = 100000 + 5 ;
vector <int> v[N];

int main() {
	int n, m, k, x,ans = 0;
	scanf("%d%d%d", &n, &m, &k);
	for(int i = 1; i <= n; i ++ ) {
		scanf("%d", &x);
		v[x].push_back(i);
	}
	
	for(int i = 1; i <= m; i ++) {
		int s = 0, e = 0;
		while( e < v[i].size() ) {
			int num = (v[i][e] - v[i][s]) - ( e - s);
			if( num <= k) {
				ans = max(ans, e-s+1);
				e ++;
			}
			else s ++;
		}
	}
	printf("%d\n", ans);
	return 0;
}

		 	  	   	   		 		 	   		