#include <cstdio>
#include <iostream>
#include <vector>
#define maxn 200009
using namespace std;
int n,m;
int f[maxn],a[maxn];
int main()
{
	int i=0,j=0,max=0,left,ans=0;
	cin>>n>>m>>left;
	for (int i=0;i<n;i++) scanf("%d",a+i);
	a[n]=0;
	while (i<n || j<n)
	{
		max=f[a[i]];
		while ((left>=1 || a[i]==a[j])&& j<n)
		{
			if (a[i]==a[j]) max++; else left--;
			f[a[j++]]++;
			if (j==n) break;
		}
		if (max>ans) ans=max;
		do
		{
			f[a[i]]--;
			left=left-f[a[i]]+f[a[i+1]];
			i++;
			if (i==n) break;
		}while (left<=0);
	}
	cout<<ans<<endl;
	return 0;
}
