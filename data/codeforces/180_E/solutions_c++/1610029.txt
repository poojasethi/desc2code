#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
const int mn=200001;
int n,m,k,i,s;
int a[mn],b[mn],c[mn],d[mn],e[mn],f[mn];
using namespace std;
int main()
{
	scanf("%d%d%d",&n,&m,&k);
	for(i=1;i<=n;++i)scanf("%d",&a[i]);
	s=1;
	for(i=1;i<=n;++i)
	{
		d[i]=b[a[i]];
		if(b[a[i]]!=0)
		{
			++b[a[i]];f[c[a[i]]]=i;
			while((i-e[a[i]]+1)-(b[a[i]]-d[e[a[i]]])>k)e[a[i]]=f[e[a[i]]];
			if(b[a[i]]-d[e[a[i]]]>s)s=b[a[i]]-d[e[a[i]]];
			
		}else ++b[a[i]],e[a[i]]=i;
		c[a[i]]=i;
	}
	printf("%d\n",s);
	return 0;
}
