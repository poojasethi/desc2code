#include <iostream>
#include <vector>
using namespace std;
const int nmax = 2e5 + 5;
vector<int> sub[nmax];
int solve(vector<int> &t, int k){
	int l = 0, ans = 0;
	for(int r = 0; r < t.size(); ++r){
		while(t[r]-t[l]+1-(r-l+1)>k)
			l++;
		ans=max(ans,r-l+1);
	}
	return ans;
}
int main(){
	ios_base::sync_with_stdio(false);
	int n,m,k;
	cin >> n >> m >> k;
	for(int i = 0; i < n; ++i){
		int a;
		cin >> a;
		sub[a].push_back(i);
	}
	int ans = 0;
	for(int i = 1; i <= m; ++i)
		ans=max(ans,solve(sub[i],k));
	cout << ans << '\n';
}
