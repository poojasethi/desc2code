#include<bits/stdc++.h>

using namespace std;

#define sgmn int v, int tl, int tr
#define tm  (tl + tr >> 1)
#define sol v*2, tl, tm
#define sag v*2+1, tm+1, tr
#define N 200005

int C[N],A[N],n,k,i,j,mx;

int main(){

	scanf("%d%d%d",&n,&i,&k);

	for(i=1;i<=n;i++)
		scanf("%d",&A[i]);

	for(i=j=1;i<=n;i++){

		while(j - i + 1 - C[ A[i] ] - (A[j] == A[i]) <= k && j <= n)  C[ A[j++] ]++;

		if(j - i - C[ A[i] ]-- <= k)
			mx = max(mx , C[ A[i] ] + 1);

	}

	printf("%d",mx);

	return 0;
}
