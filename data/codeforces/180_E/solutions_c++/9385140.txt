#include<bits/stdc++.h>

using namespace std;

#define pb push_back

int n,m,k,i,t,l,mx=0,x,j;

vector<int> V[100005];

int main(){

	scanf("%d %d %d",&n,&m,&k);

	for(i=1 ; i<=n ; i++){
		
		scanf("%d",&x);

		V[x].pb(i);

	}

	t=k;

	for(i=1 ; i<=m ; i++){
		
		l=0;

		for(j=0 ; j<V[i].size() ; j++){

			while(l<V[i].size() and (V[i][l] - V[i][j] + 1) - (l-j+1) <= k)
				l++;

			mx=max(mx,l-j);

		}

	}

	printf("%d",mx);
	
	return 0;
}
