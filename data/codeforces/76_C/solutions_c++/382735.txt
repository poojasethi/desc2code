#include <stdio.h>
#include <string.h>
#define maxn 200010
typedef long long LL;
LL tot[1<<22];
int a[30][30],b[30];
char s[maxn];
int q[30],qn;
int n,m,t;
int ans;
int main(){
	int i,j,k;
	scanf("%d %d %d",&n,&m,&t);
	scanf("%s",s);
	for (i=0;i<m;i++) scanf("%d",b+i);
	for (i=0;i<m;i++)
		for (j=0;j<m;j++) scanf("%d",&a[i][j]);
	qn=0;
	for (i=0;i<n;i++){
		int v=s[i]-'A';
		int mst=0;
		for (j=0;j<qn;j++){
			k=q[j];
			tot[mst]+=a[k][v];
			tot[mst|(1<<k)]-=a[k][v];
			tot[mst|(1<<v)]-=a[k][v];
			tot[mst|(1<<k)|(1<<v)]+=a[k][v];
			if (k==v) break;
			mst|=1<<k;
		}
		if (j==qn) qn++;
		for (k=j;k>0;k--) q[k]=q[k-1];
		q[0]=v;
	}
	for (i=0;i<m;i++)
		for (j=0;j<1<<m;j++)
			if ((j&(1<<i))==0) tot[j|(1<<i)]+=tot[j];
	int st=0;
	for (i=0;i<n;i++) st|=1<<(s[i]-'A');
	for (i=0;i<m;i++)
		if ((st&(1<<i))>0)
			for (j=0;j<1<<m;j++)
				if ((j&(1<<i))>0) tot[j]+=b[i];
	ans=0;
	for (i=0;i<1<<m;i++){
		k=(1<<m)-1-i;
		if ((st&k)==k && k>0 && tot[i]<=t) ans++;
	}
//	for (i=0;i<1<<m;i++) printf("%d  %d\n",i,tot[i]);
	printf("%d\n",ans);
	return 0;
}
