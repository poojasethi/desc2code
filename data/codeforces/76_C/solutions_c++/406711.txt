#include <cstdio>
#include <cstring>

using namespace std;

const int MAXN = 200002;
const int MAXK = 23;
const int MAXM = 1 << MAXK;

char s[MAXN];
int next[MAXN][MAXK];
int curr[MAXK];
int a[MAXK][MAXK];
long long f[MAXM];
int n, m, k, t, c;

int main()
{
    #ifndef ONLINE_JUDGE
        freopen("in", "rt", stdin);
        freopen("out", "wt", stdout);
    #endif
    scanf("%d %d %d\n", &n, &k, &t);
    for (int i = 1; i <= n; i++)
    {
        scanf("%c", &s[i]);
        s[i] -= 'A';
        c |= 1 << s[i];
    }
    for (int i = 0; i < k; i++)
        scanf("%d", &f[1 << i]);
          
    for (int i = 0; i < k; i++)
        for (int j = 0; j < k; j++)
            scanf("%d", &a[i][j]);

    for (int i = 1; i <= n; i++)
    {
        memmove(next[i], curr, sizeof(curr));
        curr[s[i]] = i;
    }
    
    for (int i = 1; i <= n; i++)
    {
        int m = 0;
        int p = i;
        int x;

        do
        {
            x = MAXK - 1;

            for (int j = 0; j < k; j++)
                if ((m & (1 << j)) == 0 && next[p][x] < next[p][j])
                    x = j;

            if (x == MAXK - 1) break;

            f[m] += a[x][s[i]];
            f[m | (1 << x)] -= a[x][s[i]];
            f[m | (1 << s[i])] -= a[x][s[i]];
            f[m | (1 << x) | (1 << s[i])] += a[x][s[i]];

            m |= 1 << x;
            p = next[p][x];
        } while (true);
    }

    for (int i = 0; i < k; i++)
        for (int j = 0; j < (1 << k); j++)
            if ((1 << i) & j)
                f[j] += f[j ^ (1 << i)];

    int ans = 0;
    for (int i = 0; i < (1 << k) - 1; i++)
        ans += f[i] <= t && (i & c) == i && i != c;

    printf("%d\n", ans);
    return 0;
}
