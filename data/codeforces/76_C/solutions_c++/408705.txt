#include<iostream>
#include<vector>
#include<cstdio>
#define Max 200005
#define cMax 23
using namespace std;

char str[Max];
int cost[cMax];
int map[cMax][cMax];
bool vis[cMax];
long long int dp[(1 << cMax)];

vector<int> q;

void insert(char a, char b, int p)
{
	int ta, tb;
	long long int c;

	a -= 'A';
	b -= 'A';

	ta = (1 << a);
	tb = (1 << b);

	c = map[a][b];

	dp[p] += c;
	dp[p | ta] -= c;
	dp[p | tb] -= c;
	dp[p | ta | tb] += c;
}

int main()
{
	int n, m, lim, t, b, i, j, tn, ans;
	long long int ts;
	char tc;

	scanf("%d %d %d", &n, &m, &lim);
	scanf("%s", str);

	for(i=0;i<m;i++)
		scanf("%d", &cost[i]);

	for(i=0;i<m;i++)
		for(j=0;j<m;j++)
			scanf("%d", &map[i][j]);

	for(i=n-1;i>=0;i--)
	{
		vis[ str[i] - 'A' ] = 1;

		t = 0;
		for(j=q.size()-1;j>=0;j--)
		{
			b = q[j];
			tc = str[b];
			
			insert(str[i], tc, t);

			if(str[i] == tc)
			{
				q.erase(q.begin()+j);
				break;
			}


			t |= 1 << (tc - 'A');
		}

		q.push_back(i);
	}

	tn = 1<<m;
	for(j=0;j<m;j++)
	{
		for(i=0;i<tn;i++)
		{
			b = 1<<j;
			if(i & b)
				dp[i] += dp[i ^ b];
		}
	}


	ans = 0;
	tn = 1<<m;
	for(i=0;i<tn;i++)
	{
		
		t = i;
		ts = 0;
		for(j=0;j<m;j++)
		{
			b = 1<<j;
			if(i & b)
			{
				ts += cost[j];
			}
		}

		for(j=0;j<m;j++) //legal
		{
			b = 1<<j;
			if((i & b) && !vis[j])
				break;
		}

		if(j!=m)
			continue;

		for(j=0;j<m;j++) //empty
		{
			b = 1<<j;
			if(!(i & b) && vis[j])
				break;
		}

		if(j==m)
			continue;

		//cout<<i<<" "<<ts<<" "<<ts + dp[i]<<"\n";

		if(ts + dp[i] <= lim)
		{
			//cout<<"AC: "<<i<<"\n";
			ans++;
		}
	}
	printf("%d\n", ans);
}
