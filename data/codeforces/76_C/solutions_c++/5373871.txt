#include <cstdio>
#include <algorithm>
#include <vector>
#include <iostream>
#include <string>
#include <string.h>
#include <cmath>
#include <iomanip>
#include <set>
#include <map>
#include <queue>
#include <bitset>

#define X first
#define Y second
#define ll long long
#define pb push_back
#define mp make_pair

using namespace std;

char s[200100];
int ans, n, k, a[30][30], t[30], mxt, was[30];
pair<int, int>w[30];
int dp[(1<<22)], pr[200100][22], inf=-(1<<20);
int main ()
{
    scanf("%d%d%d", &n, &k, &mxt);
    scanf("%s", s);
    for (int i=0; i<k; i++)
        scanf("%d", &t[i]), pr[0][i]=inf;
    for (int i=0; i<k; i++)
        for (int j=0; j<k; j++)
            scanf("%d", &a[i][j]);
    for (int i=0; i<n; i++)
        was[s[i]-'A']=1; 
    for (int i=1; i<n; i++)
    {
        for (int j=0; j<k; j++)
            pr[i][j]=pr[i-1][j];
        pr[i][ s[i-1]-'A' ]=i-1;
        for (int j=0; j<k; j++)
            w[j]=mp(pr[i][j], j);
        sort(w, w+k);
        int msk=0;
        for (int j=k-1; j>=0 && w[j].X!=inf; j--)
        {
           
            int fr=w[j].Y, sec=s[i]-'A';
            dp[msk]+=a[fr][sec]; 
            dp[msk|(1<<fr)]-=a[fr][sec];
            dp[msk|(1<<sec)]-=a[fr][sec];
            dp[msk|(1<<fr)|(1<<sec)]+=a[fr][sec];   
            msk|=(1<<fr);
        }
    }

    for (int i=0; i<k; i++)
        for (int j=0; j<(1<<k); j++)
            if ( (j&(1<<i))==(1<<i) )
               dp[j]+=dp[j-(1<<i)];    
   
    for (int i=0; i<(1<<k); i++)
    {
        int rr=dp[i], c=0;
        for (int j=0; j<k; j++)
        {
            if ( (i&(1<<j))==(1<<j)  )
            {
               rr+=t[j];
               if ( was[j]==0 )
                  c=inf;
            }
            else
               c+=was[j]; 
        }
        ans+=(rr<=mxt && c>0);
    }
    cout<<ans<<endl;
    return 0;
}
