#include<bits/stdc++.h>
using namespace std;
long long int k,n,t;
long long int costof[30];
long long int f[5000000];
long long int nex[30][200100];
long long int adj[30][30];
typedef pair<long long int,long long int> ii;
ii a[30];
long long int cost(long long int x)
{
    long long int ans=0;
    for(long long int i=0;i<k;i++) if(x&(1<<i)) ans+=costof[i];
    return ans;
}
void get(long long int l,long long int r)
{
    if(l==r) {return;}
    get(l,(l+r)/2);
    get((l+r)/2+1,r);
    for(long long int i=l;i<=(l+r)/2;i++){
        f[i+((l+r)/2-l)+1]+=f[i];
    }
}
bool check(long long int x)
{
    for(long long int i=0;i<k;i++) if(!nex[i][0] && (x&(1<<i))>0) return false;
    for(long long int i=0;i<k;i++) if(nex[i][0] && (x&(1<<i))==0) return true;
    return false;
}
long long int s[200020];
int main()
{
    string tmp;
    //freopen("test.inp","r",stdin);
    scanf("%lld %lld %lld",&n,&k,&t);
    cin>>tmp;
    for(long long int i=0;i<tmp.size();i++) s[i+1]=tmp[i]-'A';
    for(long long int i=0;i<k;i++) scanf("%lld",&costof[i]);
    for(long long int i=0;i<k;i++)
    for(long long int j=0;j<k;j++){
        scanf("%lld",&adj[i][j]);
    }
    for(long long int i=n;i>=1;i--) {
        for(long long int j=0;j<k;j++) nex[j][i-1]=nex[j][i];
        nex[s[i]][i-1]=i;
        for(long long int j=0;j<k;j++) a[j]=ii(nex[j][i],j);
        sort(a+0,a+k);
        long long int mask=0,last=0;
        for(long long int j=0;j<k;j++){
            if(a[j].first==0) continue;
            f[mask]+=adj[s[i]][a[j].second]-last;
            f[mask|(1<<s[i])]-=adj[s[i]][a[j].second]-last;
            f[mask|(1<<a[j].second)]-=adj[s[i]][a[j].second]-last;
            f[mask|(1<<s[i])|(1<<a[j].second)]+=adj[s[i]][a[j].second]-last;
            if(a[j].second==s[i]) break;
            mask|=1<<a[j].second;
        }
    }
    long long int ans=0;
    get(0,(1<<k)-1);
    for(long long int i=(1<<k)-1;i>=0;i--) if(check(i) && f[i]+cost(i)<=t) ans++;
    cout<<ans;
}
