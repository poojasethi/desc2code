#include <iostream>

using namespace std;

#define FOR(i,l,r) for(int i=l;i<r;i++)

int N,K,T,a[22][22],t[22];
char s[200010],q[22],l;
int c[1<<22];

int main()
{
	ios::sync_with_stdio(false);
	cin >> N >> K >> T >> s;
	FOR(i,0,K) cin >> t[i];
	FOR(i,0,K) FOR(j,0,K) cin >> a[i][j];
	FOR(i,0,N){
		int j,p=s[i]-'A',f=0;
		for(j=0;j<l;j++){
			int o=q[j];
			c[f]+=a[o][p];c[f|(1<<o)]-=a[o][p];
			c[f|(1<<p)]-=a[o][p];c[f|(1<<o)|(1<<p)]+=a[o][p];
			if(o==p) break;
			f|=(1<<o);
		}
		if(j==l) l++;
		for(;j;j--) q[j]=q[j-1];
		q[0]=p;
	}
	int w=0,ans=0;
	FOR(i,0,N) w|=(1<<s[i]-'A');
	FOR(j,0,K) FOR(i,0,1<<K) if(i&(1<<j)) c[i]+=c[i^(1<<j)];
	FOR(i,0,1<<K) FOR(j,0,K) if((w&i)&(1<<j)) c[i]+=t[j];
	FOR(i,0,(1<<K)-1) if(i!=w && (i&w)==i && c[i]<=T) ans++;
	cout << ans << endl;
	return 0;
}
