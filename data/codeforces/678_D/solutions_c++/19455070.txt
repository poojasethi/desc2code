#include <iostream>
using namespace std;
__int64 mo = 1000000007;
__int64 ca(__int64 a, __int64 n)
{
    if (n == 1) return a;
    if (n == 2) return a * a % mo;
    if (n % 2 == 0) return ca(ca(a, n / 2)% mo, 2) % mo;
    return ca(ca(a,n/2) % mo, 2) % mo * a % mo ;
}
int main()
{
    __int64 a,b,n,x,sum = 0,t = 0, hh;
    cin>>a>>b>>n>>x;
    t = ca(a,n);
    hh = a - 1;
    if (a == 1)
      sum = (x + n % mo * b % mo) % mo;
    else sum = (t * x % mo + (t - 1) * ca (hh, mo-2) % mo * b % mo) % mo;
    cout<<sum<<endl;
    return 0;
}

 	  			   			  		  		  								