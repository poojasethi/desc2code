#include<bits/stdc++.h>
#define MOD 1000000007
#define ll long long
using namespace std;
ll modexpo(ll a,ll p)
{
    if(p==0)
        return 1;
    if(p%2==0)
    {
        ll x=modexpo(a,p/2);
        return (x*x)%MOD;
    }
    return (a*(modexpo(a,p-1)))%MOD;
}
int main()
{
    ll a,b,n,x;
    cin>>a>>b>>n>>x;
    ll ans1=(modexpo(a,n)*x)%MOD;
    ll ans2;
    if(a==1)
        ans2=((n%MOD)*(b%MOD)%MOD);
    else{
        ans2=b*(modexpo(a,n)-1)%MOD;
        ans2=ans2*(modexpo(a-1,MOD-2))%MOD;
    }
    ll ans=(ans1+ans2)%MOD;
    cout<<ans;
    return 0;
}
