#include <bits/stdc++.h>
using namespace std;
const int mod = int(1e9)+7;

long long calPow(long long m, long long p){
    long long res=1;
    while (p>0){
        if (p%2) res = (res*m)%mod;
        m = (m*m)%mod;
        p>>=1;
    }
    return res%mod;
}

long long A,B,n,x, ans=0;
int main(){
    cin>>A>>B>>n>>x;
    if (A==1){
        cout<<((n%mod)*B+x)%mod<<endl;
        return 0;
    }
    long long C = (calPow(A-1,mod-2)*B)%mod;
    ans = ((calPow(A,n%(mod-1))*(x+C))%mod - C + mod)%mod;
    cout<<ans<<endl;
    return 0;
}
