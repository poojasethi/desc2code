#include<bits/stdc++.h>
#define ll long long int
#define M 1000000007
using namespace std;
ll pmod(ll a,ll b,ll n){
    ll res=1;
	while (b)
	{
 		if (b % 2==1)
		{
			res = (res * a) % n;
		}

	    	a = (a * a) % n;
		    b /= 2;
	}
	return res;
}
int main(){
    ll n,a,b,x,res=0;
    cin>>a>>b>>n>>x;
    if(a>1)res=(((((pmod(a,n,M)-1)%M)*((pmod(a-1,M-2,M))))%M)*b)%M;
    else res=(((n)%M)*b)%M;
    res+=(pmod(a,n,M)*x);
    res%=M;
    if(res<0)res+=M;
    cout<<res<<endl;
}
