#include<bits/stdc++.h>
#define MOD 1000000007
using namespace std;
long long kkk(long long x,long long n)
{
    long long t=1;
    while(n)
    {
        if(n&1)
            t=t*x%MOD;
        n/=2;
        x=x*x%MOD;
    }
    return t;
}
int main()
{
    long long a,b,n,x,sum=0;
    cin>>a>>b>>n>>x;
    if(a==1)
        cout<<(x+n%MOD*b%MOD)%MOD<<endl;
    else
    {
        long long t=kkk(a,n);
        sum=(x*t%MOD+(t-1)*kkk(a-1,MOD-2)%MOD*b%MOD)%MOD;
        cout<<sum<<endl;
    }
    return 0;
}