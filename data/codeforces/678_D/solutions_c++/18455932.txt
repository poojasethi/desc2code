#include<bits/stdc++.h>
using namespace std;
#define LL long long 
#define MOD 1000000007
LL pow2(LL b, LL e)
{
	if(e==0)
	return 1;
	LL t=pow2(b,e/2);
	if(e%2==0)
	return (t*t)%MOD;
	else
	return (b*((t*t)%MOD))%MOD;
}

int main()
{
	LL A,B,n,x;
	cin>>A>>B>>n>>x;
	if(A==1)
	cout<<(x+((n%MOD)*B)%MOD)%MOD<<endl;
	else
	{
		LL p1=(pow2(A,n)*x)%MOD;
		LL den=(A-1);
		LL num=(pow2(A,n)+MOD-1)%MOD;
		LL temp=(num*pow2(den,MOD-2))%MOD;
		LL p2=(B*temp)%MOD;
		cout<<(p1+p2)%MOD<<endl;
		
	}
	
	return 0;
}
