#include <bits/stdc++.h>
using namespace std;

#define mp(x, y) make_pair((x), (y))

typedef long long ll;

const ll mod=1000000007;

ll expo(ll b, ll e)
{
	ll ret=1;
	while(e) {
		if(e&1) ret=(ret*b)%mod;
		b=(b*b)%mod;
		e>>=1;
	}
	return ret;
}

ll inv(ll x)
{
	return expo(x, mod-2);
}

ll A, B, n, x;
ll ans;

int main()
{
	scanf("%I64d%I64d%I64d%I64d", &A, &B, &n, &x);
	if(A==1) {
		ans=(x+(n%mod)*B)%mod;
	} else {
		ll tmp1=(expo(A, n)*x)%mod;
		ll tmp2=(expo(A, n)+mod-1)%mod;
		ll tmp3=(tmp2*inv(A-1))%mod;
		ans=(tmp1+B*tmp3)%mod;
	}
	printf("%I64d\n", ans);

	return 0;
}
