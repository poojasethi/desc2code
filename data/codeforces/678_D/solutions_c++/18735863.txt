#include<bits/stdc++.h>
using namespace std;
#define MOD 1000000007
typedef long long ll;

ll mypow(ll base, ll n) {
    if(n == 0) return 1;
    ll a = mypow(base,n/2);
    a = (a*a)%MOD;
    if(n&1) a = (a*base)%MOD;
    return a;
}

int main() {
    //freopen("input.txt","r",stdin);
    ll a,b,n,x;
    cin>>a>>b>>n>>x;
    if(n == 1) {
        cout<<(a*x+b)%MOD<<endl;
        return 0;
    }
    ll res;
    if(a != 1)
        res = (mypow(a,n)*x%MOD + (b*(((mypow(a,n)-1)*mypow(a-1,MOD-2))%MOD))%MOD)%MOD;
    else res = (x + b*(n%MOD)%MOD)%MOD;
    cout<<res<<endl;
}
