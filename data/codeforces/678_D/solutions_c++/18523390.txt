#include<cstdio>
using namespace std;
long long a,b,x,n,P=1e9+7,now,ans;
long long sqr(long long x){return x*x%P;}
long long poww(long long a,long long n)
{
	if (n==0) return 1;
	if (n%2==0) return sqr(poww(a,n/2));
	return sqr(poww(a,n/2))*a%P;
} 
int main()
{
	scanf("%I64d%I64d%I64d%I64d",&a,&b,&n,&x);
	if (a==1)
	{
		n%=P;b=b*n%P;
		printf("%I64d\n",(x+b)%P);
	}
	else 
	{
		now=poww(a,n);
		ans=now*x%P;
		if (now==1) {printf("%I64d\n",ans);return 0;}
		now=(now+P-1)%P*b%P;
		now=now*poww(a-1,P-2)%P;
		ans=(ans+now)%P;
		printf("%I64d\n",ans);
	} 
	return 0;
}
