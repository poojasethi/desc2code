//@nottocode
#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007

long long int power( long long int a , long long int b)
{
	if(b==0)
		return 1;
	long long int x=power(a,b/2);
	if(b%2==0)
		return ((x%mod)*(x%mod))%mod;
	else
		return ((((x%mod)*(x%mod))%mod)*(a%mod))%mod;
}

int main(void)
{
	long long int a,b,n,x,ans=0;
	cin >> a >> b >> n >> x;

	if(a!=1)
		ans=((power(a,n)%mod)*(x%mod))%mod+((((b%mod)*(power(a,n)-1)%mod)%mod)*(power(a-1,mod-2))%mod)%mod;
	else
		ans=x%mod+((b%mod)*(n%mod))%mod;
	cout << ans % mod << endl;
	
	return 0;
}