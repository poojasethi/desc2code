#include<bits/stdc++.h>
using namespace std;
typedef long long int LL;
#define multiply(a,b) (((a)%mod)*((b)%mod))%mod

LL mod=1e9+7;
LL pow(LL a,LL b){
    if(b==0) return 1;
    LL ans=pow(a,b/2)%mod;
    ans=multiply(ans,ans);
    if(b%2==1) ans=multiply(ans,a);
    return ans;
}

int main(){
    LL A,B,n,x;
    cin>>A>>B>>n>>x;

    LL ans=multiply(pow(A,n),x);
    if(A==1) ans+=multiply(B,n);
    else ans+=multiply(B,multiply(pow(A,n)-1,pow(A-1,mod-2)));
    cout<<ans%mod;
}
