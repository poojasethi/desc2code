#include<bits/stdc++.h>
#define mod 1000000007
long long power(long long a,long long b)
{
	if(b==0)
		return 1;
	long long temp=power(a,b/2);
	temp=(temp*temp)%mod;
	if(b%2!=0)
		temp=(temp*a)%mod;
	return temp;
}
int main()
{
	long long n,a,b,x;
	scanf("%lld%lld%lld%lld",&a,&b,&n,&x);
	long long v1=power(a,n);
	long long inv=power(a-1,mod-2);
	long long product;
	if(a==1)
		product=n%mod;
	else{
		product=(v1-1+mod)%mod;
		product=(product*inv)%mod;
	}
	product=(product*b)%mod;
	long long ans=(v1*x)%mod;
	ans=(ans+product)%mod;
	printf("%lld\n",ans );
	return 0;
}