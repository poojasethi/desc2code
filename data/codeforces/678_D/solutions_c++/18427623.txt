#include <bits/stdc++.h>
using namespace std;

long long A,B,N,X;
const long long MOD = 1e9 + 7;

long long pow_mod(long long x,long long n,long long a,long long b){
	if(n == 0){
		return x;
	}
	else if(n & 1){
		return pow_mod((a * x + b) % MOD,n - 1,a,b);
	}
	else{
		return pow_mod(x,n >> 1,(a * a) % MOD,(a * b + b) % MOD);
	}
}

int main()
{
	cin.tie(0);
	ios::sync_with_stdio(false);

	cin >> A >> B >> N >> X;
	
	cout << pow_mod(X,N,A,B) << endl;

	return 0;
}