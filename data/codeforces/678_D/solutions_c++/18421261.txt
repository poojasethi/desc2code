#include<bits/stdc++.h>
using namespace std;
typedef long long LL;
const LL p=1e9+7;
LL A,B,x,n;
LL pw(LL x,LL k){
	LL ans=1;
	for(;k;k>>=1){
		if(k&1)ans=ans*x%p;
		x=x*x%p;
	}return ans;
}
LL inv(LL x){return pw(x,p-2);}
int main(){
	cin>>A>>B>>n>>x;
	if(A==1){
		cout<<(x+(n%p)*B%p)%p<<endl;
	}else{
		LL lam=B*inv(A-1)%p;
		LL ans=(pw(A,n%(p-1))*(x+lam)%p-lam%p+p)%p;
		cout<<ans<<endl;
	}
	return 0;
}