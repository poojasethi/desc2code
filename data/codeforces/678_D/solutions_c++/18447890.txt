#include<bits/stdc++.h>
long long int mod=1000000007;
using namespace std;
long long int po(long long int a,long long int b)
{
	long long int ans=1;
	while(b)
	{
		if(b&1)
		ans=(ans*a)%mod;
		a=(a*a)%mod;
		b=b>>1;
	}
	return ans;
}
int main()
{
	long long int a,b,x,n;
	scanf("%lld%lld%lld%lld",&a,&b,&n,&x);
	a=a%mod;
	b=b%mod;
	x=x%mod;
	long long int ans=(b*(n%mod))%mod,apo=po(a,n%(mod-1));
	if(a!=1){
	ans=(b*(apo-1+mod))%mod;
	ans=(ans*po(a-1,mod-2))%mod;}
	ans=(ans+(apo*x)%mod)%mod;
	printf("%lld\n",ans);
	return 0;
}
