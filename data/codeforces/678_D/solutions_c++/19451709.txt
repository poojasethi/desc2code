#include<bits/stdc++.h>
const int MOD = 1e9 + 7;
using namespace std;
typedef long long ll;
ll Pow_Mod(ll a , ll n)
{
	if(n == 0)
	return 1;
	ll ans;
	ans = Pow_Mod(a, n / 2);
	ans = ans * ans % MOD;
	if(n&1)
	ans = ans * a % MOD;
	return ans;
}

long long NI(long long num, long long mod) {
	return Pow_Mod(num, mod-2) ;
}

int main(void)
{
	ll A, B, n, x;
	cin >>A >> B >>n >>x;
	ll temp = Pow_Mod(A,n);
	if(A==1)
	cout<<(x + n % MOD * B) % MOD;
	else
	cout<<(temp * x % MOD +  (temp - 1) * NI(A - 1,MOD) % MOD*B %MOD) %MOD;
} 
    		     	    	   	   	 	 			