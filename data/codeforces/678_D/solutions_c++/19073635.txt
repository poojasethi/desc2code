#include <iostream>
#define MOD 1000000007
typedef long long int lli;

using namespace std;
//testing only from #18702979
int main (int argc, char const* argv[])
{
	lli i,n,x,A,B,ans=0;
	cin>>A>>B>>n>>x;
	while (n)
	{
		if(n%2==1)
			x=(A*x+B)%MOD;
		B=(A*B +B)%MOD;
		A=(A*A)%MOD;
		n/=2;
	}
		
	cout<<x<<"\n";
	return 0;
}