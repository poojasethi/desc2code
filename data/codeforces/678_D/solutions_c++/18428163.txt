#include<bits/stdc++.h>
#define m 1000000007
using namespace std;
long long power(long long x,long long y)
{
	if(y==0)
		return 1;
	long long temp=power(x,y/2);
	if(y%2==0)
		return ((temp%m)*temp)%m;
	else
		return (((x*temp)%m)*temp)%m;
}
int main()
{
	long long a,b,n,x;
	cin>>a>>b>>n>>x;
	long long p,q,r,s;
	if(a!=1)
	{
	p=(power(a,n)%m-1%m)%m;
	q=(a%m-1%m);
	r=((p%m)*power(q,m-2)%m)%m;
	r=(r%m*b%m)%m;
	p=(power(a,n)%m*x%m)%m;
	s=(r%m+p%m)%m;
	cout<<s%m;
}
else
{
	cout<<(((n%m*b%m)%m)%m+x%m)%m;
}
}
