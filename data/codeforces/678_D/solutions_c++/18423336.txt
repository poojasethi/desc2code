#include<stdio.h>
#include<iostream>
#include<stdlib.h>
#include<string.h>
using namespace std;
#define ll long long
const ll M=1000000007;
ll suan(ll x,ll y)
{
	ll t=1;while(y){if(y&1)t=t*x%M;x=x*x%M;y>>=1;}return t;
}
ll yun(ll x,ll y)
{
	if(y==0)return 1;
	if(y==1)return x;
	ll k=yun(x,y/2);
	if(y%2==0)return k*(suan(x,y/2)+1)%M;
	return (k*(suan(x,y/2)+1)%M+suan(x,y))%M;
}
int main(void)
{
	ll a,b,n,x,s;
	cin>>a>>b>>n>>x;
	a%=M;b%=M;
	s=suan(a,n)*x%M;
	if(n==0)cout<<x;
	else if(n==1)cout<<(s+b)%M;
	else cout<<(s+(yun(a,n-1)+1)*b%M)%M;
	return 0;
}
