#include <iostream>
using namespace std;
long long a,b,n,x,m=1e9+7;
int main()
{
	cin>>a>>b>>n>>x;
	for(;n;n/=2)
	{
		if(n&1) x=(a*x+b)%m;
		b=b*(a+1)%m;
		a=a*a%m;
	}
	cout<<x;
}
