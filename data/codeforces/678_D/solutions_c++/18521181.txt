#include<cstdio>
#include<algorithm>
#define mod 1000000007
using namespace std;
typedef long long LL;
LL qpow(LL a,LL b){
    LL ans = 1;
    while(b){
        if(b&1LL)
            ans = ans*a%mod;
        a = a*a%mod;
        b >>= 1;
    }
    return ans%mod;
}
int main(){
    LL a,b,n,x;
    scanf("%I64d%I64d%I64d%I64d",&a,&b,&n,&x);
    if(a == 1){
        printf("%I64d",(x%mod+n%mod*b)%mod);
        return 0;
    }
    LL temp = qpow(a,n);
    if(a != 1)
        printf("%I64d",(x*temp%mod+(temp-(LL)1)*b%mod*qpow(a-(LL)1,mod-2))%mod);
    return 0;
}
