// arunmittal53
#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define ll long long int
ll po(ll a,ll b)
{
	if(b==0)
		return 1;
	ll num=1;
	num = po(a,b>>1);
	num *= num;
	if(num >= mod)
		num %= mod;
	if(b&1)
		num *= a;
	if(num >= mod)
		num %= mod;
	return num;
}
int main()
{
	ios_base::sync_with_stdio(false);
	ll n,a,b,x,d,ans=0;
	cin>>a>>b>>n>>x;
	if(a==1)
	{
		cout<< (x + ((n%mod)*b)%mod )%mod<<"\n";
	}
	else
	{
		d = po(a,n);
		ans = (d*x)%mod + (((b*(d-1+mod))%mod)*po(a-1,mod-2))%mod ;
		ans%=mod;
		cout<<ans<<"\n"; 
	}
}


