//2016-06-13 12:00:17.428000
#include <stdio.h>
#include <algorithm>
#include <string.h>
#include <memory.h>

#define MOD 1000000007

using namespace std;
typedef long long lld;

lld pow(lld a, lld k){
	if(!k) return 1;
	lld ans=pow(a,k/2);
	ans*=ans;
	ans%=MOD;
	if(k%2){
		ans*=a;
		ans%=MOD;
	}
	return ans;
}

int main (){
	
	lld a,b,n,x,ans;
	scanf("%I64d %I64d %I64d %I64d", &a,&b,&n,&x);
	
	if(a==1) ans=(x+n%MOD*b)%MOD;
	else ans=(x*pow(a,n)%MOD + b*(pow(a,n)-1)%MOD*pow(a-1, MOD-2)%MOD)%MOD;
	
	printf("%I64d\n",ans);
	return 0;
}