#define MOD 1000000007
#include<iostream>
using namespace std;
long long int modu(long long int x,long long int y){
	if(y==0)
	return 1;
	else if(y%2==1)
	return (x*modu((x*x)%MOD,y/2))%MOD;
	else
	return modu((x*x)%MOD,y/2);
}
int main()
{
	long long int a,b,c,d,e,n,x;
	cin>>a>>b>>n>>x;
	c=(modu(a,n))%MOD;
	if(a==1)
		d=n%MOD;
		else
	d=((c-1)*modu(a-1,MOD-2))%MOD;
	e=(d*b)%MOD;
	cout<<((c*x)%MOD+e)%MOD<<endl;
	
}
