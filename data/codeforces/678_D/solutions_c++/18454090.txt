#include <bits/stdc++.h>
#define ll long long
#define ri(a,b,c,d) scanf("%I64d %I64d %I64d %I64d",&a,&b,&c,&d)
#define FOR(i,l,r) for(int i=l; i<r; i++)
using namespace std;

ll A, B, N, X, pot, MOD=1e9+7;
ll sq(ll n) {return n*n;}
ll expMod(ll b, ll e) {return e?(sq(expMod(b,e>>1)%MOD)%MOD*(e&1?b:1))%MOD:1;}

int main() {
	ri(A,B,N,X);
	A%=MOD; B%=MOD; X%=MOD;
	if(A==1) {
		printf("%I64d\n", (X + (B*(N%MOD))%MOD)%MOD);
	} else {
		pot=expMod(A,N);
		printf("%I64d\n", ((B * ((pot-1)*expMod(A-1,MOD-2)%MOD))%MOD + (pot*X)%MOD)%MOD);		
	}
}