#include<bits/stdc++.h>
#define MOD 1000000007
using namespace std;
long long kkk(long long x,long long n)
{
    long long t=1;
    while(n)
    {
        if(n&1)
            t=t*x%MOD;
        n/=2;
        x=x*x%MOD;
    }
    return t;
}
int main()
{
    long long a,b,n,x,sum=0;
    scanf("%lld%lld%lld%lld",&a,&b,&n,&x);
    if(a==1)
        printf("%lld\n",(x+n%MOD*b%MOD)%MOD);
    else
    {
        long long t=kkk(a,n);
        sum=(x*t%MOD+(t-1)*kkk(a-1,MOD-2)%MOD*b%MOD)%MOD;
        printf("%lld\n",sum);
    }
    return 0;
}
	 	 		 	  		 		  	  	   		  	