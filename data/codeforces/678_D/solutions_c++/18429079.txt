#include <iostream>
using namespace std;

long long con=1000000007;

int main(){
	long long a,b,n,x,ra=1,rb=0;
	cin>>a>>b>>n>>x;
	while(n>0){
		if(n%2==0){
			b=a*b+b;
			a=a*a;
			b%=con; a%=con;
			n/=2;
		}
		else{
			n--;
			ra*=a;
			rb=a*rb+b;
			ra%=con; rb%=con;
		}
	}
	cout<<(ra*x+rb)%con<<endl;
	return 0;
}