#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <algorithm>
#define MOD 1000000007
using namespace std;
typedef long long LL;
LL ksm(LL a,LL p){
	LL ret=1;
	while(p){
		if(p%2==1) ret=(ret*a)%MOD;
		p=p/2;
		a=(a*a)%MOD;
	}
	return ret;
}
int main(){
	long long a,b,n,x,ans,t;
	cin>>a>>b>>n>>x;
	if(a==1){
		ans=(n%MOD*b%MOD+x%MOD)%MOD;
	}else {
		t=ksm(a,n);
		ans=((t*x%MOD)+((t-1)*ksm(a-1,MOD-2)%MOD*b%MOD))%MOD;
	}
	cout<<ans<<endl;
	return 0;
}
