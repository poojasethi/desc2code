#include<bits/stdc++.h>
#define N 200010
#define LL long long
#define P 1000000007
using namespace std;
LL ksm(LL x,LL y,LL z){
	x%=z;LL ans=1;
	while(y){
		if(y&1LL)ans=ans*x%z;
		y>>=1LL;x=x*x%z;
	}
	return ans;
}
LL a,b,n,x;
LL calc(LL v){
	LL ret=0;
	if(v==0)return 1LL;
	if(!(v&1LL)){
		ret=ksm(a,v,P);
		v--;
	}
	LL k=calc(v>>1LL);
	return (ret+(1LL+ksm(a,(v>>1)+1,P))*k%P)%P;
}
int main(){
	//freopen("xxx.in","r",stdin);
	cin>>a>>b>>n>>x;
	LL ans=ksm(a,n,P)*x%P;
	ans+=calc(n-1)*b%P;
	ans%=P;
	cout<<ans<<endl;
}