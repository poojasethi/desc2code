#include<iostream>
using namespace std;
const long long MOD = 1e9+7;
typedef long long ll;
ll pow(ll a, ll x) {
	ll res = 1, tot = a;
	while(x) {
		if(x&1) (res *= tot)%=MOD;
		(tot *= tot)%=MOD;
		x /= 2;
	}
	return res;
}
ll inv(int a) {
	return pow(a, MOD-2);
}
int main() {
	ll A, B, n, x, Amn, Amnp1;
	cin >> A>> B>> n>> x;
	if(A==1) {
		cout << (x+((n%MOD)*B)%MOD)%MOD <<endl;
		return 0;
	}
	Amn = pow(A,n);
	Amnp1 = Amn-1<0?Amn-1+MOD:Amn-1;
	cout << (Amn*x%MOD+B*Amnp1%MOD*inv(A-1)%MOD)%MOD << endl;
	return 0;
}
