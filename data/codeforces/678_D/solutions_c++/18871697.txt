//special code
#include <bits/stdc++.h>
typedef long long ll;
const int mod=1e9+7;
using namespace std;

ll POW(ll bs,ll ex)
{
    ll res=1;
    while(ex)
    {
        if(ex%2) res=(res*bs)%mod;
        bs=(bs*bs)%mod;
        ex/=2LL;
    }
    return res%mod;
}

ll GS(ll r,ll n)
{
    if(r==1) return n%mod;
    return (POW(r,n)-1)*POW(r-1,mod-2)%mod;
}
int main()
{
    ll a,b,n,x;
    cin>>a>>b>>n>>x;
    cout<<(POW(a,n)*x+b*GS(a,n))%mod;
}
