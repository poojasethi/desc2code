#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define mod 1000000007
ll power(ll a, ll b) {
	ll x = 1, y = a;
	while(b > 0) {
		if(b%2 == 1) {
			x=(x*y);
			if(x>mod) x%=mod;
		}
		y = (y*y);
		if(y>mod) y%=mod;
		b /= 2;
	}
	return x%mod;
}
int main() {
	ll a,b,n,x;
	cin>>a>>b>>n>>x;
	if(a==1)
	{
		cout<<(x%mod+(n%mod*b%mod)%mod)%mod;
		return 0;
	}
	ll p=power(a,n);
	ll i=power(a-1,mod-2);
	ll ans=((p%mod)*(x%mod))%mod;
	ll ans1=(((p-1+mod)%mod)*(i%mod))%mod;
	ans1=(ans1*(b%mod))%mod;
	cout<<((ans+ans1)%mod);
	return 0;
}