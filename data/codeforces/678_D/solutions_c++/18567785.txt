#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
ll p=1e9+7;
ll po(ll x,ll e){
    ll ret=1;
    while(e){
        if(e&1)ret=(ret*x)%p;
        x=(x*x)%p;
        e>>=1;
    }
    return ret;
}
int main(){
    ll n,a,b,x;
    ll ans=0;
    cin>>a>>b>>n>>x;
    ans=(po(a,n)*x)%p;
    ll sum=((po(a,n)-1+p)%p)*(po(a-1,p-2))%p;
    if(a==1)sum=n%p;
    ans+=(b*sum)%p;
    cout<<ans%p<<endl;

}
