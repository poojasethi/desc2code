#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define mod 1000000007
ll power(ll x, ll y, ll m)
{
    if (y == 0)
        return 1;
    ll p = power(x, y/2, m) % m;
    p = (p * p) % m;
 
    return (y%2 == 0)? p : (x * p) % m;
}
int main() {
	ll a,b,n,x;
	cin>>a>>b>>n>>x;
	if(a==1)
	{
		cout<<(x+(n%mod*b%mod)%mod)%mod;
		return 0;
	}
	ll p=power(a,n,mod);
	ll i=power(a-1,mod-2,mod);
	ll ans=((p%mod)*(x%mod))%mod;
	ll ans1=(((p-1+mod)%mod)*(i%mod))%mod;
	ans1=(ans1*(b%mod))%mod;
	cout<<((ans+ans1)%mod);
	return 0;
}