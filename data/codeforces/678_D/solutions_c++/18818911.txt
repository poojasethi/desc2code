#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007
long long int a,b,n,x;
int main(){
	scanf("%lld %lld %lld %lld",&a,&b,&n,&x);
	while(n){
		if(n%2==1){
			x=((a*x)%mod+b)%mod;
		}
		n/=2;
		long long int nexta=(a*a)%mod;
		long long int nextb=((a*b)%mod+b)%mod;
		a=nexta;
		b=nextb;
	}
	printf("%lld\n",x);
	return 0;
}
