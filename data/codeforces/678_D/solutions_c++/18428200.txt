#include<bits/stdc++.h>
using namespace std;
typedef long long int lld;
lld mod = 1000000007;
lld power(lld a, lld n)
{
	lld ans = 1;
	while(n!=0)
	{
		if(n%2)
			ans = (ans*a)%mod;
		a = (a*a)%mod;
		n/=2;
	}
	return ans;
}
int main()
{
	lld A, B, x, n;
	cin >> A >> B >> n >> x ;
	lld ans = 0, ans2 = 0;
	ans = power(A, n);
	ans = (ans * x)%mod;
	if(A != 1)
		ans2 = (((power(A,n) - 1 + mod)%mod)*power(A-1, mod -2))%mod;
	else
		ans2 = n%mod;
	ans2 = (ans2 * B)%mod;
	ans = (ans2 + ans)%mod;
	printf("%lld\n", ans); 
	return 0;
}