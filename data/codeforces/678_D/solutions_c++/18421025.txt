#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
const int P = 1000000007;
struct point {
	int x, y;
	point(int a = 0, int b = 0): x(a), y(b) {}
};
inline point operator * (point a, point b) {
	return point(1ll * a.x * b.x % P, (1ll * a.x * b.y + a.y) % P);
}
int main() {
	point a;
	int x;
	long long n;
	scanf("%d%d%I64d%d", &a.x, &a.y, &n, &x);

	point ans;
	ans.x = 1, ans.y = 0;
	while (n) {
		if (n & 1) ans = ans * a;
		a = a * a;
		n >>= 1;
	}
	printf("%I64d\n", (1ll * ans.x * x + ans.y) % P);
	return 0;
}
