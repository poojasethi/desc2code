#include <iostream>
#include<stdio.h>
#include<algorithm>
using namespace std;
const int p=1000000007;
long long bit[100],A,B,n,x,ab[100],bb[100],ans,broj;

int main() {
	scanf("%I64d%I64d%I64d%I64d",&A,&B,&n,&x);
	ab[0]=A;
	bb[0]=B;
	for(int i=1;i<100;i++){
	ab[i]=(ab[i-1]*ab[i-1])%p;
	bb[i]=(((ab[i-1]+1)%p)*bb[i-1])%p;}
	ans=x;
	broj=n;
	for(int i=0;i<100;i++){
	bit[i]=broj%2;
	broj/=2;}
	for(int i=0;i<100;i++){
	if(bit[i]==1){
	ans=((ab[i]*ans)%p+bb[i])%p;}}
	printf("%I64d",ans);
	return 0;
}