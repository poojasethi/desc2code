#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define mod 1000000007
inline ll powmod(ll x, ll n, ll _mod){ ll res = 1; while (n){ if (n & 1)res = (res*x) % _mod; x = (x*x) % _mod; n >>= 1; }return res; }

int main() {
    ll a, b, x, n;
    cin >> a >> b >> n >> x;
    ll res = powmod(a, n, mod) * x % mod;
    if (a == 1) {
        res += n % mod * b % mod;
    } else {
        res += b * (powmod(a, n, mod) + mod - 1) % mod * powmod((a + mod - 1) % mod, mod - 2, mod) % mod;
    }
    cout << res % mod << endl;

    return 0;
}
