#include <iostream>
#define lli unsigned long long int
using namespace std;

const lli M = 1000000007;

lli powMod(lli a, lli p){
	if(p == 0) return 1;
	return (powMod(((a%M)*(a%M))%M,p/2)%M)*((p%2 ? a%M : 1)%M)%M;
}

lli sumPow(lli a, lli n){
	lli res;
	if(a == 1) return n%M;
	return ((powMod(a,n)-1)%M*(powMod(a-1,M-2))%M)%M;
}

int main(){
	lli s,a,b,n,x;
	cin >> a >> b >> n >> x;
	s = ((powMod(a,n)%M)*(x%M))%M;
	s += (sumPow(a,n)%M*(b%M))%M;
	cout << (s%M) << '\n';
	return 0;
}