#!/usr/bin/python
import sys
import re

def input_numbers():
    return [int(n) for n in raw_input().split()]

A,B,n,x = input_numbers()
MOD = 10 ** 9 + 7

def mul(m1, m2):
    a,b,c,d = m1[0][0], m1[0][1], m1[1][0], m1[1][1]
    x,y,z,w = m2[0][0], m2[0][1], m2[1][0], m2[1][1]
    return (((a*x + b*z) % MOD, (a*y + b*w) % MOD), ((c*x + d*z) % MOD, (c*y + d*w) % MOD))

def square(m):
    return mul(m, m)

def power(m, n):
    if n == 0:
        return ((1, 0), (0, 1)) #Id
    sq = power(square(m), n / 2)
    if n % 2 == 1:
        sq = mul(m, sq)
    return sq

m = ((A, 0), (B, 1))
mn = power(m, n)

A,B = mn[0][0], mn[1][0]
print (A*x + B) % MOD

