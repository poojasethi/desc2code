MOD = 1000000007
A, B, n, x = map(int, raw_input().split())
if A==1:
    print (x%MOD + ((B%MOD * n%MOD)%MOD))%MOD
else:
    print ((pow(A, n, MOD)*(x%MOD))%MOD + (B%MOD * (((pow(A, n, MOD)-1)%MOD) * (pow(A-1, MOD-2, MOD)))%MOD)%MOD)%MOD