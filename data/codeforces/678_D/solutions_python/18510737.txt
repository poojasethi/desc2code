mod = int(1e9 + 7)
def power(a, b):
  ret = 1
  while b:
    if b & 1: ret = ret * a % mod
    a = a * a % mod
    b >>= 1
  return ret
def inv(a):
  return power(a, mod - 2)

a, b, n, x = map(int, raw_input().split())

if a == 1:
  ans = x + n * b
else:
  ans = power(a, n) * x % mod + (power(a, n) + mod - 1) % mod * inv(a - 1) % mod * b % mod
print ans % mod