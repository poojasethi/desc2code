s = raw_input()
a , b , n , x = s.split(' ')
a= int(a)
b = int(b)
n = int(n)
x = int(x)
ans = 0
mod = 10**9 + 7 
if( n == 0  ):
    ans = x
elif( n == 1):
    ans = a*x + b
else:
    tmp  = ( pow(a , n , mod ) * x ) % mod 
    tmp2 = 0
    if a != 1:
        tmp2 = (  pow(a,n,mod) - 1 + mod ) % mod
        tmp2 *= pow(a-1, mod - 2 , mod)
        tmp2 *= b
        tmp2 %= mod
    else:
        tmp2 = n*b
        tmp2 %= mod
    ans = tmp + tmp2
print ( (ans % mod) + mod ) % mod
