a, b, n, x = map(int, raw_input().split())
mod = 10**9+7
print (pow(a, n, mod) * x + b * (n if a == 1 else (pow(a, n, mod) - 1) * pow(a - 1, mod - 2, mod))) % mod 

