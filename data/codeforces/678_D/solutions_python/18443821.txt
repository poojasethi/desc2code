
a,b,n,x = map(int,raw_input().split())

M = 1000000007

def exp(a,b):
	if b==0:
		return 1
	if b%2==1:
		return (a*exp(a,b-1))%M
	else:
		p = exp(a,b/2)
		return (p*p)%M


if a==1:
	res = (x+b*n)%M
else:
	res = ((exp(a,n)*x)%M + (((b*(exp(a,n)-1))%M) * exp(a-1,M-2))%M)%M

print res