A, B, n, x = map(int, raw_input().split())
MOD = 10**9+7
if A > 1:
    print (x * pow(A, n, MOD) + B * (pow(A, n, MOD)-1) * pow(A-1, MOD-2, MOD)) % MOD
else:
    print (x * pow(A, n, MOD) + B * n) % MOD
