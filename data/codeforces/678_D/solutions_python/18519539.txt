a, b, n, x = map(int, raw_input().split())

mod = 1000000007

cur = x
while n > 0:
    if n & 1:
        cur = (a * cur + b) % mod
    a, b = a * a, a * b + b
    a %= mod
    b %= mod
    
    n >>= 1
    
print cur