line = raw_input()

A, B, n, x = line.split()
mod = 1000000007

def matmult(a, b):
	return [
		a[0]%mod*b[0]%mod+a[1]%mod*b[2]%mod, 
		a[0]%mod*b[1]%mod+a[1]%mod*b[3]%mod,
		a[2]%mod*b[0]%mod+a[3]%mod*b[2]%mod,
		a[2]%mod*b[1]%mod+a[3]%mod*b[3]%mod
		]

a0 = [int(A), 1, 0, 1]

def modpow(a, b):
	if b == 1:
		return a0
	elif b & 1 == 1:
		return matmult(a0, modpow(a,b-1))
	else:
		x = modpow(a, b/2)
		return matmult(x, x)
		
an = modpow(a0, int(n))
print (an[0]*int(x)+an[1]*int(B))%mod