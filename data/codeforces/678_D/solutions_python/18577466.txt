
mod = 1000000007
def power(x, n):

   if(n==0):
      return 1

   tmp = power(x,n/2)

   if(n%2):
     return (((tmp*tmp)%mod)*x)%mod

   return (tmp*tmp)%mod


def divide(a , b):
    return (a * power(b,1000000005))%mod



ans=0;
a,b,n,x = raw_input().split(" ")
a,b,n,x = int(a) , int(b) , int(n) , int(x)
if(a>1): ans = (ans + (b* divide(power(a,n) - 1 , a-1))%mod)%mod
else : ans = (ans + (n*b)%mod)%mod
ans = (ans + (power(a,n)*x)%mod)%mod
if(ans<0):
    ans += mod
print ans
