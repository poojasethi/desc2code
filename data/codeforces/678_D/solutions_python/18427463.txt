from sys import stdin
import math
hi = 10**9 + 7
a,b,n,x = map(int,stdin.readline().split())
ans = 0
if a==1:
 ans = x+n*b
else:
 ans = pow(a,n,hi)*x 
 fir = b*(pow(a,n,hi)-1)
 sec = a-1
 sec = pow(sec,hi-2,hi)
 fir = (fir*sec)%hi
 ans = (ans + fir)%hi
 ans = (hi + ans)%hi
print (hi + ans%hi)%hi