import math
[A,B,n,x]=[int(x) for x in raw_input().split()]
q=pow(10,9)+7
total=pow(A,n,q)*x
total%=q
if A==1:
    total=x+n*B
    total%=q
    print total
else:
    m=pow(A,n,q)-1
    m*= pow(A-1,q-2,q)
    m*=B
    total+=m
    total%=q
    print total