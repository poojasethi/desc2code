#include<cstdio>
#include<iostream>
#include<cstring>
#include<algorithm>
#define ll long long
using namespace std;
ll a[2333];

ll abs1(ll a)
{
    if(a<0)return -a;
    return a;
}

int main()
{
    ll i,j,k,m,n,s=0;
    ll ans=1,mod=1000000007;
    scanf("%I64d%I64d",&n,&m);
    a[0]=m;
    for(i=1;i<=n+1;i++)
    {
        if(i<=n)scanf("%I64d",&a[i]);else a[i]=m;
        if(a[i]-a[i-1]>(ll)1 || a[i-1]-a[i]>(ll)1)
        {
            printf("0\n");
            return 0;
        }
        if(a[i]!=a[i-1]-1)ans=ans*(m-a[i]+(ll)1)%mod;
    }
    cout<<ans<<endl;
    return 0;
}
