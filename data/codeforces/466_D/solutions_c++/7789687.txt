#include <cstdio>
using namespace std;

const int m = 1000000007;

int main(){
   //freopen("ulaz.txt","r",stdin);
   int n, h;
   scanf("%d %d",&n,&h);
   int a[n+2];
   for(int i = 1; i <= n; i++) scanf("%d",&a[i]);

   long long r = 1;
   a[0] = h, a[n+1] = h;

   for(int i = 1; i <= n+1 && r > 0; i++){
      if(a[i] > h) r = 0;
      else if(a[i] == a[i-1]) r = (r * (h - a[i] + 1)) % m;
      else if(a[i] == a[i-1]-1) r  = (r * (h - a[i])) % m;
      else if(a[i] == a[i-1]+1) continue;
      else r = 0;
   }

   printf("%d\n",(int)r);

   return 0;
}
