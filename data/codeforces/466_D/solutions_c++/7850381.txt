#include <iostream>
#include <cstdlib>
#include <cstdio>
using namespace std;

typedef long long ll;
const ll mod=1000000007;
int n,h,a[2222],d[2222],ok=1;

int main(){
	cin>>n>>h;
	for (int i=1;i<=n;i++) scanf("%d",&a[i]);
	a[0]=a[n+1]=h;
	ll ans=1,cnt=0;
	for (int i=0;i<=n;i++){
		d[i]=a[i+1]-a[i];
		if (d[i]>1 || d[i]<-1 || a[i]>h) ok=0;
	}
	for (int i=0;i<=n;i++){
		if (i && d[i-1]==-1) cnt++;
		if (i && i<n && cnt>0 && d[i]==0) ans=ans*(cnt+1)%mod;
		if (d[i]==1){
			if (cnt<=0) ok=0; else ans=ans*cnt%mod;
			cnt--;
		}
	}
	if (!ok) ans=0;
	cout<<ans<<endl;
}
