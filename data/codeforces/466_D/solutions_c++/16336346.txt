#include<cstdio>
#include<cstring>
#include<iostream>
#define MOD 1000000007
using namespace std;
int main()
{
	long long n,k;
	cin>>n>>k;
	long long a[n+1];
	for(int i=1;i<=n;i++)
	{
		cin>>a[i];
		a[i]=k-a[i];
		if(a[i]<0)
		{
			cout<<"0\n";
			return 0;
		}
	}
		
			long long ans=1;
			a[0]=0,a[n+1]=0;
			for(int i=1;i<=1+n;i++)
			{
			if(a[i]==a[i-1]+1)continue;
			if(a[i]==a[i-1])ans=(ans*(a[i]+1))%MOD;
			else if(a[i]==a[i-1]-1)ans=(ans*(a[i-1]))%MOD;
			else
			{
				cout<<"0\n";
			return 0;
			}
			}
			
			cout<<ans<<endl;
		
	

}