#include<stdio.h>
#define mod 1000000007
int main()
{
    int i, j;
    long long int n, h, a, ans=0, s=0;
    scanf("%lld%lld", &n, &h);
    ans=1;
    for(i=0;i<n;i++)
    {
        scanf("%lld", &a);
        long long int tem=h-a;
        if(s-tem==1){ans=(s*ans)%mod;s--;}
        else if(s-tem==0)ans=(ans+((s*ans)%mod))%mod;
        else if(s-tem==-1)s++;
        else{ans=0;break;}
    }
    if(s>1)ans=0;
    printf("%I64d\n", ans);
    return 0;
}