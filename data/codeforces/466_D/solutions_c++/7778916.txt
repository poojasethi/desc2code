#include <iostream>
using namespace std;
long int hh=1000000007;
main(){
  long long n, h, res=1;
  cin>>n>>h; long int ar[n+1];

  for(long int i=0; i<n; i++) cin>>ar[i];
  for (long int i=0; i<n; i++) ar[i]=h-ar[i];
  ar[n]=0;
  long int nn=0;
  for(long int i=0; i<=n; i++){
    if (ar[i]==nn){res=res*(nn+1)%hh;}
    if (ar[i]==nn-1){ res=res*nn%hh;}
    if (ar[i]>nn+1||ar[i]<nn-1||ar[i]<0){res=0;}
    nn=ar[i];
  }
  cout<<res;
}