#include<cstdio>
#define mo 1000000007
int i, n, m, H[3000],D[3000];
int main()
{
	scanf("%d %d", &n, &m);
	for (i = 1; i <= n; i++) scanf("%d", &H[i]), D[i] = H[i - 1] - H[i];
	D[n + 1] = H[n] - m; D[1] = m - H[1];
	long long ans = 1, cnt = 0;
	for (i = 1; i <= n + 1; i++)
		if (D[i] == -1) ans = (ans * cnt) % mo, cnt--;
		else if (D[i] == 0) ans = ans * (cnt + 1) % mo;
		else if (D[i] == 1) cnt++;
		else ans = 0;
	printf("%I64d\n", ans);
}
	