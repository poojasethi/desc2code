#include<stdio.h>

long long n,h,f,a,i,c,k;

int main(){
    scanf("%I64d %I64d",&n,&h);
    f=h;
    k=1;
    for(i=0;i<n;i++){
        scanf("%I64d",&a);
        if(f==a){
            k*=(c+1);
        }
        else if(a==f-1){
            c++;
        }
        else if(a==f+1){
            k*=c;
            c--;
        }
        else{
            printf("0\n");
            return 0;
        }
        k%=1000000007;
        f=a;
    }
    if(f!=h&&f!=h-1) {
        printf("0\n");
        return 0;
    }
    printf("%I64d\n",k);
    return 0;
}
