#include<cstdio>
#include<cstring>
#include<vector>
#include<queue>
#define N 100005
using namespace std;
struct edge{int v,id,sta;}tmp;
vector<edge> Adj[N];
int n,m,vis[N];
int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    scanf("%d%d",&n,&m);
    for (int i=1,u,v,f;i<=m;i++)
    {
        scanf("%d%d%d",&u,&v,&f);
        tmp.v=v,tmp.id=i,tmp.sta=f;
        Adj[u].push_back(tmp);
    }
    queue<int> Q;
    Q.push(1),vis[1]=-1;
    while(!Q.empty())
    {
        int p=Q.front();
        Q.pop();
        for(int i=0;i<Adj[p].size();i++){
            int v=Adj[p][i].v,sta=Adj[p][i].sta, id=Adj[p][i].id;
            if(!vis[v]||(vis[v]>0&&!sta)) vis[v]=sta?id:-1, Q.push(v);
        }
    }
    vector<int> v;
    int flag=0;
    for(int i=1;i<=n;i++){
        if(vis[i]==0) flag=1;///表示有到达不了的
        if(vis[i]!=-1) v.push_back(vis[i]);///能到达但是需要重修的，已经记录了边号了
    }
    if(flag) puts("-1");
    else{
        printf("%d\n",v.size());
        for(int i=0;i<v.size();i++) printf("%d\n",v[i]);
    }
}