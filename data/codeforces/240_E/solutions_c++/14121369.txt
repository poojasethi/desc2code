#include<cstdio>
#include<cstring>
#include<vector>
#include<queue>
#define N 100005
using namespace std;
struct edge{int v,p,f;}tmp;
vector<edge> Adj[N];
int n,m,vis[N];
int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    scanf("%d%d",&n,&m);
    for (int i=1,u,v,f;i<=m;i++)
    {
        scanf("%d%d%d",&u,&v,&f);
        tmp.v=v,tmp.p=i,tmp.f=f;
        Adj[u].push_back(tmp);
    }
    queue<int> Q;
    Q.push(1),vis[1]=-1;
    while(!Q.empty())
    {
        int p=Q.front();
        Q.pop();
        for(int i=0;i<Adj[p].size();i++){
            int v=Adj[p][i].v,f=Adj[p][i].f,id=Adj[p][i].p;
            if(!vis[v]||(vis[v]>0&&!f)) vis[v]=f?id:-1,Q.push(v);            
        }
    }
    vector<int> v;
    int flag=0;
    for(int i=1;i<=n;i++){
        if(!vis[i]) flag=1;
        if(vis[i]!=-1) v.push_back(vis[i]);
    }
    if(flag) puts("-1");
    else{
        printf("%d\n",v.size());
        for(int i=0;i<v.size();i++) printf("%d\n",v[i]);
    }
        
}
