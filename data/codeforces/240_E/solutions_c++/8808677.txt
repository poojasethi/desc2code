#include<cstdio>
#include<cstring>
#include<string>
#include<cmath>
#include<iostream>
#include<algorithm>
#include<vector>
#include<queue>
#define mod 1000000007
using namespace std;
struct data
{
    int to,id,type;
};
vector<data>a[100010];
queue<int>que;
vector<int>v;
int visit[100010];
int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    int n,m,i,p,q,type;
    scanf("%d%d",&n,&m);
        for(i=1;i<=n;i++) a[i].clear();
        while(!que.empty()) que.pop();
        memset(visit,0,sizeof(visit));
        for(i=1;i<=m;i++)
        {
            scanf("%d%d%d",&p,&q,&type);
            data temp;
            temp.to=q;
            temp.id=i;
            temp.type=type;
            a[p].push_back(temp);
        }
        que.push(1);
        visit[1]=-1;
        while(!que.empty())
        {
            int from=que.front();
            que.pop();
            for(i=0;i<a[from].size();i++)
            {
                data temp;
                if(visit[a[from][i].to]==0||(visit[a[from][i].to]>0&&(!a[from][i].type)))
                {
                    visit[a[from][i].to]=a[from][i].type?a[from][i].id:-1;
                    que.push(a[from][i].to);
                }
            }
        }
        v.clear();
        int bj=0;
        for(i=1;i<=n;i++)
        {
            if(visit[i]==0)
            {
                bj=1; break;
            }
            else if(visit[i]>0)
            {
                v.push_back(visit[i]);
            }
        }
        if(bj==1)  printf("-1\n");
        else
        {
            int temp=v.size();
            printf("%d\n",temp);
            for(int i=0;i<temp;i++)
            {
                printf("%d\n",v[i]);
            }
        }
    
    return 0;
}

	  	     		 	 	  	  				 						