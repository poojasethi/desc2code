#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<algorithm>
#define N 1200005
using namespace std;
int lazy[4*N],sum[4*N][2],Dec[4*N],Inc[4*N];
int ll,rr;
char s[N];
void turn(int t){
    lazy[t]^=1;
    swap(Inc[t],Dec[t]);
    swap(sum[t][0],sum[t][1]);
}
void update(int t){
    int L=t*2,R=t*2+1;
    sum[t][0]=sum[L][0]+sum[R][0];
    sum[t][1]=sum[L][1]+sum[R][1];
    
    Inc[t]=max(Inc[L]+sum[R][1],sum[L][0]+Inc[R]);
    Dec[t]=max(Dec[L]+sum[R][0],sum[L][1]+Dec[R]);
}
void Build(int t,int l,int r){
    if(l==r){
        sum[t][0]=(s[l]=='4');
        sum[t][1]=(s[l]=='7');
        Inc[t]=Dec[t]=1;
        
        return;
    }
    int mid=(l+r)>>1;
    Build(t*2,l,mid);
    Build(t*2+1,mid+1,r);
    update(t);
}
void down(int t){
    if(lazy[t]){
        turn(t*2);
        turn(t*2+1);
        lazy[t]=0;
    }
}
void Modify(int t,int l,int r){
    if(ll<=l&&r<=rr){
        turn(t); return;
    }
    int mid=(l+r)>>1;
    down(t);
    if(ll<=mid) Modify(t*2,l,mid);
    if(rr>mid) Modify(t*2+1,mid+1,r);
    update(t);
}
int main(){
    int n,m; scanf("%d%d",&n,&m);
    scanf("%s",s+1);
    Build(1,1,n);
    while(m--){
        scanf("%s",s+1);
        if(s[1]=='c') printf("%d\n",Inc[1]);
        else{scanf("%d%d",&ll,&rr); Modify(1,1,n);}
    }
}