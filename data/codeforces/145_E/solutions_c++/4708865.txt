#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
#define ls x<<1
#define rs (x<<1)+1
#define N 6000010
char a[N];
int a01[N],a10[N],a00[N],a11[N],ll,rr,done[N];
inline void pushdown(int x){
       if(done[x]){
         done[x]=0;
         swap(a01[x],a10[x]);
         swap(a11[x],a00[x]);
         done[ls]^=1; done[rs]^=1;
         }
}
inline void pushup(int x){
       pushdown(ls); pushdown(rs);
       a01[x]=max(a00[ls]+max(a11[rs],a01[rs]),max(a00[ls],a01[ls])+a11[rs]);
       a11[x]=a11[ls]+a11[rs];
       a10[x]=max(a11[ls]+max(a00[rs],a10[rs]),max(a11[ls],a10[ls])+a00[rs]);
       a00[x]=a00[ls]+a00[rs];
}
void build(int x,int l,int r){
     if(l==r){
       if(a[l-1]=='4')a00[x]=1;
        else a11[x]=1;
     }else {
      int mid=l+r>>1;
      build(ls,l,mid);
      build(rs,mid+1,r);
      pushup(x);
      }
}void upd(int x,int l,int r){
      if(ll<=l&&rr>=r)done[x]^=1;
      else{ int mid=l+r>>1;
       if(ll<=mid)upd(ls,l,mid);
       if(rr>mid)upd(rs,mid+1,r);
       pushup(x);
       }
}
char s[100];
int main(){
    int n,m;scanf("%d%d",&n,&m);
    scanf("%s",a);
    build(1,1,n);
    for(int i=1;i<=m;i++){ 
     scanf("%s",s);
     if(s[0]=='c'){ pushdown(1); printf("%d\n",max(max(a00[1],a01[1]),a11[1])); }
      else{ scanf("%d%d",&ll,&rr); upd(1,1,n); }
    }return 0;
}
