#include <iostream>
#include <cstring>
#include <cstdio>
using namespace std;
const int maxn=1000010;
char s[maxn];
int num[maxn],Mark[maxn<<2];
int M1[maxn<<2],M2[maxn<<2];
int M3[maxn<<2],M4[maxn<<2];
int tot[maxn<<2],n,Q;
//M1:00 M2:11 M3:01 M4:10 

void Swich(int x){
	swap(M1[x],M2[x]);
	swap(M3[x],M4[x]);
	Mark[x]^=1;
}

void Push_down(int x,int l,int r){
	if(!Mark[x]||l==r)return;
	Swich(x<<1);Swich(x<<1|1);
	Mark[x]=0;
}

void Push_up(int x){
	M1[x]=M1[x<<1]+M1[x<<1|1];
	M2[x]=M2[x<<1]+M2[x<<1|1];
	M3[x]=max(M1[x<<1]+M2[x<<1|1],max(M1[x<<1]+M3[x<<1|1],M3[x<<1]+M2[x<<1|1]));
	M4[x]=max(M2[x<<1]+M1[x<<1|1],max(M4[x<<1]+M1[x<<1|1],M2[x<<1]+M4[x<<1|1]));	
}

void Build(int x,int l,int r){
	if(l==r){
		M1[x]=num[l]^1;
		M2[x]=num[l];
		return;
	}
	int mid=(l+r)>>1;
	Build(x<<1,l,mid);
	Build(x<<1|1,mid+1,r);
	Push_up(x);
}

void Update(int x,int l,int r,int a,int b){
	Push_down(x,l,r);
	if(l>=a&&r<=b){
		Swich(x);
		return;
	}
	int mid=(l+r)>>1;
	if(mid>=a)Update(x<<1,l,mid,a,b);
	if(mid<b)Update(x<<1|1,mid+1,r,a,b);
	Push_up(x);
}

char op[10];
int main(){
#ifndef ONLINE_JUDGE
	//freopen();
	//freopen();
#endif
	scanf("%d%d",&n,&Q);
	scanf("%s",s+1);
	for(int i=1;i<=n;i++){
		num[i]=s[i]=='4'?0:1;
	}
	Build(1,1,n);
	int a,b;
	while(Q--){
		scanf("%s",op);
		if(op[0]=='s'){
			scanf("%d%d",&a,&b);
			Update(1,1,n,a,b);
		}
		else
			printf("%d\n",max(max(M1[1],M2[1]),M3[1]));
	}
	return 0;
}

                                   