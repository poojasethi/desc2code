#include <cstdio>
#include <algorithm>
using namespace std;
const int N=1<<20;
int n,m;
struct T{
  int a,b,c,d;
  char f;
  T(){}
  T(int _a,int _b,int _c,int _d,char _f=0):a(_a),b(_b),c(_c),d(_d),f(_f){}
  T r(){return T(b,a,d,c,!f);}
}t[N<<1];
char s[N];
T mrg(T l,T r){
  return T(l.a+r.a,l.b+r.b,max(l.a+r.c,l.c+r.b),max(l.b+r.d,l.d+r.a));
}
void rev(int s,int e,int i=0,int p=1,int w=N){
  T& z=t[p];
  if(s<=i&&e>=i+w)z=z.r();
  else{
    w>>=1,p<<=1;
    if(s<i+w)rev(s,e,i,p,w);
    if(e>i+w)rev(s,e,i+w,p+1,w);
    bool f=z.f;
    z=mrg(t[p],t[p+1]);
    if(f)z=z.r();
    w<<=1;
  }
}
T qry(int s,int e,int i=0,int p=1,int w=N){
  T& z=t[p];
  if(s<=i&&e>=i+w)return z;
  w>>=1,p<<=1;
  T r=mrg((s<i+w)?qry(s,e,i,p,w):t[0],(e>i+w)?qry(s,e,i+w,p+1,w):t[0]);
  return z.f?r.r():r;
}
main(){
  scanf("%d%d",&n,&m);
  scanf("%s",s);
  for(int i=0;i<n;++i)t[N+i]=T('4'==s[i],'7'==s[i],1,1);
  for(int i=N;i-->1;)t[i]=mrg(t[i*2],t[i*2+1]);
  for(int a,b;m--&&1==scanf("%s",s);)if('c'==*s)printf("%d\n",qry(0,n).c);else scanf("%d%d",&a,&b),rev(a-1,b);
}
