#include <bits/stdc++.h>
#define xx first 
#define yy second
#define mp make_pair
using namespace std;
typedef pair<int,int> pii;
const int maxn=1e6+5;
int in[maxn*4],de[maxn*4],n,m;
pii seg[maxn*4];
bool mark[maxn*4];
inline void add(int s,int e,int tag,int pos,int ch){
	if(s>pos || pos>e)
		return ;
	if(s==e){
		in[tag]=de[tag]=1;
		if(ch==7)seg[tag].yy++;
		else seg[tag].xx++;
		return ;
	}
	int mid=(s+e)/2;
	add(s,mid,tag*2,pos,ch);
	add(mid+1,e,tag*2+1,pos,ch);
	seg[tag]=mp(seg[tag*2].xx+seg[tag*2+1].xx , seg[tag*2].yy+seg[tag*2+1].yy);
	in[tag]=max(seg[tag*2].xx+in[tag*2+1],in[tag*2]+seg[tag*2+1].yy);
	de[tag]=max(seg[tag*2].yy+de[tag*2+1],de[tag*2]+seg[tag*2+1].xx);
}
inline void go(int s,int e,int tag,int L,int R){
	if(R<s || L>e)
		return ;
	if(R>=e && L<=s){
		swap(seg[tag].xx,seg[tag].yy);
		swap(in[tag],de[tag]);
		mark[tag]=!mark[tag];
		return ;
	}
	if(mark[tag]){
		mark[tag]=!mark[tag];mark[tag*2]=!mark[tag*2];mark[tag*2+1]=!mark[tag*2+1];
		swap(seg[tag*2].xx,seg[tag*2].yy);swap(in[tag*2],de[tag*2]);
		swap(seg[tag*2+1].xx,seg[tag*2+1].yy);swap(in[tag*2+1],de[tag*2+1]);
	}
	int mid=(s+e)/2;
	go(s,mid,tag*2,L,R);
	go(mid+1,e,tag*2+1,L,R);
	seg[tag]=mp(seg[tag*2].xx+seg[tag*2+1].xx , seg[tag*2].yy+seg[tag*2+1].yy);
	in[tag]=max(seg[tag*2].xx+in[tag*2+1],in[tag*2]+seg[tag*2+1].yy);
	de[tag]=max(seg[tag*2].yy+de[tag*2+1],de[tag*2]+seg[tag*2+1].xx);
}
int main(){
	scanf(" %d %d",&n,&m);
	for(int i=1 ; i<=n ; i++){
		char ch;scanf(" %c",&ch);
		add(1,n,1,i,ch-'0');
	}
	while(m--){
		char s[20];scanf(" %s",s);
		if(s[0]=='c')
			printf("%d\n",in[1]);
		else{
			int x,y;scanf(" %d %d",&x,&y);
			go(1,n,1,x,y);
		}
	}
	return 0;
}
