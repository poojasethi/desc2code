#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;
#define SZ 1048576
int b4[2*SZ],b7[2*SZ],b47[2*SZ],b74[2*SZ];
int rev[2*SZ];
void change(int vr){
  rev[vr]^=1;
  swap(b4[vr] , b7[vr]);
  swap(b47[vr] , b74[vr]);
}
void push_down(int vr){
  if(!rev[vr])return;
  rev[vr]=0; if(vr>=SZ)return;
  change(2*vr); change(2*vr+1);
}
void update(int vr){
  push_down(vr); if(vr>=SZ)return;
  int L=2*vr,R=2*vr+1;
  b4[vr]=b4[L]+b4[R]; b7[vr]=b7[L]+b7[R];
  b47[vr]=max( max(b4[vr] , b7[vr]) , max(b47[L]+b7[R] , b4[L]+b47[R]) );
  b74[vr]=max( max(b4[vr] , b7[vr]) , max(b74[L]+b4[R] , b7[L]+b74[R]) );
}
int get(){return max(b47[1] , max(b4[1] , b7[1]));}
int lo,hi;
void insert(int vr=1,int F=0,int T=SZ-1){
  if(hi<F || T<lo)return;
  if(lo<=F && T<=hi){change(vr); return;}
  push_down(vr);
  insert(2*vr , F , (F+T)>>1);
  insert(2*vr+1 , ((F+T)>>1)+1 , T);
  update(vr);
}
// input
int N,M;
char V[SZ];
int main(){
  scanf("%d%d",&N,&M);
  scanf("%s",V);
  for(int i=0;i<N;++i)
   if(V[i]=='4')b4[i+SZ]=b47[i+SZ]=b74[i+SZ]=1;
   else b7[i+SZ]=b47[i+SZ]=b74[i+SZ]=1;
  for(int i=SZ-1;i>0;--i)update(i);
  char buf[10]; int L,R;
  while(M--){
   scanf("%s",buf);
   if(buf[0]=='c')printf("%d\n" , get());
   else{
    scanf("%d%d",&L,&R);
    lo=L-1; hi=R-1;
    insert();
       }
            }
  //system("pause");
  return 0;
}
