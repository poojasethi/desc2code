#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
#define Tx T[x]
#define Tk1 T[x<<1]
#define Tk2 T[x<<1|1]
#define N 1000100

struct Tr {
    int cs,co,ms,mo,flip;
}T[N<<2];
int n,m;

void up(int x) {
    Tx.cs=Tk1.cs+Tk2.cs;
    Tx.co=Tk1.co+Tk2.co;
    Tx.ms=max(Tk1.ms+Tk2.co,Tk1.cs+Tk2.ms);
    Tx.mo=max(Tk1.mo+Tk2.cs,Tk1.co+Tk2.mo);
}

void bu(int x,int l,int r) {
    if(l==r) {
        Tx.flip=0; char cc; scanf("%c",&cc);
        if(cc=='4') Tx.cs=1; else Tx.co=1; 
        Tx.ms=Tx.mo=1; return;
    }
    int M=(l+r)>>1; bu(x<<1,l,M); bu(x<<1|1,M+1,r);up(x);
}

void flip(int x) {
    Tx.flip=1-Tx.flip;
    swap(Tx.ms,Tx.mo);swap(Tx.cs,Tx.co);
}

void ch(int x,int L,int R,int l,int r) {
    if(L==l && R==r) {flip(x); return;}
    
    if(Tx.flip) {flip(x<<1);flip(x<<1|1);Tx.flip=0;}
    
    int M=(L+R)>>1;
    if(M>=r) 
        ch(x<<1,L,M,l,r);
    else
    if(l>M) 
        ch(x<<1|1,M+1,R,l,r);
    else {
        ch(x<<1,L,M,l,M);
        ch(x<<1|1,M+1,R,M+1,r);
    }
    up(x);
}

int main(void) {
    scanf("%d%d\n",&n,&m);bu(1,1,n);
    while(m--) {
        char s[10];int a,b;
        scanf("%s",s);
        if(s[0]=='s') {
            scanf("%d%d",&a,&b);
            ch(1,1,n,a,b);
        } 
        else printf("%d\n",T[1].ms);
    }
    return 0;
}