//In the name of ALLAH
//Lucky Queries

#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;

const int N = 1000000+10;

int seg[4*N],lis[4*N],lds[4*N],n4[4*N],n7[4*N];
bool fl[4*N];
char s[N];

inline void build(int i,int lo,int hi){
	if (lo==hi){
		n7[i] = s[lo]=='7';
		n4[i] = 1-n7[i];
		lis[i] = lds[i] = 1;
		return; 
	}
	int mid = lo+hi>>1, c1 = i<<1, c2= c1|1;
	build(c1,lo,mid);
	build(c2,mid+1,hi);
	n7[i] = n7[c1]+n7[c2];
	n4[i] = n4[c1]+n4[c2];
	lis[i] = max(n4[c1]+lis[c2], lis[c1]+n7[c2]);
	lds[i] = max(n7[c1]+lds[c2], lds[c1]+n4[c2]);
}

inline void shift(int i){
	int c1 = i<<1, c2 = c1|1;
	fl[c1]^=1;  fl[c2]^=1;
	swap(n4[c1],n7[c1]);
	swap(lis[c1],lds[c1]);
	swap(n4[c2],n7[c2]);
	swap(lis[c2],lds[c2]);
	fl[i] = 0;
}

inline void rev(int i,int lo,int hi,int ql,int qr){
	if (hi<ql || qr<lo) return;
	if (ql<=lo && hi<=qr){
		fl[i]^=1;
		swap(n4[i],n7[i]);
		swap(lis[i],lds[i]);
		return;
	}
	int mid = lo+hi>>1, c1 = i<<1, c2= c1|1;
	if (fl[i])
		shift(i);
	rev(c1,lo,mid,ql,qr);
	rev(c2,mid+1,hi,ql,qr);
	n7[i] = n7[c1]+n7[c2];
	n4[i] = n4[c1]+n4[c2];
	lis[i] = max(n4[c1]+lis[c2], lis[c1]+n7[c2]);
	lds[i] = max(n7[c1]+lds[c2], lds[c1]+n4[c2]);
}

int main(){
	int n,q,l,r;
	scanf("%d%d",&n,&q);
	scanf("%s",s+1);
	build(1,1,n);
	char cmd[20];
	while (q--){
		scanf("%s",cmd);
		if (*cmd == 'c')
			printf("%d\n",lis[1]);
		else{
			scanf("%d%d",&l,&r);
			rev(1,1,n,l,r);
		}
	}

	return 0;
}

		 					   			  			 		 			 	  	