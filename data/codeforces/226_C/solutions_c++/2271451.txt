#include <iostream>
#include <cstdio>
using namespace std;

long long int mod;

struct Matrix {
	long long int xa,xb,ya,yb;
};

Matrix operator * ( Matrix a, Matrix b) {
	Matrix m;
	m.xa = (a.xa*b.xa + a.xb*b.ya)%mod;
	m.xb = (a.xa*b.xb + a.xb*b.yb)%mod;
	m.ya = (a.ya*b.xa + a.yb*b.ya)%mod;
	m.yb = (a.ya*b.xb + a.yb*b.yb)%mod;
	return m;
}

int
main() {
	long long int left, right, len;
	cin >> mod >> left >> right >> len;
	long long int q = 1;
	long long int j;
	for ( long long int i = 1; i*i <= right; i++ ) {
		long long int max = right/i;
		long long int min = (left-1)/i;
		if ( max - min >= len && i > q ) q = i;
		j = right/i;
		max = right/j;
		min = (left-1)/j;
		if ( max - min >= len && j > q ) q = j;
	}
	// cout << q << endl;
	q--;
	Matrix ans;
	ans.xa = ans.yb = 1;
	ans.xb = ans.ya = 0;
	Matrix temp;
	temp.xa = temp.xb = temp.ya = 1;
	temp.yb = 0;
	while ( q ) {
		if ( q % 2 ) {
			ans = ans*temp;
		}
		temp = temp*temp;
		q /= 2;
	}
	cout << (ans.xa)%mod << endl;
	return 0;
}
