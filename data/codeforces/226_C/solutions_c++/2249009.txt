#include<cstdio>
#include<cmath>
#include<cstring>
typedef long long ll;
void multi(ll a[][2],ll b[][2],ll r[][2],int m){
    int i,j,k;
    for(i=0;i<2;++i)for(j=0;j<2;++j){
        r[i][j]=0;
        for(k=0;k<2;++k)r[i][j]=(r[i][j]+a[i][k]*b[k][j])%m;
    }
}
int getfib(ll n,int m){
    ll fib[2]={0,1};
    ll mat[2][2]={{0,1},{1,1}};
    ll res[2][2]={{1,0},{0,1}};
    ll tmp[2][2];
    while(n){
        if(n&1){
            multi(res,mat,tmp,m);
            memcpy(res,tmp,sizeof(res));
        }
        multi(mat,mat,tmp,m);
        memcpy(mat,tmp,sizeof(mat));
        n>>=1;
    }
    return res[1][0]%m;
}
int main(){
    int m;
    ll l,r,k;
    while(~scanf("%d%I64d%I64d%I64d",&m,&l,&r,&k)){
        ll res=1;
        ll fib[2]={1,1};
        ll x;
        ll i;
        for(i=2;i*i<=r;++i){
            if(r/i-(l-1)/i>=k&&i>res)res=i;
            x=r/i;
            if(i-(l-1)/x>=k&&x>res)res=x;
        }
        printf("%d\n",getfib(res,m));
    }
    return 0;
}