#include <cstdio>
#include <iostream>
#include <algorithm>
#include <map>
using namespace std;

typedef long long ll;

#define rep(i, n) for (int i = 0, _##i = (n); i < _##i; ++i)
#define repi(i, a) for (__typeof((a).begin()) i = (a).begin(), _##i=(a).end(); i != _##i; ++i)

int m;

typedef pair<ll, ll> pii;

pii mult(pii a, pii b) {
    return pii((a.first * b.first + a.second * b.second) % m, (a.first * b.second + a.second * (b.first - b.second + m) % m) % m);
}

int main() {
//  freopen("a.in","r",stdin); freopen("a.out","w",stdout);
    
    ll l, r, k;
    cin >> m >> l >> r >> k;
    l--;
    ll mx = 0;
    rep (i, 1000100) {
        if (i < 1 || i > r) continue;
        if (r / i - l / i >= k) {
            mx = max(mx, (ll)i);
        }
        ll t = r / i;
        if (r / t - l / t >= k) {
            mx = max(mx, t);
        }
    }
    pii t(1, 0);
    pii p(1, 1);
    while (mx) {
        if (mx % 2) {
            t = mult(t, p);
        }
        p = mult(p, p);
        mx /= 2;
    }
    cout << t.second % m;
}
