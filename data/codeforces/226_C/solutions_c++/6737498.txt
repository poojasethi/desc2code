#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define int64 long long
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int64 i,j,k,n,m,ma,K,a0,a1,b01,b11,b10,l,r,b00;
inline void mul() {
	int64 c0,c1;
	c0=(a0*b00+a1*b10)%m;
	c1=(a0*b01+a1*b11)%m;
	a0=c0,a1=c1;
}
inline void multi() {
	int64 c01,c11,c10,c00;
	c00=(b01*b10+b00*b00)%m;
	c01=(b00*b01+b01*b11)%m;
	c11=(b10*b01+b11*b11)%m;
	c10=(b10*b00+b11*b10)%m;
	b01=c01,b11=c11,b10=c10,b00=c00;
}
int main() {
	scanf("%I64d%I64d%I64d%I64d",&m,&l,&r,&K); l--;
	for (i=1;i<=r;i=k+1) {
		int64 A=l/i,B=r/i;
		k=min(!A?r:l/A,r/B);
		if (B-A>=K) ma=k;
	}
	a0=1,a1=1;
	b01=b11=b10=1;
	for (ma--;ma;ma/=2) {
		if (ma&1) mul();
		multi();
	}
	printf("%I64d\n",a0%m);
	//for(;;);
	return 0;
}
