//Anniversary
#include<cstdio>
#include<cstring>
typedef long long ll;
typedef long long arr[2][2];
arr t,a={{1,0},{0,1}},b={{0,1},{1,1}};
int mo;
ll l,r,k,x,y,max,p;
inline void mul( arr a, arr b, arr c)
{
	memset(t,0,sizeof(t));
	for(int i=0;i<2;i++)
		for(int k=0;k<2;k++)
		    if (a[i][k])
			    for(int j=0;j<2;j++)
			        t[i][j]+=a[i][k]*b[k][j];
	for(int i=0;i<2;i++)
	    for(int j=0;j<2;j++)
	        if (t[i][j]>=mo)
				c[i][j]=t[i][j]%mo;
			else
				c[i][j]=t[i][j];
}
int main()
{
	scanf("%d %I64d %I64d %I64d",&mo,&l,&r,&k);
	max=(r-l+1)/(k-1);
	x=(r-l+1)/k;
	for( l-- ; x<=max; x++)
	{
		if (l>=x) y=l/(l/x);
		else	  y=r;
		x=r/(r/x);
		if (y<x) x=y;
		if (r/x-l/x>=k) p=x;
	}
	//printf("%I64d\n",p);
	for(p--;p;p>>=1)
	{
		if(p&1) mul(a,b,a);
		mul(b,b,b);
	}
	printf("%I64d",(a[0][0]+a[0][1])%mo);
	return 0;
}
