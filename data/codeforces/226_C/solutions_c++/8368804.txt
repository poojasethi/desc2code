#include<cstdio>
using namespace std;
long long L,R,k,n;int i,P;
struct arr{int v[3][3];}a,b;
arr chen(arr x,arr y)
{
  arr s;int m=2,n=2,p=2;
  for (int i=1;i<=m;i++)
    for (int j=1;j<=p;j++)
      {
        s.v[i][j]=0;
        for (int k=1;k<=n;k++)
          s.v[i][j]=(s.v[i][j]+x.v[i][k]*1LL*y.v[k][j]%P)%P;
      }
  return s;
}
int Q()
{
  b.v[1][1]=1;b.v[1][2]=1;b.v[2][1]=1;b.v[2][2]=0;
  long long mi=n-2;a=b;
  while (mi>0)
  {
    if (mi&1) a=chen(a,b);
    b=chen(b,b);
    mi/=2;
  }
  return a.v[1][1];
}
int main()
{
  scanf("%d%I64d%I64d%I64d",&P,&L,&R,&k);
  n=1;
  for (i=1;i*1ll*i<=R;i++)
  {
    if (R/i-(L-1)/i>=k&&i>n) n=i;
    long long t=R/i;if (R/t-(L-1)/t>=k&&t>n) n=t;
  }
  printf("%d",Q()%P);
  return 0;
}
