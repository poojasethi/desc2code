// C. Anniversary
#include <cstring>
#include <iostream>

using namespace std;

void mul(long long a[2][2], long long b[2][2], long long mod)
{
    long long t[2][2] = {};
    for (int i = 0; i < 2; i++)
        for (int j = 0; j < 2; j++)
            for (int k = 0; k < 2; k++) t[i][j] = (t[i][j] + a[i][k] * b[k][j]) % mod;
    for (int i = 0; i < 2; i++) for (int j = 0; j < 2; j++) a[i][j] = t[i][j];
}

long long fib(long long n, long long mod)
{
    if (n <= 2) return 1;
    long long r[2][2], m[2][2] = {{0, 1}, {1, 1}};
    memcpy(r, m, sizeof(m));
    for (n -= 2; n; n >>= 1) {
        if (n & 1) mul(r, m, mod);
        mul(m, m, mod);
    }
    return r[1][1];
}

int main(int argc, char *argv[])
{
    long long m, l, r, k;
    cin >> m >> l >> r >> k;

    long long x = 0;
    for (long long i = 1; i * i <= r; i++) {
        long long j = r / i;
        if (i > x && (r / i - (l - 1) / i) >= k) x = i;
        if (j > x && (r / j - (l - 1) / j) >= k) x = j;
    }
    cout << (fib(x, m) % m) << endl;

    return 0;
}
