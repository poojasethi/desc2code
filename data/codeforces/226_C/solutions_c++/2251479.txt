#include<cstdio>
#include<cstring>
#include<algorithm>
#include<iostream>
#include<cmath>
using namespace std;

typedef long long ll;
#define rep(i,n) for(int i=0;i<(n);++i)

ll m , l , r , K ;

ll tmp[2][2];
void mul(ll a[][2] , ll b[][2]){
    rep(i,2)rep(j,2){
        tmp[i][j]=0;
        rep(k,2)tmp[i][j]=(tmp[i][j]+a[i][k]*b[k][j])%m;
    }
    rep(i,2)rep(j,2)a[i][j]=tmp[i][j];
}
ll fib(ll n){
    ll a[2][2];
    ll ans[2][2];
    a[0][0] = 0 ; a[0][1] = a[1][0] = a[1][1] = 1;
    ans[0][0] = ans[1][1] = 1; ans[1][0] = ans[0][1] = 0;
    n --;
    while(n){
        if(n & 1) mul(ans, a);
        n>>=1;  mul(a,a);
    }
    ll t = (ans[0][0] + ans[1][0]) % m;
    if(t < 0)   t += m;
    return t;
}
bool f(ll x){
    return r / x - (l - 1)/x >= K;
}
int main()
{
    cin >> m >> l >> r >> K;
    ll sq_r = sqrt(r) ;
    ll ans = 0;
    for(ll i=1;i<=sq_r;++i){
        if(f(i))    ans = max(ans , i);
        if(f(r/i))  ans = max(ans, r/i);
    }
    cout<<fib(ans)<<endl;
    return 0;
}
