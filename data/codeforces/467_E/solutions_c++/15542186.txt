#include<bits/stdc++.h>
using namespace std;
int const lim = 500000;
int inp[lim+3];
map<int,bool> vis;
map<int,int> to;
map<int,bool> pos;
map<int,int> connect;
vector<int>ans;
map<int,int> index;
int main()
{
    int n,x;cin >> n;
    for(int i=0;i<n;i++)
    {
        scanf("%d",&inp[i]);x=inp[i];
        if(pos[x])
        {
            int con = connect[x];
            ans.push_back(con);
            ans.push_back(x);
            ans.push_back(con);
            ans.push_back(x);pos.clear();vis.clear();to.clear();connect.clear();
        }
        else if (vis[x])
        {
            int ind = index[x];
            for(int j = ind+1;j<i;j++)
             {
                if(to.find(j)!=to.end())
                {
                    j = to[j];continue;
                }
                pos[inp[j]]=true;
                connect[inp[j]] = x;
             }
             if(ind+1<i-1)to[ind+1] = i-1;
        }
        else {vis[x] = true;index[x] = i;}
    }
    cout << ans.size()<<endl;
    for(int i = 0;i<ans.size();i++)
        cout << ans[i]<<" ";
}
