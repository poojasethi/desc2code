#include <cstdio>
#include <iostream>
#include <algorithm>
#include <map>
#include <vector>
using namespace std;
const int N = 5e5 + 7;

map<int, int> S, haveN, last, other;
vector<int> ans;
int a[N], next[N];
int n;

int main(){
	//freopen("in.txt", "r", stdin);
	scanf("%d", &n);
	for(int i = 1; i <= n; i++)
		scanf("%d", &a[i]);
	for(int i = 1; i <= n; i++){
		if (haveN.find(a[i]) != haveN.end() && haveN[a[i]] >= 3){
			//cout<<1<<endl;
			for(int j = 0; j <= 3; j ++)
				ans.push_back(a[i]);
			haveN.clear();
			S.clear();
			last.clear();
			continue;
		}
		//continue;
		next[i] = i + 1;
		if (last[a[i]] == 0){
			last[a[i]] = i;
			haveN[a[i]] = 1;
		}else{
			haveN[a[i]] ++ ;
			if (S.find(a[i]) != S.end()){
				int t = other[S[a[i]]];
				for(int j = 0; j < 2; j ++){
					ans.push_back(t);
					//break;
					ans.push_back(a[i]);
				}
				haveN.clear();
				S.clear();
				last.clear();
				continue;
			}
			for(int j = last[a[i]] + 1; j < i;){
				if (a[j] != a[i]){
					S[a[j]] = j;
					other[j] = a[i]; 
				}
				int k = j;
				j = next[j];
				next[k] = i;				
			}
		}
	}
	/*map<int, int>::iterator it;
	for(it = haveN.begin(); it != haveN.end(); it++){
		cout<<it->first<<" "<<it->second<<endl;
	}*/
	/*for(int i = 0; i < n; i++)
		cout<<next[i]<<" ";
	cout<<endl;*/
	cout<<ans.size()<<endl;
	for(int i = 0; i < ans.size(); i++)
		cout<<ans[i]<<" ";
	
}