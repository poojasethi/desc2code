#include<iostream>
#include<cstdio>
#include<cstring>
#include<vector>
#include<map>
#include<stack>
using namespace std;

int n;
int a[500500];
int p[500500];

vector<int> ans;
map<int,int> m1;
map<int,int> m2;
stack<int> s1;

int main()
{
    ios_base::sync_with_stdio(false);
    cin>>n;
    for(int i=0;i<n;i++) cin>>a[i];

    int begin = 0;
    int end = 0;

    while(begin<n)
    {
        m1.clear();
        m2.clear();
        while(!s1.empty()) s1.pop();

        end = begin;
        while(end<n)
        {
            if(m2[a[end]]>0)
            {
                ans.push_back(m2[a[end]]);
                ans.push_back(a[end]);
                ans.push_back(m2[a[end]]);
                ans.push_back(a[end]);
                begin = end + 1;
                break;
            }

            if(m1[a[end]]>0)
            {
                while(m1[a[end]]>0)
                {
                    if(m1[a[end]] == 1 && s1.top() == a[end]) break;
                    m2[s1.top()] = a[end];
                    m1[s1.top()]--;
                    s1.pop();
                }
            }

            s1.push(a[end]);
            m1[a[end]]++;
            end++;
        }
        if(end==n) break;
    }

    cout<<ans.size()<<endl;
    for(int i=0;i<ans.size();i++)
        cout<<ans[i]<<" ";
}
