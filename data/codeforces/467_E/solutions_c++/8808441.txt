#include<iostream>
#include<cstdio>
#include<cstring>
#include<cstdlib>
#include<cmath>
#include<algorithm>
#include<map>
#define N 500005
#define LL long long
#define oo (1<<30)
using namespace std;
map<int,int> pre,sum;
int n,m,A[N],B[N],st[N],top;
int main()
{
    int i;
    scanf("%d",&n),m=0,top=0;
    for(i=1;i<=n;i++)
        scanf("%d",&A[i]);
    for(i=1;i<=n;i++){
        if(pre[A[i]]){
            B[++m]=pre[A[i]],B[++m]=A[i];
            B[++m]=pre[A[i]],B[++m]=A[i];
            sum.clear(),pre.clear(),top=0;
            continue;
          }
        while(top&&(sum[A[i]]>1||(sum[A[i]]==1&&st[top]!=A[i])))
            pre[st[top]]=A[i],sum[st[top]]--,top--;
        st[++top]=A[i],sum[A[i]]++;
      }
    printf("%d\n",m);
    for(i=1;i<=m;i++) printf("%d ",B[i]);
    return 0;
}

