#include <bits/stdc++.h>
#define filein(t) freopen(t, "r" , stdin)
#define fileout(t) freopen(t, "w", stdout)
#define ff ios_base::sync_with_stdio(0)
#define mp make_pair
#define BIT(i, j) ((j >> i) & 1)
#define f first
#define s second
#define ll long long
#define Q 37
#define ln 2000000009
#define N 500005
#define NN 2000003
#define oo


using namespace std;

int n, a[N], u = 1;
vector <int> ans;

bool Find()
{
    map <int, int> cnt, pre;
    vector <int> st;
    for(; u<=n; u++)
    {
        if(pre[a[u]])
        {
            ans.push_back(pre[a[u]]);   ans.push_back(a[u]);
            ans.push_back(pre[a[u]]);   ans.push_back(a[u]);
            u++;
            return 1;
        }
        while( (cnt[a[u]] > 1 || (cnt[a[u]] == 1 && st.back() != a[u])) && st.size() )
        {
            pre[st.back()] = a[u];
            cnt[st.back()]--;
            st.pop_back();
        }
        cnt[a[u]]++;
        st.push_back(a[u]);
    }
    return 0;
}

int main()
{
    ios_base::sync_with_stdio(0);
    //filein("inp.txt");  fileout("out.txt");
    cin >> n;
    for(int i=1; i<=n; i++)  cin >> a[i];
    while(Find());
    cout << ans.size() << endl;
    for(int i=0; i<ans.size(); i++)
        cout << ans[i] << " ";
}
