#include<cstdio>
#include<map>
#define nn 500010
using namespace std;
map<int,int>pre,sum;
int n,i,j,t,st[nn],top,a[nn],b[nn];
int main()
{
 scanf("%d",&n);
 for (i=1;i<=n;i++)scanf("%d",&a[i]);
  
 for (i=1;i<=n;i++){
     if (pre[a[i]]){
     for (j=1;j<=2;j++)b[++t]=pre[a[i]],b[++t]=a[i];
     pre.clear();
     sum.clear();top=0;
     continue;
                   }
     while (top>0&&(sum[a[i]]>1||((sum[a[i]]==1)&&(a[i]!=st[top]))))
       {sum[st[top]]--;
        pre[st[top]]=a[i];top--;
       }  
     st[++top]=a[i];
     sum[a[i]]++;
                   }
printf("%d\n",t);
for (i=1;i<=t;i++)printf("%d ",b[i]);
return 0;
}
