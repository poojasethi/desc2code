#include <cstdio>
#include <cstring>
#include <cstdlib>
#include <map>

using namespace std;

map<int,int>pre,num;

int ans[500010],a[500010],b[500010];

int main()
{
    int n,cnt=0,fuck=0;
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
        scanf("%d",&a[i]);
    for(int i=1;i<=n;i++)
    {
        if(pre[a[i]])
        {
            ans[++cnt]=pre[a[i]];
            ans[++cnt]=a[i];
            ans[++cnt]=pre[a[i]];
            ans[++cnt]=a[i];
            num[a[i]]--;
            num[pre[a[i]]]-=2;
            num.clear();
            pre.clear();
            fuck=0;
            continue;
        }
        while(fuck&&(num[a[i]]>=2||(num[a[i]]==1&&b[fuck]!=a[i])))
        {
            pre[b[fuck]]=a[i];
            num[b[fuck]]--;
            fuck--;
        }
        num[a[i]]++;
        b[++fuck]=a[i];
    }
    printf("%d\n",cnt);
    for(int i=1;i<=cnt;i++)
        printf("%d ",ans[i]);
    printf("\n");
    return 0;
}