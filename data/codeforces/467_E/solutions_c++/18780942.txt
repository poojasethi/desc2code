#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
const int maxn = 5e5 + 10;
ll f[maxn] , a[maxn]; int n;
map<ll , ll>pre ,sum;vector<ll>ans;
void fir(){
    int st = 1;
    while(st <= n){
        sum.clear(); pre.clear();stack<ll>s;
        int ww = n + 1;
        for(int& i = st ; i <= n;i++){
            if(pre[a[i]]){
                ans.push_back(pre[a[i]]); ans.push_back(a[i]); ans.push_back(pre[a[i]]); ans.push_back(a[i]);
                ww = i + 1;
                break;
            }
            while(!s.empty()&&(sum[a[i]] > 1||(sum[a[i]] == 1 && s.top() != a[i]))){
                pre[s.top()] = a[i];
                sum[s.top()]--;
                s.pop();
            }
            s.push(a[i]);
            sum[a[i]]++;
           }
        st = ww;
    }
    printf("%d\n",ans.size());
    for(int i = 0 ; i < ans.size();i++){
        printf("%I64d",ans[i]);
        if(i == ans.size() - 1){
            printf("\n");
        }
        else printf(" ");
    }
}
int main()
{
    scanf("%d",&n);
    for(int i = 1; i <= n;i++){
        scanf("%I64d",&a[i]);
    }
    fir();
}
