#include <iostream>
#include <algorithm>
#include <cstdio>
#include <cmath>
#include <set>
#include <cstring>
#include <string>
#include <cstdlib>
#include <queue>
#include <vector>
#include <map>
#include <ctime>
#include <cassert>
#define ll long long
#define pb push_back
#define N 600000
#define mk make_pair
#define f first
#define s second

using namespace std;


int len;
int n, added;
int a[N];
vector <int> ans;
map <int, int> id, cnt;

pair <pair <int, int>, int> d[N];

void add(int x, int y)
{
	
   ans.pb(y);
   ans.pb(x);
   ans.pb(y);
   ans.pb(x);
   	
   len = 0;
   id.clear();
   cnt.clear();
}	
int main(){
    cin >> n;
    for (int i = 1; i <= n; i++)
    	cin >> a[i];


    for (int i = 1; i <= n; i++)
    {
    	int x = a[i];
    	if (id[x] == 0)
    	{
    	 	id[x] = i;
    	}
    	cnt[x]++;
    	if (cnt[x] > 3)
    	{
    	 	add(x, x);
    	 	continue;
    	}
    	int l = id[x], r = i;
    	added = 0;
    	while (len)
    	{
    	 	int lf = d[len].f.f, rf = d[len].f.s, y = d[len].s;
    	 	if (l <= lf)
    	 	{
    	 	 	len--;
    	 	 	continue;
    	 	}
    	 	if (lf < l && l < rf)
    	 	{
    	 	 	added = 1;
    	 	 	add(x, y);
    	 	}
    	 	break;
    	}
    	if (!added)
    		d[++len] = mk(mk(l, r), x);
    }
    cout << ans.size() << endl;
    for (int i = 0; i < ans.size(); i++)
    	cout << ans[i] << " ";
 	return 0;
}