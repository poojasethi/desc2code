#include<bits/stdc++.h>

using namespace std;

#define FOR(ii,aa,bb) for(int ii=aa;ii<=bb;ii++)
#define mp make_pair
#define nd second
#define st first
#define pb push_back

int i,j,k,n,m,x,y,a[500005];
map<int,int> Map,Map2;
vector < int > ans;
stack<pair<int,int> > S;

int fx(int xx){
	FOR(i,xx,n){
		x=a[i]; y=Map[x];
		if(Map2[x]){
			ans.pb(Map2[x]); ans.pb(x); ans.pb(Map2[x]); ans.pb(x);
			return i+1;
		}
		if(Map[x]){
			while(S.top().nd!=Map[x]){
				Map2[S.top().st]=x;
				S.pop();
			}
		}
		S.push(mp(x,i));
		if(!Map[x]) Map[x]=i;
	}
	return n;
}

int main(){
	scanf("%d",&n);
	FOR(i,1,n) scanf("%d",&a[i]);
	int t=1;
	while(1){
		t=fx(t);
		while(!S.empty()) S.pop();
		Map.clear(); Map2.clear();
		if(t>=n) break;
	}
	cout << ans.size() << endl;
	FOR(i,0,(int)ans.size()-1)
		cout << ans[i] << ' ' ;
	return 0;
}
