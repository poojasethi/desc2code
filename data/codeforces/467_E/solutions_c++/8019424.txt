#include <iostream>
#include <cstring>
#include <cstdio>
#include <vector>
#include <map>
#define maxn 1000010

using namespace std;

map<int,int> cnt,pos,last;
vector<int> res;
int a[maxn],other[maxn],next[maxn];
int n;

int main()
{
    scanf("%d",&n);
    for(int i=1;i<=n;i++)
        scanf("%d",&a[i]);
        
    for(int i=1;i<=n;i++)
    {
        cnt[a[i]]++;
        if(cnt[a[i]]==4)
        {
            for(int j=1;j<=4;j++)
                res.push_back(a[i]);
            cnt.clear();
            pos.clear();
            last.clear();
        }else
        {
            next[i]=i+1;
            if(last[a[i]]==0)
                last[a[i]]=i;
            else
            {
                if(pos.find(a[i])!=pos.end())
                {
                    int x=other[pos[a[i]]],y=a[i];
                    for(int j=1;j<=2;j++)
                        res.push_back(x),
                        res.push_back(y);
                    cnt.clear();
                    pos.clear();
                    last.clear();
                }else
                {
                    for(int j=last[a[i]]+1,tmp;j<i;tmp=j,j=next[j],next[tmp]=i)
                    if(a[j]!=a[i])
                        pos[a[j]]=j,other[j]=a[i];
                }
            }
        }
    }
    
    printf("%d\n",res.size());
    for(int i=0;i<res.size();i++)
        printf("%d ",res[i]);
    
    return 0;
}
