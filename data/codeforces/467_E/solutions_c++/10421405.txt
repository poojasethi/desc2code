#include <cstdio>
#include <cstring>
#include <algorithm>
#include <cstdlib>
#include <cmath>
#include <string>
#include <map>
#define For(i,a,n)  for(int i=(a);i<=(n);i++)
#define Forn(i,a,n) for(int i=(a);i>=(n);i--)
using namespace std;

map<int,int> A,B;
int n,an[2000005]; 
int stk[500005],top;

int main(){
	scanf("%d",&n);
	For(i,1,n){
		int x,t;
		scanf("%d",&x);
		if(t=A[x]){
			an[++*an]=t;an[++*an]=x;
			an[++*an]=t;an[++*an]=x;
			A.clear();B.clear();
			top=0;
		}else{
			while(top && ((B[x]>1)||((B[x]==1)&&(x!=stk[top])))){
				int g;
				--B[g=stk[top]];
				A[g]=x;
				--top;
			}stk[++top]=x;++B[x];
		}
	}printf("%d\n",*an);
	For(i,1,*an)printf("%d ",an[i]);
	return 0;
}