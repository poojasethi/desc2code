//In the name of God

#include <iostream>
#include <algorithm>
#include <cstring>
#include <vector>
#include <cstdio>
#include <fstream>
using namespace std;
#define left(x) ((x)*2)
#define right(x) (((x)*2)+1)
const int MAXN=1e5+10;
char c[MAXN];
int flag[MAXN*4][30];
int seg[MAXN*4][30],cnt[30];
int n,m;
void pass(int s,int e,int ind,int ind2)
{
  if(flag[ind][ind2]==-1)
    return;
  flag[left(ind)][ind2]=flag[right(ind)][ind2]=flag[ind][ind2];
  int mid=(s+e)/2;
  seg[left(ind)][ind2]=(mid-s+1)*flag[ind][ind2];
  seg[right(ind)][ind2]=(e-mid)*flag[ind][ind2];
  flag[ind][ind2]=-1;
}

void update(int s,int e,int ind,int ind2)
{
  seg[ind][ind2]=seg[right(ind)][ind2]+seg[left(ind)][ind2];
}

void add(int s,int e,int ind,int ind2,int x,int y,int val)
{
  if(s>y or e<x)
    return;
  if(s>=x and e<=y)
    {
      flag[ind][ind2]=val;
      seg[ind][ind2]=(e-s+1)*val;
      return;
    }
  int mid=(s+e)/2;
  pass(s,e,ind,ind2);
  add(s,mid,left(ind),ind2,x,y,val);
  add(mid+1,e,right(ind),ind2,x,y,val);
  update(s,e,ind,ind2);
}

int fin(int s,int e,int ind,int ind2,int x,int y)
{
  if(s>y or e<x)
    return 0;
  if(s>=x and e<=y)
    return seg[ind][ind2];
  pass(s,e,ind,ind2);
  int mid=(s+e)/2;
  return fin(s,mid,left(ind),ind2,x,y)+fin(mid+1,e,right(ind),ind2,x,y);
}

void print()
{
  for(int i=1;i<=n;i++)
    {
      char ans='?';
      for(int j=0;j<='z'-'a';j++)
	if(fin(1,n,1,j,i,i))
	  ans=j+'a';
      printf("%c",ans);
    }
  printf("\n");
}

int main()
{
  freopen("input.txt","r",stdin);
  freopen("output.txt","w",stdout);
  memset(flag,-1,sizeof flag);
  scanf("%d %d ",&n,&m);
    //  cin>>n>>m;
  for(int i=1;i<=n;i++)
    {
      scanf("%c ",&c[i]);
      add(1,n,1,c[i]-'a',i,i,1);
    }
  for(int i=1;i<=m;i++)
    {
      int l,r;
      cin>>l>>r;
      int odd=0,ind=0;
      for(int j=0;j<='z'-'a';j++)
	{
	  cnt[j]=fin(1,n,1,j,l,r);
	  if(cnt[j]%2)
	    odd++,ind=j;
	}
      if(odd>1)
	continue;
      int s=l,e=r;
      for(int j=0;j<='z'-'a';j++)
	{
	  add(1,n,1,j,l,r,0);
	  if(cnt[j]<=1)
	    continue;
	  add(1,n,1,j,s,s+cnt[j]/2-1,1);
	  s+=cnt[j]/2;
	  add(1,n,1,j,e-cnt[j]/2+1,e,1);
	  e-=cnt[j]/2;
	}
      if(odd)
	add(1,n,1,ind,s,s,1);
    }
  print();
  return 0;
}
