#include<bits/stdc++.h>
using namespace std;
long long n,k,l,i,j,a,b,c,t,q,res[100005];

pair<long long,long long> d[100005];
priority_queue<pair<long long,pair<long long,long long> > > p;
map<pair<long long,long long>,long long> m;
vector<pair<long long,long long> > v[100005];

int main()
{
cin>>n>>l;

for(i=0; i<l; i++){
    cin>>a>>b>>k;
    if(m[{a,b}]>k || m[{a,b}]==0){m[{a,b}]=k;m[{b,a}]=k;v[a].push_back({b,k});v[b].push_back({a,k});}
}

p.push( {0,{1,0}});
while(!p.empty()){
    a=p.top().first;b=p.top().second.first;c=p.top().second.second;q=max(q,b);
    if(d[b].first>a && d[b].first!=0){p.pop();continue;}
    d[b]={a,c};
    p.pop();
    if(b!=n) for(vector<pair<long long,long long> >::iterator it=v[b].begin(); it!=v[b].end(); it++) p.push( {a-(it->second),{it->first,b}});
}

t=n;
res[0]=t;
a=0;
while(t>0){
    a++;
    res[a]=d[t].second;
    if(t==1) break;
    t=d[t].second;
}

if(q!=n) {cout<<-1;return 0;}
for(i=a-1; i>=0; i--) cout<<res[i]<<" ";
}