#include<algorithm>
#include<iostream>
#include<fstream>
#include<cstring>
#include<string>
#include<cstdio>
#include<vector>
#include<queue>
#include<cmath>
#include<map>
#include<set>
#define ll long long
using namespace std;
long long n,m,x,y,z,d[100005],go[100005];vector<long long> v[100005];
priority_queue<long long> q;
map<pair<long long,long long>,long long> p;
void out(long long x)
{
	if(x!=1)
	out(go[x]);
	cout<<x<<" ";
	return;
}
int main()
{
	cin>>n>>m;
	for(long long i=1;i<=m;i++)
	{
		cin>>x>>y>>z;
		v[x].push_back(y);
		v[y].push_back(x);
		p[make_pair(x,y)]=p[make_pair(y,x)]=z;
	}
	for(long long i=1;i<=n;i++)
	d[i]=-1;
	q.push(1);d[1]=0;
	while(!q.empty())
	{
		long long now=q.top();q.pop();
		for(long long i=0;i<v[now].size();i++)
		{
			pair<long long,long long> pa=make_pair(now,v[now][i]);
			if(d[now]+p[pa]<d[v[now][i]] || d[v[now][i]]==-1)
			{
				d[v[now][i]]=d[now]+p[pa];
				go[v[now][i]]=now;
				q.push(v[now][i]);
			}
		}
	}
	if(d[n]==-1)cout<<d[n];
	else out(n);
	return 0;
}
