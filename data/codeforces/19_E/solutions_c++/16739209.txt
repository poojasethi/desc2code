#include <iostream>
#include <cstdlib>
#include <cstdio>
#define N 20005
using namespace std;
struct node
{
	int a,b,next;
}e[N];
int p[N],num=1;
int n,m;
int ct;
int vis[N];
int g[N],d[N],f[N];
void add(int x,int y)
{
	num++;
	e[num].next=p[x];
	p[x]=num;
	e[num].a=x;
	e[num].b=y;
}
void dfs(int u,int v)
{
	vis[u]=1;
	for(int i=p[u];i;i=e[i].next)
	{
		int w=e[i].b;
		if(w==v||d[w]>d[u])continue;
		if(!vis[w])
		{
			d[w]=d[u]+1;
			dfs(w,u);
			f[u]+=f[w];g[i]=f[w];
		}
		else if((d[u]^d[w])&1)f[u]--,f[w]++;
		else 
		{
			f[u]++;
			f[w]--;
			g[i]=1;
			ct++;
		}
	}
}
int main()
{
	scanf("%d%d",&n,&m);
	for(int i=1;i<=m;i++)
	{
		int x,y;
		scanf("%d%d",&x,&y);
		add(x,y),add(y,x);
	}
	for(int i=1;i<=n;i++)
	{
		if(!vis[i])
		 dfs(i,0);
	}
	if(!ct)
	{
		printf("%d\n",m);
		for(int i=1;i<=m;i++)
		{
			printf("%d ",i);
		}
	}
	else 
	{
		num=0;
		for(int i=2;i<=m+m+1;i++)
		{
			if(g[i]==ct)f[++num]=i/2;
		}
		printf("%d\n",num);
		for(int i=1;i<=num;i++)
		{
			printf("%d\n",f[i]);
		}
	}
	return 0;
}