#include <cstdio>
int ans,error,head[100000],next[100000],to[100000],d[100000],f[100000],c[100000]; 
bool chk[100000],err[100000]; int rec;
void dfs(int u,int p)
{
	int i,v; 
	chk[u] = true;
	for(i=head[u];i;i=next[i])
	if(to[i] != p && ((!chk[to[i]]) || d[to[i]]<d[u]))
	{
		v = to[i];
		if(!chk[v])
		{
			d[v] = d[u]+1;
			dfs(v,u);
			c[i] = f[v];
			f[u] += f[v];
		}
		else
		{
			if(d[u]%2 == d[v]%2) 
			{
				f[u]++; f[v]--;
				c[i]++; error++; 
			}
			else {f[u]--; f[v]++;}
		}
	}
}
int main()
{
	//freopen("input.txt","r",stdin);
	int i,n,m,u,v;
	scanf("%d%d",&n,&m);
	for(i=1;i<=m;i++)
	{
		scanf("%d%d",&u,&v);
		to[i] = v; next[i] = head[u]; head[u] = i;
		to[i+m] = u; next[i+m] = head[v]; head[v] = i+m;
	}
	for(i=1;i<=n;i++)
		if(!chk[i])
		dfs(i,-1);
	if(error == 0)
	{
		printf("%d\n",m);
		for(i=1;i<=m;i++) printf("%d ",i);
		return 0;
	}
	for(i=1;i<=m;i++)
		if(c[i] == error || c[i+m] == error) ans++;
	printf("%d\n",ans);
	for(i=1;i<=m;i++)
		if(c[i] == error || c[i+m] == error) 
			printf("%d ",i);
}