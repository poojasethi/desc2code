#include<iostream>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#define N 20010
using namespace std;
int head[N],fa[N],ans[N],c[N],used[N],f[N],d[N];
int pa,num,n,m,i,pos,x,y,cnt,err;
struct li {
	int v,la;
}li[N];
void add(int a,int b) {
	li[++pos].v=b;li[pos].la=head[a];head[a]=pos;
}
void dfs(int x,int k) {
	int y;
	c[x]=k;used[x]=1;
	for (int i=head[x];i;i=li[i].la) 
	   if (fa[x]!=(i^1)) 
	      if (!used[y=li[i].v]) {
	      	  fa[y]=i;
	      	  dfs(y,1-k);
	      	  f[x]+=f[y];
	      	  d[x]+=d[y];
	      }
	      else if (used[y]==1) 
	         if (c[x]==c[y]) cnt++,err=i,f[x]++;else d[x]++;
	      else if (c[x]==c[y]) f[x]--;else d[x]--;
     used[x]=2;
}
int main()
{
	//freopen("19E.in","r",stdin);
	//freopen("19E.out","w",stdout);
	cin>>n>>m;
	pos=1;
	for (int i=1;i<=m;i++) {
		int a,b;
		scanf("%d %d",&a,&b);
		add(a,b);add(b,a);
	}
	for (int i=1;i<=n;i++) 
	   if (!used[i]) dfs(i,0);
	   
	if (!cnt) for (int i=1;i<=m;i++) ans[++num]=i;
	else {
		if (cnt==1) ans[++num]=err/2;
		for (int i=1;i<=n;i++) 
		  if (f[i]==cnt&&!d[i]) ans[++num]=fa[i]/2;
	}
	sort(ans+1,ans+num+1);
	//printf("%d\n",num);
	cout<<num<<endl;
	for (int i=1;i<=num;i++) printf("%d ",ans[i]);
    //printf("%d\n",);
	return 0;
}
