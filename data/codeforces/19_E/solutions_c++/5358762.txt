#include <cstdio>
#define maxn 10005
int N,M,S,tot,head[maxn],next[maxn*2],lk[maxn*2],d[maxn],c[maxn*2],s[maxn],dfn[maxn],fa[maxn],q[maxn];

void add(int u,int v,int t) {lk[t]=v,next[t]=head[u],head[u]=t;}

void init()
{
	scanf("%d%d",&N,&M);
	for (int i=1,t=1,u,v; i<=M; i++) scanf("%d%d",&u,&v),add(u,v,++t),add(v,u,++t);
}

void dfs(int u)
{
	dfn[u]=++tot;
	for (int i=head[u],v; v=lk[i],i; i=next[i]) if (v!=fa[u])
	if (!dfn[v]) fa[v]=u,d[v]=d[u]+1,dfs(v);
	else if (dfn[v]>dfn[u])	if ((d[v]-d[u])&1) s[v]--,s[u]++; else s[v]++,s[u]--,c[i]++,S++;
}

void Dfs(int u) {for (int i=head[u],v; v=lk[i],i; i=next[i]) if (fa[v]==u) Dfs(v),c[i]=s[v],s[u]+=s[v];}

void doit()
{
	for (int i=1; i<=N; i++) if (!dfn[i]) dfs(i),Dfs(i);
	if (!S)	for (int i=1; i<=M; i++) q[++q[0]]=i;
	else for (int i=2; i<=2*M+1; i++) if (c[i]==S) q[++q[0]]=i/2;
	printf("%d\n",q[0]);
	for (int i=1; i<=q[0]; i++) printf("%d%c",q[i],i==q[0]?'\n':' ');
}

int main()
{
	init();
	doit();
}