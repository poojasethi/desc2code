#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int maxn=20010;
int tot,next[maxn],point[maxn],fir[maxn];
int fa[maxn],flag[maxn],err,cnt,t,ans[maxn],d[maxn],f[maxn];
int n,m;
bool c[maxn];
void add(int u,int v){
    point[tot]=v;
    next[tot]=fir[u];
    fir[u]=tot++;
}
void dfs(int x,bool k){
    flag[x]=1;
    c[x]=k;
    for(int i=fir[x],to;i;i=next[i])
        if(fa[x]!=(i^1))
            if(!flag[to=point[i]]){
                fa[to]=i;
                dfs(to,!k);
                f[x]+=f[to];
                d[x]+=d[to];
            }
            else 
            if(flag[to]==1)
                if(c[x]==c[to]){
                    cnt++;
                    err=i;
                    f[x]++;
                }
                else d[x]++;
            else
            if(c[x]==c[to])f[x]--;
                else d[x]--;
    flag[x]=2;
}
int main(){
    //freopen("AC.in","r",stdin);
    //freopen("AC.out","w",stdout);
    scanf("%d%d",&n,&m);
    tot=2;
    for(int i=1;i<=m;i++){
        int x,y;
        scanf("%d%d",&x,&y);
        add(x,y),add(y,x);
    }
    for(int i=1;i<=n;i++)
        if(!flag[i])dfs(i,0);
    if(!cnt)for(int i=1;i<=m;i++)ans[++t]=i;
	else{
		if(cnt==1)ans[++t]=err/2;
		for(int i=1;i<=n;i++)
			if(f[i]==cnt&&!d[i])ans[++t]=fa[i]/2;
	}
	sort(ans+1,ans+t+1);
	cout<<t<<endl;
	for(int i=1;i<=t;i++) printf("%d ",ans[i]);
	return 0;
}
