#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;
int e,n,m,i,jihuan,k;
bool intree[40000],vis[40000];
int c[40000],ans[40000],gy[40000],go[40000],gn[40000],fir[40000],f[40000],ff[40000],fa[40000],co[40000],de[40000],tx[40000],ty[40000],s[40000];
void add(int x,int y,int z)
{
	gy[++e]=y;
	gn[e]=fir[x];
	go[e]=z;
	fir[x]=e;
}
int fin(int x)
{
	if (f[x]!=x) f[x]=fin(f[x]);
	return(f[x]);
}
void dfs(int x)
{
	int v,tt,q;
	vis[x]=true;
	for(tt=fir[x];tt!=0;tt=gn[tt])
	{
		v=gy[tt];
		if(go[tt]!=ff[x])
		{
			if(vis[v]==false)
			{
				intree[go[tt]]=true;
				fa[v]=x;ff[v]=go[tt];co[v]=co[x]^1;de[v]=de[x]+1;
				dfs(v);
				s[x]+=s[v];
				c[go[tt]]=s[v]; 
			}
			else
			{
				if (de[v]>de[x]) continue;
				if (co[v]!=co[x])
				{
					q=fin(x);
					while(q!=fin(v))
					{
						if (fin(q)!=fin(fa[q])) f[fin(q)]=fin(fa[q]);
						q=fin(q);
					}
				}
				else
				{
					jihuan++; s[x]++; s[v]--;c[go[tt]]=1;
				}
			}
		}
	}
}
int main()
{
	//freopen("1.in","r",stdin);
	//freopen("1.out","w",stdout);
	scanf("%d%d",&n,&m);
	for(i=1;i<=m;i++) scanf("%d%d",&tx[i],&ty[i]),add(tx[i],ty[i],i),add(ty[i],tx[i],i);
	for(i=1;i<=n;i++) f[i]=i;
	for(i=1;i<=n;i++)
		if (vis[i]==false) dfs(i);
	for(i=1;i<=m;i++)
	if(jihuan==c[i])
	{
		if (intree[i]==true&&fin(tx[i])==fin(ty[i])&&jihuan>0) continue;
		ans[++k]=i;
	}
	printf("%d\n",k);
	for(i=1;i<=k;i++)
	printf("%d ",ans[i]);
	
}