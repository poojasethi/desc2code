#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<cstring>
#include<cmath>
#include<vector>
using namespace std;
const int maxn=20010;
int n,m,fst[maxn],v[maxn],nxt[maxn],idx[maxn],e_cn;
int f[maxn],d[maxn],fa[maxn],cur,err;
bool vis[maxn],inq[maxn],tint[maxn];
vector <int> ans;
void add(int x,int y,int idxx)
{
	e_cn++;
	v[e_cn]=y;idx[e_cn]=idxx;
	nxt[e_cn]=fst[x];fst[x]=e_cn;
}
void dfs(int cn,int pr,int col)
{
	vis[cn]=true,inq[cn]=true,tint[cn]=col;
	for(int i=fst[cn];i;i=nxt[i])
	{
		if(v[i]==pr) continue;
		if(!vis[v[i]])
		{
			fa[v[i]]=idx[i];
			dfs(v[i],cn,col^1);
			f[cn]+=f[v[i]];d[cn]+=d[v[i]];
		}
		else 
			if(inq[v[i]])
				if(tint[cn]==tint[v[i]]) 
				{
					err=idx[i];cur++;d[cn]++;
				}
				else f[cn]++;
			else
				if(tint[cn]==tint[v[i]]) d[cn]--;
				else f[cn]--;
	}
	inq[cn]=false;
}
int main()
{
	int x,y;scanf("%d%d",&n,&m);
	for(int i=1;i<=m;i++)
	{
		scanf("%d%d",&x,&y);
		add(x,y,i);add(y,x,i);
	}
	for(int i=1;i<=n;i++)
		if(!vis[i]) dfs(i,-1,1);
	if(!cur)
	{
		printf("%d\n",m);
		for(int i=1;i<=m;i++)
			printf("%d ",i);
	}
	else
	{
		if(cur==1) ans.push_back(err);
		for(int i=1;i<=n;i++)
			if(fa[i]&&d[i]==cur&&!f[i])
				ans.push_back(fa[i]);
		sort(ans.begin(),ans.end());
		printf("%d\n",ans.size());
		for(int i=0;i<ans.size();i++) printf("%d ",ans[i]);
	}
 	return 0;
}

	   		  	 			 	 	 		     	