#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<cmath>
#include<algorithm>
#define maxn 10010
#define maxm 20010
using namespace std;
bool color[maxn];
int ans[maxn],top;
int n,m,cnt,error,flag[maxn],id[maxn],odd[maxn],even[maxn];
int tot=1,to[maxm],next[maxm],start[maxn];
void make(int a,int b)
{
	tot++;
	to[tot]=b;
	next[tot]=start[a];
	start[a]=tot;
}
void read()
{
	scanf("%d %d",&n,&m);
	for(int i=1,a,b;i<=m;i++)
	{
		scanf("%d %d",&a,&b);
		make(a,b),make(b,a);
	}
}
void Paint(int p,int fa,bool col)
{
	flag[p]=1,color[p]=col;
	for(int i=start[p];i;i=next[i])
	{
		int q=to[i];
		if(q==fa)
			continue;
		if(flag[q]==0)
		{
			id[q]=i>>1;
			Paint(q,p,col^1);
			odd[p]+=odd[q],even[p]+=even[q];
		}
		else if(flag[q]==1)
		{
			if(color[p]==color[q])
				odd[p]++,cnt++,error=(i>>1);
			else
				even[p]++;
		}
		else
			color[p]==color[q]?odd[p]--:even[p]--;
	}
	flag[p]=2;
}
void work()
{
	for(int i=1;i<=n;i++)
		if(flag[i]==0)
			Paint(i,0,true);
	if(cnt==0)
	{
		printf("%d\n",m);
		for(int i=1;i<=m;i++)
			printf("%d%c",i,i<m?' ':'\n');
	}
	else
	{
	 	if(cnt==1)
		 	ans[++top]=error;
	 	for(int i=1;i<=n;i++)
		 	if(odd[i]==cnt&&even[i]==0)
			 	ans[++top]=id[i];
	 	sort(ans+1,ans+top+1);
	 	printf("%d\n",top);
	 	for(int i=1;i<=top;i++)
		 	printf("%d%c",ans[i],i<top?' ':'\n');
	}
}
int main()
{
	read();
	work();
	return 0;
}

 		 			 				  	 	 		     	