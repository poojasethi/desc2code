#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int N=20010;
struct S{int st,en;}aa[N];
int tot=1,point[N],next[N],n,m,f[N],g[N],mark[N],c[N],now,sum,fa[N],ans[N];
inline void add(int x,int y){
	next[++tot]=point[x];point[x]=tot;
	aa[tot].st=x;aa[tot].en=y;
	next[++tot]=point[y];point[y]=tot;
	aa[tot].st=y;aa[tot].en=x;
}
inline void dfs(int x,int k){
	int i;
	c[x]=k;mark[x]=1;
	for(i=point[x];i;i=next[i])
	  if(fa[x]!=(i^1)){
	  	if(!mark[aa[i].en]){
	  		fa[aa[i].en]=i;
	  		dfs(aa[i].en,k^1);
	  		f[x]+=f[aa[i].en];
	  		g[x]+=g[aa[i].en];
	  	}
	  	else if(mark[aa[i].en]==1){
	  		if(c[x]==c[aa[i].en]) ++sum,++f[x],now=i;
	  		else ++g[x];
	  	}
	  	else if(c[x]==c[aa[i].en]) --f[x];
	  	else --g[x];
	  }
	mark[x]=2;
}
int main(){
	int i,j,x,y;
	scanf("%d%d",&n,&m);
	for(i=1;i<=m;++i){
		scanf("%d%d",&x,&y);
		add(x,y);
	}
	for(i=1;i<=n;++i)
	  if(!mark[i]) dfs(i,0);
	if(!sum){
		for(i=1;i<=m;++i) ans[++ans[0]]=i;
	}
	else{
		if(sum==1) ans[++ans[0]]=now>>1;
		for(i=1;i<=n;++i)
		  if(f[i]==sum&&!g[i]) 
		    ans[++ans[0]]=fa[i]>>1;
	}
	sort(ans+1,ans+ans[0]+1);
	printf("%d\n",ans[0]);
	for(i=1;i<=ans[0];++i)
	  printf("%d ",ans[i]);
}
