#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cstring>
using namespace std;
int g[10007],t[20007],next[20007],tot,h[10007],n,m;
int t1,b1[10007],b2[10007],s1[10007],s2[10007],ans;
void dfs(int x)
{
	int p=g[x];
	while (p)
	{
		if (t[p])
		{
			t[p^1]=0;
			if (h[t[p]]==-1)
			{
				h[t[p]]=1-h[x];
				dfs(t[p]);
				s1[p/2]+=b1[t[p]],s2[p/2]+=b2[t[p]];
				b1[x]  +=b1[t[p]],b2[x]  +=b2[t[p]];
			} else
				if (h[t[p]]^h[x]) b2[x]++,b2[t[p]]--,s2[p/2]=1;
					else          b1[x]++,b1[t[p]]--,s1[p/2]=1,t1++;
		}
		p=next[p];
	}
}
int main()
{
//	freopen("input.txt","r",stdin);
//	freopen("output.txt","w",stdout);
	cin>>n>>m;
	tot=1;
	for (int i=1;i<=m;i++)
	{
		int p,q;
		scanf("%d%d",&p,&q);
		tot++,t[tot]=q,next[tot]=g[p],g[p]=tot;
		tot++,t[tot]=p,next[tot]=g[q],g[q]=tot;
	}
	memset(h,-1,sizeof h);
	for (int i=1;i<=n;i++)
		if (h[i]==-1) h[i]=0,dfs(i);
	for (int i=1;i<=m;i++)
		if (!t1 || (s1[i]==t1 && !s2[i])) ans++;
	cout<<ans<<endl;
	for (int i=1;i<=m;i++)
		if (!t1 || (s1[i]==t1 && !s2[i])) printf("%d ",i);
//	fclose(stdin);
//	fclose(stdout);
	return 0;
}
