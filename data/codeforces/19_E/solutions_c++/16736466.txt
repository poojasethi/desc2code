#include<cstdio>
#define N 1010100
int n,m,i,x,y,t,tot,cnt,ans,gg,fir[N],d[N],g[N],b[N],ne[N*2],la[N*2],G[N],B[N],q[N];
void ins(int x,int y){la[++tot]=y;ne[tot]=fir[x];fir[x]=tot;}
void dfs(int x,int fa,int fm){
	d[x]=d[fa]+1;
	for(int i=fir[x],y;i;i=ne[i])if(i^fm^1)if(!d[y=la[i]])dfs(y,x,i),g[x]+=g[y],b[x]+=b[y],G[i/2]=g[y],B[i/2]=b[y];else if(d[y]<=d[x])if(d[x]-d[y]&1)g[x]++,g[y]--;else gg=i/2,b[x]++,b[y]--,cnt++;
}
int main(){
	for(scanf("%d%d",&n,&m),tot=i=1;i<=m;i++,ins(x,y),ins(y,x))scanf("%d%d",&x,&y);
	for(i=1;i<=n;i++)if(!d[i])dfs(i,0,0);
	if(!cnt)for(i=1;i<=m;i++)q[++t]=i;else for(i=1;i<=m;i++)if(B[i]==cnt&&!G[i])q[++t]=i;
	for(printf("%d\n",cnt==1?t+1:t),i=1;i<=t;i++){
		if(cnt==1&&gg>q[i-1]&&gg<q[i])printf("%d ",gg);
		printf("%d",q[i]);if(i!=t)putchar(' ');
	}
	if(cnt==1&&gg>q[t])printf(" %d",gg);
}
	      			 	 						   	 		  			