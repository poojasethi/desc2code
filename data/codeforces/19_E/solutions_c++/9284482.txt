#include<iostream>
#include<cstdlib>
#include<cstdio>
#include<algorithm>
#define N 20010
using namespace std;
int head[N],fa[N],ans[N],c[N],used[N],f[N],d[N];
int pa,num,n,m,i,pos,x,y,cnt,err;
struct li {
	int v,la;
}li[N];
void add(int a,int b) {
	li[++pos].v=b;li[pos].la=head[a];head[a]=pos;
}
void dfs(int u,int k) {
	int v;
	c[u]=k;used[u]=1;
	for (int i=head[u];i;i=li[i].la) 
	   if (fa[u]!=(i^1)) 
	      if (!used[v=li[i].v]) {
	      	  fa[v]=i;
	      	  dfs(v,1-k);
	      	  f[u]+=f[v];
	      	  d[u]+=d[v];
	      }
	      else if (used[v]==1) 
	         if (c[u]==c[v]) cnt++,err=i,f[u]++;else d[u]++;
	      else if (c[u]==c[v]) f[u]--;else d[u]--;
     used[u]=2;
}
int main()
{
	//freopen("19E.in","r",stdin);
	//freopen("19E.out","w",stdout);
	cin>>n>>m;
	pos=1;
	for (int i=1;i<=m;i++) {
		int a,b;
		scanf("%d %d",&a,&b);
		add(a,b);add(b,a);
	}
	for (int i=1;i<=n;i++) 
	   if (!used[i]) dfs(i,0);
	   
	if (!cnt) for (int i=1;i<=m;i++) ans[++num]=i;
	else {
		if (cnt==1) ans[++num]=err/2;
		for (int i=1;i<=n;i++) 
		  if (f[i]==cnt&&!d[i]) ans[++num]=fa[i]/2;
	}
	sort(ans+1,ans+num+1);
	//printf("%d\n",num);
	cout<<num<<endl;
	for (int i=1;i<=num;i++) printf("%d ",ans[i]);
    //printf("%d\n",);
	return 0;
}
