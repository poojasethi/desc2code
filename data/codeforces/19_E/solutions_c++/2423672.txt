#include<cstdio>
#include<vector>
#include<algorithm>
#define pb push_back
#define fo(i,a,b) for(i=a;i<=b;++i)
const int mn=100100;
using namespace std;
vector<int>e[mn],v[mn];
int c[mn],vis[mn],ans[mn],f[mn],g[mn];
int fa[mn],n,m,m1,la,tot;
void dfs(int r,int co)
{
    c[r]=co,vis[r]=1;
    int i,j,k;
    for(i=0;i<e[r].size();++i)
    {
        j=e[r][i],k=v[r][i];
        if(k==fa[r])continue;
        if(!vis[j])fa[j]=v[r][i],dfs(j,1^co),f[r]+=f[j],g[r]+=g[j];
        else if(vis[j]==1)
        {
            if(c[r]==c[j])++m1,la=k,++g[r];else ++f[r];
        }
        else if(c[r]==c[j])--g[r];else --f[r];
    }
    vis[r]=2;
}
int main()
{
    scanf("%d%d",&n,&m);
    int i,x,y;
    fo(i,1,m)
    {
        scanf("%d%d",&x,&y);
        e[x].pb(y),e[y].pb(x),v[x].pb(i),v[y].pb(i);
    }
    fo(i,1,n)if(!vis[i])dfs(i,0);
    if(m1==0)fo(i,1,m)ans[++tot]=i;
    else
    {
        if(m1==1)ans[++tot]=la;
        fo(i,1,n)if(g[i]==m1&&!f[i])ans[++tot]=fa[i];
        sort(ans+1,ans+1+tot);
    }
    printf("%d\n",tot);
    if(tot)printf("%d",ans[1]);
    fo(i,2,tot)printf(" %d",ans[i]);
    if(tot)printf("\n");
    return 0;
}