#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;
const int u=20010;
int ver[u],edge[u],next[u],head[u],c[u],v[u],f[u],d[u],fa[u],ans[u],n,m,i,tot,x,y,cnt,err,t;
void add(int x,int y)
{
    ver[++tot]=y,next[tot]=head[x],head[x]=tot;
}
void dfs(int x,int k)
{
    c[x]=k,v[x]=1;
    for(int i=head[x],y;i;i=next[i])
        if(fa[x]!=(i^1))
            if(!v[y=ver[i]]) fa[y]=i,dfs(y,1-k),f[x]+=f[y],d[x]+=d[y];
            else if(v[y]==1) if(c[x]==c[y]) cnt++,err=i,f[x]++; else d[x]++;
            else if(c[x]==c[y]) f[x]--; else d[x]--;
    v[x]=2;
}
int main()
{
    cin>>n>>m;
    for(tot=i=1;i<=m;i++)
    {
        scanf("%d%d",&x,&y);
        add(x,y),add(y,x);
    }
    for(i=1;i<=n;i++)
        if(!v[i]) dfs(i,0);
    if(!cnt) for(i=1;i<=m;i++) ans[++t]=i;
    else{
        if(cnt==1) ans[++t]=err>>1;
        for(i=1;i<=n;i++)
            if(f[i]==cnt&&!d[i]) ans[++t]=fa[i]>>1;
    }
    sort(ans+1,ans+t+1);
    cout<<t<<endl;
    for(i=1;i<=t;i++) printf("%d ",ans[i]);
    return 0;
}