#include<cstdio>
#include<vector>
#include<algorithm>
#define N 100010
#define pb push_back
#define rep(i,n) for(int i=0;i<n;i++)
#define For(i,n) for(int i=1;i<=n;i++)
using namespace std;
int n,m,odd,who,a[N],b[N],d[N],f[N],g[N],h[N];
vector <int> e[N],ans;

void dfs(int x,int fa_id)
{
	rep(i,e[x].size())
	{
		int id=e[x][i],v=(a[id]!=x)?a[id]:b[id];
		if (id==fa_id||d[x]<d[v]) continue;
		if (!d[v])
		{
			h[v]=id;
			d[v]=d[x]+1;
			dfs(v,id);
			f[x]+=f[v];
			g[x]+=g[v];
		}
		else
		{
            if ((d[x]-d[v])&1)
		    {
                 g[x]++;g[v]--;
		    }
		    else
		    {
			    f[x]++;f[v]--;
			    odd++;who=id;
		    }
	    }
    }
}
int main()
{
	scanf("%d%d",&n,&m);
	For(i,m)
	{
		scanf("%d%d",&a[i],&b[i]);
		e[a[i]].pb(i);
		e[b[i]].pb(i);
	}
	For(i,n)
	    if (!d[i]) {d[i]=1;dfs(i,0);}
	if (!odd)
	{
		printf("%d\n",m);For(i,m) printf("%d ",i);
	}
	else
	{
		if (odd==1) ans.pb(who);
		For(i,n)
		{
		    if (f[i]==odd && !g[i])
				ans.pb(h[i]);
		}
        sort(ans.begin(),ans.end());
		printf("%d\n",ans.size());
		rep(i,ans.size())
		    printf("%d ",ans[i]);
        
	}
	return 0;
}