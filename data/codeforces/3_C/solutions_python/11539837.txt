#!/usr/bin/env python
# -*- coding: utf-8 -*-

t = []
cross = 0
nought = 0
dots = 0
for _ in range(3):
    fila = raw_input()
    t.append(fila)
    dots += fila.count('.')
    cross += fila.count('X')
    nought += fila.count('0')

dia_izq = ''.join(t[i][i] for i in range(3))
dia_der = ''.join(t[i][2 - i] for i in range(3))
cols = map(lambda x: ''.join(t[i][x] for i in range(3)), range(3))

pos = [dia_izq, dia_der] + cols + t
x = sum(1 if e == 'X' * 3 else 0 for e in pos)
y = sum(1 if e == '0' * 3 else 0 for e in pos)

if dots > 0:
    if dots == 9:
        print 'first'
    elif nought > cross or cross > nought + 1 or (x > 1 and y > 1):
        print 'illegal'
    else:
        if cross == nought:
            if x == 0 and y == 0:
                print 'first'
            elif x == 0 and y > 0:
                print 'the second player won'
            else:
                print 'illegal'
        elif cross == nought + 1:
            if x > 0 and y == 0:
                print 'the first player won'
            elif x == 0 and y == 0:
                print 'second'
            else:
                print 'illegal'
        else:
            print 'illegal'

else:
    # esta lleno
    if cross == 5 and nought == 4:
        if x > 1 and y > 1:
            print 'illegal'
        elif x + y == 0:
            print 'draw'
        elif x > 0 and y == 0:
            print 'the first player won'
        elif y > 0 and x == 0:
            print 'the second player won'
        else:
            print 'illegal'
    else:
        print 'illegal'
