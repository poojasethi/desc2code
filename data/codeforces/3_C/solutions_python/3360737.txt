#!/usr/bin/env python2
# author Jay

import sys

searchpath=[]
for x in xrange(0, 3):
	searchpath.append([3*x, 3*x+1, 3*x+2])
	searchpath.append([x, x+3, x+6])
searchpath.append([2,4,6])
searchpath.append([0,4,8])

def isWin(a, m):
	for x in searchpath:
		s = sum(a[i] for i in x)
		if s==m:
			return True
	return False

def main():
	infile = sys.stdin
	outfile = sys.stdout
	blacklen = 0
	whitelen = 0
	chess=[]
	for x in xrange(0, 3):
		for y in infile.readline():
			if y=='X':
				chess.append(1)
				blacklen+=1
			elif y=='0':
				chess.append(-1)
				whitelen+=1
			elif y=='.':
				chess.append(0)
	
	result='draw'
	wwin = isWin(chess, -3)
	bwin = isWin(chess, 3)
	if blacklen<whitelen or (bwin and wwin) or blacklen-whitelen>1:
		result='illegal'
	elif blacklen==whitelen:
		if bwin:
			result = 'illegal'
		elif wwin:
			result='the second player won'
		elif blacklen+whitelen!=9:
			result='first'
	else:
		if wwin:
			result = 'illegal'
		elif bwin:
			result='the first player won'
		elif blacklen+whitelen!=9:
			result='second'
	
	outfile.write(result)

if __name__ == '__main__':
	main()