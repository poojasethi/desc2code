b = [raw_input() for i in xrange(3)]
a = ''.join(b)
b += [a[i::3] for i in xrange(3)] + [a[::4], a[2:8:2]]

x, o = a.count('X'), a.count('0')
w = ['XXX' in b, '000' in b]

if x == o: z = 0
elif x == o + 1: z = 1
else: z = -1
if z >= 0:
	if (w[0] and w[1]) or (w[z] and not w[z ^ 1]): z = -1
	elif w[z ^ 1]: z ^= 3
	elif x + o == 9: z = -2

print ['first', 'second', 'the first player won','the second player won', 'draw', 'illegal'][z]