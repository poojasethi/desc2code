a,b,c = [raw_input() for i in range(3)]
p = ["first", "second"]

nX = (a+b+c).count("X")
n0 = (a+b+c).count("0")
d = nX - n0

m = [a,b,c, a[0]+b[1]+c[2], a[2]+b[1]+c[0]] + list(map("".join, zip(a,b,c)))
w = ("XXX" in m) + 2*("000" in m) - 1

if d not in [0,1] or w > 1 or d == w:
    print "illegal"
elif w >= 0:
    print "the %s player won" % p[w]
elif nX + n0 == 9:
    print "draw"
else:
    print p[d]	
