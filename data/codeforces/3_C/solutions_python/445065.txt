#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys

def test(lst, c):
    for i in xrange(3):
        if lst[i][0] == lst[i][1] and lst[i][0] == lst[i][2]:
            if lst[i][0] == c:
                return True
    for i in xrange(3):
        if lst[0][i] == lst[1][i] and lst[0][i] == lst[2][i]:
            if lst[0][i] == c:
                return True
    if lst[0][0] == lst[1][1] and lst[2][2] == lst[1][1]:
        if lst[1][1] == c:
                return True
    if lst[2][0] == lst[1][1] and lst[0][2] == lst[1][1]:
        if lst[1][1] == c:
            return True
    return False

def main():
    lst = [[c for c in e[:-1]] for e in sys.stdin.readlines()]
    fc = reduce(lambda x, y: x + y, lst).count('X')
    sc = reduce(lambda x, y: x + y, lst).count('0')
    if fc == sc or fc-1 == sc:
        fw = test(lst, 'X')
        sw = test(lst, '0')
        if (fw == True and sw == True) or (fc-1 == sc and sw == True) or (fc == sc and fw == True):
            print 'illegal'
            return 0
        if fw == True or sw == True:
            print "the first player won" if fw == True else "the second player won"
            return 0
        if (lst[0]+lst[1]+lst[2]).count('.') == 0:
            print "draw"
            return 0
        print "first" if fc == sc else "second"
    else:
        print 'illegal'
    return 0

if __name__ == '__main__':
    main()
