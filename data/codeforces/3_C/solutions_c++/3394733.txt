#include<iostream>
using namespace std;

#define t(c) if((m[3*i]==c && m[3*i+1]==c && m[3*i+2]==c) ||(m[i]==c && m[i+3]==c && m[i+6]==c) || (m[0]==c &&m[4]==c &&m[8]==c)|| (m[2]==c &&m[4]==c &&m[6]==c))
#define f(i,n) for(int i=0;i<n;i++)
char m[9];
int co=0,cx=0,wx=0,wo=0;

int main()
{
    f(i,9)
    {
        cin>>m[i];
        if(m[i]=='0')co++;
        else if(m[i]=='X')cx++;
    }

    f(i,3)
    {
        t('0') wo=1;
        t('X') wx=1;
    }

    if((wx && cx!=co+1)|| (wo && cx!=co)|| (cx!=co && cx!=co+1)) cout<<"illegal";
    else if(wx && cx==co+1)cout<<"the first player won";
    else if(wo) cout<<"the second player won";
    else if(cx +co==9) cout<<"draw";
    else if(cx==(co+1)) cout<<"second";
    else if( cx==co) cout<<"first";

    return 0;
}
