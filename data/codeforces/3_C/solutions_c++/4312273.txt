#include<iostream>
#include<map>
using namespace std;

string cb;
map<string,string> qp;

bool win(char x,string a)
{
	for(int i=0;i<3;i++) if(a[i*3]==x && a[i*3+1]==x && a[i*3+2]==x) return true;
	for(int i=0;i<3;i++) if(a[i]==x && a[i+3]==x && a[i+6]==x) return true;
	if(a[0]==x && a[4]==x && a[8]==x) return true;
	if(a[2]==x && a[4]==x && a[6]==x) return true;
	return false;
}

void dfs(string a,int t)
{
	if(win('X',a)==true) {qp[a]="the first player won";return;} else
	if(win('0',a)==true) {qp[a]="the second player won";return;} else
	if(t==9) {qp[a]="draw";return;} else
	if(t%2==0) {qp[a]="first";} else {qp[a]="second";}
	for(int i=0;i<9;i++)
	{
		if(a[i]=='.')
		{
			if(t%2==0) a[i]='X'; else a[i]='0';
			dfs(a,t+1);
			a[i]='.';
		}
	}
}

int main()
{
	dfs(".........",0);
	for(int i=0;i<9;i++) {char y;cin>>y;cb+=y;}
	if(qp[cb]!="") cout<<qp[cb]; else cout<<"illegal";
	return 0;
}
