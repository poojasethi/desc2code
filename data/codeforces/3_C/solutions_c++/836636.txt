#include<iostream>
#include<cstdio>
#include<cstring>
using namespace std;
char s[10][10];
int sure(char c)
{
	for(int i=0;i<3;i++){
		if(s[i][0]==c&&s[i][1]==c&&s[i][2]==c) return 1;
		if(s[0][i]==c&&s[1][i]==c&&s[2][i]==c) return 1;
	}
	if(s[0][0]==c&&s[1][1]==c&&s[2][2]==c) return 1;
	if(s[0][2]==c&&s[1][1]==c&&s[2][0]==c) return 1;
	return 0;
}
int main()
{
	int x,y,i,j,k;
	for(i=0;i<3;i++)
		scanf("%s",s[i]);
	x=y=0;
	for(i=0;i<3;i++){
		for(j=0;j<3;j++){
			if(s[i][j]=='X') x++;
			else if(s[i][j]=='0') y++;
		}
	}
	if(x<y||x>y+1){
		printf("illegal\n");
		return 0;
	}
	if(x==y){
		if(sure('X')) printf("illegal\n");
		else if(sure('0')) printf("the second player won\n");
		else printf("first\n");
	}
	else{
		if(sure('0')) printf("illegal\n");
		else if(sure('X')) printf("the first player won\n");
		else if(x+y==9) printf("draw\n");
		else printf("second\n");
	}
	//system("pause");
	return 0;
}