#include<iostream>
using namespace std;
char a[9];
int s1,s2;
bool fun(char t)
{
    if(a[0]==t && a[4]==t && a[8]==t) return true;
    if(a[2]==t && a[4]==t && a[6]==t) return true;
    for(int i=0;i<3;i++)
    {
        if(a[i*3]==t && a[i*3+1]==t && a[i*3+2]==t) return true;
        if(a[i]==t && a[i+3]==t && a[i+6]==t) return true;
    }
    return false;
}

int main()
{
    for(int i=0;i<9;i++)
    {
        cin>>a[i];
        if(a[i]=='0') s1++;
        if(a[i]=='X') s2++;
    }
    if(!(s2==s1 || s2==s1+1)) cout<<"illegal"; 
	else
    if(fun('X')==true && s2!=s1+1) cout<<"illegal"; 
	else
    if(fun('0')==true && s2!=s1) cout<<"illegal"; 
	else
    if(fun('X')==true) cout<<"the first player won"; 
	else
    if(fun('0')==true) cout<<"the second player won"; 
	else
    if(s2+s1==9) cout<<"draw"; 
	else
    if(s2==s1) cout<<"first"; 
	else
    if(s2==s1+1) cout<<"second";
    return 0;   
 } 
