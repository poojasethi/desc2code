#include<iostream>
#include<cstdlib>
using namespace std;
#define t(s) if(a[i*3-2]==s&&a[i*3-1]==s&&a[i*3]==s||a[i]==s&&a[3+i]==s&&a[6+i]==s||a[1]==s&&a[5]==s&&a[9]==s||a[3]==s&&a[5]==s&&a[7]==s)
char a[10];
int main()
{
    int cx=0,co=0,wx=0,wo=0,i;
    for(i=1;i<=9;i++)
    {
            cin>>a[i];
            if(a[i]=='0')co++;
            else if(a[i]=='X')cx++;
    }
    for(i=1;i<=3;i++){t('X')wx=1;t('0')wo=1;}
    if (cx-co>1||co-cx>0||cx==co&&wx||cx==(co+1)&&wo)cout<<"illegal";
    else if(cx==(co+1)&&wx)cout<<"the first player won";
    else if(co==cx&&wo)cout<<"the second player won";
    else if(co+cx==9)cout<<"draw";
    else if (co==cx)cout<<"first";
    else cout<<"second";
    return 0;
}