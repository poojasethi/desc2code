#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
char chess[3][4];
bool gao(char x)
{
	int i;
	for(i=0;i<3;i++)
	{
		if(chess[i][0]==x&&chess[i][1]==x&&chess[i][2]==x)return 1;
		if(chess[0][i]==x&&chess[1][i]==x&&chess[2][i]==x)return 1;
	}
	if(chess[0][0]==x&&chess[1][1]==x&&chess[2][2]==x)return 1;
	if(chess[0][2]==x&&chess[1][1]==x&&chess[2][0]==x)return 1;
	return 0;
}
int main()
{
	int i,j,a=0,b=0;
	for(i=0;i<3;i++)
		scanf("%s",chess+i);
    for(i=0;i<3;i++)
    	for(j=0;j<3;j++)
    		a+=chess[i][j]=='X',b+=chess[i][j]=='0';
    bool f1=gao('X');
    bool f2=gao('0');
    if(a<b||a>b+1||f1&&a==b||f2&&a==b+1)puts("illegal");
    else if(f1)puts("the first player won");
    else if(f2)puts("the second player won");
    else if(a+b==9)puts("draw");
    else if(a==b)puts("first");
    else puts("second");
	return 0;
}
