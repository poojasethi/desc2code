#include <iostream>

using namespace std;

char a[9];

#define won(c) if((a[3*i]==c&&a[3*i+1]==c&&a[3*i+2]==c) || (a[i]==c&&a[i+3]==c&&a[i+6]==c) || (a[0]==c&&a[4]==c&&a[8]==c) || (a[2]==c&&a[4]==c&&a[6]==c))

int main(){
  int cx, co, wx, wo;
  cx = 0;
  co = 0;
  wx = 0; 
  wo = 0;
  int ct = 9;
  while(ct--){
    cin >> a[9-ct-1];
    if(a[9-ct-1]=='X') cx++;
    if(a[9-ct-1]=='0') co++;
  }
  //cout << cx << endl << co << endl;
  for(int i = 0; i < 3; i++){
    won('0') wo=1;
    won('X') wx=1;
  }
  //cout << wo << endl << wx << endl;
  if((wx && cx!=co+1)||(wo && co!=cx)||(cx!=co+1 && cx!=co)) cout << "illegal";
  else if(wx) cout << "the first player won";
  else if(wo) cout << "the second player won";
  else if(co+cx==9) cout << "draw";
  else if(cx == co) cout << "first";
  else cout << "second";
  cout << endl;
}

						 	 				 	  			 		       	