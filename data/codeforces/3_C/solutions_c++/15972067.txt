#include<iostream>
#include<string>
#include<cstring>
#include<cstdlib>
using namespace std;

#define t(c) if(a[3*i]==c&&a[3*i+1]==c&&a[3*i+2]==c||a[i]==c&&a[i+3]==c&&a[i+6]==c||a[0]==c&&a[4]==c&&a[8]==c||a[2]==c&&a[4]==c&&a[6]==c)

char a[9];
int wo,wx,co,cx;

int main()
{
    for(int i=0;i<9;i++)
    {
        cin>>a[i];
        if (a[i]=='0')
            co++; 
        else if( a[i]=='X')
            cx++;
    }
    for(int i=0;i<3;i++)
    {
        t('0')wo=1;
        t('X')wx=1;
    }
    if((wx&&cx!=co+1)||(wo&&cx!=co)||(cx!=co+1&&cx!=co))
        cout<<"illegal"<<endl;
    else if (wx)
        cout<<"the first player won"<<endl;
    else if (wo)
        cout<<"the second player won"<<endl;
    else if (cx+co==9)
        cout<<"draw"<<endl;
    else if (cx==co)
        cout<<"first"<<endl;
    else
        cout<<"second"<<endl;
    return 0;
}
