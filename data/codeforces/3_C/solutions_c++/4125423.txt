#include<iostream>
#define f(c)   if(field[i]==c&&c==field[i+3]&&c==field[i+6]||field [i*3]==c&&c==field[i*3+1]&&c==field [i*3+2]||field[0]==c&&field[4]==c&&field[8]==c||field[2]==c&&field[4]==c&&field[6]==c)
int numx,numo;
using namespace std;
main()
{
    char field[8];
    for(int i=0;i<9;i++)
    {
        cin>>field[i];
        if(field[i]=='X') numx++;
        if(field[i]=='0') numo++;
    }
    int wx=0,wo=0;
    for(int i=0;i<3;i++) f('0') wo=1;
     for(int i=0;i<3;i++) f('X') wx=1;
     if(wx&&numx!=(numo+1)||wo&&numx!=numo||numo!=numx&&numo!=(numx-1)) cout<<"illegal";
     else if(wx) cout<<"the first player won";
     else if (wo) cout<<"the second player won";
     else if((numo+numx)==9) cout<<"draw";
     else if (numx==numo) cout<<"first";
     else cout<<"second";
}
