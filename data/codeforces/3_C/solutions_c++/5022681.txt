#include<iostream>
using namespace std;
#define t(c) if(a[3*i]==c&&a[3*i+1]==c&&a[3*i+2]==c||a[i]==c&&a[i+3]==c&&a[i+6]==c||a[0]==c&&a[4]==c&&a[8]==c||a[2]==c&&a[4]==c&&a[6]==c)
char a[9];
int Q,M,W,Y,i;
int main(){
    for(i=0;i<9;i++){
		cin>>a[i];
		if(a[i]=='0')W++;
		if(a[i]=='X')Y++;
	}
    for(i=0;i<3;i++){
		t('0')Q=1;
		t('X')M=1;
	}
    if((M&&Y!=W+1)||(Q && Y!=W)||(Y!=W+1&&Y!=W))cout<<"illegal";
    else
		if(M)cout<<"the first player won";
		else
			if(Q)cout<<"the second player won";
			else
				if(Y+W==9)cout<<"draw";
				else
					if(Y==W)cout<<"first";
					else cout<<"second";
}