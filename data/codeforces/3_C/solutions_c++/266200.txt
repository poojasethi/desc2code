#include<cstdio>
char s[4][4];
//    Last Change:  2011-01-27 21:06:21
bool win(char c)
{
	for(int i=0;i<3;++i)
	{
		if(s[i][0]==c&&s[i][1]==c&&s[i][2]==c)return 1;
		if(s[0][i]==c&&s[1][i]==c&&s[2][i]==c)return 1;
	}
	if(s[0][0]==c&&s[1][1]==c&&s[2][2]==c)return 1;
	if(s[0][2]==c&&s[1][1]==c&&s[2][0]==c)return 1;
	return 0;
}
int main()
{
	for(int i=0;i<3;++i)
		scanf("%s",s[i]);
	int a=0,b=0;
	for(int i=0;i<3;++i)
		for(int j=0;j<3;++j)
			a+=s[i][j]=='X',b+=s[i][j]=='0';
	bool f1=win('X');
	bool f2=win('0');
	if(a<b||a>b+1||(f1&&f2)||(f1&&a==b)||(f2&&a==b+1))puts("illegal");
	else if(f1)puts("the first player won");
	else if(f2)puts("the second player won");
	else if(a+b==9)puts("draw");
	else if(a==b+1)puts("second");
	else puts("first");
	return 0;
}
