#include<cstdio>
using namespace std;
int o,x,ow,xw;
char c[4][4];
int f(int x,int y,int z) {
    if((x==y&&y==z&&x!='.')) {
        x=='0'?++ow:++xw;
        return 1;
    }
    return 0;
}
int main()
{
    for(int i=0;i<3;++i) {
        gets(c[i]);
        for(int j=0;j<3;++j) {
            if(c[i][j]!='.')c[i][j]=='0'?++o:++x;
        }
    }

    for(int i=0;i<3;i++) {
        f(c[i][0],c[i][1],c[i][2]);
        f(c[0][i],c[1][i],c[2][i]);
    }

    f(c[0][0],c[1][1],c[2][2]);
    f(c[0][2],c[1][1],c[2][0]);

#if 1
    if((xw&&x!=o+1)||(ow&&x!=o)||(x!=o+1&&x!=o))puts("illegal");
    else if(xw)puts("the first player won");
    else if(ow)puts("the second player won");
    else if(x==5&&o==4)puts("draw");
    else if(x==o)puts("first");
    else puts("second");
#endif
    return 0;
}
