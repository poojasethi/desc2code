#include <stdio.h>
#include <iostream>
#include <cstring>
using namespace std;
char a[10];
int p,q,x,y;
int main( ){
	for (int i=0;i<9;i++){
		cin>>a[i];
		if (a[i]=='0') x++;
		if (a[i]=='X') y++;
	}
	for (int i=0;i<3;i++){
		if (a[3*i]=='0' && a[3*i+1]=='0' && a[3*i+2]=='0' ||
			a[i]=='0' && a[i+3]=='0' && a[i+6]=='0' || a[0]=='0' &&
				a[4]=='0' && a[8]=='0' || a[2]=='0' && a[4]=='0' && a[6]=='0')
					p=1;
		if (a[3*i]=='X' && a[3*i+1]=='X' && a[3*i+2]=='X' ||
			a[i]=='X' && a[i+3]=='X' && a[i+6]=='X' || a[0]=='X' &&
				a[4]=='X' && a[8]=='X' || a[2]=='X' && a[4]=='X' && a[6]=='X')
					q=1;
	}
	if ((q && y!=x+1) || (p && y!=x) || (y!=x+1 && y!=x))
		cout<<"illegal"<<endl;
	else if (q)
		cout<<"the first player won"<<endl;
	else if (p)
		cout<<"the second player won"<<endl;
	else if (y+x==9)
		cout<<"draw"<<endl;
	else if (y==x)
		cout<<"first"<<endl;
	else
		cout<<"second"<<endl;
	return 0;
}
