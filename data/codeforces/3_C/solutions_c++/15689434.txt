#include<iostream>
#include<cstring>
#include<bits/stdc++.h>
#define check(c) if(a[3*i]==c&&a[3*i+1]==c&&a[3*i+2]==c || a[i]==c&&a[i+3]==c&&a[i+6]==c || a[0]==c&&a[4]==c&&a[8]==c || a[2]==c&&a[4]==c&&a[6]==c)
using namespace std;
int main()
{

	char a[9];
	int cx=0;
	int c0=0;
	int wx=0;
	int w0=0;
	for(int i=0;i<9;i++)
	{
		char c;
		cin>>c;
		a[i]=c;
		if(c=='X')
		{
		cx++;
		}
		else if(c=='0')
		{	
			c0++;
		}	
	}

	for(int i=0;i<3;i++)
	{
	check('X')
		wx=1;
	check('0')
		w0=1;	
	}
	
		if((wx && cx!=c0+1)||(w0 && cx!=c0)||(cx!=c0+1 && cx!=c0))
		cout<<"illegal"<<endl;
		else if(wx)
		cout<<"the first player won"<<endl;
		else if(w0)
		cout<<"the second player won"<<endl;
		else if(cx+c0==9)
		cout<<"draw"<<endl;
		else if(cx==c0)
		cout<<"first"<<endl;
		else cout<<"second"<<endl;
		

return 0;
}