#include<cstdio>
using namespace std;
int o,x,ow,xw,k;
char c[9];
#define t(x) if(c[3*i]==x&&c[3*i+1]==x&&c[3*i+2]==x || c[i]==x&&c[i+3]==x&&c[i+6]==x || c[0]==x&&c[4]==x&&c[8]==x || c[2]==x&&c[4]==x&&c[6]==x)
inline void f(int x,int y,int z) {
    if((x==y&&y==z&&x!='.'))x=='0'?++ow:++xw;
}
int main()
{
    for(int i=0;i<3;++i) {
        for(int j=0;j<3;++j) {
            c[k]=getchar();
            if(c[k]!='.')c[k]=='0'?++o:++x;
            ++k;
        }
        getchar();
    }
    for(int i=0;i<3;i++){t('0')ow=1;t('X')xw=1;}
#if 1
    if((xw&&x!=o+1)||(ow&&x!=o)||(x!=o+1&&x!=o))puts("illegal");
    else if(xw)puts("the first player won");
    else if(ow)puts("the second player won");
    else if(x==5&&o==4)puts("draw");
    else if(x==o)puts("first");
    else puts("second");
#endif
    return 0;
}
