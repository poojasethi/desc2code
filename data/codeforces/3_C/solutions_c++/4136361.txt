#include<iostream>
#include<map>
using namespace std;
bool w(string a,char b)
{
	for(int i=0;i<3;i++)
	{
		if(a[i*3]==b && a[i*3+1]==b && a[i*3+2]==b)return 1;
		if(a[i]==b && a[i+3]==b && a[i+6]==b)return 1;
	}
	if(a[0]==b && a[4]==b && a[8]==b)return 1;
	if(a[2]==b && a[4]==b && a[6]==b)return 1;
	return 0;
}
map <string,string> a;
string g=".........";
void s(int t)
{
	if(w(g,'X'))
	{
		a[g]="the first player won";
		return;
	}
	if(w(g,'0'))
	{
		a[g]="the second player won";
		return;
	}
	if(t==9)
	{
		a[g]="draw";
		return;
	}
	if(t%2==0)a[g]="first";else a[g]="second";
	for(int i=0;i<9;i++)
	{
		if(g[i]=='.')
		{
			if(t%2==0)g[i]='X';else g[i]='0';
			s(t+1);
			g[i]='.';
		}
	}
}
int main()
{
	s(0);
	string x,y,z,v="";
	cin>>x>>y>>z;
	v=x+y+z;
	if(a.find(v)==a.end())cout<<"illegal";else cout<<a[v];
	return 0;
}
