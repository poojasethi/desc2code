#include<iostream>
using namespace std;

char a[9];
int s0,sx;

bool win(char d)
{
    if(a[0]==d && a[4]==d && a[8]==d) return true;
    if(a[2]==d && a[4]==d && a[6]==d) return true;
    for(int i=0;i<3;i++)
    {
        if(a[i*3]==d && a[i*3+1]==d && a[i*3+2]==d) return true;
        if(a[i]==d && a[i+3]==d && a[i+6]==d) return true;
    }
    return false;
}

int main()
{
    for(int i=0;i<9;i++)
    {
        cin>>a[i];
        if(a[i]=='0') s0++;
        if(a[i]=='X') sx++;
    }
    if(!(sx==s0 || sx==s0+1)) cout<<"illegal"; else
    if(win('X')==true && sx!=s0+1) cout<<"illegal"; else
    if(win('0')==true && sx!=s0) cout<<"illegal"; else
    if(win('X')==true) cout<<"the first player won"; else
    if(win('0')==true) cout<<"the second player won"; else
    if(sx+s0==9) cout<<"draw"; else
    if(sx==s0) cout<<"first"; else
    if(sx==s0+1) cout<<"second";
    return 0;   
 } 