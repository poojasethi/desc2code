#include<iostream>
#define tc(c) if((c==map[i]&&c==map[i+3]&&c==map[i+6])||(c==map[3*i]&&c==map[3*i+1]&&c==map[3*i+2])||(c==map[0]&&c==map[4]&&c==map[8])||(map[2]==c&&map[4]==c&&map[6]==c))
///, , , ,  or
using namespace std;
const int mm=16;
char map[mm];
int main()
{ int x=0,o=0,no=0,nx=0;
  for(int i=0;i<9;i++){cin>>map[i];if(map[i]=='X')nx++;if(map[i]=='0')no++;}
  for(int i=0;i<9;i++)
  {
    tc('X')x=1;
    tc('0')o=1;
  }
  if((x&&o)||(nx!=no&&nx!=no+1)||(x&&nx!=no+1)||(o&&nx!=no))cout<<"illegal\n";
  else if(x)cout<<"the first player won\n";
  else if(o)cout<<"the second player won\n";
  else if(nx+no==9)cout<<"draw\n";
  else if(nx==no)cout<<"first\n";
  else cout<<"second\n";
}

	 	      				 		 		 		 	 	