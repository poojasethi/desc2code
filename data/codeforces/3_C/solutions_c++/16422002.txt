#include<iostream>
#include<string>
using namespace std;

char g[55][55];

bool win(char ch) {
	for(int i=0;i<3;i++) {
		if(g[i][0]==ch&&g[i][1]==ch&&g[i][2]==ch) return true;
		if(g[0][i]==ch&&g[1][i]==ch&&g[2][i]==ch) return true;
	}
	if(g[0][0]==ch&&g[1][1]==ch&&g[2][2]==ch) return true;
	if(g[0][2]==ch&&g[1][1]==ch&&g[2][0]==ch) return true;
	return false;
}

string chk() {
	int x=0, o=0;
	for(int i=0;i<3;i++)
		for(int j=0;j<3;j++)
			if(g[i][j]=='X') x++;
			else if(g[i][j]=='0') o++;
	if(x>o+1 || o>x) return "illegal";
	bool winx = win('X'), wino = win('0');
	if(winx && o==x || wino && x>o) return "illegal";
	if(winx) return "the first player won";
	if(wino) return "the second player won";
	if(x+o==9) return "draw";
	if(x==o) return "first";
	return "second";
}

int main() {
	for(int i=0;i<3;i++) cin>>g[i];
	cout<<chk()<<endl;
	
	return 0;
}