#include<cstdio>
#include<cstring>
#include<iostream>
#include<map>
#include<algorithm>

#define ll long long
#define N 100009

using namespace std;
struct BIT{
    int c[N];
    void add(int x,int v){
        for(;x<N;x+=x&-x) c[x]+=v;
    }
    int sum(int x){
        int r=0;
        for(;x;x-=x&-x) r+=c[x];
        return r;
    }
}c1,c2;
int n,a[N];
ll m;
int cnt;
map<int,int> h;
map<int,int>::iterator it;

int main(){
  //  freopen("in.in","r",stdin);
    cin>>n>>m;
    for(int i=1;i<=n;i++) cin>>a[i],h[a[i]]=1;
    for(it=h.begin();it!=h.end();it++)
        it->second=++cnt;
    ll tot=0,res=0;
    for(int i=n;i;i--){
        int p=h[a[i]];
        tot+=c2.sum(p-1);
        c2.add(p,1);
    }
    c2.add(h[a[1]],-1);
    c1.add(h[a[1]],1);
    for(int r=2,l=1,p;r<=n;r++){
        while(tot<=m&&l+1<r){
            l++;
            p=h[a[l]];
            tot+=l-1-c1.sum(p)+c2.sum(p-1);
            c1.add(p,1);
        }
        res+=l-1+(tot<=m);
        p=h[a[r]];
        tot-=l-c1.sum(p)+c2.sum(p-1);
        c2.add(p,-1);
    }
    cout<<res<<endl;
}
