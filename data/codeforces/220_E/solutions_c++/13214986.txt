#include <bits/stdc++.h>

#define int long long

using namespace std;

const int inf = 100000000000000000;

int n,i,j;
int  k,a[200000],b[200000];
map<int,int> mp;
int idx[200000],idx1[200000];

int lb(int x){return x&(-x);}
int query(int l,int idx[]){
  if(l==0) return 0;
  int ans=0;
  for(int i=l;i>0;i-=lb(i)) ans+=idx[i];
  return ans;
}
void insert(int l,int w,int idx[]){
  for(int i=l;i<=n;i+=lb(i)) idx[i]+=w;
}
main(){
  cin >> n >> k;
  for(i=1;i<=n;i++){
    cin >> a[i];
    b[i]=a[i];
  }
  int l=0;
  sort(b+1,b+n+1);
  for(i=1;i<=n;i++){
    if(b[i]!=b[i-1]) mp.insert(make_pair(b[i],++l));
  }
  for(i=1;i<=n;i++) a[i]=mp[a[i]];
  int sum=0;
  int ans=0;
  for(j=n;j>=1;j--){
    insert(a[j],1,idx);
    sum+=query(a[j]-1,idx);
  }
  j=1;
  for(i=1;i<=n;i++){
    sum+=query(a[i]-1,idx)+(i-1)-query(a[i],idx1);
    insert(a[i],1,idx1);
    while(j<=n){
      if(sum<=k) break;
      sum-=(i-query(a[j],idx1)+query(a[j]-1,idx));
      insert(a[j],-1,idx);
      j++;
    }
    ans+=min(n-j+1,n-i);
  }
  cout << ans << endl;
}
