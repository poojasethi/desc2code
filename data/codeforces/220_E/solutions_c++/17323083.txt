#include<bits/stdc++.h>

using namespace std;

#define N 200005LL

map < int , int > M;

long long F[2][N],P[N],k,asd,t;

int A[N],B[N],m,n,i,j;

int qry(int x, bool h){
	t = 0;
	for(; x ; x -= x & -x)
		t += F[h][x];
	return t;
}

void up(int x, bool h, int h2){
	for(; x <= m ; x += x & -x)
		F[h][x] += h2;
}
int main(){

	cin >> n >> k;

	for(i=1;i<=n;i++){
		cin >> A[i];
		B[i] = A[i];
	}

	sort(B+1 , B+n+1);

	for(i=1;i<=n;i++)
		if(B[i] > B[i-1])
			M[ B[i] ] = ++m;

	for(i=n; i>1 ;i--){
		up(M[ A[i] ],1,1);
		P[i] = P[i+1] + qry(M[ A[i] ]-1,1);
	}
	j = 2;
	for(i=1;i<n;i++){

		up(M[ A[i] ],0,1);

		k -= qry(m,0) - qry(M[ A[i] ],0);
		k -= qry(M[ A[i] ]-1,1);

		while(j <= i){
			k += qry(m,0) - qry(M[ A[j] ],0);
			up(M[ A[j++] ],1,-1);
		}

		while(k - P[j] < 0 && j <= n){
			k += qry(m,0) - qry(M[ A[j] ],0);
			up(M[ A[j++] ],1,-1);
		}

		asd += n - j + 1;

	}

	cout << asd;
	return 0;
}
