//In the name of God

#include <bits/stdc++.h>
using namespace std;
#define mp make_pair
const int MAXN=1e5+10;
typedef long long lol;
map <int,int> img;
int fen[2][MAXN],a[MAXN],n,l;
vector<int> tmp;
lol tot;

inline void add(int x,int v,int id)
{
  for(;x<=n;x+=x&-x)
    fen[id][x]+=v;
}

inline int get(int x,int id)
{
  int ret=0;
  for(;x;x-=x&-x)
    ret+=fen[id][x];
  return ret;
}

inline void remove(int x)
{
  add(x,-1,1);
  tot-=l-get(x,1);
  tot-=get(x-1,0);

}

int main()
{
  ios::sync_with_stdio(false);
  lol k;
  cin>>n>>k;
  for(int i=0;i<n;i++)
    cin>>a[i],tmp.push_back(a[i]);
  sort(tmp.begin(),tmp.end());
  tmp.resize(unique(tmp.begin(),tmp.end())-tmp.begin());
  for(int i=0;i<tmp.size();i++)
    img[tmp[i]]=i+1;
  for(int i=0;i<n;i++)
    a[i]=img[a[i]];
  lol cntl=0,ans=0;
  for(int i=0;i<n-1;i++)
    {
      cntl+=i-get(a[i],1);
      add(a[i],1,1);
    }
  l=n-2;
  tot+=cntl;
  //cerr<<cntl<<endl;
  for(int i=n-1;i>0;i--)
    {
      while(l>=i)
	remove(a[l]),l--;
      add(a[i],1,0);
      tot+=get(a[i]-1,0);
      tot+=l+1-get(a[i],1);
      //cerr<<l<<" "<<i<<":"<<tot<<endl;
      while(tot>k and l>0)
	remove(a[l]),l--;
      
      if(tot>k)
	break;
      ans+=l+1;
    }
  cout<<ans<<endl;
  return 0;
}
