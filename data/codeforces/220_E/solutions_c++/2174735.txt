//By momo
#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#define N 100010
#define LL long long
using namespace std;

LL na, nb, k, a[N], b[N], i, j;

LL big[N], sml[N];
void insert(LL *dat, LL x, LL d){ while(x > 0 && x <= nb) dat[x] ++, x += d * (x&-x); }
void deLete(LL *dat, LL x, LL d){ while(x > 0 && x <= nb) dat[x] --, x += d * (x&-x); }
LL    query(LL *dat, LL x, LL d){ LL ret = 0; while(x > 0 && x <= nb) ret += dat[x], x += d * (x&-x); return ret; }

int main(){
	
	cin >> na >> k;
	for(i = 0; i < na; i++) cin >> a[i], b[i] = a[i];
	nb = unique(b, b + na) - b; sort(b, b + nb);
	for(i = 0; i < na; i++) a[i] = lower_bound(b, b + nb, a[i])-b+1;
	
	LL cnt = 0;
	for(i = na-1; i >= 0; i--){
		cnt += query(sml, a[i]-1, -1);
		insert(sml, a[i], 1);
	} 
	deLete(sml, a[0], 1);
	insert(big, a[0], -1);

	LL ans = 0;
	for(i = 0, j = 1; i < na && j < na;){
		while((i >= j) || (cnt > k && j < na)){
			cnt -= query(big, a[j]+1,  1);
			cnt -= query(sml, a[j]-1, -1);
			deLete(sml, a[j],  1);
			j++;
		}
		ans += na-j;

		i++;
		cnt += query(big, a[i]+1,  1);
		cnt += query(sml, a[i]-1, -1);
		insert(big, a[i], -1);

	}

	cout << ans << endl;
}
