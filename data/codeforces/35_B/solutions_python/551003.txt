#!/usr/bin/env python
# -*- coding: utf-8 -*-
import sys

sys.stdin = open('input.txt', 'r')
sys.stdout = open('output.txt', 'w')

n, m, k = map(int, sys.stdin.readline().split())
shelving = [[False]*m for _ in xrange(n)]
n -= 1
m -= 1
objs = dict()
for _ in xrange(k):
    args = sys.stdin.readline().split()
    if args[0] == '+1':
        x, y = map(lambda x: int(x) - 1, args[1:-1])
        while shelving[x][y]:
            y += 1
            if y > m:
                y = 0
                x += 1
                if x > n:
                    break
        if x <= n and y <= m:
            shelving[x][y] = True
            objs[args[3]] = (x, y)
    else:
        try:
            obj = objs.pop(args[1])
            shelving[obj[0]][obj[1]] = False
            sys.stdout.write(' '.join(map(lambda x: str(x+1), obj)) + '\n')
        except KeyError:
            sys.stdout.write('-1 -1\n')
