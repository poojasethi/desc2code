#!/usr/bin/python

cin = open("input.txt", "r")
cout = open("output.txt", "w")

n, m, k = map(int, cin.readline().split())
ware = [False] * n * m
mp = {}
while k > 0:
	k = k - 1
	line = cin.readline().split()
	if line[0] == "+1":
		x, y, name = int(line[1]) - 1, int(line[2]) - 1, str(line[3])
		p = x * m + y
		while p < n * m:
			if not ware[p]:
				ware[p] = True
				mp[name] = p
				break
			else:
				p = p + 1
	else:
		name = line[1]
		if mp.has_key(name):
			p = mp.get(name)
			cout.write(str(p / m + 1) + " " + str(p % m + 1) + "\n")
			ware[p] = False
			del mp[name]
		else:
			cout.write("-1 -1\n")
cin.close()
cout.close()
