#! /usr/bin/python

from sys import stdin

if __name__=='__main__':
    inputfile=open('input.txt','r')
    outputfile=open('output.txt','w')
    n,m,k=map(int,inputfile.readline().split())
    grid=[[False for i in xrange(m)] for j in xrange(n)]
    loc={}
    #print grid
    for query in xrange(k):

        line=inputfile.readline().split()
        if line[0]=="+1":
            t,x,y,iden=line
            t=int(t)
            x=int(x)-1
            y=int(y)-1
        else:
            t,iden=line
            t=int(t)

        if t==+1:
            found=False
            answer=(-1,-1)
            for i in xrange(x,n):
                if found:
                    break
                if i==x:
                    sc=y
                else:
                    sc=0
                for j in xrange(sc,m):
                    found=found or not grid[i][j]
                    if found:
                        answer=(i+1,j+1)
                        grid[i][j]=True
                        break
            if found:
                loc[iden]=answer
            else:
                loc[iden]=(-1,-1)
               
        else:
            #print grid
            answer=loc.get(iden,(-1,-1))
            outputfile.write("%d %d\n"%answer)
            if answer!=(-1,-1):
                grid[answer[0]-1][answer[1]-1]=False
                loc[iden]=(-1,-1)
    outputfile.close()
