#include<fstream>
#include<string>
#include<set>
#include<map>
using namespace std;
typedef pair<int,int> ii;
map<string,ii> pos;
set<ii> shelve;
int main() {
	ifstream in("input.txt");
	ofstream out("output.txt");
	int N,M,K;
	in>>N>>M>>K;
	for(int i=1;i<=N;i++) {
		for(int j=1;j<=M;j++) {
			shelve.insert(ii(i,j));
		}
	}
	string t,n;
	int x,y;
	for(int i=0;i<K;i++) {
		in>>t;
		if(t[0]=='+') {
			in>>x>>y>>n;
			set<ii>::iterator it=shelve.lower_bound(ii(x,y));
			if(it==shelve.end()) continue;
			pos[n]=*it;
			shelve.erase(it);
		} else {
			in>>n;
			if(pos.count(n)==0) {
				out<<-1<<' '<<-1<<'\n';
				continue;
			}
			ii t=pos[n];
			out<<t.first<<' '<<t.second<<'\n';
			pos.erase(n);
			shelve.insert(t);
		}
	}
}
