#include<cstdio>
#include<cstring>
struct S{
	char na[12];
}sh[32][32];
bool v[32][32];
int main(){
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	int n,m,k,a,b,i,j,p;
	char s[3],s1[12];
	while(~scanf("%d%d%d",&n,&m,&k)){
		memset(v,0,sizeof(v));
		while(k--){
			scanf("%s",s);
			if(s[0]=='+'){
				scanf("%d%d%s",&a,&b,s1);
				p=b;
				for(i=a;i<=n;i++){
					for(j=p;j<=m;j++)if(!v[i][j]){v[i][j]=1;strcpy(sh[i][j].na,s1);break;}
					if(j>m)p=1;
					else break;
				}
			}else{
				scanf("%s",s1);
				bool f=0;
				for(i=1;i<=n;i++){
					for(j=1;j<=m;j++)if(v[i][j]&&strcmp(sh[i][j].na,s1)==0){printf("%d %d\n",i,j);f=1;v[i][j]=0;break;}
					if(f)break;
				}
				if(!f)puts("-1 -1");
			}
		}
	}
	return 0;
}
	 	  	  		  							  		 		