#include <cstdio>
#include <string>
using namespace std;

FILE *fin,*fout;

int R,C,N,op,a,b;
bool found;
string uid[31][31];
char inp[20];

int main()
{
	fin=fopen("input.txt","r");
	fout=fopen("output.txt","w");
	fscanf(fin,"%d %d %d",&R,&C,&N);
	while(N--)
	{
		fscanf(fin,"%d", &op);
		if(op > 0)
		{
			fscanf(fin, "%d %d %s", &a, &b, inp);
			while(uid[a][b] != "")
			{
				b++;
				if(b > C)
				{
					a++;
					b = 1;
				}
				if(a > R)
					break;
			}
			if(a <= R)
				uid[a][b] = inp;
		}
		else
		{
			fscanf(fin, "%s", inp);
			found = false;
			for(int i = 1; i <= R; i++)
				for(int j = 1; j <= C; j++)
					if(uid[i][j] == inp)
					{
						uid[i][j] = "";
						fprintf(fout, "%d %d\n", i, j);
						found = true;
					}
			if(!found)
				fprintf(fout, "-1 -1\n");
		}
	}
	fclose(fin);
	fclose(fout);
}
