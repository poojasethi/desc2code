#include <iostream>
#include <string>
#include <vector>
#include <map>
#include <cstdio>
#include <cstdlib>

using namespace std;

int main()
{
  freopen("input.txt","r",stdin);
  freopen("output.txt","w",stdout);
  int n,m,k;
  cin>>n>>m>>k;
  vector<string> v(n*m,"");
  map<string,int> posicion;
  for (int cas=0;cas<k;cas++) {
    char c,c2;
    cin>>c>>c2;
    if (c=='+') {
      int i,j;
      string id;
      cin>>i>>j>>id;
      i--;j--;
      int pos=i*m+j;
      while (pos<n*m and v[pos]!="") pos++;
      if (pos<n*m) {
	posicion[id]=pos;
	v[pos]=id;
      }
    } else {
      string id;
      cin>>id;
      if (posicion.count(id)) {
	cout<<1+posicion[id]/m<<" "<<1+posicion[id]%m<<endl;
	v[posicion[id]]="";
	posicion.erase(id);
      } else {
	cout<<"-1 -1"<<endl;
      }
    }
  }
}
