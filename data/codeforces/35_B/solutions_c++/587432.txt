#include <iostream>
#include <cstdio>
#include <string>
#include <string.h>
#include <algorithm>
using namespace std;

string a[1005],s,s2;

int main(){ 
    freopen("input.txt","r",stdin); 
    freopen("output.txt","w",stdout);
    int n,m,k,p1,p2;
    scanf("%d%d%d",&n,&m,&k);
    for (int i=0;i<=n*m;++i) a[i]="";
    for (int i=1;i<=k;++i){
        cin >> s2;
        if (s2[0]=='+'){
            cin >> p1 >> p2 >> s;
            for (int i=(p1-1)*m+p2-1;i<n*m;++i)
             if (a[i]==""){ 
                a[i]=s;
                break;
            }
        }else{
            cin >> s;
            p1=0;
            for (int i=0;i<n*m;++i)
             if (a[i]==s){
                a[i]=""; 
                printf("%d %d\n",i/m+1,i%m+1);
                p1=1;
                break;
            }
            if (p1==0) printf("-1 -1\n");
        }
    }
    return 0;
}
