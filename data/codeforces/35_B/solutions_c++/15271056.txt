#include <bits/stdc++.h>
using namespace std;
const int N = 40 ;
const int K = 2e3+10 ;
string t[N][N] ;
int n , m , k ;
ifstream in ("input.txt" ) ;
ofstream out ("output.txt") ;
void insert (int x , int y , string a)
{
	int i , j ;
	j =  y ;
	for (i = x ; i< n+1 ; ++i)
	{
		for ( ; j < m+1 ;++j)
			if (t[i][j].size() == 0)
			{
				t[i][j] = a ;
				return ;
			}
		j = 1 ;
	}
}
void pop (string a)
{
	for (int i = 1 ; i < n+1 ; ++i)
		for (int j = 1 ; j < m+1; ++j)
			if (t[i][j] == a)
			{
				out << i << " " << j << endl ;
				t[i][j] = "" ;
				return ;
				
			}
	out << "-1 -1\n" ; 
}
int main ()
{
	in >> n >> m >> k ;
	string help1 ; int x,y;
	for (int i = 0 ; i<k ; ++i)
	{
		in >> help1 ;
		if (help1 == "-1")
		{
			in >> help1 ;
			pop (help1) ;
		}
		else 
		{
			in >> x >> y >> help1 ;
			insert (x,y,help1) ;
		}
	}
}

    		 	 	   			   	 		 	 				