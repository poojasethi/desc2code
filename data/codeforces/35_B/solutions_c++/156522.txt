#include<iostream>
#include<algorithm>
#include<fstream>
using namespace std;

ifstream fin("input.txt");
ofstream fout("output.txt");

#define cin fin
#define cout fout

const int maxn = 32;
bool b[maxn][maxn];
string s[maxn][maxn];
int n, m, k;

int main(){
	cin >> n >> m >> k;
	for(int q = 0; q < k; q++){
		int t, x, y;
		string w;
		cin >> t;
		if(t == 1){
			cin >> x >> y >> w;
			for( ; x <= n; x++){
				for( ; y <= m; y++)
					if(b[x][y] == false){
						//cerr << "PUTNG " << w << " IN " << x << " " << y << endl;
						b[x][y] = true;
						s[x][y] = w;
						goto hell;
					}
				y = 1;
			}
		}
		else {
			string w;
			cin >> w;
			for(int i = 1 ; i <= n ; i++)
				for(int j = 1; j <= m ; j++)
					if(b[i][j] && s[i][j] == w){
						b[i][j] = false;
						cout << i << " " << j << endl;
						goto hell;
					}
			cout << "-1 -1" << endl;
		}
		hell:;
	}			
	return 0;
}
