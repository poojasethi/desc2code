//In the Name of God
#include <iostream>
#include <vector>
#include <fstream>
#include <algorithm>
#include <map>

using namespace std;
ifstream fin("input.txt");
ofstream fout("output.txt");

const int maxn = 50;
int n , m , k;
bool mark[maxn][maxn];
map <string , int> X , Y;

int main(){
  fin >> n >> m >> k;
  for(int i = 0 ; i < k ; i++){
    int x , y;
    string id , tmp;
    fin >> tmp;
    if(tmp[0] == '+'){
      fin >> x >> y >> id;
      int curx = x , cury = y;
      while(curx <= n && mark[curx][cury]){
	cury++;
	if(cury == m + 1){
	  curx++;
	  cury = 1;
	}
      }
      if(curx <= n){
	mark[curx][cury] = true;
	X[id] = curx;
	Y[id] = cury;
      }
    }
    else{
      fin >> id;
      if(X[id] == 0)
	fout << -1 << ' ' << -1 << endl;
      else
	fout << X[id] << ' ' << Y[id] << endl;
      mark[X[id]][Y[id]] = false;
      X[id] = Y[id] = 0;
    }
  }
  return 0;
}
