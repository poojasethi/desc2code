#include<iostream>
#include<cstdio>
#include<cstring>
#include<string>
using namespace std;
int n,m,k;
string s[40][40];
void next(int &x,int &y)
{
	y++;
	if (y>m)
	{
		x++;y-=m;
	}
}
int main()
{
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	cin>>n>>m>>k;
	for (int i=1;i<=k;++i)
	{
		char ss[10];
		scanf("%s",ss);
		if (ss[0]=='+')
		{
			int x,y;
			string sk;
			scanf("%d%d",&x,&y);
			cin>>sk;
			while (s[x][y].length()>0&&x<=n) next(x,y);
			if (x<=n) s[x][y]=sk;
		}
		else
		{
			int xx=-1,yy=-1;
			string sk;
			cin>>sk;
			for (int i=1;i<=n;++i)
				for (int j=1;j<=m;++j)
					if (s[i][j]==sk)
					{
						xx=i;yy=j;
					}
			if (xx!=-1)
			s[xx][yy].clear();
			cout<<xx<<" "<<yy<<endl;
		}
	}
	return 0;
}
   	      	      								