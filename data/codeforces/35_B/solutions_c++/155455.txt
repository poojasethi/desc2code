#include <iostream>
#include <stdio.h>
using namespace std;
string a[1005],s;
int main(){ freopen("input.txt","r",stdin); freopen("output.txt","w",stdout);
	int n,m,k,L,p,x,y,o;
	while(cin>>n>>m>>k){
		L=n*m; for(p=0;p<L;p++) a[p]="";
		while(k--){
			cin>>o;
			if(o==1){
				cin>>x>>y>>s;
				p=(x-1)*m+(y-1);
				for( ;p<L;p++) if(a[p]=="") break;
				
				if(p<L) a[p]=s;
			} else
			if(o==-1){
				cin>>s;
				for(p=0;p<L;p++) if(a[p]==s) break;
				if( p<L ){
					a[p]=""; y=p%m; x=p/m;
					cout<<x+1<<" "<<y+1<<endl;
				}
				else cout<<-1<<" "<<-1<<endl;
			}
		}
	}
	return 0;
}
