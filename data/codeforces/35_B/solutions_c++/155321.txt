#include <iostream>
#include <fstream>
#include <map>

using namespace std;

int main(int argc, char **argv)
{
	freopen("input.txt", "r", stdin);
	freopen("output.txt", "w", stdout);
	int n, m, k, N;
	int x, y;
	int op;
	string id;
	cin >> n >> m >> k;
	N = n * m;
	bool full[N];
	map<string, int> mapping;
	for (int i = 0; i < N; i++)
		full[i] = false;
	for (int i = 0; i < k; i++) {
		cin >> op;
		if (op > 0) {
			cin >> x >> y >> id;
			for (int j = (x-1) * m + (y-1); j < N; j++)
				if (!full[j]) {
					full[j] = true;
					mapping[id] = j;
					break;
				}
		} else {
			cin >> id;
			map<string, int>::iterator it = mapping.find(id);
			if (it == mapping.end()) {
				cout << -1 << ' ' << -1 << endl;
			} else {
				full[it->second] = false;
				mapping.erase(it);
				cout << it->second / m + 1 << ' ' << it->second % m + 1 << endl;
			}
		}
		
	}
		
	return 0;
}

