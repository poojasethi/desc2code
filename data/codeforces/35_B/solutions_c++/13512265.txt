#include <fstream>
#include <string>
using namespace std;
ifstream fin;
ofstream fout;
int main()
{
	fin.open("input.txt");
	fout.open("output.txt");
	int n,m,k;
	fin >> n >> m >> k;
	string s[35][35];
	for(int i1 = 0;i1<k;i1++)
	{
		int p1;
		fin >> p1;
		if(p1 == 1)
		{
			int x,y;
			string name;
			fin >> x >> y >> name;
			while(s[x][y] != "")
			{
				y++;
				if(y>m)
				{
					y = 1;
					x++;
				}
				if(x>n) break;
			}
			if(x>n) continue;
			s[x][y] = name;
		}
		else
		{
			string name;
			fin >> name;
			int x = -1,y = -1;
			for(int i = 1;i<=n;i++)
			{
				if(x!=-1 && y!=-1)break;
				for(int j = 1;j<=m;j++)
				if(s[i][j] == name)
				{
					x = i;
					y = j;
					s[i][j] = "";
					break;
				}
			}
			fout << x << " " << y << endl;
		}
	}
	
	return 0;
}
	   	    	  		 					  		 	 	 	