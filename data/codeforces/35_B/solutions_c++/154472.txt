#include<iostream>
#include<cstdio>
#include<cmath>
#include<cstring>
#include<cstdlib>
#include<vector>
#include<map>
#include<set>
#include<algorithm>
#include<list>
#include<sstream>
#include<queue>
#include<complex>
#include<fstream>

using namespace std;

int main(){
	ifstream ifs;
	ofstream ofs;
	ifs.open("input.txt");
	ofs.open("output.txt");
	int n,m,k;
	ifs>>n>>m>>k;
	string tmp[100][100];
	for(int i=0;i<k;i++){
		string ttt;int s,t;string tt;
		ifs>>ttt;
		if(ttt[0]=='+'){
			ifs>>s>>t>>tt;
			while(tmp[s][t]!=""){
				t++;
				if(t==m+1){
					t=1;s++;
				}
			}
			if(s==n && t==m+1)continue;
			else tmp[s][t]=tt;
		}
		else{
			ifs>>tt;
			int f=0;
			for(int u=0;u<=n;u++){
				for(int r=0;r<=m;r++){
					if(tmp[u][r]==tt){
						ofs<<u<<' '<<r<<endl;
						f=1;
						tmp[u][r]="";
					}
				}
			}
			if(f==0)ofs<<"-1 -1"<<endl;
		}
	}

	return 0;
}
