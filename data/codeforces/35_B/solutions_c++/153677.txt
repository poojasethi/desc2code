#include <stdio.h>
#include <iostream>
#include <string>
using namespace std;

string a[32][32];

int main(void)
{
	freopen("input.txt", "rt", stdin);
#ifndef __LOCAL__
	freopen("output.txt", "wt", stdout);
#endif
	//
	int n, m, k;
	cin >> n >> m >> k;
	while (k--) {
		int op;
		string id;
		cin >> op;
		if (op == 1) {
			int x, y;
			cin >> y >> x >> id;
			bool done = false;
			for (int j = y; j <= n && !done; j++)
				for (int i = (j == y ? x : 1); i <= m; i++) {
					if (a[j][i] != "") continue;
					a[j][i] = id;
					done = true;
					break;
				}
		} else {
			bool found = false;
			cin >> id;
			for (int j = 1; j <= n && !found; j++) for (int i = 1; i <= m; i++)
				if (a[j][i] == id) {
					found = true;
					cout << j << " " << i << endl;
					a[j][i] = "";
					break;
				}
			if (!found) cout << "-1 -1\n";
		}
	}
	return 0;
}
