#include<iostream>
#include<cstdio>
#include<string.h>
#include<string>

using namespace std;


int main() {
	int a,b,c, q, i, j;
	string id;
	freopen("input.txt", "r", stdin);
	freopen("output.txt", "w", stdout);
	scanf("%d %d %d", &a, &b, &c);
	string M[a+1][b+1];
	while(c--) {
		scanf("%d\n", &q);
		if(q == 1) {
			scanf("%d %d", &i, &j);
			cin >> id;
			int ok = 0;
			for(int ii = i; ii <= a && !ok; ii++) {
				for(int jj = ii == i ? j : 1; jj <= b && !ok; jj++) {
					if(M[ii][jj] == "") {
						M[ii][jj] = id;
						ok = 1;
					}
				}
			}
		} else {
			cin >> id;
			int ok = 0;
			for(int ii = 1; ii <= a && !ok; ii++) {
				for(int jj = 1; jj <= b && !ok; jj++) {
					if(M[ii][jj] == id) {
						M[ii][jj] = "";
						i = ii;
						j = jj;
						ok = 1;
					}
					
				}
			}
			if(ok == 0) {
				printf("%d %d\n", -1, -1);
			
			} else {
				printf("%d %d\n", i, j);
			}
		}
	}
	return 0;
}
