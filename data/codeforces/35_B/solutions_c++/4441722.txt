#include <iostream>
#include <cstdlib>
#include <stdio.h>
#include <cstring>
#include <utility>
#include <map>

#define mp make_pair
#define f first
#define s second

using namespace std;

int n,m,k,x,y,used[44][44];
string st,id;
map < string, pair < int ,int > > here;

int main()
{
        freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);

	scanf("%d%d%d",&n,&m,&k);
	for ( int i = 1; i <= k; i++ ) {
		cin >> st;
		if ( st[0] == '+' ) {
			scanf("%d%d",&x,&y);
			cin >> id;
			while( true ) {
				if ( x > n ) { break; }
				if ( !used[x][y] ) { here[id] = mp(x,y); used[x][y] = 1; break; }
				y++;
				if ( y > m ) x++,y = 1;
			}
		}
		else { 
			cin >> id;
			if ( here[id].f ) { printf("%d %d\n",here[id].f,here[id].s); used[here[id].f][here[id].s] = 0; here.erase(id); }
			else puts("-1 -1");
		}
	}
}