#include <bits/stdc++.h>
using namespace std;
int m,n,k,o,x,y;
string s,sh[40][40];
ifstream fin("input.txt");
ofstream fout("output.txt");
int add(int xx,int yy, string s)
{
	int i = xx;
	int j = yy;
	while(sh[i][j]!="" && i<=n)
	{
		++j;
		if(j==m+1)
			j=1,++i;
	}
	sh[i][j]=s;
}
int D(string s)
{
	for(int i=1;i<=n;++i)
		for(int j=1;j<=m;++j)
			if(sh[i][j] ==s)
			{
				fout<<i<<" "<<j<<endl;
				sh[i][j]="";
				return 0;
			}
	fout <<"-1 -1\n";
}

int main()
{
	fin >> n >>m >>k;
	for(int l=0;l<k;++l)
	{
		fin >> o;
		if(o==1)
			fin >> x >>y>>s,add(x,y,s);
		else 
			fin>>s,D(s);
	}
return 0;
}
  			 		 	 		 	  	     		  			