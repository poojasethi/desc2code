#include <iostream>
#include <fstream>
#include <string>
using namespace std;
int n,m,k,kind;
string shelf[30][30];
void add(string s,int x,int y)
{
	bool stop=false;
	if (shelf[x][y]==""){
		shelf[x][y]=s;
	}
	else{
		for (int i=x;i<n&&!stop;++i){
			for (int j=0;j<m&&!stop;++j){
				if (i==x && j<=y) continue;
				else {
					if (shelf[i][j]==""){
						shelf[i][j]=s;
						stop=true;
					}
				}
			}
		}
	}
}
int main()
{
	ifstream fin("input.txt");
	ofstream fout("output.txt");
	string id;
	fin>>n>>m>>k;
	for (int i=0;i<k;++i){
		fin>>kind;
		//cout<<"khar"<<endl;
		if (kind==1){
			int x,y;
			fin>>x>>y>>id;
			add(id,--x,--y);
		}
		else{
			fin>>id;
			int x=-1,y=-1;
			for (int i=0;i<n;++i)
				for (int j=0;j<m;++j)
					if (shelf[i][j]==id){
						shelf[i][j]="";
						x=i+1;
						y=j+1;
						i=n;
						j=m;
					}
			fout<<x<<" "<<y<<endl;
		}
	}
	return 0;
}