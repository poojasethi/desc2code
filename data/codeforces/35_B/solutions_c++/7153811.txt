#include <iostream>
#include <cstdio>
using namespace std;
string s[32][32];
int main()
{
	int n, m, k, x, y;
	string op, drink;
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	cin>>n>>m>>k;
	while (k--) 
	{
		cin>>op;
		if (op=="+1") {
			cin>>x>>y>>drink;
			while (s[x][y]!="" && x<=n) {
				if (++y>m) {
					++x; y=1; 
				}
			}
			if (x<=n) s[x][y]=drink;
		}
		else {
			cin>>drink;
			for (x=1; x<=n&&drink.size(); x++)
			for (y=1; y<=m; y++) {
				if (s[x][y]==drink) {
					cout<<x<<" "<<y<<endl;
					s[x][y]=drink="";
					break;
				}
			}
			if (drink.size()) cout<<-1<<" "<<-1<<endl; 
		}
	}
	return 0;
}
