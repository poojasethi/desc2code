#include <iostream>
#include <stdio.h>

using namespace std;

int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
int n,m,k1;
string a[31*31],st;
cin>>n>>m>>k1;
int i,j;
for (int i1=0;i1<k1;i1++)
 {
   cin>>st;
   if (st[0]=='+')
    { cin>>i>>j>>st;
      for (int k=(i-1)*m+j-1; k<n*m ;k++) if (a[k]=="") {a[k]=st;break;}
    }
    else
    {cin>>st; int f=0;
      for (int k=0; k<n*m ;k++)
         if (a[k]==st)
         {i=k/m+1;j=k%m+1; cout <<i<<' '<<j<<endl;a[k]=""; f=1;break;}
       if (f==0) cout<<"-1 -1"<<endl;
    }

 }
    return 0;
}
	     	   	  	  	  	  		 	