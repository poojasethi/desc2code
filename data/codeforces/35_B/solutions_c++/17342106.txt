#include <iostream>
#include <algorithm>
#include <vector>
#include <queue>
#include <cstdio>
#include <cstring>
#include <map>
#include <set>
using namespace std;
bool v[32][32];
map <string,pair<int,int> > k;
int main()
{
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	int n,m,t;
	cin>>n>>m>>t;
	for(int i=1;i<=t;i++)
	{
	char a;
	int xx,yy;
	string s;
	cin>>a;
	if(a=='+')
	{
	cin>>a;
	//cout<<"true"<<endl;
	cin>>xx>>yy>>s;
	//cout<<xx<<" "<<yy<<" "<<s<<endl;
	bool f=true;
	for(int x=xx;x<=n;x++)
	for(int y=1;y<=m;y++)
	{
	if(x==xx&&y<yy||!f)
	continue;
	if(!v[x][y])
	{
	v[x][y]=true;
	k[s]=make_pair(x,y);
	f=false;
	}
	}
	}
	else {
	cin>>a;
	//cout<<"false"<<endl;
	cin>>s;
	//cout<<s<<endl;
	if(k[s].first)
	cout<<k[s].first<<" "<<k[s].second<<endl;
	else cout<<"-1 -1"<<endl;
	v[k[s].first][k[s].second]=false;
	k[s]=make_pair(-1,-1);
	}
	}
	return 0;
}
