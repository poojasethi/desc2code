#include <fstream>
#include <vector>
#include <map>
#include <string>

int
main()
{
  std::ifstream input("input.txt");
  std::ofstream output("output.txt");
  int n;
  int m;
  int k;
  input >> n >> m >> k;
  std::vector<bool> pos(n * m + 1, false);
  std::map<std::string, int> map;
  for (int i(0); i < k; ++i) {
    int q;
    input >> q;
    if (q == +1) {
      int x;
      int y;
      std::string name;
      input >> x >> y >> name;
      int p((x - 1) * m + (y - 1));
      while (pos[p]) {
        ++p;
      }
      map[name] = p;
      if (p != n * m) {
        pos[p] = true;
      }
    } else {
      std::string name;
      input >> name;
      std::map<std::string, int>::const_iterator itr(map.find(name));
      int const p(itr != map.end() ? itr->second : n * m);
      if (p == n * m) {
        output << "-1 -1\n";
      } else {
        output << (p / m + 1) << ' ' << (p % m + 1) << '\n';
        map.erase(name);
        pos[p] = false;
      }
    }
  }
  return 0;
}
