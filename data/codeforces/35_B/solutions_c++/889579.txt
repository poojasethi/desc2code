#include <cstdio>
#include <cstring>
#include <algorithm>
#include <string>
using namespace std;

string a[1005];
char s[100];

int main(void) {
	int n, m, k;
	freopen("input.txt", "r", stdin);
	freopen("output.txt", "w", stdout);
	scanf("%d%d%d", &n, &m, &k);
	for(int i=0;i<n*m;i++) a[i]="";
	while(k--) {
		int d, x, y;
		scanf("%d", &d);
		if(d==1) {
			scanf("%d%d%s", &x, &y, s);
			for(int i=(x-1)*m+(y-1);i<n*m;i++) {
				if(a[i]=="") { a[i]=string(s); break; }
			}
		} else {
			scanf("%s", s);
			int f=0;
			for(int i=0;i<n*m;i++)
				if(a[i]==s) {
					a[i]="";
					printf("%d %d\n", i/m+1, i%m+1);
					f=1;
					break;
				}
			if(!f) puts("-1 -1");
		}
	}
	return 0;
}
