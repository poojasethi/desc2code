#include <bits/stdc++.h>

using namespace std;

string s[31][31];

main() {
	freopen("input.txt", "r", stdin), freopen("output.txt", "w", stdout);
	int n, m, k;
	cin >> n >> m >> k;
	for (int i = 0; i < k; i++) {
		string sign;
		cin >> sign;
		if (sign == "+1") {
			int x, y;
			string name;
			cin >> x >> y >> name;
			x--, y--;
			bool stop = false;
			for (int r = x; r < n; r++) {
				for (int c = (r == x ? y : 0); c < m; c++)
					if (s[r][c] == "") {
						s[r][c] = name;
						stop = true;
						break;
					}
				if (stop)
					break;
			}
		}
		else {
			string name;
			cin >> name;
			bool found = false;
			for (int r = 0; r < n; r++) {
				for (int c = 0; c < m; c++)
					if (s[r][c] == name) {
						s[r][c] = "";
						cout << r + 1 << ' ' << c + 1 << endl;
						found = true;
						break;
					}
					if (found)
						break;
				}
			if (!found)
				cout << -1 << ' ' << -1 << endl;
		}
	}
}
