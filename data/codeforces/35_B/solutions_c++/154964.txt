#include <cstdio>
#include <string>
using namespace std;
string a[32][32];
int n,m;
FILE *in,*out;
void update(int x,int y,string & s)
{
	int i;
	for (i=y;i<=m;i++)
		if (a[x][i]=="")
		{
			a[x][i]=s;
			return ;
		}
	if (x==n)
		return;
	update(x+1,1,s);
}
void query(string &s)
{
	int i,j;
	for(i=1;i<=n;i++)
		for (j=1;j<=m;j++)
			if (a[i][j]==s)
			{
				fprintf(out,"%d %d\n",i,j);
				a[i][j]="";
				return ;
			}
	fprintf(out,"-1 -1\n");
}
char s1[30],s2[150];
int main()
{
	int i,x,y,k;
	string s;
	in=fopen("input.txt","r");
	out=fopen("output.txt","w");
	fscanf(in,"%d%d%d\n",&n,&m,&k);
	for (i=1;i<=k;i++)
	{
		fscanf(in,"%s ",s1);
		if (s1[0]=='+')
		{
			fscanf(in,"%d %d %s",&x,&y,s2);
			s=s2;
			update(x,y,s);
		}
		else
		{
			fscanf(in," %s",s2);
			s=s2;
			query(s);
		}
	}
	fclose(in);
	fclose(out);
	return 0;
}
