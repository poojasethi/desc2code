#include <cstdio>
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;
char a[40][40][15];
bool f[40][40];
int main()
{
    freopen("input.txt","r",stdin);
    freopen("output.txt","w",stdout);
    int n,m,p;
    char s[10];
    while(cin>>n>>m>>p)
    {
    memset(f,0,sizeof(f));
    while(p--)
    {

        int w;
        cin>>w;
        if(w==-1)
        {
            cin>>s;
            bool F=0;
            for(int i=1;i<=n;i++)
                for(int j=1;j<=m;j++)
                    if(strcmp(a[i][j],s)==0 && f[i][j])
                    F=1,printf("%d %d\n",i,j),f[i][j] = 0;
            if(!F)puts("-1 -1");
            continue;
        }
        int x,y;
        cin>>x>>y>>s;
        while(x<=n && f[x][y]){y++;if(y>m)x++,y=1;}
        if(x<=n) strcpy(a[x][y],s),f[x][y] = 1;
    }
    }
    return 0;
}
