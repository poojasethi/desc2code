#include <stdio.h>
#include <string.h>
char s[32][32][32],t[32];
int main(void) {
  freopen("input.txt","r",stdin);
  freopen("output.txt","w",stdout);
  int n,m,q;
  scanf("%d%d%d",&n,&m,&q);
  for(int i=0,c,x,y;i<q;++i){
    scanf("%d",&c);
    if(c>0){
      scanf("%d%d",&x,&y);
      while(x<=n){
        while(y<=m&&*s[x][y])++y;
        if(y<=m)break;else y=1,++x;
      }
      if(x<=n)scanf("%s",s[x][y]);else scanf("%s",t);
    }else{
      scanf("%s",t);
      x=y=1;
      while(x<=n){
        while(y<=m&&strcmp(s[x][y],t))++y;
        if(y<=m)break;else y=1,++x;
      }
      if(x<=n)printf("%d %d\n",x,y),s[x][y][0]=0;else puts("-1 -1");
    }
  }
}
