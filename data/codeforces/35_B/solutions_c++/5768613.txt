#include<iostream>
#include<cstdio>
#include<string.h>
#include<string>
#include<algorithm>
using namespace std;

string mp[31][31];
int main(){
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
	int n,m,k;
	string str;
	scanf("%d %d %d",&n,&m,&k);//n个货架，m个格子，k次操作
	while(k--){
		int tmp,x,y;
		scanf("%d",&tmp);
		if(tmp==1){
			scanf("%d %d",&x,&y);
			cin>>str;
			for(int i=x;i<=n;i++)
				for(int j=(i==x?y:1);j<=m;j++)
					if(mp[i][j]==""){
						mp[i][j]=str;
						goto ok;
					}
		}
		else{
			cin>>str;
			for(int i=1;i<=n;i++)
				for(int j=1;j<=m;j++)
					if(mp[i][j]==str){
						mp[i][j]="";
						printf("%d %d\n",i,j);
						goto ok;
					}
			printf("%d %d\n",-1,-1);
		}
	    ok: ;
	}
	return 0;
}
/*
freopen("input.txt","r",stdin);
freopen("output.txt","w",stdout);
忽视格子，往右
*/
	  					   				  	  			 	