#include<iostream>
#include<cstdio>
#include<string>

using namespace std;

int n , m , k;
string str[40][40];

int main() {
	freopen( "input.txt" , "r" , stdin );
	freopen( "output.txt" , "w" , stdout );
	
	scanf( "%d%d%d" , &n , &m , &k );
	while ( k-- ) {
		int com; scanf( "%d" , &com );
		if ( com == 1 ) {
			int r , c; scanf( "%d%d" , &r , &c );
			string s; cin >> s;
			while ( r <= n ) {
				if ( str[r][c] == "" ) {
					str[r][c] = s;
					break;
				}
				if ( ++c > m ) r++ , c = 1;
			}
		} else {
			string s; cin >> s;
			int r = 1 , c = 1;
			while ( r <= n ) {
				if ( str[r][c] == s ) {
					str[r][c] = "";
					printf( "%d %d\n" , r , c );
					break;
				}
				if ( ++c > m ) r++ , c = 1;
			}
			if ( r > n ) printf( "-1 -1\n" );
		}
	}
	
	return 0;
}
