#include <iostream>
#include <fstream>
#include <string>
using namespace std;
string p[40][40];
int main()
{
	ifstream fin("input.txt");
	ofstream fout("output.txt");
	int n,m,k;
	fin>>n>>m>>k;
	string s;
	for(int i=1;i<=k;i++)
	{
		char q;
		int nu,r,c;
		fin>>q>>nu;
		bool y=false;
		if(q=='+')
		{
			fin>>r>>c>>s;
			for(int i=c;i<=m;i++)
			{
				if(p[r][i]=="")
				{
					p[r][i]=s;
					y=1;
					break;
				}
			}
			if(y==0)
			{
				for(int i=r+1;i<=n;i++)
				{
					if(y==1)
						break;
					for(int j=1;j<=m;j++)
					{
						if(p[i][j]=="")
						{
							p[i][j]=s;
							y=1;
							break;
						}
					}
				}
			}
		}
		else
		{
			bool y=0;
			fin>>s;
			for(int i=1;i<=n;i++)
			{
				if(y==1)
					break;
				for(int j=1;j<=m;j++)
				{
					if(p[i][j]==s)
					{
						fout<<i<<" "<<j<<endl;
						p[i][j]="";
						y=1;
						break;
					}
				}
			}
			if(y==0)
				fout<<-1<<" "<<-1<<endl;
		}
	}
}
	  		  	    	 	   	 		 	  		 	