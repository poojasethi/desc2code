#include<cstdlib>
#include<cstdio>
#include<iostream>
#include<cmath>
#include<string>
#include<cstring>
#include<fstream>

using namespace std;

ifstream fin("input.txt");
ofstream fout("output.txt");

string s[50][50];
string st;
int n,m,k,x,y;
char ch;

int main()
{
	bool b=0;
	fin>>n>>m>>k;
	for(int i=0;i<k;i++)
	{
		fin>>ch>>x;
		if(ch=='+')
		{
			fin>>x>>y>>st;
			while(x<=n)
			{
				if(!s[x][y].length())
				{
					s[x][y]=st;
					break;
				}
				y++;
				if(y>m)
				{
					x++;
					y=1;
				}
			}
		}
		else
		{
			if(b)
				fout<<endl;
			else
				b=1;
			fin>>st;
			bool flag=1;
			for(int i=1;i<=n;i++)
				for(int j=1;j<=m;j++)
					 if(s[i][j]==st)
					 {
						 flag=0;
						 fout<<i<<" "<<j;
						 s[i][j]="";
						 break;
					 }
			if(flag)
				fout<<-1<<" "<<-1;
		}
	}
	return 0;
}

 		  	  		 	 	    	 		 			 	 	