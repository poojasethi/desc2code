#include<cstdio>
#include<string>
#include<iostream>
using namespace std;
string a[35][35];
int main(){
	freopen("input.txt","r",stdin);
	freopen("output.txt","w",stdout);
    int n,m,k,x,y;
	scanf("%d%d%d",&n,&m,&k);
	for(int i=1;i<=n;i++)
		for(int j=1;j<=m;j++)
			a[i][j].clear();
	for(int i=0;i<k;i++){
		string temp1,temp2;
		cin>>temp1;
		if(temp1[0]=='+'){
			cin>>x>>y>>temp2;
			while(a[x][y]!=""){
				y++;
				if(y>m){
					x++;y=1;
				}
				if(x>n){
					break;
				}
			}
			if(x<=n) a[x][y]=temp2;
		}else{
			cin>>temp2;
			bool flag=false;
             for(int i=1;i<=n;i++){
				 for(int j=1;j<=m;j++)
					 if(a[i][j]==temp2){
						 printf("%d %d\n",i,j);
						 a[i][j].clear();
						 flag=true;
			             break;
					 }
			     if(flag) break;
			}
			if(!flag) printf("-1 -1\n");
		}
	}
	return 0;
}
 		  	    		 		 	 	 				 	