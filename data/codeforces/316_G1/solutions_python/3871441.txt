#include<cstdio>
#include<cmath>
#include<algorithm>
#include<map>
#include<cstring>
#define ff(i,k,n) for(int i=k;i<=n;++i)
using namespace std;

const long long mo=1437356741;
struct aaa{char s[205];int len;}t[15],s;
int n,a[105][2],p[205],ans=0;
map <int ,int> v;

void solve(int l,int r){
	memset(p,0,sizeof(p));
	int j=0, m=r-l+1;
	ff(i,2,m){
		while(j>0 && s.s[l+i-1]!=s.s[l+j]) j=p[j];
		if(s.s[l+j]==s.s[l+i-1]) ++j; p[i]=j;
	}
	ff(k,1,n){
		j=0; int tt=0;
		ff(i,1,t[k].len){
			while(j>0 && t[k].s[i]!=s.s[l+j]) j=p[j];
			if(t[k].s[i]==s.s[l+j]) ++j;
			if(j==m) ++tt, j=p[j];
		}
		if(tt<a[k][0] || tt>a[k][1]) return;
	}
	++ans;
}

int main(){
	scanf("%s",s.s+1); s.len=strlen(s.s+1);
	scanf("%d",&n);
	ff(i,1,n)
		scanf("%s%d%d",t[i].s+1,&a[i][0],&a[i][1]),
		t[i].len=strlen(t[i].s+1);
	ff(i,1,s.len){
		long long pp=0, x=1;
		ff(j,i,s.len){
			pp=(pp+s.s[j]*x)%mo; x=x*331%mo;
			if(!v[pp]) v[pp]=1, solve(i,j);
		}
	}
	printf("%d\n",ans);
}
