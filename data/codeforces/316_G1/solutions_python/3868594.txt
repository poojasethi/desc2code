#include <iostream>
#include <string>
#include <vector>
#include <set>
#include <algorithm>
using namespace std;

#define rep(i, n)       reps (i, 0, n)
#define reps(i, m, n)   for (int i = m; i < int(n); ++i)

typedef long long ll;

int main()
{
    int n, l[11], r[11];
    string s, p[11];
    cin >> s >> n;
    rep (i, n) cin >> p[i] >> l[i] >> r[i];
    
    set<string> res;
    rep (i, s.size()) reps (j, i + 1, s.size() + 1) {
        int len = j - i;
        string sub = s.substr(i, len);
        bool ok = true;
        rep (k, n) {
            int cnt = 0;
            rep (m, p[k].size() - len + 1)
                if (p[k].substr(m, len) == sub) ++cnt;
            if (cnt < l[k] || r[k] < cnt) {
                ok = false; break;
            }
        }
        if (ok) res.insert(sub);
    }
    
    cout << res.size() << endl;
}
