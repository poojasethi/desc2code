# include<cstdio>
# include<string>
# include<cstring>
# include<set>
# include<iostream>
# include<algorithm>
using namespace std;

# define N 205
char s[N];
string ss;
set<string> sset;

struct node
{
    string s;
    int l,r;
}e[15];

int get(string a,string b)
{
    int pos=0,res=0;
    while((pos=a.find(b,pos))!=string::npos)
        pos++,res++;
    return res;
}

int main()
{
    int i,j,k,len,n,res;
    while(scanf("%s",s)!=EOF)
    {
        sset.clear();
        res=0;
        len=strlen(s);
        scanf("%d",&n);
        for(i=1;i<=n;i++)
            cin>>e[i].s>>e[i].l>>e[i].r;
        for(i=0;i<len;i++)
            for(j=i;j<len;j++)
            {
                
                ss.clear();
                ss.append(s,i,j-i+1);
                for(k=1;k<=n;k++)
                {
                    int c=get(e[k].s,ss);
                    if(!(c>=e[k].l&&c<=e[k].r))
                        break;
                }
                if(k==n+1)
                    sset.insert(ss);
            }
            printf("%d\n",sset.size());
    }
    return 0;
}