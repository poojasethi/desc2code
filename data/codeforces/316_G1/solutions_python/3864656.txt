#include <iostream>
#include <cstdio>
#include <cstring>
#include <string>
#include <algorithm>
#include <map>
using namespace std;

#define LL long long 
#define mod 1000000007

int l[15], r[15];
string s, p[15];
map<string,bool> mp;

int cal( string a, string b ) {
    int j = a.size(), res = 0;
    for( int i = 0; i + j <= b.size(); ++i ) {
        string tt = b.substr(i,j);
        if( a == tt )
            ++res;
    }
    return res;
}

int check( int n, string ss ) {
    for( int i = 0; i < n; ++i ) {
        int k = cal( ss, p[i] );
        if( k < l[i] || k > r[i] )
            return 0;
    }
    return 1;
}

int main()
{
    int n;
    cin >> s;
    cin >> n;
    for( int i = 0; i < n; ++i )
        cin >> p[i] >> l[i] >> r[i];
    int ans = 0;
    for( int i = 0; i < s.size(); ++i ) {
        for( int j = 1; i + j <= s.size(); ++j ) {
            string tmp = s.substr(i,j);
            if(mp[tmp]) continue;
            mp[tmp] = true;
            if( check( n, tmp ) )
                ++ans;
        }
    }
    cout << ans << endl;
    return 0;
}
