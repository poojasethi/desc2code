#include <iostream>
#include <stdio.h>
#include <string.h>
#include <string>
#include <vector>
#include <algorithm>
#include <queue>
#include <sstream>
#include <set>
#include <map>
using namespace std;

#define N 205

string a;
struct pt {
	string s;
	int l, r;
};

pt b[12];
map<string,int> mp[12];

int i, j, k, n, m, x, y, z,t;
set<string> res;
string s, s1, s2;

int main() {
	cin >> a;
	cin >> n;
	for (i = 0; i < n; i ++) {
		cin >> b[i].s >> b[i].l >> b[i].r;
	}
	for (k = 0; k < n; k ++) {
		for (i = 0; i < b[k].s.size(); i ++) {
			s.clear();
			for (j = i; j < b[k].s.size(); j ++) {
				s += b[k].s[j];
				mp[k][s] ++;
			}
		}
	}

	for (i = 0; i < a.size(); i ++) {
		s.clear();
		for (j = i; j < a.size(); j ++) {
			s += a[j];
			for (k = 0; k < n; k ++) {
				t = mp[k][s];
				if (!(t >= b[k].l && t <= b[k].r)) {
					break;
				}
			}
			if (k == n) {
				res.insert(s);
			}
		}
	}
	cout << res.size() << endl;
	return 0;
}


