#include<iostream>
#include<cstdio>
#include<string>
#include<map>
using namespace std;
struct node{
    string str;
    int l;
    int r;
}a[15];
int main()
{
    string s;
    int n;
    cin>>s;
    cin>>n;
    for(int i=0;i<n;i++)
        cin>>a[i].str>>a[i].l>>a[i].r;
	int ans=0;
	map<string,int>mp;
    for(int i=0;i<s.size();i++)
        for(int j=1;j<=s.size()-i;j++)
        {
            string str=s.substr(i,j);
			int k;
            for(k=0;k<n;k++)
        {
            int cnt=0;
            int tmp;
            for(int v=0;v<a[k].str.size();)
            {
                tmp=a[k].str.find(str,v);
                if(tmp==string::npos)
					break;
				else{
					v=tmp+1;
					cnt++;
				}
            }
			if(cnt<a[k].l||cnt>a[k].r)break;
        }
			if(k==n)
			{
                //ans++;
                //cout<<str<<endl;
                mp[str]=1;
			}
        }
		cout<<mp.size()<<endl;
    return 0;
}
