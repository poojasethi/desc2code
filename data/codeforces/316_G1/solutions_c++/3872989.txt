#include <cstdio>
#include <algorithm>
#include <cstring>
#include <string>
#include <iostream>
#include <map>
#include <cstdlib>
using namespace std;
const int maxn = 3333;
map<string,int> M;
string s, ss, a[maxn];
int l[maxn], r[maxn], N, n, m, i, j, k, len, ans;

bool check(int x) {
	int i, j, k, n = a[x].length(), ans = 0;
	for (i = 0; i < n - m + 1; i++){
		bool ff = true;
		for (j = 0; j < m; j++)
			if (a[x][i + j] != ss[j]){ff = false; break;}
		if (ff) ans++;
	}
	return (ans >= l[x]) && (ans <= r[x]);
}
int main(){
	cin >> s >> N;
	for (i = 1; i <= N; i++){
		cin >> a[i] >> l[i] >> r[i];
	}
	len = s.length();
	for (i = 0; i < s.length(); i++)
		for (j = i; j < s.length(); j++){
			ss = "";
			for (k = i; k <= j; k++) ss += s[k];
			if (M.find(ss) == M.end()) M[ss] = 1;
			else continue;
			m = ss.length();
			bool ff = true;
			for (k = 1; k <= N; k++)
				if (!check(k)) {ff = false; break;}
			if (ff) ans++;
		}
	cout << ans << endl;
}
