#include<stdio.h>
#include<iostream>
#include<cstring>
#include<algorithm>
#include<string>
using namespace std;
string s,t[12];
int len[12];
int l[20],r[20];
int ans,n;
string temp[40040];
int run;
int check(int L,int R,int ind)
{
	int ll=R-L+1,cnt=0,ok;
	for(int i=0;i<len[ind]-ll+1;i++)
	{
		ok=0;
		for(int j=0;j<ll;j++)
		{
			if(s[L+j]!=t[ind][i+j])
			{
				ok=1;break;
			}
		}
		if(ok==0) cnt++;
	}
	if(cnt>=l[ind]&&cnt<=r[ind]) return 1;
	return 0;
}
void test(int L,int R)
{
	for(int i=1;i<=n;i++)
	{
		if(check(L,R,i)==0) return;
	}
	temp[run++]=s.substr(L,R-L+1);
	//cout << L << " " << R << endl;
	//ans++;
	return;
}
main()
{
	//scanf(" %s",s);
	cin >> s;
	int k=s.size();
	scanf("%d",&n);
	//cout << n;
	for(int i=1;i<=n;i++)
	{
		//scanf(" %s %d %d",t[i],&l[i],&r[i]);
		cin >> t[i] >> l[i] >> r[i];
		//cout<< t[i];
		len[i]=t[i].size();
	}
	for(int i=0;i<k;i++)
	{
		for(int j=i;j<k;j++)
		{
			test(i,j);
		}
	}
	sort(temp,temp+run);
	if(run==0)
	{
		cout << 0;
		exit(0);
	}
	ans++;
	for(int i=1;i<run;i++) if(temp[i]!=temp[i-1]) ans++;
	cout << ans;
}
