#include <iostream>
#include <cstdio>
#include <cstring>
#include <set>
#include <vector>
#include <algorithm>
#define rep(i,n) for(i = 1; i <= n; i ++)
using namespace std;
string s, a[1000], tmps;
int l[1000], r[1000];
set <string> mm;
int main()
{
    int ans = 0, n, i, j, k, p, tmp;
  //  s = "abab";
  //  cout << (s.find("c") == std::string::npos) << endl;
    cin >> s;
    cin >> n;
    for (i = 1; i <= n; i ++) cin >> a[i] >> l[i] >> r[i];
    for (i = 0; i < s.length(); i ++)
      for (j = 1; j <= s.length() - i; j ++)
       {
         tmps = s.substr(i, j);
        for (k = 1; k <= n; k ++) {
           int nn = 0, p = 0;;
           while ((tmp = a[k].find(tmps, p)) != std::string::npos) { nn ++; p = tmp + 1; }
         //  cout << nn << endl;
          if (nn < l[k] || nn > r[k]) break;
        }
        if (k > n) {if (!mm.count(tmps)) {ans ++; mm.insert(tmps); } }
       }
    cout << ans << endl;
    return 0;
}
