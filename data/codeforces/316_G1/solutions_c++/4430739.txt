#include <algorithm>
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define N 210
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an;
int l[11],L[11],R[11],f[N],h[N];
char s[N],p[11][N],S[N];
string re[N*N];
inline void judge(int x,int y) {
	int i,j,len=y-x+1,k,sum;
	For(i,1,len) S[i]=s[x+i-1];
	j=0;
	For(i,2,len) {
		for (;j&&S[j+1]!=S[i];j=h[j]);
		if (S[j+1]==S[i]) j++;
		h[i]=j;
	}
	For(k,1,n) {
		j=sum=0;
		For(i,1,l[k]) {
			for (;j&&S[j+1]!=p[k][i];j=h[j]);
			if (S[j+1]==p[k][i]) j++;
			if (j==len) {
				sum++; j=h[j];
			}
		}
		if (!(sum>=L[k]&&sum<=R[k])) return;
	}
	an++;
	For(i,1,len) re[an]+=S[i];
}
int main() {
	scanf("%s",s+1); m=strlen(s+1);
	scanf("%d",&n);
	For(i,1,n) {
		scanf("%s",p[i]+1); l[i]=strlen(p[i]+1);
		scanf("%d%d",&L[i],&R[i]);
	}
	For(i,1,m)For(j,i,m) judge(i,j);
	sort(re+1,re+an+1);
	k=0;
	For(i,1,an) if (re[i]!=re[i-1]) k++;
	printf("%d\n",k);
	//for(;;);
	return 0;
}
