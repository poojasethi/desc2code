#include <algorithm>
#include <cstdio>
#include <iostream>
#include <map>
#include <set>
#include <vector>

#define fi first
#define se second
#define pb push_back
#define sz(a) ((int)a.size())
#define abs(a) ((a)<0 ? ((a)*-1) : (a))

using namespace std;

typedef pair<int,int> ii;
typedef long long int Lint;

const int MAXN=2002;

int N;
int d[11];
int u[11];

int hash[11][MAXN][MAXN];

string s;
string q[11];

set<int> S;
map<int,int> H[11];

int main(){
	
	cin >> s;
	cin >> N;
	
	for( int i=1 ; i<=N ; i++ )
		cin >> q[i] >> d[i] >> u[i];
	
	for( int k=1 ; k<=N ; k++ )
		for( int i=0 ; i<sz(q[k]) ; i++ ){
			int h=0;
			for( int j=i ; j<sz(q[k]) ; j++ ){
				h=h*157+q[k][j];
				H[k][h]++;
			}
		}
	
	int res=0;
	
	for( int i=0 ; i<sz(s) ; i++ ){
		int h=0;
		for( int j=i ; j<sz(s) ; j++ ){
			h=h*157LL+s[j];
			if( S.find(h)==S.end() ){
				S.insert(h);
				bool ok=1;
				for( int k=1 ; k<=N ; k++ )
					if( H[k][h]<d[k] || H[k][h]>u[k] ){
						ok=0;
						break;
					}
				res+=ok;
			}
		}
	}
	
	printf("%d\n",res);
	return 0;
}
