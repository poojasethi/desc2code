#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <algorithm>
#include <map>
#include <set>

const int N = 100010;

using namespace std;

typedef unsigned long long ll;

int l[11], r[11];
string s, p[11];

int main()
{
	cin >> s;
	int n;
	cin >> n;
	map<ll, int> h[11][2010];
	for(int i = 0; i < n; i++){
		cin >> p[i] >> l[i] >> r[i];
		for(int a = 0; a < p[i].size(); a++){
			ll t = 0;
			for(int b = 0; a + b < p[i].size(); b++){
				t = t * 127 + p[i][a + b];
				h[i][b][t]++;
			}
		}
	}
	int ret = 0;
	set<ll> st;
	for(int a = 0; a < s.size(); a++){
		ll t = 0;
		for(int b = 0; a + b < s.size(); b++){
			t = t * 127 + s[a + b];
			if(st.count(t)) continue;
			bool f = 1;
			for(int k = 0; k < n; k++){
				if(h[k][b][t] > r[k]) f = 0;
				else if(h[k][b][t] < l[k]) f = 0;
			}
			st.insert(t);
			ret += f;
		}
	}
	cout << ret << endl;
    return 0;
}