#include <bits/stdc++.h>

using namespace std;

const int N = 200101, MOD = 1e9 + 7;
int cnt[N], p[N];

main()
{
	bool div = false;
	int m, tmp, ans = 1;
	cin >> m;
	for (int i = 0; i < m; i++)
	{
		cin >> p[i], cnt[p[i]]++;
		ans = ((long long)ans * (long long) p[i]) % MOD;
	}	
	for (int i = 0; i < N; i++)
		if (cnt[i] % 2)
			div = true;
	if (!div)
	{
		ans = 1;
		for (int i = 0; i < N; i++)
			for (int j = 0; j < cnt[i] / 2; j++)
				ans = ((long long) ans * (long long) i) % MOD;
	}	
	for (int i = 0; i < N; i++)
	{
		if (!cnt[i])
			continue;
		if (cnt[i] % 2 && div)
			cnt[i] /= 2, div = false;
		tmp = ans;
		for (int j = 0; j < cnt[i]; j++)
			ans = ((long long) ans * (long long) tmp) % MOD;
	}
	cout << ans << endl;
}
