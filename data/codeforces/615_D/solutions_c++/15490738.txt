#include<bits/stdc++.h>
using namespace std;
const int M=2e5+5;
const long long int MOD=1e9+7;
long long int N=1,c[M];
bool flag;
int main()
{
int m;cin>>m;
fill(c,c+M,1);
while(m--)
{
  int p;cin>>p;c[p]++;
  N*=p,N%=MOD;
}
for(int i=1;i<M;i++)
  if(c[i]%2==0 && !flag)
    c[i]/=2,flag=true;
if(!flag)
{
  N=1;
  for(int i=1;i<M;i++)
    for(int j=1;j*2<c[i];j++)
      N*=i,N%=MOD;
}
for(int i=1;i<M;i++)
{
  long long int N2=N;
  for(int j=1;j<c[i];j++)
    N*=N2,N%=MOD;
}
cout<<N<<endl;
return 0;
}