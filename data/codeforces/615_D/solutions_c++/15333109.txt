#include<iostream>
#include<cstring>
using namespace std;
typedef long long ll;
const int maxn=222222;
ll cnt[maxn];
ll a[maxn],l[maxn],r[maxn];
const ll mod=1e9+7;
const ll mod2=mod-1ll;
ll quick_pow(ll a,ll n,ll c)
{
	ll ans=1;
	while(n){
		if(n&1)ans=a*ans%c;
		a=a*a%c;
		n>>=1;
	}
	return ans;
}
int main()
{
	int n,num=0;
	cin>>n;
	memset(cnt,0,sizeof(cnt));
	for(int i=0;i<n;i++)
	{
		int m;cin>>m;
		if(!cnt[m])a[++num]=m;
		cnt[m]++;
	}
	l[0]=r[num+1]=1;
	for(int i=1;i<=num;i++)
		l[i]=l[i-1]*(cnt[a[i]]+1)%mod2;
	for(int i=num;i>0;i--)
		r[i]=r[i+1]*(cnt[a[i]]+1)%mod2;
	ll ans=1;
	for(int i=1;i<=num;i++)
	{
		ll Num=cnt[a[i]];
		ll w=l[i-1]*r[i+1]%mod2;
		w=(Num+1)*Num/2%mod2*w%mod2;
		ans=ans*quick_pow(a[i],w,mod)%mod;
	}
	cout<<ans<<endl;
}
 	 		 		 	 	 	 	 	  	  	 	 	