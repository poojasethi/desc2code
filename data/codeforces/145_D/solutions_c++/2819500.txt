#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
#include<set>
using namespace std;
const int u=100010;
int a[u],b[u],next[u],n,m,i,j,k;
set<int> s;
set<int>::iterator l,r;
__int64 ans,temp;

bool luck(int x)
{
	for(;x;x/=10)
		if(x%10!=4&&x%10!=7) return 0;
	return 1;
}

int main()
{
	cin>>n;
	for(i=1;i<=n;i++)
	{
		scanf("%d",&a[i]);
		if(luck(a[i])) b[++m]=i;
		ans+=(__int64)i*(i+1)/2*(n-i);
	}
	for(i=1;i<=m;i++)
		for(j=i-1;j;j--)
			if(a[b[i]]==a[b[j]]) {next[j]=i; break;}
	for(i=1;i<=m;i++)
	{
		s.clear();
		s.insert(b[i]),s.insert(n+1);
		for(j=i,temp=0;j;j--)
		{
			if(next[j]>i)
				for(k=next[j];k;k=next[k])
				{
					l=r=s.insert(b[k]).first;
					l--,r++;
					if(*l==b[i]) temp+=((__int64)(b[i+1]-b[i])*(b[i+1]-b[i]+1)/2+(__int64)(b[i+1]-b[i])*(b[k]-b[i+1]))*(*r-b[k]);
					else temp+=(__int64)(b[i+1]-b[i])*(b[k]-*l)*(*r-b[k]);
				}
			ans-=temp*(b[j]-b[j-1]);
		}
	}
	cout<<ans<<endl;
	return 0;
}