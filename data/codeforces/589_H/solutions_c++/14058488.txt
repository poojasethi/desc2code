#include<bits/stdc++.h>
using namespace std;
#define f first
#define s second
#define mp make_pair
#define pb push_back
#define pii pair<int,int>
#define ll long long
vector<int>adj[100011];
int vis[100011],par[100011],rem[100011],d[100011];
vector< vector<int> >ans;
void join(int a,int b,int c)
{
    vector<int>v,r;
    while(a!=c)
    {
        v.pb(a);
        a=par[a];
    }
    while(b!=c)
    {
        r.pb(b);
        b=par[b];
    }
    v.pb(c);
    reverse(r.begin(),r.end());
    for(int i=0;i<r.size();i++)
        v.pb(r[i]);
    ans.pb(v);
}
void dfs(int u,int p)
{
    vis[u]=1;
    par[u]=p;
    for(int i=0;i<adj[u].size();i++)
        if(!vis[adj[u][i]])
            dfs(adj[u][i],u);
    vector<int>cities;
    if(rem[u])
        cities.pb(u);
    for(int i=0;i<adj[u].size();i++)
    {
        int k=adj[u][i];
        if(par[k]!=u)
            continue;
        if(d[k]!=-1)
            cities.pb(d[k]);
    }
    for(int i=0;i+1<cities.size();i+=2)
        join(cities[i],cities[i+1],u);
    if(cities.size()%2==1)
        d[u]=cities[cities.size()-1];
    else
        d[u]=-1;
    cities.clear();
}
int main()
{
    int n,m,k,i,j;
    scanf("%d %d %d",&n,&m,&k);
    for(i=0;i<m;i++)
    {
        int u,v;
        scanf("%d %d",&u,&v);
        adj[u].pb(v);
        adj[v].pb(u);
    }
    for(i=0;i<k;i++)
    {
        int u;
        cin>>u;
        rem[u]=1;
    }
    for(i=1;i<=n;i++)
        if(!vis[i])
            dfs(i,i);
    printf("%d\n",ans.size());
    for(i=0;i<ans.size();i++)
    {
        printf("%d ",ans[i].size()-1);
        for(j=0;j<ans[i].size();j++)
            printf("%d ",ans[i][j]);
        printf("\n");
    }
    return 0;
}
