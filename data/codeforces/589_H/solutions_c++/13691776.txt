#include<bits/stdc++.h>
using namespace std;
#define Rep(i,n) for(int i=1;i<=n;++i)
#define INF 0x3f3f3f3f
#define LL long long
#define fs first
#define se second

bool spe[50050];
int first[50050], vv[100100], nxt[100100];
int dep[50050], r[50050], cnt = 0;
vector<int>zuo[50050], you[50050];

void add(int u, int v) {
	static int i = 0;
	vv[i] = v;
	nxt[i] = first[u];
	first[u] = i++;
}

//int f(int x) {
//	return x == fa[x] ? x : fa[x] = f(fa[x]);
//}

void print(int u, int v) {
	++cnt;
	while(u != v) {
		if(dep[u] > dep[v]) {
			zuo[cnt].push_back(u);
			u = r[u];
		}
		else {
			you[cnt].push_back(v);
			v = r[v];
		}
	}
	zuo[cnt].push_back(u);
}

int dfs(int u, int p) {
	r[u] = p;
	int temp = 0;
	for(int i = first[u]; ~i; i = nxt[i]) {
		int v = vv[i];
		if(r[v]) continue;
		dep[v] = dep[u] + 1;
		int hehe = dfs(v, u);
		if(hehe) {
			if(temp) print(temp, hehe), temp = 0;
			else temp = hehe;
		}
	}
	if(spe[u]) {
		if(temp) print(temp, u), temp = 0;
		else temp = u;
	}
	return temp;
}

int main()
{
	int n, m, k;
	cin >> n >> m >> k;
	int u, v;
	memset(first, -1, sizeof(first));
	while(m--) {
		scanf("%d%d", &u, &v);
		add(u, v);
		add(v, u);
	}
	Rep(i, k) scanf("%d", &u), spe[u] = true;
	Rep(i, n) if(!r[i]) dfs(i, i);
	cout << cnt << endl;
	Rep(i, cnt) {
		printf("%d", zuo[i].size() + you[i].size()-1);
		for(int j = 0; j < zuo[i].size(); ++j) printf(" %d", zuo[i][j]);
		for(int j = you[i].size()-1; j >= 0; --j) printf(" %d", you[i][j]);
		puts("");
	}
	return 0;
}
