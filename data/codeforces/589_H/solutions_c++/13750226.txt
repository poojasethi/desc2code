#include<iostream>
#include<cstdio>
#include<queue>
#include<cstring>
#include<algorithm>
#include<cmath>
using namespace std;
struct nod{
int lian,qian,t;
}bian[110000];
int j,dw[51000],k,num[51000],ans,fa[51000],use[51000],wei[51000],gs[51000],zu[1100000],p,n,m,a,b,i;
void sou(int d)
{
 int w;
 use[d]=1;
 for (w=wei[d];w!=0;w=bian[w].qian)
 if (use[bian[w].lian]==0)
 {
   bian[w].t=1;
   fa[bian[w].lian]=d;
   sou(bian[w].lian);
 }
}

void build(int a,int b)
{
 p++;
 bian[p].qian=wei[a];
 bian[p].lian=b;
 wei[a]=p;
}

void jia(int a,int d)
{
  if (a!=d) jia(fa[a],d);
  if (a!=d)
  {
  	p++;
  	zu[p]=a;
  }
}
void qiu(int a,int b,int d)
{
 ans++;
 p++;
 dw[ans]=p;
 zu[p]=a;
 while (a!=d)
 {
   a=fa[a];
   p++;
   zu[p]=a;
 }
 jia(b,d);
 gs[ans]=p-dw[ans]+1;
}

void zhao(int d)
{
 int w;
 use[d]=2;
 for (w=wei[d];w!=0;w=bian[w].qian)
 if (bian[w].lian!=fa[d] && bian[w].t==1)
 {
   zhao(bian[w].lian);
   if (num[bian[w].lian]!=0)
   {
     if (num[d]!=0) 
	{
	 qiu(num[d],num[bian[w].lian],d);
	 num[d]=0; 
     } else num[d]=num[bian[w].lian];
   } 
 }
}

int main()
{
 scanf("%d%d%d",&n,&m,&k);
 for (i=1;i<=m;i++)
 {
   scanf("%d%d",&a,&b);
   build(a,b);
   build(b,a);  
 }
 for (i=1;i<=k;i++)
 {
  scanf("%d",&a);
  num[a]=a;
 }
 for (i=1;i<=n;i++) if (use[i]==0) sou(i);
 p=0;
 for (i=1;i<=n;i++)
 if (use[i]!=2) zhao(i);
 printf("%d\n",ans);
 for (i=1;i<=ans;i++)
 {
   printf("%d ",gs[i]-1);
   for (j=1;j<gs[i];j++) printf("%d ",zu[dw[i]+j-1]);
   printf("%d",zu[dw[i]+gs[i]-1]);
   printf("\n");
 }
}
