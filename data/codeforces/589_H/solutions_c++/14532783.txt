#include <cstdio>
#include <vector>
#include <cstring>
using namespace std;

vector<int> g[50004];
bool remarkale[50004];
bool visited[50004];

struct route {
	vector<int> a, b;
	route(const vector<int> &a,const vector<int> &b)
	:a(a), b(b){}
};
vector<route> ans;

vector<int> dfs(int nowAt,int parent) {
	visited[nowAt] = true;
	vector<int> last;
	if( remarkale[nowAt] )
		last.push_back(nowAt);
	for(int i=0 ; i<g[nowAt].size() ; ++i) {
		int &v = g[nowAt][i];
		if( v == parent ) continue;
		if( visited[v] ) continue;
		vector<int> nowR = dfs(v, nowAt);
		if( nowR.empty() ) continue;
		nowR.push_back(nowAt);
		if( last.size() ) {
			ans.push_back(route(last,nowR));
			last.clear();
		}
		else last = nowR;
	}
	return last;
}

int main() {
	int n, m, k;
	scanf("%d%d%d", &n ,&m ,&k);
	for(int i=0,a,b ; i<m ; ++i) {
		scanf("%d%d", &a, &b);
		g[a].push_back(b);
		g[b].push_back(a);
	}
	for(int i=0,a ; i<k ; ++i) {
		scanf("%d", &a);
		remarkale[a] = true;
	}
	for(int i=1 ; i<=n ; ++i)
		if( !visited[i] )
			dfs(i,-1);
	printf("%d\n",(int)ans.size());
	for(int i=0 ; i<ans.size() ; ++i) {
		route &r = ans[i];
		printf("%d",(int)r.a.size()+(int)r.b.size()-2);
		for(int i=0 ; i<r.a.size() ; ++i)
			printf(" %d",r.a[i]);
		for(int i=r.b.size()-2 ; i>=0 ; --i)
			printf(" %d",r.b[i]);
		puts("");
	}
	return 0;
}
