#include <bits/stdc++.h>
#define fr(i,a,b) for (int i = (a); i < (b); ++i)
#define rp(i,b) fr(i,0,b)
#define limit while
#define st first
#define nd second
#define pb push_back
#define db(x) cerr << #x << " == " << x << endl
using namespace std;

typedef long long ll;
typedef pair<int,int> ii;
typedef pair<int, ii> iii;
typedef vector<int> vi;

const double eps = 1e-7;
const int inf = 0x3f3f3f3f;
const ll linf = 0x3f3f3f3f3f3f3f3fLL;

const int N = 50005;

vi adj[N];
int rep[N], is_rmk[N], mark[N], lvl[N], pai[N];

int fset(int a) { return rep[a] == a ? a : rep[a] = fset(rep[a]); }
void unir(int a, int b) { rep[fset(a)] = fset(b); }
bool sameSet(int a, int b) { return fset(a) == fset(b); }

vector<iii> ans;

int go(int u, int p = -1) {
  mark[u] = 1;
  vi unmatch;
  if (is_rmk[u]) unmatch.push_back(u);
  rp(i,adj[u].size()) {
    int v = adj[u][i];
    if (v == p) continue;
    lvl[v] = lvl[u] + 1;
    pai[v] = u;
    int x = go(v, u);
    if (x != -1) {
      unmatch.push_back(x);
    }
  }
  for (int i = 1; i < unmatch.size(); i += 2) {
    ans.push_back(iii(u, ii(unmatch[i - 1], unmatch[i])));
  }
  if (unmatch.size() & 1) return unmatch.back();
  else return -1;
}

void print_up(int x, int p) {
  if (x == p) return;
  printf(" %d", x + 1);
  print_up(pai[x], p);
}

void print_up_rev(int x, int p) {
  if (x != p) print_up_rev(pai[x], p);
  printf(" %d", x + 1);
}

int main() {
  int n, m, k; scanf("%d %d %d", &n, &m, &k);
  rp(i,n) rep[i] = i;
  rp(i,m) {
    int a, b; scanf("%d %d", &a, &b); --a; --b;
    if (!sameSet(a, b)) {
      unir(a, b);
      adj[a].push_back(b);
      adj[b].push_back(a);
    }
  }
  rp(i,k) {
    int x; scanf("%d", &x); --x;
    is_rmk[x] = 1;
  }
  rp(i,n) if (!mark[i]) {
    lvl[i] = 0;
    pai[i] = -1;
    go(i);
  }

  printf("%d\n", int(ans.size()));
  rp(i,ans.size()) {
    printf("%d", lvl[ans[i].nd.st] + lvl[ans[i].nd.nd] - 2 * lvl[ans[i].st]);
    print_up(ans[i].nd.st, ans[i].st);
    print_up_rev(ans[i].nd.nd, ans[i].st);
    puts("");
  }
  return 0;
}
