#include <bits/stdc++.h>
#define f first
#define s second
#define ll long long
#define mp make_pair
#define pb push_back

using namespace std;

double eps = 1e-9;
const int INF = 1e9;
const int MAXN = int (1e5+7);

int n, m, k, r[MAXN], u[MAXN];
vector < vector <int> > g(MAXN), ans;

void push(vector <int> a, vector <int> b, int v) {
	vector <int> c;
	for(int j = 0; j < a.size(); j ++)
		c.pb(a[j]);
	c.pb(v);
	for(int j = b.size() - 1; j >= 0; j --)
		c.pb(b[j]);
	ans.pb(c);
}

vector <int> dfs(int v) {
	u[v] = 1;
	vector <int> a, b;
	for(int i = 0; i < g[v].size(); i ++) {
		int to = g[v][i];
		if(!u[to]) {
			if(a.empty()) 
				a = dfs(to);
			else
				b = dfs(to);
			if(!a.empty() && !b.empty()) {
				push(a, b, v);
				a.clear();
				b.clear();
			}
		}
	}
	if(r[v]) {
		if(!a.empty()) {
			push(a, b, v);
			a.clear();
			b.clear();
		}
		else {
			a.pb(v);
			return a;
		} 
	}
	if(!a.empty())
		a.pb(v);
	return a;
}

int main () {
    //freopen("input.txt", "r", stdin);
    //freopen("output.txt", "w", stdout);  
    
    scanf("%d%d%d", &n, &m, &k);
    for(int i = 1, x, y; i <= m; i ++) {
    	scanf("%d%d", &x, &y);
    	g[x].pb(y);
    	g[y].pb(x);
    }
    for(int i = 1, x; i <= k; i ++) {
    	scanf("%d", &x);
    	r[x] = 1;
    }
    for(int i = 1; i <= n; i ++) {
    	if(!u[i])
    		dfs(i);
    }
    cout << ans.size() << endl;
    for(int i = 0; i < ans.size(); i ++) {
    	cout << ans[i].size() - 1 << " ";
    	for(int j = 0; j < ans[i].size(); j ++)
    		cout << ans[i][j] << " ";
    	cout << endl;
    }
    return 0;
}