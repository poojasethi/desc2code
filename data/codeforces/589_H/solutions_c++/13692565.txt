#include <iostream>
#include <fstream>
#include <cstdio>
#include <algorithm>
#include <cstring>
#include <vector>
#include <cmath>
#include <map>
#include <set>

#define forn(i, n) for(int i = 0; i < n; i++)
#define mp(i, j) make_pair(i, j)
#define rs(a, j) a.resize(j)
#define pb(a, j) a.push_back(j)
#define pp(a) a.pop_back()
#define len(s) (int)s.length()
#define sz(a) (int)a.size()
#define re  return
using namespace std;
typedef long long ll;
typedef long double ld;
typedef vector<int> vi;

int n, m, k, aa, bb, use[50000], good[50000];
vector<int> a[50000];
vector<vector<int> > ans;

vi dfs(int nu) {
    use[nu] = 1;
    int n1 = -1;
    vi k;
    if (good[nu]) {
        k.push_back(nu);
    }
    forn (i, sz(a[nu])) {
        if (use[a[nu][i]] == 0) {
            vi aa = dfs(a[nu][i]);
            if (sz(aa)) {
                if (sz(k) == 0) {
                    k = aa;
                    k.push_back(nu);
                    continue;
                }
                ans.push_back(k);
                forn (j, sz(aa)) {
                    ans[sz(ans) - 1].push_back(aa[sz(aa) - j - 1]);
                }
                k.resize(0);
            }
        }
    }
    return k;
}
int main(){
    //iostream::sync_with_stdio(0);
    //freopen("input.txt", "r", stdin);
    //freopen("parts.out", "w", stdout);
    scanf("%d%d%d", &n, &m, &k);
    forn (i, m) {
        scanf("%d%d", &aa, &bb);
        aa--;
        bb--;
        a[aa].push_back(bb);
        a[bb].push_back(aa);
    }
    forn (i, k) {
        scanf("%d", &aa);
        good[aa - 1] = 1;
    }
    forn (i, n) {
        if (use[i] == 0) {
            dfs(i);
        }
    }
    printf("%d\n", int(ans.size()));
    forn (i, sz(ans)) {
        printf("%d", int(ans[i].size()) - 1);
        forn (j, sz(ans[i]))  printf(" %d", ans[i][j] + 1);
        printf("\n");
    }
    return 0;
}
