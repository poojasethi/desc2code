#include <bits/stdc++.h>
using namespace std;
const int maxn=50005;
int n,m,k;
vector<int>g[maxn];
bool mark[maxn];
bool vis[maxn];
int fa[maxn];
vector<int>res;
vector<vector<int> >ans;
void add(int now,int u){
    if(now!=u)add(fa[now],u);
    res.push_back(now);
}
int dfs(int u){
    vis[u]=1;
    vector<int>s;
    for(int i=0;i<g[u].size();i++){
        int v=g[u][i];
        if(vis[v])continue;
        fa[v]=u;
        int t=dfs(v);
        if(t!=-1)s.push_back(t);
    }
    if(mark[u])s.push_back(u);
//    cout<<u<<" "<<s.size()<<": "<<endl;
//    for(int i=0;i<s.size();i++)printf(" %d",s[i]);
//    puts("");
    for(int i=0;i+1<s.size();i+=2){
        int id1=s[i],id2=s[i+1];
        res.clear();
        while(id1!=u)res.push_back(id1),id1=fa[id1];
        add(id2,u);
        ans.push_back(res);
    }
    if(s.size()&1)return s[s.size()-1];
    return -1;
}
int main()
{
//    freopen("in","r",stdin);
    cin>>n>>m>>k;
    for(int i=0;i<m;i++){
        int u,v;
        scanf("%d%d",&u,&v);
        g[u].push_back(v);
        g[v].push_back(u);
    }
    while(k--){
        int x;
        scanf("%d",&x);
        mark[x]=1;
    }
    for(int i=1;i<=n;i++)if(!vis[i])dfs(i);
    cout<<ans.size()<<endl;
    for(int i=0;i<ans.size();i++){
        cout<<ans[i].size()-1;
        for(int j=0;j<ans[i].size();j++){
            printf(" %d",ans[i][j]);
        }
        puts("");
    }
    return 0;
}
