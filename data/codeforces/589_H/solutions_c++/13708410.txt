#include <cstdio>

#include <cmath>

#include <cstring>

#include <algorithm>

#include <iostream>

#include <queue>

#include <vector>



using namespace std;



typedef long long LL;


vector<int> ans[50005],v;
int fa[50005];
vector<int> g[50005];
int n,m,k,x,y;
int col[50005];
bool vis[50005];
int num;
int dfs(int x,int ga)
{
    int dq,now;
    fa[x]=ga;
    vis[x]=true;
    if (col[x]) now=x;else now=0;
    for (int i=0;i<g[x].size();++i)
    {
        int y=g[x][i];
        if (vis[y]) continue;
        dq=dfs(y,x);
        if (dq==0) continue;
        if (now==0)
        {
            now=dq;
            continue;
        }
        else
        {
            ++num;
            ans[num].clear();
            v.clear();
            while (dq!=x)
            {
                v.push_back(dq);
                dq=fa[dq];
            }
            for (int i=0;i<v.size();++i) ans[num].push_back(v[i]);
            ans[num].push_back(x);
            v.clear();
            while (now!=x)
            {
                v.push_back(now);
                now=fa[now];
            }
            for (int i=v.size()-1;i>=0;--i) ans[num].push_back(v[i]);
            now=0;
        }
    }
    return now;
}

int main()

{
    scanf("%d%d%d",&n,&m,&k);
    for (int i=1;i<=m;++i)
    {
        scanf("%d%d",&x,&y);
        g[x].push_back(y);
        g[y].push_back(x);
    }
    memset(col,0,sizeof(col));
    for (int i=1;i<=k;++i)
    {
        scanf("%d",&x);
        col[x]=1;
    }
    memset(vis,0,sizeof(vis));
    for (int i=1;i<=n;++i)
    {
        if (vis[i]) continue;
        dfs(i,0);
    }
    printf("%d\n",num);
    for (int i=1;i<=num;++i)
    {
        printf("%d ",ans[i].size()-1);
        for (int j=0;j<ans[i].size();++j) printf("%d ",ans[i][j]);
        printf("\n");
    }

    return 0;

}