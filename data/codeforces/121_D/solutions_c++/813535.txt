#include	<iostream>
#include	<cstdio>
#include	<cstdlib>
#include	<cstring>
#include	<cmath>
#include	<algorithm>
#define  oo 2000000000000000000LL
#define  Maxn 1000000
using namespace std;
long long l[Maxn],r[Maxn],x[Maxn],Left[Maxn],Right[Maxn],
m,i,j,n,k,sum,ans,head,tail,total;
bool   cmp(long long a,long long b){return (a<b);}
int main()
{
	//freopen("input.txt","r",stdin);
	//freopen("output.txt","w",stdout);
	scanf("%d %I64d",&n,&k);m=oo;
	for (i=1;i<=n;i++)
	{
		scanf("%I64d %I64d",&l[i],&r[i]);
		if (m>r[i]-l[i]+1) m=r[i]-l[i]+1;
        //cout<<l[i]<<" "<<r[i]<<endl;
	}
	head=0;tail=0;x[0]=0;
	while (head<=tail)
	{
		if (1.0*x[head]*10+4<oo)
		x[++tail]=x[head]*10+4;
		if (1.0*x[head]*10+7<oo)
		x[++tail]=x[head]*10+7;
		head++;
	}
	x[tail+1]=oo;
	sort(l+1,l+n+1,cmp);j=n;sum=0;
    //for (i=1;i<=n;i++) cout<< l[i] << endl;
	for (i=tail;i>0;i--)
	{
		while (j>0 && x[i]<l[j] && sum!=oo) {sum+=(l[j]-x[i]);j--;if (sum>oo) sum=oo;}
		Left[i]=sum;
		if (1.0*(n-j)*(x[i]-x[i-1])>2E18 || sum==oo) sum=oo; else     
		{
			sum=sum+(n-j)*(x[i]-x[i-1]);       
			if (sum>oo) sum=oo;     
		} 
	}
	sort(r+1,r+n+1,cmp);j=1;sum=0;
	for (i=1;i<=tail;i++)
	{
		while (j<=n && r[j]<x[i] && sum!=oo){sum+=x[i]-r[j];j++;if (sum>oo) sum=oo;}
		Right[i]=sum;
		if (1.0*(j-1)*(x[i+1]-x[i])>2E18 || sum==oo) sum=oo; else
		{
			sum=sum+(j-1)*(x[i+1]-x[i]);
			if (sum>oo) sum=oo;
		}
	}
    
	ans=0;j=0;
	for (i=1;i<=tail;i++)
	{
		if (j<i-1) j=i-1;
		while (j<tail)
		{
			if (x[j+1]-x[i]+1>m) break;
			total=Left[i]+Right[j+1];
			if (total<=k) j++; else break;
		}
         if (j-i+1>ans) ans=j-i+1;
	}
	cout<< ans <<endl;
	return 0;
}
