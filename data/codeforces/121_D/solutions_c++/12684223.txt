//求真立人跪涛爷
//哲教就是强，膜拜代码！ 
#include<cstdio>
#include<algorithm>
#define N 100005
using namespace std;
typedef long long LL;
typedef long double LD;
LD Lmove,Rmove,sumL,sumR;
LL move,small,L[N],R[N],a[1<<19];
int l,r,n,m,ans,p,q,i;
void dfs(int k,LL now)
{
	if (now) a[++m]=now;
	if (k>18) return;
	dfs(k+1,now*10ll+4);dfs(k+1,now*10ll+7);
}
int check(LL x,LL y)
{
	if (y-x+1>small) return 0;
	while (p<n&&L[p+1]<=x) sumL-=L[++p];
	while (q<n&&R[q+1]<y) sumR+=R[++q];
	Lmove=sumL-(LD)(n-p)*(LD)x;
	Rmove=(LD)q*(LD)y-sumR;
	return Lmove+Rmove<=move;
}
int main()
{
	scanf("%d%I64d",&n,&move);
  dfs(1,0);sort(a+1,a+m+1);small=1e18;
  for (i=1;i<=n;i++) 
		scanf("%I64d%I64d",&L[i],&R[i]),small=min(small,R[i]-L[i]+1);
  sort(L+1,L+n+1);sort(R+1,R+n+1);
  for (i=1;i<=n;i++) sumL+=L[i];p=0;q=0;
  for (l=1;l<=m;l++) {
  	r=max(r,l);
  	while (r<=m&&check(a[l],a[r])) r++;
  	ans=max(ans,r-l);
  }printf("%d\n",ans);
}