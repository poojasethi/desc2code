#include<cstdio>
#include<cstring>
char s[100001],a[101],b[101],*x,*y,*c,*d;
main(){
    scanf("%s%s%s",s,a,b);
    x=strstr(s,a);
    if(x)
        x=strstr(x+strlen(a),b);
    c=strrev(a);
    d=strrev(b);
    y=strstr(s,d);
    if(y)
        y=strstr(y+strlen(d),c);
    if(x&&y)
        printf("both");
    else if(x)
        printf("forward");
    else if(y)
        printf("backward");
    else
        printf("fantasy");
}