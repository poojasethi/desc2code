#include<algorithm>
#include<cstdio>
#include<cstring>
#define N 111111
using namespace std;
char a[N],b[N],c[N];
int main(){
  scanf("%s%s%s",a,b,c);
  bool forward=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  reverse(a,a+strlen(a));
  bool backward=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  if(forward&&backward)puts("both");
  else if(forward)puts("forward");
  else if(backward)puts("backward");
  else puts("fantasy");
  return 0;
}