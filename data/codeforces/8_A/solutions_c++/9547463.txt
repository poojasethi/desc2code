//IN THE NAME OF MY CREATOR//
#include<bits/stdc++.h>
#include<string>
using namespace std;
int main()
{
    char a[100001],b[100001],c[100001];
    scanf("%s%s%s",a,b,c);
    bool f1=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
    reverse(a,a+strlen(a));
    bool f2=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);

    if(f1&&f2)
        puts("both");
    else if(f1)
        puts("forward");
    else if(f2)
        puts("backward");
    else
        puts("fantasy");

    return 0;
}
