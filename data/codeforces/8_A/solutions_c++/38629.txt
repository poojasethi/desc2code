#include<algorithm>
#include<cstdio>
#include<cstring>
#define N 111111
using namespace std;
char a[N],b[N],c[N];
int main(){
  scanf("%s%s%s",a,b,c);
  bool ff=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  reverse(a,a+strlen(a));
  bool bb=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  if(ff&&bb)puts("both");
  else if(ff)puts("forward");
  else if(bb)puts("backward");
  else puts("fantasy");
  return 0;
}