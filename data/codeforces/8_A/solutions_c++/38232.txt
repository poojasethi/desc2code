#include <iostream>
#include <string>
using namespace std;
int main() {
    string a, b, c;
    cin >> a >> b >> c;
    string ra(a.rbegin(),a.rend());

    int r = 0;
    if (a.find(b) != string::npos && a.find(c, a.find(b)+b.length()) != string::npos) r += 1;
    if (ra.find(b) != string::npos && ra.find(c, ra.find(b)+b.length()) != string::npos) r += 2;

    string output[] = {"fantasy", "forward", "backward", "both"};
    cout << output[r] << endl;
}
