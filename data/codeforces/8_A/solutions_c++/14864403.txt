#include<bits/stdc++.h>

using namespace std;

char s[100010],p1[110],p2[110],*x,*y,*a,*b;

int main(void)
{
	scanf("%s%s%s",s,p1,p2);
	x=strstr(s,p1);
	if(x)
	{x=strstr(x+strlen(p1),p2);}
	a=strrev(s);
	y=strstr(s,p1);
	if(y)
	{y=strstr(y+strlen(p1),p2);}
	if(x&&y)
	{
		cout<<"both";
	}
	else if(x)
	{
		cout<<"forward";
	}
	else if(y)
	{
		cout<<"backward";
	}
	else
	{
		cout<<"fantasy";
	}

	return 0;
}