#include <iostream>
#include<algorithm>
#include <string>
using namespace std;
int main()
{
    long f=0,i=string::npos;
    int x;
    string a,s,b,t[4]={"fantasy","forward","backward","both"};
    cin>>s>>a>>b;
    x=s.find(a);
    
    if((x!=i)&&(s.find(b,(x+a.length()))!=i))f++;
    reverse(s.begin(),s.end());
    x=s.find(a);
    if((x!=i)&&(s.find(b,(x+a.length()))!=i))f+=2;
     cout<<t[f]<<endl;
    //system("pause");
    return 0;}
    
