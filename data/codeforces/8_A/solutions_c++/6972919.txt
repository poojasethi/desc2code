#include<algorithm>
#include<cstring>
#include<cstdio>
#define n 100010
using namespace std;
char a[n],b[n],c[n];
int main(){
	scanf("%s%s%s",a,b,c);
	bool l=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
	reverse(a,a+strlen(a));
	bool r=strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
	if(l&&r)puts("both");
	else if(l)puts("forward");
	else if(r)puts("backward");
	else puts("fantasy");
	return 0;
}
