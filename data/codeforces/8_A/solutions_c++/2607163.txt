#include <cstdio>
#include <string>
#include <iostream>
#include <algorithm>
using namespace std;
string s,a,b;
int main(){
    cin>>s>>a>>b;
    string s2=s;
    reverse(s2.begin(),s2.end());
    bool x,y;
    x=s.find(a)!=-1&&s.find(b,s.find(a)+a.length())!=-1;
    y=s2.find(a)!=-1&&s2.find(b,s2.find(a)+a.length())!=-1;
    if (x&&y) cout<<"both\n";
    else if (x) cout<<"forward\n";
    else if (y) cout<<"backward\n";
    else cout<<"fantasy\n";
    return 0;
}
