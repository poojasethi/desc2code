#include<cstdio>

#include<cstring>

int main(){

	char arr[100005],a[105],b[105];
	scanf("%s %s %s",arr,a,b);
	char *m,*p,*q,*n;
	m=strstr(arr,a);
	if(m)m=strstr(m+strlen(a),b);
	p=strrev(a);
	q=strrev(b);
	n=strstr(arr,q);
	if(n)n=strstr(n+strlen(b),a);

	if(m && n)printf("both");
	else if(m)printf("forward");
	else if(n)printf("backward");
	else printf("fantasy");
	return 0;
}