#include <stdio.h>
#include <string.h>
#include <algorithm>

using namespace std;

char a[100001],b[101],c[101];

int main(){
	scanf("%s%s%s",a,b,c);
	
	bool ida = strstr(a,b)  && strstr( strstr(a,b)+strlen(b), c );
	reverse( a, a + strlen(a) );
	bool vuelta = strstr(a,b) && strstr( strstr(a,b)+strlen(b), c);
	
	if ( ida && vuelta ) puts("both");
	else if (ida) puts("forward");
	else if (vuelta) puts("backward");
	else puts("fantasy");
	
	return 0;
}
