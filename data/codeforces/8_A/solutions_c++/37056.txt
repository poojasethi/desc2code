#include <iostream>
#include <string>
#include <algorithm>

using namespace std;

int main(){
	string s, a, b;
	string res[4] = {
		"fantasy", "forward", "backward", "both"
	};
	while(cin >> s >> a >> b){
		int type = 0;
		int p1 = s.find(a);
		if(p1!=-1) type |= (s.find(b, p1+a.size()) != -1);
		reverse(s.begin(), s.end());
		int p2 = s.find(a);
		if(p2!=-1) type |= 2*(s.find(b, p2+a.size()) != -1);
		cout << res[type] << endl;
	}
}