#include<iostream>
#include<algorithm>
#include<string>

using namespace std;

int main()
{
	int son=0;
	string cev[4]={"fantasy","forward","backward","both"};
	string s,s2,s3;
	cin >> s >> s2 >> s3;
	if(s.find(s2)!=-1 && s.find(s3,s.find(s2)+s2.length())!=-1) son+=1;
	reverse(s.begin(),s.end());
	if(s.find(s2)!=-1 && s.find(s3,s.find(s2)+s2.length())!=-1) son+=2;
	cout<<cev[son];
	return 0;
}
