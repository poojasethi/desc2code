#include<cstdio>
#include<string>
#include<iostream>
#include<algorithm>
using namespace std;
int main(void)
{
string s,a,b;
cin>>s>>a>>b;
int go=0,back=0;
int na=s.find(a),nb;
if(na!=-1 && (nb=s.substr(na+a.size()).find(b))>=0)
go=1;
reverse(s.begin(),s.end());
na=s.find(a);
if(na!=-1 && (nb=s.substr(na+a.size()).find(b))>=0)
back=1;
if(go&&back) 
cout<<"both";
else if(go)
cout<<"forward";
else if(back)
cout<<"backward";
else
cout<<"fantasy";
return 0;
}                  
   