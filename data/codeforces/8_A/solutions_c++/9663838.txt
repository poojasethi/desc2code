#include<bits/stdc++.h>
using namespace std;
char s[100010], a[100010], b[100010];
int main() {
	scanf("%s%s%s", s, a, b);
	bool f1 = strstr(s, a) && strstr(strstr(s, a) + strlen(a), b);
	reverse(s, s+strlen(s));
	bool f2 = strstr(s, a) && strstr(strstr(s, a) + strlen(a), b);
	if (f1 && f2) puts("both");
	else if (f1) puts("forward");
	else if (f2) puts("backward");
	else puts("fantasy");
	return 0;
}
