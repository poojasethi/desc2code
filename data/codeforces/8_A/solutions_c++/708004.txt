//IN THE NAME OF GOD
#include <iostream>
#include <algorithm>
using namespace std;
string s, s1, s2, a[4] = {"fantasy", "forward", "backward", "both"};
int out, x;
int main(){
    std::cin >> s >> s1 >> s2;
    if((x = s.find(s1))!= -1 && s.find(s2,x + s1.size()) != -1)out++;
    reverse(s.begin(),s.end());
    if((x = s.find(s1))!= -1 && s.find(s2,x + s1.size()) != -1)out += 2;
    std::cout << a[out] <<"\n";
}