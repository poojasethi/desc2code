#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
char s[100500],a[200],b[200];
int main(){
    int n=strlen(gets(s));
    int x=strlen(gets(a));
    int y=strlen(gets(b));
    int flag=0;
    if(strstr(s,a) && strstr(strstr(s,a)+x,b)) flag|=1;
    reverse(s,s+n);
    if(strstr(s,a) && strstr(strstr(s,a)+x,b)) flag|=2;
    const char* ans[]={"fantasy","forward","backward","both"};
    puts(ans[flag]);
}