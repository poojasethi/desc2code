#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int main()
{
    string s1,s2,s3;
    cin>>s1>>s2>>s3;
    int a,b;
    a=s1.find(s2);
    if(a!=-1)a=s1.find(s3,a+s2.size());
    reverse(s1.begin(),s1.end());
    b=s1.find(s2);
    if(b!=-1)b=s1.find(s3,b+s2.size());
    if(a!=-1&&b!=-1)printf("both\n");
    else if(a!=-1)printf("forward\n");
    else if(b!=-1)printf("backward\n");
    else printf("fantasy\n");
}
