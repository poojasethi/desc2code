#include <string.h>
#include <cstring>
#include <cstdio>

using namespace std;

int main(){
    char s[100005], a[105], b[105];
    char *x, *y, *c, *d;
    scanf("%s%s%s",s,a,b);
    x = strstr(s, a);
    if(x) x = strstr(x+strlen(a), b);
    c = strrev(a);
    d = strrev(b);
    y = strstr(s, d);
    if(y) y = strstr(y+strlen(d), c);
    if(x&&y) printf("both\n");
    else if(x) printf("forward\n");
    else if(y) printf("backward\n");
    else printf("fantasy\n");
return 0;}