#include <iostream>
#include<cstring>
#include<cstdio>
#include<algorithm>
using namespace std;
string s,a,b;
bool check()
{
	int pos=s.find(a);
	if(pos==-1) return false;
    string s2 = s.substr(pos+a.length());
	return (s2.find(b)!=-1);
}
int main()
{
	int i,j,m,n,k,t;
	cin>>s>>a>>b;
	bool f1=check();
	reverse(s.begin(),s.end());
	bool f2=check();
	if(!f1&&!f2) printf("fantasy\n");
	else if(f1&&f2) printf("both\n");
	else if(f1) printf("forward\n");
	else printf("backward\n");
}
