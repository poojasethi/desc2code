#include<cstdio>
#include<cstring>
char g[100005],a[100005],b[100005],r[100005],*p1,*p2;
int len,ans=0;
int main(){
	gets(g);
	gets(a);
	gets(b);
	len = strlen(g);
	
	for (int i=0;i<len;++i) r[i] = g[len-1-i];
	r[len] = '\0';
	
	if ( (p1 = strstr(g,a)) ){
		if (p2 = strstr(p1+strlen(a),b)) ans+=1;
	}
	if ( (p1 = strstr(r,a)) ){
		if (p2 = strstr(p1+strlen(a),b)) ans+=2;
	}
	if (ans==0) puts("fantasy");
	if (ans==1) puts("forward");
	if (ans==2) puts("backward");
	if (ans==3) puts("both");
	

	return 0;
}
