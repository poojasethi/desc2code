#include<iostream>
using namespace std;
int main()
{	
	string a, b, c, d;
	char t;
	int x, y=-1, z=-1, i, j;
	cin >> a >> b >> c;
	x=a.find(b);
	if(x>=0){
		y=a.find(c, x+b.size());
	}
	for (i=0,j=a.size()-1; i<j; i++,j--){
		a[i]^=a[j];
		a[j]^=a[i];
		a[i]^=a[j];
	} 
	x=a.find(b);
	if(x>=0){
		z=a.find(c, x+b.size());
	}
	if (y>=0 && z>=0) cout<<"both"<<endl;
	else if (y>=0) cout<<"forward"<<endl;
	else if (z>=0) cout<<"backward"<<endl;
	else cout<<"fantasy"<<endl;
	return 0;
}
