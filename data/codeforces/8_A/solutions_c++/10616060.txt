#include<iostream>
#include<string>
#include<algorithm>
using namespace std;
int main(){

	string a,b,c;
	cin>>a>>b>>c;
	int d=0;
	int x=a.find(b);
	int y=a.rfind(c);
	int z=a.length();
	if(x>=0&&y>=0&&x<=z&&y<=z&&x<=y&&y>=(x+b.length())) d=1;
//	cout<<x<<" "<<y;
	reverse(a.begin(),a.end());
	x=a.find(b);
	y=a.rfind(c);
	
	if(x<=z&&y<=z&&x>=0&&y>=0&&x<=y&&(y>=(x+b.length())))if(d==1) d=3; else d=2;


	if(d==1) cout<<"forward";
	else if(d==2) cout<<"backward";
	else if(d==3) cout<<"both";
	else cout<<"fantasy";	
	return 0;
}
