#include<cstdio> 
#include<cstring>
#include<iostream>
char str[100005];
using namespace std;
int main(){
    char s1[105],s2[105];
    char *b,*c,*x,*y;
    scanf("%s%s%s",str,s1,s2);
    x=strstr(str,s1);if(x)x=strstr(x+strlen(s1),s2);
    b=strrev(s1);c=strrev(s2);
    y=strstr(str,c);if(y)y=strstr(y+strlen(c),b);
    if(x&&y)printf("both\n");
    else if(x)printf("forward\n");
    else if(y)printf("backward\n");
    else printf("fantasy\n");
    //system("pause");
    return 0;    
}