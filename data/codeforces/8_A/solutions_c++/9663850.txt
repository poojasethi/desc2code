#include <bits/stdc++.h>
#include <string>
using namespace std;
#define maxn 100001
char a[maxn],b[maxn],c[maxn];

int main()
{
  scanf("%s%s%s",a,b,c);
  bool f1,f2;
  f1 = strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  reverse(a,a+strlen(a));
  f2 = strstr(a,b)&&strstr(strstr(a,b)+strlen(b),c);
  if(f1&&f2)printf("both");
  else if(f1==0&&f2==0)printf("fantasy");
  else if(f1&&f2==0)printf("forward");
  else printf("backward");
  return 0;
}

