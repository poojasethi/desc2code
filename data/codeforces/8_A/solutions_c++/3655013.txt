#include <iostream>
#include <algorithm>
#include <string>
using namespace std;
string s,a,b,ans[4]={"fantasy","forward","backward","both"};
long x,f=0,i=string::npos;
int main() {
	cin >> s >> a >> b;
	x=s.find(a);
	if ((x!=i)&&(s.find(b,x+a.length())!=i)) f++;
	reverse(s.begin(),s.end());
	x=s.find(a);
	if ((x!=i)&&(s.find(b,x+a.length())!=i)) f+=2;
	cout << ans[f] << endl;
	return 0;
}