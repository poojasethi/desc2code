#include <cstdio>
#include <algorithm>
#include <cstring>
using namespace std;

char s[200000];
char a[200], b[200];

int main() {
    scanf("%s%s%s",s,a,b);
    int n = strlen(s);
    bool ko[2] = {0};
    int na = strlen(a);
    for (int k=0; k<2; k++) {
        char *p = strstr(s, a);
        if (p && strstr(p+na, b))
            ko[k] = 1;
        reverse(s,s+n);
    }
    if (*ko && ko[1])       puts("both");
    else if (*ko)   puts("forward");
    else if (ko[1]) puts("backward");
    else    puts("fantasy");
}
