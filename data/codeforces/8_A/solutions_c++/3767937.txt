#include<stdio.h>
#include<string.h>
char A[100005],x1[105],x2[105];
void rev(char* A)
{
	int i,j;
	char t;
	for(i=0,j=strlen(A)-1;i<j;i++,j--)
	{
		t=A[i];
		A[i]=A[j];
		A[j]=t;
	}
}
int main()
{
	char *p;
	bool fr=false,bc=false;
	scanf("%s %s %s",A,x1,x2);
	if(p=strstr(A,x1))
		if(strstr(p+strlen(x1),x2))
			fr=true;	

	rev(A);
	if(p=strstr(A,x1))
		if(strstr(p+strlen(x1),x2))
			bc=true;

	if(bc && fr) puts("both");
	else if(bc) puts("backward");
	else if(fr) puts("forward");
	else puts("fantasy");
	return 0;
}
