#include <bits/stdc++.h>
using namespace std;
bool r[1000];
bool arr[1000][1000];
int ar[1000][1000];
int rr[1000];
int main()
{
    string s,a,b,str[4]={"fantasy","forward","backward","both"};
    int x=0,y=0,z=0,m=0,c=0;
    cin>>s>>a>>b;
    x=s.find(a);
    y=s.find(b,x+a.size());
    if(x!=-1 && y!=-1)c++;
    reverse(s.begin(),s.end());
    z=s.find(a);
    m=s.find(b,z+a.size());
    if(z!=-1 && m!=-1)c+=2;
    cout<<str[c];
    return 0;
}
