atob = str(raw_input())
a = str(raw_input())
b = str(raw_input())
rev = atob[::-1]
forw = False
back = False

if (atob.find(a)+len(a)-1) < atob.rfind(b) and atob.find(a) != -1:
    forw = True
if (rev.find(a)+ len(a)-1) < rev.rfind(b) and rev.find(b) != -1:
    back = True

if forw and back:
    print "both"
elif forw:
    print "forward"
elif back:
    print "backward"
else:
    print "fantasy"