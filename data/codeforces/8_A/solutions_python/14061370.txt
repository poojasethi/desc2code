import re
s = raw_input()
p = raw_input() + ".*" + raw_input()
a = re.search(p, s)
b = re.search(p, s[::-1])
if a and b:
	print 'both'
elif a:
	print 'forward'
elif b:
	print 'backward'
else:
	print 'fantasy'