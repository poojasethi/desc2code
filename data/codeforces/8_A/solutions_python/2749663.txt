from re import *
s = raw_input()
p = raw_input() + '.*' + raw_input()
print ['fantasy', 'backward', 'forward', 'both'][(search(p, s) > 0) * 2 + (search(p, s[ : : -1]) > 0)]