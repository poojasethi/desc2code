from sys import stdin
a = stdin.readline().strip()
b = list(a)
b.reverse()
b = ''.join(b)
c = stdin.readline().strip()
d = stdin.readline().strip()
f = 0
g = 0
m = a.find(c)
if m!=-1:
	a = a[m+len(c):]
	if a.find(d)!=-1:
		f=1
	
m = b.find(c)
if m!=-1:
	b = b[m+len(c):]
	if b.find(d)!=-1:
		g=1


if f and g:
	print "both"
elif f:
	print "forward"
elif g:
	print "backward"
else:
	print "fantasy"