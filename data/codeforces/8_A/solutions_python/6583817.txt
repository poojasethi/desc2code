import re
s = raw_input()
s1 = raw_input()
s2 = raw_input()
rs1 = s1[::-1]
rs2 = s2[::-1]
pattern = '.*%s.*%s.*' %(s1,s2)
matchObj = re.match(pattern,s)
forward = False
backward = False
if matchObj:
	forward = True
pattern = ".*%s.*%s.*" %(rs2,rs1)
matchObj = re.match(pattern,s)
if matchObj:
	backward = True

if forward and backward:
	print "both"
elif forward:
	print "forward"
elif backward:
	print "backward"
else:
	print "fantasy"

