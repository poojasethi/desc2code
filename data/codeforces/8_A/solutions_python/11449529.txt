import re
a=raw_input()
s=raw_input()+".*"+raw_input()

f=a
b=a[::-1]
print ['fantasy', 'backward', 'forward', 'both'][(re.search(s, f) > 0) * 2 + (re.search(s,b) > 0)]

