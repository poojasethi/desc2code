from re import *
s = raw_input()
f1 = raw_input()
f2 = raw_input()

n1 = len(findall(f1+'[a-z]*'+f2,s))
n2 = len(findall(f1+'[a-z]*'+f2,s[::-1]))
if n1>0 and n2>0:
	print "both"
elif n1>0:
	print "forward"
elif n2>0:
	print "backward"
else:
	print "fantasy"
