s=raw_input().strip()
a=raw_input().strip()
b=raw_input().strip()
f=False
A=s.find(a)
if A!=-1:
    B=s[A+len(a):].find(b)
    if B!=-1:
        f=True
ba=False
s=s[::-1]
A=s.find(a)
if A!=-1:
    B=s[A+len(a):].find(b)
    if B!=-1:
        ba=True
if f:
    if ba:print 'both'
    else:print 'forward'
elif ba:
    print 'backward'
else:
    print 'fantasy'

