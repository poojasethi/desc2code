s = raw_input()
r = s[::-1]
a = raw_input()
b = raw_input()

f = 0; w = 0

i = s.find(a)
if (i != -1) and (s.find(b,i+len(a)) != -1) :
	f = 1

i = int(r.find(a))
if (i != -1) and (r.find(b,i+len(a)) != -1) :
	w = 1

if f == 1 and w == 1: print "both"
elif f == 1: print "forward"
elif w == 1: print "backward"
else: print "fantasy"
