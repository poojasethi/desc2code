#dive into work with strings

def solve(o):
 o1=o.find(s1)
 if o1==-1: return 0
 o2=o.find(s2,o1+len(s1))
 if o2==-1: return 0
 return 1


rez=[["fantasy","backward"],
     ["forward","both"]]

rt = raw_input()
s1 = raw_input()
s2 = raw_input()

i1 = solve(rt)
i2 = solve(rt[::-1])
print rez[i1][i2]
