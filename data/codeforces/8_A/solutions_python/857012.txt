s=[raw_input() for i in range(3)]
def c(i,a,b):
    return a in i and  s[2] in i[i.index(a)+len(a):]
print ["fantasy","forward","backward","both"][c(s[0],s[1],s[2])+(c(s[0][::-1],s[1],s[2])<<1)]
