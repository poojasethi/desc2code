flags=raw_input().strip()
A=raw_input().strip()
B=raw_input().strip()

X=[False,False]
n1=flags.find(A)
n2=flags[n1+len(A):].find(B)
if n1!=-1 and n2!=-1:
	X[0]=True
flags=flags[::-1]
n1=flags.find(A)
n2=flags[n1+len(A):].find(B)
if n1!=-1 and n2!=-1:
	X[1]=True
if X[0] and X[1]:
	print 'both'
elif X[0]:
	print 'forward'
elif X[1]:
	print 'backward'
else:
	print 'fantasy'


