import sys
import re

p, a, b = map(lambda x: x.strip(), sys.stdin.readlines());

x = re.search(a+".*"+b, p)
y = re.search(a+".*"+b, p[::-1])

if x is not None:
    if y is not None:
        print "both"
    else:
        print "forward"
else:
    if y is not None:
        print "backward"
    else:
        print "fantasy"
