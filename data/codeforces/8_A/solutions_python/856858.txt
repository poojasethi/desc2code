A=raw_input()
D=A[::-1]
B=raw_input()
C=raw_input()
forward=0
backward=0
if B in A and C in A[A.index(B)+len(B): ] :
    forward=1
if B in D and C in D[D.index(B)+len(B): ] :
    backward=1      
if backward and forward:
    print "both"
elif forward :
    print "forward"
elif backward :
    print "backward"
else:
    print "fantasy"
    
    
