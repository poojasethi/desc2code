import re

colors = raw_input().strip()
colors_reversed = colors [::-1]
first = raw_input().strip()
second = raw_input().strip()

forward = re.search('{0}\w*{1}'.format(first, second), colors)
backward = re.search('{0}\w*{1}'.format(first, second), colors_reversed)

if forward and backward:
	print 'both'
elif forward and not backward:
	print 'forward'
elif not forward and backward:
	print 'backward'
else:
	print 'fantasy'