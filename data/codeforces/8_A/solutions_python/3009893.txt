def ok(ss,aa,bb):
		return ss.find(aa) >= 0 and ss[ss.index(aa)+len(aa):].find(bb) > -1	
s = raw_input()
a =raw_input()
b =raw_input()
stt=ok(s,a,b)+ok(s[::-1],a,b)*2
if stt == 1:print 'forward'
elif stt == 2:print 'backward'
elif stt == 3:print 'both'
else:print 'fantasy'
