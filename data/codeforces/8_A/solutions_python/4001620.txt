def find(s, a, b):
	i = s.rfind(b)
	return i >= 0 and a in s[:i]

s, a, b = [raw_input() for i in xrange(3)]
print ['fantasy', 'forward', 'backward', 'both'][find(s, a, b) | (find(s[::-1], a, b) << 1)]