from re import *
s = raw_input()
p = raw_input() + '.*' + raw_input()
a = search(p, s)
b = search(p, s[ : : -1])
if a and b:
	print 'both'
elif a:
	print 'forward'
elif b:
	print 'backward'
else:
	print 'fantasy'