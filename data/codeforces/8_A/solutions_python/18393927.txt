c = raw_input()
s1 = raw_input()
s2 = raw_input()

backward = False
forward = False

x = c.find(s1)

if x > -1:
    if  c[x+len(s1):].find(s2) >-1:
        forward = True

c=c[::-1]
x = c.find(s1)

if x > -1:
    if  c[x+len(s1):].find(s2) >-1:
        backward = True

if forward and backward:
    print "both"        
elif forward:
    print "forward"
elif backward:
    print "backward"

else:
    print "fantasy"