def can_see(s, a, b):
    ai = s.find(a)
    bi = s.find(b, ai + len(a))
    if -1 in (ai, bi):
        return False
    else:
        return True

s = raw_input()
a = raw_input()
b = raw_input()

sr = s[::-1]

t1 = can_see(s, a, b)
t2 = can_see(sr, a, b)

if t1 and t2:
    print 'both'
elif t1:
    print 'forward'
elif t2:
    print 'backward'
else:
    print 'fantasy'

