#/usr/bin

flags, wake1, wake2 = [ raw_input() for _ in xrange(3) ]
fk = flags.find(wake1)
kf = flags.rfind(wake1[::-1])
if fk >= 0 and flags[fk+len(wake1) : ].find( wake2 ) >= 0:
    if kf >= 0 and flags[ : kf].find( wake2[::-1] ) >= 0:
        print 'both'
    else: print 'forward'
elif kf >= 0 and flags[ : kf].find( wake2[::-1] ) >= 0:
    print 'backward'
else: print 'fantasy'