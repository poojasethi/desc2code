import re

e = re.escape
everything = raw_input()
fst = raw_input()
snd = raw_input()
left = True if re.search(e(fst)+'.*'+e(snd), everything) else False
right = True if re.search(e(fst)+'.*'+e(snd), everything[::-1]) else False

if left and right:
  print 'both'
elif left:
  print 'forward'
elif right:
  print 'backward'
else:
  print 'fantasy'



