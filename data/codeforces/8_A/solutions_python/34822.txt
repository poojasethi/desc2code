import sys

t = raw_input()
p1 = raw_input()
p2 = raw_input()

#print t
#print p1
#print p2

pos = t.find(p1)
forward = min(pos, t.find(p2, pos+len(p1)))

t=t[::-1]

pos = t.find(p1)
back = min(pos, t.find(p2, pos+len(p1)))

#print forward
#print back
if forward >=  0 and back >= 0: print "both"
if forward == -1 and back >= 0: print "backward"
if forward >=  0 and back == -1: print "forward"
if forward == -1 and back == -1: print "fantasy"

