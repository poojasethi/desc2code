# -*- coding: UTF-8 -*-

# from itertools import *
# from collections import defaultdict

T = raw_input()
A = raw_input()
B = raw_input()
ans = {4: "both", -9: "forward", -2: "backward", -15: "fantasy"}
code = 0
try:
    T.index(B, T.index(A)+len(A))
    code += 1
except ValueError:
    code -= 5
    
try:
    T = T[::-1]
    T.index(B, T.index(A)+len(A))
    code += 3
except ValueError:
    code -= 10

print ans[code]
