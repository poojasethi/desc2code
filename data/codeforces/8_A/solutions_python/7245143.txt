s,a,b=raw_input(),raw_input(),raw_input()

res='fantasy'
r=s[::-1]
i=s.find(a)
j=s.find(b,i+len(a))
ii=r.find(a)
jj=r.find(b,ii+len(a))

if j>=i and ii<=jj and i>-1 and ii>-1:
    res='both'
elif j>=i and i>-1:
    res='forward'
elif ii<=jj and ii>-1:
    res= 'backward'
    
print res


    
    
    

    
    