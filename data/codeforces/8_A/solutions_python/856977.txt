s=[raw_input() for i in range(3)]
f,b=[False,False]
if s[1] in s[0] and  s[2] in s[0][s[0].index(s[1])+len(s[1]):]:
	f=True
s[0]=s[0][::-1]
if s[1] in s[0] and  s[2] in s[0][s[0].index(s[1])+len(s[1]):]:
	b=True
	
if f and b:
	print "both"
elif f:
	print "forward"
elif b:
	print "backward"
else:
	print "fantasy"

		
