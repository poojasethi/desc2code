flags = raw_input()
str1 = raw_input()
str2 = raw_input()

fwd = False

i1 = flags.find(str1)
if i1 != -1 and flags.find(str2, i1 + len(str1)) != -1:
    fwd = True

flags = flags[::-1]

bwd = False

i1 = flags.find(str1)
if i1 != -1 and flags.find(str2, i1 + len(str1)) != -1:
    bwd = True

if fwd and bwd:
    print "both"
elif fwd:
    print "forward"
elif bwd:
    print "backward"
else:
    print "fantasy"
