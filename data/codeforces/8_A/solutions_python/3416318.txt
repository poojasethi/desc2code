a=raw_input()
b=raw_input()
c=raw_input()
bfw=bbc=False
aux=a.find(b)
if (a.find(c,aux+len(b))!=-1)and (bool(aux+1)):
    bfw=True
a=a[::-1]
aux=a.find(b)
if (a.find(c,aux+len(b))!=-1) and bool(aux+1):
    bbc=True
if (bfw)and(bbc):
    print "both"
elif (bfw):
    print "forward"
elif (bbc):
    print "backward"
else:
    print "fantasy"

