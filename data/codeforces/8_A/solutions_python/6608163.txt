import re
o=raw_input()
r=raw_input() + ".*" + raw_input()
regex=re.compile(r)
f=regex.search(o)>0
b=regex.search(o[::-1])>0
print ["fantasy", "backward", "forward", "both"][b+(f<<1)]
