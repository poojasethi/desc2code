r=raw_input
s=r()
a=r()
b=r()
f=s.find(a)!=-1 and s.find(b, s.find(a)+len(a)) != -1
x=lambda t:''.join(reversed(t))

B=s.rfind(x(a))!=-1 and s.rfind(x(b), 0, s.rfind(x(a))) != -1
print ["fantasy", "forward", "backward", "both"] [f + 2*B]
    