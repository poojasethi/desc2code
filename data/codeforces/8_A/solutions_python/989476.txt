import re

x,y,z = raw_input(),raw_input(),raw_input()

m1 = 1 if re.compile(y+".*"+z).search(x) else 0
m2 = 1 if re.compile(z[::-1]+".*"+y[::-1]).search(x) else 0

print ['fantasy','backward','forward','both'][(m1<<1)+m2]
