def is_forward(s, a, b):
    t = s.find(a)
    if t < 0:
        return False
    if s[t + len(a):].find(b) < 0:
        return False
    return True

orig = raw_input().strip()
a = raw_input().strip()
b = raw_input().strip()

reverse_o = orig[::-1]


a1 = is_forward(orig, a, b)
a2 = is_forward(reverse_o, a, b)

if a1 and a2:
    print 'both'
elif a1:
    print 'forward'
elif a2:
    print 'backward'
else:
    print 'fantasy'
