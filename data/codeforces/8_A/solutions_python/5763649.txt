flags = raw_input()
p1 = raw_input()
p2 = raw_input()

lenp1 = len(p1)
rflags = flags[::-1]

if p1 in flags and p2 in flags[flags.index(p1)+lenp1:] and p1 in rflags and p2 in rflags[rflags.index(p1)+lenp1:]:
    print "both"
elif p1 in flags and p2 in flags[flags.index(p1)+lenp1:]:
    print "forward"
elif p1 in rflags and p2 in rflags[rflags.index(p1)+lenp1:]:
    print "backward"
else:
    print "fantasy"