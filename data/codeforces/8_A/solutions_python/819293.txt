def check(text, s1, s2):
    index1 = text.find(s1)
    if index1 < 0: return False
    index2 = text.find(s2, index1 + len(s1))
    if index2 < 0: return False
    return True

text = raw_input()
s1 = raw_input()
s2 = raw_input()

a = check(text, s1, s2)
text = text[-1::-1]
b = check(text, s1, s2)

if a and b: print("both")
elif a: print("forward")
elif b: print("backward")
else: print("fantasy")