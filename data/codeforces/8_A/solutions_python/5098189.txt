t, a, b = raw_input(), raw_input(), raw_input()
k, l = 0, len(a)
i = t.find(a)
if i + 1 and t.find(b, i + l) + 1: k += 1
t = t[:: -1]
i = t.find(a)
if i + 1 and t.find(b, i + l) + 1: k += 2
print(['fantasy', 'forward', 'backward', 'both'][k])