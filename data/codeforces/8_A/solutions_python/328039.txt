s=raw_input()
x1=raw_input()
x2=raw_input()

def check(a):
  n=len(a)
  j=len(x1)
  k=len(x2)
  f1=n
  for i in xrange(n):
    if a[i:i+j]==x1:
      f1=i+j
      break
  for i in xrange(f1,n):
    if a[i:i+k]==x2:
      return 1
  return 0

f,b=check(s),check(s[::-1])
print["fantasy", "forward", "backward", "both"][f+2*b]