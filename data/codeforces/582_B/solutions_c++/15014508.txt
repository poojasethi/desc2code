#include<iostream>
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int a[20000],num[20000];
int dp[20000];
int main()
{
    int n,m,i,j,t,k,tt,ans,mmax;
    cin>>n>>m;
    mmax=0;
    ans=0;
    for(i=1;i<=n;i++) {
        cin>>a[i];
        num[a[i]]++;
        mmax=max(mmax,num[a[i]]);
    }
    t=min(n,m);
    k=t;
    tt=0;
    while(--k) {
        tt+=n;
        for(i=1;i<=n;i++) a[i+tt]=a[i];
    }
    for(i=1;i<=n*t;i++) {
        dp[i]=1;
        for(j=1;j<i;j++) {
            if(a[j]<=a[i]) dp[i]=max(dp[i],dp[j]+1);
        }
        ans=max(dp[i],ans);
    }
    ans+=mmax*(m-t);
    cout<<ans<<endl;
    return 0;
}




