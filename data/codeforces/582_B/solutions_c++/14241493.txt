#include <iostream>
#include <algorithm>
#include <cstdio>
#include <cstdlib>

using namespace std;

int N,T,ar[11000],dp[11000],as[350];

int main(){

	cin >> N >> T;
	for( int i=1 ; i<=N ; i++ ) scanf(" %d",&ar[i]),as[ar[i]]++;
	for( int i=N+1 ; i<=N*N ; i++ ) ar[i]=ar[i-N];

	int M=min( N*N , N*T );
	int res=0;
	for( int i=1 ; i<=M ; i++ ){
		int mx=0;
		for( int j=i-1 ; j ; j-- ) if( ar[j] <= ar[i] && dp[j] > mx ) mx=dp[j];
		dp[i]=mx+1;
		res=max( res , mx+1 );
	}

	if( N >= T ){
		cout << res << endl;
		return 0;
	}

	T-=N;
	int qq=0;
	for( int i=N*N-N+1 ; i<=N*N ; i++ ){
		int t=res-dp[i];
		qq=max( qq , as[ar[i]]*T+dp[i]+t );
	}
	cout << qq << endl;

	return 0;
}
