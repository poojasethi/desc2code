#include <algorithm>
#include <cstdio>
using namespace std;
const int N = 105;
const int M = 305;
const int L = 15*N*N;
int n, m, a[L], f[L], h[M];
int main() {
	scanf("%d%d", &n, &m);
	int r = min(m, 15*n), l = r*n;
	for (int i = 0; i < n; i++) scanf("%d", a+i);
	for (int i = 1; i < r; i++)
		for (int j = 0; j < n; j++)
			a[i*n+j] = a[j];
	int ans = 0;
	for (int i = 0; i < l; i++) {
		int x = upper_bound(f, f+ans, a[i])-f;
		f[x] = a[i];
		if (x == ans) ans++;
	}
	if (m > r) {
		for (int i = 0; i < n; i++) h[a[i]]++;
		int cnt = 0;
		for (int i = 0; i < M; i++) cnt = max(cnt, h[i]);
		ans += (m-r)*cnt;
	}
	printf("%d\n", ans);
	return 0;
}
