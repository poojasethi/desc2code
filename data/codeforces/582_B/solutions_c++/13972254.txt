#include<cstdio>
#include<cstring>
#include<iostream>
using namespace std;
long long ans;
int f[10010],i,j,n,m,a[10010],T,sum[310];
int main()
{
	scanf("%d%d",&n,&T); m=min(n,T)*n;
	for (int i=1;i<=n;i++) scanf("%d",&a[i]);
	for (int i=1+n;i<=m;i++) a[i]=a[i-n];
	for (int i=1;i<=n;i++) sum[a[i]]++;
	
	memset(f,1,sizeof(f)); f[0]=-1;
	for (int i=1;i<=m;i++)
	{
		int l=0,r=i,num=0;
		do
		{
			int mid=(l+r)/2;
			if (f[mid]<=a[i]) num=mid,l=mid+1;
			else r=mid-1;
		}while(l<=r);
		ans=max(ans,(long long)num+1);
		f[num+1]=min(a[i],f[num+1]);
	}
	
	long long num=0;
	for (int i=1;i<=300;i++) num=max(num,(long long)sum[i]);
	printf("%I64d\n",ans+num*max(0,T-n));
}