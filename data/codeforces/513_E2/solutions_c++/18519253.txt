#include<cstdio>
#include<algorithm>
#include<cstring>
using namespace std;

int f[30010][210][2][2][2],c[30010],n,k,ans;

int main(){
	scanf("%d%d",&n,&k);
	memset(f,128,sizeof(f));
	f[0][0][0][0][0]=0;
	for(int i=1;i<=n;i++) scanf("%d",c+i);
	for(int i=1;i<=n;i++)
	 for(int j=0;j<=k;j++){
	 	for(int a=0;a<2;a++)
		 for(int b=0;b<2;b++){
			f[i][j][a][b][1]=max(f[i-1][j][a][b][0],f[i-1][j][a][b][1]);
			if(j==0) continue;
			int t1=f[i-1][j][a][b][0],t2=-1e8;
			if(j!=1) t1+=c[i]*(a?1:-1);
			if(j!=k) t1+=c[i]*(b?1:-1);
			for(int aa=0;aa<2;aa++)
			 for(int bb=0;bb<2;bb++)
			 t2=max(t2,f[i-1][j-1][aa][!a][bb]);
			if(j!=1) t2+=c[i]*(a?1:-1);
			if(j!=k) t2+=c[i]*(b?1:-1);
			f[i][j][a][b][0]=max(t1,t2);
		}
	}
	for(int a=0;a<2;a++)
	 for(int b=0;b<2;b++)
	  for(int c=0;c<2;c++)
	  ans=max(ans,f[n][k][a][b][c]);
	printf("%d\n",ans);
	return 0;
}