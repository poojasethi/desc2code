#include <iostream>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <map>
using namespace std;

int main(void)
{
	int n;
	long long m;
	cin >> n;
	vector <int> a(2*n);
	map <int,int> M;
	for (int i = 0; i < 2*n; i++)
	{
		scanf("%i",&a[i]);
		if ( i  >= n && a[i-n] == a[i])	M[a[i]]++;
	}
	cin >> m;
	sort(a.begin(),a.end());
	long long ans = 1;
	for (int i = 0; i < 2*n;)
	{
		int c = a[i];
		int init = i;
		int rep = M[c];
		for (++i; i < 2*n && a[i] == c; i++);
		for (int j = 1; j <= i-init; j++)
		{
			int d = j;
			while ( (d & 1) == 0 && rep > 0) rep--, d >>= 1;
			ans = (ans * (long long)d) % m;
		}
	}
	cout << ans << endl;
	return 0;
}
