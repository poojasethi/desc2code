//By momo
#include <map>
#include <cstdio>
#include <map>
#define N 200010
#define LL __int64
#define FOR(it,c) for(__typeof((c).begin())it=(c).begin();it!=(c).end();it++)
using namespace std;

LL n, m, d, ans = 1, a[N];
map <LL,LL> cnt;

int main (){
    scanf("%I64d", &n);
    for(int i = 0; i < 2*n; i++){
        scanf("%I64d", &a[i]);
        cnt[a[i]]++;
        if(i >= n && a[i] == a[i-n]) d++;
    }
    scanf("%I64d", &m);
    FOR(it, cnt){
        for(int i = 1; i <= it->second; i++){
            int x = i;
            while(d > 0 && !(x&1)) x /= 2, d--;
            ans = (ans * x) % m;
        }
    }
    printf("%I64d\n", ans);
}