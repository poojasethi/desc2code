#include <stdio.h>
#include <algorithm>
#include <iostream>
#include <utility>
using namespace std;
typedef pair<int,int> pii;

int main()
{
	int n, m;
	pii a[200005];

	int x, i, j;
	scanf("%d", &n);
	for( i=0; i<2*n; i++ ){ scanf("%d", &x); a[i] = pii(x, i%n); }
	scanf("%d", &m);


	sort(a, a+2*n);

	long long ans = 1;
	int c = 1, d = 0;
	a[2*n] = pii(-1, -1);
	for( i=1; i<=2*n; i++ )
	{
		if ( a[i].first == a[i-1].first ) { c++; if ( a[i].second == a[i-1].second ) d++; }
		else
		{
			long long f = 1;
			for( j=0; j<c; j++ )
			{
				int k = j+1;
				while( k%2==0 && d>0 )
				{
					k /= 2;
					d--;
				}
				f = (f * k) % m;
			}
			ans = (ans * f) % m;
			c = 1;
		}
	}

	cout << ans << endl;

	return 0;
}

