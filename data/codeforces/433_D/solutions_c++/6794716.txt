#include <algorithm>
#include <cstdio>
#include <iostream>
#include <map>
#include <set>
#include <utility>
#include <vector>
#include <cstdlib>
#include <cstring>
#include <queue>

#define mp make_pair
#define pb push_back

using namespace std;

typedef long long big;

const int inf=0x3f3f3f3f;
const int N=1010;

int a[N][N],fu[N][N],fd[N][N],fl[N][N],fr[N][N];
int n,m,q;
void change(int x,int y)
{
	int i,j;
	a[x][y]=!a[x][y];
	for(i=x;i;i--)
	{
		if(a[i][y])fd[i][y]=fd[i+1][y]+1;
		else fd[i][y]=0;
	}
	for(i=x;i<=n;i++)
	{
		if(a[i][y])fu[i][y]=fu[i-1][y]+1;
		else fu[i][y]=0;
	}
	for(j=y;j;j--)
	{
		if(a[x][j])fr[x][j]=fr[x][j+1]+1;
		else fr[x][j]=0;
	}
	for(j=y;j<=m;j++)
	{
		if(a[x][j])fl[x][j]=fl[x][j-1]+1;
		else fl[x][j]=0;
	}
}
int cal(int x,int y)
{
	int i,j,f1=inf,f2=inf;
	int mx=0;
	f1=f2=inf;
	for(i=x;i<=n;i++)
	{
		if(!a[i][y])break;
		f1=min(f1,fl[i][y]);
		f2=min(f2,fr[i][y]);
		mx=max(mx,(i-x+1)*(f1+f2-1));
	}
	f1=f2=inf;
	for(i=x;i;i--)
	{
		if(!a[i][y])break;
		f1=min(f1,fl[i][y]);
		f2=min(f2,fr[i][y]);
		mx=max(mx,(x-i+1)*(f1+f2-1));
	}
	f1=f2=inf;
	for(j=y;j<=m;j++)
	{
		if(!a[x][j])break;
		f1=min(f1,fu[x][j]);
		f2=min(f2,fd[x][j]);
		mx=max(mx,(j-y+1)*(f1+f2-1));
	}
	f1=f2=inf;
	for(j=y;j;j--)
	{
		if(!a[x][j])break;
		f1=min(f1,fu[x][j]);
		f2=min(f2,fd[x][j]);
		mx=max(mx,(y-j+1)*(f1+f2-1));
	}
	return mx;
}
int main()
{
	int i,j,t,x,y;
	scanf("%d%d%d",&n,&m,&q);
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
			scanf("%d",&a[i][j]);
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++)
		{
			if(a[i][j])fl[i][j]=fl[i][j-1]+1;
			else fl[i][j]=0;
		}
	for(i=1;i<=n;i++)
		for(j=m;j;j--)
		{
			if(a[i][j])fr[i][j]=fr[i][j+1]+1;
			else fr[i][j]=0;
		}
	for(j=1;j<=m;j++)
		for(i=1;i<=n;i++)
		{
			if(a[i][j])fu[i][j]=fu[i-1][j]+1;
			else fu[i][j]=0;
		}
	for(j=1;j<=m;j++)
		for(i=n;i;i--)
		{
			if(a[i][j])fd[i][j]=fd[i+1][j]+1;
			else fd[i][j]=0;
		}
	while(q--)
	{
		scanf("%d%d%d",&t,&x,&y);
		if(1==t)change(x,y);
		else printf("%d\n",cal(x,y));
	}

}

 	  	    	 	 				     		  	