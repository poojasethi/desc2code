#include<stdio.h>
#include<string.h>
#include<algorithm>
using namespace std;
const int N=1005;
	
int x1[N][N],x2[N][N],y1[N][N],y2[N][N],a[N][N];
int main(){
	int ans,q,i,j,n,m,x,y,fx,fy,l,r,t,p,s;
	scanf("%d%d%d",&n,&m,&q);
	for(i=1;i<=n;i++)
		for(j=1;j<=m;j++) scanf("%d",&a[i][j]);
	for(i=1;i<=n;i++){
		for(j=1;j<=m;j++){
			if(a[i][j]){
				x1[i][j]=x1[i][j-1]+1;
				y1[i][j]=y1[i-1][j]+1;
			}
			else x1[i][j]=x2[i][j]=y1[i][j]=y2[i][j]=0;
		}
	}
	for(i=n;i>0;i--){
		for(j=m;j>0;j--){
			if(a[i][j]){
				x2[i][j]=x2[i][j+1]+1;
				y2[i][j]=y2[i+1][j]+1;
			}
		}
	}
	while(q--){
		scanf("%d%d%d",&p,&x,&y);
		if(p==1){
			a[x][y]=1^a[x][y];
			for(j=y;j<=m;j++){
				if(a[x][j]) x1[x][j]=x1[x][j-1]+1;
				else x1[x][j]=0;
			}
			for(j=y;j>0;j--){
				if(a[x][j]) x2[x][j]=x2[x][j+1]+1;
				else x2[x][j]=0;
			}
			for(i=x;i<=n;i++){
				if(a[i][y]) y1[i][y]=y1[i-1][y]+1;
				else y1[i][y]=0;
			}
			for(i=x;i>0;i--){
				if(a[i][y]) y2[i][y]=y2[i+1][y]+1;
				else y2[i][y]=0;
			}
		}
		else{
			for(l=y1[x][y],r=y2[x][y],ans=0,i=y;i<y+x2[x][y];i++){
				if(!a[x][i]) break;
				l=min(l,y1[x][i]);
				r=min(r,y2[x][i]);
				ans=max(ans,(r+l-1)*(i-y+1));
			}
			for(l=y1[x][y],r=y2[x][y],i=y;i>y-x1[x][y];i--){
				if(!a[x][i]) break;
				l=min(l,y1[x][i]);
				r=min(r,y2[x][i]);
				ans=max(ans,(r+l-1)*(y-i+1));
			}
			for(l=x1[x][y],r=x2[x][y],i=x;i<x+y2[x][y];i++){
				if(!a[i][y]) break;
				l=min(l,x1[i][y]);
				r=min(r,x2[i][y]);
				ans=max(ans,(r+l-1)*(i-x+1));
			}
			for(l=x1[x][y],r=x2[x][y],i=x;i>x-y1[x][y];i--){
				if(!a[i][y]) break;
				l=min(l,x1[i][y]);
				r=min(r,x2[i][y]);
				ans=max(ans,(r+l-1)*(x-i+1));
			}
			printf("%d\n",ans);
		}
	}
	return 0;
}	