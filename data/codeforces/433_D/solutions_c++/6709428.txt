#include<iostream>
#include<vector>
using namespace std;typedef vector<int>V;
#define F(i,n)for(int i=0;i<n;i++)
#define T(A,B,X,y,n)F(d,2)for(int x=X,c=0,a=9999,b=a;~x&&x<n;x+=d-!d)a=min(a,A[x][y]),b=min(b,B[x].end()[~y]),t=max(t,(a+b-1)*++c)
#define Z A[i][j]=B[j][i]=C[i][m+~j]=D[j][n+~i]
int n,m,q,t,i,j;V*U(V&x){t=0;F(i,x.size())x[i]=-~t*!!x[i],t=x[i];}
int main(){cin>>n>>m>>q;vector<V>A(n,V(m)),B(m,V(n)),C=A,D=B;F(i,n)F(j,m)cin>>t,Z=t;F(i,n)U(A[i]),U(C[i]);F(j,m)U(B[j]),U(D[j]);
F(_,q){cin>>t>>i>>j;i--;j--;if(t<2)Z=!A[i][j],U(A[i]),U(B[j]),U(C[i]),U(D[j]);else{t=0;T(A,C,i,j,n);T(B,D,j,i,m);cout<<t<<endl;}}}