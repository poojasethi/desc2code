#include <stdio.h>
#include <math.h>
#include <string.h>
#include <iostream>
#include <vector>
#include <list>
#include <string>
#include <algorithm>
#include <queue>
#include <stack>
#include <set>
#include <map>
#define MAX_H 200001
using namespace std;
typedef unsigned long long llu;
int h,m,n;
int id,hash;
bool HTABLE[MAX_H];
map<int,int> mst;
char kom[6];
llu sol=0LLU;
int main()
{
  scanf("%d%d%d",&h,&m,&n);
  for (int i=0;i<n;i++)
  {
      scanf("%s%d",&kom,&id);
      if (kom[0]=='+')
      {
        scanf("%d",&hash);
        while (HTABLE[hash])
        {
          sol++;
          hash = (hash+m);
          if (hash>=h) hash-=h;
        }
        HTABLE[hash]=true;
        mst[id]=hash;
      }
      else
      {
        HTABLE[mst[id]]=false;
        mst.erase(id);
      }
  }
  printf("%I64u\n",sol);
  //scanf("%d",&h);
  return 0;
}