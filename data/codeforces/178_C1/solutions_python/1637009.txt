#include <cstdlib>
#include <iostream>
#include <map>

using namespace std;

const int MaxN = 50005;

long long mark[MaxN];

map <int, int> pos;

int main() {
  //freopen("input.txt", "r", stdin);
  //freopen("output.txt", "w", stdout);
  long long i, j, n, x, y, h, m, ans = 0;
  char c;
  for (i = 0; i < MaxN; i++) {
    mark[i] = 0;
  }
  
  cin >> h >> m >> n;
  for (i = 0; i < n; i++) {
    cin >> c;
    if (c == '+') {
      cin >> x >> y;
      for (j = 0; ; j++) {
        if (mark[(y+j*m)%h] == 0) {
          mark[(y+j*m)%h] = 1;
          ans += j;
          pos[x] = (y+j*m)%h;
          break;
        }
      }
    }
    else {
      cin >> x;
      mark[pos[x]] = 0;  
    }
  }
  
  cout << ans << endl;
  
  cin.get();
  cin.get();
}
