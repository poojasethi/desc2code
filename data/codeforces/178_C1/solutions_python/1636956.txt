#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <ctime>

using namespace std;

const int P=9999973;
int f[P+1],hash,n,m;
char s1[3];
bool b[1000001];


int main(){
  //  freopen("1.txt","r",stdin);
  //  freopen("2.txt","w",stdout);
    scanf("%d%d%d",&hash,&m,&n);
    memset(f,0,sizeof(f));
    memset(b,false,sizeof(b));
    int cnt=0;
    for (int i=1;i<=n;i++)
    {
        int x,y;
        scanf("%s",s1);
        if (s1[0]=='+')
        {
            scanf("%d%d",&x,&y);
            int now=y;
            for (int j=0;j<=1000000;j++)
            {
                if (!b[now]) 
                {
                   f[x%P]=now,cnt+=j,b[now]=true;
                   break;
                }
                now+=m;now%=hash;
            }
        }
        else scanf("%d",&x),b[f[x%P]]=false,f[x%P]=0;
    }
    printf("%d\n",cnt);
}
