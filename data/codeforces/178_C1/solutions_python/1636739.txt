#include<stdio.h>
#include<string.h>
#include<assert.h>
#include<iostream>
#include<vector>
#include<set>
#include<map>
#include<algorithm>
using namespace std;

#define MAX 10007

long H,M,N;
long Val[MAX+7];

int main( void )
{
	long i,Id,Hash;
	char Ch;

	//freopen("text1.txt","r",stdin );

	cin>>H>>M>>N;
	long Ans = 0;
	map<long,long> Pos;
	memset( Val,-1,sizeof(Val));
	for( i=1;i<=N;i++ ){
		cin>>Ch;
		if( Ch=='+' ){
			cin>>Id>>Hash;
			while( Val[Hash]!=-1 ){
				Ans++;
				Hash = (Hash+M)%H;
			}
			Val[Hash] = Id;
			Pos[Id] = Hash;
		}
		else{
			cin>>Id;
			Val[Pos[Id]] = -1;
			//Pos.erase( Id );
		}
	}
	
	cout<<Ans<<endl;	
	
	//scanf("%*ld");

	return 0;
}
