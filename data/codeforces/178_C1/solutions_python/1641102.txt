#include <iostream>
#include <cstdio>
#include <map>
using namespace std;
typedef long long ll;
const int N=50010;
map <int,int> ma;
bool used[N];
int main()
{
    int h,m,n;
    cin>>h>>m>>n;
    char cod;
    int ha,id;
    ll ans=0;
    for(int q=0;q<n;q++)
    {
        cin>>cod;
        if (cod=='+')
        {
            cin>>id>>ha;
            int cnt=0;
            while (used[ha])
            {
                cnt++;
                ha=(ha+m)%h;
            }
            used[ha]=true;
            ans+=cnt;
            ma[id]=ha;
        } else
        {
            cin>>id;
            used[ma[id]]=false;
        }
    }
    cout<<ans;
    return 0;
}
