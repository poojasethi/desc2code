#include<cstdio>
#include<cstring>
int son[1000007];
int p[5005],f[5005],x[5005],next[5005];
int h,n,m,i,Id,Hash,Ans,g,P;
char ch;
int hash(int i)
{
	return i%1000007;
}
int main()
{
	scanf("%d%d%d",&h,&m,&n);
	memset(p,-1,sizeof(p));
	for(i=1;i<=n;++i)
	{
		for(ch=getchar();ch!='+'&&ch!='-';ch=getchar());
		if(ch=='+')
		{
			scanf("%d%d",&Id,&Hash);
			g=hash(Id);
			for(P=son[g];P&&x[P]!=Id;P=next[P]);
			if(!P) P=i,x[i]=Id,next[i]=son[g],son[g]=i;
			Id=P;
			for(;f[Hash];Hash=(Hash+m)%h) ++Ans;
			p[Id]=Hash,f[Hash]=1;
		}
		else
		{
			scanf("%d",&Id);
			g=hash(Id);
			for(P=son[g];P&&x[P]!=Id;P=next[P]);
			if(!P) P=i,x[i]=Id,next[i]=son[g],son[g]=i;
			Id=P;
			if(p[Id]!=-1) f[p[Id]]=0,p[Id]=-1;
		}
	}
	printf("%d\n",Ans);
	return 0;
}
