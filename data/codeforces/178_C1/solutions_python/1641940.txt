#include<iostream>
#include<map>
#define it iterator

using namespace std;

int main(){
    ios_base::sync_with_stdio(false);
    int h, m, n, sum = 0, id, hash;
    char op;
    bool a[200000] = {};
    map<int, int> b;
    cin >> h >> m >> n;
    while (n--){
          cin >> op >> id;
          if (op == '+'){
             cin >> hash;
             while (a[hash])hash = (hash + m) % h, ++sum;
             a[hash] = true;
             b[id] = hash;
          }
          else {
               a[b[id]] = false;
               b.erase(id);
          }
    }
    cout << sum << endl;
    return 0;
}
