#include <fstream>
#include <iostream>
#include <vector>
#include <string>
#include <cmath>
#include <queue>
#include <algorithm>
#include <set>
#include <map>

using namespace std;


int main()
{
	//ifstream cin("input.txt");
	//ofstream out("output.txt");
	long h,m,n;
	cin>>h>>m>>n;
	vector <long> mass(h,-1);
	map <long, bool> q;
	long long kol=0;
	string s;
	long id;
	long hash;
	long now;
	for(long i=0;i<n;i++)
	{
		cin>>s;
		if(s=="+")
		{
			cin>>id>>hash;
			now=hash;
			q[id]=true;
			while(q[mass[now]]==true)
			{
				now=(now+m)%h;
				kol++;
			}
			mass[now]=id;
		}
		if(s=="-")
		{
			cin>>id;
			q[id]=false;
		}
	}
	cout<<kol;
}
