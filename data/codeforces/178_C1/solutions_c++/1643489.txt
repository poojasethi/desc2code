
#include <algorithm>
#include <iostream>
#include <map>
#define MAX 200000

using namespace std;

int h, m, n;
int cnt = 0;

int table[MAX];
map <int, int> valToKey;

void add_val(int key, int val) {
    while (table[key] != -1) {
        key = (key + m) % h;
        cnt++;
    }
    table[key] = val;
    valToKey[val] = key;
}

void del_val(int val) {
    int key = valToKey[val];
    table[key] = -1;
}

int main() {
    cin >> h >> m >> n;

    for (int i = 0; i < h; i++)
        table[i] = -1;

    for (int i = 0; i < n; i++) {
        char op;
        int id, hash;
        cin >> op >> id;
        if (op == '+') {
            cin >> hash;
            add_val(hash, id);
        }
        else {
            del_val(id);
        }
    }

    cout << cnt << endl;
}
