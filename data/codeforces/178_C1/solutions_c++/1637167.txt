#include<stdio.h>
#include<memory.h>
#include<queue>
#include<vector>
#include <iostream>
#include <map>
#include <string.h>
#define For(i,a,b) for(int i=a;i<b;i++)
#define Me (a,v) memset(a,v,sizeof(a))
#define M 5005
using namespace std;

map<int,int>q;
int t;
int h;
int m;
bool d[M];
int work(int x){
    int tt=0;
    while(d[x]){
        x=(x+m)%h;
        tt++;
    }
    t=x;
    return tt;
}
int main() {
    int  n;
    char c;
    int a, b, id;
    scanf("%d%d%d", &h, &m, &n);
    memset(d,false,sizeof(d));
    int ans=0;
    while (n--) {
        scanf(" %c", &c);
        if (c == '+') {
            scanf("%d%d", &id, &a);
            ans+=work(a); 
            q[id]=t;
            d[t]=1;
        } else {
            scanf("%d", &a);
            d[q[a]] = 0;
            q.erase(a);
            
        }
    }
    cout<<ans<<endl;
    return 0;
}

