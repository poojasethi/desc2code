#include<cstdio>
#include<map>

#define MAX 200005

using namespace std;

bool vis[MAX];
map<int, int> mp;

int main()
{
    int h, m, n;
    scanf("%d %d %d", &h, &m, &n);

    long long ans = 0;
    for(int i=0;i<n;i++)
    {
        char ch;
        int idx;
        scanf(" %c %d", &ch, &idx);
        if(ch == '+')
        {
            int val;
            scanf("%d", &val);

            while(vis[val])
            {
                val = (val + m)%h;
                ans++;
            }
            vis[val] = 1;
            mp[idx] = val;
        }
        else
        {
            vis[ mp[idx] ] = 0;
        }
    }
    printf("%I64d\n", ans);
}
