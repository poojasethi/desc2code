#include <stdio.h>
#include <string.h>
#include <utility>
#include <vector>
#include <algorithm>
#include <stdlib.h>
#include <set>
#include <map>
#include <iostream>
using namespace std;


int h, n, m;

map<int, int> M;
int hash[200009];
int ret = 0;
inline void insert(int num, int t) {
	int i ;
	for( i = 0; hash[t] != -1; ++ i) {
		t += m;
		if(t >= h) t %= h;
	}
	ret += i;
	hash[t] = num;
	M[ num ] = t;
}
inline void erase(int num) {
	int id = M[num];
	hash[id] = -1;
//	M.erase( make_pair( num, id));
	M.erase( num );
}
int main() {
	scanf("%d%d%d", &h, &m, &n);
	char ch;
	int t, Num;
	memset( hash, -1, sizeof(hash));
	while( n --) {
		scanf(" %c", &ch);
		if(ch == '+') {
		
			scanf("%d%d", &Num, &t);
			insert(Num, t);
		}else {
			scanf("%d", &Num);
			erase(Num);
		}	
	}
	printf("%d\n", ret);
	return 0;
}
