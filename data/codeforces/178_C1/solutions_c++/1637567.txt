#include <iostream>
#include <cstdio>
#include <vector>
#include <cassert>
#include <cmath>
#include <map>
using namespace std;
#define mp make_pair
#define s second
#define f first
#define pb push_back
typedef pair <int, int> pii;
typedef long long ll;
const int N = 1e5 + 5;
map <int, int> pt;
int h, m, n;
bool a[N];
ll ans;
int main()
{
  int id, t;
  char c;
  cin >> h >> m >> n;
  for (int i = 0; i < n; i++)
  {
    cin >> c;
    if (c == '-')
    {
      scanf("%d", &id);
      a[pt[id]] = false;
    } else
    {
      scanf("%d%d", &id, &t);
      int j = 0;
      while (a[(t + m * j) % h]) j++;
      ans += j;
      a[(t + m * j) % h] = id;
      pt[id] = (t + m * j) % h;
    }
  }
  cout << ans;
  return 0;
}
