#include <vector>
#include <cstdio>
#include <cstring>
#include <iostream>
#include <algorithm>
#include <map>

#define mp make_pair
#define x first
#define y second

using namespace std ;

const int N = 200010 ;

int n, m, h ;
int hh[N] ;
map<int,int>hash ;

int solve1 (int a, int b)
{
    int t = b, res = 0 ;
    while (hh[t] != -1) t = (t + m) % h, res ++ ;
    hh[t] = a ;
    hash[a] = t ;
    return res ;
}

void solve2 (int a)
{
    hh[hash[a]] = -1 ;
}

int main ()
{
    memset (hh, -1, sizeof hh) ;
    scanf ("%d%d%d", &h, &m, &n) ;
    char str[2] ;
    int res = 0 ;
    for (int i = 0, a, b; i < n; i ++ )
    {
        scanf ("%s%d", str, &a) ;
        if (*str == '+') scanf ("%d", &b), res += solve1 (a, b) ;
        else solve2 (a) ;
    }
    printf ("%d\n", res) ;
    return 0 ;
}
