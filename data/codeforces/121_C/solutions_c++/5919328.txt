#include <algorithm>
#include <cstring>
#include <cstdlib>
#include <cstdio>
#define int64 long long
#define For(i,x,y) for (i=x;i<=y;i++)
using namespace std;
int i,j,k,n,m,an,l,r;
int64 f[15],b[20],g[300000];
inline bool judge(int x,int y) {
	for (;x;x/=10) if (!(x%10==4||x%10==7)) return 0;
	for (x=y;x;x/=10) if (!(x%10==4||x%10==7)) return 0;
	return 1;
}
int main() {
	scanf("%d%d",&n,&m);
	f[0]=1; For(i,1,14) f[i]=f[i-1]*i;
	if (n<=14&&f[n]<m) {
		printf("-1\n"); return 0;
	}
	int A=max(1,n-14); k=A;
	g[l=r=1]=0;
	for (;l<=r;l++) {
		int64 A=g[l]*10+4;
		if (A<k) g[++r]=A;
		A+=3;
		if (A<k) g[++r]=A;
	}
	an=r-1;
	For(i,A,n) {
		int64 B=f[n-i],C=(m-1)/B+1;
		m-=(C-1)*B;
		for (j=1;C;j++) if (!b[j]) C--;
		b[j-1]=1;
		an+=judge(i,A-1+j-1);
	}
	printf("%d\n",an);
	//for(;;);
	return 0;
}
