#include <iostream>
#include <algorithm>
#include <cstdio>
#include <numeric>
using namespace std;

typedef long long ll;
const int maxn=1500 + 10;
const ll inf = 1000000000000000000LL;
ll tab[maxn][maxn];
int m,n;
int main(){
	scanf("%d%d",&n,&m);
	for(int i=0;i<n;i++)
		for(int j=0;j<m;j++)
			scanf("%I64d",&tab[i][j]);
	ll best;
	partial_sum(tab[0],tab[0] + m,tab[0]);
	tab[0][0] = -inf;
	for(int i=1;i<n;i++){
		partial_sum(tab[i],tab[i] + m,tab[i]);
		if(!(i&1)){
			tab[i][0] = -inf;
			best = tab[i - 1][0];
			for(int j=1;j<m;j++){
				tab[i][j] += best; 
				best = max(best,tab[i - 1][j]);
			}
		}else{
			tab[i][m - 1] = -inf;
			best = tab[i - 1][m - 1];
			for(int j = m - 2;j>=0;j--){
				tab[i][j] += best;
				best = max(best,tab[i - 1][j]);
			}
		}
	}
	printf("%I64d\n",*max_element(tab[n - 1],tab[n - 1] + m));
	return 0;
}
