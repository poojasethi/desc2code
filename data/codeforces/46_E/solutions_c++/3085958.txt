#include<cstdio>
#include<climits>
#include<algorithm>
using namespace std;

const int N = 1500;
int n, m, a[N][N];
long long s[N][N], f[N][N];

int main() {
    scanf("%d%d",&n,&m);
    for(int i = 0; i < n; ++i)
        for(int j = 0; j < m; ++j)
            scanf("%d",&a[i][j]);
    for(int i = 0; i < n; ++i) {
        s[i][0] = a[i][0];
        for(int j = 1; j < m; ++j) s[i][j] = s[i][j-1] + a[i][j];
    }
    for(int j = m-1; j >= 0; --j)
        f[0][j] = j == m-1 ? s[0][j] : max(s[0][j], f[0][j+1]);
    for(int i = 1; i < n; ++i) 
        if(i % 2 == 0) for(int j = m-1; j >= 0; --j) 
            f[i][j] = max(j != m-1 ? f[i][j+1] : LLONG_MIN, j ? f[i-1][j-1] + s[i][j] : LLONG_MIN);
        else for(int j = 0; j < m; ++j)
            f[i][j] = max(j ? f[i][j-1] : LLONG_MIN, j != m-1 ? f[i-1][j+1] + s[i][j] : LLONG_MIN);
    printf("%I64d\n", *max_element(&f[n-1][0], &f[n-1][m]));
    return 0;
}
