#include<iostream>
#include<vector>
#include<algorithm>
using namespace std;
typedef long long ll;
const ll inf=1LL<<61;

vector<ll> dp(1600,0),dp2(dp);
int pref[1600];
int main() {
    int N,M;
    cin>>N>>M;
    for(int i=0;i<N;i++) {
        for(int j=1;j<=M;j++) {
            cin>>pref[j];
            pref[j]+=pref[j-1];
        }
        int st,inc;
        if(i%2) {
            st=M;
            inc=-1;
        } else {
            st=1;
            inc=1;
        }
        ll mx=-inf;
        if(i==0) {
            mx=0;
        }
        while(st>=1 && st<=M) {
            dp2[st]=mx+pref[st];
            mx=max(mx,dp[st]);
            st+=inc;
        }
        swap(dp,dp2);
    }
    cout<<*max_element(dp.begin()+1,dp.begin()+M+1);
}