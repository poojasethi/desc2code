#include <cstdio>
#include <algorithm>
#include <vector>
#define VL vector<long long>

using namespace std;     

int main() {
    int n, m;
    scanf ("%d%d", &n, &m);
    VL d (m, 0);
    for (int i = 0; i < n; ++i) {
        VL segmax (m, -10001ll * n * m);
        if (i % 2)
            for (int j = m - 2; j >= 0; --j)
                segmax[j] = max (segmax[j + 1], d[j + 1]);
        else
            for (int j = 1; j < m; ++j)
                segmax[j] = max (segmax[j - 1], d[j - 1]);
        for (int s = 0, x, j = 0; j < m; ++j) {
            scanf ("%d", &x);
            s += x;
            d[j] = segmax[j] + s;            
        }
    }
    printf ("%I64d", *max_element (d.begin (), d.end ()));
	return 0;
}

