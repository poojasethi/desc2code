#include <iostream>
#include <algorithm>
#include <cstdio>

#define ll long long
#define INF (-((ll) 1 << 60)

using namespace std;

ll maxGs;
ll solPr[2048], solA[2048];

int main()
{
	int n, m;
	scanf("%d %d", &n, &m);
	for (int i = 1; i <= n; i++)
	{
		int sumL = 0;
		int elem[2048];
		for (int j = 1; j <= m; sumL += elem[j], j++)
			scanf("%d ", &elem[j]);

		ll sol = - ((ll) 1 << 60);
		if (i & 1) // More
		{
			for (int j = 2, sa = elem[1]; j <= m; j++)
			{
				sol = max(sol, solPr[j - 1]);
				sa += elem[j];

				solA[j] = sol + sa;
			}
		}
		else // Less
		{
			for (int j = m - 1, sa = sumL; j; j--)
			{
				sol = max(sol, solPr[j + 1]);
				sa -= elem[j + 1];
				
				solA[j] = sol + sa;
			}
		}

		maxGs = -((ll) 1 << 60);
		for (int j = 1; j <= m; j++)
		{
			solPr[j] = solA[j];
			solA[j] = -((ll) 1 << 60);

			maxGs = max(maxGs, solPr[j]);
		}
	}

	printf("%I64d\n", maxGs);

	return 0;
}