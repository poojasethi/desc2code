using namespace std;
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<cassert>
#include<cstring>

typedef long long LL;
#define REP(i, n) for (int i (0); i < (n); i ++)
const int inf (1010101010);

LL opt[1505];

int a[1505], ca[1505];
LL tmp[1505];
main()
{
	int h, w; scanf("%d%d", &h, &w);
	REP(j, w + 1) opt[j] = -inf;
	opt[0] = 0;
	
	REP(i, h)
	{
		REP(j, w) scanf("%d", &a[j]);
		ca[0] = 0; REP(j, w) ca[j + 1] = ca[j] + a[j];
		
		int j; LL mx;
		if (i % 2 == 0)
		{
			for (j = (1), mx = (opt[0]); j <= (w); mx = max(mx, opt[j]), j ++) tmp[j] = ca[j] + mx;
			tmp[0] = -inf;
		}
		else
		{
			tmp[w] = -inf;
			for (j = (w - 1), mx = (opt[w]); j >= (0); mx = max(mx, opt[j]), j --) tmp[j] = ca[j] + mx;
			tmp[0] = -inf;
		}
		REP(j, w + 1) opt[j] = tmp[j];
	}
	cout << *max_element(opt, opt + w + 1) << endl;
}
