#include <cstdio>
#include <cstring>
#include <vector>
#include <algorithm>
using namespace std;

int n, m;
long long dp[1505], a[1505];
const long long INF = 1LL<<60;

int main(void) {
	scanf("%d%d", &n, &m);
	for(int i=0;i<n;i++) {
		for(int j=0;j<m;j++) scanf("%I64d", &a[j]);
		for(int j=1;j<m;j++) a[j] += a[j-1];
		if(i%2==0) {
			for(int j=m-1;j>0;j--) dp[j] = a[j] + dp[j-1];
			dp[0] = -INF;
		} else {
			for(int j=0;j<m-1;j++) dp[j] = a[j] + dp[j+1];
			dp[m-1] = -INF;
		}
		if(i%2==1) {
			for(int j=1;j<m;j++) dp[j] = max(dp[j], dp[j-1]);
		} else {
			for(int j=m-2;j>=0;--j) dp[j] = max(dp[j], dp[j+1]);
		}
	}
	printf("%I64d\n", *max_element(dp, dp+m));
	return 0;
}

