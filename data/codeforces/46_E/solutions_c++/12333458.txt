#include <stdio.h>
#include <algorithm>
using namespace std;

typedef long long ll;
const int MAX = 1501;
int n, m;
ll a[MAX][MAX], f[MAX][MAX], res = -1e18;


int main(){
	scanf("%d %d", &n, &m);

	for (int i = 1; i <= n; ++i){
		for (int j = 1; j <= m; ++j){
			scanf("%I64d", &a[i][j]);
			a[i][j] += a[i][j - 1];
			f[i][j] = -1e18;

			if (i == 1)
				f[i][j] = (j == 1 ? -1e18 : a[i][j]);
			else
			if (i & 1)
				f[i][j] = (j == 1 ? -1e18 : max(f[i][j], a[i][j] + f[i - 1][j - 1]));
			else
				f[i][j] = (j == m ? -1e18 : max(f[i][j], a[i][j] + f[i - 1][j + 1]));

			if (i == n)
				res = max(res, f[i][j]);
		}

		if (i & 1){
			for (int j = m; j >= 1; --j)
				f[i][j] = (j == m ? f[i][j] : max(f[i][j], f[i][j + 1]));
		}
		else{
			for (int j = 1; j <= m; ++j)
				f[i][j] = (j == 1 ? f[i][j] : max(f[i][j], f[i][j - 1]));
		}
	}

	printf("%I64d", res);

	return 0;
}
		  	    	 	 	 		  	   			 	