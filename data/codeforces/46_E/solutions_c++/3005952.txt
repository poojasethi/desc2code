#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;
typedef long long LL;
int main(void) {
  int n,m,a[2048]={0};
  LL v[2][2048]={0},*p=v[0],*q=v[1],*r,t=-(1LL<<60);
  scanf("%d%d",&n,&m);
  for(int i=0;i<n;++i){
    for(int j=1;j<=m;++j)scanf("%d",&a[j]),a[j]+=a[j-1];
    q[0]=q[m+1]=t;
    for(int j=1;j<=m;++j)q[j]=(i&1?p[j+1]:p[j-1])+a[j];
    r=p,p=q,q=r;
    if(i&1)for(int j=1;j<=m;++j)p[j]=max(p[j],p[j-1]);else for(int j=m;j-->1;)p[j]=max(p[j],p[j+1]);
  }
  for(int i=1;i<=m;++i)t=max(t,p[i]);
  cout<<t<<endl;
}
