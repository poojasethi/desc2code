#include <cstdio>
#define forn(i,n) for(int i=0;i<(int)n;i++)
#define ford(i,n) for(int i=(int)n;i>0;--i)

const int N = 2000;
long long a[N][N],ans[2][N],old[2][N],inf=1ll<<60,b,ret=-inf;
int n,m;
#define rel(a,b,c) a=b<c?c:b
int main()
{
   scanf("%d%d",&n,&m);
   forn(i,n) 
     forn(j,m)
       {
         scanf("%I64d",&b);
         a[i][j+1]=a[i][j]+b;
       }
  forn(k,2) 
    forn(j,N)
      ans[k][j]=-inf;
   forn(j,m+1)
     ans[0][j]=0;
   forn(i,n)
     {
      forn(k,2)
        forn(j,m+2)
          {
            old[k][j]=ans[k][j];
            ans[k][j]=-inf;
          }
      forn(j,m)
        rel(ans[0][j+1],ans[0][j],old[1][j+2]+a[i][j+1]);
      ford(j,m)
        rel(ans[1][j],ans[1][j+1],old[0][j-1]+a[i][j]);
     }
   forn(k,2)
     forn(j,m)
       rel(ret,ret,ans[k][j+1]);
   printf("%I64d",ret);
}
