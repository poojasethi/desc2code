#include <cstdio>
#define forn(i,n) for(int i=0;i<(int)n;i++)
#define ford(i,n) for(int i=(int)n;i>0;--i)

const int N = 2000;
long long a[N][N],ans[N][N][2],inf=1ll<<60,b,ret=-inf;
int n,m;
#define rel(a,b,c) a=b<c?c:b
int main()
{
   scanf("%d%d",&n,&m);
   forn(i,n) 
     forn(j,m)
       {
         scanf("%I64d",&b);
         a[i][j+1]=a[i][j]+b;
       }

   forn(i,N)
     forn(j,N)
       forn(k,2) 
         ans[i][j][k]=-inf;
   forn(j,m+1)
      ans[0][j][0]=0;
   forn(i,n)
     {
      forn(j,m)
        rel(ans[i+1][j+1][0],ans[i+1][j][0],ans[i][j+2][1]+a[i][j+1]);
      ford(j,m)
        rel(ans[i+1][j][1],ans[i+1][j+1][1],ans[i][j-1][0]+a[i][j]);
     }
   forn(j,m)
     forn(k,2)
       rel(ret,ret,ans[n][j+1][k]);
   printf("%I64d",ret);
}
