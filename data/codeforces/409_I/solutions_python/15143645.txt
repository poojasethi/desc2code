import re
o=raw_input().split(':-')
t=map(len, re.split('[^_]', o[0][2:-1]))
y=o[1].split('.')[0].split(',')
l=map(lambda x,y:y and x or x[::-1],[map(len,re.split('[<>]', i)) for i in y],[len(re.split('[<]', i))-1 for i in y])
u=[0]*10000
E=0
while not E:
  E=2
  for i in range(len(l)):
    a,b=l[i]
    if u[a]>=u[b]:
      E=0
      u[b]=u[a]+1
      if u[b]>9:E=1
print[0,'false',''.join([str(u[x])for x in t])][E]