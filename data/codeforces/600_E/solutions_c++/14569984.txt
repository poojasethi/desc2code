#include<iostream>
#include<stdio.h>
#include<vector>
#include<map>
using namespace std;
#define maxn 800005


map<int,int> H[maxn];
map<int,int>::iterator it;
__int64 ans[maxn];
vector<int> E[maxn];
int c[maxn];
int id[maxn];
__int64 M[maxn];
__int64 M1[maxn];
void uni(int &x,int y)
{
    if(H[x].size()<H[y].size())swap(x,y);
    for(it = H[y].begin();it!=H[y].end();it++)
    {
        H[x][it->first]+=it->second;
        if(M1[x]==H[x][it->first])
            M[x]+=it->first;
        if(M1[x]<H[x][it->first])
        {
            M1[x]=H[x][it->first];
            M[x]=it->first;
        }
    }
}
void solve(int x,int fa)
{
    H[x][c[x]]=1;
    M1[x]=1,M[x]=c[x];
    for(int i=0;i<E[x].size();i++)
    {
        int v = E[x][i];
        if(v==fa)
            continue;
        solve(v,x); 
        uni(id[x],id[v]);
    }
    ans[x]=M[id[x]]; 
}
long long flag = 0;
int main()
{
    int n;scanf("%d",&n);
    for(int i=1;i<=n;i++)
    {
        id[i]=i;
        scanf("%d",&c[i]);
    }
    for(int i=1;i<n;i++)
    {
        int x,y;
        scanf("%d%d",&x,&y);
        E[x].push_back(y);
        E[y].push_back(x);
    }
    solve(1,-1);
    for(int i=1;i<=n;i++)
        printf("%I64d ",ans[i]);
    printf("\n");
    return 0;
}