#include<iostream>
#include<cstdio>
#include<cstring>
#include<cmath>
#include<map>
#include<set>
#include<vector>

using namespace std; 

typedef  long long LL; 

map< int, int > cnt[100003]; 
int f[100003],id[100003],c[100003];  
LL tot[100003],ans[100003]; 
vector<int> a[100003]; 


void add(int tx,int c,int num) { 
	if (num>f[tx]) f[tx]=num,tot[tx]=0; 
	if ( num==f[tx]) tot[tx]+=c; 
	cnt[tx][c]=num; 
}

void merge(int x,int y){ 
	if ( cnt[id[x]].size()<cnt[id[y]].size() ) { 
		int t=id[x]; id[x]=id[y];id[y]=t; 
	}
	int tx=id[x]; 
	int ty=id[y]; 
	for( map<int,int> :: iterator p=cnt[ty].begin();p!=cnt[ty].end(); p++) 
		add(tx,p->first,cnt[tx][p->first]+p->second); 
}
	

void dfs(int x,int p){ 
	f[x]=1; tot[x]=c[x]; id[x]=x; cnt[x][c[x]]=1; 
	for( int i=0;i<a[x].size();i++) { 
		int y=a[x][i]; 
		if ( y!=p) { 
			dfs(y,x); merge(x,y); 
		}
	}
	ans[x]=tot[id[x]]; 
}
int main() { 
	int n; 
	scanf("%d",&n); 
	for(int i=1;i<=n;i++) scanf("%d",&c[i]); 
	for(int i=1;i<n;i++) { 
		int x,y; 
		scanf("%d%d",&x,&y); 
		a[x].push_back(y); 
		a[y].push_back(x); 
	}
	dfs(1,0); 
	for(int i=1;i<=n;i++) printf("%I64d ",ans[i]); 
	
	return 0; 
}