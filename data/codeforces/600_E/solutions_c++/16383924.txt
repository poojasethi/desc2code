#include <iostream>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <map>

using namespace std;

const int N = 100010;
typedef long long ll;

int n , c[N] , x , y,cnt = 0 , dp[N];
ll sum[N],ans[N];
vector<int> adj[N];
map<int,int> mps[N];

void dfs(int u , int p){
	dp[u] = 1;
	sum[u] = c[u];
	int sz = 1 , mx = u;
	mps[u][c[u]]++;
	for(int i = 0 ; i < adj[u].size();i++){
		int src = adj[u][i];
		if(src == p)
			continue;
		dfs(src,u);
		if(sz < mps[src].size()){
			sz = mps[src].size();
			mx = src;
		}
	}
	mps[u].swap(mps[mx]);
	swap(dp[u],dp[mx]);
	swap(sum[u],sum[mx]);
	for(int i = 0 ; i < adj[u].size();i++){
		int src = adj[u][i];
		if(src == p)
			continue;
		for(map<int,int>::iterator it = mps[src].begin();it != mps[src].end();it++){
			mps[u][it->first] += it->second;
			if(mps[u][it->first] > dp[u]){
				dp[u] = mps[u][it->first];
				sum[u] = it->first;
			}else if(dp[u] == mps[u][it->first]){
				sum[u] += it->first;
			}
		}
		mps[src].clear();
	}
	ans[u] = sum[u];
}

int main(){
	//freopen("input.txt","r",stdin);
	scanf("%d",&n);
	for(int i = 1 ; i <= n ; i++){
		scanf("%d",&c[i]);
	}
	for(int i = 0 ; i <  n - 1 ; i++){
		scanf("%d%d",&x,&y);
		adj[x].push_back(y);
		adj[y].push_back(x);
	}
	dfs(1,-1);
	for(int i = 1 ; i <= n ; i++){
		if(i > 1)
			printf(" ");
		printf("%lld",ans[i]);
	}
	puts("");
	return 0;
}