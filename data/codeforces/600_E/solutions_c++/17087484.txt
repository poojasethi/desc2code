#include<bits/stdc++.h>
using namespace std;
#define st first
#define nd second
#define mp make_pair
#define mp3(x,y,z) mp(x,mp(y,z))
#define endl '\n'
#define endll puts("")
#define mod 1000000007
#define pb push_back
#define pii pair< int , int > 
#define ort ((bas+son)/2)
#define sol (root+root)
#define sag (root+root+1)
typedef long long ll;
const int N = 1e5+7;
vector<int>V[N];
map<int,int> MP[N];
map<int,int>::iterator it;
int n,m,i,j,k,t,s,x,y,z,h[N],d,l,ii,jj,u;
ll hh[N];
void f(int x,int root=0)
{
	int i,u=V[x].size();
	for(i=0;i<u;i++)
		if(V[x][i]!=root)
		{
			f(V[x][i],x);
			if(MP[x].size()<MP[V[x][i]].size())
			{
				MP[x].swap(MP[V[x][i]]);
				h[x]=h[V[x][i]];
				hh[x]=hh[V[x][i]];
			}
			for(it=MP[V[x][i]].begin();it!=MP[V[x][i]].end();it++)
			{
				y=MP[x][it->st]+=it->nd;
				if(y==h[x])hh[x]+=it->st;
				else if(y>h[x])hh[x]=it->st,h[x]=y;
			}
		}
}
int main()
{
	cin>>n;
	for(i=1;i<=n;i++)
	{
		scanf("%d",&t);
		h[i]=MP[i][t]=1;hh[i]=t;
	}
	for(i=1;i<n;i++)
	{
		scanf("%d%d",&x,&y);
		V[x].pb(y);
		V[y].pb(x);
	}
	f(1);
	for(i=1;i<=n;i++)
		printf("%lld ",hh[i]);
}
