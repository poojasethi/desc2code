#include <cstdio>
#include <cstring>
#include <iostream>
#include <set>

#define F first
#define S second
#define PB push_back
#define MP make_pair
#define INF 0x3f3f3f3f

using namespace std ;

typedef pair<int,int> PII ;
typedef pair<int,PII> PIP ;
typedef pair<PII,int> PPI ;

const int MAXN = (int)1e6 + 10 ;

set<PIP> Set ;
int n,m;
int L[MAXN] , ans[MAXN] , R[MAXN] ;

PIP make(int l,int r){
    if (l==0 && r==n+1) return MP(-INF,MP(1,r)) ;
    if (l==0) return MP(-(r-1),MP(1,r)) ;
    if (r==n+1) return MP(-(n-l),MP(n,r)) ;
    return MP(-(r-l)/2,MP((l+r)/2,r));
}



int main(){
    //freopen("input.txt","r",stdin);
    scanf("%d%d",&n,&m);
    Set.insert(make(0,n+1)) ;
    L[n+1] = 0 ; R[0] = n+1 ;
    while (m--){
        int t,id;
        scanf("%d%d",&t,&id);
        if (t==1){
            PIP v = *Set.begin() ;
            Set.erase(Set.begin());
            int pos = v.S.F , rr = v.S.S ;
            int ll = L[rr] ;
            ans[id] = pos ;
            printf("%d\n",pos) ;
            L[pos] = ll ; L[rr] = pos ;
            R[ll] = pos ; R[pos] = rr ;
            Set.insert(make(ll,pos)) ;
            Set.insert(make(pos,rr)) ;
        }else{
            int pos = ans[id] ;
            int rr = R[pos] , ll = L[pos] ;
            Set.erase(make(pos,rr));
            Set.erase(make(ll,pos));
            L[rr] = ll ; R[ll] = rr ;
            Set.insert(make(ll,rr)) ;
        }
    }
    return 0;
}
