#include<cstdio>
#include<set>
#include<utility>

#define FOR(a,b) for(int a=0,_a=b;a<_a;a++)

#define PII pair<int,int>

#define MAXN 200002
#define MAXM 1000001

using namespace::std;

struct compare{
  bool operator()(const PII &a, const PII &b)const{
    if(a.first == b.first) return a.second < b.second;
    return a.first > b.first;
  }
};

set< PII,compare > s;
int l[MAXN], r[MAXN], p[MAXM], n;

inline PII mkp(int x, int y){
  int m,d;
  if(x == 0) m = 1, d = y-m;
  else if(y == n+1) m = n, d = m-x;
  else m = (x+y)/2, d = m-x;
  return make_pair(d,m);
}

inline void insert(int x,int y){
  PII pii = mkp(x,y);
  if(pii.first==0) return;
  l[pii.second] = x; r[pii.second] = y;
  s.insert(pii);
}

inline void remove(int x, int y){
  s.erase(mkp(x,y));
}

int main(){
  int m, a, b;
  scanf("%d %d",&n,&m);

  s.insert(make_pair(n-1,1)); l[1] = 0; r[1] = n+1;
  FOR(i,m){
    scanf("%d %d",&a,&b);
    if(a==1){
      int x = s.begin()->second,
          xl = l[x], xr = r[x];
      r[xl] = l[xr] = x;

      s.erase(s.begin());
      insert(xl,x);
      insert(x,xr);

      printf("%d\n",p[b] = x);
    }
    else {
      int x = p[b], xl = l[x], xr = r[x];
      r[xl] = xr; l[xr] = xl;
      remove(xl,x);
      remove(x,xr);
      insert(xl,xr);
    }
  }
  return 0;
}
