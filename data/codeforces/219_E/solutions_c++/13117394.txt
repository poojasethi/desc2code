#include<bits/stdc++.h>

using namespace std;

#define sd second
#define ft first
#define mp make_pair
#define MAX 1000009
#define left lt
#define right rt

int n,q,lt,rt,a,b,place,arabayeri[MAX],sol[MAX],sag[MAX],temp2;

set<pair<int,pair<int,int> > >A;
pair<int,int>temp;

pair<int,pair<int,int> > f(int l, int r){
	if(!l and r == n+1)
		return mp(-1e9,mp(1,n+1));

	if(!l)
		return mp(-r+1,mp(1,r));

	if(r == n+1)
		return mp(-n+l,mp(n,n+1));

	return mp(-(r-l)/2 , mp((r+l)/2,r));

}

int main(){
	cin >> n >> q;

	A.insert(f(0,n+1));
	
	sag[0] = n+1;
	sol[n+1] = 0;

	for(int i=1;i<=q;i++){
		cin >> a >> b;
		if(a==1){
			temp = A.begin()->sd;
			A.erase(A.begin());

			place = temp.ft;
			right = temp.sd;
			left = sol[right];
			
			sol[place] = left;
			sag[place] = right;
			sol[right] = sag[left] = place;
			
			cout << place << endl;

			arabayeri[b] = place;

			A.insert(f(left,place));	
			A.insert(f(place,right));	

		}
		if(a==2){
			temp2 = arabayeri[b];
			
			left = sol[temp2];
			right = sag[temp2];
			
			sol[right] = left;
			sag[left] = right;
		
			A.erase(f(left,temp2));
			A.erase(f(temp2,right));
			
			A.insert(f(left,right));
		}
	}
}



