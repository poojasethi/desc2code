#include <stdio.h>

#define ll long long
#define max(a, b) ((a) > (b) ? (a) : (b))

ll a[200009];
ll f[200009];
ll g[200009];
int p[200009];

int main()
{
    int n; scanf("%d", &n);

    for (int i = 1; i <= n; i++) {
        scanf("%d %I64d", &p[i], &a[i]);
    }
    for (int i = 1; i <= n; i++)
        g[i] = -1000000000000LL;

    for (int i = n; i >= 0; i--) {
        g[i] = max(g[i], f[i] + a[i]);
        if (i == 1) break;
        ll x = max(f[p[i]] + f[i], g[p[i]] + g[i]);
        ll y = max(f[p[i]] + g[i], g[p[i]] + f[i]);
        f[p[i]] = x;
        g[p[i]] = y;
    }

    printf("%I64d", max(f[1], g[1]));
}
