#include <bits/stdc++.h>
using namespace std;
const int N = 2e5+2;
#define ll long long
int effi[N],par[N];
ll dp[N][2];
const ll inf = -(1LL<<42);
int main(){
	int i,n,a;cin>>n;
	for(i=1;i<=n;++i){
		cin>>par[i]>>effi[i];
		dp[i][1]= inf;
	}
	par[1]=0;
	ll o,e;
	for(i=n;i>=1;--i){
		o = dp[i][1],e = dp[i][0];
		dp[i][1]= max(dp[i][1],e+effi[i]);
		ll p = dp[par[i]][0],v = dp[par[i]][1];
		dp[par[i]][1]= max(dp[par[i]][1],p+dp[i][1]);
		dp[par[i]][0]= max(dp[par[i]][0],v+dp[i][1]);
		dp[par[i]][1]= max(dp[par[i]][1],v+dp[i][0]);
		dp[par[i]][0]= max(dp[par[i]][0],p+dp[i][0]);
	}
	ll ret=0;
	for(i=1;i<=n;++i)
		ret= max(ret,dp[i][1]);
	cout<<ret<<endl;
}
