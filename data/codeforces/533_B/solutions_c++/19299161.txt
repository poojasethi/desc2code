#include <bits/stdc++.h>
#define MAX 200005
#define ll long long

using namespace std;

vector<ll> adjlist[MAX];

ll dp[MAX][2];

ll arr[MAX];

void dfs(ll cur)
{
    ll i,j;
    ll sum=0;
    ll len=adjlist[cur].size();
    for(i=0;i<len;i++)
    {
        dfs(adjlist[cur][i]);
        sum+=dp[adjlist[cur][i]][0];
    }
    ll temp=0;
    for(i=0;i<len;i++)
    {
        if(len%2==1)
            temp=dp[adjlist[cur][i]][1]-dp[adjlist[cur][i]][0];
        dp[cur][1]=max(dp[cur][1],sum+temp);
    }
    dp[cur][0]=max(sum,dp[cur][1]+arr[cur]);
}
int main()
{
    ll n;
    cin>>n;
    ll i,j,u,v;
    for(i=1;i<=n;i++)
    {
        cin>>u>>v;
        if(u!=-1)
        {
            adjlist[u].push_back(i);

        }
        arr[i]=v;
    }
    dfs(1);
    cout<<max(dp[1][1],dp[1][0]);
    return 0;
}
