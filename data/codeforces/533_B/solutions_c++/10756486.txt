#include<bits/stdc++.h>
using namespace std;
typedef long long lint;
const int maxn=200000+1000;
const long long inf=100000000000ll;
vector<int> v[maxn];
lint dp[maxn], dd[maxn];
lint a[maxn];

int main(){
	int n;
	cin >> n;
	for(int i=0;i<n;i++){
		int p;
		cin >> p >> a[i];
		p--;
		if(p>=0)
			v[p].push_back(i);
	}
	for(int i=n-1;i>=0;i--){
		lint sum=0, mn=inf, pick=0;
		for(int j=0;j<v[i].size();j++){
			int child=v[i][j];
			sum+=max(dp[child], dd[child]);
			if(dp[child]>dd[child])
				pick++;
			mn=min(mn, abs(dd[child]-dp[child]));
		}
		dp[i]=sum+a[i];
		dd[i]=sum;
		if(pick%2==1)
			dp[i]-=min(mn, a[i]), dd[i]-=mn;
	}
	cout << max(dp[0], dd[0]) << endl;
}
