#include<bits/stdc++.h>
using namespace std;

vector<int>children[200005];
int efficiency[200005];

long long answer(int x){
    long long len,ans,i,lo,one=1;
    len=children[x].size();
    ans=0;
    lo=1000000;
    for(i=0;i<len;i++){
        ans+=answer(children[x][i])+efficiency[children[x][i]];
        lo=min(lo,one*efficiency[children[x][i]]);
    }
    if(len&1){
        ans-=lo;
        efficiency[x]=max(efficiency[x]*one,lo);
    }
    return ans;
}

int main(){
    int n,p,i;
    cin>>n;
    cin>>p>>efficiency[1];
    for(i=2;i<=n;i++){
        cin>>p>>efficiency[i];
        children[p].push_back(i);
    }
    cout<<answer(1)+efficiency[1]<<endl;
    return 0;
}