#include<bits/stdc++.h>
using namespace std;
#define F first
#define S second
#define pb push_back
#define mp make_pair
typedef long long ll;
typedef vector<int> vi;
typedef pair<int,int> ii;
typedef vector<pair<int,int> > vii;
ll dp[200003][2];
int p[200004],a[200004];
int main()
{
	#ifndef ONLINE_JUDGE
	freopen("input.txt","r",stdin);
	//freopen("out.txt","w",stdout);
	#endif
	int n;
	cin>>n;
	for(int i=0;i<n;i++)
	{
		cin>>p[i]>>a[i];
		p[i]--;
		dp[i][1]=-1000000000000000ll;;
	}
	for(int i=n-1;i>=0;i--)
	{
		dp[i][1]=max(dp[i][1],dp[i][0]+a[i]);
		if(i==0)break;
		ll x,y;
		x=max(dp[i][0]+dp[p[i]][0], dp[i][1]+dp[p[i]][1]);
		y=max(dp[i][1]+dp[p[i]][0], dp[i][0]+dp[p[i]][1]);
		dp[p[i]][0]=x;
		dp[p[i]][1]=y;
	}
	cout<<dp[0][1]<<"\n";
	return 0;
}
