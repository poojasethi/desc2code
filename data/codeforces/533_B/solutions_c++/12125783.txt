#include <bits/stdc++.h>

const int N = 200005;

int p[N], a[N], dd[N], cc[N];
long long f[N];

int main() {
    int n;
    scanf("%d", &n);
    for (int i = 0; i < n; i++) {
        scanf("%d%d", p+i, a+i);
        p[i]--;
        dd[i] = 0;
        f[i] = a[i];
        cc[i] = -1;
    }

    for (int i = n-1; i >= 0; i--) {
        if (dd[i]&1) {
            if (a[i] > cc[i]) {
                f[i] -= cc[i];
                cc[i] = a[i];
            }
            else {
                f[i] -= a[i];
            }
        }
        else {
            cc[i] = a[i];
        }
        if (i > 0) {
            if (cc[p[i]] == -1 || cc[p[i]] > cc[i]) cc[p[i]] = cc[i];
            dd[p[i]]++;
            f[p[i]] += f[i];
        }
    }

    printf("%I64d", f[0]);
    return 0;
}
