#include <cstdio>
#include <cstring>
#include <algorithm>
using namespace std;
#define INF 1000000
typedef long long LL;
const int N = 200005;
int fa[N], a[N];
LL dp[N][2];
int main()
{
    int n;
    //freopen("in.txt","r",stdin);
    scanf("%d",&n);
    for(int i=1; i<=n; i++)
    {
        scanf("%d%d",&fa[i],&a[i]);
        dp[i][0] = 0;
        dp[i][1] = -(LL)INF;
    }
    for(int i=n; i>0; i--)
    {
        dp[i][1] = max(dp[i][1],dp[i][0]+a[i]);
        if(i==1)break;
        LL n0,n1;
        n0 = max(dp[fa[i]][0]+dp[i][0],dp[fa[i]][1]+dp[i][1]);
        n1 = max(dp[fa[i]][1]+dp[i][0],dp[fa[i]][0]+dp[i][1]);
        dp[fa[i]][0] = n0;
        dp[fa[i]][1] = n1;
    }
    printf("%I64d\n",dp[1][1]);
}
