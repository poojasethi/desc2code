#include <bits/stdc++.h>
using namespace std;

#define ll long long
const int INF = 1000000000;

#define fr(i,n) for(int i=0;i<n;i++)
#define fru(i,a,b) for(int i=a;i<=b;i++)
#define frd(i,a,b) for(int i=a;i>=b;i--)

#define N 200010

int n, k, m;
ll a[N], p[N];
ll dp[N][2], val;

ll max(ll x, ll y) {
    return x > y ? x : y;
}

int main() {
   ios_base::sync_with_stdio(0);
   
   cin >> n;

   fru(i, 1, n) 
   {
       cin >> p[i] >> a[i];
       dp[i][1] = -1000000000000;
   }
   
   frd(i, n, 1)
   {
       dp[i][1] = max(dp[i][1], dp[i][0] + a[i]);

       if(i > 1)
       {
           val = max(dp[p[i]][0] + dp[i][0], dp[p[i]][1] + dp[i][1]);       
           dp[p[i]][1] = max(dp[p[i]][1] + dp[i][0], dp[p[i]][0] + dp[i][1]);
           dp[p[i]][0] = val;
       }
   }

   cout << max(dp[1][1], dp[1][0]);
   return 0;
}