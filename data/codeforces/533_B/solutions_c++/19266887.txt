#include <stdio.h>
#include <set>

using namespace std;

typedef long long ll;

typedef pair<ll,ll> ii;

#define SZ 200005
#define INF 1000000000

set<ll> G[SZ];
ll a[SZ],n;

ii dfs(ll u){
  set<ll>::iterator it;
  ii ans(0,-INF);
  for(it=G[u].begin();it!=G[u].end();it++){
    ll v=*it;
    ll f=ans.first,s=ans.second;
    ii tmp=dfs(v);
    ans.first=max(f+tmp.first,s+tmp.second);
    ans.second=max(f+tmp.second,s+tmp.first);
  }
  ll f=ans.first,s=ans.second;
  //ans.first=max(ans.first,s+a[u]);
  ans.second=max(ans.second,f+a[u]);
  //printf("%I64d:(%I64d,%I64d)\n",u,ans.first,ans.second);
  return ans;
}

int main(){
  scanf("%I64d",&n);
  for(ll i=1,p;i<=n;i++){
    scanf("%I64d%I64d",&p,&a[i]);
    if(p!=-1)
      G[p].insert(i);
  }
  ii tmp=dfs(1);
  printf("%I64d\n",max(tmp.first,tmp.second));
  return 0;
}
