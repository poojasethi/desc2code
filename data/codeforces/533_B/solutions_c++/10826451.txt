#include<bits/stdc++.h>

using namespace std;

#define pb push_back
#define mininf INT_MIN
#define int long long 

int n,root;
int A[200005];
int DP[200005][2][2];

vector<int> V[200005];

int f(int x){
	
	int &a=DP[x][0][0],&b=DP[x][0][1],&c=DP[x][1][0],&d=DP[x][1][1],i,t1,t2,t3,t4;

	c=A[x];
	d=mininf;
	b=mininf;

	for(i=0 ; i<V[x].size() ; i++){
		f(V[x][i]);
		t1=max(b+DP[V[x][i]][1][0],max(b+DP[V[x][i]][0][1],a+DP[V[x][i]][0][0]));
		t2=max(b+DP[V[x][i]][0][0],max(a+DP[V[x][i]][1][0],a+DP[V[x][i]][0][1]));
		t3=max(c+DP[V[x][i]][0][0],max(d+DP[V[x][i]][1][0],d+DP[V[x][i]][0][1]));
		t4=max(c+DP[V[x][i]][1][0],max(c+DP[V[x][i]][0][1],d+DP[V[x][i]][0][0]));
		a=t1;
		b=t2;
		c=t3;
		d=t4;
	}
}

main(){

	int i;

	cin>>n;

	for(i=1 ; i<=n ; i++){
		scanf("%d %d",&root,A+i);
		V[root].pb(i);	
	}

	f(1);

	cout<<max(DP[1][1][0],max(DP[1][0][1],DP[1][0][0]));
}
