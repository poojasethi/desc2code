#include <cstdio>
#include <algorithm>
#define rec(i, x, n) for(int i = x; i <= n; i++)
#define ref(i, n, x) for(int i = n; i >= x; i--)
using namespace std;
typedef long long LL;
const int maxn = 200005;
const LL inf = (LL)0x3f3f3f3f * 0x3f3f3f3f;
int n, fa[maxn], w[maxn];
LL dp[maxn][2];
inline int iread() {
	int f = 1, x = 0; char ch = getchar();
	for(; ch < '0' || ch > '9'; ch = getchar()) f = ch == '-' ? -1 : 1;
	for(; ch >= '0' && ch <= '9'; ch = getchar()) x = x * 10 + ch - '0';
	return f * x;
}
int main() {
	n = iread(); rec(i, 1, n) fa[i] = iread(), w[i] = iread(), dp[i][0] = 0, dp[i][1] = -inf;
	ref(i, n, 1) {
		dp[i][1] = max(dp[i][1], dp[i][0] + w[i]);
		if(i == 1) break;
		LL w0 = max(dp[fa[i]][0] + dp[i][0], dp[fa[i]][1] + dp[i][1]), w1 = max(dp[fa[i]][0] + dp[i][1], dp[fa[i]][1] + dp[i][0]);
		dp[fa[i]][0] = w0; dp[fa[i]][1] = w1;
	}
	printf("%I64d\n", dp[1][1]);
	return 0;
}
