#include<cstdio>
#include<algorithm>
#include<vector>
#define MAXN 200010
using namespace std;
int n;
int a[MAXN];
long long f[MAXN][2];
vector<int>g[MAXN];
void dfs(int u)
{
    long long s0,s1;
    f[u][0]=0,f[u][1]=-1e18;
    for(int i=0;i<g[u].size();i++)
    {
        int v=g[u][i];
        dfs(v);
        s0=max(f[u][0]+f[v][0],f[u][1]+f[v][1]);
        s1=max(f[u][0]+f[v][1],f[u][1]+f[v][0]);
        f[u][0]=s0,f[u][1]=s1;
    }
    f[u][1]=max(f[u][1],f[u][0]+a[u]);
}
int main()
{
    int i,j;
    scanf("%d",&n);
    scanf("%*d%d",a+1);
    for(i=2;i<=n;i++)
    {
        scanf("%d%d",&j,a+i);
        g[j].push_back(i);
    }
    dfs(1);
    printf("%I64d\n",max(f[1][0],f[1][1]));
}